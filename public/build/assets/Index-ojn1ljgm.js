import{b6 as Oa,w as Ai,c as Ce,m as ft,l as Q,ae as ei,g as k,b as S,f as c,p as fe,t as N,F as $e,i as ot,_ as Db,o as ur,n as gu,r as U,A as Nb,z as Lb,s as V,e as Ut,u as ce,h as $b,d as bu,a as Hd,j as Vt,v as as,y as Js,K as Eo,T as zd}from"./app-BnsnJ5Tj.js";import{_ as Pb}from"./Master-BNU6dmEI.js";import Kd from"./ConfirmOrderModal-Dl6DExHS.js";import Mb from"./ReceiptModal-e-zsGiIK.js";import Rb from"./PromoModal-D5NiJEig.js";import Fb from"./KotModal-Dpi5fVqo.js";import{u as qb}from"./useFormatters-CwVh0Mdn.js";import Bb from"./PosOrdersModal-ByBQOVxK.js";import{F as Wb}from"./FilterModal-BpnJZSdH.js";import{s as Yd}from"./index-DWk0iixY.js";import Ub from"./DiscountModal-x5Yxw0OL.js";import Vb from"./PendingOrdersModal-BEqDfPJt.js";import{P as Gd}from"./pencil-CFBODDVq.js";import{E as Hb}from"./eye-RrEOnLQ2.js";import"./index-RLFzO3uW.js";import"./createLucideIcon-BCt5CEW6.js";import"./index-DoPdJjGw.js";import"./index-q6Axaa4L.js";import"./sun-BXp2FZMG.js";import"./StripePayment-BXb9D-aP.js";import"./SplitPayment-BfM9o9yA.js";import"./Receipt-BHrr9s3r.js";import"./clock-BSyI_oaY.js";import"./circle-check-big-DGA154F_.js";import"./circle-x-lHbPgc8i.js";import"./printer-J3hcUXm_.js";import"./index-B9CcrpiB.js";import"./index-Bb_fSmW2.js";import"./index-CfwxJrkm.js";var Ht="top",cn="bottom",dn="right",zt="left",Ha="auto",xr=[Ht,cn,dn,zt],Ii="start",vr="end",Lf="clippingParents",Vu="viewport",fr="popper",$f="reference",Mu=xr.reduce(function(u,n){return u.concat([n+"-"+Ii,n+"-"+vr])},[]),Hu=[].concat(xr,[Ha]).reduce(function(u,n){return u.concat([n,n+"-"+Ii,n+"-"+vr])},[]),Pf="beforeRead",Mf="read",Rf="afterRead",Ff="beforeMain",qf="main",Bf="afterMain",Wf="beforeWrite",Uf="write",Vf="afterWrite",Hf=[Pf,Mf,Rf,Ff,qf,Bf,Wf,Uf,Vf];function cs(u){return u?(u.nodeName||"").toLowerCase():null}function fn(u){if(u==null)return window;if(u.toString()!=="[object Window]"){var n=u.ownerDocument;return n&&n.defaultView||window}return u}function Oi(u){var n=fn(u).Element;return u instanceof n||u instanceof Element}function Cn(u){var n=fn(u).HTMLElement;return u instanceof n||u instanceof HTMLElement}function zu(u){if(typeof ShadowRoot>"u")return!1;var n=fn(u).ShadowRoot;return u instanceof n||u instanceof ShadowRoot}function zb(u){var n=u.state;Object.keys(n.elements).forEach(function(i){var f=n.styles[i]||{},v=n.attributes[i]||{},y=n.elements[i];!Cn(y)||!cs(y)||(Object.assign(y.style,f),Object.keys(v).forEach(function(x){var T=v[x];T===!1?y.removeAttribute(x):y.setAttribute(x,T===!0?"":T)}))})}function Kb(u){var n=u.state,i={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,i.popper),n.styles=i,n.elements.arrow&&Object.assign(n.elements.arrow.style,i.arrow),function(){Object.keys(n.elements).forEach(function(f){var v=n.elements[f],y=n.attributes[f]||{},x=Object.keys(n.styles.hasOwnProperty(f)?n.styles[f]:i[f]),T=x.reduce(function(C,q){return C[q]="",C},{});!Cn(v)||!cs(v)||(Object.assign(v.style,T),Object.keys(y).forEach(function(C){v.removeAttribute(C)}))})}}const Ku={name:"applyStyles",enabled:!0,phase:"write",fn:zb,effect:Kb,requires:["computeStyles"]};function ls(u){return u.split("-")[0]}var Si=Math.max,Ba=Math.min,mr=Math.round;function Ru(){var u=navigator.userAgentData;return u!=null&&u.brands&&Array.isArray(u.brands)?u.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function zf(){return!/^((?!chrome|android).)*safari/i.test(Ru())}function gr(u,n,i){n===void 0&&(n=!1),i===void 0&&(i=!1);var f=u.getBoundingClientRect(),v=1,y=1;n&&Cn(u)&&(v=u.offsetWidth>0&&mr(f.width)/u.offsetWidth||1,y=u.offsetHeight>0&&mr(f.height)/u.offsetHeight||1);var x=Oi(u)?fn(u):window,T=x.visualViewport,C=!zf()&&i,q=(f.left+(C&&T?T.offsetLeft:0))/v,M=(f.top+(C&&T?T.offsetTop:0))/y,H=f.width/v,X=f.height/y;return{width:H,height:X,top:M,right:q+H,bottom:M+X,left:q,x:q,y:M}}function Yu(u){var n=gr(u),i=u.offsetWidth,f=u.offsetHeight;return Math.abs(n.width-i)<=1&&(i=n.width),Math.abs(n.height-f)<=1&&(f=n.height),{x:u.offsetLeft,y:u.offsetTop,width:i,height:f}}function Kf(u,n){var i=n.getRootNode&&n.getRootNode();if(u.contains(n))return!0;if(i&&zu(i)){var f=n;do{if(f&&u.isSameNode(f))return!0;f=f.parentNode||f.host}while(f)}return!1}function Ls(u){return fn(u).getComputedStyle(u)}function Yb(u){return["table","td","th"].indexOf(cs(u))>=0}function ii(u){return((Oi(u)?u.ownerDocument:u.document)||window.document).documentElement}function za(u){return cs(u)==="html"?u:u.assignedSlot||u.parentNode||(zu(u)?u.host:null)||ii(u)}function jd(u){return!Cn(u)||Ls(u).position==="fixed"?null:u.offsetParent}function Gb(u){var n=/firefox/i.test(Ru()),i=/Trident/i.test(Ru());if(i&&Cn(u)){var f=Ls(u);if(f.position==="fixed")return null}var v=za(u);for(zu(v)&&(v=v.host);Cn(v)&&["html","body"].indexOf(cs(v))<0;){var y=Ls(v);if(y.transform!=="none"||y.perspective!=="none"||y.contain==="paint"||["transform","perspective"].indexOf(y.willChange)!==-1||n&&y.willChange==="filter"||n&&y.filter&&y.filter!=="none")return v;v=v.parentNode}return null}function Oo(u){for(var n=fn(u),i=jd(u);i&&Yb(i)&&Ls(i).position==="static";)i=jd(i);return i&&(cs(i)==="html"||cs(i)==="body"&&Ls(i).position==="static")?n:i||Gb(u)||n}function Gu(u){return["top","bottom"].indexOf(u)>=0?"x":"y"}function Co(u,n,i){return Si(u,Ba(n,i))}function jb(u,n,i){var f=Co(u,n,i);return f>i?i:f}function Yf(){return{top:0,right:0,bottom:0,left:0}}function Gf(u){return Object.assign({},Yf(),u)}function jf(u,n){return n.reduce(function(i,f){return i[f]=u,i},{})}var Qb=function(n,i){return n=typeof n=="function"?n(Object.assign({},i.rects,{placement:i.placement})):n,Gf(typeof n!="number"?n:jf(n,xr))};function Xb(u){var n,i=u.state,f=u.name,v=u.options,y=i.elements.arrow,x=i.modifiersData.popperOffsets,T=ls(i.placement),C=Gu(T),q=[zt,dn].indexOf(T)>=0,M=q?"height":"width";if(!(!y||!x)){var H=Qb(v.padding,i),X=Yu(y),Y=C==="y"?Ht:zt,he=C==="y"?cn:dn,G=i.rects.reference[M]+i.rects.reference[C]-x[C]-i.rects.popper[M],te=x[C]-i.rects.reference[C],re=Oo(y),xe=re?C==="y"?re.clientHeight||0:re.clientWidth||0:0,_e=G/2-te/2,de=H[Y],ae=xe-X[M]-H[he],Ae=xe/2-X[M]/2+_e,Se=Co(de,Ae,ae),Ue=C;i.modifiersData[f]=(n={},n[Ue]=Se,n.centerOffset=Se-Ae,n)}}function Jb(u){var n=u.state,i=u.options,f=i.element,v=f===void 0?"[data-popper-arrow]":f;v!=null&&(typeof v=="string"&&(v=n.elements.popper.querySelector(v),!v)||Kf(n.elements.popper,v)&&(n.elements.arrow=v))}const Qf={name:"arrow",enabled:!0,phase:"main",fn:Xb,effect:Jb,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function br(u){return u.split("-")[1]}var Zb={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ey(u,n){var i=u.x,f=u.y,v=n.devicePixelRatio||1;return{x:mr(i*v)/v||0,y:mr(f*v)/v||0}}function Qd(u){var n,i=u.popper,f=u.popperRect,v=u.placement,y=u.variation,x=u.offsets,T=u.position,C=u.gpuAcceleration,q=u.adaptive,M=u.roundOffsets,H=u.isFixed,X=x.x,Y=X===void 0?0:X,he=x.y,G=he===void 0?0:he,te=typeof M=="function"?M({x:Y,y:G}):{x:Y,y:G};Y=te.x,G=te.y;var re=x.hasOwnProperty("x"),xe=x.hasOwnProperty("y"),_e=zt,de=Ht,ae=window;if(q){var Ae=Oo(i),Se="clientHeight",Ue="clientWidth";if(Ae===fn(i)&&(Ae=ii(i),Ls(Ae).position!=="static"&&T==="absolute"&&(Se="scrollHeight",Ue="scrollWidth")),Ae=Ae,v===Ht||(v===zt||v===dn)&&y===vr){de=cn;var Ve=H&&Ae===ae&&ae.visualViewport?ae.visualViewport.height:Ae[Se];G-=Ve-f.height,G*=C?1:-1}if(v===zt||(v===Ht||v===cn)&&y===vr){_e=dn;var Ke=H&&Ae===ae&&ae.visualViewport?ae.visualViewport.width:Ae[Ue];Y-=Ke-f.width,Y*=C?1:-1}}var Oe=Object.assign({position:T},q&&Zb),pt=M===!0?ey({x:Y,y:G},fn(i)):{x:Y,y:G};if(Y=pt.x,G=pt.y,C){var Ze;return Object.assign({},Oe,(Ze={},Ze[de]=xe?"0":"",Ze[_e]=re?"0":"",Ze.transform=(ae.devicePixelRatio||1)<=1?"translate("+Y+"px, "+G+"px)":"translate3d("+Y+"px, "+G+"px, 0)",Ze))}return Object.assign({},Oe,(n={},n[de]=xe?G+"px":"",n[_e]=re?Y+"px":"",n.transform="",n))}function ty(u){var n=u.state,i=u.options,f=i.gpuAcceleration,v=f===void 0?!0:f,y=i.adaptive,x=y===void 0?!0:y,T=i.roundOffsets,C=T===void 0?!0:T,q={placement:ls(n.placement),variation:br(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:v,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,Qd(Object.assign({},q,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:x,roundOffsets:C})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,Qd(Object.assign({},q,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:C})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}const ju={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ty,data:{}};var ka={passive:!0};function ny(u){var n=u.state,i=u.instance,f=u.options,v=f.scroll,y=v===void 0?!0:v,x=f.resize,T=x===void 0?!0:x,C=fn(n.elements.popper),q=[].concat(n.scrollParents.reference,n.scrollParents.popper);return y&&q.forEach(function(M){M.addEventListener("scroll",i.update,ka)}),T&&C.addEventListener("resize",i.update,ka),function(){y&&q.forEach(function(M){M.removeEventListener("scroll",i.update,ka)}),T&&C.removeEventListener("resize",i.update,ka)}}const Qu={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ny,data:{}};var sy={left:"right",right:"left",bottom:"top",top:"bottom"};function Ra(u){return u.replace(/left|right|bottom|top/g,function(n){return sy[n]})}var iy={start:"end",end:"start"};function Xd(u){return u.replace(/start|end/g,function(n){return iy[n]})}function Xu(u){var n=fn(u),i=n.pageXOffset,f=n.pageYOffset;return{scrollLeft:i,scrollTop:f}}function Ju(u){return gr(ii(u)).left+Xu(u).scrollLeft}function ry(u,n){var i=fn(u),f=ii(u),v=i.visualViewport,y=f.clientWidth,x=f.clientHeight,T=0,C=0;if(v){y=v.width,x=v.height;var q=zf();(q||!q&&n==="fixed")&&(T=v.offsetLeft,C=v.offsetTop)}return{width:y,height:x,x:T+Ju(u),y:C}}function oy(u){var n,i=ii(u),f=Xu(u),v=(n=u.ownerDocument)==null?void 0:n.body,y=Si(i.scrollWidth,i.clientWidth,v?v.scrollWidth:0,v?v.clientWidth:0),x=Si(i.scrollHeight,i.clientHeight,v?v.scrollHeight:0,v?v.clientHeight:0),T=-f.scrollLeft+Ju(u),C=-f.scrollTop;return Ls(v||i).direction==="rtl"&&(T+=Si(i.clientWidth,v?v.clientWidth:0)-y),{width:y,height:x,x:T,y:C}}function Zu(u){var n=Ls(u),i=n.overflow,f=n.overflowX,v=n.overflowY;return/auto|scroll|overlay|hidden/.test(i+v+f)}function Xf(u){return["html","body","#document"].indexOf(cs(u))>=0?u.ownerDocument.body:Cn(u)&&Zu(u)?u:Xf(za(u))}function To(u,n){var i;n===void 0&&(n=[]);var f=Xf(u),v=f===((i=u.ownerDocument)==null?void 0:i.body),y=fn(f),x=v?[y].concat(y.visualViewport||[],Zu(f)?f:[]):f,T=n.concat(x);return v?T:T.concat(To(za(x)))}function Fu(u){return Object.assign({},u,{left:u.x,top:u.y,right:u.x+u.width,bottom:u.y+u.height})}function ay(u,n){var i=gr(u,!1,n==="fixed");return i.top=i.top+u.clientTop,i.left=i.left+u.clientLeft,i.bottom=i.top+u.clientHeight,i.right=i.left+u.clientWidth,i.width=u.clientWidth,i.height=u.clientHeight,i.x=i.left,i.y=i.top,i}function Jd(u,n,i){return n===Vu?Fu(ry(u,i)):Oi(n)?ay(n,i):Fu(oy(ii(u)))}function ly(u){var n=To(za(u)),i=["absolute","fixed"].indexOf(Ls(u).position)>=0,f=i&&Cn(u)?Oo(u):u;return Oi(f)?n.filter(function(v){return Oi(v)&&Kf(v,f)&&cs(v)!=="body"}):[]}function uy(u,n,i,f){var v=n==="clippingParents"?ly(u):[].concat(n),y=[].concat(v,[i]),x=y[0],T=y.reduce(function(C,q){var M=Jd(u,q,f);return C.top=Si(M.top,C.top),C.right=Ba(M.right,C.right),C.bottom=Ba(M.bottom,C.bottom),C.left=Si(M.left,C.left),C},Jd(u,x,f));return T.width=T.right-T.left,T.height=T.bottom-T.top,T.x=T.left,T.y=T.top,T}function Jf(u){var n=u.reference,i=u.element,f=u.placement,v=f?ls(f):null,y=f?br(f):null,x=n.x+n.width/2-i.width/2,T=n.y+n.height/2-i.height/2,C;switch(v){case Ht:C={x,y:n.y-i.height};break;case cn:C={x,y:n.y+n.height};break;case dn:C={x:n.x+n.width,y:T};break;case zt:C={x:n.x-i.width,y:T};break;default:C={x:n.x,y:n.y}}var q=v?Gu(v):null;if(q!=null){var M=q==="y"?"height":"width";switch(y){case Ii:C[q]=C[q]-(n[M]/2-i[M]/2);break;case vr:C[q]=C[q]+(n[M]/2-i[M]/2);break}}return C}function yr(u,n){n===void 0&&(n={});var i=n,f=i.placement,v=f===void 0?u.placement:f,y=i.strategy,x=y===void 0?u.strategy:y,T=i.boundary,C=T===void 0?Lf:T,q=i.rootBoundary,M=q===void 0?Vu:q,H=i.elementContext,X=H===void 0?fr:H,Y=i.altBoundary,he=Y===void 0?!1:Y,G=i.padding,te=G===void 0?0:G,re=Gf(typeof te!="number"?te:jf(te,xr)),xe=X===fr?$f:fr,_e=u.rects.popper,de=u.elements[he?xe:X],ae=uy(Oi(de)?de:de.contextElement||ii(u.elements.popper),C,M,x),Ae=gr(u.elements.reference),Se=Jf({reference:Ae,element:_e,placement:v}),Ue=Fu(Object.assign({},_e,Se)),Ve=X===fr?Ue:Ae,Ke={top:ae.top-Ve.top+re.top,bottom:Ve.bottom-ae.bottom+re.bottom,left:ae.left-Ve.left+re.left,right:Ve.right-ae.right+re.right},Oe=u.modifiersData.offset;if(X===fr&&Oe){var pt=Oe[v];Object.keys(Ke).forEach(function(Ze){var pn=[dn,cn].indexOf(Ze)>=0?1:-1,On=[Ht,cn].indexOf(Ze)>=0?"y":"x";Ke[Ze]+=pt[On]*pn})}return Ke}function cy(u,n){n===void 0&&(n={});var i=n,f=i.placement,v=i.boundary,y=i.rootBoundary,x=i.padding,T=i.flipVariations,C=i.allowedAutoPlacements,q=C===void 0?Hu:C,M=br(f),H=M?T?Mu:Mu.filter(function(he){return br(he)===M}):xr,X=H.filter(function(he){return q.indexOf(he)>=0});X.length===0&&(X=H);var Y=X.reduce(function(he,G){return he[G]=yr(u,{placement:G,boundary:v,rootBoundary:y,padding:x})[ls(G)],he},{});return Object.keys(Y).sort(function(he,G){return Y[he]-Y[G]})}function dy(u){if(ls(u)===Ha)return[];var n=Ra(u);return[Xd(u),n,Xd(n)]}function fy(u){var n=u.state,i=u.options,f=u.name;if(!n.modifiersData[f]._skip){for(var v=i.mainAxis,y=v===void 0?!0:v,x=i.altAxis,T=x===void 0?!0:x,C=i.fallbackPlacements,q=i.padding,M=i.boundary,H=i.rootBoundary,X=i.altBoundary,Y=i.flipVariations,he=Y===void 0?!0:Y,G=i.allowedAutoPlacements,te=n.options.placement,re=ls(te),xe=re===te,_e=C||(xe||!he?[Ra(te)]:dy(te)),de=[te].concat(_e).reduce(function(Vn,wt){return Vn.concat(ls(wt)===Ha?cy(n,{placement:wt,boundary:M,rootBoundary:H,padding:q,flipVariations:he,allowedAutoPlacements:G}):wt)},[]),ae=n.rects.reference,Ae=n.rects.popper,Se=new Map,Ue=!0,Ve=de[0],Ke=0;Ke<de.length;Ke++){var Oe=de[Ke],pt=ls(Oe),Ze=br(Oe)===Ii,pn=[Ht,cn].indexOf(pt)>=0,On=pn?"width":"height",gt=yr(n,{placement:Oe,boundary:M,rootBoundary:H,altBoundary:X,padding:q}),ve=pn?Ze?dn:zt:Ze?cn:Ht;ae[On]>Ae[On]&&(ve=Ra(ve));var It=Ra(ve),Kt=[];if(y&&Kt.push(gt[pt]<=0),T&&Kt.push(gt[ve]<=0,gt[It]<=0),Kt.every(function(Vn){return Vn})){Ve=Oe,Ue=!1;break}Se.set(Oe,Kt)}if(Ue)for(var hn=he?3:1,yt=function(wt){var _n=de.find(function(Ps){var Lt=Se.get(Ps);if(Lt)return Lt.slice(0,wt).every(function(kn){return kn})});if(_n)return Ve=_n,"break"},Et=hn;Et>0;Et--){var Un=yt(Et);if(Un==="break")break}n.placement!==Ve&&(n.modifiersData[f]._skip=!0,n.placement=Ve,n.reset=!0)}}const Zf={name:"flip",enabled:!0,phase:"main",fn:fy,requiresIfExists:["offset"],data:{_skip:!1}};function Zd(u,n,i){return i===void 0&&(i={x:0,y:0}),{top:u.top-n.height-i.y,right:u.right-n.width+i.x,bottom:u.bottom-n.height+i.y,left:u.left-n.width-i.x}}function ef(u){return[Ht,dn,cn,zt].some(function(n){return u[n]>=0})}function py(u){var n=u.state,i=u.name,f=n.rects.reference,v=n.rects.popper,y=n.modifiersData.preventOverflow,x=yr(n,{elementContext:"reference"}),T=yr(n,{altBoundary:!0}),C=Zd(x,f),q=Zd(T,v,y),M=ef(C),H=ef(q);n.modifiersData[i]={referenceClippingOffsets:C,popperEscapeOffsets:q,isReferenceHidden:M,hasPopperEscaped:H},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":M,"data-popper-escaped":H})}const ep={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:py};function hy(u,n,i){var f=ls(u),v=[zt,Ht].indexOf(f)>=0?-1:1,y=typeof i=="function"?i(Object.assign({},n,{placement:u})):i,x=y[0],T=y[1];return x=x||0,T=(T||0)*v,[zt,dn].indexOf(f)>=0?{x:T,y:x}:{x,y:T}}function _y(u){var n=u.state,i=u.options,f=u.name,v=i.offset,y=v===void 0?[0,0]:v,x=Hu.reduce(function(M,H){return M[H]=hy(H,n.rects,y),M},{}),T=x[n.placement],C=T.x,q=T.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=C,n.modifiersData.popperOffsets.y+=q),n.modifiersData[f]=x}const tp={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:_y};function vy(u){var n=u.state,i=u.name;n.modifiersData[i]=Jf({reference:n.rects.reference,element:n.rects.popper,placement:n.placement})}const ec={name:"popperOffsets",enabled:!0,phase:"read",fn:vy,data:{}};function my(u){return u==="x"?"y":"x"}function gy(u){var n=u.state,i=u.options,f=u.name,v=i.mainAxis,y=v===void 0?!0:v,x=i.altAxis,T=x===void 0?!1:x,C=i.boundary,q=i.rootBoundary,M=i.altBoundary,H=i.padding,X=i.tether,Y=X===void 0?!0:X,he=i.tetherOffset,G=he===void 0?0:he,te=yr(n,{boundary:C,rootBoundary:q,padding:H,altBoundary:M}),re=ls(n.placement),xe=br(n.placement),_e=!xe,de=Gu(re),ae=my(de),Ae=n.modifiersData.popperOffsets,Se=n.rects.reference,Ue=n.rects.popper,Ve=typeof G=="function"?G(Object.assign({},n.rects,{placement:n.placement})):G,Ke=typeof Ve=="number"?{mainAxis:Ve,altAxis:Ve}:Object.assign({mainAxis:0,altAxis:0},Ve),Oe=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,pt={x:0,y:0};if(Ae){if(y){var Ze,pn=de==="y"?Ht:zt,On=de==="y"?cn:dn,gt=de==="y"?"height":"width",ve=Ae[de],It=ve+te[pn],Kt=ve-te[On],hn=Y?-Ue[gt]/2:0,yt=xe===Ii?Se[gt]:Ue[gt],Et=xe===Ii?-Ue[gt]:-Se[gt],Un=n.elements.arrow,Vn=Y&&Un?Yu(Un):{width:0,height:0},wt=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:Yf(),_n=wt[pn],Ps=wt[On],Lt=Co(0,Se[gt],Vn[gt]),kn=_e?Se[gt]/2-hn-Lt-_n-Ke.mainAxis:yt-Lt-_n-Ke.mainAxis,Sr=_e?-Se[gt]/2+hn+Lt+Ps+Ke.mainAxis:Et+Lt+Ps+Ke.mainAxis,Hn=n.elements.arrow&&Oo(n.elements.arrow),ds=Hn?de==="y"?Hn.clientTop||0:Hn.clientLeft||0:0,ai=(Ze=Oe?.[de])!=null?Ze:0,Ye=ve+kn-ai-ds,fs=ve+Sr-ai,ps=Co(Y?Ba(It,Ye):It,ve,Y?Si(Kt,fs):Kt);Ae[de]=ps,pt[de]=ps-ve}if(T){var Yt,li=de==="x"?Ht:zt,Ni=de==="x"?cn:dn,et=Ae[ae],le=ae==="y"?"height":"width",Ge=et+te[li],ht=et-te[Ni],xt=[Ht,zt].indexOf(re)!==-1,zn=(Yt=Oe?.[ae])!=null?Yt:0,Kn=xt?Ge:et-Se[le]-Ue[le]-zn+Ke.altAxis,Yn=xt?et+Se[le]+Ue[le]-zn-Ke.altAxis:ht,Ot=Y&&xt?jb(Kn,et,Yn):Co(Y?Kn:Ge,et,Y?Yn:ht);Ae[ae]=Ot,pt[ae]=Ot-et}n.modifiersData[f]=pt}}const np={name:"preventOverflow",enabled:!0,phase:"main",fn:gy,requiresIfExists:["offset"]};function by(u){return{scrollLeft:u.scrollLeft,scrollTop:u.scrollTop}}function yy(u){return u===fn(u)||!Cn(u)?Xu(u):by(u)}function Ey(u){var n=u.getBoundingClientRect(),i=mr(n.width)/u.offsetWidth||1,f=mr(n.height)/u.offsetHeight||1;return i!==1||f!==1}function wy(u,n,i){i===void 0&&(i=!1);var f=Cn(n),v=Cn(n)&&Ey(n),y=ii(n),x=gr(u,v,i),T={scrollLeft:0,scrollTop:0},C={x:0,y:0};return(f||!f&&!i)&&((cs(n)!=="body"||Zu(y))&&(T=yy(n)),Cn(n)?(C=gr(n,!0),C.x+=n.clientLeft,C.y+=n.clientTop):y&&(C.x=Ju(y))),{x:x.left+T.scrollLeft-C.x,y:x.top+T.scrollTop-C.y,width:x.width,height:x.height}}function xy(u){var n=new Map,i=new Set,f=[];u.forEach(function(y){n.set(y.name,y)});function v(y){i.add(y.name);var x=[].concat(y.requires||[],y.requiresIfExists||[]);x.forEach(function(T){if(!i.has(T)){var C=n.get(T);C&&v(C)}}),f.push(y)}return u.forEach(function(y){i.has(y.name)||v(y)}),f}function Ay(u){var n=xy(u);return Hf.reduce(function(i,f){return i.concat(n.filter(function(v){return v.phase===f}))},[])}function Cy(u){var n;return function(){return n||(n=new Promise(function(i){Promise.resolve().then(function(){n=void 0,i(u())})})),n}}function Ty(u){var n=u.reduce(function(i,f){var v=i[f.name];return i[f.name]=v?Object.assign({},v,f,{options:Object.assign({},v.options,f.options),data:Object.assign({},v.data,f.data)}):f,i},{});return Object.keys(n).map(function(i){return n[i]})}var tf={placement:"bottom",modifiers:[],strategy:"absolute"};function nf(){for(var u=arguments.length,n=new Array(u),i=0;i<u;i++)n[i]=arguments[i];return!n.some(function(f){return!(f&&typeof f.getBoundingClientRect=="function")})}function Ka(u){u===void 0&&(u={});var n=u,i=n.defaultModifiers,f=i===void 0?[]:i,v=n.defaultOptions,y=v===void 0?tf:v;return function(T,C,q){q===void 0&&(q=y);var M={placement:"bottom",orderedModifiers:[],options:Object.assign({},tf,y),modifiersData:{},elements:{reference:T,popper:C},attributes:{},styles:{}},H=[],X=!1,Y={state:M,setOptions:function(re){var xe=typeof re=="function"?re(M.options):re;G(),M.options=Object.assign({},y,M.options,xe),M.scrollParents={reference:Oi(T)?To(T):T.contextElement?To(T.contextElement):[],popper:To(C)};var _e=Ay(Ty([].concat(f,M.options.modifiers)));return M.orderedModifiers=_e.filter(function(de){return de.enabled}),he(),Y.update()},forceUpdate:function(){if(!X){var re=M.elements,xe=re.reference,_e=re.popper;if(nf(xe,_e)){M.rects={reference:wy(xe,Oo(_e),M.options.strategy==="fixed"),popper:Yu(_e)},M.reset=!1,M.placement=M.options.placement,M.orderedModifiers.forEach(function(Ke){return M.modifiersData[Ke.name]=Object.assign({},Ke.data)});for(var de=0;de<M.orderedModifiers.length;de++){if(M.reset===!0){M.reset=!1,de=-1;continue}var ae=M.orderedModifiers[de],Ae=ae.fn,Se=ae.options,Ue=Se===void 0?{}:Se,Ve=ae.name;typeof Ae=="function"&&(M=Ae({state:M,options:Ue,name:Ve,instance:Y})||M)}}}},update:Cy(function(){return new Promise(function(te){Y.forceUpdate(),te(M)})}),destroy:function(){G(),X=!0}};if(!nf(T,C))return Y;Y.setOptions(q).then(function(te){!X&&q.onFirstUpdate&&q.onFirstUpdate(te)});function he(){M.orderedModifiers.forEach(function(te){var re=te.name,xe=te.options,_e=xe===void 0?{}:xe,de=te.effect;if(typeof de=="function"){var ae=de({state:M,name:re,instance:Y,options:_e}),Ae=function(){};H.push(ae||Ae)}})}function G(){H.forEach(function(te){return te()}),H=[]}return Y}}var Sy=Ka(),Iy=[Qu,ec,ju,Ku],Oy=Ka({defaultModifiers:Iy}),ky=[Qu,ec,ju,Ku,tp,Zf,np,Qf,ep],tc=Ka({defaultModifiers:ky});const sp=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Bf,afterRead:Rf,afterWrite:Vf,applyStyles:Ku,arrow:Qf,auto:Ha,basePlacements:xr,beforeMain:Ff,beforeRead:Pf,beforeWrite:Wf,bottom:cn,clippingParents:Lf,computeStyles:ju,createPopper:tc,createPopperBase:Sy,createPopperLite:Oy,detectOverflow:yr,end:vr,eventListeners:Qu,flip:Zf,hide:ep,left:zt,main:qf,modifierPhases:Hf,offset:tp,placements:Hu,popper:fr,popperGenerator:Ka,popperOffsets:ec,preventOverflow:np,read:Mf,reference:$f,right:dn,start:Ii,top:Ht,variationPlacements:Mu,viewport:Vu,write:Uf},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Zs=new Map,yu={set(u,n,i){Zs.has(u)||Zs.set(u,new Map);const f=Zs.get(u);if(!f.has(n)&&f.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(f.keys())[0]}.`);return}f.set(n,i)},get(u,n){return Zs.has(u)&&Zs.get(u).get(n)||null},remove(u,n){if(!Zs.has(u))return;const i=Zs.get(u);i.delete(n),i.size===0&&Zs.delete(u)}},Dy=1e6,Ny=1e3,qu="transitionend",ip=u=>(u&&window.CSS&&window.CSS.escape&&(u=u.replace(/#([^\s"#']+)/g,(n,i)=>`#${CSS.escape(i)}`)),u),Ly=u=>u==null?`${u}`:Object.prototype.toString.call(u).match(/\s([a-z]+)/i)[1].toLowerCase(),$y=u=>{do u+=Math.floor(Math.random()*Dy);while(document.getElementById(u));return u},Py=u=>{if(!u)return 0;let{transitionDuration:n,transitionDelay:i}=window.getComputedStyle(u);const f=Number.parseFloat(n),v=Number.parseFloat(i);return!f&&!v?0:(n=n.split(",")[0],i=i.split(",")[0],(Number.parseFloat(n)+Number.parseFloat(i))*Ny)},rp=u=>{u.dispatchEvent(new Event(qu))},Ds=u=>!u||typeof u!="object"?!1:(typeof u.jquery<"u"&&(u=u[0]),typeof u.nodeType<"u"),ti=u=>Ds(u)?u.jquery?u[0]:u:typeof u=="string"&&u.length>0?document.querySelector(ip(u)):null,Ar=u=>{if(!Ds(u)||u.getClientRects().length===0)return!1;const n=getComputedStyle(u).getPropertyValue("visibility")==="visible",i=u.closest("details:not([open])");if(!i)return n;if(i!==u){const f=u.closest("summary");if(f&&f.parentNode!==i||f===null)return!1}return n},ni=u=>!u||u.nodeType!==Node.ELEMENT_NODE||u.classList.contains("disabled")?!0:typeof u.disabled<"u"?u.disabled:u.hasAttribute("disabled")&&u.getAttribute("disabled")!=="false",op=u=>{if(!document.documentElement.attachShadow)return null;if(typeof u.getRootNode=="function"){const n=u.getRootNode();return n instanceof ShadowRoot?n:null}return u instanceof ShadowRoot?u:u.parentNode?op(u.parentNode):null},Wa=()=>{},ko=u=>{u.offsetHeight},ap=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Eu=[],My=u=>{document.readyState==="loading"?(Eu.length||document.addEventListener("DOMContentLoaded",()=>{for(const n of Eu)n()}),Eu.push(u)):u()},Tn=()=>document.documentElement.dir==="rtl",In=u=>{My(()=>{const n=ap();if(n){const i=u.NAME,f=n.fn[i];n.fn[i]=u.jQueryInterface,n.fn[i].Constructor=u,n.fn[i].noConflict=()=>(n.fn[i]=f,u.jQueryInterface)}})},tn=(u,n=[],i=u)=>typeof u=="function"?u.call(...n):i,lp=(u,n,i=!0)=>{if(!i){tn(u);return}const v=Py(n)+5;let y=!1;const x=({target:T})=>{T===n&&(y=!0,n.removeEventListener(qu,x),tn(u))};n.addEventListener(qu,x),setTimeout(()=>{y||rp(n)},v)},nc=(u,n,i,f)=>{const v=u.length;let y=u.indexOf(n);return y===-1?!i&&f?u[v-1]:u[0]:(y+=i?1:-1,f&&(y=(y+v)%v),u[Math.max(0,Math.min(y,v-1))])},Ry=/[^.]*(?=\..*)\.|.*/,Fy=/\..*/,qy=/::\d+$/,wu={};let sf=1;const up={mouseenter:"mouseover",mouseleave:"mouseout"},By=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function cp(u,n){return n&&`${n}::${sf++}`||u.uidEvent||sf++}function dp(u){const n=cp(u);return u.uidEvent=n,wu[n]=wu[n]||{},wu[n]}function Wy(u,n){return function i(f){return sc(f,{delegateTarget:u}),i.oneOff&&R.off(u,f.type,n),n.apply(u,[f])}}function Uy(u,n,i){return function f(v){const y=u.querySelectorAll(n);for(let{target:x}=v;x&&x!==this;x=x.parentNode)for(const T of y)if(T===x)return sc(v,{delegateTarget:x}),f.oneOff&&R.off(u,v.type,n,i),i.apply(x,[v])}}function fp(u,n,i=null){return Object.values(u).find(f=>f.callable===n&&f.delegationSelector===i)}function pp(u,n,i){const f=typeof n=="string",v=f?i:n||i;let y=hp(u);return By.has(y)||(y=u),[f,v,y]}function rf(u,n,i,f,v){if(typeof n!="string"||!u)return;let[y,x,T]=pp(n,i,f);n in up&&(x=(he=>function(G){if(!G.relatedTarget||G.relatedTarget!==G.delegateTarget&&!G.delegateTarget.contains(G.relatedTarget))return he.call(this,G)})(x));const C=dp(u),q=C[T]||(C[T]={}),M=fp(q,x,y?i:null);if(M){M.oneOff=M.oneOff&&v;return}const H=cp(x,n.replace(Ry,"")),X=y?Uy(u,i,x):Wy(u,x);X.delegationSelector=y?i:null,X.callable=x,X.oneOff=v,X.uidEvent=H,q[H]=X,u.addEventListener(T,X,y)}function Bu(u,n,i,f,v){const y=fp(n[i],f,v);y&&(u.removeEventListener(i,y,!!v),delete n[i][y.uidEvent])}function Vy(u,n,i,f){const v=n[i]||{};for(const[y,x]of Object.entries(v))y.includes(f)&&Bu(u,n,i,x.callable,x.delegationSelector)}function hp(u){return u=u.replace(Fy,""),up[u]||u}const R={on(u,n,i,f){rf(u,n,i,f,!1)},one(u,n,i,f){rf(u,n,i,f,!0)},off(u,n,i,f){if(typeof n!="string"||!u)return;const[v,y,x]=pp(n,i,f),T=x!==n,C=dp(u),q=C[x]||{},M=n.startsWith(".");if(typeof y<"u"){if(!Object.keys(q).length)return;Bu(u,C,x,y,v?i:null);return}if(M)for(const H of Object.keys(C))Vy(u,C,H,n.slice(1));for(const[H,X]of Object.entries(q)){const Y=H.replace(qy,"");(!T||n.includes(Y))&&Bu(u,C,x,X.callable,X.delegationSelector)}},trigger(u,n,i){if(typeof n!="string"||!u)return null;const f=ap(),v=hp(n),y=n!==v;let x=null,T=!0,C=!0,q=!1;y&&f&&(x=f.Event(n,i),f(u).trigger(x),T=!x.isPropagationStopped(),C=!x.isImmediatePropagationStopped(),q=x.isDefaultPrevented());const M=sc(new Event(n,{bubbles:T,cancelable:!0}),i);return q&&M.preventDefault(),C&&u.dispatchEvent(M),M.defaultPrevented&&x&&x.preventDefault(),M}};function sc(u,n={}){for(const[i,f]of Object.entries(n))try{u[i]=f}catch{Object.defineProperty(u,i,{configurable:!0,get(){return f}})}return u}function of(u){if(u==="true")return!0;if(u==="false")return!1;if(u===Number(u).toString())return Number(u);if(u===""||u==="null")return null;if(typeof u!="string")return u;try{return JSON.parse(decodeURIComponent(u))}catch{return u}}function xu(u){return u.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}const Ns={setDataAttribute(u,n,i){u.setAttribute(`data-bs-${xu(n)}`,i)},removeDataAttribute(u,n){u.removeAttribute(`data-bs-${xu(n)}`)},getDataAttributes(u){if(!u)return{};const n={},i=Object.keys(u.dataset).filter(f=>f.startsWith("bs")&&!f.startsWith("bsConfig"));for(const f of i){let v=f.replace(/^bs/,"");v=v.charAt(0).toLowerCase()+v.slice(1),n[v]=of(u.dataset[f])}return n},getDataAttribute(u,n){return of(u.getAttribute(`data-bs-${xu(n)}`))}};class Do{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(n){return n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n}_mergeConfigObj(n,i){const f=Ds(i)?Ns.getDataAttribute(i,"config"):{};return{...this.constructor.Default,...typeof f=="object"?f:{},...Ds(i)?Ns.getDataAttributes(i):{},...typeof n=="object"?n:{}}}_typeCheckConfig(n,i=this.constructor.DefaultType){for(const[f,v]of Object.entries(i)){const y=n[f],x=Ds(y)?"element":Ly(y);if(!new RegExp(v).test(x))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${f}" provided type "${x}" but expected type "${v}".`)}}}const Hy="5.3.8";class Wn extends Do{constructor(n,i){super(),n=ti(n),n&&(this._element=n,this._config=this._getConfig(i),yu.set(this._element,this.constructor.DATA_KEY,this))}dispose(){yu.remove(this._element,this.constructor.DATA_KEY),R.off(this._element,this.constructor.EVENT_KEY);for(const n of Object.getOwnPropertyNames(this))this[n]=null}_queueCallback(n,i,f=!0){lp(n,i,f)}_getConfig(n){return n=this._mergeConfigObj(n,this._element),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}static getInstance(n){return yu.get(ti(n),this.DATA_KEY)}static getOrCreateInstance(n,i={}){return this.getInstance(n)||new this(n,typeof i=="object"?i:null)}static get VERSION(){return Hy}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(n){return`${n}${this.EVENT_KEY}`}}const Au=u=>{let n=u.getAttribute("data-bs-target");if(!n||n==="#"){let i=u.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),n=i&&i!=="#"?i.trim():null}return n?n.split(",").map(i=>ip(i)).join(","):null},J={find(u,n=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(n,u))},findOne(u,n=document.documentElement){return Element.prototype.querySelector.call(n,u)},children(u,n){return[].concat(...u.children).filter(i=>i.matches(n))},parents(u,n){const i=[];let f=u.parentNode.closest(n);for(;f;)i.push(f),f=f.parentNode.closest(n);return i},prev(u,n){let i=u.previousElementSibling;for(;i;){if(i.matches(n))return[i];i=i.previousElementSibling}return[]},next(u,n){let i=u.nextElementSibling;for(;i;){if(i.matches(n))return[i];i=i.nextElementSibling}return[]},focusableChildren(u){const n=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(i=>`${i}:not([tabindex^="-"])`).join(",");return this.find(n,u).filter(i=>!ni(i)&&Ar(i))},getSelectorFromElement(u){const n=Au(u);return n&&J.findOne(n)?n:null},getElementFromSelector(u){const n=Au(u);return n?J.findOne(n):null},getMultipleElementsFromSelector(u){const n=Au(u);return n?J.find(n):[]}},Ya=(u,n="hide")=>{const i=`click.dismiss${u.EVENT_KEY}`,f=u.NAME;R.on(document,i,`[data-bs-dismiss="${f}"]`,function(v){if(["A","AREA"].includes(this.tagName)&&v.preventDefault(),ni(this))return;const y=J.getElementFromSelector(this)||this.closest(`.${f}`);u.getOrCreateInstance(y)[n]()})},zy="alert",Ky="bs.alert",_p=`.${Ky}`,Yy=`close${_p}`,Gy=`closed${_p}`,jy="fade",Qy="show";class Ga extends Wn{static get NAME(){return zy}close(){if(R.trigger(this._element,Yy).defaultPrevented)return;this._element.classList.remove(Qy);const i=this._element.classList.contains(jy);this._queueCallback(()=>this._destroyElement(),this._element,i)}_destroyElement(){this._element.remove(),R.trigger(this._element,Gy),this.dispose()}static jQueryInterface(n){return this.each(function(){const i=Ga.getOrCreateInstance(this);if(typeof n=="string"){if(i[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);i[n](this)}})}}Ya(Ga,"close");In(Ga);const Xy="button",Jy="bs.button",Zy=`.${Jy}`,e0=".data-api",t0="active",af='[data-bs-toggle="button"]',n0=`click${Zy}${e0}`;class ja extends Wn{static get NAME(){return Xy}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(t0))}static jQueryInterface(n){return this.each(function(){const i=ja.getOrCreateInstance(this);n==="toggle"&&i[n]()})}}R.on(document,n0,af,u=>{u.preventDefault();const n=u.target.closest(af);ja.getOrCreateInstance(n).toggle()});In(ja);const s0="swipe",Cr=".bs.swipe",i0=`touchstart${Cr}`,r0=`touchmove${Cr}`,o0=`touchend${Cr}`,a0=`pointerdown${Cr}`,l0=`pointerup${Cr}`,u0="touch",c0="pen",d0="pointer-event",f0=40,p0={endCallback:null,leftCallback:null,rightCallback:null},h0={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ua extends Do{constructor(n,i){super(),this._element=n,!(!n||!Ua.isSupported())&&(this._config=this._getConfig(i),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return p0}static get DefaultType(){return h0}static get NAME(){return s0}dispose(){R.off(this._element,Cr)}_start(n){if(!this._supportPointerEvents){this._deltaX=n.touches[0].clientX;return}this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX)}_end(n){this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX-this._deltaX),this._handleSwipe(),tn(this._config.endCallback)}_move(n){this._deltaX=n.touches&&n.touches.length>1?0:n.touches[0].clientX-this._deltaX}_handleSwipe(){const n=Math.abs(this._deltaX);if(n<=f0)return;const i=n/this._deltaX;this._deltaX=0,i&&tn(i>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(R.on(this._element,a0,n=>this._start(n)),R.on(this._element,l0,n=>this._end(n)),this._element.classList.add(d0)):(R.on(this._element,i0,n=>this._start(n)),R.on(this._element,r0,n=>this._move(n)),R.on(this._element,o0,n=>this._end(n)))}_eventIsPointerPenTouch(n){return this._supportPointerEvents&&(n.pointerType===c0||n.pointerType===u0)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const _0="carousel",v0="bs.carousel",ri=`.${v0}`,vp=".data-api",m0="ArrowLeft",g0="ArrowRight",b0=500,wo="next",cr="prev",pr="left",Fa="right",y0=`slide${ri}`,Cu=`slid${ri}`,E0=`keydown${ri}`,w0=`mouseenter${ri}`,x0=`mouseleave${ri}`,A0=`dragstart${ri}`,C0=`load${ri}${vp}`,T0=`click${ri}${vp}`,mp="carousel",Da="active",S0="slide",I0="carousel-item-end",O0="carousel-item-start",k0="carousel-item-next",D0="carousel-item-prev",gp=".active",bp=".carousel-item",N0=gp+bp,L0=".carousel-item img",$0=".carousel-indicators",P0="[data-bs-slide], [data-bs-slide-to]",M0='[data-bs-ride="carousel"]',R0={[m0]:Fa,[g0]:pr},F0={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},q0={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class No extends Wn{constructor(n,i){super(n,i),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=J.findOne($0,this._element),this._addEventListeners(),this._config.ride===mp&&this.cycle()}static get Default(){return F0}static get DefaultType(){return q0}static get NAME(){return _0}next(){this._slide(wo)}nextWhenVisible(){!document.hidden&&Ar(this._element)&&this.next()}prev(){this._slide(cr)}pause(){this._isSliding&&rp(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){R.one(this._element,Cu,()=>this.cycle());return}this.cycle()}}to(n){const i=this._getItems();if(n>i.length-1||n<0)return;if(this._isSliding){R.one(this._element,Cu,()=>this.to(n));return}const f=this._getItemIndex(this._getActive());if(f===n)return;const v=n>f?wo:cr;this._slide(v,i[n])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(n){return n.defaultInterval=n.interval,n}_addEventListeners(){this._config.keyboard&&R.on(this._element,E0,n=>this._keydown(n)),this._config.pause==="hover"&&(R.on(this._element,w0,()=>this.pause()),R.on(this._element,x0,()=>this._maybeEnableCycle())),this._config.touch&&Ua.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const f of J.find(L0,this._element))R.on(f,A0,v=>v.preventDefault());const i={leftCallback:()=>this._slide(this._directionToOrder(pr)),rightCallback:()=>this._slide(this._directionToOrder(Fa)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),b0+this._config.interval))}};this._swipeHelper=new Ua(this._element,i)}_keydown(n){if(/input|textarea/i.test(n.target.tagName))return;const i=R0[n.key];i&&(n.preventDefault(),this._slide(this._directionToOrder(i)))}_getItemIndex(n){return this._getItems().indexOf(n)}_setActiveIndicatorElement(n){if(!this._indicatorsElement)return;const i=J.findOne(gp,this._indicatorsElement);i.classList.remove(Da),i.removeAttribute("aria-current");const f=J.findOne(`[data-bs-slide-to="${n}"]`,this._indicatorsElement);f&&(f.classList.add(Da),f.setAttribute("aria-current","true"))}_updateInterval(){const n=this._activeElement||this._getActive();if(!n)return;const i=Number.parseInt(n.getAttribute("data-bs-interval"),10);this._config.interval=i||this._config.defaultInterval}_slide(n,i=null){if(this._isSliding)return;const f=this._getActive(),v=n===wo,y=i||nc(this._getItems(),f,v,this._config.wrap);if(y===f)return;const x=this._getItemIndex(y),T=Y=>R.trigger(this._element,Y,{relatedTarget:y,direction:this._orderToDirection(n),from:this._getItemIndex(f),to:x});if(T(y0).defaultPrevented||!f||!y)return;const q=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(x),this._activeElement=y;const M=v?O0:I0,H=v?k0:D0;y.classList.add(H),ko(y),f.classList.add(M),y.classList.add(M);const X=()=>{y.classList.remove(M,H),y.classList.add(Da),f.classList.remove(Da,H,M),this._isSliding=!1,T(Cu)};this._queueCallback(X,f,this._isAnimated()),q&&this.cycle()}_isAnimated(){return this._element.classList.contains(S0)}_getActive(){return J.findOne(N0,this._element)}_getItems(){return J.find(bp,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(n){return Tn()?n===pr?cr:wo:n===pr?wo:cr}_orderToDirection(n){return Tn()?n===cr?pr:Fa:n===cr?Fa:pr}static jQueryInterface(n){return this.each(function(){const i=No.getOrCreateInstance(this,n);if(typeof n=="number"){i.to(n);return}if(typeof n=="string"){if(i[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);i[n]()}})}}R.on(document,T0,P0,function(u){const n=J.getElementFromSelector(this);if(!n||!n.classList.contains(mp))return;u.preventDefault();const i=No.getOrCreateInstance(n),f=this.getAttribute("data-bs-slide-to");if(f){i.to(f),i._maybeEnableCycle();return}if(Ns.getDataAttribute(this,"slide")==="next"){i.next(),i._maybeEnableCycle();return}i.prev(),i._maybeEnableCycle()});R.on(window,C0,()=>{const u=J.find(M0);for(const n of u)No.getOrCreateInstance(n)});In(No);const B0="collapse",W0="bs.collapse",Lo=`.${W0}`,U0=".data-api",V0=`show${Lo}`,H0=`shown${Lo}`,z0=`hide${Lo}`,K0=`hidden${Lo}`,Y0=`click${Lo}${U0}`,Tu="show",_r="collapse",Na="collapsing",G0="collapsed",j0=`:scope .${_r} .${_r}`,Q0="collapse-horizontal",X0="width",J0="height",Z0=".collapse.show, .collapse.collapsing",Wu='[data-bs-toggle="collapse"]',e1={parent:null,toggle:!0},t1={parent:"(null|element)",toggle:"boolean"};class Io extends Wn{constructor(n,i){super(n,i),this._isTransitioning=!1,this._triggerArray=[];const f=J.find(Wu);for(const v of f){const y=J.getSelectorFromElement(v),x=J.find(y).filter(T=>T===this._element);y!==null&&x.length&&this._triggerArray.push(v)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return e1}static get DefaultType(){return t1}static get NAME(){return B0}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let n=[];if(this._config.parent&&(n=this._getFirstLevelChildren(Z0).filter(T=>T!==this._element).map(T=>Io.getOrCreateInstance(T,{toggle:!1}))),n.length&&n[0]._isTransitioning||R.trigger(this._element,V0).defaultPrevented)return;for(const T of n)T.hide();const f=this._getDimension();this._element.classList.remove(_r),this._element.classList.add(Na),this._element.style[f]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const v=()=>{this._isTransitioning=!1,this._element.classList.remove(Na),this._element.classList.add(_r,Tu),this._element.style[f]="",R.trigger(this._element,H0)},x=`scroll${f[0].toUpperCase()+f.slice(1)}`;this._queueCallback(v,this._element,!0),this._element.style[f]=`${this._element[x]}px`}hide(){if(this._isTransitioning||!this._isShown()||R.trigger(this._element,z0).defaultPrevented)return;const i=this._getDimension();this._element.style[i]=`${this._element.getBoundingClientRect()[i]}px`,ko(this._element),this._element.classList.add(Na),this._element.classList.remove(_r,Tu);for(const v of this._triggerArray){const y=J.getElementFromSelector(v);y&&!this._isShown(y)&&this._addAriaAndCollapsedClass([v],!1)}this._isTransitioning=!0;const f=()=>{this._isTransitioning=!1,this._element.classList.remove(Na),this._element.classList.add(_r),R.trigger(this._element,K0)};this._element.style[i]="",this._queueCallback(f,this._element,!0)}_isShown(n=this._element){return n.classList.contains(Tu)}_configAfterMerge(n){return n.toggle=!!n.toggle,n.parent=ti(n.parent),n}_getDimension(){return this._element.classList.contains(Q0)?X0:J0}_initializeChildren(){if(!this._config.parent)return;const n=this._getFirstLevelChildren(Wu);for(const i of n){const f=J.getElementFromSelector(i);f&&this._addAriaAndCollapsedClass([i],this._isShown(f))}}_getFirstLevelChildren(n){const i=J.find(j0,this._config.parent);return J.find(n,this._config.parent).filter(f=>!i.includes(f))}_addAriaAndCollapsedClass(n,i){if(n.length)for(const f of n)f.classList.toggle(G0,!i),f.setAttribute("aria-expanded",i)}static jQueryInterface(n){const i={};return typeof n=="string"&&/show|hide/.test(n)&&(i.toggle=!1),this.each(function(){const f=Io.getOrCreateInstance(this,i);if(typeof n=="string"){if(typeof f[n]>"u")throw new TypeError(`No method named "${n}"`);f[n]()}})}}R.on(document,Y0,Wu,function(u){(u.target.tagName==="A"||u.delegateTarget&&u.delegateTarget.tagName==="A")&&u.preventDefault();for(const n of J.getMultipleElementsFromSelector(this))Io.getOrCreateInstance(n,{toggle:!1}).toggle()});In(Io);const lf="dropdown",n1="bs.dropdown",ki=`.${n1}`,ic=".data-api",s1="Escape",uf="Tab",i1="ArrowUp",cf="ArrowDown",r1=2,o1=`hide${ki}`,a1=`hidden${ki}`,l1=`show${ki}`,u1=`shown${ki}`,yp=`click${ki}${ic}`,Ep=`keydown${ki}${ic}`,c1=`keyup${ki}${ic}`,hr="show",d1="dropup",f1="dropend",p1="dropstart",h1="dropup-center",_1="dropdown-center",Ci='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',v1=`${Ci}.${hr}`,qa=".dropdown-menu",m1=".navbar",g1=".navbar-nav",b1=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",y1=Tn()?"top-end":"top-start",E1=Tn()?"top-start":"top-end",w1=Tn()?"bottom-end":"bottom-start",x1=Tn()?"bottom-start":"bottom-end",A1=Tn()?"left-start":"right-start",C1=Tn()?"right-start":"left-start",T1="top",S1="bottom",I1={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},O1={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class us extends Wn{constructor(n,i){super(n,i),this._popper=null,this._parent=this._element.parentNode,this._menu=J.next(this._element,qa)[0]||J.prev(this._element,qa)[0]||J.findOne(qa,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return I1}static get DefaultType(){return O1}static get NAME(){return lf}toggle(){return this._isShown()?this.hide():this.show()}show(){if(ni(this._element)||this._isShown())return;const n={relatedTarget:this._element};if(!R.trigger(this._element,l1,n).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(g1))for(const f of[].concat(...document.body.children))R.on(f,"mouseover",Wa);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(hr),this._element.classList.add(hr),R.trigger(this._element,u1,n)}}hide(){if(ni(this._element)||!this._isShown())return;const n={relatedTarget:this._element};this._completeHide(n)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(n){if(!R.trigger(this._element,o1,n).defaultPrevented){if("ontouchstart"in document.documentElement)for(const f of[].concat(...document.body.children))R.off(f,"mouseover",Wa);this._popper&&this._popper.destroy(),this._menu.classList.remove(hr),this._element.classList.remove(hr),this._element.setAttribute("aria-expanded","false"),Ns.removeDataAttribute(this._menu,"popper"),R.trigger(this._element,a1,n)}}_getConfig(n){if(n=super._getConfig(n),typeof n.reference=="object"&&!Ds(n.reference)&&typeof n.reference.getBoundingClientRect!="function")throw new TypeError(`${lf.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return n}_createPopper(){if(typeof sp>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let n=this._element;this._config.reference==="parent"?n=this._parent:Ds(this._config.reference)?n=ti(this._config.reference):typeof this._config.reference=="object"&&(n=this._config.reference);const i=this._getPopperConfig();this._popper=tc(n,this._menu,i)}_isShown(){return this._menu.classList.contains(hr)}_getPlacement(){const n=this._parent;if(n.classList.contains(f1))return A1;if(n.classList.contains(p1))return C1;if(n.classList.contains(h1))return T1;if(n.classList.contains(_1))return S1;const i=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return n.classList.contains(d1)?i?E1:y1:i?x1:w1}_detectNavbar(){return this._element.closest(m1)!==null}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(i=>Number.parseInt(i,10)):typeof n=="function"?i=>n(i,this._element):n}_getPopperConfig(){const n={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Ns.setDataAttribute(this._menu,"popper","static"),n.modifiers=[{name:"applyStyles",enabled:!1}]),{...n,...tn(this._config.popperConfig,[void 0,n])}}_selectMenuItem({key:n,target:i}){const f=J.find(b1,this._menu).filter(v=>Ar(v));f.length&&nc(f,i,n===cf,!f.includes(i)).focus()}static jQueryInterface(n){return this.each(function(){const i=us.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof i[n]>"u")throw new TypeError(`No method named "${n}"`);i[n]()}})}static clearMenus(n){if(n.button===r1||n.type==="keyup"&&n.key!==uf)return;const i=J.find(v1);for(const f of i){const v=us.getInstance(f);if(!v||v._config.autoClose===!1)continue;const y=n.composedPath(),x=y.includes(v._menu);if(y.includes(v._element)||v._config.autoClose==="inside"&&!x||v._config.autoClose==="outside"&&x||v._menu.contains(n.target)&&(n.type==="keyup"&&n.key===uf||/input|select|option|textarea|form/i.test(n.target.tagName)))continue;const T={relatedTarget:v._element};n.type==="click"&&(T.clickEvent=n),v._completeHide(T)}}static dataApiKeydownHandler(n){const i=/input|textarea/i.test(n.target.tagName),f=n.key===s1,v=[i1,cf].includes(n.key);if(!v&&!f||i&&!f)return;n.preventDefault();const y=this.matches(Ci)?this:J.prev(this,Ci)[0]||J.next(this,Ci)[0]||J.findOne(Ci,n.delegateTarget.parentNode),x=us.getOrCreateInstance(y);if(v){n.stopPropagation(),x.show(),x._selectMenuItem(n);return}x._isShown()&&(n.stopPropagation(),x.hide(),y.focus())}}R.on(document,Ep,Ci,us.dataApiKeydownHandler);R.on(document,Ep,qa,us.dataApiKeydownHandler);R.on(document,yp,us.clearMenus);R.on(document,c1,us.clearMenus);R.on(document,yp,Ci,function(u){u.preventDefault(),us.getOrCreateInstance(this).toggle()});In(us);const wp="backdrop",k1="fade",df="show",ff=`mousedown.bs.${wp}`,D1={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},N1={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class xp extends Do{constructor(n){super(),this._config=this._getConfig(n),this._isAppended=!1,this._element=null}static get Default(){return D1}static get DefaultType(){return N1}static get NAME(){return wp}show(n){if(!this._config.isVisible){tn(n);return}this._append();const i=this._getElement();this._config.isAnimated&&ko(i),i.classList.add(df),this._emulateAnimation(()=>{tn(n)})}hide(n){if(!this._config.isVisible){tn(n);return}this._getElement().classList.remove(df),this._emulateAnimation(()=>{this.dispose(),tn(n)})}dispose(){this._isAppended&&(R.off(this._element,ff),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const n=document.createElement("div");n.className=this._config.className,this._config.isAnimated&&n.classList.add(k1),this._element=n}return this._element}_configAfterMerge(n){return n.rootElement=ti(n.rootElement),n}_append(){if(this._isAppended)return;const n=this._getElement();this._config.rootElement.append(n),R.on(n,ff,()=>{tn(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(n){lp(n,this._getElement(),this._config.isAnimated)}}const L1="focustrap",$1="bs.focustrap",Va=`.${$1}`,P1=`focusin${Va}`,M1=`keydown.tab${Va}`,R1="Tab",F1="forward",pf="backward",q1={autofocus:!0,trapElement:null},B1={autofocus:"boolean",trapElement:"element"};class Ap extends Do{constructor(n){super(),this._config=this._getConfig(n),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return q1}static get DefaultType(){return B1}static get NAME(){return L1}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),R.off(document,Va),R.on(document,P1,n=>this._handleFocusin(n)),R.on(document,M1,n=>this._handleKeydown(n)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,R.off(document,Va))}_handleFocusin(n){const{trapElement:i}=this._config;if(n.target===document||n.target===i||i.contains(n.target))return;const f=J.focusableChildren(i);f.length===0?i.focus():this._lastTabNavDirection===pf?f[f.length-1].focus():f[0].focus()}_handleKeydown(n){n.key===R1&&(this._lastTabNavDirection=n.shiftKey?pf:F1)}}const hf=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",_f=".sticky-top",La="padding-right",vf="margin-right";class Uu{constructor(){this._element=document.body}getWidth(){const n=document.documentElement.clientWidth;return Math.abs(window.innerWidth-n)}hide(){const n=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,La,i=>i+n),this._setElementAttributes(hf,La,i=>i+n),this._setElementAttributes(_f,vf,i=>i-n)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,La),this._resetElementAttributes(hf,La),this._resetElementAttributes(_f,vf)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(n,i,f){const v=this.getWidth(),y=x=>{if(x!==this._element&&window.innerWidth>x.clientWidth+v)return;this._saveInitialAttribute(x,i);const T=window.getComputedStyle(x).getPropertyValue(i);x.style.setProperty(i,`${f(Number.parseFloat(T))}px`)};this._applyManipulationCallback(n,y)}_saveInitialAttribute(n,i){const f=n.style.getPropertyValue(i);f&&Ns.setDataAttribute(n,i,f)}_resetElementAttributes(n,i){const f=v=>{const y=Ns.getDataAttribute(v,i);if(y===null){v.style.removeProperty(i);return}Ns.removeDataAttribute(v,i),v.style.setProperty(i,y)};this._applyManipulationCallback(n,f)}_applyManipulationCallback(n,i){if(Ds(n)){i(n);return}for(const f of J.find(n,this._element))i(f)}}const W1="modal",U1="bs.modal",Sn=`.${U1}`,V1=".data-api",H1="Escape",z1=`hide${Sn}`,K1=`hidePrevented${Sn}`,Cp=`hidden${Sn}`,Tp=`show${Sn}`,Y1=`shown${Sn}`,G1=`resize${Sn}`,j1=`click.dismiss${Sn}`,Q1=`mousedown.dismiss${Sn}`,X1=`keydown.dismiss${Sn}`,J1=`click${Sn}${V1}`,mf="modal-open",Z1="fade",gf="show",Su="modal-static",eE=".modal.show",tE=".modal-dialog",nE=".modal-body",sE='[data-bs-toggle="modal"]',iE={backdrop:!0,focus:!0,keyboard:!0},rE={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Er extends Wn{constructor(n,i){super(n,i),this._dialog=J.findOne(tE,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Uu,this._addEventListeners()}static get Default(){return iE}static get DefaultType(){return rE}static get NAME(){return W1}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){this._isShown||this._isTransitioning||R.trigger(this._element,Tp,{relatedTarget:n}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(mf),this._adjustDialog(),this._backdrop.show(()=>this._showElement(n)))}hide(){!this._isShown||this._isTransitioning||R.trigger(this._element,z1).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(gf),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){R.off(window,Sn),R.off(this._dialog,Sn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new xp({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ap({trapElement:this._element})}_showElement(n){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const i=J.findOne(nE,this._dialog);i&&(i.scrollTop=0),ko(this._element),this._element.classList.add(gf);const f=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,R.trigger(this._element,Y1,{relatedTarget:n})};this._queueCallback(f,this._dialog,this._isAnimated())}_addEventListeners(){R.on(this._element,X1,n=>{if(n.key===H1){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),R.on(window,G1,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),R.on(this._element,Q1,n=>{R.one(this._element,j1,i=>{if(!(this._element!==n.target||this._element!==i.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(mf),this._resetAdjustments(),this._scrollBar.reset(),R.trigger(this._element,Cp)})}_isAnimated(){return this._element.classList.contains(Z1)}_triggerBackdropTransition(){if(R.trigger(this._element,K1).defaultPrevented)return;const i=this._element.scrollHeight>document.documentElement.clientHeight,f=this._element.style.overflowY;f==="hidden"||this._element.classList.contains(Su)||(i||(this._element.style.overflowY="hidden"),this._element.classList.add(Su),this._queueCallback(()=>{this._element.classList.remove(Su),this._queueCallback(()=>{this._element.style.overflowY=f},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const n=this._element.scrollHeight>document.documentElement.clientHeight,i=this._scrollBar.getWidth(),f=i>0;if(f&&!n){const v=Tn()?"paddingLeft":"paddingRight";this._element.style[v]=`${i}px`}if(!f&&n){const v=Tn()?"paddingRight":"paddingLeft";this._element.style[v]=`${i}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(n,i){return this.each(function(){const f=Er.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof f[n]>"u")throw new TypeError(`No method named "${n}"`);f[n](i)}})}}R.on(document,J1,sE,function(u){const n=J.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&u.preventDefault(),R.one(n,Tp,v=>{v.defaultPrevented||R.one(n,Cp,()=>{Ar(this)&&this.focus()})});const i=J.findOne(eE);i&&Er.getInstance(i).hide(),Er.getOrCreateInstance(n).toggle(this)});Ya(Er);In(Er);const oE="offcanvas",aE="bs.offcanvas",$s=`.${aE}`,Sp=".data-api",lE=`load${$s}${Sp}`,uE="Escape",bf="show",yf="showing",Ef="hiding",cE="offcanvas-backdrop",Ip=".offcanvas.show",dE=`show${$s}`,fE=`shown${$s}`,pE=`hide${$s}`,wf=`hidePrevented${$s}`,Op=`hidden${$s}`,hE=`resize${$s}`,_E=`click${$s}${Sp}`,vE=`keydown.dismiss${$s}`,mE='[data-bs-toggle="offcanvas"]',gE={backdrop:!0,keyboard:!0,scroll:!1},bE={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class si extends Wn{constructor(n,i){super(n,i),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return gE}static get DefaultType(){return bE}static get NAME(){return oE}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){if(this._isShown||R.trigger(this._element,dE,{relatedTarget:n}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Uu().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(yf);const f=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(bf),this._element.classList.remove(yf),R.trigger(this._element,fE,{relatedTarget:n})};this._queueCallback(f,this._element,!0)}hide(){if(!this._isShown||R.trigger(this._element,pE).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ef),this._backdrop.hide();const i=()=>{this._element.classList.remove(bf,Ef),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Uu().reset(),R.trigger(this._element,Op)};this._queueCallback(i,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const n=()=>{if(this._config.backdrop==="static"){R.trigger(this._element,wf);return}this.hide()},i=!!this._config.backdrop;return new xp({className:cE,isVisible:i,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:i?n:null})}_initializeFocusTrap(){return new Ap({trapElement:this._element})}_addEventListeners(){R.on(this._element,vE,n=>{if(n.key===uE){if(this._config.keyboard){this.hide();return}R.trigger(this._element,wf)}})}static jQueryInterface(n){return this.each(function(){const i=si.getOrCreateInstance(this,n);if(typeof n=="string"){if(i[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);i[n](this)}})}}R.on(document,_E,mE,function(u){const n=J.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&u.preventDefault(),ni(this))return;R.one(n,Op,()=>{Ar(this)&&this.focus()});const i=J.findOne(Ip);i&&i!==n&&si.getInstance(i).hide(),si.getOrCreateInstance(n).toggle(this)});R.on(window,lE,()=>{for(const u of J.find(Ip))si.getOrCreateInstance(u).show()});R.on(window,hE,()=>{for(const u of J.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(u).position!=="fixed"&&si.getOrCreateInstance(u).hide()});Ya(si);In(si);const yE=/^aria-[\w-]*$/i,kp={"*":["class","dir","id","lang","role",yE],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},EE=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),wE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,xE=(u,n)=>{const i=u.nodeName.toLowerCase();return n.includes(i)?EE.has(i)?!!wE.test(u.nodeValue):!0:n.filter(f=>f instanceof RegExp).some(f=>f.test(i))};function AE(u,n,i){if(!u.length)return u;if(i&&typeof i=="function")return i(u);const v=new window.DOMParser().parseFromString(u,"text/html"),y=[].concat(...v.body.querySelectorAll("*"));for(const x of y){const T=x.nodeName.toLowerCase();if(!Object.keys(n).includes(T)){x.remove();continue}const C=[].concat(...x.attributes),q=[].concat(n["*"]||[],n[T]||[]);for(const M of C)xE(M,q)||x.removeAttribute(M.nodeName)}return v.body.innerHTML}const CE="TemplateFactory",TE={allowList:kp,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},SE={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},IE={entry:"(string|element|function|null)",selector:"(string|element)"};class OE extends Do{constructor(n){super(),this._config=this._getConfig(n)}static get Default(){return TE}static get DefaultType(){return SE}static get NAME(){return CE}getContent(){return Object.values(this._config.content).map(n=>this._resolvePossibleFunction(n)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(n){return this._checkContent(n),this._config.content={...this._config.content,...n},this}toHtml(){const n=document.createElement("div");n.innerHTML=this._maybeSanitize(this._config.template);for(const[v,y]of Object.entries(this._config.content))this._setContent(n,y,v);const i=n.children[0],f=this._resolvePossibleFunction(this._config.extraClass);return f&&i.classList.add(...f.split(" ")),i}_typeCheckConfig(n){super._typeCheckConfig(n),this._checkContent(n.content)}_checkContent(n){for(const[i,f]of Object.entries(n))super._typeCheckConfig({selector:i,entry:f},IE)}_setContent(n,i,f){const v=J.findOne(f,n);if(v){if(i=this._resolvePossibleFunction(i),!i){v.remove();return}if(Ds(i)){this._putElementInTemplate(ti(i),v);return}if(this._config.html){v.innerHTML=this._maybeSanitize(i);return}v.textContent=i}}_maybeSanitize(n){return this._config.sanitize?AE(n,this._config.allowList,this._config.sanitizeFn):n}_resolvePossibleFunction(n){return tn(n,[void 0,this])}_putElementInTemplate(n,i){if(this._config.html){i.innerHTML="",i.append(n);return}i.textContent=n.textContent}}const kE="tooltip",DE=new Set(["sanitize","allowList","sanitizeFn"]),Iu="fade",NE="modal",$a="show",LE=".tooltip-inner",xf=`.${NE}`,Af="hide.bs.modal",xo="hover",Ou="focus",ku="click",$E="manual",PE="hide",ME="hidden",RE="show",FE="shown",qE="inserted",BE="click",WE="focusin",UE="focusout",VE="mouseenter",HE="mouseleave",zE={AUTO:"auto",TOP:"top",RIGHT:Tn()?"left":"right",BOTTOM:"bottom",LEFT:Tn()?"right":"left"},KE={allowList:kp,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},YE={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Tr extends Wn{constructor(n,i){if(typeof sp>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(n,i),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return KE}static get DefaultType(){return YE}static get NAME(){return kE}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),R.off(this._element.closest(xf),Af,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const n=R.trigger(this._element,this.constructor.eventName(RE)),f=(op(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(n.defaultPrevented||!f)return;this._disposePopper();const v=this._getTipElement();this._element.setAttribute("aria-describedby",v.getAttribute("id"));const{container:y}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(y.append(v),R.trigger(this._element,this.constructor.eventName(qE))),this._popper=this._createPopper(v),v.classList.add($a),"ontouchstart"in document.documentElement)for(const T of[].concat(...document.body.children))R.on(T,"mouseover",Wa);const x=()=>{R.trigger(this._element,this.constructor.eventName(FE)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(x,this.tip,this._isAnimated())}hide(){if(!this._isShown()||R.trigger(this._element,this.constructor.eventName(PE)).defaultPrevented)return;if(this._getTipElement().classList.remove($a),"ontouchstart"in document.documentElement)for(const v of[].concat(...document.body.children))R.off(v,"mouseover",Wa);this._activeTrigger[ku]=!1,this._activeTrigger[Ou]=!1,this._activeTrigger[xo]=!1,this._isHovered=null;const f=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),R.trigger(this._element,this.constructor.eventName(ME)))};this._queueCallback(f,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(n){const i=this._getTemplateFactory(n).toHtml();if(!i)return null;i.classList.remove(Iu,$a),i.classList.add(`bs-${this.constructor.NAME}-auto`);const f=$y(this.constructor.NAME).toString();return i.setAttribute("id",f),this._isAnimated()&&i.classList.add(Iu),i}setContent(n){this._newContent=n,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(n){return this._templateFactory?this._templateFactory.changeContent(n):this._templateFactory=new OE({...this._config,content:n,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[LE]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(n){return this.constructor.getOrCreateInstance(n.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Iu)}_isShown(){return this.tip&&this.tip.classList.contains($a)}_createPopper(n){const i=tn(this._config.placement,[this,n,this._element]),f=zE[i.toUpperCase()];return tc(this._element,n,this._getPopperConfig(f))}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(i=>Number.parseInt(i,10)):typeof n=="function"?i=>n(i,this._element):n}_resolvePossibleFunction(n){return tn(n,[this._element,this._element])}_getPopperConfig(n){const i={placement:n,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:f=>{this._getTipElement().setAttribute("data-popper-placement",f.state.placement)}}]};return{...i,...tn(this._config.popperConfig,[void 0,i])}}_setListeners(){const n=this._config.trigger.split(" ");for(const i of n)if(i==="click")R.on(this._element,this.constructor.eventName(BE),this._config.selector,f=>{const v=this._initializeOnDelegatedTarget(f);v._activeTrigger[ku]=!(v._isShown()&&v._activeTrigger[ku]),v.toggle()});else if(i!==$E){const f=i===xo?this.constructor.eventName(VE):this.constructor.eventName(WE),v=i===xo?this.constructor.eventName(HE):this.constructor.eventName(UE);R.on(this._element,f,this._config.selector,y=>{const x=this._initializeOnDelegatedTarget(y);x._activeTrigger[y.type==="focusin"?Ou:xo]=!0,x._enter()}),R.on(this._element,v,this._config.selector,y=>{const x=this._initializeOnDelegatedTarget(y);x._activeTrigger[y.type==="focusout"?Ou:xo]=x._element.contains(y.relatedTarget),x._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},R.on(this._element.closest(xf),Af,this._hideModalHandler)}_fixTitle(){const n=this._element.getAttribute("title");n&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",n),this._element.setAttribute("data-bs-original-title",n),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(n,i){clearTimeout(this._timeout),this._timeout=setTimeout(n,i)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(n){const i=Ns.getDataAttributes(this._element);for(const f of Object.keys(i))DE.has(f)&&delete i[f];return n={...i,...typeof n=="object"&&n?n:{}},n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n.container=n.container===!1?document.body:ti(n.container),typeof n.delay=="number"&&(n.delay={show:n.delay,hide:n.delay}),typeof n.title=="number"&&(n.title=n.title.toString()),typeof n.content=="number"&&(n.content=n.content.toString()),n}_getDelegateConfig(){const n={};for(const[i,f]of Object.entries(this._config))this.constructor.Default[i]!==f&&(n[i]=f);return n.selector=!1,n.trigger="manual",n}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(n){return this.each(function(){const i=Tr.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof i[n]>"u")throw new TypeError(`No method named "${n}"`);i[n]()}})}}In(Tr);const GE="popover",jE=".popover-header",QE=".popover-body",XE={...Tr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},JE={...Tr.DefaultType,content:"(null|string|element|function)"};class Qa extends Tr{static get Default(){return XE}static get DefaultType(){return JE}static get NAME(){return GE}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[jE]:this._getTitle(),[QE]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(n){return this.each(function(){const i=Qa.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof i[n]>"u")throw new TypeError(`No method named "${n}"`);i[n]()}})}}In(Qa);const ZE="scrollspy",ew="bs.scrollspy",rc=`.${ew}`,tw=".data-api",nw=`activate${rc}`,Cf=`click${rc}`,sw=`load${rc}${tw}`,iw="dropdown-item",dr="active",rw='[data-bs-spy="scroll"]',Du="[href]",ow=".nav, .list-group",Tf=".nav-link",aw=".nav-item",lw=".list-group-item",uw=`${Tf}, ${aw} > ${Tf}, ${lw}`,cw=".dropdown",dw=".dropdown-toggle",fw={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},pw={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Xa extends Wn{constructor(n,i){super(n,i),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return fw}static get DefaultType(){return pw}static get NAME(){return ZE}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const n of this._observableSections.values())this._observer.observe(n)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(n){return n.target=ti(n.target)||document.body,n.rootMargin=n.offset?`${n.offset}px 0px -30%`:n.rootMargin,typeof n.threshold=="string"&&(n.threshold=n.threshold.split(",").map(i=>Number.parseFloat(i))),n}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(R.off(this._config.target,Cf),R.on(this._config.target,Cf,Du,n=>{const i=this._observableSections.get(n.target.hash);if(i){n.preventDefault();const f=this._rootElement||window,v=i.offsetTop-this._element.offsetTop;if(f.scrollTo){f.scrollTo({top:v,behavior:"smooth"});return}f.scrollTop=v}}))}_getNewObserver(){const n={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(i=>this._observerCallback(i),n)}_observerCallback(n){const i=x=>this._targetLinks.get(`#${x.target.id}`),f=x=>{this._previousScrollData.visibleEntryTop=x.target.offsetTop,this._process(i(x))},v=(this._rootElement||document.documentElement).scrollTop,y=v>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=v;for(const x of n){if(!x.isIntersecting){this._activeTarget=null,this._clearActiveClass(i(x));continue}const T=x.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(y&&T){if(f(x),!v)return;continue}!y&&!T&&f(x)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const n=J.find(Du,this._config.target);for(const i of n){if(!i.hash||ni(i))continue;const f=J.findOne(decodeURI(i.hash),this._element);Ar(f)&&(this._targetLinks.set(decodeURI(i.hash),i),this._observableSections.set(i.hash,f))}}_process(n){this._activeTarget!==n&&(this._clearActiveClass(this._config.target),this._activeTarget=n,n.classList.add(dr),this._activateParents(n),R.trigger(this._element,nw,{relatedTarget:n}))}_activateParents(n){if(n.classList.contains(iw)){J.findOne(dw,n.closest(cw)).classList.add(dr);return}for(const i of J.parents(n,ow))for(const f of J.prev(i,uw))f.classList.add(dr)}_clearActiveClass(n){n.classList.remove(dr);const i=J.find(`${Du}.${dr}`,n);for(const f of i)f.classList.remove(dr)}static jQueryInterface(n){return this.each(function(){const i=Xa.getOrCreateInstance(this,n);if(typeof n=="string"){if(i[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);i[n]()}})}}R.on(window,sw,()=>{for(const u of J.find(rw))Xa.getOrCreateInstance(u)});In(Xa);const hw="tab",_w="bs.tab",Di=`.${_w}`,vw=`hide${Di}`,mw=`hidden${Di}`,gw=`show${Di}`,bw=`shown${Di}`,yw=`click${Di}`,Ew=`keydown${Di}`,ww=`load${Di}`,xw="ArrowLeft",Sf="ArrowRight",Aw="ArrowUp",If="ArrowDown",Nu="Home",Of="End",Ti="active",kf="fade",Lu="show",Cw="dropdown",Dp=".dropdown-toggle",Tw=".dropdown-menu",$u=`:not(${Dp})`,Sw='.list-group, .nav, [role="tablist"]',Iw=".nav-item, .list-group-item",Ow=`.nav-link${$u}, .list-group-item${$u}, [role="tab"]${$u}`,Np='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Pu=`${Ow}, ${Np}`,kw=`.${Ti}[data-bs-toggle="tab"], .${Ti}[data-bs-toggle="pill"], .${Ti}[data-bs-toggle="list"]`;class wr extends Wn{constructor(n){super(n),this._parent=this._element.closest(Sw),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),R.on(this._element,Ew,i=>this._keydown(i)))}static get NAME(){return hw}show(){const n=this._element;if(this._elemIsActive(n))return;const i=this._getActiveElem(),f=i?R.trigger(i,vw,{relatedTarget:n}):null;R.trigger(n,gw,{relatedTarget:i}).defaultPrevented||f&&f.defaultPrevented||(this._deactivate(i,n),this._activate(n,i))}_activate(n,i){if(!n)return;n.classList.add(Ti),this._activate(J.getElementFromSelector(n));const f=()=>{if(n.getAttribute("role")!=="tab"){n.classList.add(Lu);return}n.removeAttribute("tabindex"),n.setAttribute("aria-selected",!0),this._toggleDropDown(n,!0),R.trigger(n,bw,{relatedTarget:i})};this._queueCallback(f,n,n.classList.contains(kf))}_deactivate(n,i){if(!n)return;n.classList.remove(Ti),n.blur(),this._deactivate(J.getElementFromSelector(n));const f=()=>{if(n.getAttribute("role")!=="tab"){n.classList.remove(Lu);return}n.setAttribute("aria-selected",!1),n.setAttribute("tabindex","-1"),this._toggleDropDown(n,!1),R.trigger(n,mw,{relatedTarget:i})};this._queueCallback(f,n,n.classList.contains(kf))}_keydown(n){if(![xw,Sf,Aw,If,Nu,Of].includes(n.key))return;n.stopPropagation(),n.preventDefault();const i=this._getChildren().filter(v=>!ni(v));let f;if([Nu,Of].includes(n.key))f=i[n.key===Nu?0:i.length-1];else{const v=[Sf,If].includes(n.key);f=nc(i,n.target,v,!0)}f&&(f.focus({preventScroll:!0}),wr.getOrCreateInstance(f).show())}_getChildren(){return J.find(Pu,this._parent)}_getActiveElem(){return this._getChildren().find(n=>this._elemIsActive(n))||null}_setInitialAttributes(n,i){this._setAttributeIfNotExists(n,"role","tablist");for(const f of i)this._setInitialAttributesOnChild(f)}_setInitialAttributesOnChild(n){n=this._getInnerElement(n);const i=this._elemIsActive(n),f=this._getOuterElement(n);n.setAttribute("aria-selected",i),f!==n&&this._setAttributeIfNotExists(f,"role","presentation"),i||n.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(n,"role","tab"),this._setInitialAttributesOnTargetPanel(n)}_setInitialAttributesOnTargetPanel(n){const i=J.getElementFromSelector(n);i&&(this._setAttributeIfNotExists(i,"role","tabpanel"),n.id&&this._setAttributeIfNotExists(i,"aria-labelledby",`${n.id}`))}_toggleDropDown(n,i){const f=this._getOuterElement(n);if(!f.classList.contains(Cw))return;const v=(y,x)=>{const T=J.findOne(y,f);T&&T.classList.toggle(x,i)};v(Dp,Ti),v(Tw,Lu),f.setAttribute("aria-expanded",i)}_setAttributeIfNotExists(n,i,f){n.hasAttribute(i)||n.setAttribute(i,f)}_elemIsActive(n){return n.classList.contains(Ti)}_getInnerElement(n){return n.matches(Pu)?n:J.findOne(Pu,n)}_getOuterElement(n){return n.closest(Iw)||n}static jQueryInterface(n){return this.each(function(){const i=wr.getOrCreateInstance(this);if(typeof n=="string"){if(i[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);i[n]()}})}}R.on(document,yw,Np,function(u){["A","AREA"].includes(this.tagName)&&u.preventDefault(),!ni(this)&&wr.getOrCreateInstance(this).show()});R.on(window,ww,()=>{for(const u of J.find(kw))wr.getOrCreateInstance(u)});In(wr);const Dw="toast",Nw="bs.toast",oi=`.${Nw}`,Lw=`mouseover${oi}`,$w=`mouseout${oi}`,Pw=`focusin${oi}`,Mw=`focusout${oi}`,Rw=`hide${oi}`,Fw=`hidden${oi}`,qw=`show${oi}`,Bw=`shown${oi}`,Ww="fade",Df="hide",Pa="show",Ma="showing",Uw={animation:"boolean",autohide:"boolean",delay:"number"},Vw={animation:!0,autohide:!0,delay:5e3};class Ja extends Wn{constructor(n,i){super(n,i),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Vw}static get DefaultType(){return Uw}static get NAME(){return Dw}show(){if(R.trigger(this._element,qw).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Ww);const i=()=>{this._element.classList.remove(Ma),R.trigger(this._element,Bw),this._maybeScheduleHide()};this._element.classList.remove(Df),ko(this._element),this._element.classList.add(Pa,Ma),this._queueCallback(i,this._element,this._config.animation)}hide(){if(!this.isShown()||R.trigger(this._element,Rw).defaultPrevented)return;const i=()=>{this._element.classList.add(Df),this._element.classList.remove(Ma,Pa),R.trigger(this._element,Fw)};this._element.classList.add(Ma),this._queueCallback(i,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Pa),super.dispose()}isShown(){return this._element.classList.contains(Pa)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(n,i){switch(n.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=i;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=i;break}}if(i){this._clearTimeout();return}const f=n.relatedTarget;this._element===f||this._element.contains(f)||this._maybeScheduleHide()}_setListeners(){R.on(this._element,Lw,n=>this._onInteraction(n,!0)),R.on(this._element,$w,n=>this._onInteraction(n,!1)),R.on(this._element,Pw,n=>this._onInteraction(n,!0)),R.on(this._element,Mw,n=>this._onInteraction(n,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(n){return this.each(function(){const i=Ja.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof i[n]>"u")throw new TypeError(`No method named "${n}"`);i[n](this)}})}}Ya(Ja);In(Ja);var Ao={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Hw=Ao.exports,Nf;function zw(){return Nf||(Nf=1,(function(u,n){(function(){var i,f="4.17.21",v=200,y="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",x="Expected a function",T="Invalid `variable` option passed into `_.template`",C="__lodash_hash_undefined__",q=500,M="__lodash_placeholder__",H=1,X=2,Y=4,he=1,G=2,te=1,re=2,xe=4,_e=8,de=16,ae=32,Ae=64,Se=128,Ue=256,Ve=512,Ke=30,Oe="...",pt=800,Ze=16,pn=1,On=2,gt=3,ve=1/0,It=9007199254740991,Kt=17976931348623157e292,hn=NaN,yt=4294967295,Et=yt-1,Un=yt>>>1,Vn=[["ary",Se],["bind",te],["bindKey",re],["curry",_e],["curryRight",de],["flip",Ve],["partial",ae],["partialRight",Ae],["rearg",Ue]],wt="[object Arguments]",_n="[object Array]",Ps="[object AsyncFunction]",Lt="[object Boolean]",kn="[object Date]",Sr="[object DOMException]",Hn="[object Error]",ds="[object Function]",ai="[object GeneratorFunction]",Ye="[object Map]",fs="[object Number]",ps="[object Null]",Yt="[object Object]",li="[object Promise]",Ni="[object Proxy]",et="[object RegExp]",le="[object Set]",Ge="[object String]",ht="[object Symbol]",xt="[object Undefined]",zn="[object WeakMap]",Kn="[object WeakSet]",Yn="[object ArrayBuffer]",Ot="[object DataView]",Ir="[object Float32Array]",Or="[object Float64Array]",hs="[object Int8Array]",Gn="[object Int16Array]",At="[object Int32Array]",kr="[object Uint8Array]",Dr="[object Uint8ClampedArray]",at="[object Uint16Array]",Li="[object Uint32Array]",Nr=/\b__p \+= '';/g,Za=/\b(__p \+=) '' \+/g,Ms=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$o=/&(?:amp|lt|gt|quot|#39);/g,Lr=/[&<>"']/g,el=RegExp($o.source),$r=RegExp(Lr.source),F=/<%-([\s\S]+?)%>/g,tl=/<%([\s\S]+?)%>/g,$i=/<%=([\s\S]+?)%>/g,nl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sl=/^\w*$/,$t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vn=/[\\^$.*+?()[\]{}|]/g,jn=RegExp(vn.source),ui=/^\s+/,oe=/\s/,_t=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pr=/\{\n\/\* \[wrapped with (.+)\] \*/,Qn=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dn=/[()=,{}\[\]\/\s]/,il=/\\(\\)?/g,Pi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Po=/\w*$/,rl=/^[-+]0x[0-9a-f]+$/i,Ct=/^0b[01]+$/i,Mi=/^\[object .+?Constructor\]$/,Nn=/^0o[0-7]+$/i,nn=/^(?:0|[1-9]\d*)$/,Mr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ln=/($^)/,Ri=/['\n\r\u2028\u2029\\]/g,$n="\\ud800-\\udfff",ol="\\u0300-\\u036f",Rr="\\ufe20-\\ufe2f",al="\\u20d0-\\u20ff",Mo=ol+Rr+al,Fr="\\u2700-\\u27bf",Pt="a-z\\xdf-\\xf6\\xf8-\\xff",Rs="\\xac\\xb1\\xd7\\xf7",Ro="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ut="\\u2000-\\u206f",ci=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fo="A-Z\\xc0-\\xd6\\xd8-\\xde",qo="\\ufe0e\\ufe0f",qr=Rs+Ro+ut+ci,Pn="[']",ll="["+$n+"]",_s="["+qr+"]",Xn="["+Mo+"]",Bo="\\d+",Jn="["+Fr+"]",Gt="["+Pt+"]",sn="[^"+$n+qr+Bo+Fr+Pt+Fo+"]",Fs="\\ud83c[\\udffb-\\udfff]",Fi="(?:"+Xn+"|"+Fs+")",di="[^"+$n+"]",Br="(?:\\ud83c[\\udde6-\\uddff]){2}",Wr="[\\ud800-\\udbff][\\udc00-\\udfff]",qs="["+Fo+"]",jt="\\u200d",Ur="(?:"+Gt+"|"+sn+")",qi="(?:"+qs+"|"+sn+")",Wo="(?:"+Pn+"(?:d|ll|m|re|s|t|ve))?",Vr="(?:"+Pn+"(?:D|LL|M|RE|S|T|VE))?",fi=Fi+"?",Uo="["+qo+"]?",Bi="(?:"+jt+"(?:"+[di,Br,Wr].join("|")+")"+Uo+fi+")*",Hr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zr="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Vo=Uo+fi+Bi,Wi="(?:"+[Jn,Br,Wr].join("|")+")"+Vo,Ui="(?:"+[di+Xn+"?",Xn,Br,Wr,ll].join("|")+")",Kr=RegExp(Pn,"g"),Yr=RegExp(Xn,"g"),Bs=RegExp(Fs+"(?="+Fs+")|"+Ui+Vo,"g"),Vi=RegExp([qs+"?"+Gt+"+"+Wo+"(?="+[_s,qs,"$"].join("|")+")",qi+"+"+Vr+"(?="+[_s,qs+Ur,"$"].join("|")+")",qs+"?"+Ur+"+"+Wo,qs+"+"+Vr,zr,Hr,Bo,Wi].join("|"),"g"),Pe=RegExp("["+jt+$n+Mo+qo+"]"),ul=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,cl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],dl=-1,qe={};qe[Ir]=qe[Or]=qe[hs]=qe[Gn]=qe[At]=qe[kr]=qe[Dr]=qe[at]=qe[Li]=!0,qe[wt]=qe[_n]=qe[Yn]=qe[Lt]=qe[Ot]=qe[kn]=qe[Hn]=qe[ds]=qe[Ye]=qe[fs]=qe[Yt]=qe[et]=qe[le]=qe[Ge]=qe[zn]=!1;var Fe={};Fe[wt]=Fe[_n]=Fe[Yn]=Fe[Ot]=Fe[Lt]=Fe[kn]=Fe[Ir]=Fe[Or]=Fe[hs]=Fe[Gn]=Fe[At]=Fe[Ye]=Fe[fs]=Fe[Yt]=Fe[et]=Fe[le]=Fe[Ge]=Fe[ht]=Fe[kr]=Fe[Dr]=Fe[at]=Fe[Li]=!0,Fe[Hn]=Fe[ds]=Fe[zn]=!1;var Zn={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},fl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},es={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},vs=parseFloat,ms=parseInt,Gr=typeof Oa=="object"&&Oa&&Oa.Object===Object&&Oa,Ho=typeof self=="object"&&self&&self.Object===Object&&self,ct=Gr||Ho||Function("return this")(),jr=n&&!n.nodeType&&n,gs=jr&&!0&&u&&!u.nodeType&&u,ts=gs&&gs.exports===jr,Xe=ts&&Gr.process,tt=(function(){try{var b=gs&&gs.require&&gs.require("util").types;return b||Xe&&Xe.binding&&Xe.binding("util")}catch{}})(),bs=tt&&tt.isArrayBuffer,zo=tt&&tt.isDate,Ko=tt&&tt.isMap,Yo=tt&&tt.isRegExp,Go=tt&&tt.isSet,Qr=tt&&tt.isTypedArray;function Mt(b,D,A){switch(A.length){case 0:return b.call(D);case 1:return b.call(D,A[0]);case 2:return b.call(D,A[0],A[1]);case 3:return b.call(D,A[0],A[1],A[2])}return b.apply(D,A)}function hl(b,D,A,K){for(var ue=-1,Ee=b==null?0:b.length;++ue<Ee;){var st=b[ue];D(K,st,A(st),b)}return K}function kt(b,D){for(var A=-1,K=b==null?0:b.length;++A<K&&D(b[A],A,b)!==!1;);return b}function pi(b,D){for(var A=b==null?0:b.length;A--&&D(b[A],A,b)!==!1;);return b}function Xr(b,D){for(var A=-1,K=b==null?0:b.length;++A<K;)if(!D(b[A],A,b))return!1;return!0}function mn(b,D){for(var A=-1,K=b==null?0:b.length,ue=0,Ee=[];++A<K;){var st=b[A];D(st,A,b)&&(Ee[ue++]=st)}return Ee}function Hi(b,D){var A=b==null?0:b.length;return!!A&&gn(b,D,0)>-1}function Jr(b,D,A){for(var K=-1,ue=b==null?0:b.length;++K<ue;)if(A(D,b[K]))return!0;return!1}function We(b,D){for(var A=-1,K=b==null?0:b.length,ue=Array(K);++A<K;)ue[A]=D(b[A],A,b);return ue}function ns(b,D){for(var A=-1,K=D.length,ue=b.length;++A<K;)b[ue+A]=D[A];return b}function Zr(b,D,A,K){var ue=-1,Ee=b==null?0:b.length;for(K&&Ee&&(A=b[++ue]);++ue<Ee;)A=D(A,b[ue],ue,b);return A}function Rt(b,D,A,K){var ue=b==null?0:b.length;for(K&&ue&&(A=b[--ue]);ue--;)A=D(A,b[ue],ue,b);return A}function Mn(b,D){for(var A=-1,K=b==null?0:b.length;++A<K;)if(D(b[A],A,b))return!0;return!1}var ys=to("length");function _l(b){return b.split("")}function Ws(b){return b.match(lt)||[]}function jo(b,D,A){var K;return A(b,function(ue,Ee,st){if(D(ue,Ee,st))return K=Ee,!1}),K}function zi(b,D,A,K){for(var ue=b.length,Ee=A+(K?1:-1);K?Ee--:++Ee<ue;)if(D(b[Ee],Ee,b))return Ee;return-1}function gn(b,D,A){return D===D?bl(b,D,A):zi(b,Xo,A)}function Qo(b,D,A,K){for(var ue=A-1,Ee=b.length;++ue<Ee;)if(K(b[ue],D))return ue;return-1}function Xo(b){return b!==b}function eo(b,D){var A=b==null?0:b.length;return A?so(b,D)/A:hn}function to(b){return function(D){return D==null?i:D[b]}}function Us(b){return function(D){return b==null?i:b[D]}}function no(b,D,A,K,ue){return ue(b,function(Ee,st,Me){A=K?(K=!1,Ee):D(A,Ee,st,Me)}),A}function vl(b,D){var A=b.length;for(b.sort(D);A--;)b[A]=b[A].value;return b}function so(b,D){for(var A,K=-1,ue=b.length;++K<ue;){var Ee=D(b[K]);Ee!==i&&(A=A===i?Ee:A+Ee)}return A}function Ne(b,D){for(var A=-1,K=Array(b);++A<b;)K[A]=D(A);return K}function Be(b,D){return We(D,function(A){return[A,b[A]]})}function nt(b){return b&&b.slice(0,ea(b)+1).replace(ui,"")}function je(b){return function(D){return b(D)}}function Tt(b,D){return We(D,function(A){return b[A]})}function bn(b,D){return b.has(D)}function Rn(b,D){for(var A=-1,K=b.length;++A<K&&gn(D,b[A],0)>-1;);return A}function hi(b,D){for(var A=b.length;A--&&gn(D,b[A],0)>-1;);return A}function vt(b,D){for(var A=b.length,K=0;A--;)b[A]===D&&++K;return K}var Ki=Us(Zn),Yi=Us(fl);function _i(b){return"\\"+es[b]}function Gi(b,D){return b==null?i:b[D]}function Vs(b){return Pe.test(b)}function ml(b){return ul.test(b)}function ji(b){for(var D,A=[];!(D=b.next()).done;)A.push(D.value);return A}function vi(b){var D=-1,A=Array(b.size);return b.forEach(function(K,ue){A[++D]=[ue,K]}),A}function Jo(b,D){return function(A){return b(D(A))}}function ss(b,D){for(var A=-1,K=b.length,ue=0,Ee=[];++A<K;){var st=b[A];(st===D||st===M)&&(b[A]=M,Ee[ue++]=A)}return Ee}function Qi(b){var D=-1,A=Array(b.size);return b.forEach(function(K){A[++D]=K}),A}function gl(b){var D=-1,A=Array(b.size);return b.forEach(function(K){A[++D]=[K,K]}),A}function bl(b,D,A){for(var K=A-1,ue=b.length;++K<ue;)if(b[K]===D)return K;return-1}function Zo(b,D,A){for(var K=A+1;K--;)if(b[K]===D)return K;return K}function Hs(b){return Vs(b)?El(b):ys(b)}function rn(b){return Vs(b)?ta(b):_l(b)}function ea(b){for(var D=b.length;D--&&oe.test(b.charAt(D)););return D}var yl=Us(pl);function El(b){for(var D=Bs.lastIndex=0;Bs.test(b);)++D;return D}function ta(b){return b.match(Bs)||[]}function Xi(b){return b.match(Vi)||[]}var Ji=(function b(D){D=D==null?ct:zs.defaults(ct.Object(),D,zs.pick(ct,cl));var A=D.Array,K=D.Date,ue=D.Error,Ee=D.Function,st=D.Math,Me=D.Object,io=D.RegExp,ro=D.String,Ft=D.TypeError,Zi=A.prototype,wl=Ee.prototype,Ks=Me.prototype,Es=D["__core-js_shared__"],He=wl.toString,De=Ks.hasOwnProperty,xl=0,na=(function(){var e=/[^.]+$/.exec(Es&&Es.keys&&Es.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),o=Ks.toString,r=He.call(Me),l=ct._,_=io("^"+He.call(De).replace(vn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=ts?D.Buffer:i,O=D.Symbol,I=D.Uint8Array,W=w?w.allocUnsafe:i,Z=Jo(Me.getPrototypeOf,Me),B=Me.create,me=Ks.propertyIsEnumerable,Re=Zi.splice,ne=O?O.isConcatSpreadable:i,ze=O?O.iterator:i,be=O?O.toStringTag:i,dt=(function(){try{var e=Ei(Me,"defineProperty");return e({},"",{}),e}catch{}})(),Qt=D.clearTimeout!==ct.clearTimeout&&D.clearTimeout,oo=K&&K.now!==ct.Date.now&&K.now,Al=D.setTimeout!==ct.setTimeout&&D.setTimeout,er=st.ceil,sa=st.floor,Cl=Me.getOwnPropertySymbols,Lp=w?w.isBuffer:i,oc=D.isFinite,$p=Zi.join,Pp=Jo(Me.keys,Me),mt=st.max,Dt=st.min,Mp=K.now,Rp=D.parseInt,ac=st.random,Fp=Zi.reverse,Tl=Ei(D,"DataView"),ao=Ei(D,"Map"),Sl=Ei(D,"Promise"),tr=Ei(D,"Set"),lo=Ei(D,"WeakMap"),uo=Ei(Me,"create"),ia=lo&&new lo,nr={},qp=wi(Tl),Bp=wi(ao),Wp=wi(Sl),Up=wi(tr),Vp=wi(lo),ra=O?O.prototype:i,co=ra?ra.valueOf:i,lc=ra?ra.toString:i;function p(e){if(Je(e)&&!pe(e)&&!(e instanceof Ie)){if(e instanceof yn)return e;if(De.call(e,"__wrapped__"))return ud(e)}return new yn(e)}var sr=(function(){function e(){}return function(t){if(!Qe(t))return{};if(B)return B(t);e.prototype=t;var s=new e;return e.prototype=i,s}})();function oa(){}function yn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}p.templateSettings={escape:F,evaluate:tl,interpolate:$i,variable:"",imports:{_:p}},p.prototype=oa.prototype,p.prototype.constructor=p,yn.prototype=sr(oa.prototype),yn.prototype.constructor=yn;function Ie(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=yt,this.__views__=[]}function Hp(){var e=new Ie(this.__wrapped__);return e.__actions__=Xt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Xt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Xt(this.__views__),e}function zp(){if(this.__filtered__){var e=new Ie(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Kp(){var e=this.__wrapped__.value(),t=this.__dir__,s=pe(e),a=t<0,d=s?e.length:0,h=i_(0,d,this.__views__),m=h.start,g=h.end,E=g-m,L=a?g:m-1,$=this.__iteratees__,P=$.length,z=0,j=Dt(E,this.__takeCount__);if(!s||!a&&d==E&&j==E)return Nc(e,this.__actions__);var se=[];e:for(;E--&&z<j;){L+=t;for(var ye=-1,ie=e[L];++ye<P;){var Te=$[ye],ke=Te.iteratee,ln=Te.type,Wt=ke(ie);if(ln==On)ie=Wt;else if(!Wt){if(ln==pn)continue e;break e}}se[z++]=ie}return se}Ie.prototype=sr(oa.prototype),Ie.prototype.constructor=Ie;function mi(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var a=e[t];this.set(a[0],a[1])}}function Yp(){this.__data__=uo?uo(null):{},this.size=0}function Gp(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function jp(e){var t=this.__data__;if(uo){var s=t[e];return s===C?i:s}return De.call(t,e)?t[e]:i}function Qp(e){var t=this.__data__;return uo?t[e]!==i:De.call(t,e)}function Xp(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=uo&&t===i?C:t,this}mi.prototype.clear=Yp,mi.prototype.delete=Gp,mi.prototype.get=jp,mi.prototype.has=Qp,mi.prototype.set=Xp;function ws(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var a=e[t];this.set(a[0],a[1])}}function Jp(){this.__data__=[],this.size=0}function Zp(e){var t=this.__data__,s=aa(t,e);if(s<0)return!1;var a=t.length-1;return s==a?t.pop():Re.call(t,s,1),--this.size,!0}function eh(e){var t=this.__data__,s=aa(t,e);return s<0?i:t[s][1]}function th(e){return aa(this.__data__,e)>-1}function nh(e,t){var s=this.__data__,a=aa(s,e);return a<0?(++this.size,s.push([e,t])):s[a][1]=t,this}ws.prototype.clear=Jp,ws.prototype.delete=Zp,ws.prototype.get=eh,ws.prototype.has=th,ws.prototype.set=nh;function xs(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var a=e[t];this.set(a[0],a[1])}}function sh(){this.size=0,this.__data__={hash:new mi,map:new(ao||ws),string:new mi}}function ih(e){var t=ba(this,e).delete(e);return this.size-=t?1:0,t}function rh(e){return ba(this,e).get(e)}function oh(e){return ba(this,e).has(e)}function ah(e,t){var s=ba(this,e),a=s.size;return s.set(e,t),this.size+=s.size==a?0:1,this}xs.prototype.clear=sh,xs.prototype.delete=ih,xs.prototype.get=rh,xs.prototype.has=oh,xs.prototype.set=ah;function gi(e){var t=-1,s=e==null?0:e.length;for(this.__data__=new xs;++t<s;)this.add(e[t])}function lh(e){return this.__data__.set(e,C),this}function uh(e){return this.__data__.has(e)}gi.prototype.add=gi.prototype.push=lh,gi.prototype.has=uh;function Fn(e){var t=this.__data__=new ws(e);this.size=t.size}function ch(){this.__data__=new ws,this.size=0}function dh(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}function fh(e){return this.__data__.get(e)}function ph(e){return this.__data__.has(e)}function hh(e,t){var s=this.__data__;if(s instanceof ws){var a=s.__data__;if(!ao||a.length<v-1)return a.push([e,t]),this.size=++s.size,this;s=this.__data__=new xs(a)}return s.set(e,t),this.size=s.size,this}Fn.prototype.clear=ch,Fn.prototype.delete=dh,Fn.prototype.get=fh,Fn.prototype.has=ph,Fn.prototype.set=hh;function uc(e,t){var s=pe(e),a=!s&&xi(e),d=!s&&!a&&Xs(e),h=!s&&!a&&!d&&ar(e),m=s||a||d||h,g=m?Ne(e.length,ro):[],E=g.length;for(var L in e)(t||De.call(e,L))&&!(m&&(L=="length"||d&&(L=="offset"||L=="parent")||h&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||Ss(L,E)))&&g.push(L);return g}function cc(e){var t=e.length;return t?e[Fl(0,t-1)]:i}function _h(e,t){return ya(Xt(e),bi(t,0,e.length))}function vh(e){return ya(Xt(e))}function Il(e,t,s){(s!==i&&!qn(e[t],s)||s===i&&!(t in e))&&As(e,t,s)}function fo(e,t,s){var a=e[t];(!(De.call(e,t)&&qn(a,s))||s===i&&!(t in e))&&As(e,t,s)}function aa(e,t){for(var s=e.length;s--;)if(qn(e[s][0],t))return s;return-1}function mh(e,t,s,a){return Ys(e,function(d,h,m){t(a,d,s(d),m)}),a}function dc(e,t){return e&&rs(t,bt(t),e)}function gh(e,t){return e&&rs(t,Zt(t),e)}function As(e,t,s){t=="__proto__"&&dt?dt(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}function Ol(e,t){for(var s=-1,a=t.length,d=A(a),h=e==null;++s<a;)d[s]=h?i:uu(e,t[s]);return d}function bi(e,t,s){return e===e&&(s!==i&&(e=e<=s?e:s),t!==i&&(e=e>=t?e:t)),e}function En(e,t,s,a,d,h){var m,g=t&H,E=t&X,L=t&Y;if(s&&(m=d?s(e,a,d,h):s(e)),m!==i)return m;if(!Qe(e))return e;var $=pe(e);if($){if(m=o_(e),!g)return Xt(e,m)}else{var P=Nt(e),z=P==ds||P==ai;if(Xs(e))return Pc(e,g);if(P==Yt||P==wt||z&&!d){if(m=E||z?{}:ed(e),!g)return E?jh(e,gh(m,e)):Gh(e,dc(m,e))}else{if(!Fe[P])return d?e:{};m=a_(e,P,g)}}h||(h=new Fn);var j=h.get(e);if(j)return j;h.set(e,m),Od(e)?e.forEach(function(ie){m.add(En(ie,t,s,ie,e,h))}):Sd(e)&&e.forEach(function(ie,Te){m.set(Te,En(ie,t,s,Te,e,h))});var se=L?E?jl:Gl:E?Zt:bt,ye=$?i:se(e);return kt(ye||e,function(ie,Te){ye&&(Te=ie,ie=e[Te]),fo(m,Te,En(ie,t,s,Te,e,h))}),m}function bh(e){var t=bt(e);return function(s){return fc(s,e,t)}}function fc(e,t,s){var a=s.length;if(e==null)return!a;for(e=Me(e);a--;){var d=s[a],h=t[d],m=e[d];if(m===i&&!(d in e)||!h(m))return!1}return!0}function pc(e,t,s){if(typeof e!="function")throw new Ft(x);return bo(function(){e.apply(i,s)},t)}function po(e,t,s,a){var d=-1,h=Hi,m=!0,g=e.length,E=[],L=t.length;if(!g)return E;s&&(t=We(t,je(s))),a?(h=Jr,m=!1):t.length>=v&&(h=bn,m=!1,t=new gi(t));e:for(;++d<g;){var $=e[d],P=s==null?$:s($);if($=a||$!==0?$:0,m&&P===P){for(var z=L;z--;)if(t[z]===P)continue e;E.push($)}else h(t,P,a)||E.push($)}return E}var Ys=Bc(is),hc=Bc(Dl,!0);function yh(e,t){var s=!0;return Ys(e,function(a,d,h){return s=!!t(a,d,h),s}),s}function la(e,t,s){for(var a=-1,d=e.length;++a<d;){var h=e[a],m=t(h);if(m!=null&&(g===i?m===m&&!an(m):s(m,g)))var g=m,E=h}return E}function Eh(e,t,s,a){var d=e.length;for(s=ge(s),s<0&&(s=-s>d?0:d+s),a=a===i||a>d?d:ge(a),a<0&&(a+=d),a=s>a?0:Dd(a);s<a;)e[s++]=t;return e}function _c(e,t){var s=[];return Ys(e,function(a,d,h){t(a,d,h)&&s.push(a)}),s}function St(e,t,s,a,d){var h=-1,m=e.length;for(s||(s=u_),d||(d=[]);++h<m;){var g=e[h];t>0&&s(g)?t>1?St(g,t-1,s,a,d):ns(d,g):a||(d[d.length]=g)}return d}var kl=Wc(),vc=Wc(!0);function is(e,t){return e&&kl(e,t,bt)}function Dl(e,t){return e&&vc(e,t,bt)}function ua(e,t){return mn(t,function(s){return Is(e[s])})}function yi(e,t){t=js(t,e);for(var s=0,a=t.length;e!=null&&s<a;)e=e[os(t[s++])];return s&&s==a?e:i}function mc(e,t,s){var a=t(e);return pe(e)?a:ns(a,s(e))}function qt(e){return e==null?e===i?xt:ps:be&&be in Me(e)?s_(e):v_(e)}function Nl(e,t){return e>t}function wh(e,t){return e!=null&&De.call(e,t)}function xh(e,t){return e!=null&&t in Me(e)}function Ah(e,t,s){return e>=Dt(t,s)&&e<mt(t,s)}function Ll(e,t,s){for(var a=s?Jr:Hi,d=e[0].length,h=e.length,m=h,g=A(h),E=1/0,L=[];m--;){var $=e[m];m&&t&&($=We($,je(t))),E=Dt($.length,E),g[m]=!s&&(t||d>=120&&$.length>=120)?new gi(m&&$):i}$=e[0];var P=-1,z=g[0];e:for(;++P<d&&L.length<E;){var j=$[P],se=t?t(j):j;if(j=s||j!==0?j:0,!(z?bn(z,se):a(L,se,s))){for(m=h;--m;){var ye=g[m];if(!(ye?bn(ye,se):a(e[m],se,s)))continue e}z&&z.push(se),L.push(j)}}return L}function Ch(e,t,s,a){return is(e,function(d,h,m){t(a,s(d),h,m)}),a}function ho(e,t,s){t=js(t,e),e=id(e,t);var a=e==null?e:e[os(xn(t))];return a==null?i:Mt(a,e,s)}function gc(e){return Je(e)&&qt(e)==wt}function Th(e){return Je(e)&&qt(e)==Yn}function Sh(e){return Je(e)&&qt(e)==kn}function _o(e,t,s,a,d){return e===t?!0:e==null||t==null||!Je(e)&&!Je(t)?e!==e&&t!==t:Ih(e,t,s,a,_o,d)}function Ih(e,t,s,a,d,h){var m=pe(e),g=pe(t),E=m?_n:Nt(e),L=g?_n:Nt(t);E=E==wt?Yt:E,L=L==wt?Yt:L;var $=E==Yt,P=L==Yt,z=E==L;if(z&&Xs(e)){if(!Xs(t))return!1;m=!0,$=!1}if(z&&!$)return h||(h=new Fn),m||ar(e)?Xc(e,t,s,a,d,h):t_(e,t,E,s,a,d,h);if(!(s&he)){var j=$&&De.call(e,"__wrapped__"),se=P&&De.call(t,"__wrapped__");if(j||se){var ye=j?e.value():e,ie=se?t.value():t;return h||(h=new Fn),d(ye,ie,s,a,h)}}return z?(h||(h=new Fn),n_(e,t,s,a,d,h)):!1}function Oh(e){return Je(e)&&Nt(e)==Ye}function $l(e,t,s,a){var d=s.length,h=d,m=!a;if(e==null)return!h;for(e=Me(e);d--;){var g=s[d];if(m&&g[2]?g[1]!==e[g[0]]:!(g[0]in e))return!1}for(;++d<h;){g=s[d];var E=g[0],L=e[E],$=g[1];if(m&&g[2]){if(L===i&&!(E in e))return!1}else{var P=new Fn;if(a)var z=a(L,$,E,e,t,P);if(!(z===i?_o($,L,he|G,a,P):z))return!1}}return!0}function bc(e){if(!Qe(e)||d_(e))return!1;var t=Is(e)?_:Mi;return t.test(wi(e))}function kh(e){return Je(e)&&qt(e)==et}function Dh(e){return Je(e)&&Nt(e)==le}function Nh(e){return Je(e)&&Ta(e.length)&&!!qe[qt(e)]}function yc(e){return typeof e=="function"?e:e==null?en:typeof e=="object"?pe(e)?xc(e[0],e[1]):wc(e):Ud(e)}function Pl(e){if(!go(e))return Pp(e);var t=[];for(var s in Me(e))De.call(e,s)&&s!="constructor"&&t.push(s);return t}function Lh(e){if(!Qe(e))return __(e);var t=go(e),s=[];for(var a in e)a=="constructor"&&(t||!De.call(e,a))||s.push(a);return s}function Ml(e,t){return e<t}function Ec(e,t){var s=-1,a=Jt(e)?A(e.length):[];return Ys(e,function(d,h,m){a[++s]=t(d,h,m)}),a}function wc(e){var t=Xl(e);return t.length==1&&t[0][2]?nd(t[0][0],t[0][1]):function(s){return s===e||$l(s,e,t)}}function xc(e,t){return Zl(e)&&td(t)?nd(os(e),t):function(s){var a=uu(s,e);return a===i&&a===t?cu(s,e):_o(t,a,he|G)}}function ca(e,t,s,a,d){e!==t&&kl(t,function(h,m){if(d||(d=new Fn),Qe(h))$h(e,t,m,s,ca,a,d);else{var g=a?a(tu(e,m),h,m+"",e,t,d):i;g===i&&(g=h),Il(e,m,g)}},Zt)}function $h(e,t,s,a,d,h,m){var g=tu(e,s),E=tu(t,s),L=m.get(E);if(L){Il(e,s,L);return}var $=h?h(g,E,s+"",e,t,m):i,P=$===i;if(P){var z=pe(E),j=!z&&Xs(E),se=!z&&!j&&ar(E);$=E,z||j||se?pe(g)?$=g:it(g)?$=Xt(g):j?(P=!1,$=Pc(E,!0)):se?(P=!1,$=Mc(E,!0)):$=[]:yo(E)||xi(E)?($=g,xi(g)?$=Nd(g):(!Qe(g)||Is(g))&&($=ed(E))):P=!1}P&&(m.set(E,$),d($,E,a,h,m),m.delete(E)),Il(e,s,$)}function Ac(e,t){var s=e.length;if(s)return t+=t<0?s:0,Ss(t,s)?e[t]:i}function Cc(e,t,s){t.length?t=We(t,function(h){return pe(h)?function(m){return yi(m,h.length===1?h[0]:h)}:h}):t=[en];var a=-1;t=We(t,je(ee()));var d=Ec(e,function(h,m,g){var E=We(t,function(L){return L(h)});return{criteria:E,index:++a,value:h}});return vl(d,function(h,m){return Yh(h,m,s)})}function Ph(e,t){return Tc(e,t,function(s,a){return cu(e,a)})}function Tc(e,t,s){for(var a=-1,d=t.length,h={};++a<d;){var m=t[a],g=yi(e,m);s(g,m)&&vo(h,js(m,e),g)}return h}function Mh(e){return function(t){return yi(t,e)}}function Rl(e,t,s,a){var d=a?Qo:gn,h=-1,m=t.length,g=e;for(e===t&&(t=Xt(t)),s&&(g=We(e,je(s)));++h<m;)for(var E=0,L=t[h],$=s?s(L):L;(E=d(g,$,E,a))>-1;)g!==e&&Re.call(g,E,1),Re.call(e,E,1);return e}function Sc(e,t){for(var s=e?t.length:0,a=s-1;s--;){var d=t[s];if(s==a||d!==h){var h=d;Ss(d)?Re.call(e,d,1):Wl(e,d)}}return e}function Fl(e,t){return e+sa(ac()*(t-e+1))}function Rh(e,t,s,a){for(var d=-1,h=mt(er((t-e)/(s||1)),0),m=A(h);h--;)m[a?h:++d]=e,e+=s;return m}function ql(e,t){var s="";if(!e||t<1||t>It)return s;do t%2&&(s+=e),t=sa(t/2),t&&(e+=e);while(t);return s}function we(e,t){return nu(sd(e,t,en),e+"")}function Fh(e){return cc(lr(e))}function qh(e,t){var s=lr(e);return ya(s,bi(t,0,s.length))}function vo(e,t,s,a){if(!Qe(e))return e;t=js(t,e);for(var d=-1,h=t.length,m=h-1,g=e;g!=null&&++d<h;){var E=os(t[d]),L=s;if(E==="__proto__"||E==="constructor"||E==="prototype")return e;if(d!=m){var $=g[E];L=a?a($,E,g):i,L===i&&(L=Qe($)?$:Ss(t[d+1])?[]:{})}fo(g,E,L),g=g[E]}return e}var Ic=ia?function(e,t){return ia.set(e,t),e}:en,Bh=dt?function(e,t){return dt(e,"toString",{configurable:!0,enumerable:!1,value:fu(t),writable:!0})}:en;function Wh(e){return ya(lr(e))}function wn(e,t,s){var a=-1,d=e.length;t<0&&(t=-t>d?0:d+t),s=s>d?d:s,s<0&&(s+=d),d=t>s?0:s-t>>>0,t>>>=0;for(var h=A(d);++a<d;)h[a]=e[a+t];return h}function Uh(e,t){var s;return Ys(e,function(a,d,h){return s=t(a,d,h),!s}),!!s}function da(e,t,s){var a=0,d=e==null?a:e.length;if(typeof t=="number"&&t===t&&d<=Un){for(;a<d;){var h=a+d>>>1,m=e[h];m!==null&&!an(m)&&(s?m<=t:m<t)?a=h+1:d=h}return d}return Bl(e,t,en,s)}function Bl(e,t,s,a){var d=0,h=e==null?0:e.length;if(h===0)return 0;t=s(t);for(var m=t!==t,g=t===null,E=an(t),L=t===i;d<h;){var $=sa((d+h)/2),P=s(e[$]),z=P!==i,j=P===null,se=P===P,ye=an(P);if(m)var ie=a||se;else L?ie=se&&(a||z):g?ie=se&&z&&(a||!j):E?ie=se&&z&&!j&&(a||!ye):j||ye?ie=!1:ie=a?P<=t:P<t;ie?d=$+1:h=$}return Dt(h,Et)}function Oc(e,t){for(var s=-1,a=e.length,d=0,h=[];++s<a;){var m=e[s],g=t?t(m):m;if(!s||!qn(g,E)){var E=g;h[d++]=m===0?0:m}}return h}function kc(e){return typeof e=="number"?e:an(e)?hn:+e}function on(e){if(typeof e=="string")return e;if(pe(e))return We(e,on)+"";if(an(e))return lc?lc.call(e):"";var t=e+"";return t=="0"&&1/e==-ve?"-0":t}function Gs(e,t,s){var a=-1,d=Hi,h=e.length,m=!0,g=[],E=g;if(s)m=!1,d=Jr;else if(h>=v){var L=t?null:Zh(e);if(L)return Qi(L);m=!1,d=bn,E=new gi}else E=t?[]:g;e:for(;++a<h;){var $=e[a],P=t?t($):$;if($=s||$!==0?$:0,m&&P===P){for(var z=E.length;z--;)if(E[z]===P)continue e;t&&E.push(P),g.push($)}else d(E,P,s)||(E!==g&&E.push(P),g.push($))}return g}function Wl(e,t){return t=js(t,e),e=id(e,t),e==null||delete e[os(xn(t))]}function Dc(e,t,s,a){return vo(e,t,s(yi(e,t)),a)}function fa(e,t,s,a){for(var d=e.length,h=a?d:-1;(a?h--:++h<d)&&t(e[h],h,e););return s?wn(e,a?0:h,a?h+1:d):wn(e,a?h+1:0,a?d:h)}function Nc(e,t){var s=e;return s instanceof Ie&&(s=s.value()),Zr(t,function(a,d){return d.func.apply(d.thisArg,ns([a],d.args))},s)}function Ul(e,t,s){var a=e.length;if(a<2)return a?Gs(e[0]):[];for(var d=-1,h=A(a);++d<a;)for(var m=e[d],g=-1;++g<a;)g!=d&&(h[d]=po(h[d]||m,e[g],t,s));return Gs(St(h,1),t,s)}function Lc(e,t,s){for(var a=-1,d=e.length,h=t.length,m={};++a<d;){var g=a<h?t[a]:i;s(m,e[a],g)}return m}function Vl(e){return it(e)?e:[]}function Hl(e){return typeof e=="function"?e:en}function js(e,t){return pe(e)?e:Zl(e,t)?[e]:ld(Le(e))}var Vh=we;function Qs(e,t,s){var a=e.length;return s=s===i?a:s,!t&&s>=a?e:wn(e,t,s)}var $c=Qt||function(e){return ct.clearTimeout(e)};function Pc(e,t){if(t)return e.slice();var s=e.length,a=W?W(s):new e.constructor(s);return e.copy(a),a}function zl(e){var t=new e.constructor(e.byteLength);return new I(t).set(new I(e)),t}function Hh(e,t){var s=t?zl(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}function zh(e){var t=new e.constructor(e.source,Po.exec(e));return t.lastIndex=e.lastIndex,t}function Kh(e){return co?Me(co.call(e)):{}}function Mc(e,t){var s=t?zl(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}function Rc(e,t){if(e!==t){var s=e!==i,a=e===null,d=e===e,h=an(e),m=t!==i,g=t===null,E=t===t,L=an(t);if(!g&&!L&&!h&&e>t||h&&m&&E&&!g&&!L||a&&m&&E||!s&&E||!d)return 1;if(!a&&!h&&!L&&e<t||L&&s&&d&&!a&&!h||g&&s&&d||!m&&d||!E)return-1}return 0}function Yh(e,t,s){for(var a=-1,d=e.criteria,h=t.criteria,m=d.length,g=s.length;++a<m;){var E=Rc(d[a],h[a]);if(E){if(a>=g)return E;var L=s[a];return E*(L=="desc"?-1:1)}}return e.index-t.index}function Fc(e,t,s,a){for(var d=-1,h=e.length,m=s.length,g=-1,E=t.length,L=mt(h-m,0),$=A(E+L),P=!a;++g<E;)$[g]=t[g];for(;++d<m;)(P||d<h)&&($[s[d]]=e[d]);for(;L--;)$[g++]=e[d++];return $}function qc(e,t,s,a){for(var d=-1,h=e.length,m=-1,g=s.length,E=-1,L=t.length,$=mt(h-g,0),P=A($+L),z=!a;++d<$;)P[d]=e[d];for(var j=d;++E<L;)P[j+E]=t[E];for(;++m<g;)(z||d<h)&&(P[j+s[m]]=e[d++]);return P}function Xt(e,t){var s=-1,a=e.length;for(t||(t=A(a));++s<a;)t[s]=e[s];return t}function rs(e,t,s,a){var d=!s;s||(s={});for(var h=-1,m=t.length;++h<m;){var g=t[h],E=a?a(s[g],e[g],g,s,e):i;E===i&&(E=e[g]),d?As(s,g,E):fo(s,g,E)}return s}function Gh(e,t){return rs(e,Jl(e),t)}function jh(e,t){return rs(e,Jc(e),t)}function pa(e,t){return function(s,a){var d=pe(s)?hl:mh,h=t?t():{};return d(s,e,ee(a,2),h)}}function ir(e){return we(function(t,s){var a=-1,d=s.length,h=d>1?s[d-1]:i,m=d>2?s[2]:i;for(h=e.length>3&&typeof h=="function"?(d--,h):i,m&&Bt(s[0],s[1],m)&&(h=d<3?i:h,d=1),t=Me(t);++a<d;){var g=s[a];g&&e(t,g,a,h)}return t})}function Bc(e,t){return function(s,a){if(s==null)return s;if(!Jt(s))return e(s,a);for(var d=s.length,h=t?d:-1,m=Me(s);(t?h--:++h<d)&&a(m[h],h,m)!==!1;);return s}}function Wc(e){return function(t,s,a){for(var d=-1,h=Me(t),m=a(t),g=m.length;g--;){var E=m[e?g:++d];if(s(h[E],E,h)===!1)break}return t}}function Qh(e,t,s){var a=t&te,d=mo(e);function h(){var m=this&&this!==ct&&this instanceof h?d:e;return m.apply(a?s:this,arguments)}return h}function Uc(e){return function(t){t=Le(t);var s=Vs(t)?rn(t):i,a=s?s[0]:t.charAt(0),d=s?Qs(s,1).join(""):t.slice(1);return a[e]()+d}}function rr(e){return function(t){return Zr(Bd(qd(t).replace(Kr,"")),e,"")}}function mo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var s=sr(e.prototype),a=e.apply(s,t);return Qe(a)?a:s}}function Xh(e,t,s){var a=mo(e);function d(){for(var h=arguments.length,m=A(h),g=h,E=or(d);g--;)m[g]=arguments[g];var L=h<3&&m[0]!==E&&m[h-1]!==E?[]:ss(m,E);if(h-=L.length,h<s)return Yc(e,t,ha,d.placeholder,i,m,L,i,i,s-h);var $=this&&this!==ct&&this instanceof d?a:e;return Mt($,this,m)}return d}function Vc(e){return function(t,s,a){var d=Me(t);if(!Jt(t)){var h=ee(s,3);t=bt(t),s=function(g){return h(d[g],g,d)}}var m=e(t,s,a);return m>-1?d[h?t[m]:m]:i}}function Hc(e){return Ts(function(t){var s=t.length,a=s,d=yn.prototype.thru;for(e&&t.reverse();a--;){var h=t[a];if(typeof h!="function")throw new Ft(x);if(d&&!m&&ga(h)=="wrapper")var m=new yn([],!0)}for(a=m?a:s;++a<s;){h=t[a];var g=ga(h),E=g=="wrapper"?Ql(h):i;E&&eu(E[0])&&E[1]==(Se|_e|ae|Ue)&&!E[4].length&&E[9]==1?m=m[ga(E[0])].apply(m,E[3]):m=h.length==1&&eu(h)?m[g]():m.thru(h)}return function(){var L=arguments,$=L[0];if(m&&L.length==1&&pe($))return m.plant($).value();for(var P=0,z=s?t[P].apply(this,L):$;++P<s;)z=t[P].call(this,z);return z}})}function ha(e,t,s,a,d,h,m,g,E,L){var $=t&Se,P=t&te,z=t&re,j=t&(_e|de),se=t&Ve,ye=z?i:mo(e);function ie(){for(var Te=arguments.length,ke=A(Te),ln=Te;ln--;)ke[ln]=arguments[ln];if(j)var Wt=or(ie),un=vt(ke,Wt);if(a&&(ke=Fc(ke,a,d,j)),h&&(ke=qc(ke,h,m,j)),Te-=un,j&&Te<L){var rt=ss(ke,Wt);return Yc(e,t,ha,ie.placeholder,s,ke,rt,g,E,L-Te)}var Bn=P?s:this,ks=z?Bn[e]:e;return Te=ke.length,g?ke=m_(ke,g):se&&Te>1&&ke.reverse(),$&&E<Te&&(ke.length=E),this&&this!==ct&&this instanceof ie&&(ks=ye||mo(ks)),ks.apply(Bn,ke)}return ie}function zc(e,t){return function(s,a){return Ch(s,e,t(a),{})}}function _a(e,t){return function(s,a){var d;if(s===i&&a===i)return t;if(s!==i&&(d=s),a!==i){if(d===i)return a;typeof s=="string"||typeof a=="string"?(s=on(s),a=on(a)):(s=kc(s),a=kc(a)),d=e(s,a)}return d}}function Kl(e){return Ts(function(t){return t=We(t,je(ee())),we(function(s){var a=this;return e(t,function(d){return Mt(d,a,s)})})})}function va(e,t){t=t===i?" ":on(t);var s=t.length;if(s<2)return s?ql(t,e):t;var a=ql(t,er(e/Hs(t)));return Vs(t)?Qs(rn(a),0,e).join(""):a.slice(0,e)}function Jh(e,t,s,a){var d=t&te,h=mo(e);function m(){for(var g=-1,E=arguments.length,L=-1,$=a.length,P=A($+E),z=this&&this!==ct&&this instanceof m?h:e;++L<$;)P[L]=a[L];for(;E--;)P[L++]=arguments[++g];return Mt(z,d?s:this,P)}return m}function Kc(e){return function(t,s,a){return a&&typeof a!="number"&&Bt(t,s,a)&&(s=a=i),t=Os(t),s===i?(s=t,t=0):s=Os(s),a=a===i?t<s?1:-1:Os(a),Rh(t,s,a,e)}}function ma(e){return function(t,s){return typeof t=="string"&&typeof s=="string"||(t=An(t),s=An(s)),e(t,s)}}function Yc(e,t,s,a,d,h,m,g,E,L){var $=t&_e,P=$?m:i,z=$?i:m,j=$?h:i,se=$?i:h;t|=$?ae:Ae,t&=~($?Ae:ae),t&xe||(t&=-4);var ye=[e,t,d,j,P,se,z,g,E,L],ie=s.apply(i,ye);return eu(e)&&rd(ie,ye),ie.placeholder=a,od(ie,e,t)}function Yl(e){var t=st[e];return function(s,a){if(s=An(s),a=a==null?0:Dt(ge(a),292),a&&oc(s)){var d=(Le(s)+"e").split("e"),h=t(d[0]+"e"+(+d[1]+a));return d=(Le(h)+"e").split("e"),+(d[0]+"e"+(+d[1]-a))}return t(s)}}var Zh=tr&&1/Qi(new tr([,-0]))[1]==ve?function(e){return new tr(e)}:_u;function Gc(e){return function(t){var s=Nt(t);return s==Ye?vi(t):s==le?gl(t):Be(t,e(t))}}function Cs(e,t,s,a,d,h,m,g){var E=t&re;if(!E&&typeof e!="function")throw new Ft(x);var L=a?a.length:0;if(L||(t&=-97,a=d=i),m=m===i?m:mt(ge(m),0),g=g===i?g:ge(g),L-=d?d.length:0,t&Ae){var $=a,P=d;a=d=i}var z=E?i:Ql(e),j=[e,t,s,a,d,$,P,h,m,g];if(z&&h_(j,z),e=j[0],t=j[1],s=j[2],a=j[3],d=j[4],g=j[9]=j[9]===i?E?0:e.length:mt(j[9]-L,0),!g&&t&(_e|de)&&(t&=-25),!t||t==te)var se=Qh(e,t,s);else t==_e||t==de?se=Xh(e,t,g):(t==ae||t==(te|ae))&&!d.length?se=Jh(e,t,s,a):se=ha.apply(i,j);var ye=z?Ic:rd;return od(ye(se,j),e,t)}function jc(e,t,s,a){return e===i||qn(e,Ks[s])&&!De.call(a,s)?t:e}function Qc(e,t,s,a,d,h){return Qe(e)&&Qe(t)&&(h.set(t,e),ca(e,t,i,Qc,h),h.delete(t)),e}function e_(e){return yo(e)?i:e}function Xc(e,t,s,a,d,h){var m=s&he,g=e.length,E=t.length;if(g!=E&&!(m&&E>g))return!1;var L=h.get(e),$=h.get(t);if(L&&$)return L==t&&$==e;var P=-1,z=!0,j=s&G?new gi:i;for(h.set(e,t),h.set(t,e);++P<g;){var se=e[P],ye=t[P];if(a)var ie=m?a(ye,se,P,t,e,h):a(se,ye,P,e,t,h);if(ie!==i){if(ie)continue;z=!1;break}if(j){if(!Mn(t,function(Te,ke){if(!bn(j,ke)&&(se===Te||d(se,Te,s,a,h)))return j.push(ke)})){z=!1;break}}else if(!(se===ye||d(se,ye,s,a,h))){z=!1;break}}return h.delete(e),h.delete(t),z}function t_(e,t,s,a,d,h,m){switch(s){case Ot:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Yn:return!(e.byteLength!=t.byteLength||!h(new I(e),new I(t)));case Lt:case kn:case fs:return qn(+e,+t);case Hn:return e.name==t.name&&e.message==t.message;case et:case Ge:return e==t+"";case Ye:var g=vi;case le:var E=a&he;if(g||(g=Qi),e.size!=t.size&&!E)return!1;var L=m.get(e);if(L)return L==t;a|=G,m.set(e,t);var $=Xc(g(e),g(t),a,d,h,m);return m.delete(e),$;case ht:if(co)return co.call(e)==co.call(t)}return!1}function n_(e,t,s,a,d,h){var m=s&he,g=Gl(e),E=g.length,L=Gl(t),$=L.length;if(E!=$&&!m)return!1;for(var P=E;P--;){var z=g[P];if(!(m?z in t:De.call(t,z)))return!1}var j=h.get(e),se=h.get(t);if(j&&se)return j==t&&se==e;var ye=!0;h.set(e,t),h.set(t,e);for(var ie=m;++P<E;){z=g[P];var Te=e[z],ke=t[z];if(a)var ln=m?a(ke,Te,z,t,e,h):a(Te,ke,z,e,t,h);if(!(ln===i?Te===ke||d(Te,ke,s,a,h):ln)){ye=!1;break}ie||(ie=z=="constructor")}if(ye&&!ie){var Wt=e.constructor,un=t.constructor;Wt!=un&&"constructor"in e&&"constructor"in t&&!(typeof Wt=="function"&&Wt instanceof Wt&&typeof un=="function"&&un instanceof un)&&(ye=!1)}return h.delete(e),h.delete(t),ye}function Ts(e){return nu(sd(e,i,fd),e+"")}function Gl(e){return mc(e,bt,Jl)}function jl(e){return mc(e,Zt,Jc)}var Ql=ia?function(e){return ia.get(e)}:_u;function ga(e){for(var t=e.name+"",s=nr[t],a=De.call(nr,t)?s.length:0;a--;){var d=s[a],h=d.func;if(h==null||h==e)return d.name}return t}function or(e){var t=De.call(p,"placeholder")?p:e;return t.placeholder}function ee(){var e=p.iteratee||pu;return e=e===pu?yc:e,arguments.length?e(arguments[0],arguments[1]):e}function ba(e,t){var s=e.__data__;return c_(t)?s[typeof t=="string"?"string":"hash"]:s.map}function Xl(e){for(var t=bt(e),s=t.length;s--;){var a=t[s],d=e[a];t[s]=[a,d,td(d)]}return t}function Ei(e,t){var s=Gi(e,t);return bc(s)?s:i}function s_(e){var t=De.call(e,be),s=e[be];try{e[be]=i;var a=!0}catch{}var d=o.call(e);return a&&(t?e[be]=s:delete e[be]),d}var Jl=Cl?function(e){return e==null?[]:(e=Me(e),mn(Cl(e),function(t){return me.call(e,t)}))}:vu,Jc=Cl?function(e){for(var t=[];e;)ns(t,Jl(e)),e=Z(e);return t}:vu,Nt=qt;(Tl&&Nt(new Tl(new ArrayBuffer(1)))!=Ot||ao&&Nt(new ao)!=Ye||Sl&&Nt(Sl.resolve())!=li||tr&&Nt(new tr)!=le||lo&&Nt(new lo)!=zn)&&(Nt=function(e){var t=qt(e),s=t==Yt?e.constructor:i,a=s?wi(s):"";if(a)switch(a){case qp:return Ot;case Bp:return Ye;case Wp:return li;case Up:return le;case Vp:return zn}return t});function i_(e,t,s){for(var a=-1,d=s.length;++a<d;){var h=s[a],m=h.size;switch(h.type){case"drop":e+=m;break;case"dropRight":t-=m;break;case"take":t=Dt(t,e+m);break;case"takeRight":e=mt(e,t-m);break}}return{start:e,end:t}}function r_(e){var t=e.match(Pr);return t?t[1].split(Qn):[]}function Zc(e,t,s){t=js(t,e);for(var a=-1,d=t.length,h=!1;++a<d;){var m=os(t[a]);if(!(h=e!=null&&s(e,m)))break;e=e[m]}return h||++a!=d?h:(d=e==null?0:e.length,!!d&&Ta(d)&&Ss(m,d)&&(pe(e)||xi(e)))}function o_(e){var t=e.length,s=new e.constructor(t);return t&&typeof e[0]=="string"&&De.call(e,"index")&&(s.index=e.index,s.input=e.input),s}function ed(e){return typeof e.constructor=="function"&&!go(e)?sr(Z(e)):{}}function a_(e,t,s){var a=e.constructor;switch(t){case Yn:return zl(e);case Lt:case kn:return new a(+e);case Ot:return Hh(e,s);case Ir:case Or:case hs:case Gn:case At:case kr:case Dr:case at:case Li:return Mc(e,s);case Ye:return new a;case fs:case Ge:return new a(e);case et:return zh(e);case le:return new a;case ht:return Kh(e)}}function l_(e,t){var s=t.length;if(!s)return e;var a=s-1;return t[a]=(s>1?"& ":"")+t[a],t=t.join(s>2?", ":" "),e.replace(_t,`{
/* [wrapped with `+t+`] */
`)}function u_(e){return pe(e)||xi(e)||!!(ne&&e&&e[ne])}function Ss(e,t){var s=typeof e;return t=t??It,!!t&&(s=="number"||s!="symbol"&&nn.test(e))&&e>-1&&e%1==0&&e<t}function Bt(e,t,s){if(!Qe(s))return!1;var a=typeof t;return(a=="number"?Jt(s)&&Ss(t,s.length):a=="string"&&t in s)?qn(s[t],e):!1}function Zl(e,t){if(pe(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||an(e)?!0:sl.test(e)||!nl.test(e)||t!=null&&e in Me(t)}function c_(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function eu(e){var t=ga(e),s=p[t];if(typeof s!="function"||!(t in Ie.prototype))return!1;if(e===s)return!0;var a=Ql(s);return!!a&&e===a[0]}function d_(e){return!!na&&na in e}var f_=Es?Is:mu;function go(e){var t=e&&e.constructor,s=typeof t=="function"&&t.prototype||Ks;return e===s}function td(e){return e===e&&!Qe(e)}function nd(e,t){return function(s){return s==null?!1:s[e]===t&&(t!==i||e in Me(s))}}function p_(e){var t=Aa(e,function(a){return s.size===q&&s.clear(),a}),s=t.cache;return t}function h_(e,t){var s=e[1],a=t[1],d=s|a,h=d<(te|re|Se),m=a==Se&&s==_e||a==Se&&s==Ue&&e[7].length<=t[8]||a==(Se|Ue)&&t[7].length<=t[8]&&s==_e;if(!(h||m))return e;a&te&&(e[2]=t[2],d|=s&te?0:xe);var g=t[3];if(g){var E=e[3];e[3]=E?Fc(E,g,t[4]):g,e[4]=E?ss(e[3],M):t[4]}return g=t[5],g&&(E=e[5],e[5]=E?qc(E,g,t[6]):g,e[6]=E?ss(e[5],M):t[6]),g=t[7],g&&(e[7]=g),a&Se&&(e[8]=e[8]==null?t[8]:Dt(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=d,e}function __(e){var t=[];if(e!=null)for(var s in Me(e))t.push(s);return t}function v_(e){return o.call(e)}function sd(e,t,s){return t=mt(t===i?e.length-1:t,0),function(){for(var a=arguments,d=-1,h=mt(a.length-t,0),m=A(h);++d<h;)m[d]=a[t+d];d=-1;for(var g=A(t+1);++d<t;)g[d]=a[d];return g[t]=s(m),Mt(e,this,g)}}function id(e,t){return t.length<2?e:yi(e,wn(t,0,-1))}function m_(e,t){for(var s=e.length,a=Dt(t.length,s),d=Xt(e);a--;){var h=t[a];e[a]=Ss(h,s)?d[h]:i}return e}function tu(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var rd=ad(Ic),bo=Al||function(e,t){return ct.setTimeout(e,t)},nu=ad(Bh);function od(e,t,s){var a=t+"";return nu(e,l_(a,g_(r_(a),s)))}function ad(e){var t=0,s=0;return function(){var a=Mp(),d=Ze-(a-s);if(s=a,d>0){if(++t>=pt)return arguments[0]}else t=0;return e.apply(i,arguments)}}function ya(e,t){var s=-1,a=e.length,d=a-1;for(t=t===i?a:t;++s<t;){var h=Fl(s,d),m=e[h];e[h]=e[s],e[s]=m}return e.length=t,e}var ld=p_(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace($t,function(s,a,d,h){t.push(d?h.replace(il,"$1"):a||s)}),t});function os(e){if(typeof e=="string"||an(e))return e;var t=e+"";return t=="0"&&1/e==-ve?"-0":t}function wi(e){if(e!=null){try{return He.call(e)}catch{}try{return e+""}catch{}}return""}function g_(e,t){return kt(Vn,function(s){var a="_."+s[0];t&s[1]&&!Hi(e,a)&&e.push(a)}),e.sort()}function ud(e){if(e instanceof Ie)return e.clone();var t=new yn(e.__wrapped__,e.__chain__);return t.__actions__=Xt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function b_(e,t,s){(s?Bt(e,t,s):t===i)?t=1:t=mt(ge(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var d=0,h=0,m=A(er(a/t));d<a;)m[h++]=wn(e,d,d+=t);return m}function y_(e){for(var t=-1,s=e==null?0:e.length,a=0,d=[];++t<s;){var h=e[t];h&&(d[a++]=h)}return d}function E_(){var e=arguments.length;if(!e)return[];for(var t=A(e-1),s=arguments[0],a=e;a--;)t[a-1]=arguments[a];return ns(pe(s)?Xt(s):[s],St(t,1))}var w_=we(function(e,t){return it(e)?po(e,St(t,1,it,!0)):[]}),x_=we(function(e,t){var s=xn(t);return it(s)&&(s=i),it(e)?po(e,St(t,1,it,!0),ee(s,2)):[]}),A_=we(function(e,t){var s=xn(t);return it(s)&&(s=i),it(e)?po(e,St(t,1,it,!0),i,s):[]});function C_(e,t,s){var a=e==null?0:e.length;return a?(t=s||t===i?1:ge(t),wn(e,t<0?0:t,a)):[]}function T_(e,t,s){var a=e==null?0:e.length;return a?(t=s||t===i?1:ge(t),t=a-t,wn(e,0,t<0?0:t)):[]}function S_(e,t){return e&&e.length?fa(e,ee(t,3),!0,!0):[]}function I_(e,t){return e&&e.length?fa(e,ee(t,3),!0):[]}function O_(e,t,s,a){var d=e==null?0:e.length;return d?(s&&typeof s!="number"&&Bt(e,t,s)&&(s=0,a=d),Eh(e,t,s,a)):[]}function cd(e,t,s){var a=e==null?0:e.length;if(!a)return-1;var d=s==null?0:ge(s);return d<0&&(d=mt(a+d,0)),zi(e,ee(t,3),d)}function dd(e,t,s){var a=e==null?0:e.length;if(!a)return-1;var d=a-1;return s!==i&&(d=ge(s),d=s<0?mt(a+d,0):Dt(d,a-1)),zi(e,ee(t,3),d,!0)}function fd(e){var t=e==null?0:e.length;return t?St(e,1):[]}function k_(e){var t=e==null?0:e.length;return t?St(e,ve):[]}function D_(e,t){var s=e==null?0:e.length;return s?(t=t===i?1:ge(t),St(e,t)):[]}function N_(e){for(var t=-1,s=e==null?0:e.length,a={};++t<s;){var d=e[t];a[d[0]]=d[1]}return a}function pd(e){return e&&e.length?e[0]:i}function L_(e,t,s){var a=e==null?0:e.length;if(!a)return-1;var d=s==null?0:ge(s);return d<0&&(d=mt(a+d,0)),gn(e,t,d)}function $_(e){var t=e==null?0:e.length;return t?wn(e,0,-1):[]}var P_=we(function(e){var t=We(e,Vl);return t.length&&t[0]===e[0]?Ll(t):[]}),M_=we(function(e){var t=xn(e),s=We(e,Vl);return t===xn(s)?t=i:s.pop(),s.length&&s[0]===e[0]?Ll(s,ee(t,2)):[]}),R_=we(function(e){var t=xn(e),s=We(e,Vl);return t=typeof t=="function"?t:i,t&&s.pop(),s.length&&s[0]===e[0]?Ll(s,i,t):[]});function F_(e,t){return e==null?"":$p.call(e,t)}function xn(e){var t=e==null?0:e.length;return t?e[t-1]:i}function q_(e,t,s){var a=e==null?0:e.length;if(!a)return-1;var d=a;return s!==i&&(d=ge(s),d=d<0?mt(a+d,0):Dt(d,a-1)),t===t?Zo(e,t,d):zi(e,Xo,d,!0)}function B_(e,t){return e&&e.length?Ac(e,ge(t)):i}var W_=we(hd);function hd(e,t){return e&&e.length&&t&&t.length?Rl(e,t):e}function U_(e,t,s){return e&&e.length&&t&&t.length?Rl(e,t,ee(s,2)):e}function V_(e,t,s){return e&&e.length&&t&&t.length?Rl(e,t,i,s):e}var H_=Ts(function(e,t){var s=e==null?0:e.length,a=Ol(e,t);return Sc(e,We(t,function(d){return Ss(d,s)?+d:d}).sort(Rc)),a});function z_(e,t){var s=[];if(!(e&&e.length))return s;var a=-1,d=[],h=e.length;for(t=ee(t,3);++a<h;){var m=e[a];t(m,a,e)&&(s.push(m),d.push(a))}return Sc(e,d),s}function su(e){return e==null?e:Fp.call(e)}function K_(e,t,s){var a=e==null?0:e.length;return a?(s&&typeof s!="number"&&Bt(e,t,s)?(t=0,s=a):(t=t==null?0:ge(t),s=s===i?a:ge(s)),wn(e,t,s)):[]}function Y_(e,t){return da(e,t)}function G_(e,t,s){return Bl(e,t,ee(s,2))}function j_(e,t){var s=e==null?0:e.length;if(s){var a=da(e,t);if(a<s&&qn(e[a],t))return a}return-1}function Q_(e,t){return da(e,t,!0)}function X_(e,t,s){return Bl(e,t,ee(s,2),!0)}function J_(e,t){var s=e==null?0:e.length;if(s){var a=da(e,t,!0)-1;if(qn(e[a],t))return a}return-1}function Z_(e){return e&&e.length?Oc(e):[]}function ev(e,t){return e&&e.length?Oc(e,ee(t,2)):[]}function tv(e){var t=e==null?0:e.length;return t?wn(e,1,t):[]}function nv(e,t,s){return e&&e.length?(t=s||t===i?1:ge(t),wn(e,0,t<0?0:t)):[]}function sv(e,t,s){var a=e==null?0:e.length;return a?(t=s||t===i?1:ge(t),t=a-t,wn(e,t<0?0:t,a)):[]}function iv(e,t){return e&&e.length?fa(e,ee(t,3),!1,!0):[]}function rv(e,t){return e&&e.length?fa(e,ee(t,3)):[]}var ov=we(function(e){return Gs(St(e,1,it,!0))}),av=we(function(e){var t=xn(e);return it(t)&&(t=i),Gs(St(e,1,it,!0),ee(t,2))}),lv=we(function(e){var t=xn(e);return t=typeof t=="function"?t:i,Gs(St(e,1,it,!0),i,t)});function uv(e){return e&&e.length?Gs(e):[]}function cv(e,t){return e&&e.length?Gs(e,ee(t,2)):[]}function dv(e,t){return t=typeof t=="function"?t:i,e&&e.length?Gs(e,i,t):[]}function iu(e){if(!(e&&e.length))return[];var t=0;return e=mn(e,function(s){if(it(s))return t=mt(s.length,t),!0}),Ne(t,function(s){return We(e,to(s))})}function _d(e,t){if(!(e&&e.length))return[];var s=iu(e);return t==null?s:We(s,function(a){return Mt(t,i,a)})}var fv=we(function(e,t){return it(e)?po(e,t):[]}),pv=we(function(e){return Ul(mn(e,it))}),hv=we(function(e){var t=xn(e);return it(t)&&(t=i),Ul(mn(e,it),ee(t,2))}),_v=we(function(e){var t=xn(e);return t=typeof t=="function"?t:i,Ul(mn(e,it),i,t)}),vv=we(iu);function mv(e,t){return Lc(e||[],t||[],fo)}function gv(e,t){return Lc(e||[],t||[],vo)}var bv=we(function(e){var t=e.length,s=t>1?e[t-1]:i;return s=typeof s=="function"?(e.pop(),s):i,_d(e,s)});function vd(e){var t=p(e);return t.__chain__=!0,t}function yv(e,t){return t(e),e}function Ea(e,t){return t(e)}var Ev=Ts(function(e){var t=e.length,s=t?e[0]:0,a=this.__wrapped__,d=function(h){return Ol(h,e)};return t>1||this.__actions__.length||!(a instanceof Ie)||!Ss(s)?this.thru(d):(a=a.slice(s,+s+(t?1:0)),a.__actions__.push({func:Ea,args:[d],thisArg:i}),new yn(a,this.__chain__).thru(function(h){return t&&!h.length&&h.push(i),h}))});function wv(){return vd(this)}function xv(){return new yn(this.value(),this.__chain__)}function Av(){this.__values__===i&&(this.__values__=kd(this.value()));var e=this.__index__>=this.__values__.length,t=e?i:this.__values__[this.__index__++];return{done:e,value:t}}function Cv(){return this}function Tv(e){for(var t,s=this;s instanceof oa;){var a=ud(s);a.__index__=0,a.__values__=i,t?d.__wrapped__=a:t=a;var d=a;s=s.__wrapped__}return d.__wrapped__=e,t}function Sv(){var e=this.__wrapped__;if(e instanceof Ie){var t=e;return this.__actions__.length&&(t=new Ie(this)),t=t.reverse(),t.__actions__.push({func:Ea,args:[su],thisArg:i}),new yn(t,this.__chain__)}return this.thru(su)}function Iv(){return Nc(this.__wrapped__,this.__actions__)}var Ov=pa(function(e,t,s){De.call(e,s)?++e[s]:As(e,s,1)});function kv(e,t,s){var a=pe(e)?Xr:yh;return s&&Bt(e,t,s)&&(t=i),a(e,ee(t,3))}function Dv(e,t){var s=pe(e)?mn:_c;return s(e,ee(t,3))}var Nv=Vc(cd),Lv=Vc(dd);function $v(e,t){return St(wa(e,t),1)}function Pv(e,t){return St(wa(e,t),ve)}function Mv(e,t,s){return s=s===i?1:ge(s),St(wa(e,t),s)}function md(e,t){var s=pe(e)?kt:Ys;return s(e,ee(t,3))}function gd(e,t){var s=pe(e)?pi:hc;return s(e,ee(t,3))}var Rv=pa(function(e,t,s){De.call(e,s)?e[s].push(t):As(e,s,[t])});function Fv(e,t,s,a){e=Jt(e)?e:lr(e),s=s&&!a?ge(s):0;var d=e.length;return s<0&&(s=mt(d+s,0)),Sa(e)?s<=d&&e.indexOf(t,s)>-1:!!d&&gn(e,t,s)>-1}var qv=we(function(e,t,s){var a=-1,d=typeof t=="function",h=Jt(e)?A(e.length):[];return Ys(e,function(m){h[++a]=d?Mt(t,m,s):ho(m,t,s)}),h}),Bv=pa(function(e,t,s){As(e,s,t)});function wa(e,t){var s=pe(e)?We:Ec;return s(e,ee(t,3))}function Wv(e,t,s,a){return e==null?[]:(pe(t)||(t=t==null?[]:[t]),s=a?i:s,pe(s)||(s=s==null?[]:[s]),Cc(e,t,s))}var Uv=pa(function(e,t,s){e[s?0:1].push(t)},function(){return[[],[]]});function Vv(e,t,s){var a=pe(e)?Zr:no,d=arguments.length<3;return a(e,ee(t,4),s,d,Ys)}function Hv(e,t,s){var a=pe(e)?Rt:no,d=arguments.length<3;return a(e,ee(t,4),s,d,hc)}function zv(e,t){var s=pe(e)?mn:_c;return s(e,Ca(ee(t,3)))}function Kv(e){var t=pe(e)?cc:Fh;return t(e)}function Yv(e,t,s){(s?Bt(e,t,s):t===i)?t=1:t=ge(t);var a=pe(e)?_h:qh;return a(e,t)}function Gv(e){var t=pe(e)?vh:Wh;return t(e)}function jv(e){if(e==null)return 0;if(Jt(e))return Sa(e)?Hs(e):e.length;var t=Nt(e);return t==Ye||t==le?e.size:Pl(e).length}function Qv(e,t,s){var a=pe(e)?Mn:Uh;return s&&Bt(e,t,s)&&(t=i),a(e,ee(t,3))}var Xv=we(function(e,t){if(e==null)return[];var s=t.length;return s>1&&Bt(e,t[0],t[1])?t=[]:s>2&&Bt(t[0],t[1],t[2])&&(t=[t[0]]),Cc(e,St(t,1),[])}),xa=oo||function(){return ct.Date.now()};function Jv(e,t){if(typeof t!="function")throw new Ft(x);return e=ge(e),function(){if(--e<1)return t.apply(this,arguments)}}function bd(e,t,s){return t=s?i:t,t=e&&t==null?e.length:t,Cs(e,Se,i,i,i,i,t)}function yd(e,t){var s;if(typeof t!="function")throw new Ft(x);return e=ge(e),function(){return--e>0&&(s=t.apply(this,arguments)),e<=1&&(t=i),s}}var ru=we(function(e,t,s){var a=te;if(s.length){var d=ss(s,or(ru));a|=ae}return Cs(e,a,t,s,d)}),Ed=we(function(e,t,s){var a=te|re;if(s.length){var d=ss(s,or(Ed));a|=ae}return Cs(t,a,e,s,d)});function wd(e,t,s){t=s?i:t;var a=Cs(e,_e,i,i,i,i,i,t);return a.placeholder=wd.placeholder,a}function xd(e,t,s){t=s?i:t;var a=Cs(e,de,i,i,i,i,i,t);return a.placeholder=xd.placeholder,a}function Ad(e,t,s){var a,d,h,m,g,E,L=0,$=!1,P=!1,z=!0;if(typeof e!="function")throw new Ft(x);t=An(t)||0,Qe(s)&&($=!!s.leading,P="maxWait"in s,h=P?mt(An(s.maxWait)||0,t):h,z="trailing"in s?!!s.trailing:z);function j(rt){var Bn=a,ks=d;return a=d=i,L=rt,m=e.apply(ks,Bn),m}function se(rt){return L=rt,g=bo(Te,t),$?j(rt):m}function ye(rt){var Bn=rt-E,ks=rt-L,Vd=t-Bn;return P?Dt(Vd,h-ks):Vd}function ie(rt){var Bn=rt-E,ks=rt-L;return E===i||Bn>=t||Bn<0||P&&ks>=h}function Te(){var rt=xa();if(ie(rt))return ke(rt);g=bo(Te,ye(rt))}function ke(rt){return g=i,z&&a?j(rt):(a=d=i,m)}function ln(){g!==i&&$c(g),L=0,a=E=d=g=i}function Wt(){return g===i?m:ke(xa())}function un(){var rt=xa(),Bn=ie(rt);if(a=arguments,d=this,E=rt,Bn){if(g===i)return se(E);if(P)return $c(g),g=bo(Te,t),j(E)}return g===i&&(g=bo(Te,t)),m}return un.cancel=ln,un.flush=Wt,un}var Zv=we(function(e,t){return pc(e,1,t)}),em=we(function(e,t,s){return pc(e,An(t)||0,s)});function tm(e){return Cs(e,Ve)}function Aa(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Ft(x);var s=function(){var a=arguments,d=t?t.apply(this,a):a[0],h=s.cache;if(h.has(d))return h.get(d);var m=e.apply(this,a);return s.cache=h.set(d,m)||h,m};return s.cache=new(Aa.Cache||xs),s}Aa.Cache=xs;function Ca(e){if(typeof e!="function")throw new Ft(x);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function nm(e){return yd(2,e)}var sm=Vh(function(e,t){t=t.length==1&&pe(t[0])?We(t[0],je(ee())):We(St(t,1),je(ee()));var s=t.length;return we(function(a){for(var d=-1,h=Dt(a.length,s);++d<h;)a[d]=t[d].call(this,a[d]);return Mt(e,this,a)})}),ou=we(function(e,t){var s=ss(t,or(ou));return Cs(e,ae,i,t,s)}),Cd=we(function(e,t){var s=ss(t,or(Cd));return Cs(e,Ae,i,t,s)}),im=Ts(function(e,t){return Cs(e,Ue,i,i,i,t)});function rm(e,t){if(typeof e!="function")throw new Ft(x);return t=t===i?t:ge(t),we(e,t)}function om(e,t){if(typeof e!="function")throw new Ft(x);return t=t==null?0:mt(ge(t),0),we(function(s){var a=s[t],d=Qs(s,0,t);return a&&ns(d,a),Mt(e,this,d)})}function am(e,t,s){var a=!0,d=!0;if(typeof e!="function")throw new Ft(x);return Qe(s)&&(a="leading"in s?!!s.leading:a,d="trailing"in s?!!s.trailing:d),Ad(e,t,{leading:a,maxWait:t,trailing:d})}function lm(e){return bd(e,1)}function um(e,t){return ou(Hl(t),e)}function cm(){if(!arguments.length)return[];var e=arguments[0];return pe(e)?e:[e]}function dm(e){return En(e,Y)}function fm(e,t){return t=typeof t=="function"?t:i,En(e,Y,t)}function pm(e){return En(e,H|Y)}function hm(e,t){return t=typeof t=="function"?t:i,En(e,H|Y,t)}function _m(e,t){return t==null||fc(e,t,bt(t))}function qn(e,t){return e===t||e!==e&&t!==t}var vm=ma(Nl),mm=ma(function(e,t){return e>=t}),xi=gc((function(){return arguments})())?gc:function(e){return Je(e)&&De.call(e,"callee")&&!me.call(e,"callee")},pe=A.isArray,gm=bs?je(bs):Th;function Jt(e){return e!=null&&Ta(e.length)&&!Is(e)}function it(e){return Je(e)&&Jt(e)}function bm(e){return e===!0||e===!1||Je(e)&&qt(e)==Lt}var Xs=Lp||mu,ym=zo?je(zo):Sh;function Em(e){return Je(e)&&e.nodeType===1&&!yo(e)}function wm(e){if(e==null)return!0;if(Jt(e)&&(pe(e)||typeof e=="string"||typeof e.splice=="function"||Xs(e)||ar(e)||xi(e)))return!e.length;var t=Nt(e);if(t==Ye||t==le)return!e.size;if(go(e))return!Pl(e).length;for(var s in e)if(De.call(e,s))return!1;return!0}function xm(e,t){return _o(e,t)}function Am(e,t,s){s=typeof s=="function"?s:i;var a=s?s(e,t):i;return a===i?_o(e,t,i,s):!!a}function au(e){if(!Je(e))return!1;var t=qt(e);return t==Hn||t==Sr||typeof e.message=="string"&&typeof e.name=="string"&&!yo(e)}function Cm(e){return typeof e=="number"&&oc(e)}function Is(e){if(!Qe(e))return!1;var t=qt(e);return t==ds||t==ai||t==Ps||t==Ni}function Td(e){return typeof e=="number"&&e==ge(e)}function Ta(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=It}function Qe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Je(e){return e!=null&&typeof e=="object"}var Sd=Ko?je(Ko):Oh;function Tm(e,t){return e===t||$l(e,t,Xl(t))}function Sm(e,t,s){return s=typeof s=="function"?s:i,$l(e,t,Xl(t),s)}function Im(e){return Id(e)&&e!=+e}function Om(e){if(f_(e))throw new ue(y);return bc(e)}function km(e){return e===null}function Dm(e){return e==null}function Id(e){return typeof e=="number"||Je(e)&&qt(e)==fs}function yo(e){if(!Je(e)||qt(e)!=Yt)return!1;var t=Z(e);if(t===null)return!0;var s=De.call(t,"constructor")&&t.constructor;return typeof s=="function"&&s instanceof s&&He.call(s)==r}var lu=Yo?je(Yo):kh;function Nm(e){return Td(e)&&e>=-It&&e<=It}var Od=Go?je(Go):Dh;function Sa(e){return typeof e=="string"||!pe(e)&&Je(e)&&qt(e)==Ge}function an(e){return typeof e=="symbol"||Je(e)&&qt(e)==ht}var ar=Qr?je(Qr):Nh;function Lm(e){return e===i}function $m(e){return Je(e)&&Nt(e)==zn}function Pm(e){return Je(e)&&qt(e)==Kn}var Mm=ma(Ml),Rm=ma(function(e,t){return e<=t});function kd(e){if(!e)return[];if(Jt(e))return Sa(e)?rn(e):Xt(e);if(ze&&e[ze])return ji(e[ze]());var t=Nt(e),s=t==Ye?vi:t==le?Qi:lr;return s(e)}function Os(e){if(!e)return e===0?e:0;if(e=An(e),e===ve||e===-ve){var t=e<0?-1:1;return t*Kt}return e===e?e:0}function ge(e){var t=Os(e),s=t%1;return t===t?s?t-s:t:0}function Dd(e){return e?bi(ge(e),0,yt):0}function An(e){if(typeof e=="number")return e;if(an(e))return hn;if(Qe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Qe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=nt(e);var s=Ct.test(e);return s||Nn.test(e)?ms(e.slice(2),s?2:8):rl.test(e)?hn:+e}function Nd(e){return rs(e,Zt(e))}function Fm(e){return e?bi(ge(e),-It,It):e===0?e:0}function Le(e){return e==null?"":on(e)}var qm=ir(function(e,t){if(go(t)||Jt(t)){rs(t,bt(t),e);return}for(var s in t)De.call(t,s)&&fo(e,s,t[s])}),Ld=ir(function(e,t){rs(t,Zt(t),e)}),Ia=ir(function(e,t,s,a){rs(t,Zt(t),e,a)}),Bm=ir(function(e,t,s,a){rs(t,bt(t),e,a)}),Wm=Ts(Ol);function Um(e,t){var s=sr(e);return t==null?s:dc(s,t)}var Vm=we(function(e,t){e=Me(e);var s=-1,a=t.length,d=a>2?t[2]:i;for(d&&Bt(t[0],t[1],d)&&(a=1);++s<a;)for(var h=t[s],m=Zt(h),g=-1,E=m.length;++g<E;){var L=m[g],$=e[L];($===i||qn($,Ks[L])&&!De.call(e,L))&&(e[L]=h[L])}return e}),Hm=we(function(e){return e.push(i,Qc),Mt($d,i,e)});function zm(e,t){return jo(e,ee(t,3),is)}function Km(e,t){return jo(e,ee(t,3),Dl)}function Ym(e,t){return e==null?e:kl(e,ee(t,3),Zt)}function Gm(e,t){return e==null?e:vc(e,ee(t,3),Zt)}function jm(e,t){return e&&is(e,ee(t,3))}function Qm(e,t){return e&&Dl(e,ee(t,3))}function Xm(e){return e==null?[]:ua(e,bt(e))}function Jm(e){return e==null?[]:ua(e,Zt(e))}function uu(e,t,s){var a=e==null?i:yi(e,t);return a===i?s:a}function Zm(e,t){return e!=null&&Zc(e,t,wh)}function cu(e,t){return e!=null&&Zc(e,t,xh)}var eg=zc(function(e,t,s){t!=null&&typeof t.toString!="function"&&(t=o.call(t)),e[t]=s},fu(en)),tg=zc(function(e,t,s){t!=null&&typeof t.toString!="function"&&(t=o.call(t)),De.call(e,t)?e[t].push(s):e[t]=[s]},ee),ng=we(ho);function bt(e){return Jt(e)?uc(e):Pl(e)}function Zt(e){return Jt(e)?uc(e,!0):Lh(e)}function sg(e,t){var s={};return t=ee(t,3),is(e,function(a,d,h){As(s,t(a,d,h),a)}),s}function ig(e,t){var s={};return t=ee(t,3),is(e,function(a,d,h){As(s,d,t(a,d,h))}),s}var rg=ir(function(e,t,s){ca(e,t,s)}),$d=ir(function(e,t,s,a){ca(e,t,s,a)}),og=Ts(function(e,t){var s={};if(e==null)return s;var a=!1;t=We(t,function(h){return h=js(h,e),a||(a=h.length>1),h}),rs(e,jl(e),s),a&&(s=En(s,H|X|Y,e_));for(var d=t.length;d--;)Wl(s,t[d]);return s});function ag(e,t){return Pd(e,Ca(ee(t)))}var lg=Ts(function(e,t){return e==null?{}:Ph(e,t)});function Pd(e,t){if(e==null)return{};var s=We(jl(e),function(a){return[a]});return t=ee(t),Tc(e,s,function(a,d){return t(a,d[0])})}function ug(e,t,s){t=js(t,e);var a=-1,d=t.length;for(d||(d=1,e=i);++a<d;){var h=e==null?i:e[os(t[a])];h===i&&(a=d,h=s),e=Is(h)?h.call(e):h}return e}function cg(e,t,s){return e==null?e:vo(e,t,s)}function dg(e,t,s,a){return a=typeof a=="function"?a:i,e==null?e:vo(e,t,s,a)}var Md=Gc(bt),Rd=Gc(Zt);function fg(e,t,s){var a=pe(e),d=a||Xs(e)||ar(e);if(t=ee(t,4),s==null){var h=e&&e.constructor;d?s=a?new h:[]:Qe(e)?s=Is(h)?sr(Z(e)):{}:s={}}return(d?kt:is)(e,function(m,g,E){return t(s,m,g,E)}),s}function pg(e,t){return e==null?!0:Wl(e,t)}function hg(e,t,s){return e==null?e:Dc(e,t,Hl(s))}function _g(e,t,s,a){return a=typeof a=="function"?a:i,e==null?e:Dc(e,t,Hl(s),a)}function lr(e){return e==null?[]:Tt(e,bt(e))}function vg(e){return e==null?[]:Tt(e,Zt(e))}function mg(e,t,s){return s===i&&(s=t,t=i),s!==i&&(s=An(s),s=s===s?s:0),t!==i&&(t=An(t),t=t===t?t:0),bi(An(e),t,s)}function gg(e,t,s){return t=Os(t),s===i?(s=t,t=0):s=Os(s),e=An(e),Ah(e,t,s)}function bg(e,t,s){if(s&&typeof s!="boolean"&&Bt(e,t,s)&&(t=s=i),s===i&&(typeof t=="boolean"?(s=t,t=i):typeof e=="boolean"&&(s=e,e=i)),e===i&&t===i?(e=0,t=1):(e=Os(e),t===i?(t=e,e=0):t=Os(t)),e>t){var a=e;e=t,t=a}if(s||e%1||t%1){var d=ac();return Dt(e+d*(t-e+vs("1e-"+((d+"").length-1))),t)}return Fl(e,t)}var yg=rr(function(e,t,s){return t=t.toLowerCase(),e+(s?Fd(t):t)});function Fd(e){return du(Le(e).toLowerCase())}function qd(e){return e=Le(e),e&&e.replace(Mr,Ki).replace(Yr,"")}function Eg(e,t,s){e=Le(e),t=on(t);var a=e.length;s=s===i?a:bi(ge(s),0,a);var d=s;return s-=t.length,s>=0&&e.slice(s,d)==t}function wg(e){return e=Le(e),e&&$r.test(e)?e.replace(Lr,Yi):e}function xg(e){return e=Le(e),e&&jn.test(e)?e.replace(vn,"\\$&"):e}var Ag=rr(function(e,t,s){return e+(s?"-":"")+t.toLowerCase()}),Cg=rr(function(e,t,s){return e+(s?" ":"")+t.toLowerCase()}),Tg=Uc("toLowerCase");function Sg(e,t,s){e=Le(e),t=ge(t);var a=t?Hs(e):0;if(!t||a>=t)return e;var d=(t-a)/2;return va(sa(d),s)+e+va(er(d),s)}function Ig(e,t,s){e=Le(e),t=ge(t);var a=t?Hs(e):0;return t&&a<t?e+va(t-a,s):e}function Og(e,t,s){e=Le(e),t=ge(t);var a=t?Hs(e):0;return t&&a<t?va(t-a,s)+e:e}function kg(e,t,s){return s||t==null?t=0:t&&(t=+t),Rp(Le(e).replace(ui,""),t||0)}function Dg(e,t,s){return(s?Bt(e,t,s):t===i)?t=1:t=ge(t),ql(Le(e),t)}function Ng(){var e=arguments,t=Le(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Lg=rr(function(e,t,s){return e+(s?"_":"")+t.toLowerCase()});function $g(e,t,s){return s&&typeof s!="number"&&Bt(e,t,s)&&(t=s=i),s=s===i?yt:s>>>0,s?(e=Le(e),e&&(typeof t=="string"||t!=null&&!lu(t))&&(t=on(t),!t&&Vs(e))?Qs(rn(e),0,s):e.split(t,s)):[]}var Pg=rr(function(e,t,s){return e+(s?" ":"")+du(t)});function Mg(e,t,s){return e=Le(e),s=s==null?0:bi(ge(s),0,e.length),t=on(t),e.slice(s,s+t.length)==t}function Rg(e,t,s){var a=p.templateSettings;s&&Bt(e,t,s)&&(t=i),e=Le(e),t=Ia({},t,a,jc);var d=Ia({},t.imports,a.imports,jc),h=bt(d),m=Tt(d,h),g,E,L=0,$=t.interpolate||Ln,P="__p += '",z=io((t.escape||Ln).source+"|"+$.source+"|"+($===$i?Pi:Ln).source+"|"+(t.evaluate||Ln).source+"|$","g"),j="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++dl+"]")+`
`;e.replace(z,function(ie,Te,ke,ln,Wt,un){return ke||(ke=ln),P+=e.slice(L,un).replace(Ri,_i),Te&&(g=!0,P+=`' +
__e(`+Te+`) +
'`),Wt&&(E=!0,P+=`';
`+Wt+`;
__p += '`),ke&&(P+=`' +
((__t = (`+ke+`)) == null ? '' : __t) +
'`),L=un+ie.length,ie}),P+=`';
`;var se=De.call(t,"variable")&&t.variable;if(!se)P=`with (obj) {
`+P+`
}
`;else if(Dn.test(se))throw new ue(T);P=(E?P.replace(Nr,""):P).replace(Za,"$1").replace(Ms,"$1;"),P="function("+(se||"obj")+`) {
`+(se?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(g?", __e = _.escape":"")+(E?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+P+`return __p
}`;var ye=Wd(function(){return Ee(h,j+"return "+P).apply(i,m)});if(ye.source=P,au(ye))throw ye;return ye}function Fg(e){return Le(e).toLowerCase()}function qg(e){return Le(e).toUpperCase()}function Bg(e,t,s){if(e=Le(e),e&&(s||t===i))return nt(e);if(!e||!(t=on(t)))return e;var a=rn(e),d=rn(t),h=Rn(a,d),m=hi(a,d)+1;return Qs(a,h,m).join("")}function Wg(e,t,s){if(e=Le(e),e&&(s||t===i))return e.slice(0,ea(e)+1);if(!e||!(t=on(t)))return e;var a=rn(e),d=hi(a,rn(t))+1;return Qs(a,0,d).join("")}function Ug(e,t,s){if(e=Le(e),e&&(s||t===i))return e.replace(ui,"");if(!e||!(t=on(t)))return e;var a=rn(e),d=Rn(a,rn(t));return Qs(a,d).join("")}function Vg(e,t){var s=Ke,a=Oe;if(Qe(t)){var d="separator"in t?t.separator:d;s="length"in t?ge(t.length):s,a="omission"in t?on(t.omission):a}e=Le(e);var h=e.length;if(Vs(e)){var m=rn(e);h=m.length}if(s>=h)return e;var g=s-Hs(a);if(g<1)return a;var E=m?Qs(m,0,g).join(""):e.slice(0,g);if(d===i)return E+a;if(m&&(g+=E.length-g),lu(d)){if(e.slice(g).search(d)){var L,$=E;for(d.global||(d=io(d.source,Le(Po.exec(d))+"g")),d.lastIndex=0;L=d.exec($);)var P=L.index;E=E.slice(0,P===i?g:P)}}else if(e.indexOf(on(d),g)!=g){var z=E.lastIndexOf(d);z>-1&&(E=E.slice(0,z))}return E+a}function Hg(e){return e=Le(e),e&&el.test(e)?e.replace($o,yl):e}var zg=rr(function(e,t,s){return e+(s?" ":"")+t.toUpperCase()}),du=Uc("toUpperCase");function Bd(e,t,s){return e=Le(e),t=s?i:t,t===i?ml(e)?Xi(e):Ws(e):e.match(t)||[]}var Wd=we(function(e,t){try{return Mt(e,i,t)}catch(s){return au(s)?s:new ue(s)}}),Kg=Ts(function(e,t){return kt(t,function(s){s=os(s),As(e,s,ru(e[s],e))}),e});function Yg(e){var t=e==null?0:e.length,s=ee();return e=t?We(e,function(a){if(typeof a[1]!="function")throw new Ft(x);return[s(a[0]),a[1]]}):[],we(function(a){for(var d=-1;++d<t;){var h=e[d];if(Mt(h[0],this,a))return Mt(h[1],this,a)}})}function Gg(e){return bh(En(e,H))}function fu(e){return function(){return e}}function jg(e,t){return e==null||e!==e?t:e}var Qg=Hc(),Xg=Hc(!0);function en(e){return e}function pu(e){return yc(typeof e=="function"?e:En(e,H))}function Jg(e){return wc(En(e,H))}function Zg(e,t){return xc(e,En(t,H))}var eb=we(function(e,t){return function(s){return ho(s,e,t)}}),tb=we(function(e,t){return function(s){return ho(e,s,t)}});function hu(e,t,s){var a=bt(t),d=ua(t,a);s==null&&!(Qe(t)&&(d.length||!a.length))&&(s=t,t=e,e=this,d=ua(t,bt(t)));var h=!(Qe(s)&&"chain"in s)||!!s.chain,m=Is(e);return kt(d,function(g){var E=t[g];e[g]=E,m&&(e.prototype[g]=function(){var L=this.__chain__;if(h||L){var $=e(this.__wrapped__),P=$.__actions__=Xt(this.__actions__);return P.push({func:E,args:arguments,thisArg:e}),$.__chain__=L,$}return E.apply(e,ns([this.value()],arguments))})}),e}function nb(){return ct._===this&&(ct._=l),this}function _u(){}function sb(e){return e=ge(e),we(function(t){return Ac(t,e)})}var ib=Kl(We),rb=Kl(Xr),ob=Kl(Mn);function Ud(e){return Zl(e)?to(os(e)):Mh(e)}function ab(e){return function(t){return e==null?i:yi(e,t)}}var lb=Kc(),ub=Kc(!0);function vu(){return[]}function mu(){return!1}function cb(){return{}}function db(){return""}function fb(){return!0}function pb(e,t){if(e=ge(e),e<1||e>It)return[];var s=yt,a=Dt(e,yt);t=ee(t),e-=yt;for(var d=Ne(a,t);++s<e;)t(s);return d}function hb(e){return pe(e)?We(e,os):an(e)?[e]:Xt(ld(Le(e)))}function _b(e){var t=++xl;return Le(e)+t}var vb=_a(function(e,t){return e+t},0),mb=Yl("ceil"),gb=_a(function(e,t){return e/t},1),bb=Yl("floor");function yb(e){return e&&e.length?la(e,en,Nl):i}function Eb(e,t){return e&&e.length?la(e,ee(t,2),Nl):i}function wb(e){return eo(e,en)}function xb(e,t){return eo(e,ee(t,2))}function Ab(e){return e&&e.length?la(e,en,Ml):i}function Cb(e,t){return e&&e.length?la(e,ee(t,2),Ml):i}var Tb=_a(function(e,t){return e*t},1),Sb=Yl("round"),Ib=_a(function(e,t){return e-t},0);function Ob(e){return e&&e.length?so(e,en):0}function kb(e,t){return e&&e.length?so(e,ee(t,2)):0}return p.after=Jv,p.ary=bd,p.assign=qm,p.assignIn=Ld,p.assignInWith=Ia,p.assignWith=Bm,p.at=Wm,p.before=yd,p.bind=ru,p.bindAll=Kg,p.bindKey=Ed,p.castArray=cm,p.chain=vd,p.chunk=b_,p.compact=y_,p.concat=E_,p.cond=Yg,p.conforms=Gg,p.constant=fu,p.countBy=Ov,p.create=Um,p.curry=wd,p.curryRight=xd,p.debounce=Ad,p.defaults=Vm,p.defaultsDeep=Hm,p.defer=Zv,p.delay=em,p.difference=w_,p.differenceBy=x_,p.differenceWith=A_,p.drop=C_,p.dropRight=T_,p.dropRightWhile=S_,p.dropWhile=I_,p.fill=O_,p.filter=Dv,p.flatMap=$v,p.flatMapDeep=Pv,p.flatMapDepth=Mv,p.flatten=fd,p.flattenDeep=k_,p.flattenDepth=D_,p.flip=tm,p.flow=Qg,p.flowRight=Xg,p.fromPairs=N_,p.functions=Xm,p.functionsIn=Jm,p.groupBy=Rv,p.initial=$_,p.intersection=P_,p.intersectionBy=M_,p.intersectionWith=R_,p.invert=eg,p.invertBy=tg,p.invokeMap=qv,p.iteratee=pu,p.keyBy=Bv,p.keys=bt,p.keysIn=Zt,p.map=wa,p.mapKeys=sg,p.mapValues=ig,p.matches=Jg,p.matchesProperty=Zg,p.memoize=Aa,p.merge=rg,p.mergeWith=$d,p.method=eb,p.methodOf=tb,p.mixin=hu,p.negate=Ca,p.nthArg=sb,p.omit=og,p.omitBy=ag,p.once=nm,p.orderBy=Wv,p.over=ib,p.overArgs=sm,p.overEvery=rb,p.overSome=ob,p.partial=ou,p.partialRight=Cd,p.partition=Uv,p.pick=lg,p.pickBy=Pd,p.property=Ud,p.propertyOf=ab,p.pull=W_,p.pullAll=hd,p.pullAllBy=U_,p.pullAllWith=V_,p.pullAt=H_,p.range=lb,p.rangeRight=ub,p.rearg=im,p.reject=zv,p.remove=z_,p.rest=rm,p.reverse=su,p.sampleSize=Yv,p.set=cg,p.setWith=dg,p.shuffle=Gv,p.slice=K_,p.sortBy=Xv,p.sortedUniq=Z_,p.sortedUniqBy=ev,p.split=$g,p.spread=om,p.tail=tv,p.take=nv,p.takeRight=sv,p.takeRightWhile=iv,p.takeWhile=rv,p.tap=yv,p.throttle=am,p.thru=Ea,p.toArray=kd,p.toPairs=Md,p.toPairsIn=Rd,p.toPath=hb,p.toPlainObject=Nd,p.transform=fg,p.unary=lm,p.union=ov,p.unionBy=av,p.unionWith=lv,p.uniq=uv,p.uniqBy=cv,p.uniqWith=dv,p.unset=pg,p.unzip=iu,p.unzipWith=_d,p.update=hg,p.updateWith=_g,p.values=lr,p.valuesIn=vg,p.without=fv,p.words=Bd,p.wrap=um,p.xor=pv,p.xorBy=hv,p.xorWith=_v,p.zip=vv,p.zipObject=mv,p.zipObjectDeep=gv,p.zipWith=bv,p.entries=Md,p.entriesIn=Rd,p.extend=Ld,p.extendWith=Ia,hu(p,p),p.add=vb,p.attempt=Wd,p.camelCase=yg,p.capitalize=Fd,p.ceil=mb,p.clamp=mg,p.clone=dm,p.cloneDeep=pm,p.cloneDeepWith=hm,p.cloneWith=fm,p.conformsTo=_m,p.deburr=qd,p.defaultTo=jg,p.divide=gb,p.endsWith=Eg,p.eq=qn,p.escape=wg,p.escapeRegExp=xg,p.every=kv,p.find=Nv,p.findIndex=cd,p.findKey=zm,p.findLast=Lv,p.findLastIndex=dd,p.findLastKey=Km,p.floor=bb,p.forEach=md,p.forEachRight=gd,p.forIn=Ym,p.forInRight=Gm,p.forOwn=jm,p.forOwnRight=Qm,p.get=uu,p.gt=vm,p.gte=mm,p.has=Zm,p.hasIn=cu,p.head=pd,p.identity=en,p.includes=Fv,p.indexOf=L_,p.inRange=gg,p.invoke=ng,p.isArguments=xi,p.isArray=pe,p.isArrayBuffer=gm,p.isArrayLike=Jt,p.isArrayLikeObject=it,p.isBoolean=bm,p.isBuffer=Xs,p.isDate=ym,p.isElement=Em,p.isEmpty=wm,p.isEqual=xm,p.isEqualWith=Am,p.isError=au,p.isFinite=Cm,p.isFunction=Is,p.isInteger=Td,p.isLength=Ta,p.isMap=Sd,p.isMatch=Tm,p.isMatchWith=Sm,p.isNaN=Im,p.isNative=Om,p.isNil=Dm,p.isNull=km,p.isNumber=Id,p.isObject=Qe,p.isObjectLike=Je,p.isPlainObject=yo,p.isRegExp=lu,p.isSafeInteger=Nm,p.isSet=Od,p.isString=Sa,p.isSymbol=an,p.isTypedArray=ar,p.isUndefined=Lm,p.isWeakMap=$m,p.isWeakSet=Pm,p.join=F_,p.kebabCase=Ag,p.last=xn,p.lastIndexOf=q_,p.lowerCase=Cg,p.lowerFirst=Tg,p.lt=Mm,p.lte=Rm,p.max=yb,p.maxBy=Eb,p.mean=wb,p.meanBy=xb,p.min=Ab,p.minBy=Cb,p.stubArray=vu,p.stubFalse=mu,p.stubObject=cb,p.stubString=db,p.stubTrue=fb,p.multiply=Tb,p.nth=B_,p.noConflict=nb,p.noop=_u,p.now=xa,p.pad=Sg,p.padEnd=Ig,p.padStart=Og,p.parseInt=kg,p.random=bg,p.reduce=Vv,p.reduceRight=Hv,p.repeat=Dg,p.replace=Ng,p.result=ug,p.round=Sb,p.runInContext=b,p.sample=Kv,p.size=jv,p.snakeCase=Lg,p.some=Qv,p.sortedIndex=Y_,p.sortedIndexBy=G_,p.sortedIndexOf=j_,p.sortedLastIndex=Q_,p.sortedLastIndexBy=X_,p.sortedLastIndexOf=J_,p.startCase=Pg,p.startsWith=Mg,p.subtract=Ib,p.sum=Ob,p.sumBy=kb,p.template=Rg,p.times=pb,p.toFinite=Os,p.toInteger=ge,p.toLength=Dd,p.toLower=Fg,p.toNumber=An,p.toSafeInteger=Fm,p.toString=Le,p.toUpper=qg,p.trim=Bg,p.trimEnd=Wg,p.trimStart=Ug,p.truncate=Vg,p.unescape=Hg,p.uniqueId=_b,p.upperCase=zg,p.upperFirst=du,p.each=md,p.eachRight=gd,p.first=pd,hu(p,(function(){var e={};return is(p,function(t,s){De.call(p.prototype,s)||(e[s]=t)}),e})(),{chain:!1}),p.VERSION=f,kt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),kt(["drop","take"],function(e,t){Ie.prototype[e]=function(s){s=s===i?1:mt(ge(s),0);var a=this.__filtered__&&!t?new Ie(this):this.clone();return a.__filtered__?a.__takeCount__=Dt(s,a.__takeCount__):a.__views__.push({size:Dt(s,yt),type:e+(a.__dir__<0?"Right":"")}),a},Ie.prototype[e+"Right"]=function(s){return this.reverse()[e](s).reverse()}}),kt(["filter","map","takeWhile"],function(e,t){var s=t+1,a=s==pn||s==gt;Ie.prototype[e]=function(d){var h=this.clone();return h.__iteratees__.push({iteratee:ee(d,3),type:s}),h.__filtered__=h.__filtered__||a,h}}),kt(["head","last"],function(e,t){var s="take"+(t?"Right":"");Ie.prototype[e]=function(){return this[s](1).value()[0]}}),kt(["initial","tail"],function(e,t){var s="drop"+(t?"":"Right");Ie.prototype[e]=function(){return this.__filtered__?new Ie(this):this[s](1)}}),Ie.prototype.compact=function(){return this.filter(en)},Ie.prototype.find=function(e){return this.filter(e).head()},Ie.prototype.findLast=function(e){return this.reverse().find(e)},Ie.prototype.invokeMap=we(function(e,t){return typeof e=="function"?new Ie(this):this.map(function(s){return ho(s,e,t)})}),Ie.prototype.reject=function(e){return this.filter(Ca(ee(e)))},Ie.prototype.slice=function(e,t){e=ge(e);var s=this;return s.__filtered__&&(e>0||t<0)?new Ie(s):(e<0?s=s.takeRight(-e):e&&(s=s.drop(e)),t!==i&&(t=ge(t),s=t<0?s.dropRight(-t):s.take(t-e)),s)},Ie.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ie.prototype.toArray=function(){return this.take(yt)},is(Ie.prototype,function(e,t){var s=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),d=p[a?"take"+(t=="last"?"Right":""):t],h=a||/^find/.test(t);d&&(p.prototype[t]=function(){var m=this.__wrapped__,g=a?[1]:arguments,E=m instanceof Ie,L=g[0],$=E||pe(m),P=function(Te){var ke=d.apply(p,ns([Te],g));return a&&z?ke[0]:ke};$&&s&&typeof L=="function"&&L.length!=1&&(E=$=!1);var z=this.__chain__,j=!!this.__actions__.length,se=h&&!z,ye=E&&!j;if(!h&&$){m=ye?m:new Ie(this);var ie=e.apply(m,g);return ie.__actions__.push({func:Ea,args:[P],thisArg:i}),new yn(ie,z)}return se&&ye?e.apply(this,g):(ie=this.thru(P),se?a?ie.value()[0]:ie.value():ie)})}),kt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Zi[e],s=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var d=arguments;if(a&&!this.__chain__){var h=this.value();return t.apply(pe(h)?h:[],d)}return this[s](function(m){return t.apply(pe(m)?m:[],d)})}}),is(Ie.prototype,function(e,t){var s=p[t];if(s){var a=s.name+"";De.call(nr,a)||(nr[a]=[]),nr[a].push({name:t,func:s})}}),nr[ha(i,re).name]=[{name:"wrapper",func:i}],Ie.prototype.clone=Hp,Ie.prototype.reverse=zp,Ie.prototype.value=Kp,p.prototype.at=Ev,p.prototype.chain=wv,p.prototype.commit=xv,p.prototype.next=Av,p.prototype.plant=Tv,p.prototype.reverse=Sv,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=Iv,p.prototype.first=p.prototype.head,ze&&(p.prototype[ze]=Cv),p}),zs=Ji();gs?((gs.exports=zs)._=zs,jr._=zs):ct._=zs}).call(Hw)})(Ao,Ao.exports)),Ao.exports}var So=zw();function Kw(u){let n=null,i=null,f=new Map;const v=H=>JSON.stringify(H),y=async(H,X,Y,he)=>{if(he===(Y==="cart"?n:i))return{success:!0,skipped:!0};if(f.has(Y))return console.log(` Skipping duplicate ${Y} request`),{success:!1,skipped:!0};const G=new AbortController,te=setTimeout(()=>G.abort(),5e3);f.set(Y,!0);try{const re=await fetch(H,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify(X),signal:G.signal});if(clearTimeout(te),!re.ok)throw new Error(`HTTP ${re.status}`);const xe=await re.json();return Y==="cart"?n=he:i=he,console.log(` ${Y} updated - v${xe.version}`),{success:!0,data:xe}}catch(re){return re.name==="AbortError"?console.warn(` ${Y} update timeout`):console.error(` Failed to update ${Y}:`,re.message),{success:!1,error:re}}finally{f.delete(Y)}},x=So.debounce(async H=>{const X=v(H);await y("/api/pos/terminal/update-cart",{terminal_id:u,cart:H},"cart",X)},800),T=So.debounce(async H=>{const X=v(H);await y("/api/pos/terminal/update-ui",{terminal_id:u,ui:H},"ui",X)},300),C=async H=>{const X=v(H);return await y("/api/pos/terminal/update-cart",{terminal_id:u,cart:H},"cart",X)},q=So.debounce(async(H,X)=>{const Y=v(H),he=v(X);if(Y===n&&he===i)return{success:!0,skipped:!0};const G=new AbortController,te=setTimeout(()=>G.abort(),5e3);try{const re=await fetch("/api/pos/terminal/update-both",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify({terminal_id:u,cart:H,ui:X}),signal:G.signal});if(clearTimeout(te),!re.ok)throw new Error(`HTTP ${re.status}`);const xe=await re.json();return n=Y,i=he,console.log(` Batch update successful - v${xe.version}`),{success:!0,data:xe}}catch(re){return console.error(" Batch update failed:",re.message),{success:!1,error:re}}},500);return{broadcastCartUpdate:x,broadcastUIUpdate:T,broadcastImmediateCartUpdate:C,broadcastBatchUpdate:q,clearBroadcastCache:()=>{n=null,i=null,f.clear(),console.log(" Broadcast cache cleared")}}}const Yw={key:0,class:"modal fade show d-block",tabindex:"-1",style:{background:"rgba(0,0,0,0.5)","z-index":"9999"}},Gw={class:"modal-dialog modal-lg modal-dialog-centered"},jw={class:"modal-content"},Qw={class:"modal-header bg-warning text-dark"},Xw={class:"modal-body"},Jw={key:0,class:"alert alert-info mb-3"},Zw={class:"mb-0"},ex={key:1,class:"alert alert-danger"},tx={class:"text-muted"},nx={key:2},sx={class:"fw-bold"},ix={key:0,class:"badge bg-secondary ms-2"},rx={class:"table table-sm table-bordered"},ox={class:"text-end"},ax={class:"text-end"},lx={class:"text-end text-danger fw-bold"},ux={class:"modal-footer"},cx={__name:"ConfirmMissingIngredientsModal",props:{show:Boolean,missingIngredients:{type:Array,default:()=>[]}},emits:["close","confirm"],setup(u,{emit:n}){const i=u,f=n;Ai(()=>i.show,T=>{console.log(" Modal show changed:",T),T&&console.log(" Missing ingredients:",i.missingIngredients)},{immediate:!0}),Ai(()=>i.missingIngredients,T=>{console.log(" Missing ingredients changed:",T),console.log(" Array length:",T?.length),console.log(" Is array?:",Array.isArray(T))},{immediate:!0,deep:!0});const v=Ce(()=>{if(console.log(" Computing groupedByItem"),console.log(" Input missingIngredients:",i.missingIngredients),!Array.isArray(i.missingIngredients)||i.missingIngredients.length===0)return console.log(" No ingredients to group (not array or empty)"),{};const T={};return i.missingIngredients.forEach((C,q)=>{console.log(` Processing ingredient ${q}:`,C);const M=`${C.item_id}-${C.variant_id||"default"}`;T[M]||(T[M]={item_title:C.item_title,variant_name:C.variant_name,ingredients:[]}),T[M].ingredients.push(C)}),console.log(" Final grouped data:",T),T}),y=Ce(()=>i.missingIngredients&&i.missingIngredients.length>0),x=Ce(()=>Object.keys(v.value).length);return(T,C)=>u.show?ft((S(),k("div",Yw,[c("div",Gw,[c("div",jw,[c("div",Qw,[C[4]||(C[4]=c("h5",{class:"modal-title"},[c("i",{class:"bi bi-exclamation-triangle-fill me-2"}),fe(" Ingredient Shortage Warning ")],-1)),c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:C[0]||(C[0]=q=>f("close"))},[...C[3]||(C[3]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),c("div",Xw,[y.value?Q("",!0):(S(),k("div",Jw,[C[5]||(C[5]=c("strong",null,"Debug Info:",-1)),c("ul",Zw,[c("li",null,"Has data: "+N(y.value),1),c("li",null,"Array length: "+N(u.missingIngredients?.length||0),1),c("li",null,"Is array: "+N(Array.isArray(u.missingIngredients)),1),c("li",null,"Group count: "+N(x.value),1)])])),C[10]||(C[10]=c("div",{class:"alert alert-warning"},[c("strong",null,"Warning:"),fe(" The following items have ingredient shortages. The order can still be placed, but pending ingredient deductions will be recorded and automatically deducted when stock arrives. ")],-1)),y.value?(S(),k("div",nx,[(S(!0),k($e,null,ot(v.value,(q,M)=>(S(),k("div",{key:M,class:"mb-4"},[c("h6",sx,[fe(N(q.item_title)+" ",1),q.variant_name?(S(),k("span",ix,N(q.variant_name),1)):Q("",!0)]),c("table",rx,[C[9]||(C[9]=c("thead",{class:"table-light"},[c("tr",null,[c("th",null,"Ingredient"),c("th",{class:"text-end"},"Required"),c("th",{class:"text-end"},"Available"),c("th",{class:"text-end"},"Short")])],-1)),c("tbody",null,[(S(!0),k($e,null,ot(q.ingredients,H=>(S(),k("tr",{key:H.inventory_item_id},[c("td",null,N(H.inventory_item_name),1),c("td",ox,N(H.required_quantity)+" "+N(H.unit),1),c("td",ax,N(H.available_quantity)+" "+N(H.unit),1),c("td",lx,N(H.shortage_quantity)+" "+N(H.unit),1)]))),128))])])]))),128))])):(S(),k("div",ex,[C[6]||(C[6]=c("i",{class:"bi bi-exclamation-circle me-2"},null,-1)),C[7]||(C[7]=fe(" No missing ingredient data available. ",-1)),C[8]||(C[8]=c("br",null,null,-1)),c("small",tx," Received "+N(u.missingIngredients?.length||0)+" ingredient(s) ",1)]))]),c("div",ux,[c("button",{type:"button",class:"btn btn-secondary px-2 py-2",onClick:C[1]||(C[1]=q=>f("close"))}," Cancel Order "),c("button",{type:"button",class:"btn btn-primary px-4 py-2",onClick:C[2]||(C[2]=q=>f("confirm"))}," Proceed Anyway ")])])])],512)),[[ei,u.show]]):Q("",!0)}},dx={class:"page-wrapper"},fx={class:"container-fluid px-3 py-3"},px={class:"row gx-3 gy-3"},hx={key:0,class:"row g-3 tablet-screen"},_x={class:"d-flex justify-content-between justify align-items-center mb-3"},vx={style:{width:"250px",position:"relative"}},mx={key:1,type:"text",class:"form-control form-control-sm",placeholder:"Search categories...",disabled:"",style:{"border-radius":"8px",padding:"8px 12px"}},gx={key:0,class:"col-12 text-center py-5"},bx=["onClick"],yx={class:"cat-icon-wrap"},Ex={class:"cat-icon"},wx=["src"],xx={key:1},Ax={class:"cat-name"},Cx={class:"cat-pill"},Tx={key:0,class:"text-danger ms-1"},Sx={key:0,class:"col-12"},Ix={key:1},Ox={class:"d-flex flex-wrap gap-2 align-items-center mb-4"},kx={class:"fw-bold mb-0"},Dx={class:"d-flex gap-2 ms-auto align-items-center"},Nx={class:"search-wrap position-relative"},Lx={key:0,class:"col-12"},$x={class:"alert alert-warning border-0 rounded-4 text-center py-5"},Px={class:"text-muted mb-3"},Mx={class:"row g-3"},Rx={key:0,class:"card rounded-4 shadow-sm overflow-hidden border-3 w-100 d-flex flex-row align-items-stretch",style:{"border-color":"#dc3545"}},Fx={class:"position-relative",style:{flex:"0 0 40%","max-width":"40%"}},qx=["src"],Bx={class:"position-absolute top-0 start-0 m-1 px-2 py-1 rounded-pill text-white fw-semibold bg-danger",style:{"font-size":"0.58rem","letter-spacing":"0.3px"}},Wx={class:"p-3 d-flex flex-column justify-content-between",style:{flex:"1 1 60%","min-width":"0",position:"relative"}},Ux={class:"h5 fw-bold mb-2 menu-name text-danger"},Vx={class:"mb-3"},Hx={class:"d-flex flex-wrap gap-1"},zx={class:"mt-2"},Kx=["onClick"],Yx=["onClick","disabled"],Gx={class:"qty-box border rounded-pill px-2 py-2 text-center fw-semibold left-card-cntrl-btn",style:{"min-width":"55px"}},jx=["onClick"],Qx={class:"position-relative",style:{flex:"0 0 40%","max-width":"40%"}},Xx=["src"],Jx={key:0,class:"position-absolute bottom-0 start-0 end-0 text-center bg-light bg-opacity-75 fw-semibold",style:{"font-size":"0.6rem !important",padding:"2px 4px"}},Zx={key:0,class:"text-muted text-decoration-line-through me-1"},eA={class:"fw-bold text-success me-2"},tA={key:1,class:"text-muted text-decoration-line-through me-1"},nA={class:"fw-bold text-success"},sA={class:"text-decoration-line-through opacity-75 me-1"},iA={class:"fw-bold text-white"},rA={key:1,class:"position-absolute bottom-0 start-0 end-0 m-2 badge bg-danger py-2"},oA={class:"p-3 d-flex flex-column justify-content-between",style:{flex:"1 1 60%","min-width":"0",position:"relative"}},aA={key:0,class:"position-absolute px-2 py-1 rounded-pill bg-success text-white small fw-bold",style:{fontSize:"0.7rem",top:"7px",right:"7px"}},lA={key:0,class:"mb-3"},uA=["onUpdate:modelValue","onChange"],cA=["value"],dA={key:1,class:"mb-3"},fA={key:0,class:"d-flex flex-wrap gap-1"},pA={key:1},hA={class:"d-flex justify-content-between align-items-center w-100"},_A={class:"text-muted"},vA={class:"fw-semibold text-success"},mA=["onClick"],gA=["onClick","disabled"],bA={class:"qty-box border rounded-pill px-2 py-2 text-center fw-semibold left-card-cntrl-btn",style:{"min-width":"55px"}},yA=["onClick"],EA={key:0,class:"col-lg-4 right-cart"},wA={class:"col-12 d-flex align-items-center justify-content-end gap-2 mb-2"},xA={key:0,class:"badge bg-danger ms-1"},AA={class:"cart card border-0 shadow-lg rounded-4"},CA={class:"cart-header"},TA={class:"order-type"},SA=["onClick"],IA={class:"cart-body"},OA={class:"mb-3"},kA={key:0,class:"row g-2"},DA={class:"col-6 table-dropdown"},NA=["value"],LA={key:0,class:"invalid-feedback d-block"},$A={class:"col-6 table-dropdown"},PA={key:1},MA={key:0,class:"invalid-feedback d-block"},RA={key:2,class:"mt-2"},FA={key:0,class:"invalid-feedback d-block"},qA={key:1,class:"invalid-feedback d-block"},BA={class:"cart-lines"},WA={key:0,class:"empty"},UA={class:"line-left"},VA=["src"],HA={class:"meta"},zA=["title"],KA={key:0},YA={class:"badge bg-success",style:{"font-size":"0.65rem"}},GA={key:1,class:"addon-icons mt-1"},jA=["onClick","title"],QA={class:"text-muted small"},XA={key:2,class:"badge bg-success mt-1 ms-1",style:{"font-size":"0.65rem"}},JA={key:3,class:"mt-1"},ZA={class:"badge",style:{"font-size":"0.65rem",background:"#1B1670",color:"white"}},eC={key:4,class:"note"},tC={class:"line-right"},nC={class:"qty-controls"},sC=["onClick"],iC={class:"qty"},rC=["onClick"],oC={class:"price-delete"},aC={class:"price"},lC=["onClick"],uC={class:"totals"},cC={class:"trow"},dC={class:"sub-total"},fC={key:0,class:"trow"},pC={class:"text-info"},hC={key:1,class:"trow"},_C={class:"fw-semibold"},vC={key:2,class:"trow"},mC={class:"fw-semibold"},gC={key:3,class:"trow"},bC={class:"text-danger"},yC={key:4,class:"promos-section mb-3"},EC={class:"promo-total mt-2 rounded-3 bg-success-subtle"},wC={class:"d-flex justify-content-between align-items-center"},xC={class:"text-success fs-6"},AC={key:5,class:"pending-discounts-section mb-3"},CC={class:"d-flex align-items-center gap-2 text-warning"},TC={class:"text-warning"},SC={key:6,class:"approved-discounts-section mb-3"},IC={class:"trow border-top pt-2 mt-2"},OC={class:"text-success"},kC={class:"trow total"},DC={class:"mb-3"},NC={class:"mb-3"},LC={class:"cart-footer"},$C={class:"modal fade",id:"chooseItem",tabindex:"-1","aria-hidden":"true"},PC={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},MC={class:"modal-content rounded-3 shadow border-0",style:{"max-height":"90vh"}},RC={class:"modal-header border-0 bg-light py-2 px-3 rounded-top"},FC={class:"fw-bold mb-0"},qC={class:"px-3 pt-2 progress-bar"},BC={class:"stepper-container position-relative",style:{"min-height":"60px"}},WC=["onClick"],UC={key:0,class:"bi bi-check-lg",style:{"font-size":"0.7rem"}},VC={key:1,style:{"font-size":"0.75rem"}},HC=["onClick"],zC={class:"modal-body px-3 py-2"},KC={class:"row g-3 mb-3"},YC={class:"col-lg-5"},GC={class:"position-relative mb-3"},jC=["src"],QC={key:0,class:"badge bg-danger px-2 py-1 position-absolute top-0 end-0 rounded-end-0 rounded-bottom-0 shadow-sm",style:{"font-size":"0.7rem"}},XC={class:"rounded-3 border shadow-sm p-3 bg-white"},JC={class:"d-flex justify-content-between mb-1",style:{"font-size":"0.85rem"}},ZC={key:0,class:"d-flex justify-content-between mb-1",style:{"font-size":"0.85rem"}},eT={class:"text-success"},tT={class:"d-flex justify-content-between",style:{"font-size":"1rem"}},nT={class:"fw-bold text-primary"},sT={class:"col-lg-7"},iT={class:"px-1"},rT={class:"step-content"},oT={class:"row g-2"},aT=["onClick"],lT={class:"d-flex justify-content-between align-items-center"},uT={class:"fw-bold mb-0",style:{"font-size":"0.85rem"}},cT={class:"d-flex justify-content-between align-items-center gap-2"},dT={key:0,class:"text-primary"},fT={style:{"font-size":"0.9rem"}},pT={class:"step-content"},hT={class:"row g-2"},_T=["id","checked","disabled","onChange"],vT=["for"],mT={class:"step-content"},gT={key:0,class:"mb-3"},bT={class:"d-flex justify-content-between align-items-center mb-2"},yT={class:"text-muted",style:{"font-size":"0.75rem"}},ET={class:"d-flex gap-1"},wT={key:1,class:"mb-3"},xT={class:"bg-light rounded-3 p-1 mb-3"},AT={class:"d-flex justify-content-between align-items-center mb-0"},CT={class:"fw-bold mb-0",style:{"font-size":"0.95rem"}},TT={key:0,class:"badge rounded-pill bg-primary",style:{"font-size":"0.7rem"}},ST={key:0,class:"text-muted small mb-0",style:{"font-size":"0.75rem"}},IT={class:"row g-2"},OT={class:"d-flex align-items-center flex-grow-1"},kT=["id","checked","onChange"],DT=["for"],NT={class:"text-success fw-semibold ms-1"},LT={key:0,class:"d-flex align-items-center gap-1"},$T=["onClick","disabled"],PT={class:"fw-bold",style:{"min-width":"20px","text-align":"center","font-size":"0.75rem"}},MT=["onClick"],RT={key:2,class:"d-flex justify-content-between gap-2 mt-3"},FT=["disabled"],qT=["disabled"],BT={class:"step-content"},WT={class:"summary-card p-3 rounded-3 shadow-sm mb-3"},UT={key:0,class:"summary-item"},VT={class:"summary-value"},HT={key:1,class:"summary-item"},zT={class:"summary-value"},KT={key:2,class:"summary-item"},YT={class:"summary-value"},GT={class:"d-flex align-items-center mb-3"},jT={class:"qty-group gap-1"},QT=["disabled"],XT={class:"qty-box rounded-pill"},JT={class:"mb-2"},ZT={class:"text-end small text-muted mt-1",style:{"font-size":"0.7rem"}},eS={class:"modal-footer border-0 px-3 py-2 d-flex justify-content-end gap-2"},tS={class:"modal fade",id:"customizeDealModal",tabindex:"-1","aria-hidden":"true"},nS={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},sS={class:"modal-content rounded-3 shadow border-0",style:{"max-height":"90vh"}},iS={class:"modal-header border-0 bg-light py-2 px-3 rounded-top"},rS={class:"fw-bold mb-0"},oS={class:"text-muted small mb-0",style:{"font-size":"0.8rem"}},aS={class:"px-3 pt-2 progress-bar"},lS={class:"stepper-container position-relative",style:{"min-height":"60px"}},uS={key:0,class:"bi bi-check-lg",style:{"font-size":"0.7rem"}},cS={key:1,style:{"font-size":"0.75rem"}},dS={class:"modal-body px-3 py-2"},fS={class:"row g-3 mb-3"},pS={class:"col-lg-4"},hS={class:"position-relative mb-3"},_S=["src"],vS={class:"badge bg-danger position-absolute top-0 end-0 m-2"},mS={key:0},gS={key:1},bS={class:"rounded-3 border shadow-sm p-3 bg-white mb-3"},yS={class:"fw-bold mb-2 d-flex align-content-center",style:{"font-size":"0.9rem"}},ES={class:"d-flex align-items-center"},wS={class:"flex-grow-1"},xS={class:"text-muted small"},AS={key:0,class:"text-success small fw-semibold"},CS={class:"fw-bold text-primary"},TS={class:"rounded-3 border shadow-sm p-3 bg-white"},SS={class:"list-group list-group-flush"},IS={class:"d-flex align-items-center"},OS={key:0,class:"bi bi-check-circle-fill text-success me-2"},kS={key:2,class:"bi bi-circle text-muted me-2"},DS={class:"col-lg-8"},NS={class:"px-1"},LS={class:"step-content"},$S={class:"d-flex align-items-start mb-2"},PS={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},MS={class:"row g-2"},RS=["id","checked","disabled","onChange"],FS=["for"],qS={class:"step-content"},BS={class:"d-flex align-items-start mb-2"},WS={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},US={class:"fw-semibold mb-1 d-flex justify-content-between",style:{"font-size":"0.85rem"}},VS={key:0,class:"badge rounded-pill bg-primary",style:{"font-size":"0.7rem"}},HS={class:"step-content"},zS={class:"d-flex align-items-start mb-2"},KS={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},YS={class:"summary-card p-3 rounded-3 shadow-sm mb-3"},GS={class:"summary-item"},jS={class:"summary-value"},QS={class:"summary-item"},XS={class:"summary-value"},JS={key:0,class:"summary-item"},ZS={class:"summary-value text-danger"},e2={key:1,class:"summary-item"},t2={class:"summary-value text-success"},n2={key:2,class:"summary-item"},s2={class:"summary-value text-success fw-bold"},i2={class:"summary-item border-top pt-2 mt-2"},r2={class:"summary-value fw-bold text-primary"},o2={class:"mb-2"},a2={class:"fw-semibold mb-1",style:{"font-size":"0.85rem"}},l2={class:"text-end small text-muted mt-1",style:{"font-size":"0.7rem"}},u2={class:"modal-footer border-0 px-3 py-2 d-flex justify-content-end"},c2={class:"d-flex gap-2"},d2={class:"modal fade",id:"addonManagementModal",tabindex:"-1","aria-hidden":"true"},f2={class:"modal-dialog modal-lg modal-dialog-centered"},p2={class:"modal-content rounded-4 border-0 shadow-lg"},h2={key:0,class:"modal-body pt-2"},_2={class:"alert alert-light border rounded-3 mb-3"},v2={class:"d-flex align-items-center gap-3"},m2=["src"],g2={class:"flex-grow-1"},b2={class:"fw-bold fs-6"},y2={class:"d-flex gap-3 mt-1"},E2={class:"text-muted"},w2={class:"fw-semibold"},x2={class:"text-muted"},A2={class:"fw-semibold"},C2={key:0,class:"table-responsive"},T2={class:"table table-hover align-middle mb-0"},S2={class:"text-center"},I2={class:"form-check d-flex justify-content-center"},O2=["checked","onChange"],k2={class:"d-flex align-items-center gap-2"},D2={class:"fw-semibold"},N2={key:0,class:"text-muted"},L2={class:"text-center"},$2={class:"badge bg-success-subtle text-success px-3 py-2 fs-6"},P2={class:"d-flex align-items-center justify-content-center gap-2"},M2=["onClick","disabled"],R2={class:"fw-bold fs-5 px-3",style:{"min-width":"50px","text-align":"center"}},F2=["onClick","disabled"],q2={key:1,class:"text-center text-muted py-5"},B2={class:"mt-3 p-3 rounded-3"},W2={key:0,class:"mt-3 p-3 rounded-3 border border-success bg-light"},U2={class:"text-success fw-semibold"},V2={__name:"Index",props:["client_secret","order_code"],setup(u){const{formatCurrencySymbol:n}=qb();ur(()=>{gu(()=>{document.querySelectorAll('[data-bs-toggle="popover"]').forEach(o=>{new Qa(o)})})});const i=U([]),f=U(!0),v=U(""),y=U(Date.now()),x=`category-search-${Math.random().toString(36).substr(2,9)}`,T=U(!1),C=U(0),q=Ce(()=>!oe.value?.addon_groups||oe.value.addon_groups.length===0?null:oe.value.addon_groups[C.value]),M=()=>{C.value<oe.value?.addon_groups?.length-1&&C.value++},H=()=>{C.value>0&&C.value--},X=()=>{ve.value=Un.value},Y=Ce(()=>{const o=v.value.trim().toLowerCase();return o?Xr.value.filter(r=>r.name.toLowerCase().includes(o)):Xr.value}),he=async()=>{f.value=!0;try{const o=await axios.get("/api/pos/fetch-menu-categories");i.value=o.data,i.value.length>0&&(Kn.value=i.value[0].id)}catch(o){console.error("Error fetching categories:",o)}finally{f.value=!1}},G=U([]),te=async()=>{try{const o=await axios.get("/api/pos/fetch-menu-items");G.value=o.data.data}catch(o){console.error("Error fetching inventory:",o)}},re=Ce(()=>{const o={};return G.value.forEach(r=>{const l=r.category?.id||"uncategorized",_=r.category?.name||"Uncategorized";o[l]||(o[l]=[]);const w={id:r.id,title:r.name,img:r.image_url||"/assets/img/default.png",stock:0,price:Number(r.price),label_color:r.label_color||"#1B1670",family:_,description:r.description,nutrition:r.nutrition,tags:r.tags,allergies:r.allergies,ingredients:r.ingredients??[],variants:r.variants??[],addon_groups:r.addon_groups??[],is_saleable:r.is_saleable,resale_type:r.resale_type,resale_value:r.resale_value,isDeal:!1};o[l].push(w)}),gn.value.forEach(r=>{const l=r.category_id||"uncategorized";o[l]||(o[l]=[]);const _={id:r.id,dealId:r.id,title:r.title,img:r.img,stock:999999,price:Number(r.price),label_color:"#dc3545",family:"Deal",description:r.description,nutrition:{},tags:[],allergies:[],ingredients:[],variants:[],addon_groups:[],is_saleable:!1,resale_type:null,resale_value:null,isDeal:!0,category_id:r.category_id,menu_items:r.menu_items||[]};o[l].push(_)}),o}),xe=U({});Ai(()=>G.value,o=>{o&&o.length>0&&o.forEach(r=>{r.variants&&r.variants.length>0&&(xe.value[r.id]||(xe.value[r.id]=r.variants[0].id))})},{immediate:!0,deep:!0});const _e=o=>{if(!o.variants||o.variants.length===0)return null;const r=xe.value[o.id];return r&&o.variants.find(l=>l.id===r)||o.variants[0]},de=(o,r)=>{const l=parseInt(r.target.value);xe.value[o.id]=l;const _=o.variants.find(w=>w.id===l);_&&console.log(`Selected ${_.name} for ${o.title} - ${n(_.price)}`)},ae=U({}),Ae=o=>{const r=o.id;if(!ae.value[r])return 0;let l=0;return Object.values(ae.value[r]).forEach(_=>{_.forEach(w=>{l+=parseFloat(w.price||0)})}),l},Se=o=>{const r=o.id;if(!ae.value[r])return[];const l=[];return Object.values(ae.value[r]).forEach(_=>{_.forEach(w=>{l.push({id:w.id,name:w.name,price:parseFloat(w.price),group_id:w.group_id||w.pivot?.addon_group_id})})}),l},Ue=o=>{if(!o.addon_groups||o.addon_groups.length===0)return[];const r=[];return o.addon_groups.forEach(l=>{l.addons&&l.addons.length>0&&l.addons.forEach(_=>{r.push({..._,group_id:l.group_id,group_name:l.group_name,max_select:l.max_select})})}),r},Ve=o=>{const r=o.id;if(!ae.value[r])return[];const l=[];return Object.values(ae.value[r]).forEach(_=>{l.push(..._)}),l},Ke=(o,r)=>{const l=o.id,_={};r.forEach(w=>{_[w.group_id]||(_[w.group_id]=[]),_[w.group_id].push(w)}),o.addon_groups.forEach(w=>{const O=_[w.group_id]||[];w.max_select>0&&O.length>w.max_select&&(V.warning(`You can only select up to ${w.max_select} items from ${w.group_name}`),_[w.group_id]=O.slice(0,w.max_select))}),ae.value[l]=_},Oe=U([]),pt=()=>{if(!oe.value)return[];const o=Ye();return o&&o.ingredients&&o.ingredients.length>0?o.ingredients:oe.value.ingredients||[]},Ze=o=>Oe.value.includes(o),pn=o=>{const r=Oe.value.indexOf(o);r>-1?(Oe.value.splice(r,1),V.info("Ingredient added back")):(Oe.value.push(o),V.info("Ingredient removed"))},On=()=>pt().filter(o=>!Oe.value.includes(o.id||o.inventory_item_id)).length,gt=()=>{if(Oe.value.length===0)return null;const o=pt(),r=Oe.value.map(l=>{const _=o.find(w=>w.id===l||w.inventory_item_id===l);return _?_.product_name||_.name:null}).filter(Boolean);return r.length===0?null:`No ${r.join(", ")}`},ve=U(1),It=o=>{(o<=ve.value||o===ve.value+1)&&(ve.value=o)},Kt=Ce(()=>oe.value?.variants&&oe.value.variants.length>0),hn=Ce(()=>pt().length>0),yt=Ce(()=>oe.value?.addon_groups&&oe.value.addon_groups.length>0),Et=Ce(()=>{let o=[],r=1;return Kt.value&&(o.push({id:"variants",name:"Variant",stepNumber:r,actualStep:1}),r++),hn.value&&(o.push({id:"ingredients",name:"Ingredients",stepNumber:r,actualStep:2}),r++),yt.value&&(o.push({id:"addons",name:"Add-ons",stepNumber:r,actualStep:3}),r++),o.push({id:"review",name:"Review",stepNumber:r,actualStep:4}),o}),Un=Ce(()=>Et.value[Et.value.length-1]?.stepNumber||1),Vn=Ce(()=>{if(ve.value===1)return"0%";const o=Et.value.length,r=(ve.value-1)/(o-1);return`calc(${r*100}% - ${14-r*28}px)`}),wt=o=>o<ve.value?"stepper-circle-completed":o===ve.value?"stepper-circle-active":"stepper-circle-inactive",_n=()=>{const o=Et.value.findIndex(r=>r.stepNumber===ve.value);o<Et.value.length-1&&(ve.value=Et.value[o+1].stepNumber)},Ps=()=>{const o=Et.value.findIndex(r=>r.stepNumber===ve.value);o>0&&(ve.value=Et.value[o-1].stepNumber)},Lt=o=>{Qn.value=o,ai()},kn=()=>Kt.value&&oe.value?.variants?.find(r=>r.id===Qn.value)?.name||"",Sr=()=>{const o=[];return Object.values(lt.value).forEach(r=>{r.forEach(l=>{const _=l.quantity>1?` x${l.quantity}`:"";o.push(`${l.name}${_} (+${n(l.price*(l.quantity||1))})`)})}),o.join(", ")},Hn=async o=>{oe.value=o,Pr.value="",Dn.value="",Qn.value=null,lt.value={},C.value=0,Oe.value=[],ve.value=1,o.variants&&o.variants.length>0&&(Qn.value=o.variants[0].id);const r=o.variants&&o.variants.length>0?o.variants[0]:null,l=r?r.id:null,_=ts(o,l),w=ds(o,l,_);_t.value=w>0?1:0,Oe.value=[];const O=document.getElementById("chooseItem"),I=new bootstrap.Modal(O);O.addEventListener("shown.bs.modal",async()=>{await gu()},{once:!0}),I.show()},ds=(o,r,l)=>{if(!qi.value)return 999999;const _=l.filter(I=>!Oe.value.includes(I.id||I.inventory_item_id));if(!_||_.length===0)return 999999;const w={};for(const I of F.value)ts(I,I.variant_id).filter(B=>!I.removed_ingredients||I.removed_ingredients.length===0?!0:!I.removed_ingredients.includes(B.id||B.inventory_item_id)).forEach(B=>{const me=B.inventory_item_id,Re=Number(B.inventory_stock??B.inventory_item?.stock??0);w[me]||(w[me]={totalStock:Re,used:0});const ne=Number(B.quantity??B.qty??1)*I.qty;w[me].used+=ne});let O=999999;for(const I of _){const W=I.inventory_item_id,Z=Number(I.inventory_stock??I.inventory_item?.stock??0),B=Number(I.quantity??I.qty??1);if(w[W]){const me=w[W].totalStock-w[W].used,Re=Math.floor(me/B);O=Math.min(O,Re)}else{const me=Math.floor(Z/B);O=Math.min(O,me)}}return O},ai=()=>{const o=Ye(),r=o?o.id:null,l=ts(oe.value,r),_=ds(oe.value,r,l);if(_<=0){V.error("No stock available for this variant. Please remove items from cart first."),_t.value=0;return}_t.value=Math.min(1,_)},Ye=()=>{if(!oe.value||!oe.value.variants||oe.value.variants.length===0)return null;const o=Qn.value;return o&&oe.value.variants.find(r=>r.id===o)||oe.value.variants[0]},fs=()=>{if(!oe.value)return 0;const o=Ye();return parseFloat(o?o.price:oe.value.price||0)},ps=()=>{let o=0;return Object.values(lt.value).forEach(r=>{r.forEach(l=>{o+=parseFloat(l.price||0)*(l.quantity||1)})}),o},Yt=()=>{const o=[];return Object.values(lt.value).forEach(r=>{r.forEach(l=>{o.push({id:l.id,name:l.name,price:parseFloat(l.price),group_id:l.group_id||l.pivot?.addon_group_id})})}),o},li=o=>{if(!o)return 0;if(!qi.value)return 999999;const r=_e(o),l=r?r.id:null,_=ts(o,l);if(!_.length)return 999999;let w=1/0;return _.forEach(O=>{const I=Number(O.quantity??O.qty??1),W=Number(O.inventory_stock??O.inventory_item?.stock??0);if(I<=0)return;const Z=Math.floor(W/I);w=Math.min(w,Z)}),w===1/0?0:w},Ni=o=>li(o),et=U(""),le=U("dine"),Ge=U("Walk In"),ht=U(" "),xt=U(" "),zn=U(10),Kn=U(null),Yn=o=>Kn.value=o,Ot=U(!0),Ir=o=>{Yn(o.id),Ot.value=!1},Or=()=>Ot.value=!0,hs=U({}),Gn=U([]),At=U(null),kr=async()=>{try{const o=await axios.get("/api/pos/fetch-profile-tables");if(hs.value=o.data,hs.value.order_types){Gn.value=hs.value.order_types.map(l=>l.charAt(0).toUpperCase()+l.slice(1));const r=localStorage.getItem("quickOrderType");if(r){const l=Gn.value.find(_=>_.toLowerCase().replace(/_/g," ")===r.toLowerCase().replace(/_/g," "));l?le.value=l:le.value=Gn.value[0]}else le.value=Gn.value[0]}}catch(o){console.error("Error fetching profile tables:",o)}},Dr=Ce(()=>re.value[Kn.value]??[]),at=U({sortBy:"",priceMin:null,priceMax:null}),Li=Ce(()=>{let o=Dr.value;const r=et.value.trim().toLowerCase();if(r&&(o=o.filter(l=>l.title.toLowerCase().includes(r)||(l.family||"").toLowerCase().includes(r)||(l.description||"").toLowerCase().includes(r)||(l.tags?.map(_=>_.name.toLowerCase()).join(", ")||"").includes(r))),at.value.priceMin!==null&&at.value.priceMin!==""&&(o=o.filter(l=>l.price>=at.value.priceMin)),at.value.priceMax!==null&&at.value.priceMax!==""&&(o=o.filter(l=>l.price<=at.value.priceMax)),at.value.sortBy)switch(o=[...o],at.value.sortBy){case"name_asc":o.sort((l,_)=>l.title.localeCompare(_.title));break;case"name_desc":o.sort((l,_)=>_.title.localeCompare(l.title));break;case"price_asc":o.sort((l,_)=>l.price-_.price);break;case"price_desc":o.sort((l,_)=>_.price-l.price);break;case"stock_asc":o.sort((l,_)=>(l.stock??0)-(_.stock??0));break;case"stock_desc":o.sort((l,_)=>(_.stock??0)-(l.stock??0));break}return o}),Nr=U(!1),Za=o=>{at.value={...o},Nr.value=!0},Ms=U(""),$o=()=>{const o=localStorage.getItem("pos_walkin_counter");o?Ms.value=parseInt(o):(Ms.value=1,localStorage.setItem("pos_walkin_counter","1"))},Lr=()=>`Walk In-${String(Ms.value).padStart(3,"0")}`,el=()=>{Ms.value++,localStorage.setItem("pos_walkin_counter",Ms.value.toString())},$r=()=>{at.value={sortBy:"",priceMin:null,priceMax:null}},F=U([]),tl=async o=>{const r=F.value[o];if(!r)return;if(r.isDeal){const _=no({id:r.dealId,title:r.title,menu_items:r.menu_items},r.qty+1);if(!_.canAdd){console.log(" Missing ingredients for deal (cart increment)"),sn.value={itemIndex:o,item:r,newQty:r.qty+1,isDeal:!0},Gt.value=_.missing,Jn.value=!0,V.warning("Some ingredients are missing. Confirm to proceed.");return}r.qty++,r.price=r.unit_price*r.qty,V.success("Deal quantity updated");return}const l=$i(r,r.qty+1);if(!l.canAdd){console.log(" Missing ingredients detected (client-side)"),sn.value={itemIndex:o,item:r,newQty:r.qty+1,isDeal:!1},Gt.value=l.missing,Jn.value=!0,V.warning("Some ingredients are missing. Confirm to proceed.");return}r.outOfStock=!1,r.qty++,r.price=r.unit_price*r.qty,r.resale_discount_per_item&&(r.total_resale_discount=r.resale_discount_per_item*r.qty)},$i=(o,r)=>{if(!qi.value)return{canAdd:!0,missing:[]};const l=o.ingredients||[];if(l.length===0)return{canAdd:!0,missing:[]};const _=[],w={};return F.value.forEach(I=>{(I.ingredients||[]).filter(B=>!I.removed_ingredients||I.removed_ingredients.length===0?!0:!I.removed_ingredients.includes(B.id||B.inventory_item_id)).forEach(B=>{const me=B.inventory_item_id,Re=Number(B.inventory_stock??B.inventory_item?.stock??0);w[me]||(w[me]={totalStock:Re,used:0,name:B.product_name||B.name,unit:B.unit||"unit"});const ne=Number(B.quantity??B.qty??1)*I.qty;w[me].used+=ne})}),l.filter(I=>!o.removed_ingredients||o.removed_ingredients.length===0?!0:!o.removed_ingredients.includes(I.id||I.inventory_item_id)).forEach(I=>{const W=I.inventory_item_id,Z=Number(I.quantity??I.qty??1)*r,B=Number(I.inventory_stock??I.inventory_item?.stock??0);if(!w[W])B<Z&&_.push({item_id:o.id,item_title:o.title,variant_id:o.variant_id||null,variant_name:o.variant_name||null,inventory_item_id:W,inventory_item_name:I.product_name||I.name,required_quantity:Z,available_quantity:B,shortage_quantity:Z-B,unit:I.unit||"unit",order_quantity:r});else{const me=w[W].totalStock-w[W].used,Re=F.value.find(ne=>ne.id===o.id&&ne.variant_id===o.variant_id&&JSON.stringify(ne.addons?.map(ze=>ze.id).sort())===JSON.stringify(o.addons?.map(ze=>ze.id).sort()));if(Re){const ne=Number(I.quantity??I.qty??1)*Re.qty,ze=me+ne;ze<Z&&_.push({item_id:o.id,item_title:o.title,variant_id:o.variant_id||null,variant_name:o.variant_name||null,inventory_item_id:W,inventory_item_name:I.product_name||I.name,required_quantity:Z,available_quantity:ze,shortage_quantity:Z-ze,unit:I.unit||"unit",order_quantity:r})}else me<Z&&_.push({item_id:o.id,item_title:o.title,variant_id:o.variant_id||null,variant_name:o.variant_name||null,inventory_item_id:W,inventory_item_name:I.product_name||I.name,required_quantity:Z,available_quantity:me,shortage_quantity:Z-me,unit:I.unit||"unit",order_quantity:r})}}),{canAdd:_.length===0,missing:_}},nl=async o=>{const r=F.value[o];if(!r||r.qty<=1){V.error("Cannot reduce below 1.");return}r.qty--,r.price=r.unit_price*r.qty,r.resale_discount_per_item&&(r.total_resale_discount=r.resale_discount_per_item*r.qty),r.outOfStock=!1},sl=o=>{if(F.value[o],F.value.splice(o,1),F.value.length===0){ut.value=[],Pe.value=[],Pt.value=[],Pn();return}Pe.value.length>0&&(Pe.value=Pe.value.filter(l=>{if(!l.menu_items||l.menu_items.length===0)return!0;const _=l.menu_items.map(O=>O.id);return F.value.some(O=>_.includes(O.id))}));const r=[];ut.value.forEach(l=>{l.min_purchase&&$t.value<l.min_purchase?V.info(`Discount "${l.name}" removed  subtotal is lower than minimum required (${n(l.min_purchase)}).`):r.push(l)}),ut.value=r},$t=Ce(()=>F.value.reduce((o,r)=>o+r.price,0)),vn=Ce(()=>{if(le.value!=="Delivery")return 0;const o=jt.props.onboarding.tax_and_vat;return o.has_delivery_charges?o.delivery_charge_flat?parseFloat(o.delivery_charge_flat):o.delivery_charge_percentage?$t.value*parseFloat(o.delivery_charge_percentage)/100:0:0}),jn=Ce(()=>{if(F.value.length===0)return 0;const o=jt.props.onboarding.tax_and_vat;return o.has_service_charges?o.service_charge_flat?parseFloat(o.service_charge_flat):o.service_charge_percentage?$t.value*parseFloat(o.service_charge_percentage)/100:0:0}),ui=o=>`${(Math.round(o*100)/100).toFixed(2)}`,oe=U(null),_t=U(0),Pr=U(""),Qn=U(null),lt=U({}),Dn=U(""),il=async()=>{if(!oe.value)return;if(_t.value<=0){V.error("Please select at least 1 item to add to cart");return}const o=Ye(),r=o?o.id:null;o&&`${o.name}`;const l=o?o.name:null,_=parseFloat(o?o.price:oe.value.price),w=Yt(),O=ps(),I=_+O,W=o?Rt(o,!0):Rt(oe.value,!1),Z=ts(oe.value,r),B=gt();try{const me=w.map(be=>be.id).sort((be,dt)=>be-dt).join("-"),Re=Z.length>0?Pi(Z):999999,ne=F.value.findIndex(be=>{if(be.variant_id!==r)return!1;const dt=(be.addons||[]).map(Qt=>Qt.id).sort((Qt,oo)=>Qt-oo).join("-");return be.id===oe.value.id&&dt===me});if(ne>=0){if(F.value[ne].qty+=_t.value,F.value[ne].price=F.value[ne].unit_price*F.value[ne].qty,F.value[ne].total_resale_discount=W*F.value[ne].qty,Dn.value&&Dn.value.trim()){const be=F.value[ne].item_kitchen_note||"",dt=Dn.value.trim(),Qt=[be,dt,B].filter(Boolean).filter((oo,Al,er)=>er.indexOf(oo)===Al);F.value[ne].item_kitchen_note=Qt.join("; ")}else if(B){const be=F.value[ne].item_kitchen_note||"";F.value[ne].item_kitchen_note=[be,B].filter(Boolean).join("; ")}Oe.value.length>0&&(F.value[ne].removed_ingredients=[...Oe.value]),V.success(`Quantity updated to ${F.value[ne].qty}`)}else{const be=[Dn.value.trim(),B].filter(Boolean).join(". ");F.value.push({id:oe.value.id,title:oe.value.title,img:oe.value.img,price:I*_t.value,unit_price:Number(I),qty:_t.value,note:Pr.value||"",item_kitchen_note:be,stock:Re,ingredients:Z,variant_id:r,variant_name:l,addons:w,removed_ingredients:[...Oe.value],resale_discount_per_item:W,total_resale_discount:W*_t.value}),V.success(`${oe.value.title} added to cart`)}bootstrap.Modal.getInstance(document.getElementById("chooseItem")).hide(),_t.value=0,Pr.value="",Dn.value="",Qn.value=null,lt.value={},Oe.value=[]}catch(me){V.error("Failed to add item: "+(me.response?.data?.message||me.message))}},Pi=o=>{if(!o||o.length===0)return 999999;let r=1/0;return o.forEach(l=>{const _=Number(l.quantity??l.qty??1),w=Number(l.inventory_stock??l.inventory_item?.stock??0);if(_<=0)return;const O=Math.floor(w/_);r=Math.min(r,O)}),r===1/0?0:r},Po=async()=>{if(!oe.value)return;const o=Ye(),r=o?o.id:null,l=pt(),_=$i({id:oe.value.id,title:oe.value.title,variant_id:r,variant_name:o?o.name:null,ingredients:l,removed_ingredients:Oe.value||[]},_t.value+1);if(!_.canAdd){console.log(" Missing ingredients for modal increment (client-side)"),Fi.value={currentQty:_t.value},Gt.value=_.missing,Jn.value=!0,V.warning("Some ingredients are missing. Confirm to proceed.");return}_t.value++},rl=()=>{_t.value>1&&_t.value--},Ct=U({}),Mi=()=>{F.value=[],Ge.value=Lr(),xt.value="",ht.value="",At.value=null,le.value=Gn.value[0]||"eat_in",Nn.value="",nn.value="",zn.value=0,Pe.value=[],ut.value=[],Pt.value=[],ci.value=[],Pn()};Ai(le,()=>Ct.value={});const Nn=U(""),nn=U(""),Mr=U(!1),Ln=U(null),Ri=U(!1),$n=U(0),ol=()=>{if(F.value.length===0){V.error("Please add at least one item to the cart.");return}if(le.value==="Eat_in"&&!At.value){Ct.value.table_number=["Table number is required for dine-in orders."],V.error("Please select a table number for Dine In orders.");return}if((le.value==="Delivery"||le.value==="Takeaway")&&!Ge.value){Ct.value.customer=["Customer name is required."],V.error("Customer name is required.");return}if(le.value==="Delivery"&&!ht.value){Ct.value.phoneNumber=["Phone number is required for delivery."],V.error("Phone number is required for delivery.");return}if(le.value==="Delivery"&&!xt.value){Ct.value.deliveryLocation=["Delivery location is required."],V.error("Delivery location is required.");return}$n.value=parseFloat(ms.value).toFixed(2),Ri.value=!0};async function Rr(o){try{const r=await axios.post("http://localhost:8085/print",{order:o,type:"customer"},{headers:{"Content-Type":"application/json"},timeout:5e3})}catch(r){console.error("Print failed:",r),V.error("Unable to connect to the customer printer. Please ensure it is properly connected.")}}const al=U("cash"),Mo=U(0);async function Fr(o){try{const r=await axios.post("http://localhost:8085/print",{order:o,type:"KOT"},{headers:{"Content-Type":"application/json"},timeout:5e3})}catch(r){console.error("KOT print failed:",r),V.error("Unable to connect to the kitchen printer. Please ensure it is properly connected.")}}const Pt=U([]),Rs=U(null),Ro=U(!1),ut=U([]),ci=U([]),Fo=async o=>{if(!o||o.length===0){V.warning("No discounts selected.");return}const r=ci.value.map(_=>_.id),l=o.filter(_=>!r.includes(_.id));if(l.length===0){V.error("All selected discounts have been rejected for this order.");return}if(l.length<o.length){const _=o.length-l.length;V.warning(`${_} discount(s) were previously rejected and cannot be requested again.`)}try{const _=await axios.post("/api/discount-approvals/request",{discounts:o.map(w=>({discount_id:w.id,discount_percentage:parseFloat(w.discount_amount),discount_name:w.name})),order_items:F.value.map(w=>({id:w.id,title:w.title,qty:w.qty,unit_price:w.unit_price,price:w.price})),order_subtotal:$t.value,request_note:`Discount approval request from ${pi.value?.name||"Cashier"}`});_.data.success&&(Pt.value=_.data.data.map(w=>({...w,discountData:o.find(O=>O.id===w.discount_id),percentage:parseFloat(w.discount_percentage),status:"pending"})),Ui.value=!1,Ro.value=!0,V.info("Discount approval request sent to Super Admin. Waiting for approval..."),qo())}catch(_){console.error("Error requesting discount approval:",_),V.error(_.response?.data?.message||"Failed to request discount approval")}},qo=()=>{Rs.value&&clearInterval(Rs.value),Rs.value=setInterval(async()=>{await qr()},3e3)},qr=async()=>{if(Pt.value.length===0){Pn();return}try{const o=Pt.value.map(l=>l.id),r=await axios.post("/api/discount-approvals/check-status",{approval_ids:o});r.data.success&&(r.data.data.forEach(_=>{if(_.status!=="pending"){const w=Pt.value.findIndex(O=>O.id===_.id);if(w>=0){if(_.status==="approved"){const O={id:_.discount_id,name:_.discount_name||_.discount?.name,percentage:parseFloat(_.discount_percentage),approval_id:_.id};ll(O),V.success(`Discount "${O.name}" (${O.percentage}%) approved!`)}else _.status==="rejected"&&(ci.value.push({id:_.discount_id,name:_.discount_name,percentage:parseFloat(_.discount_percentage),rejection_reason:_.approval_note}),V.error(`Discount "${_.discount_name}" rejected.`+(_.approval_note?` Reason: ${_.approval_note}`:"")));Pt.value.splice(w,1)}}}),Pt.value.length===0&&(Ro.value=!1,Pn()))}catch(o){console.error("Error checking approval status:",o)}},Pn=()=>{Rs.value&&(clearInterval(Rs.value),Rs.value=null)},ll=o=>{ut.value.push(o)};Lb(()=>{Pn()}),ur(()=>{window.Echo&&window.Echo.channel("discount-approvals").listen(".approval.responded",o=>{qr()})});const _s=Ce(()=>!ut.value||ut.value.length===0?0:ut.value.reduce((o,r)=>{const l=parseFloat(r.percentage||0),_=$t.value*l/100;return o+_},0)),Xn=o=>$t.value*o/100,Bo=()=>{ut.value=[],Pt.value=[],ci.value=[],Pn()},Jn=U(!1),Gt=U([]),sn=U(null),Fs=U(null),Fi=U(null),di=U(null),Br=U(null),Wr=async({paymentMethod:o,cashReceived:r,cardAmount:l,changeAmount:_,items:w,autoPrintKot:O,done:I})=>{Ct.value={};try{const W={customer_name:Ge.value,phone_number:ht.value,delivery_location:xt.value,sub_total:$t.value,tax:es.value,service_charges:jn.value,delivery_charges:vn.value,sales_discount:vs.value,approved_discounts:_s.value,approved_discount_details:ut.value.map(B=>({discount_id:B.id,discount_name:B.name,discount_percentage:B.percentage,discount_amount:Xn(B.percentage),approval_id:B.approval_id})),promo_discount:Zn.value,applied_promos:Pe.value.map(B=>({promo_id:B.id,promo_name:B.name,promo_type:B.type,discount_amount:B.applied_discount||0,applied_to_items:B.applied_to_items||[]})),total_amount:ms.value,note:Nn.value,kitchen_note:nn.value,order_date:new Date().toISOString().split("T")[0],order_time:new Date().toTimeString().split(" ")[0],order_type:le.value==="Eat_in"?"Eat In":le.value==="Delivery"?"Delivery":le.value==="Takeaway"?"Takeaway":"Collection",table_number:At.value?.name||null,payment_method:o,auto_print_kot:O,cash_received:r,change:_,...o==="Split"&&{payment_type:"split",cash_amount:r,card_amount:l},items:(F.value??[]).map(B=>{if(B.isDeal)return{product_id:B.dealId,title:B.title,quantity:B.qty,price:B.price,note:B.note??"",kitchen_note:nn.value??"",unit_price:B.unit_price,item_kitchen_note:B.item_kitchen_note??"",tax_percentage:0,tax_amount:0,variant_id:null,variant_name:null,addons:[],sale_discount_per_item:0,removed_ingredients:[],is_deal:!0,deal_id:B.dealId,menu_items:B.menu_items||[]};const me=G.value.find(be=>be.id===B.id);let Re=me;if(B.variant_id&&me?.variants){const be=me.variants.find(dt=>dt.id===B.variant_id);be&&(Re=be)}const ne=Re?Rt(Re,!!B.variant_id):0,ze=(B.removed_ingredients||[]).map(be=>{const dt=(B.ingredients||[]).find(Qt=>Qt.id===be||Qt.inventory_item_id===be);return{id:be,name:dt?dt.product_name||dt.name:"Unknown Ingredient"}});return{product_id:B.id,title:B.title,quantity:B.qty,price:B.price,note:B.note??"",kitchen_note:nn.value??"",unit_price:B.unit_price,item_kitchen_note:B.item_kitchen_note??"",tax_percentage:Ho(B),tax_amount:Gr(B),variant_id:B.variant_id||null,variant_name:B.variant_name||null,addons:B.addons||[],sale_discount_per_item:ne,removed_ingredients:ze||[],is_deal:!1}}),confirm_missing_ingredients:!0};console.log(" Sending order");const Z=await axios.post("/pos/order",W);if(console.log(" Order created successfully:",Z.data),Z.data.logout===!0){V.success(Z.data.message||"Order created successfully. Logging out..."),setTimeout(()=>{window.location.href=Z.data.redirect||"/login"},1e3),I&&I();return}el(),Mi(),Ri.value=!1,V.success(Z.data.message||"Order placed successfully!"),Ln.value={...Z.data.order,...W,items:W.items,payment_type:o==="Split"?"split":o.toLowerCase(),cash_amount:o==="Split"?r:null,card_amount:o==="Split"?l:null},console.log(" Last order data prepared:",Ln.value),O&&(fi.value=await Vo(),Fr(JSON.parse(JSON.stringify(Ln.value)))),Rr(JSON.parse(JSON.stringify(Ln.value))),Pe.value=[],ut.value=[],Pt.value=[],Pn()}catch(W){console.error(" Order submission error:",W),V.error(W.response?.data?.message||"Failed to place order")}finally{I&&I()}},qs=async()=>{if(console.log(" User confirmed missing ingredients"),Jn.value=!1,sn.value&&!sn.value.isDeal){const{itemIndex:o,newQty:r}=sn.value,l=F.value[o];l&&(l.outOfStock=!1,l.qty=r,l.price=l.unit_price*l.qty,l.resale_discount_per_item&&(l.total_resale_discount=l.resale_discount_per_item*l.qty),V.success("Quantity updated")),sn.value=null,Gt.value=[];return}if(sn.value&&sn.value.isDeal){const{itemIndex:o,newQty:r}=sn.value,l=F.value[o];l&&l.isDeal&&(l.qty=r,l.price=l.unit_price*l.qty,V.success("Deal quantity updated")),sn.value=null,Gt.value=[];return}if(di.value){const{deal:o,existingIndex:r,newQty:l}=di.value;if(r>=0)F.value[r].qty=l,F.value[r].price=F.value[r].unit_price*l,V.success("Deal quantity updated");else{const w=[];o.menu_items.forEach(I=>{I.ingredients&&I.ingredients.length>0&&w.push(...I.ingredients.map(W=>({...W,menu_item_id:I.id,menu_item_name:I.name})))});const O={id:o.id,title:o.title,price:Xi.value,unit_price:parseFloat(o.price),img:o.img,qty:1,stock:999999,ingredients:w,isDeal:!0,dealId:o.id,menu_items:o.menu_items.map(I=>({id:I.id,name:I.name,price:I.price,ingredients:(I.ingredients||[]).map(W=>({inventory_item_id:W.id,inventory_item_id:W.inventory_item_id,product_name:W.product_name||W.name,quantity:W.quantity||W.qty||"1.00",inventory_stock:W.inventory_stock||W.stock||0,unit:W.unit||"unit",category_id:W.category_id,supplier_id:W.supplier_id})),stock:Pi(I.ingredients||[])})),resale_discount_per_item:0,total_resale_discount:0};F.value.push(O),V.success(`${o.title} added to cart!`)}di.value=null,Gt.value=[];return}if(Fs.value){const{product:o,variantId:r,variantName:l,variantPrice:_,selectedAddons:w,addonsPrice:O,resaleDiscountPerItem:I,existingIndex:W,newQty:Z}=Fs.value,B=_+O;if(W>=0)F.value[W].qty=Z,F.value[W].price=F.value[W].unit_price*Z,F.value[W].total_resale_discount=I*Z,F.value[W].outOfStock=!1,V.success("Quantity updated");else{const me=ts(o,r),Re=Ni(o);F.value.push({id:o.id,title:o.title,img:o.img,price:B,unit_price:Number(B),qty:1,note:"",stock:Re,ingredients:me,variant_id:r,variant_name:l,addons:w,outOfStock:!1,resale_discount_per_item:I,total_resale_discount:I}),V.success("Item added to cart")}Fs.value=null,Gt.value=[];return}if(Fi.value){_t.value=Fi.value.currentQty+1,V.success("Quantity increased"),Fi.value=null,Gt.value=[];return}};ur(async()=>{$o();const o=String(Ms.value).padStart(3,"0");if(Ge.value=`Walk In-${o}`,window.bootstrap){document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(_=>new window.bootstrap.Tooltip(_));const l=document.getElementById("chooseItem");l&&new window.bootstrap.Modal(l,{backdrop:"static"})}v.value="",y.value=Date.now(),await gu(),setTimeout(()=>{T.value=!0;const l=document.getElementById(x);l&&(l.value="",v.value="")},100),he(),te(),kr();const r=document.getElementById("menuFilterModal");r&&r.addEventListener("hidden.bs.modal",()=>{Nr.value||$r(),Nr.value=!1})});const jt=Nb();function Ur(){const o=jt.props.flash?.success,r=jt.props.flash?.error;o&&V.success(o,{autoClose:4e3}),r&&V.error(r,{autoClose:6e3})}ur(()=>Ur()),ur(()=>{jt.props.flash?.success;const o=jt.props.flash?.error;o&&V.error(o);const r=jt.props.flash?.print_payload;r&&setTimeout(()=>Rr(r),250),r&&setTimeout(()=>Fr(r),250)}),Ai(()=>jt.props.flash,()=>Ur(),{deep:!0});const qi=Ce(()=>jt.props.onboarding?.optional_features?.enable_inventory_tracking??!0),Wo=({id:o,status:r,message:l})=>{fi.value=fi.value.map(_=>_.id===o?{..._,status:r}:_)},Vr=U(!1),fi=U([]),Uo=U(!1),Bi=U(!1),Hr=U([]),zr=U(!1),Vo=async()=>{Bi.value=!0,Hr.value=[],zr.value=!0;try{const o=await axios.get("/api/pos/orders/today");Hr.value=o.data.orders}catch(o){console.error("Failed to fetch POS orders:",o),V.error(o.response?.data?.message||"Failed to fetch POS orders")}finally{zr.value=!1}},Wi=U(!1),Ui=U(!1),Kr=U(!0),Yr=U(!0),Bs=U([]),Vi=U([]),Pe=U([]),ul=o=>{if(Pe.value=o,!o||o.length===0){V.warning("No promos selected.");return}const r=o.reduce((_,w)=>_+parseFloat(w.applied_discount||0),0);if(r<=0){V.warning("Selected promos don't provide any discount for current cart items."),Pe.value=[];return}const l=new Set(o.flatMap(_=>_.applied_to_items||[])).size;V.success(`${o.length} promo(s) applied! Applied to ${l} item(s). You saved ${n(r)}`),Wi.value=!1},cl=async()=>{Kr.value=!0,Wi.value=!0;try{const o=await axios.get("/api/promos/current");o.data?.success?Bs.value=o.data.data||[]:(console.warn("Failed to fetch promos:",o.data),Bs.value=[],V.warning("No promos available at the moment"))}catch(o){console.error("Error fetching current meal promos:",o),Bs.value=[],V.error("Failed to load promotions")}finally{Kr.value=!1}},dl=async()=>{Yr.value=!0,Ui.value=!0;try{const o=await axios.get("/api/discounts/all");o.data?.success?Vi.value=o.data.data||[]:(console.warn("Failed to fetch discounts:",o.data),Vi.value=[],V.warning("No discounts available at the moment"))}catch(o){console.error("Error fetching current meal discounts:",o),Vi.value=[],V.error("Failed to load discounts")}finally{Yr.value=!1}},qe=o=>!Pe.value||Pe.value.length===0?!1:Pe.value.some(r=>!r.menu_items||r.menu_items.length===0?!0:r.menu_items.map(_=>_.id).includes(o.id)),Fe=o=>{Ln.value=o,Mr.value=!0,Bi.value=!1},Zn=Ce(()=>!Pe.value||Pe.value.length===0?0:Pe.value.reduce((o,r)=>{const l=parseFloat(r.discount_amount??0)||0;if(r.applied_discount!==void 0)return o+parseFloat(r.applied_discount);const _=fl(r);if(r.min_purchase&&_<parseFloat(r.min_purchase))return o;if(r.type==="flat")return o+l;if(r.type==="percent"){const w=_*l/100,O=parseFloat(r.max_discount??0)||0;return O>0&&w>O?o+O:o+w}return o},0)),fl=o=>{if(!o.menu_items||o.menu_items.length===0)return F.value.reduce((l,_)=>l+_.unit_price*_.qty,0);const r=o.menu_items.map(l=>l.id);return F.value.filter(l=>r.includes(l.id)).reduce((l,_)=>l+_.unit_price*_.qty,0)},pl=Ce(()=>!Pe.value||Pe.value.length===0?[]:Pe.value.map(o=>({promo_id:o.id,promo_name:o.name,promo_type:o.type,discount_amount:o.applied_discount||0,applied_to_items:o.applied_to_items||[]}))),es=Ce(()=>{let o=0;const r=parseFloat(jt.props.onboarding.tax_and_vat.tax_rate)||0;return F.value.forEach(l=>{const _=G.value.find(w=>w.id===l.id);if(_&&_.is_taxable){const O=l.unit_price*l.qty*r/100;o+=O}}),o}),vs=Ce(()=>F.value.reduce((o,r)=>o+(r.total_resale_discount||0),0)),ms=Ce(()=>{const o=$t.value+es.value+vn.value+jn.value-vs.value-Zn.value-_s.value;return Math.max(0,o)}),Gr=o=>{const r=G.value.find(l=>l.id===o.id);return r&&r.is_taxable&&r.tax_percentage?o.unit_price*o.qty*parseFloat(r.tax_percentage)/100:0},Ho=o=>{const r=G.value.find(l=>l.id===o.id);return r&&r.is_taxable&&r.tax_percentage?parseFloat(r.tax_percentage):0},ct=o=>{const r=_e(o),l=r?r.id:null,w=Se(o).map(I=>I.id).sort().join("-"),O=F.value.find(I=>{const W=(I.addons||[]).map(Z=>Z.id).sort().join("-");return I.id===o.id&&I.variant_id===l&&W===w});return O?O.qty:0},jr=async o=>{const r=_e(o),l=r?r.id:null,_=Se(o),w=_.map(be=>be.id).sort().join("-"),O=F.value.findIndex(be=>{const dt=(be.addons||[]).map(Qt=>Qt.id).sort().join("-");return be.id===o.id&&be.variant_id===l&&dt===w});let I=1,W=null;const Z=ts(o,l);O>=0&&(W=F.value[O],I=W.qty+1);const B=$i({id:o.id,title:o.title,variant_id:l,variant_name:r?r.name:null,ingredients:Z,removed_ingredients:W?.removed_ingredients||[],addons:_},I);if(!B.canAdd){console.log(" Missing ingredients for card increment (client-side)");const be=parseFloat(r?r.price:o.price),dt=Ae(o),Qt=r?Rt(r,!0):Rt(o,!1);Fs.value={product:o,variant:r,variantId:l,variantName:r?r.name:null,variantPrice:be,selectedAddons:_,addonsPrice:dt,resaleDiscountPerItem:Qt,existingIndex:O,newQty:I},Gt.value=B.missing,Jn.value=!0,V.warning("Some ingredients are missing. Confirm to proceed.");return}const me=parseFloat(r?r.price:o.price),Re=Ae(o),ne=me+Re,ze=r?Rt(r,!0):Rt(o,!1);if(O>=0)F.value[O].qty++,F.value[O].price=F.value[O].unit_price*F.value[O].qty,F.value[O].total_resale_discount=ze*F.value[O].qty,F.value[O].outOfStock=!1;else{const be=Ni(o);F.value.push({id:o.id,title:o.title,img:o.img,price:ne,unit_price:Number(ne),qty:1,note:"",stock:be,ingredients:Z,variant_id:l,variant_name:r?r.name:null,addons:_,outOfStock:!1,resale_discount_per_item:ze,total_resale_discount:ze})}},gs=o=>{const r=_e(o),l=r?r.id:null,w=Se(o).map(W=>W.id).sort().join("-"),O=F.value.findIndex(W=>{const Z=(W.addons||[]).map(B=>B.id).sort().join("-");return W.id===o.id&&W.variant_id===l&&Z===w});if(O<0)return;const I=F.value[O];I.qty<=1?F.value.splice(O,1):(I.qty--,I.price=I.unit_price*I.qty,I.outOfStock=!1)},ts=(o,r)=>!r||!o.variants?.length?o.ingredients??[]:o.variants.find(_=>_.id===r)?.ingredients??o.ingredients??[],Xe=U(null),tt=U(null);let bs=null;const zo=(o,r)=>{Xe.value=JSON.parse(JSON.stringify(o)),tt.value=r;const l=G.value.find(_=>_.id===o.id);if(l&&l.addon_groups&&l.addon_groups.length>0){const _=new Map;o.addons&&o.addons.forEach(O=>{_.set(O.id,{quantity:O.quantity||1,selected:!0})});const w=[];l.addon_groups.forEach(O=>{O.addons&&O.addons.length>0&&O.addons.forEach(I=>{const W=_.get(I.id);w.push({id:I.id,name:I.name,price:parseFloat(I.price||0),group_id:O.group_id,group_name:O.group_name,quantity:W?.quantity||1,selected:W?.selected||!1})})}),Xe.value.addons=w}else Xe.value.addons=[];if(!bs){const _=document.getElementById("addonManagementModal");_&&(bs=new bootstrap.Modal(_))}bs&&bs.show()},Ko=o=>{o.selected=!o.selected,o.selected||(o.quantity=1)},Yo=o=>{o.selected&&(o.quantity=(o.quantity||1)+1)},Go=o=>{o.selected&&(o.quantity||1)>1&&(o.quantity-=1)},Qr=o=>o.addons?o.addons.reduce((r,l)=>l.selected!==!1?r+parseFloat(l.price)*(l.quantity||1):r,0):0,Mt=()=>{if(tt.value===null)return;const o=Xe.value.addons.filter(O=>O.selected!==!1),r=Xe.value.variant_id?G.value.find(O=>O.id===Xe.value.id)?.variants?.find(O=>O.id===Xe.value.variant_id):null,l=parseFloat(r?r.price:Xe.value.unit_price),_=o.reduce((O,I)=>O+parseFloat(I.price)*(I.quantity||1),0),w=l+_;F.value[tt.value].addons=o,F.value[tt.value].unit_price=w,F.value[tt.value].price=w*F.value[tt.value].qty,V.success("Addons updated successfully!"),bs&&bs.hide(),Xe.value=null,tt.value=null},hl=o=>!o.addons||o.addons.length===0?"":o.addons.map(r=>r.name).join(", "),kt=()=>{let o=0;return lt.value&&typeof lt.value=="object"&&Object.values(lt.value).forEach(r=>{Array.isArray(r)&&(o+=r.length)}),o},pi=Ce(()=>jt.props.current_user),Xr=Ce(()=>i.value.filter(o=>o.menu_items_count&&o.menu_items_count>0));Ce(()=>pi.value?.roles?.includes("Cashier")||pi.value?.roles?.includes("Admin")||pi.value?.roles?.includes("Manager"));const mn=U(`terminal-${pi.value?.id}`),{broadcastCartUpdate:Hi,broadcastUIUpdate:Jr}=Kw(mn.value),We=So.debounce(o=>{console.log(" Broadcasting cart:",o.items.length,"items"),Hi(o)},300),ns=So.debounce(o=>{console.log(" Broadcasting UI"),Jr(o)},100);Ai(()=>({items:F.value.map(o=>({id:o.id,title:o.name||o.title,img:o.image_url||o.img||"/assets/img/default.png",price:parseFloat(o.total||o.price||0),qty:parseInt(o.qty||1),variant_name:o.variant?.name||null,addons:(o.addons||[]).map(r=>({id:r.id,name:r.name,price:parseFloat(r.price||0)})),resale_discount_per_item:parseFloat(o.resale_discount_per_item||0)})),customer:Ge.value||"Walk In",phone_number:ht.value||"",delivery_location:xt.value||"",orderType:le.value||"Dine In",table:At.value?{id:At.value.id,name:At.value.name}:null,subtotal:parseFloat($t.value||0),tax:parseFloat(es.value||0),serviceCharges:parseFloat(jn.value||0),deliveryCharges:parseFloat(vn.value||0),saleDiscount:parseFloat(vs.value||0),promoDiscount:parseFloat(Zn.value||0),total:parseFloat(ms.value||0),note:Nn.value||"",appliedPromos:(Pe.value||[]).map(o=>({id:o.id,name:o.name,discount:parseFloat(o.discount||0),applied_to_items:o.applied_to_items||[]}))}),o=>{console.log(" Cart changed:",o.items.length,"items, Total:",o.total),We(o)},{deep:!0,immediate:!0}),Ai(()=>({showCategories:Ot.value??!0,activeCat:Kn.value||null,menuCategories:(i.value||[]).map(o=>({id:o.id,name:o.name,menu_items_count:o.menu_items_count||0})),menuItems:(G.value||[]).map(o=>({id:o.id,name:o.name,price:parseFloat(o.price||0),image_url:o.image_url||null,description:o.description||"",label_color:o.label_color||"#1B1670",category:o.category?{id:o.category.id,name:o.category.name}:null,variants:(o.variants||[]).map(r=>({id:r.id,name:r.name,price:parseFloat(r.price||0),is_saleable:r.is_saleable??!1,resale_type:r.resale_type||null,resale_value:parseFloat(r.resale_value||0)})),addon_groups:(o.addon_groups||[]).map(r=>({id:r.id,name:r.name,addons:(r.addons||[]).map(l=>({id:l.id,name:l.name,price:parseFloat(l.price||0)}))})),is_saleable:o.is_saleable??!1,resale_type:o.resale_type||null,resale_value:parseFloat(o.resale_value||0)})),searchQuery:et.value||"",selectedCardVariant:xe.value||{},selectedCardAddons:ae.value||{}}),o=>{console.log(" UI changed - Categories:",o.menuCategories.length,"Items:",o.menuItems.length),ns(o)},{deep:!0,immediate:!0});const Zr=()=>{const o=route("customer-display.index",{terminal:mn.value});window.open(o,"_blank","width=1920,height=1080")},Rt=(o,r=!1)=>{if(!o)return 0;const l=o.is_saleable??o?.menu_item?.is_saleable,_=o.resale_type??o?.menu_item?.resale_type,w=o.resale_value??o?.menu_item?.resale_value,O=parseFloat(o.price||0);return!l||!_||!w?0:_==="flat"?parseFloat(w):_==="percentage"?O*parseFloat(w)/100:0},Mn=(o,r=!1)=>{const l=parseFloat(o.price||0),_=Rt(o,r);return Math.max(0,l-_)},ys=(o,r=!1)=>{if(!o)return null;const l=o.is_saleable??o?.menu_item?.is_saleable,_=o.resale_type??o?.menu_item?.resale_type,w=o.resale_value??o?.menu_item?.resale_value,O=Rt(o,r);return!l||!_||!w||O<=0?null:{type:_,value:w,amount:O,display:_==="flat"?`Sale ${n(O)}`:`${w}% OFF`}},_l=o=>{const r=_e(o);let l;r?l=Mn(r,!0):l=Mn(o,!1);const _=Ae(o);return l+_},Ws=o=>{if(!o.variants||o.variants.length===0){const w=Rt(o,!1)>0;return{min:Mn(o,!1),max:Mn(o,!1),minOriginal:w?parseFloat(o.price||0):null,maxOriginal:w?parseFloat(o.price||0):null}}const r=o.variants.map(w=>Mn(w,!0)),l=o.variants.map(w=>parseFloat(w.price||0)),_=o.variants.some(w=>Rt(w,!0)>0);return{min:Math.min(...r),max:Math.max(...r),minOriginal:_?Math.min(...l):null,maxOriginal:_?Math.max(...l):null}},jo=()=>{if(!oe.value)return 0;const o=Ye();return o?Mn(o,!0):Mn(oe.value,!1)},zi=()=>jo()+ps(),gn=U([]),Qo=U(!1),Xo=async()=>{Qo.value=!0;try{const o=await axios.get("/api/deals",{params:{status:1,per_page:100}});console.log("Fetched deals:",o.data.data),gn.value=o.data.data.map(r=>({id:r.id,title:r.name,price:r.price,img:r.image_url||"/assets/img/product/product29.jpg",description:r.description,menu_items:r.menu_items||[],status:r.status,category_id:r.category_id,category:r.category}))}catch(o){console.error("Error fetching deals:",o),V.error("Failed to load deals")}finally{Qo.value=!1}},eo=o=>{const r=F.value.find(l=>l.isDeal&&l.dealId===(o.dealId||o.id));return r?r.qty:0},to=o=>{const l=+(i.value.find(w=>w.id===o)?.menu_items_count||0),_=Us(o);return l+_},Us=o=>!gn.value||gn.value.length===0?0:gn.value.filter(r=>r.category_id===o).length,no=(o,r)=>{if(!qi.value)return{canAdd:!0,missing:[]};const l=[],_={};return F.value.forEach(w=>{let O=[];w.isDeal?w.menu_items?.forEach(I=>{O.push(...I.ingredients||[])}):O=w.ingredients||[],O.forEach(I=>{const W=I.inventory_item_id||I.id,Z=Number(I.inventory_stock??I.stock??0),B=Number(I.quantity??I.qty??1)*w.qty;_[W]||(_[W]={totalStock:Z,used:0,name:I.product_name||I.name,unit:I.unit||"unit"}),_[W].used+=B})}),o.menu_items.forEach(w=>{const O=w.ingredients||[];O.length!==0&&O.forEach(I=>{const W=I.inventory_item_id||I.id,Z=Number(I.quantity??I.qty??1)*r;let me=Number(I.inventory_stock??I.stock??0);_[W]&&(me=_[W].totalStock-_[W].used);const Re=F.value.find(ne=>ne.isDeal&&ne.dealId===o.id);if(Re){const ne=Number(I.quantity??I.qty??1)*Re.qty;me+=ne}me<Z&&l.push({deal_id:o.id,deal_title:o.title,menu_item_id:w.id,menu_item_name:w.name,inventory_item_id:W,inventory_item_name:I.product_name||I.name,required_quantity:Z,available_quantity:Math.max(0,me),shortage_quantity:Z-me,unit:I.unit||"unit",order_quantity:r})})}),{canAdd:l.length===0,missing:l}},vl=async o=>{const r=F.value.findIndex(w=>w.isDeal&&w.dealId===o.id),l=r>=0?F.value[r].qty+1:1,_=no(o,l);if(!_.canAdd){console.log(" Missing ingredients for deal (client-side)"),di.value={deal:o,existingIndex:r,newQty:l},Gt.value=_.missing,Jn.value=!0,V.warning("Some ingredients are missing. Confirm to proceed.");return}if(r>=0)F.value[r].qty++,F.value[r].price=F.value[r].unit_price*F.value[r].qty,V.success("Deal quantity updated");else{const O=[];o.menu_items.forEach(W=>{W.ingredients&&W.ingredients.length>0&&O.push(...W.ingredients.map(Z=>({...Z,menu_item_id:W.id,menu_item_name:W.name})))});const I={id:o.id,title:o.title,price:parseFloat(o.price),unit_price:parseFloat(o.price),img:o.img,qty:1,stock:999999,ingredients:O,isDeal:!0,dealId:o.id,menu_items:o.menu_items.map(W=>({id:W.id,name:W.name,price:W.price,ingredients:W.ingredients||[],stock:Pi(W.ingredients||[])})),resale_discount_per_item:0,total_resale_discount:0};F.value.push(I),V.success(`${o.title} added to cart!`)}},so=o=>{const r=F.value.findIndex(_=>_.isDeal&&_.dealId===o.id);if(r<0)return;const l=F.value[r];l.qty<=1?(F.value.splice(r,1),V.info("Deal removed from cart")):(l.qty--,l.price=l.unit_price*l.qty,V.success("Deal quantity decreased"))};ur(()=>{Xo(),Ee()});const Ne=U(null),Be=U(0),nt=U(1),je=U({}),Tt=U({}),bn=U({}),Rn=U([]);let hi=null;const vt=Ce(()=>!Ne.value||!Ne.value.menu_items?null:Ne.value.menu_items[Be.value]),Ki=Ce(()=>ji().length>0),Yi=Ce(()=>vt.value?.addon_groups&&vt.value.addon_groups.length>0),_i=Ce(()=>{const o=[];return Ki.value&&o.push({id:"ingredients",name:"Ingredients"}),Yi.value&&o.push({id:"addons",name:"Add-ons"}),o.push({id:"review",name:"Review"}),o}),Gi=Ce(()=>_i.value.length),Vs=Ce(()=>{if(nt.value===1)return"0%";const o=_i.value.length,r=(nt.value-1)/(o-1);return`calc(${r*100}% - ${14-r*28}px)`}),ml=Ce(()=>Be.value===Ne.value?.menu_items?.length-1);Ce(()=>Ne.value?.menu_items?.length?Rn.value.length/Ne.value.menu_items.length*100:0);const ji=()=>vt.value?vt.value.ingredients||[]:[],vi=o=>(je.value[Be.value]||[]).includes(o),Jo=o=>{const r=Be.value;je.value[r]||(je.value[r]=[]);const l=je.value[r],_=l.indexOf(o);_>-1?(l.splice(_,1),V.info("Ingredient added back")):(l.push(o),V.info("Ingredient removed"))},ss=()=>{const o=ji(),r=je.value[Be.value]||[];return o.filter(l=>!r.includes(l.id)).length},Qi=(o,r)=>{const l=Be.value;Tt.value[l]||(Tt.value[l]={});const w=vt.value?.addon_groups?.find(O=>O.group_id===o);if(w&&w.max_select>0&&r.length>w.max_select){V.warning(`You can only select up to ${w.max_select} ${w.group_name}`),Tt.value[l][o]=r.slice(0,w.max_select);return}Tt.value[l][o]=r},gl=()=>{const o=Be.value,r=Tt.value[o];if(!r)return 0;let l=0;return Object.values(r).forEach(_=>{l+=_.length}),l},bl=()=>{const o=Be.value,r=Tt.value[o];if(!r)return"";const l=[];return Object.values(r).forEach(_=>{_.forEach(w=>{l.push(`${w.name} (+${n(w.price)})`)})}),l.join(", ")},Zo=()=>{const o=Be.value,r=je.value[o]||[];if(r.length===0)return"";const l=ji(),_=r.map(w=>{const O=l.find(I=>I.id===w);return O?O.product_name||O.name:null}).filter(Boolean);return _.length===0?"":`No ${_.join(", ")}`},Hs=o=>o<nt.value?"bg-success text-white":o===nt.value?"bg-primary text-white":"bg-light text-muted border",rn=()=>{let o=nt.value+1;for(;o<=Gi.value;){const r=_i.value[o-1];if(r.id==="ingredients"&&!Ki.value){o++;continue}if(r.id==="addons"&&!Yi.value){o++;continue}break}o<=Gi.value&&(nt.value=o)},ea=()=>{let o=nt.value-1;for(;o>=1;){const r=_i.value[o-1];if(r.id==="ingredients"&&!Ki.value){o--;continue}if(r.id==="addons"&&!Yi.value){o--;continue}break}o>=1&&(nt.value=o)},yl=()=>{Rn.value.includes(Be.value)||Rn.value.push(Be.value),Be.value++,nt.value=1,V.success("Item customized! Configure next item.")},El=async()=>{if(!Ne.value)return;Rn.value.includes(Be.value)||Rn.value.push(Be.value);const o=Ne.value.menu_items.map((O,I)=>{const W=je.value[I]||[],Z=Tt.value[I]||{},B=bn.value[I]||"",me=[];Object.values(Z).forEach(ne=>{ne.forEach(ze=>{me.push({id:ze.id,name:ze.name,price:parseFloat(ze.price||0)})})});const Re=(O.ingredients||[]).filter(ne=>!W.includes(ne.id)).map(ne=>({id:ne.id,inventory_item_id:ne.inventory_item_id||ne.id,product_name:ne.product_name||ne.name,quantity:ne.quantity||ne.qty||"1.00",stock:ne.stock||0,unit:ne.unit||"unit"}));return{id:O.id,name:O.name,price:O.price,ingredients:Re,addons:me,kitchen_note:B,removed_ingredients:W,stock:Pi(Re)}}),r=F.value.findIndex(O=>O.isDeal&&O.dealId===Ne.value.id),l=999999,_=[];if(o.forEach(O=>{O.ingredients&&O.ingredients.length>0&&_.push(...O.ingredients.map(I=>({...I,menu_item_id:O.id,menu_item_name:O.name})))}),r>=0)F.value[r].qty++,F.value[r].price=F.value[r].unit_price*F.value[r].qty,V.success("Deal quantity updated!");else{const O={id:Ne.value.id,title:Ne.value.title,price:Xi.value,unit_price:parseFloat(Ne.value.price),img:Ne.value.img,qty:1,stock:l,ingredients:_,isDeal:!0,dealId:Ne.value.id,menu_items:o,resale_discount_per_item:0,total_resale_discount:0};F.value.push(O),V.success(`${Ne.value.title} added to cart!`)}const w=bootstrap.Modal.getInstance(document.getElementById("customizeDealModal"));w&&w.hide(),b()},ta=Ce(()=>{if(!vt.value)return 0;const o=parseFloat(vt.value.price||0),r=Be.value,l=Tt.value[r];if(!l)return o;let _=0;return Object.values(l).forEach(w=>{w.forEach(O=>{_+=parseFloat(O.price||0)})}),o+_}),Xi=Ce(()=>{if(!Ne.value)return 0;const o=parseFloat(Ne.value.price||0);let r=0;return Object.values(Tt.value).forEach(l=>{Object.values(l).forEach(_=>{_.forEach(w=>{r+=parseFloat(w.price||0)})})}),o+r}),Ji=Ce(()=>{const o=Be.value,r=Tt.value[o];if(!r)return 0;let l=0;return Object.values(r).forEach(_=>{_.forEach(w=>{l+=parseFloat(w.price||0)})}),l}),zs=o=>{if(Ne.value=o,Be.value=0,nt.value=1,je.value={},Tt.value={},bn.value={},Rn.value=[],!hi){const r=document.getElementById("customizeDealModal");r&&(hi=new bootstrap.Modal(r,{backdrop:"static"}))}hi&&hi.show()},b=()=>{Ne.value=null,Be.value=0,nt.value=1,je.value={},Tt.value={},bn.value={},Rn.value=[]},D=U(!1),A=U([]),K=U(!1),ue=async()=>{if(F.value.length===0){V.error("No items in cart to hold");return}try{const o={customer_name:Ge.value,phone_number:ht.value,delivery_location:xt.value,order_type:le.value,table_number:At.value?.name||null,sub_total:$t.value,tax:es.value,service_charges:jn.value,delivery_charges:vn.value,sale_discount:vs.value,promo_discount:Zn.value,approved_discounts:_s.value,total_amount:ms.value,note:Nn.value,kitchen_note:nn.value,order_items:F.value.map(l=>({product_id:l.id,title:l.title,quantity:l.qty,price:l.price,unit_price:l.unit_price,note:l.note||"",item_kitchen_note:l.item_kitchen_note||"",variant_id:l.variant_id||null,variant_name:l.variant_name||null,addons:l.addons||[],ingredients:l.ingredients||[],removed_ingredients:l.removed_ingredients||[],sale_discount_per_item:l.resale_discount_per_item||0,total_resale_discount:l.total_resale_discount||0,isDeal:l.isDeal||!1,dealId:l.dealId||null,menu_items:l.menu_items||[]})),applied_promos:Pe.value.map(l=>({promo_id:l.id,promo_name:l.name,promo_type:l.type,discount_amount:l.applied_discount||0,applied_to_items:l.applied_to_items||[]})),approved_discount_details:ut.value.map(l=>({discount_id:l.id,discount_name:l.name,discount_percentage:l.percentage,discount_amount:Xn(l.percentage),approval_id:l.approval_id})),selected_discounts:ut.value,terminal_id:mn.value};(await axios.post("/pending-orders",o)).data.success&&(V.success("Order held successfully!"),Mi(),await Ee())}catch(o){V.error(o.response?.data?.message||"Failed to hold order")}},Ee=async()=>{K.value=!0;try{const o=await axios.get("/pending-orders");o.data.success?A.value=o.data.data:A.value=[]}catch(o){console.error("Error fetching pending orders:",o),V.error("Failed to load pending orders"),A.value=[]}finally{K.value=!1}},st=async()=>{D.value=!0,await Ee()},Me=async o=>{try{if(Ge.value=o.customer_name||Lr(),ht.value=o.phone_number||"",xt.value=o.delivery_location||"",le.value=o.order_type,Nn.value=o.note||"",nn.value=o.kitchen_note||"",o.table_number){const r=hs.value.table_details?.find(l=>l.name===o.table_number);At.value=r||null}F.value=o.order_items.map(r=>({id:r.product_id,title:r.title,qty:r.quantity,price:r.price,unit_price:r.unit_price,note:r.note||"",item_kitchen_note:r.item_kitchen_note||"",img:r.img||"/assets/img/default.png",variant_id:r.variant_id||null,variant_name:r.variant_name||null,addons:r.addons||[],ingredients:r.ingredients||[],removed_ingredients:r.removed_ingredients||[],resale_discount_per_item:r.sale_discount_per_item||0,total_resale_discount:r.total_resale_discount||0,stock:r.stock||999999,isDeal:r.isDeal||!1,dealId:r.dealId||null,menu_items:r.menu_items||[]})),Pe.value=o.applied_promos||[],ut.value=o.selected_discounts||[],await axios.delete(`/pending-orders/${o.id}`),V.success("Order resumed successfully!"),D.value=!1,await Ee()}catch{V.error("Failed to resume order")}},io=async o=>{try{let r="",l={};o.type==="unpaid"?(r=`/pending-orders/${o.id}`,l={order_type:"unpaid"}):(r=`/pending-orders/${o.id}`,l={order_type:"held"}),await axios.delete(r,{data:l}),V.success("Order rejected successfully"),await Ee()}catch(r){console.error("Error rejecting order:",r),V.error("Failed to reject order")}},ro=(o,r)=>lt.value[o]?.some(l=>l.id===r),Ft=(o,r)=>lt.value[o]?.find(_=>_.id===r)?.quantity||1,Zi=(o,r)=>{lt.value[o]||(lt.value[o]=[]);const l=lt.value[o].findIndex(_=>_.id===r.id);if(l>-1)lt.value[o].splice(l,1);else{const _=oe.value.addon_groups.find(w=>w.group_id===o);if(_&&_.max_select>0&&lt.value[o].length>=_.max_select){V.warning(`You can only select up to ${_.max_select} ${_.group_name}`);return}lt.value[o].push({id:r.id,name:r.name,price:parseFloat(r.price),group_id:o,quantity:1})}},wl=(o,r)=>{const l=lt.value[o]?.find(_=>_.id===r);l&&l.quantity++},Ks=(o,r)=>{const l=lt.value[o]?.find(_=>_.id===r);l&&l.quantity>1&&l.quantity--},Es=U(!1),He=U(null),De=async()=>{if(F.value.length===0){V.error("Please add at least one item to the cart.");return}if(le.value==="Eat_in"&&!At.value){V.error("Please select a table number for Dine In orders.");return}if((le.value==="Delivery"||le.value==="Takeaway")&&!Ge.value){V.error("Customer name is required.");return}if(le.value==="Delivery"&&!ht.value){V.error("Phone number is required for delivery.");return}if(le.value==="Delivery"&&!xt.value){V.error("Delivery location is required.");return}try{const o={customer_name:Ge.value,phone_number:ht.value,delivery_location:xt.value,sub_total:$t.value,tax:es.value,service_charges:jn.value,delivery_charges:vn.value,sales_discount:vs.value,approved_discounts:_s.value,approved_discount_details:ut.value.map(l=>({discount_id:l.id,discount_name:l.name,discount_percentage:l.percentage,discount_amount:Xn(l.percentage),approval_id:l.approval_id})),promo_discount:Zn.value,applied_promos:Pe.value.map(l=>({promo_id:l.id,promo_name:l.name,promo_type:l.type,discount_amount:l.applied_discount||0,applied_to_items:l.applied_to_items||[]})),total_amount:ms.value,note:Nn.value,kitchen_note:nn.value,order_date:new Date().toISOString().split("T")[0],order_time:new Date().toTimeString().split(" ")[0],order_type:le.value==="Eat_in"?"Eat In":le.value,table_number:At.value?.name||null,items:F.value.map(l=>({product_id:l.id,title:l.title,quantity:l.qty,price:l.price,note:l.note??"",kitchen_note:nn.value??"",unit_price:l.unit_price,item_kitchen_note:l.item_kitchen_note??"",tax_percentage:Ho(l),tax_amount:Gr(l),variant_id:l.variant_id||null,variant_name:l.variant_name||null,addons:l.addons||[],sale_discount_per_item:l.resale_discount_per_item||0,removed_ingredients:l.removed_ingredients||[],is_deal:l.isDeal||!1,deal_id:l.dealId||null,menu_items:l.menu_items||[]})),confirm_missing_ingredients:!0};(await axios.post("/pos/order-without-payment",o)).data.success&&(V.success("Order placed successfully! Payment pending."),Mi(),await Ee())}catch(o){console.error("Error placing order:",o),V.error(o.response?.data?.message||"Failed to place order")}},xl=o=>{He.value=o,$n.value=parseFloat(o.total_amount).toFixed(2),Es.value=!0},na=async({paymentMethod:o,cashReceived:r,cardAmount:l,changeAmount:_,done:w})=>{try{const O={payment_method:o,cash_received:r,payment_type:o==="Split"?"split":o.toLowerCase(),cash_amount:o==="Split"?r:null,card_amount:o==="Split"?l:null},I=await axios.post(`/pos/orders/${He.value.pos_order_id}/complete-payment`,O);I.data.success&&(V.success("Payment completed successfully!"),Rr(JSON.parse(JSON.stringify(I.data.order))),Es.value=!1,He.value=null,await Ee())}catch(O){console.error("Payment error:",O),V.error(O.response?.data?.message||"Failed to complete payment")}finally{w&&w()}};return(o,r)=>(S(),k($e,null,[Ut(ce($b),{title:"Sale"}),Ut(Pb,null,{default:bu(()=>[c("div",dx,[c("div",fx,[c("div",px,[c("div",{class:Vt(Ot.value?"col-md-12":"col-lg-8")},[Ot.value?(S(),k("div",hx,[c("div",_x,[r[30]||(r[30]=c("h4",{class:"mb-0"},"Categories",-1)),c("button",{onClick:Zr,class:"btn btn-primary d-flex align-items-center gap-2",type:"button"},[...r[28]||(r[28]=[c("i",{class:"bi bi-tv"},null,-1),c("span",null,"Customer View",-1)])]),c("div",vx,[r[29]||(r[29]=c("input",{type:"email",name:"email",autocomplete:"email",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px"},tabindex:"-1","aria-hidden":"true"},null,-1)),T.value?ft((S(),k("input",{id:x,"onUpdate:modelValue":r[0]||(r[0]=l=>v.value=l),key:y.value,type:"search",class:"form-control form-control-sm",placeholder:"Search categories...",autocomplete:"new-password",name:x,role:"presentation",style:{"border-radius":"8px",padding:"8px 12px"}})),[[as,v.value]]):(S(),k("input",mx))])]),r[33]||(r[33]=c("hr",null,null,-1)),f.value?(S(),k("div",gx,[...r[31]||(r[31]=[c("div",{class:"spinner-border",role:"status",style:{color:"#1B1670",width:"3rem",height:"3rem","border-width":"0.3em"}},null,-1),c("div",{class:"mt-2 fw-semibold text-muted"},"Loading...",-1)])])):(S(),k($e,{key:1},[(S(!0),k($e,null,ot(Y.value,l=>(S(),k("div",{key:l.id,class:"col-6 col-md-4 col-lg-4 category-cards"},[c("div",{class:"cat-card",onClick:_=>Ir(l)},[c("div",yx,[c("span",Ex,[l.image_url?(S(),k("img",{key:0,src:l.image_url,alt:"Category Image",class:"cat-image"},null,8,wx)):(S(),k("span",xx,""))])]),c("div",Ax,N(l.name),1),c("div",Cx,[fe(N(to(l.id))+" Items ",1),Us(l.id)>0?(S(),k("span",Tx," ("+N(Us(l.id))+" Deal"+N(Us(l.id)>1?"s":"")+") ",1)):Q("",!0)])],8,bx)]))),128)),!f.value&&Y.value.length===0?(S(),k("div",Sx,[...r[32]||(r[32]=[c("div",{class:"alert alert-light border text-center rounded-4"}," No categories found ",-1)])])):Q("",!0)],64))])):(S(),k("div",Ix,[c("div",Ox,[c("button",{class:"btn btn-primary rounded-pill shadow-sm px-3",onClick:r[1]||(r[1]=l=>Or())},[...r[34]||(r[34]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),fe(" Back ",-1)])]),c("h5",kx,N(i.value.find(l=>l.id===Kn.value)?.name||"Items"),1),c("div",Dx,[Ut(Wb,{modelValue:at.value,"onUpdate:modelValue":r[2]||(r[2]=l=>at.value=l),title:"Menu Items","modal-id":"menuFilterModal","sort-options":[{value:"name_asc",label:"Name: A to Z"},{value:"name_desc",label:"Name: Z to A"},{value:"price_asc",label:"Price: Low to High"},{value:"price_desc",label:"Price: High to Low"}],"show-price-range":!0,"show-category":!1,"show-stock-status":!1,"show-date-range":!1,categories:[],suppliers:[],onApply:Za,onClear:$r},null,8,["modelValue"]),c("div",Nx,[r[35]||(r[35]=c("i",{class:"bi bi-search position-absolute",style:{left:"12px",top:"50%",transform:"translateY(-50%)","z-index":"10"}},null,-1)),ft(c("input",{"onUpdate:modelValue":r[3]||(r[3]=l=>et.value=l),class:"form-control search-input ps-5",type:"text",placeholder:"Search items...",style:{"min-width":"250px"}},null,512),[[as,et.value]])])])]),Li.value.length===0?(S(),k("div",Lx,[c("div",$x,[r[39]||(r[39]=c("i",{class:"bi bi-search me-2",style:{"font-size":"2rem",opacity:"0.5"}},null,-1)),r[40]||(r[40]=c("h5",{class:"mt-2 mb-2 text-dark fw-semibold"},"No Menu Found",-1)),c("p",Px,[et.value&&at.value.priceRange&&at.value.priceRange.length>0?(S(),k($e,{key:0},[fe(" No items match your search and filter criteria. ")],64)):et.value?(S(),k($e,{key:1},[r[36]||(r[36]=fe(' No items found matching "',-1)),c("strong",null,N(et.value),1),r[37]||(r[37]=fe('" ',-1))],64)):at.value.priceRange&&at.value.priceRange.length>0?(S(),k($e,{key:2},[fe(" No items match the selected price range. ")],64)):(S(),k($e,{key:3},[fe(" No Menu available in this category. ")],64))]),c("button",{class:"btn btn-sm btn-outline-secondary rounded-pill",onClick:$r},[...r[38]||(r[38]=[c("i",{class:"bi bi-arrow-clockwise me-1"},null,-1),fe("Clear Filters ",-1)])])])])):Q("",!0),c("div",Mx,[(S(!0),k($e,null,ot(Li.value,l=>(S(),k("div",{class:"col-12 col-md-6 left-card cat-cards col-xl-6 d-flex",key:l.id},[l.isDeal?(S(),k("div",Rx,[c("div",Fx,[c("img",{src:l.img,alt:"",class:"w-100 h-100",style:{"object-fit":"cover"}},null,8,qx),c("span",Bx,[r[41]||(r[41]=c("i",{class:"bi bi-gift-fill me-1"},null,-1)),fe(" "+N(ce(n)(l.price)),1)])]),c("div",Wx,[c("div",null,[c("div",Ux,N(l.title),1),c("div",Vx,[r[42]||(r[42]=c("small",{class:"text-muted fw-semibold d-block mb-1",style:{"font-size":"0.75rem"}},[c("i",{class:"bi bi-box-seam me-1"}),fe("Includes: ")],-1)),c("div",Hx,[(S(!0),k($e,null,ot(l.menu_items,_=>(S(),k("span",{key:_.id,class:"badge bg-light text-dark border",style:{"font-size":"0.7rem","font-weight":"500"}},N(_.name),1))),128))])])]),c("div",zx,[c("button",{class:"btn btn-primary btn-sm w-75 mb-2",onClick:Js(_=>zs(l),["stop"])},[...r[43]||(r[43]=[c("i",{class:"bi bi-sliders me-1"},null,-1),fe(" Customize Deal ",-1)])],8,Kx),c("div",{class:"d-flex align-items-center justify-content-start gap-2",onClick:r[4]||(r[4]=Js(()=>{},["stop"]))},[c("button",{class:"qty-btn btn btn-outline-danger rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Js(_=>so(l),["stop"]),disabled:eo(l)<=0},[...r[44]||(r[44]=[c("strong",null,"",-1)])],8,Yx),c("div",Gx,N(eo(l)),1),c("button",{class:"qty-btn btn btn-outline-danger rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Js(_=>vl(l),["stop"])},[...r[45]||(r[45]=[c("strong",null,"+",-1)])],8,jx)])])])])):(S(),k("div",{key:1,class:"card rounded-4 shadow-sm overflow-hidden border-3 w-100 d-flex flex-row align-items-stretch",style:Eo({borderColor:l.label_color||"#1B1670"})},[c("div",Qx,[c("img",{src:l.img,alt:"",class:"w-100 h-100",style:{"object-fit":"cover"}},null,8,Xx),l.variants&&l.variants.length>0?(S(),k("div",Jx,[Ws(l).minOriginal!==null?(S(),k("span",Zx,N(ce(n)(Ws(l).minOriginal)),1)):Q("",!0),c("span",eA,N(ce(n)(Ws(l).min))+" - ",1),Ws(l).maxOriginal!==null?(S(),k("span",tA,N(ce(n)(Ws(l).maxOriginal)),1)):Q("",!0),c("span",nA,N(ce(n)(Ws(l).max)),1)])):Q("",!0),c("span",{class:"position-absolute top-0 start-0 m-1 px-2 py-1 rounded-pill text-white fw-semibold",style:Eo({background:l.label_color||"#1B1670",fontSize:"0.58rem",letterSpacing:"0.3px"})},[ys(_e(l)||l,!!l.variants?.length)?(S(),k($e,{key:0},[c("span",sA,N(ce(n)(_e(l)?.price||l.price)),1),c("span",iA,N(ce(n)(_l(l))),1)],64)):(S(),k($e,{key:1},[fe(N(ce(n)(_e(l)?.price||l.price)),1)],64))],4),li(l)<=0?(S(),k("span",rA," OUT OF STOCK ")):Q("",!0)]),c("div",oA,[l.variants&&l.variants.length>0&&ys(_e(l),!0)||(!l.variants||l.variants.length===0)&&ys(l,!1)?(S(),k("span",aA,N(l.variants&&l.variants.length>0?ys(_e(l),!0).display:ys(l,!1).display),1)):Q("",!0),c("div",null,[c("div",{class:"h5 fw-bold mb-2 menu-name",style:Eo({color:l.label_color||"#1B1670"})},N(l.title),5),l.variants&&l.variants.length>0?(S(),k("div",lA,[r[46]||(r[46]=c("label",{class:"form-label small fw-semibold mb-1"}," Variants: ",-1)),ft(c("select",{"onUpdate:modelValue":_=>xe.value[l.id]=_,class:"form-select form-select-sm variant-select",onChange:_=>de(l,_),onClick:r[5]||(r[5]=Js(()=>{},["stop"]))},[(S(!0),k($e,null,ot(l.variants,_=>(S(),k("option",{key:_.id,value:_.id},[fe(N(_.name)+" - "+N(ce(n)(_.price))+" ",1),_.is_saleable&&Rt(_,!0)>0?(S(),k($e,{key:0},[fe(" (Sale: "+N(ce(n)(Rt(_,!0)))+") ",1)],64)):Q("",!0)],8,cA))),128))],40,uA),[[zd,xe.value[l.id]]])])):Q("",!0),l.addon_groups&&l.addon_groups.length>0?(S(),k("div",dA,[r[47]||(r[47]=c("label",{class:"form-label small fw-semibold mb-2"}," Add-ons ",-1)),Ut(ce(Yd),{modelValue:Ve(l),"onUpdate:modelValue":_=>Ke(l,_),options:Ue(l),optionLabel:"name",dataKey:"id",placeholder:"Select addons",maxSelectedLabels:3,class:"w-100 addon-multiselect",display:"chip"},{value:bu(_=>[_.value&&_.value.length>0?(S(),k("div",fA,[(S(!0),k($e,null,ot(_.value,w=>(S(),k("span",{key:w.id,class:"badge bg-primary"},N(w.name)+" +"+N(ce(n)(w.price)),1))),128))])):(S(),k("span",pA,N(_.placeholder),1))]),option:bu(_=>[c("div",hA,[c("div",null,[c("div",null,N(_.option.name),1),c("small",_A,N(_.option.group_name),1)]),c("span",vA," +"+N(ce(n)(_.option.price)),1)])]),_:1},8,["modelValue","onUpdate:modelValue","options"])])):Q("",!0),c("button",{class:"btn btn-primary btn-sm mb-2 view-details-btn",onClick:_=>Hn(l)}," Customization ",8,mA)]),c("div",{class:"mt-2 d-flex align-items-center justify-content-start gap-2",onClick:r[6]||(r[6]=Js(()=>{},["stop"]))},[c("button",{class:"qty-btn btn btn-outline-secondary rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Js(_=>gs(l),["stop"]),disabled:ct(l)<=0},[...r[48]||(r[48]=[c("strong",null,"",-1)])],8,gA),c("div",bA,N(ct(l)),1),c("button",{class:"qty-btn btn btn-outline-secondary rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Js(_=>jr(l),["stop"])},[...r[49]||(r[49]=[c("strong",null,"+",-1)])],8,yA)])])],4))]))),128))])]))],2),Ot.value?Q("",!0):(S(),k("div",EA,[c("div",wA,[c("button",{class:"btn btn-info px-3 py-2",onClick:st},[r[50]||(r[50]=fe(" Pending ",-1)),A.value.length>0?(S(),k("span",xA,N(A.value.length),1)):Q("",!0)]),c("button",{class:"btn btn-warning px-3 py-2 promos-btn",onClick:cl}," Promos "),c("button",{class:"btn btn-warning px-3 py-2 discount-btn",onClick:dl}," Discounts ")]),c("div",AA,[c("div",CA,[c("div",TA,[(S(!0),k($e,null,ot(Gn.value,(l,_)=>(S(),k("button",{key:_,class:Vt(["ot-pill btn cart-header-buttons",{active:le.value===l}]),onClick:w=>le.value=l},N(l.replace(/_/g," ")),11,SA))),128)),r[51]||(r[51]=c("div",{class:"d-flex justify-content-between mb-3"},null,-1))])]),c("div",IA,[c("div",OA,[le.value==="Eat_in"?(S(),k("div",kA,[c("div",DA,[r[53]||(r[53]=c("label",{class:"form-label small"},"Table",-1)),ft(c("select",{"onUpdate:modelValue":r[7]||(r[7]=l=>At.value=l),class:"form-select form-select-sm"},[r[52]||(r[52]=c("option",{value:null},"Select Table",-1)),(S(!0),k($e,null,ot(hs.value.table_details,(l,_)=>(S(),k("option",{key:_,value:l},N(l.name),9,NA))),128))],512),[[zd,At.value]]),Ct.value.table_number?(S(),k("div",LA,N(Ct.value.table_number[0]),1)):Q("",!0)]),c("div",$A,[r[54]||(r[54]=c("label",{class:"form-label small"},"Customer",-1)),ft(c("input",{"onUpdate:modelValue":r[8]||(r[8]=l=>Ge.value=l),class:"form-control form-control-sm",placeholder:"Walk In"},null,512),[[as,Ge.value]])])])):(S(),k("div",PA,[r[55]||(r[55]=c("label",{class:"form-label small"},"Customer",-1)),ft(c("input",{"onUpdate:modelValue":r[9]||(r[9]=l=>Ge.value=l),class:Vt(["form-control form-control-sm",{"is-invalid":Ct.value.customer}]),placeholder:"Walk In"},null,2),[[as,Ge.value]]),Ct.value.customer?(S(),k("div",MA,N(Ct.value.customer[0]),1)):Q("",!0)])),le.value==="Delivery"?(S(),k("div",RA,[r[56]||(r[56]=c("label",{class:"form-label small"},"Delivery Location",-1)),ft(c("input",{"onUpdate:modelValue":r[10]||(r[10]=l=>xt.value=l),class:"form-control form-control-sm",placeholder:"Enter delivery location"},null,512),[[as,xt.value]]),Ct.value.delivery_location?(S(),k("div",FA,N(Ct.value.delivery_location[0]),1)):Q("",!0),r[57]||(r[57]=c("label",{class:"form-label small mt-2"},"Phone Number",-1)),ft(c("input",{"onUpdate:modelValue":r[11]||(r[11]=l=>ht.value=l),class:"form-control form-control-sm",placeholder:"Enter phone number"},null,512),[[as,ht.value]]),Ct.value.phone_number?(S(),k("div",qA,N(Ct.value.phone_number[0]),1)):Q("",!0)])):Q("",!0)]),c("div",BA,[F.value.length===0?(S(),k("div",WA," Add items from the left ")):Q("",!0),(S(!0),k($e,null,ot(F.value,(l,_)=>(S(),k("div",{key:l.title,class:"line"},[c("div",UA,[c("img",{src:l.img,alt:""},null,8,VA),c("div",HA,[c("div",{class:"name",title:l.title},N(l.title),9,zA),l.resale_discount_per_item>0?(S(),k("div",KA,[c("span",YA,[r[58]||(r[58]=c("i",{class:"bi bi-tag-fill"},null,-1)),fe(" Save "+N(ce(n)(l.resale_discount_per_item)),1)])])):Q("",!0),l.addons&&l.addons.length>0?(S(),k("div",GA,[c("button",{class:"btn-link p-0 py-0 text-decoration-none",onClick:w=>zo(l,_),title:hl(l)},[r[59]||(r[59]=c("i",{class:"bi bi-plus-circle-fill text-primary me-1",style:{"font-size":"0.9rem"}},null,-1)),c("span",QA,N(l.addons.length)+" addon(s)",1)],8,jA)])):Q("",!0),qe(l)?(S(),k("span",XA,[...r[60]||(r[60]=[c("i",{class:"bi bi-tag-fill"},null,-1)])])):Q("",!0),l.variant_name?(S(),k("div",JA,[c("span",ZA,N(l.variant_name),1)])):Q("",!0),l.note?(S(),k("div",eC,N(l.note),1)):Q("",!0)])]),c("div",tC,[c("div",nC,[c("button",{class:"qty-btn",onClick:w=>nl(_)},"",8,sC),c("div",iC,N(l.qty),1),c("button",{class:"qty-btn",onClick:w=>tl(_)},"+",8,rC)]),c("div",oC,[c("div",aC,N(ce(n)(l.price)),1),c("button",{class:"del",onClick:w=>sl(_)},[...r[61]||(r[61]=[c("i",{class:"bi bi-trash"},null,-1)])],8,lC)])])]))),128))]),c("div",uC,[c("div",cC,[r[62]||(r[62]=c("span",null,"Sub Total",-1)),c("b",dC,N(ce(n)($t.value)),1)]),es.value>0?(S(),k("div",fC,[r[63]||(r[63]=c("span",{class:"d-flex align-items-center gap-2"},[c("i",{class:"bi bi-receipt text-info"}),fe(" Tax ")],-1)),c("b",pC,N(ce(n)(es.value)),1)])):Q("",!0),jn.value>0?(S(),k("div",hC,[r[64]||(r[64]=c("span",{class:"text-muted"},"Service Charges:",-1)),c("span",_C,N(ce(n)(jn.value)),1)])):Q("",!0),vn.value>0?(S(),k("div",vC,[r[65]||(r[65]=c("span",{class:"text-muted"},"Delivery Charges:",-1)),c("span",mC,N(ce(n)(vn.value)),1)])):Q("",!0),vs.value>0?(S(),k("div",gC,[r[66]||(r[66]=c("span",{class:"d-flex align-items-center gap-2"},[c("span",{class:"text-danger"},"Sale Discount:")],-1)),c("b",bC,"-"+N(ce(n)(vs.value)),1)])):Q("",!0),Pe.value&&Pe.value.length>0?(S(),k("div",yC,[c("div",EC,[c("div",wC,[r[67]||(r[67]=c("span",{class:"text-success"},"Promo Discount:",-1)),c("b",xC,"-"+N(ce(n)(Zn.value)),1)])])])):Q("",!0),Pt.value.length>0?(S(),k("div",AC,[r[69]||(r[69]=c("div",{class:"alert alert-warning py-2 px-3 mb-2"},[c("div",{class:"d-flex align-items-center gap-2"},[c("i",{class:"bi bi-clock-history"}),c("small",{class:"fw-semibold"},"Pending Approval")])],-1)),(S(!0),k($e,null,ot(Pt.value,l=>(S(),k("div",{key:l.id,class:"trow"},[c("span",CC,[r[68]||(r[68]=c("i",{class:"bi bi-hourglass-split"},null,-1)),c("span",null,N(l.discountData?.name||"Discount")+" ("+N(l.percentage)+"%)",1)]),c("span",TC," -"+N(ce(n)(Xn(l.percentage))),1)]))),128)),r[70]||(r[70]=c("small",{class:"text-muted d-block mt-1 ms-4"},[c("i",{class:"bi bi-info-circle me-1"}),fe(" Will apply after Super Admin approval ")],-1))])):Q("",!0),ut.value.length>0?(S(),k("div",SC,[c("div",IC,[r[71]||(r[71]=c("div",{class:"d-flex align-items-center text-success gap-2"},[c("i",{class:"bi bi-check-circle"}),c("small",{class:"fw-semibold"},"Approved Discounts"),c("i",{class:"bi bi-info-circle text-muted",tabindex:"0",role:"button","data-bs-toggle":"popover","data-bs-trigger":"click","data-bs-html":"true","data-bs-placement":"top","data-bs-container":"body","data-bs-content":"Auto-updates with cart changes<br>Approved Discounts"})],-1)),c("b",OC,"-"+N(ce(n)(_s.value)),1)])])):Q("",!0),c("div",kC,[r[72]||(r[72]=c("span",null,"Total",-1)),c("b",null,N(ce(n)(ms.value)),1)])]),c("div",DC,[r[73]||(r[73]=c("label",{for:"frontNote",class:"form-label small fw-semibold"},"Front Note",-1)),ft(c("textarea",{id:"frontNote","onUpdate:modelValue":r[12]||(r[12]=l=>Nn.value=l),rows:"3",class:"form-control form-control-sm rounded-3",placeholder:"Enter front note..."},null,512),[[as,Nn.value]])]),c("div",NC,[r[74]||(r[74]=c("label",{for:"kitchenNote",class:"form-label small fw-semibold"},"Kitchen Note",-1)),ft(c("textarea",{id:"kitchenNote","onUpdate:modelValue":r[13]||(r[13]=l=>nn.value=l),rows:"3",class:"form-control form-control-sm rounded-3",placeholder:"Enter kitchen note..."},null,512),[[as,nn.value]])])]),c("div",LC,[c("button",{class:"btn btn-secondary btn-clear",onClick:r[14]||(r[14]=l=>Mi())}," Clear "),c("button",{class:"btn btn-warning",onClick:ue}," Pending "),c("button",{class:"btn btn-primary btn-place",onClick:ol}," Place Order "),c("button",{class:"btn btn-info",onClick:De},[...r[75]||(r[75]=[c("i",{class:"bi bi-clock me-1"},null,-1),fe(" Pay Later ",-1)])])])])]))])]),c("div",$C,[c("div",PC,[c("div",MC,[c("div",RC,[c("div",null,[c("h5",FC,N(oe.value?.title||"Choose Item"),1),r[76]||(r[76]=c("p",{class:"text-muted small mb-0",style:{"font-size":"0.8rem"}},"Customize your order",-1))]),r[77]||(r[77]=c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])],-1))]),c("div",qC,[c("div",BC,[r[78]||(r[78]=c("div",{class:"stepper-progress-bg"},null,-1)),c("div",{class:"stepper-progress-fill",style:Eo({width:Vn.value})},null,4),(S(!0),k($e,null,ot(Et.value,(l,_)=>(S(),k("div",{key:l.id,class:"stepper-step text-center"},[c("div",{class:Vt(["stepper-circle stepper-circle-sm",wt(l.stepNumber)]),onClick:w=>It(l.stepNumber),style:{cursor:"pointer"}},[l.stepNumber<ve.value?(S(),k("i",UC)):(S(),k("span",VC,N(l.stepNumber),1))],10,WC),c("small",{class:Vt(["stepper-label",{"stepper-label-active":l.stepNumber===ve.value}]),style:{"font-size":"0.7rem","margin-top":"4px",display:"block",cursor:"pointer"},onClick:w=>It(l.stepNumber)},N(l.name),11,HC)]))),128))])]),c("div",zC,[c("div",KC,[c("div",YC,[c("div",GC,[c("img",{src:oe.value?.image_url||oe.value?.img||"/assets/img/product/product29.jpg",class:"img-fluid rounded-3 w-100 object-fit-cover",style:{height:"200px","object-fit":"cover"},alt:"Product"},null,8,jC),Ye()&&ys(Ye(),!0)?(S(),k("span",QC,[r[79]||(r[79]=c("i",{class:"bi bi-tag-fill me-1"},null,-1)),fe(" "+N(ys(Ye(),!0).display),1)])):Q("",!0)]),c("div",XC,[r[83]||(r[83]=c("div",{class:"d-flex align-items-center mb-2"},[c("i",{class:"bi bi-receipt me-2 text-primary",style:{"font-size":"1rem"}}),c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Price Breakdown")],-1)),c("div",JC,[r[80]||(r[80]=c("span",{class:"text-muted"},"Base Price",-1)),c("strong",null,N(ce(n)(fs())),1)]),ps()>0?(S(),k("div",ZC,[r[81]||(r[81]=c("span",{class:"text-muted"},"Add-ons",-1)),c("strong",eT,"+ "+N(ce(n)(ps())),1)])):Q("",!0),r[84]||(r[84]=c("hr",{class:"my-2"},null,-1)),c("div",tT,[r[82]||(r[82]=c("span",{class:"fw-bold"},"Total",-1)),c("span",nT,N(ce(n)(zi())),1)])])]),c("div",sT,[c("div",iT,[ft(c("div",rT,[r[86]||(r[86]=c("div",{class:"d-flex align-items-start mb-2"},[c("i",{class:"bi bi-grid-3x3-gap me-2 text-primary",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Choose Variant ")])],-1)),c("div",oT,[(S(!0),k($e,null,ot(oe.value?.variants,l=>(S(),k("div",{key:l.id,class:"col-12"},[c("div",{class:Vt(["border rounded-3 p-2 shadow-sm variant-card",Qn.value===l.id?"border-primary bg-light":""]),onClick:_=>Lt(l.id),style:{cursor:"pointer"}},[c("div",lT,[c("div",null,[c("h6",uT,N(l.name),1)]),c("div",cT,[Qn.value===l.id?(S(),k("div",dT,[...r[85]||(r[85]=[c("i",{class:"bi bi-check-circle-fill",style:{"font-size":"1rem"}},null,-1)])])):Q("",!0),c("strong",fT,N(ce(n)(l.price)),1)])])],10,aT)]))),128))])],512),[[ei,ve.value===1&&Kt.value]]),ft(c("div",pT,[r[87]||(r[87]=c("div",{class:"d-flex align-items-start mb-2"},[c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Remove Ingredients")])],-1)),c("div",hT,[(S(!0),k($e,null,ot(pt(),l=>(S(),k("div",{key:l.id||l.inventory_item_id,class:"col-md-6"},[c("div",{class:Vt(["d-flex align-items-center p-2 border rounded-2 shadow-sm",{"bg-light text-muted":Ze(l.id||l.inventory_item_id)}])},[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"16px",height:"16px"},id:"ingredient-"+(l.id||l.inventory_item_id),checked:!Ze(l.id||l.inventory_item_id),disabled:!Ze(l.id||l.inventory_item_id)&&On()===1,onChange:_=>pn(l.id||l.inventory_item_id)},null,40,_T),c("label",{for:"ingredient-"+(l.id||l.inventory_item_id),class:"form-check-label",style:{"font-size":"0.8rem"}},N(l.product_name||l.name),9,vT)],2)]))),128))])],512),[[ei,ve.value===2&&hn.value]]),ft(c("div",mT,[r[93]||(r[93]=c("div",{class:"d-flex align-items-start mb-3"},[c("i",{class:"bi bi-plus-circle me-2 text-success",style:{"font-size":"1.1rem"}}),c("div",{class:"flex-grow-1"},[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Add Add-ons"),c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}},"Enhance your meal")])],-1)),oe.value?.addon_groups?.length>1?(S(),k("div",gT,[c("div",bT,[c("small",yT," Group "+N(C.value+1)+" of "+N(oe.value?.addon_groups?.length),1),c("div",ET,[(S(!0),k($e,null,ot(oe.value?.addon_groups,(l,_)=>(S(),k("span",{key:_,class:Vt(["rounded-circle",_===C.value?"bg-primary":"bg-secondary"]),style:{width:"8px",height:"8px",display:"inline-block",opacity:"0.6"}},null,2))),128))])])])):Q("",!0),q.value?(S(),k("div",wT,[c("div",xT,[c("div",AT,[c("h6",CT,N(q.value.group_name),1),q.value.max_select>0?(S(),k("span",TT," Max "+N(q.value.max_select),1)):Q("",!0)]),q.value.description?(S(),k("p",ST,N(q.value.description),1)):Q("",!0)]),c("div",IT,[(S(!0),k($e,null,ot(q.value.addons,l=>(S(),k("div",{key:l.id,class:"col-12"},[c("div",{class:Vt(["border rounded-2 p-2 shadow-sm d-flex align-items-center justify-content-between",{"bg-light border-success":ro(q.value.group_id,l.id)}])},[c("div",OT,[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"18px",height:"18px",cursor:"pointer"},id:"addon-"+l.id,checked:ro(q.value.group_id,l.id),onChange:_=>Zi(q.value.group_id,l)},null,40,kT),c("label",{for:"addon-"+l.id,class:"form-check-label mb-0",style:{"font-size":"0.85rem",cursor:"pointer"}},[fe(N(l.name)+" ",1),c("span",NT," +"+N(ce(n)(l.price)),1)],8,DT)]),ro(q.value.group_id,l.id)?(S(),k("div",LT,[c("button",{class:"btn btn-primary rounded-circle p-0",style:{width:"35px",height:"10px"},onClick:_=>Ks(q.value.group_id,l.id),disabled:Ft(q.value.group_id,l.id)<=1},[...r[88]||(r[88]=[c("i",{class:"bi bi-dash",style:{"font-size":"0.9rem"}},null,-1)])],8,$T),c("span",PT,N(Ft(q.value.group_id,l.id)),1),c("button",{class:"btn btn-primary rounded-circle p-0",style:{width:"35px",height:"10px"},onClick:_=>wl(q.value.group_id,l.id)},[...r[89]||(r[89]=[c("i",{class:"bi bi-plus",style:{"font-size":"0.9rem"}},null,-1)])],8,MT)])):Q("",!0)],2)]))),128))])])):Q("",!0),oe.value?.addon_groups?.length>1?(S(),k("div",RT,[c("button",{class:"btn btn-primary btn-sm px-3",onClick:H,disabled:C.value===0},[...r[90]||(r[90]=[c("i",{class:"bi bi-chevron-left me-1"},null,-1),fe(" Previous ",-1)])],8,FT),c("button",{class:"btn btn-primary btn-sm px-3",onClick:M,disabled:C.value>=oe.value?.addon_groups?.length-1},[...r[91]||(r[91]=[fe(" Next ",-1),c("i",{class:"bi bi-chevron-right ms-1"},null,-1)])],8,qT)])):Q("",!0),c("div",{class:"text-center mt-3"},[c("button",{class:"btn btn-link btn-sm text-muted",onClick:X},[...r[92]||(r[92]=[c("small",null,"Skip add-ons",-1)])])])],512),[[ei,ve.value===3&&yt.value]]),ft(c("div",BT,[r[100]||(r[100]=c("div",{class:"d-flex align-items-start mb-2"},[c("i",{class:"bi bi-cart-check me-2 text-success",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Review Your Order"),c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}},"Confirm selections")])],-1)),c("div",WT,[r[97]||(r[97]=c("h6",{class:"fw-bold mb-2 text-secondary"},"Order Summary",-1)),Kt.value?(S(),k("div",UT,[r[94]||(r[94]=c("span",{class:"summary-label"},"Variant:",-1)),c("span",VT,N(kn()),1)])):Q("",!0),Oe.value.length>0?(S(),k("div",HT,[r[95]||(r[95]=c("span",{class:"summary-label"},"Removed:",-1)),c("span",zT,N(gt()),1)])):Q("",!0),kt()>0?(S(),k("div",KT,[r[96]||(r[96]=c("span",{class:"summary-label"},"Add-ons:",-1)),c("span",YT,N(Sr()),1)])):Q("",!0)]),c("div",GT,[r[98]||(r[98]=c("label",{class:"me-3 fw-semibold",style:{"font-size":"0.85rem"}},"Quantity:",-1)),c("div",jT,[c("button",{class:"qty-btn",onClick:rl,disabled:_t.value<=1},"",8,QT),c("div",XT,N(_t.value),1),c("button",{class:"qty-btn",onClick:Po},"+")])]),c("div",JT,[r[99]||(r[99]=c("label",{class:"fw-semibold mb-1",style:{"font-size":"0.85rem"}},[c("i",{class:"bi bi-chat-left-text me-1"}),fe(" Kitchen Note (Optional) ")],-1)),ft(c("textarea",{"onUpdate:modelValue":r[15]||(r[15]=l=>Dn.value=l),class:"form-control form-control-sm rounded-2 shadow-sm",rows:"2",maxlength:"200",placeholder:"Special instructions...",style:{"font-size":"0.8rem"}},null,512),[[as,Dn.value]]),c("div",ZT,N(Dn.value?.length||0)+"/200 ",1)])],512),[[ei,ve.value===Un.value]])])])])]),c("div",eS,[ve.value>1?(S(),k("button",{key:0,class:"btn btn-light btn-sm px-4 py-2 shadow-sm",onClick:Ps},[...r[101]||(r[101]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),fe("Back ",-1)])])):Q("",!0),ve.value<Un.value?(S(),k("button",{key:1,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:_n},[...r[102]||(r[102]=[fe(" Next ",-1),c("i",{class:"bi bi-arrow-right ms-1"},null,-1)])])):(S(),k("button",{key:2,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:il},[...r[103]||(r[103]=[c("i",{class:"bi bi-cart-plus me-1"},null,-1),fe("Add to Cart ",-1)])]))])])])]),c("div",tS,[c("div",nS,[c("div",sS,[c("div",iS,[c("div",null,[c("h5",rS,N(Ne.value?.title||"Customize Deal"),1),c("p",oS," Customizing "+N(vt.value?.name||"item")+" ("+N(Be.value+1)+" of "+N(Ne.value?.menu_items?.length||0)+") ",1)]),r[104]||(r[104]=c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])],-1))]),c("div",aS,[c("div",lS,[r[105]||(r[105]=c("div",{class:"stepper-progress-bg"},null,-1)),c("div",{class:"stepper-progress-fill",style:Eo({width:Vs.value})},null,4),(S(!0),k($e,null,ot(_i.value,(l,_)=>(S(),k("div",{key:l.id,class:"stepper-step text-center"},[c("div",{class:Vt(["stepper-circle stepper-circle-sm",Hs(_+1)])},[_+1<nt.value?(S(),k("i",uS)):(S(),k("span",cS,N(_+1),1))],2),c("small",{class:Vt(["stepper-label",{"stepper-label-active":_+1===nt.value}]),style:{"font-size":"0.7rem","margin-top":"4px",display:"block"}},N(l.name),3)]))),128))])]),c("div",dS,[c("div",fS,[c("div",pS,[c("div",hS,[c("img",{src:Ne.value?.img||"/assets/img/product/product29.jpg",class:"img-fluid rounded-3 w-100 object-fit-cover",style:{height:"200px","object-fit":"cover"},alt:"Deal"},null,8,_S),c("span",vS,[Xi.value>parseFloat(Ne.value?.price||0)?(S(),k("span",mS,[r[106]||(r[106]=fe(" Deal: ",-1)),c("del",null,N(ce(n)(Ne.value?.price||0)),1),fe(" "+N(ce(n)(Xi.value)),1)])):(S(),k("span",gS," Deal: "+N(ce(n)(Ne.value?.price||0)),1))])]),c("div",bS,[c("h6",yS,[Ut(ce(Gd),{class:"me-2 text-primary w-4"}),r[107]||(r[107]=fe(" Currently Customizing ",-1))]),c("div",ES,[c("div",wS,[c("strong",null,N(vt.value?.name),1),c("div",xS," Base Price: "+N(ce(n)(vt.value?.price||0)),1),Ji.value>0?(S(),k("div",AS," + "+N(ce(n)(Ji.value))+" (Add-ons) ",1)):Q("",!0),c("div",CS," Total: "+N(ce(n)(ta.value)),1)])])]),c("div",TS,[r[108]||(r[108]=c("h6",{class:"fw-bold mb-2",style:{"font-size":"0.9rem"}},[c("i",{class:"bi bi-list-check me-2 text-success"}),fe(" Items in Deal ")],-1)),c("div",SS,[(S(!0),k($e,null,ot(Ne.value?.menu_items,(l,_)=>(S(),k("div",{key:_,class:"list-group-item px-0 py-2 border-0"},[c("div",IS,[Rn.value.includes(_)?(S(),k("i",OS)):_===Be.value?(S(),Hd(ce(Gd),{key:1,class:"text-primary me-2 w-4"})):(S(),k("i",kS)),c("small",{class:Vt({"fw-bold":_===Be.value})},N(l.name),3)])]))),128))])])]),c("div",DS,[c("div",NS,[ft(c("div",LS,[c("div",$S,[r[110]||(r[110]=c("i",{class:"bi bi-dash-circle me-2 text-warning",style:{"font-size":"1.1rem"}},null,-1)),c("div",null,[c("h6",PS," Remove Ingredients from "+N(vt.value?.name),1),r[109]||(r[109]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Uncheck ingredients you don't want ",-1))])]),c("div",MS,[(S(!0),k($e,null,ot(ji(),l=>(S(),k("div",{key:l.id,class:"col-md-6"},[c("div",{class:Vt(["d-flex align-items-center p-2 border rounded-2 shadow-sm",{"bg-light text-muted":vi(l.id)}])},[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"16px",height:"16px"},id:"deal-ingredient-"+l.id,checked:!vi(l.id),disabled:!vi(l.id)&&ss()===1,onChange:_=>Jo(l.id)},null,40,RS),c("label",{for:"deal-ingredient-"+l.id,class:"form-check-label",style:{"font-size":"0.8rem"}},N(l.product_name||l.name),9,FS)],2)]))),128))])],512),[[ei,nt.value===1&&Ki.value]]),ft(c("div",qS,[c("div",BS,[r[112]||(r[112]=c("i",{class:"bi bi-plus-circle me-2 text-success",style:{"font-size":"1.1rem"}},null,-1)),c("div",null,[c("h6",WS," Add Add-ons to "+N(vt.value?.name),1),r[111]||(r[111]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Enhance this item (charges may apply) ",-1))])]),(S(!0),k($e,null,ot(vt.value?.addon_groups,l=>(S(),k("div",{key:l.group_id,class:"mb-3"},[c("label",US,[c("span",null,N(l.group_name),1),l.max_select>0?(S(),k("span",VS," Max "+N(l.max_select),1)):Q("",!0)]),Ut(ce(Yd),{modelValue:Tt.value[Be.value]?.[l.group_id]||[],"onUpdate:modelValue":_=>Qi(l.group_id,_),options:l.addons,optionLabel:"name",dataKey:"id",placeholder:"Select add-ons",maxSelectedLabels:2,class:"w-100",appendTo:"self"},null,8,["modelValue","onUpdate:modelValue","options"])]))),128))],512),[[ei,nt.value===2&&Yi.value]]),ft(c("div",HS,[c("div",zS,[Ut(ce(Hb),{class:"me-2 text-primary w-5",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",KS," Review "+N(vt.value?.name),1),r[113]||(r[113]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Confirm your customizations ",-1))])]),c("div",YS,[r[120]||(r[120]=c("h6",{class:"fw-bold mb-2 text-secondary"},"Customization Summary",-1)),c("div",GS,[r[114]||(r[114]=c("span",{class:"summary-label"},"Item:",-1)),c("span",jS,N(vt.value?.name),1)]),c("div",QS,[r[115]||(r[115]=c("span",{class:"summary-label"},"Base Price:",-1)),c("span",XS,N(ce(n)(vt.value?.price||0)),1)]),Zo()?(S(),k("div",JS,[r[116]||(r[116]=c("span",{class:"summary-label"},"Removed:",-1)),c("span",ZS,N(Zo()),1)])):Q("",!0),gl()>0?(S(),k("div",e2,[r[117]||(r[117]=c("span",{class:"summary-label"},"Add-ons:",-1)),c("span",t2,N(bl()),1)])):Q("",!0),Ji.value>0?(S(),k("div",n2,[r[118]||(r[118]=c("span",{class:"summary-label"},"Add-ons Cost:",-1)),c("span",s2," + "+N(ce(n)(Ji.value)),1)])):Q("",!0),c("div",i2,[r[119]||(r[119]=c("span",{class:"summary-label fw-bold"},"Item Total:",-1)),c("span",r2,N(ce(n)(ta.value)),1)])]),c("div",o2,[c("label",a2,[r[121]||(r[121]=c("i",{class:"bi bi-chat-left-text me-1"},null,-1)),fe(" Kitchen Note for "+N(vt.value?.name)+" (Optional) ",1)]),ft(c("textarea",{"onUpdate:modelValue":r[16]||(r[16]=l=>bn.value[Be.value]=l),class:"form-control form-control-sm rounded-2 shadow-sm",rows:"2",maxlength:"200",placeholder:"Special instructions for this item...",style:{"font-size":"0.8rem"}},"                                    ",512),[[as,bn.value[Be.value]]]),c("div",l2,N((bn.value[Be.value]||"").length)+"/200 ",1)])],512),[[ei,nt.value===Gi.value]])])])])]),c("div",u2,[c("div",c2,[nt.value>1?(S(),k("button",{key:0,class:"btn btn-secondary btn-sm px-4 py-2 shadow-sm",onClick:ea},[...r[122]||(r[122]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),fe("Back ",-1)])])):Q("",!0),nt.value<Gi.value?(S(),k("button",{key:1,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:rn},[...r[123]||(r[123]=[fe(" Next ",-1),c("i",{class:"bi bi-arrow-right ms-1"},null,-1)])])):ml.value?(S(),k("button",{key:3,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:El},[...r[125]||(r[125]=[c("i",{class:"bi bi-cart-plus me-1"},null,-1),fe("Add Deal to Cart ",-1)])])):(S(),k("button",{key:2,class:"btn btn-success btn-sm px-4 py-2 shadow-sm",onClick:yl},[...r[124]||(r[124]=[c("i",{class:"bi bi-check2 me-1"},null,-1),fe("Next Item ",-1)])]))])])])])]),c("div",d2,[c("div",f2,[c("div",p2,[r[136]||(r[136]=c("div",{class:"modal-header border-0 pb-2"},[c("h5",{class:"modal-title fw-bold"},[c("i",{class:"bi bi-puzzle-fill text-primary me-2"}),fe(" Manage Add-ons ")]),c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])])],-1)),Xe.value?(S(),k("div",h2,[c("div",_2,[c("div",v2,[c("img",{src:Xe.value.img,alt:"",class:"rounded",style:{width:"60px",height:"60px","object-fit":"cover"}},null,8,m2),c("div",g2,[c("div",b2,N(Xe.value.title),1),c("div",y2,[c("small",E2,[r[126]||(r[126]=c("i",{class:"bi bi-tag me-1"},null,-1)),r[127]||(r[127]=fe(" Base Price: ",-1)),c("span",w2,N(ce(n)(Xe.value?.unit_price-Qr(F.value[tt.value]||{addons:[]}))),1)]),c("small",x2,[r[128]||(r[128]=c("i",{class:"bi bi-box me-1"},null,-1)),r[129]||(r[129]=fe(" Quantity: ",-1)),c("span",A2,N(Xe.value.qty),1)])])])])]),Xe.value.addons&&Xe.value.addons.length>0?(S(),k("div",C2,[c("table",T2,[r[132]||(r[132]=c("thead",{class:"table-light"},[c("tr",null,[c("th",{style:{width:"60px"},class:"text-center"},"Select"),c("th",null,"Items"),c("th",{style:{width:"120px"},class:"text-center"},"Price"),c("th",{style:{width:"200px"},class:"text-center"},"Quantity")])],-1)),c("tbody",null,[(S(!0),k($e,null,ot(Xe.value.addons,l=>(S(),k("tr",{key:l.id,class:Vt({"table-active":l.selected!==!1})},[c("td",S2,[c("div",I2,[c("input",{type:"checkbox",class:"form-check-input",checked:l.selected!==!1,onChange:_=>Ko(l),style:{width:"22px",height:"22px",cursor:"pointer"}},null,40,O2)])]),c("td",null,[c("div",k2,[c("div",{class:Vt(["addon-status-indicator",l.selected!==!1?"bg-success":"bg-secondary"])},null,2),c("div",null,[c("div",D2,N(l.name),1),l.group_name?(S(),k("small",N2,N(l.group_name),1)):Q("",!0)])])]),c("td",L2,[c("span",$2," +"+N(ce(n)(l.price)),1)]),c("td",null,[c("div",P2,[c("button",{class:"btn btn-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px"},onClick:_=>Go(l),disabled:!l.selected||(l.quantity||1)<=1},[...r[130]||(r[130]=[c("i",{class:"bi bi-dash-lg"},null,-1)])],8,M2),c("span",R2,N(l.quantity||1),1),c("button",{class:"btn btn-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px"},onClick:_=>Yo(l),disabled:!l.selected},[...r[131]||(r[131]=[c("i",{class:"bi bi-plus-lg"},null,-1)])],8,F2)])])],2))),128))])])])):(S(),k("div",q2,[...r[133]||(r[133]=[c("i",{class:"bi bi-inbox",style:{"font-size":"3rem",opacity:"0.3"}},null,-1),c("p",{class:"mb-0 mt-3 fw-semibold"},"No add-ons available for this item",-1)])])),c("div",B2,[kt()>0?(S(),k("div",W2,[c("small",U2,[r[134]||(r[134]=c("i",{class:"bi bi-check-circle-fill me-1"},null,-1)),fe(" "+N(kt())+" add-on(s) selected  Add-ons Total: "+N(ce(n)(Qr(Xe.value))),1)])])):Q("",!0)])])):Q("",!0),c("div",{class:"modal-footer border-0 pt-0 bg-light"},[r[135]||(r[135]=c("button",{type:"button",class:"btn btn-secondary px-2 py-2","data-bs-dismiss":"modal"}," Cancel ",-1)),c("button",{type:"button",class:"btn btn-primary px-2 py-2",onClick:Mt}," Save ")])])])]),Ut(Fb,{show:Vr.value,kot:fi.value,loading:Uo.value,onClose:r[17]||(r[17]=l=>Vr.value=!1),onStatusUpdated:Wo},null,8,["show","kot","loading"]),Ut(Mb,{show:Mr.value,order:Ln.value,money:ui,onClose:r[18]||(r[18]=l=>Mr.value=!1)},null,8,["show","order"]),Ut(Kd,{show:Ri.value,customer:Ge.value,"delivery-location":xt.value,phone:ht.value,"order-type":le.value,"selected-table":At.value,"order-items":F.value,"grand-total":ms.value,money:ui,cashReceived:$n.value,"onUpdate:cashReceived":r[19]||(r[19]=l=>$n.value=l),client_secret:u.client_secret,order_code:u.order_code,"sub-total":$t.value,tax:es.value,"service-charges":jn.value,"delivery-charges":vn.value,"promo-discount":Zn.value,"promo-id":Pe.value?.id,"promo-name":Pe.value?.name,"promo-type":Pe.value?.type,"promo-discount-amount":Zn.value,note:Nn.value,"kitchen-note":nn.value,"order-date":new Date().toISOString().split("T")[0],"order-time":new Date().toTimeString().split(" ")[0],"payment-method":al.value,change:Mo.value,onClose:r[20]||(r[20]=l=>Ri.value=!1),onConfirm:Wr,appliedPromos:pl.value,"approved-discounts":_s.value,"approved-discount-details":ut.value.map(l=>({discount_id:l.id,discount_name:l.name,discount_percentage:l.percentage,discount_amount:Xn(l.percentage),approval_id:l.approval_id}))},null,8,["show","customer","delivery-location","phone","order-type","selected-table","order-items","grand-total","cashReceived","client_secret","order_code","sub-total","tax","service-charges","delivery-charges","promo-discount","promo-id","promo-name","promo-type","promo-discount-amount","note","kitchen-note","order-date","order-time","payment-method","change","appliedPromos","approved-discounts","approved-discount-details"]),Ut(Bb,{show:Bi.value,orders:Hr.value,onClose:r[21]||(r[21]=l=>Bi.value=!1),onViewDetails:Fe,loading:zr.value},null,8,["show","orders","loading"]),Ut(Rb,{show:Wi.value,loading:Kr.value,promos:Bs.value,"order-items":F.value,onApplyPromo:ul,onClose:r[22]||(r[22]=l=>Wi.value=!1)},null,8,["show","loading","promos","order-items"]),Ut(Ub,{show:Ui.value,discounts:Vi.value,"order-items":F.value,loading:Yr.value,"applied-discounts":ut.value,"rejected-discounts":ci.value,onClose:r[23]||(r[23]=l=>Ui.value=!1),onApplyDiscount:Fo,onClearDiscount:Bo},null,8,["show","discounts","order-items","loading","applied-discounts","rejected-discounts"]),Ut(cx,{show:Jn.value,"missing-ingredients":Gt.value,onClose:r[24]||(r[24]=l=>{Jn.value=!1,Br.value=null}),onConfirm:qs},null,8,["show","missing-ingredients"]),Ut(Vb,{show:D.value,"pending-orders":A.value,loading:K.value,onClose:r[25]||(r[25]=l=>D.value=!1),onResume:Me,onReject:io,onPayNow:xl},null,8,["show","pending-orders","loading"]),He.value?(S(),Hd(Kd,{key:0,show:Es.value,customer:He.value.customer_name,"delivery-location":He.value.delivery_location,phone:He.value.phone_number,"order-type":He.value.order_type,"selected-table":{name:He.value.table_number},"order-items":He.value.order_items,"grand-total":He.value.total_amount,"sub-total":He.value.sub_total,tax:He.value.tax,"service-charges":He.value.service_charges,"delivery-charges":He.value.delivery_charges,"promo-discount":He.value.promo_discount,note:He.value.note,"kitchen-note":He.value.kitchen_note,cashReceived:$n.value,"onUpdate:cashReceived":r[26]||(r[26]=l=>$n.value=l),money:ui,onClose:r[27]||(r[27]=l=>{Es.value=!1,He.value=null}),onConfirm:na,"is-payment-only":!0},null,8,["show","customer","delivery-location","phone","order-type","selected-table","order-items","grand-total","sub-total","tax","service-charges","delivery-charges","promo-discount","note","kitchen-note","cashReceived"])):Q("",!0)])]),_:1})],64))}},bI=Db(V2,[["__scopeId","data-v-fc352bf4"]]);export{bI as default};
