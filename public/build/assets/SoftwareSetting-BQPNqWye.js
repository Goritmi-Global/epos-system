import{_ as R,a as j,b as c,d as E,g as m,l as H,f as e,t as w,V as F,r as l,c as k,e as M,p as b,F as O,i as G,y as q,j as C,k as U,q as T,s as d}from"./app-DaLeCts1.js";import Y from"./Step1-CkLbwhsi.js";import J from"./Step2-BkCYmxh_.js";import K from"./Step3-B3QtSiK4.js";import Q from"./Step4-D_JuO-8j.js";import W from"./Step5-D_31s0xi.js";import X from"./Step6-BOSEfw53.js";import Z from"./Step7-DCiPPROv.js";import ee from"./Step8-C1r99FPX.js";import te from"./Step9-C5UXgSvz.js";import{P as se}from"./PasswordVerificationModal-VEkP2aPT.js";import"./index-DYfGe8Oe.js";import"./index-CMXme-QG.js";import"./index-CoRwG8jP.js";import"./index-7poBRJqv.js";import"./index-BvBoXUhG.js";import"./useFormatters-CV7VkEY5.js";const oe={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},ae={class:"bg-white rounded-xl shadow-xl w-full max-w-md p-6 animate-drop-in relative"},ne={class:"text-center text-lg font-medium text-gray-800 mb-2"},ie={class:"text-center text-sm text-gray-500 mb-6"},re={key:0,class:"flex justify-center mb-4"},le={key:1,class:"flex justify-center gap-3"},de={__name:"RestoreModal",props:{title:{type:String,default:"Restore System"},message:{type:String,default:"Are you sure you want to restore the system? This will delete all orders, payments, purchases, and shifts data. This action cannot be undone!"},show:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},emits:["confirm","cancel"],setup(f,{emit:a}){const o=a,v=()=>o("confirm"),u=()=>o("cancel");return(n,i)=>(c(),j(F,{name:"fade-slide"},{default:E(()=>[f.show?(c(),m("div",oe,[e("div",ae,[e("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110",onClick:u,title:"Close"},[...i[0]||(i[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])]),i[2]||(i[2]=e("div",{class:"flex justify-center mb-4"},[e("div",{class:"bg-yellow-100 p-3 rounded-full"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])])],-1)),e("h3",ne,w(f.title),1),e("p",ie,w(f.message),1),f.isLoading?(c(),m("div",re,[...i[1]||(i[1]=[e("div",{class:"spinner-border text-danger",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)])])):(c(),m("div",le,[e("button",{onClick:v,class:"btn btn-danger d-flex align-items-center gap-1 px-3 py-2 rounded-pill text-white"}," Yes, Restore "),e("button",{onClick:u,class:"btn btn-secondary d-flex align-items-center gap-1 px-3 py-2 rounded-pill text-white"}," Cancel ")]))])])):H("",!0)]),_:1}))}},ce=R(de,[["__scopeId","data-v-4fd1059f"]]),ue={class:"settings-wrapper"},pe={class:"settings-sidebar-horizontal mb-3"},me={class:"settings-nav-horizontal shadow-sm rounded-4 p-3"},fe={class:"nav-horizontal-container"},ve={class:"nav nav-pills nav-horizontal gap-2"},ge=["onClick"],he={class:"fw-semibold small"},be={class:"row g-0"},we={class:"col-12"},ye={class:"card shadow-sm border-0 rounded-4"},_e={class:"card-header border-0 p-4"},xe={class:"d-flex align-items-start gap-3"},Se={class:"icon-wrapper"},ke={class:"flex-grow-1"},Ce={class:"mb-1 fw-bold"},Te={class:"text-muted small mb-0"},Me={class:"card-body p-4 settings-content"},Oe={class:"card-footer bg-light border-0 p-4"},Re={class:"d-flex justify-content-between align-items-center"},je=["disabled"],De={key:0},Be={key:1},Ie={__name:"SoftwareSetting",props:{profile:Object,profileData:Object},setup(f){const a=f,o=l(1),v=l({}),u=l(!1),n=l({...a.profileData.step1,...a.profileData.step2,...a.profileData.step3,...a.profileData.step4,...a.profileData.step5,...a.profileData.step6,...a.profileData.step7,...a.profileData.step8,...a.profileData.step9}),i=l(!1),y=l(!1),_=l(!1),g=l(!1),p=l(""),D=()=>{i.value=!0},B=()=>{i.value=!1,y.value=!0,p.value=""},I=async s=>{g.value=!0,p.value="";try{const{data:t}=await T.post(route("settings.verify-password"),{password:s});if(!t.success){p.value=t.message,g.value=!1;return}g.value=!1,y.value=!1,p.value="",_.value=!0;const{data:r}=await T.post(route("settings.restore"));r.success===!0?(d.success(r.message,{autoClose:3e3,position:d.POSITION.BOTTOM_RIGHT}),setTimeout(()=>{window.location.reload()},1500)):d.error(r.message,{autoClose:4e3,position:d.POSITION.BOTTOM_RIGHT})}catch(t){console.error("Error:",t),t.response?.data?.message?p.value=t.response.data.message:d.error("An error occurred while restoring the system.",{autoClose:4e3,position:d.POSITION.BOTTOM_RIGHT})}finally{g.value=!1,_.value=!1}},V=()=>{y.value=!1,p.value=""},L=()=>{i.value=!1},x=[{id:1,title:"Language & Location",icon:"bi-globe",description:"Set your timezone, language, and regional preferences"},{id:2,title:"Business Information",icon:"bi-building",description:"Update restaurant name, contact details, and address"},{id:3,title:"Currency & Locale",icon:"bi-currency-dollar",description:"Configure currency, number and date formats"},{id:4,title:"Tax & VAT",icon:"bi-receipt",description:"Manage tax registration and rates"},{id:5,title:"Service Options",icon:"bi-cart-check",description:"Configure order types and table management"},{id:6,title:"Receipt & Printers",icon:"bi-printer",description:"Customize receipts and printer settings"},{id:7,title:"Payment Methods",icon:"bi-credit-card",description:"Enable and configure payment options"},{id:8,title:"Business Hours",icon:"bi-clock",description:"Set your operating hours"},{id:9,title:"Advanced Features",icon:"bi-gear",description:"Advanced features and settings"}],P={1:Y,2:J,3:K,4:Q,5:W,6:X,7:Z,8:ee,9:te},z=k(()=>P[o.value]),S=k(()=>x.find(s=>s.id===o.value));k(()=>o.value/x.length*100);const $=s=>{Object.assign(n.value,s?.data||{})};async function A(){v.value={},u.value=!0;try{let s,t={};o.value===2&&n.value.logo_file||o.value===6&&n.value.receipt_logo_file?(s=new FormData,Object.keys(n.value).forEach(h=>{n.value[h]!==null&&n.value[h]!==void 0&&s.append(h,n.value[h])}),t.headers={"Content-Type":"multipart/form-data"}):s=n.value;const{data:r}=await T.post(`/settings/update/${o.value}`,s,t);Object.assign(n.value,r.data||{}),d.success("Settings updated successfully!")}catch(s){s?.response?.status===422&&s.response.data?.errors?(v.value=s.response.data.errors,d.error("Please fix the validation errors.")):(d.error(s.response?.data?.message||"An unexpected error occurred."),console.error(s))}finally{u.value=!1}}function N(s){v.value={},o.value=s}return(s,t)=>(c(),m(O,null,[e("div",ue,[e("div",{class:"settings-header mb-2 px-2"},[e("div",{class:"d-flex justify-content-between align-items-center"},[t[1]||(t[1]=e("div",null,[e("h3",{class:"fw-bold mb-0"},"Restaurant Settings")],-1)),e("div",null,[e("button",{onClick:D,class:"btn btn-danger d-flex align-items-center gap-2 px-3 py-2 rounded-pill"},[...t[0]||(t[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),b(" Restore System ",-1)])])])])]),e("div",pe,[e("div",me,[t[2]||(t[2]=e("div",{class:"mb-3"},[e("h6",{class:"text-muted text-uppercase small fw-bold mb-3"},[e("i",{class:"bi bi-gear-fill me-2"}),b(" Settings ")])],-1)),e("div",fe,[e("ul",ve,[(c(),m(O,null,G(x,r=>e("li",{class:"nav-item",key:r.id},[e("a",{class:C(["nav-link-horizontal d-flex align-items-center gap-2 py-2 px-4",{active:o.value===r.id}]),onClick:q(h=>N(r.id),["prevent"]),href:"#",role:"button"},[e("i",{class:C(r.icon)},null,2),e("span",he,w(r.title),1)],10,ge)])),64))])])])]),e("div",be,[e("div",we,[e("div",ye,[e("div",_e,[e("div",xe,[e("div",Se,[e("i",{class:C([S.value?.icon,"fs-3"])},null,2)]),e("div",ke,[e("h5",Ce,w(S.value?.title),1),e("p",Te,w(S.value?.description),1)])])]),e("div",Me,[(c(),j(U(z.value),{key:o.value,model:n.value,"form-errors":v.value,onSave:$},null,40,["model","form-errors"]))]),e("div",Oe,[e("div",Re,[t[5]||(t[5]=e("small",{class:"text-muted"},[e("i",{class:"bi bi-info-circle me-1"}),b(" Changes will be saved immediately ")],-1)),e("button",{class:"btn btn-primary px-4 rounded-pill",onClick:A,disabled:u.value},[u.value?(c(),m("span",De,[...t[3]||(t[3]=[e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),b(" Saving... ",-1)])])):(c(),m("span",Be,[...t[4]||(t[4]=[e("i",{class:"bi bi-check-circle me-2"},null,-1),b(" Save Changes ",-1)])]))],8,je)])])])])])]),M(ce,{show:i.value,isLoading:!1,title:"Restore System",message:"Are you sure you want to restore the system? This will permanently delete all orders, payments, purchases, kitchen orders, and shifts data. This action cannot be undone!",onConfirm:B,onCancel:L},null,8,["show"]),M(se,{show:y.value,isVerifying:g.value||_.value,errorMessage:p.value,onConfirm:I,onCancel:V},null,8,["show","isVerifying","errorMessage"])],64))}},We=R(Ie,[["__scopeId","data-v-95e7e423"]]);export{We as default};
