import{_ as O,R as V,r as D,y as c,c as N,f as n,b as o,m as i,e as t,F as k,g as h,i as r,t as u,k as b,Y as g,v as y,l as U,B}from"./app-1wYiyYIQ.js";const M={key:0,class:"fw-bold mb-3"},j={class:"check-list mb-3"},I=["checked","onChange"],Y={class:"check-tile__text"},z={key:0,class:"text-danger"},A={key:1,class:"mb-3"},F={class:"segmented"},L={key:0,class:"text-danger"},R={key:2,class:"mb-3",style:{"max-width":"420px"}},$={key:0,class:"d-flex align-items-center gap-2"},P={key:1,class:"mt-2"},W={key:2,class:"text-danger"},q={class:"modal fade",id:"modalTableDetails",tabindex:"-1","aria-hidden":"true"},G={class:"modal-dialog modal-lg modal-dialog-centered"},H={class:"modal-content rounded-4"},J={class:"modal-body"},K={class:"d-flex flex-column gap-4"},Q={class:"form-label small mb-2"},X=["onUpdate:modelValue"],Z=["onUpdate:modelValue"],ee={class:"modal-footer mt-4"},ae=["disabled"],te={key:0},le={key:1},se={class:"mb-3"},ne={class:"segmented"},oe={key:0,class:"text-danger"},de={__name:"Step5",props:{model:Object,formErrors:Object,isOnboarding:{type:Boolean,default:!1}},emits:["save"],setup(d,{emit:E}){const m=d,f=E,e=V({order_types:m.model.order_types??[],table_management_enabled:m.model.table_management_enabled?1:0,tables:m.model.tables??0,online_ordering:m.model.online_ordering??!0,table_details:m.model.table_details??[]}),_=D(!1),S=()=>{_.value=!0,setTimeout(()=>{_.value=!1},800)},w=()=>{e.table_details=Array.from({length:e.tables},()=>({name:"",chairs:""}))};c(()=>e.tables,s=>{e.table_details=Array.from({length:s},(a,l)=>({name:e.table_details[l]?.name??"",chairs:e.table_details[l]?.chairs??""}))},{immediate:!0}),c(e,()=>{const s={step:5,data:{order_types:e.order_types,table_management_enabled:e.table_management_enabled,online_ordering:e.online_ordering}};e.order_types.includes("dine_in")&&e.table_management_enabled===1&&(s.data.tables=e.tables,s.data.table_details=e.table_details),e.order_types.includes("dine_in")&&e.table_management_enabled===1||(delete s.data.tables,delete s.data.table_details),f("save",s)},{deep:!0,immediate:!0}),c(e,()=>{const s={step:5,data:{order_types:e.order_types,online_ordering:e.online_ordering}};e.order_types.includes("dine_in")&&e.table_management_enabled===1?(s.data.table_management_enabled=1,s.data.tables=e.tables,s.data.table_details=e.table_details):s.data.table_management_enabled=0,f("save",s)},{deep:!0,immediate:!0});function x(s){const a=e.order_types.indexOf(s);a===-1?e.order_types.push(s):e.order_types.splice(a,1),emitSave()}c(()=>e.order_types,s=>{s.includes("dine_in")||(e.table_management_enabled=0,e.tables=0,e.table_details=[])},{deep:!0});const C=[{key:"dine_in",label:"Dine-in",variant:"default"},{key:"takeaway",label:"Takeaway",variant:"primary"},{key:"delivery",label:"Delivery",variant:"success"}],T=N(()=>m.formErrors?Object.keys(m.formErrors).some(s=>s.startsWith("table_details.")):!1);return(s,a)=>(o(),n("div",null,[m.isOnboarding?(o(),n("h5",M,"Step 5 of 9 - Order Type & Service Options")):i("",!0),a[19]||(a[19]=t("label",{class:"mb-2 fw-semibold"},"Enable Order types",-1)),t("div",j,[(o(),n(k,null,h(C,l=>t("label",{key:l.key,class:r(["check-tile",[`check-tile--${l.variant}`,{"is-checked":e.order_types.includes(l.key)}]])},[t("input",{class:r(["check-tile__input",{"is-invalid":d.formErrors?.order_types}]),type:"checkbox",checked:e.order_types.includes(l.key),onChange:p=>x(l.key)},null,42,I),a[10]||(a[10]=t("span",{class:"check-tile__badge"},[t("svg",{class:"check-icon",viewBox:"0 0 20 20",width:"14",height:"14","aria-hidden":"true"},[t("path",{fill:"currentColor",d:"M7.7 14.1 3.9 10.3l1.4-1.4 2.4 2.4 6-6 1.4 1.4-7.4 7.4z"})])],-1)),t("span",Y,u(l.label),1)],2)),64)),d.formErrors?.order_types?(o(),n("small",z,u(d.formErrors.order_types[0]),1)):i("",!0)]),e.order_types.includes("dine_in")?(o(),n("div",A,[a[11]||(a[11]=t("label",{class:"form-label d-block mb-2"},"Enable Table Management?",-1)),t("div",F,[b(t("input",{class:r(["segmented__input",{"is-invalid":d.formErrors?.table_management_enabled}]),type:"radio",id:"tm-yes",value:1,"onUpdate:modelValue":a[0]||(a[0]=l=>e.table_management_enabled=l),onChange:a[1]||(a[1]=(...l)=>s.emitSave&&s.emitSave(...l))},null,34),[[g,e.table_management_enabled]]),t("label",{class:r(["segmented__btn",{"is-active":e.table_management_enabled===1}]),for:"tm-yes"},"YES",2),b(t("input",{class:"segmented__input",type:"radio",id:"tm-no",value:0,"onUpdate:modelValue":a[2]||(a[2]=l=>e.table_management_enabled=l),onChange:a[3]||(a[3]=(...l)=>s.emitSave&&s.emitSave(...l))},null,544),[[g,e.table_management_enabled]]),t("label",{class:r(["segmented__btn",{"is-active":e.table_management_enabled===0}]),for:"tm-no"},"NO",2)]),a[12]||(a[12]=t("br",null,null,-1)),d.formErrors?.table_management_enabled?(o(),n("small",L,u(d.formErrors.table_management_enabled[0]),1)):i("",!0)])):i("",!0),e.table_management_enabled===1&&e.order_types.includes("dine_in")?(o(),n("div",R,[a[16]||(a[16]=t("label",{class:"form-label"},"Number of Tables",-1)),e.order_types.includes("dine_in")?(o(),n("div",$,[b(t("input",{type:"number",min:"1",class:r(["form-control",{"is-invalid":d.formErrors?.tables}]),"onUpdate:modelValue":a[4]||(a[4]=l=>e.tables=l),onInput:a[5]||(a[5]=(...l)=>s.emitSave&&s.emitSave(...l))},null,34),[[y,e.tables,void 0,{number:!0}]]),a[13]||(a[13]=t("button",{"data-bs-toggle":"modal","data-bs-target":"#modalTableDetails",class:"btn btn-primary btn-sm rounded-pill px-4 py-2",style:{"white-space":"nowrap"}},[t("i",{class:"fa fa-plus me-1"}),U(" Enter Names ")],-1)),a[14]||(a[14]=t("br",null,null,-1))])):i("",!0),T.value?(o(),n("div",P,[...a[15]||(a[15]=[t("small",{class:"text-danger d-block"}," Please Enter Tables Details. Click on Enter Names. ",-1)])])):i("",!0),d.formErrors?.tables?(o(),n("small",W,u(d.formErrors.tables[0]),1)):i("",!0)])):i("",!0),t("div",q,[t("div",G,[t("div",H,[a[17]||(a[17]=B('<div class="modal-header" data-v-86e33d46><h5 class="modal-title fw-semibold" data-v-86e33d46>Enter table details</h5><button class="btn-close" data-bs-dismiss="modal" data-v-86e33d46></button></div><button class="absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110" data-bs-dismiss="modal" aria-label="Close" title="Close" data-v-86e33d46><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" data-v-86e33d46><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" data-v-86e33d46></path></svg></button>',2)),t("div",J,[t("div",K,[(o(!0),n(k,null,h(e.table_details,(l,p)=>(o(),n("div",{key:p,class:"p-3 shadow-sm rounded bg-light"},[t("label",Q,"Table "+u(p+1),1),b(t("input",{type:"text",class:"form-control mb-2","onUpdate:modelValue":v=>l.name=v,placeholder:"Enter a table name"},null,8,X),[[y,l.name]]),b(t("input",{type:"number",class:"form-control","onUpdate:modelValue":v=>l.chairs=v,min:"1",placeholder:"Enter number of chairs"},null,8,Z),[[y,l.chairs]])]))),128))])]),t("div",ee,[t("button",{class:"btn btn-primary rounded-pill py-2 px-2",disabled:_.value,onClick:S,"data-bs-dismiss":"modal"},[_.value?(o(),n("span",le,"Saving...")):(o(),n("span",te,"Save"))],8,ae),t("button",{class:"btn btn-secondary rounded-pill px-2 py-2 ms-2","data-bs-dismiss":"modal",onClick:w}," Cancel ")])])])]),t("div",se,[a[18]||(a[18]=t("label",{class:"form-label d-block mb-2"},"Enable Online Ordering Integration",-1)),t("div",ne,[b(t("input",{class:r(["segmented__input",{"is-invalid":d.formErrors?.online_ordering}]),type:"radio",id:"oo-yes",value:!0,"onUpdate:modelValue":a[6]||(a[6]=l=>e.online_ordering=l),onChange:a[7]||(a[7]=(...l)=>s.emitSave&&s.emitSave(...l))},null,34),[[g,e.online_ordering]]),t("label",{class:r(["segmented__btn",{"is-active":e.online_ordering===!0}]),for:"oo-yes"},"YES",2),b(t("input",{class:"segmented__input",type:"radio",id:"oo-no",value:!1,"onUpdate:modelValue":a[8]||(a[8]=l=>e.online_ordering=l),onChange:a[9]||(a[9]=(...l)=>s.emitSave&&s.emitSave(...l))},null,544),[[g,e.online_ordering]]),t("label",{class:r(["segmented__btn",{"is-active":e.online_ordering===!1}]),for:"oo-no"},"NO",2)]),d.formErrors?.online_ordering?(o(),n("small",oe,u(d.formErrors.online_ordering[0]),1)):i("",!0)])]))}},re=O(de,[["__scopeId","data-v-86e33d46"]]);export{re as default};
