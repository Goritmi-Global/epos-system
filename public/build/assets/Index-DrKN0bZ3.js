import{b6 as ma,y as Cs,c as we,k as ot,m as X,ae as Xi,f as T,b as C,e as c,l as fe,t as N,F as Oe,g as ze,_ as Ob,o as ar,n as fu,r as W,A as Db,z as kb,q as z,d as Ft,u as ue,h as Nb,w as pu,i as Xt,v as ni,x as ji,K as ao,S as Wd,a as Lb}from"./app-BPm8Jqa8.js";import{_ as $b}from"./Master-B-oa1_ok.js";import Mb from"./ConfirmOrderModal-f-0-ypTX.js";import Pb from"./ReceiptModal-DaRraOns.js";import Rb from"./PromoModal-Da26eGMq.js";import Fb from"./KotModal-DUr5bCAg.js";import{u as qb}from"./useFormatters-SHi38_16.js";import Bb from"./PosOrdersModal-BFyykt1A.js";import{F as Wb}from"./FilterModal-DGgiBVnc.js";import{s as Ud}from"./index-CYhDVrii.js";import Ub from"./DiscountModal-CSH1VrFI.js";import Vb from"./PendingOrdersModal-CHHit-h2.js";import{P as Vd}from"./pencil-DVWli0Kn.js";import{E as Hb}from"./eye-BumU2KNP.js";import"./index-CkTwpF0O.js";import"./createLucideIcon-CtC6jb4d.js";import"./index-z4fDpXBL.js";import"./index-Cydqvc8x.js";import"./sun-BfHbTYSR.js";import"./StripePayment-DRmUV4mj.js";import"./SplitPayment-DYAXJB-_.js";import"./Receipt-BHaU6Sy1.js";import"./clock-C1Wwpq-x.js";import"./circle-check-big-DQgyAkGs.js";import"./circle-x-h656Zol4.js";import"./printer-D760sshs.js";import"./index-CVWe-1l6.js";import"./index-CYhawANY.js";import"./index-Ddx3-wbt.js";var qt="top",cn="bottom",dn="right",Bt="left",Na="auto",Er=[qt,cn,dn,Bt],Os="start",hr="end",If="clippingParents",Ru="viewport",cr="popper",Of="reference",Du=Er.reduce(function(u,n){return u.concat([n+"-"+Os,n+"-"+hr])},[]),Fu=[].concat(Er,[Na]).reduce(function(u,n){return u.concat([n,n+"-"+Os,n+"-"+hr])},[]),Df="beforeRead",kf="read",Nf="afterRead",Lf="beforeMain",$f="main",Mf="afterMain",Pf="beforeWrite",Rf="write",Ff="afterWrite",qf=[Df,kf,Nf,Lf,$f,Mf,Pf,Rf,Ff];function ri(u){return u?(u.nodeName||"").toLowerCase():null}function fn(u){if(u==null)return window;if(u.toString()!=="[object Window]"){var n=u.ownerDocument;return n&&n.defaultView||window}return u}function Ds(u){var n=fn(u).Element;return u instanceof n||u instanceof Element}function En(u){var n=fn(u).HTMLElement;return u instanceof n||u instanceof HTMLElement}function qu(u){if(typeof ShadowRoot>"u")return!1;var n=fn(u).ShadowRoot;return u instanceof n||u instanceof ShadowRoot}function zb(u){var n=u.state;Object.keys(n.elements).forEach(function(s){var f=n.styles[s]||{},v=n.attributes[s]||{},y=n.elements[s];!En(y)||!ri(y)||(Object.assign(y.style,f),Object.keys(v).forEach(function(w){var S=v[w];S===!1?y.removeAttribute(w):y.setAttribute(w,S===!0?"":S)}))})}function Kb(u){var n=u.state,s={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,s.popper),n.styles=s,n.elements.arrow&&Object.assign(n.elements.arrow.style,s.arrow),function(){Object.keys(n.elements).forEach(function(f){var v=n.elements[f],y=n.attributes[f]||{},w=Object.keys(n.styles.hasOwnProperty(f)?n.styles[f]:s[f]),S=w.reduce(function(O,U){return O[U]="",O},{});!En(v)||!ri(v)||(Object.assign(v.style,S),Object.keys(y).forEach(function(O){v.removeAttribute(O)}))})}}const Bu={name:"applyStyles",enabled:!0,phase:"write",fn:zb,effect:Kb,requires:["computeStyles"]};function ii(u){return u.split("-")[0]}var Is=Math.max,Ia=Math.min,_r=Math.round;function ku(){var u=navigator.userAgentData;return u!=null&&u.brands&&Array.isArray(u.brands)?u.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function Bf(){return!/^((?!chrome|android).)*safari/i.test(ku())}function vr(u,n,s){n===void 0&&(n=!1),s===void 0&&(s=!1);var f=u.getBoundingClientRect(),v=1,y=1;n&&En(u)&&(v=u.offsetWidth>0&&_r(f.width)/u.offsetWidth||1,y=u.offsetHeight>0&&_r(f.height)/u.offsetHeight||1);var w=Ds(u)?fn(u):window,S=w.visualViewport,O=!Bf()&&s,U=(f.left+(O&&S?S.offsetLeft:0))/v,P=(f.top+(O&&S?S.offsetTop:0))/y,V=f.width/v,Z=f.height/y;return{width:V,height:Z,top:P,right:U+V,bottom:P+Z,left:U,x:U,y:P}}function Wu(u){var n=vr(u),s=u.offsetWidth,f=u.offsetHeight;return Math.abs(n.width-s)<=1&&(s=n.width),Math.abs(n.height-f)<=1&&(f=n.height),{x:u.offsetLeft,y:u.offsetTop,width:s,height:f}}function Wf(u,n){var s=n.getRootNode&&n.getRootNode();if(u.contains(n))return!0;if(s&&qu(s)){var f=n;do{if(f&&u.isSameNode(f))return!0;f=f.parentNode||f.host}while(f)}return!1}function Ci(u){return fn(u).getComputedStyle(u)}function Yb(u){return["table","td","th"].indexOf(ri(u))>=0}function ts(u){return((Ds(u)?u.ownerDocument:u.document)||window.document).documentElement}function La(u){return ri(u)==="html"?u:u.assignedSlot||u.parentNode||(qu(u)?u.host:null)||ts(u)}function Hd(u){return!En(u)||Ci(u).position==="fixed"?null:u.offsetParent}function Gb(u){var n=/firefox/i.test(ku()),s=/Trident/i.test(ku());if(s&&En(u)){var f=Ci(u);if(f.position==="fixed")return null}var v=La(u);for(qu(v)&&(v=v.host);En(v)&&["html","body"].indexOf(ri(v))<0;){var y=Ci(v);if(y.transform!=="none"||y.perspective!=="none"||y.contain==="paint"||["transform","perspective"].indexOf(y.willChange)!==-1||n&&y.willChange==="filter"||n&&y.filter&&y.filter!=="none")return v;v=v.parentNode}return null}function vo(u){for(var n=fn(u),s=Hd(u);s&&Yb(s)&&Ci(s).position==="static";)s=Hd(s);return s&&(ri(s)==="html"||ri(s)==="body"&&Ci(s).position==="static")?n:s||Gb(u)||n}function Uu(u){return["top","bottom"].indexOf(u)>=0?"x":"y"}function fo(u,n,s){return Is(u,Ia(n,s))}function jb(u,n,s){var f=fo(u,n,s);return f>s?s:f}function Uf(){return{top:0,right:0,bottom:0,left:0}}function Vf(u){return Object.assign({},Uf(),u)}function Hf(u,n){return n.reduce(function(s,f){return s[f]=u,s},{})}var Qb=function(n,s){return n=typeof n=="function"?n(Object.assign({},s.rects,{placement:s.placement})):n,Vf(typeof n!="number"?n:Hf(n,Er))};function Xb(u){var n,s=u.state,f=u.name,v=u.options,y=s.elements.arrow,w=s.modifiersData.popperOffsets,S=ii(s.placement),O=Uu(S),U=[Bt,dn].indexOf(S)>=0,P=U?"height":"width";if(!(!y||!w)){var V=Qb(v.padding,s),Z=Wu(y),K=O==="y"?qt:Bt,ne=O==="y"?cn:dn,ie=s.rects.reference[P]+s.rects.reference[O]-w[O]-s.rects.popper[P],G=w[O]-s.rects.reference[O],ae=vo(y),Ce=ae?O==="y"?ae.clientHeight||0:ae.clientWidth||0:0,xe=ie/2-G/2,Q=V[K],ce=Ce-Z[P]-V[ne],be=Ce/2-Z[P]/2+xe,Te=fo(Q,be,ce),We=O;s.modifiersData[f]=(n={},n[We]=Te,n.centerOffset=Te-be,n)}}function Zb(u){var n=u.state,s=u.options,f=s.element,v=f===void 0?"[data-popper-arrow]":f;v!=null&&(typeof v=="string"&&(v=n.elements.popper.querySelector(v),!v)||Wf(n.elements.popper,v)&&(n.elements.arrow=v))}const zf={name:"arrow",enabled:!0,phase:"main",fn:Xb,effect:Zb,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function mr(u){return u.split("-")[1]}var Jb={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ey(u,n){var s=u.x,f=u.y,v=n.devicePixelRatio||1;return{x:_r(s*v)/v||0,y:_r(f*v)/v||0}}function zd(u){var n,s=u.popper,f=u.popperRect,v=u.placement,y=u.variation,w=u.offsets,S=u.position,O=u.gpuAcceleration,U=u.adaptive,P=u.roundOffsets,V=u.isFixed,Z=w.x,K=Z===void 0?0:Z,ne=w.y,ie=ne===void 0?0:ne,G=typeof P=="function"?P({x:K,y:ie}):{x:K,y:ie};K=G.x,ie=G.y;var ae=w.hasOwnProperty("x"),Ce=w.hasOwnProperty("y"),xe=Bt,Q=qt,ce=window;if(U){var be=vo(s),Te="clientHeight",We="clientWidth";if(be===fn(s)&&(be=ts(s),Ci(be).position!=="static"&&S==="absolute"&&(Te="scrollHeight",We="scrollWidth")),be=be,v===qt||(v===Bt||v===dn)&&y===hr){Q=cn;var Ue=V&&be===ce&&ce.visualViewport?ce.visualViewport.height:be[Te];ie-=Ue-f.height,ie*=O?1:-1}if(v===Bt||(v===qt||v===cn)&&y===hr){xe=dn;var me=V&&be===ce&&ce.visualViewport?ce.visualViewport.width:be[We];K-=me-f.width,K*=O?1:-1}}var Ve=Object.assign({position:S},U&&Jb),dt=P===!0?ey({x:K,y:ie},fn(s)):{x:K,y:ie};if(K=dt.x,ie=dt.y,O){var Ke;return Object.assign({},Ve,(Ke={},Ke[Q]=Ce?"0":"",Ke[xe]=ae?"0":"",Ke.transform=(ce.devicePixelRatio||1)<=1?"translate("+K+"px, "+ie+"px)":"translate3d("+K+"px, "+ie+"px, 0)",Ke))}return Object.assign({},Ve,(n={},n[Q]=Ce?ie+"px":"",n[xe]=ae?K+"px":"",n.transform="",n))}function ty(u){var n=u.state,s=u.options,f=s.gpuAcceleration,v=f===void 0?!0:f,y=s.adaptive,w=y===void 0?!0:y,S=s.roundOffsets,O=S===void 0?!0:S,U={placement:ii(n.placement),variation:mr(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:v,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,zd(Object.assign({},U,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:w,roundOffsets:O})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,zd(Object.assign({},U,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:O})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}const Vu={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ty,data:{}};var ga={passive:!0};function ny(u){var n=u.state,s=u.instance,f=u.options,v=f.scroll,y=v===void 0?!0:v,w=f.resize,S=w===void 0?!0:w,O=fn(n.elements.popper),U=[].concat(n.scrollParents.reference,n.scrollParents.popper);return y&&U.forEach(function(P){P.addEventListener("scroll",s.update,ga)}),S&&O.addEventListener("resize",s.update,ga),function(){y&&U.forEach(function(P){P.removeEventListener("scroll",s.update,ga)}),S&&O.removeEventListener("resize",s.update,ga)}}const Hu={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ny,data:{}};var iy={left:"right",right:"left",bottom:"top",top:"bottom"};function Ca(u){return u.replace(/left|right|bottom|top/g,function(n){return iy[n]})}var sy={start:"end",end:"start"};function Kd(u){return u.replace(/start|end/g,function(n){return sy[n]})}function zu(u){var n=fn(u),s=n.pageXOffset,f=n.pageYOffset;return{scrollLeft:s,scrollTop:f}}function Ku(u){return vr(ts(u)).left+zu(u).scrollLeft}function ry(u,n){var s=fn(u),f=ts(u),v=s.visualViewport,y=f.clientWidth,w=f.clientHeight,S=0,O=0;if(v){y=v.width,w=v.height;var U=Bf();(U||!U&&n==="fixed")&&(S=v.offsetLeft,O=v.offsetTop)}return{width:y,height:w,x:S+Ku(u),y:O}}function oy(u){var n,s=ts(u),f=zu(u),v=(n=u.ownerDocument)==null?void 0:n.body,y=Is(s.scrollWidth,s.clientWidth,v?v.scrollWidth:0,v?v.clientWidth:0),w=Is(s.scrollHeight,s.clientHeight,v?v.scrollHeight:0,v?v.clientHeight:0),S=-f.scrollLeft+Ku(u),O=-f.scrollTop;return Ci(v||s).direction==="rtl"&&(S+=Is(s.clientWidth,v?v.clientWidth:0)-y),{width:y,height:w,x:S,y:O}}function Yu(u){var n=Ci(u),s=n.overflow,f=n.overflowX,v=n.overflowY;return/auto|scroll|overlay|hidden/.test(s+v+f)}function Kf(u){return["html","body","#document"].indexOf(ri(u))>=0?u.ownerDocument.body:En(u)&&Yu(u)?u:Kf(La(u))}function po(u,n){var s;n===void 0&&(n=[]);var f=Kf(u),v=f===((s=u.ownerDocument)==null?void 0:s.body),y=fn(f),w=v?[y].concat(y.visualViewport||[],Yu(f)?f:[]):f,S=n.concat(w);return v?S:S.concat(po(La(w)))}function Nu(u){return Object.assign({},u,{left:u.x,top:u.y,right:u.x+u.width,bottom:u.y+u.height})}function ay(u,n){var s=vr(u,!1,n==="fixed");return s.top=s.top+u.clientTop,s.left=s.left+u.clientLeft,s.bottom=s.top+u.clientHeight,s.right=s.left+u.clientWidth,s.width=u.clientWidth,s.height=u.clientHeight,s.x=s.left,s.y=s.top,s}function Yd(u,n,s){return n===Ru?Nu(ry(u,s)):Ds(n)?ay(n,s):Nu(oy(ts(u)))}function ly(u){var n=po(La(u)),s=["absolute","fixed"].indexOf(Ci(u).position)>=0,f=s&&En(u)?vo(u):u;return Ds(f)?n.filter(function(v){return Ds(v)&&Wf(v,f)&&ri(v)!=="body"}):[]}function uy(u,n,s,f){var v=n==="clippingParents"?ly(u):[].concat(n),y=[].concat(v,[s]),w=y[0],S=y.reduce(function(O,U){var P=Yd(u,U,f);return O.top=Is(P.top,O.top),O.right=Ia(P.right,O.right),O.bottom=Ia(P.bottom,O.bottom),O.left=Is(P.left,O.left),O},Yd(u,w,f));return S.width=S.right-S.left,S.height=S.bottom-S.top,S.x=S.left,S.y=S.top,S}function Yf(u){var n=u.reference,s=u.element,f=u.placement,v=f?ii(f):null,y=f?mr(f):null,w=n.x+n.width/2-s.width/2,S=n.y+n.height/2-s.height/2,O;switch(v){case qt:O={x:w,y:n.y-s.height};break;case cn:O={x:w,y:n.y+n.height};break;case dn:O={x:n.x+n.width,y:S};break;case Bt:O={x:n.x-s.width,y:S};break;default:O={x:n.x,y:n.y}}var U=v?Uu(v):null;if(U!=null){var P=U==="y"?"height":"width";switch(y){case Os:O[U]=O[U]-(n[P]/2-s[P]/2);break;case hr:O[U]=O[U]+(n[P]/2-s[P]/2);break}}return O}function gr(u,n){n===void 0&&(n={});var s=n,f=s.placement,v=f===void 0?u.placement:f,y=s.strategy,w=y===void 0?u.strategy:y,S=s.boundary,O=S===void 0?If:S,U=s.rootBoundary,P=U===void 0?Ru:U,V=s.elementContext,Z=V===void 0?cr:V,K=s.altBoundary,ne=K===void 0?!1:K,ie=s.padding,G=ie===void 0?0:ie,ae=Vf(typeof G!="number"?G:Hf(G,Er)),Ce=Z===cr?Of:cr,xe=u.rects.popper,Q=u.elements[ne?Ce:Z],ce=uy(Ds(Q)?Q:Q.contextElement||ts(u.elements.popper),O,P,w),be=vr(u.elements.reference),Te=Yf({reference:be,element:xe,placement:v}),We=Nu(Object.assign({},xe,Te)),Ue=Z===cr?We:be,me={top:ce.top-Ue.top+ae.top,bottom:Ue.bottom-ce.bottom+ae.bottom,left:ce.left-Ue.left+ae.left,right:Ue.right-ce.right+ae.right},Ve=u.modifiersData.offset;if(Z===cr&&Ve){var dt=Ve[v];Object.keys(me).forEach(function(Ke){var At=[dn,cn].indexOf(Ke)>=0?1:-1,Wt=[qt,cn].indexOf(Ke)>=0?"y":"x";me[Ke]+=dt[Wt]*At})}return me}function cy(u,n){n===void 0&&(n={});var s=n,f=s.placement,v=s.boundary,y=s.rootBoundary,w=s.padding,S=s.flipVariations,O=s.allowedAutoPlacements,U=O===void 0?Fu:O,P=mr(f),V=P?S?Du:Du.filter(function(ne){return mr(ne)===P}):Er,Z=V.filter(function(ne){return U.indexOf(ne)>=0});Z.length===0&&(Z=V);var K=Z.reduce(function(ne,ie){return ne[ie]=gr(u,{placement:ie,boundary:v,rootBoundary:y,padding:w})[ii(ie)],ne},{});return Object.keys(K).sort(function(ne,ie){return K[ne]-K[ie]})}function dy(u){if(ii(u)===Na)return[];var n=Ca(u);return[Kd(u),n,Kd(n)]}function fy(u){var n=u.state,s=u.options,f=u.name;if(!n.modifiersData[f]._skip){for(var v=s.mainAxis,y=v===void 0?!0:v,w=s.altAxis,S=w===void 0?!0:w,O=s.fallbackPlacements,U=s.padding,P=s.boundary,V=s.rootBoundary,Z=s.altBoundary,K=s.flipVariations,ne=K===void 0?!0:K,ie=s.allowedAutoPlacements,G=n.options.placement,ae=ii(G),Ce=ae===G,xe=O||(Ce||!ne?[Ca(G)]:dy(G)),Q=[G].concat(xe).reduce(function(Sn,mt){return Sn.concat(ii(mt)===Na?cy(n,{placement:mt,boundary:P,rootBoundary:V,padding:U,flipVariations:ne,allowedAutoPlacements:ie}):mt)},[]),ce=n.rects.reference,be=n.rects.popper,Te=new Map,We=!0,Ue=Q[0],me=0;me<Q.length;me++){var Ve=Q[me],dt=ii(Ve),Ke=mr(Ve)===Os,At=[qt,cn].indexOf(dt)>=0,Wt=At?"width":"height",vt=gr(n,{placement:Ve,boundary:P,rootBoundary:V,altBoundary:Z,padding:U}),Qe=At?Ke?dn:Bt:Ke?cn:qt;ce[Wt]>be[Wt]&&(Qe=Ca(Qe));var kt=Ca(Qe),Cn=[];if(y&&Cn.push(vt[dt]<=0),S&&Cn.push(vt[Qe]<=0,vt[kt]<=0),Cn.every(function(Sn){return Sn})){Ue=Ve,We=!1;break}Te.set(Ve,Cn)}if(We)for(var Tn=ne?3:1,Ct=function(mt){var et=Q.find(function(Ii){var ft=Te.get(Ii);if(ft)return ft.slice(0,mt).every(function(In){return In})});if(et)return Ue=et,"break"},oi=Tn;oi>0;oi--){var Si=Ct(oi);if(Si==="break")break}n.placement!==Ue&&(n.modifiersData[f]._skip=!0,n.placement=Ue,n.reset=!0)}}const Gf={name:"flip",enabled:!0,phase:"main",fn:fy,requiresIfExists:["offset"],data:{_skip:!1}};function Gd(u,n,s){return s===void 0&&(s={x:0,y:0}),{top:u.top-n.height-s.y,right:u.right-n.width+s.x,bottom:u.bottom-n.height+s.y,left:u.left-n.width-s.x}}function jd(u){return[qt,dn,cn,Bt].some(function(n){return u[n]>=0})}function py(u){var n=u.state,s=u.name,f=n.rects.reference,v=n.rects.popper,y=n.modifiersData.preventOverflow,w=gr(n,{elementContext:"reference"}),S=gr(n,{altBoundary:!0}),O=Gd(w,f),U=Gd(S,v,y),P=jd(O),V=jd(U);n.modifiersData[s]={referenceClippingOffsets:O,popperEscapeOffsets:U,isReferenceHidden:P,hasPopperEscaped:V},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":P,"data-popper-escaped":V})}const jf={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:py};function hy(u,n,s){var f=ii(u),v=[Bt,qt].indexOf(f)>=0?-1:1,y=typeof s=="function"?s(Object.assign({},n,{placement:u})):s,w=y[0],S=y[1];return w=w||0,S=(S||0)*v,[Bt,dn].indexOf(f)>=0?{x:S,y:w}:{x:w,y:S}}function _y(u){var n=u.state,s=u.options,f=u.name,v=s.offset,y=v===void 0?[0,0]:v,w=Fu.reduce(function(P,V){return P[V]=hy(V,n.rects,y),P},{}),S=w[n.placement],O=S.x,U=S.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=O,n.modifiersData.popperOffsets.y+=U),n.modifiersData[f]=w}const Qf={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:_y};function vy(u){var n=u.state,s=u.name;n.modifiersData[s]=Yf({reference:n.rects.reference,element:n.rects.popper,placement:n.placement})}const Gu={name:"popperOffsets",enabled:!0,phase:"read",fn:vy,data:{}};function my(u){return u==="x"?"y":"x"}function gy(u){var n=u.state,s=u.options,f=u.name,v=s.mainAxis,y=v===void 0?!0:v,w=s.altAxis,S=w===void 0?!1:w,O=s.boundary,U=s.rootBoundary,P=s.altBoundary,V=s.padding,Z=s.tether,K=Z===void 0?!0:Z,ne=s.tetherOffset,ie=ne===void 0?0:ne,G=gr(n,{boundary:O,rootBoundary:U,padding:V,altBoundary:P}),ae=ii(n.placement),Ce=mr(n.placement),xe=!Ce,Q=Uu(ae),ce=my(Q),be=n.modifiersData.popperOffsets,Te=n.rects.reference,We=n.rects.popper,Ue=typeof ie=="function"?ie(Object.assign({},n.rects,{placement:n.placement})):ie,me=typeof Ue=="number"?{mainAxis:Ue,altAxis:Ue}:Object.assign({mainAxis:0,altAxis:0},Ue),Ve=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,dt={x:0,y:0};if(be){if(y){var Ke,At=Q==="y"?qt:Bt,Wt=Q==="y"?cn:dn,vt=Q==="y"?"height":"width",Qe=be[Q],kt=Qe+G[At],Cn=Qe-G[Wt],Tn=K?-We[vt]/2:0,Ct=Ce===Os?Te[vt]:We[vt],oi=Ce===Os?-We[vt]:-Te[vt],Si=n.elements.arrow,Sn=K&&Si?Wu(Si):{width:0,height:0},mt=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:Uf(),et=mt[At],Ii=mt[Wt],ft=fo(0,Te[vt],Sn[vt]),In=xe?Te[vt]/2-Tn-ft-et-me.mainAxis:Ct-ft-et-me.mainAxis,Ls=xe?-Te[vt]/2+Tn+ft+Ii+me.mainAxis:oi+ft+Ii+me.mainAxis,On=n.elements.arrow&&vo(n.elements.arrow),Ut=On?Q==="y"?On.clientTop||0:On.clientLeft||0:0,Le=(Ke=Ve?.[Q])!=null?Ke:0,Fe=Qe+In-Le-Ut,gt=Qe+Ls-Le,Vt=fo(K?Ia(kt,Fe):kt,Qe,K?Is(Cn,gt):Cn);be[Q]=Vt,dt[Q]=Vt-Qe}if(S){var Ht,Rn=Q==="x"?qt:Bt,Cr=Q==="x"?cn:dn,Ye=be[ce],pt=ce==="y"?"height":"width",Fn=Ye+G[Rn],Jt=Ye-G[Cr],pn=[qt,Bt].indexOf(ae)!==-1,tt=(Ht=Ve?.[ce])!=null?Ht:0,$s=pn?Fn:Ye-Te[pt]-We[pt]-tt+me.altAxis,qn=pn?Ye+Te[pt]+We[pt]-tt-me.altAxis:Jt,qe=K&&pn?jb($s,Ye,qn):fo(K?$s:Fn,Ye,K?qn:Jt);be[ce]=qe,dt[ce]=qe-Ye}n.modifiersData[f]=dt}}const Xf={name:"preventOverflow",enabled:!0,phase:"main",fn:gy,requiresIfExists:["offset"]};function by(u){return{scrollLeft:u.scrollLeft,scrollTop:u.scrollTop}}function yy(u){return u===fn(u)||!En(u)?zu(u):by(u)}function Ey(u){var n=u.getBoundingClientRect(),s=_r(n.width)/u.offsetWidth||1,f=_r(n.height)/u.offsetHeight||1;return s!==1||f!==1}function wy(u,n,s){s===void 0&&(s=!1);var f=En(n),v=En(n)&&Ey(n),y=ts(n),w=vr(u,v,s),S={scrollLeft:0,scrollTop:0},O={x:0,y:0};return(f||!f&&!s)&&((ri(n)!=="body"||Yu(y))&&(S=yy(n)),En(n)?(O=vr(n,!0),O.x+=n.clientLeft,O.y+=n.clientTop):y&&(O.x=Ku(y))),{x:w.left+S.scrollLeft-O.x,y:w.top+S.scrollTop-O.y,width:w.width,height:w.height}}function xy(u){var n=new Map,s=new Set,f=[];u.forEach(function(y){n.set(y.name,y)});function v(y){s.add(y.name);var w=[].concat(y.requires||[],y.requiresIfExists||[]);w.forEach(function(S){if(!s.has(S)){var O=n.get(S);O&&v(O)}}),f.push(y)}return u.forEach(function(y){s.has(y.name)||v(y)}),f}function Ay(u){var n=xy(u);return qf.reduce(function(s,f){return s.concat(n.filter(function(v){return v.phase===f}))},[])}function Cy(u){var n;return function(){return n||(n=new Promise(function(s){Promise.resolve().then(function(){n=void 0,s(u())})})),n}}function Ty(u){var n=u.reduce(function(s,f){var v=s[f.name];return s[f.name]=v?Object.assign({},v,f,{options:Object.assign({},v.options,f.options),data:Object.assign({},v.data,f.data)}):f,s},{});return Object.keys(n).map(function(s){return n[s]})}var Qd={placement:"bottom",modifiers:[],strategy:"absolute"};function Xd(){for(var u=arguments.length,n=new Array(u),s=0;s<u;s++)n[s]=arguments[s];return!n.some(function(f){return!(f&&typeof f.getBoundingClientRect=="function")})}function $a(u){u===void 0&&(u={});var n=u,s=n.defaultModifiers,f=s===void 0?[]:s,v=n.defaultOptions,y=v===void 0?Qd:v;return function(S,O,U){U===void 0&&(U=y);var P={placement:"bottom",orderedModifiers:[],options:Object.assign({},Qd,y),modifiersData:{},elements:{reference:S,popper:O},attributes:{},styles:{}},V=[],Z=!1,K={state:P,setOptions:function(ae){var Ce=typeof ae=="function"?ae(P.options):ae;ie(),P.options=Object.assign({},y,P.options,Ce),P.scrollParents={reference:Ds(S)?po(S):S.contextElement?po(S.contextElement):[],popper:po(O)};var xe=Ay(Ty([].concat(f,P.options.modifiers)));return P.orderedModifiers=xe.filter(function(Q){return Q.enabled}),ne(),K.update()},forceUpdate:function(){if(!Z){var ae=P.elements,Ce=ae.reference,xe=ae.popper;if(Xd(Ce,xe)){P.rects={reference:wy(Ce,vo(xe),P.options.strategy==="fixed"),popper:Wu(xe)},P.reset=!1,P.placement=P.options.placement,P.orderedModifiers.forEach(function(me){return P.modifiersData[me.name]=Object.assign({},me.data)});for(var Q=0;Q<P.orderedModifiers.length;Q++){if(P.reset===!0){P.reset=!1,Q=-1;continue}var ce=P.orderedModifiers[Q],be=ce.fn,Te=ce.options,We=Te===void 0?{}:Te,Ue=ce.name;typeof be=="function"&&(P=be({state:P,options:We,name:Ue,instance:K})||P)}}}},update:Cy(function(){return new Promise(function(G){K.forceUpdate(),G(P)})}),destroy:function(){ie(),Z=!0}};if(!Xd(S,O))return K;K.setOptions(U).then(function(G){!Z&&U.onFirstUpdate&&U.onFirstUpdate(G)});function ne(){P.orderedModifiers.forEach(function(G){var ae=G.name,Ce=G.options,xe=Ce===void 0?{}:Ce,Q=G.effect;if(typeof Q=="function"){var ce=Q({state:P,name:ae,instance:K,options:xe}),be=function(){};V.push(ce||be)}})}function ie(){V.forEach(function(G){return G()}),V=[]}return K}}var Sy=$a(),Iy=[Hu,Gu,Vu,Bu],Oy=$a({defaultModifiers:Iy}),Dy=[Hu,Gu,Vu,Bu,Qf,Gf,Xf,zf,jf],ju=$a({defaultModifiers:Dy});const Zf=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Mf,afterRead:Nf,afterWrite:Ff,applyStyles:Bu,arrow:zf,auto:Na,basePlacements:Er,beforeMain:Lf,beforeRead:Df,beforeWrite:Pf,bottom:cn,clippingParents:If,computeStyles:Vu,createPopper:ju,createPopperBase:Sy,createPopperLite:Oy,detectOverflow:gr,end:hr,eventListeners:Hu,flip:Gf,hide:jf,left:Bt,main:$f,modifierPhases:qf,offset:Qf,placements:Fu,popper:cr,popperGenerator:$a,popperOffsets:Gu,preventOverflow:Xf,read:kf,reference:Of,right:dn,start:Os,top:qt,variationPlacements:Du,viewport:Ru,write:Rf},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Qi=new Map,hu={set(u,n,s){Qi.has(u)||Qi.set(u,new Map);const f=Qi.get(u);if(!f.has(n)&&f.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(f.keys())[0]}.`);return}f.set(n,s)},get(u,n){return Qi.has(u)&&Qi.get(u).get(n)||null},remove(u,n){if(!Qi.has(u))return;const s=Qi.get(u);s.delete(n),s.size===0&&Qi.delete(u)}},ky=1e6,Ny=1e3,Lu="transitionend",Jf=u=>(u&&window.CSS&&window.CSS.escape&&(u=u.replace(/#([^\s"#']+)/g,(n,s)=>`#${CSS.escape(s)}`)),u),Ly=u=>u==null?`${u}`:Object.prototype.toString.call(u).match(/\s([a-z]+)/i)[1].toLowerCase(),$y=u=>{do u+=Math.floor(Math.random()*ky);while(document.getElementById(u));return u},My=u=>{if(!u)return 0;let{transitionDuration:n,transitionDelay:s}=window.getComputedStyle(u);const f=Number.parseFloat(n),v=Number.parseFloat(s);return!f&&!v?0:(n=n.split(",")[0],s=s.split(",")[0],(Number.parseFloat(n)+Number.parseFloat(s))*Ny)},ep=u=>{u.dispatchEvent(new Event(Lu))},xi=u=>!u||typeof u!="object"?!1:(typeof u.jquery<"u"&&(u=u[0]),typeof u.nodeType<"u"),Zi=u=>xi(u)?u.jquery?u[0]:u:typeof u=="string"&&u.length>0?document.querySelector(Jf(u)):null,wr=u=>{if(!xi(u)||u.getClientRects().length===0)return!1;const n=getComputedStyle(u).getPropertyValue("visibility")==="visible",s=u.closest("details:not([open])");if(!s)return n;if(s!==u){const f=u.closest("summary");if(f&&f.parentNode!==s||f===null)return!1}return n},Ji=u=>!u||u.nodeType!==Node.ELEMENT_NODE||u.classList.contains("disabled")?!0:typeof u.disabled<"u"?u.disabled:u.hasAttribute("disabled")&&u.getAttribute("disabled")!=="false",tp=u=>{if(!document.documentElement.attachShadow)return null;if(typeof u.getRootNode=="function"){const n=u.getRootNode();return n instanceof ShadowRoot?n:null}return u instanceof ShadowRoot?u:u.parentNode?tp(u.parentNode):null},Oa=()=>{},mo=u=>{u.offsetHeight},np=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,_u=[],Py=u=>{document.readyState==="loading"?(_u.length||document.addEventListener("DOMContentLoaded",()=>{for(const n of _u)n()}),_u.push(u)):u()},wn=()=>document.documentElement.dir==="rtl",An=u=>{Py(()=>{const n=np();if(n){const s=u.NAME,f=n.fn[s];n.fn[s]=u.jQueryInterface,n.fn[s].Constructor=u,n.fn[s].noConflict=()=>(n.fn[s]=f,u.jQueryInterface)}})},Zt=(u,n=[],s=u)=>typeof u=="function"?u.call(...n):s,ip=(u,n,s=!0)=>{if(!s){Zt(u);return}const v=My(n)+5;let y=!1;const w=({target:S})=>{S===n&&(y=!0,n.removeEventListener(Lu,w),Zt(u))};n.addEventListener(Lu,w),setTimeout(()=>{y||ep(n)},v)},Qu=(u,n,s,f)=>{const v=u.length;let y=u.indexOf(n);return y===-1?!s&&f?u[v-1]:u[0]:(y+=s?1:-1,f&&(y=(y+v)%v),u[Math.max(0,Math.min(y,v-1))])},Ry=/[^.]*(?=\..*)\.|.*/,Fy=/\..*/,qy=/::\d+$/,vu={};let Zd=1;const sp={mouseenter:"mouseover",mouseleave:"mouseout"},By=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function rp(u,n){return n&&`${n}::${Zd++}`||u.uidEvent||Zd++}function op(u){const n=rp(u);return u.uidEvent=n,vu[n]=vu[n]||{},vu[n]}function Wy(u,n){return function s(f){return Xu(f,{delegateTarget:u}),s.oneOff&&F.off(u,f.type,n),n.apply(u,[f])}}function Uy(u,n,s){return function f(v){const y=u.querySelectorAll(n);for(let{target:w}=v;w&&w!==this;w=w.parentNode)for(const S of y)if(S===w)return Xu(v,{delegateTarget:w}),f.oneOff&&F.off(u,v.type,n,s),s.apply(w,[v])}}function ap(u,n,s=null){return Object.values(u).find(f=>f.callable===n&&f.delegationSelector===s)}function lp(u,n,s){const f=typeof n=="string",v=f?s:n||s;let y=up(u);return By.has(y)||(y=u),[f,v,y]}function Jd(u,n,s,f,v){if(typeof n!="string"||!u)return;let[y,w,S]=lp(n,s,f);n in sp&&(w=(ne=>function(ie){if(!ie.relatedTarget||ie.relatedTarget!==ie.delegateTarget&&!ie.delegateTarget.contains(ie.relatedTarget))return ne.call(this,ie)})(w));const O=op(u),U=O[S]||(O[S]={}),P=ap(U,w,y?s:null);if(P){P.oneOff=P.oneOff&&v;return}const V=rp(w,n.replace(Ry,"")),Z=y?Uy(u,s,w):Wy(u,w);Z.delegationSelector=y?s:null,Z.callable=w,Z.oneOff=v,Z.uidEvent=V,U[V]=Z,u.addEventListener(S,Z,y)}function $u(u,n,s,f,v){const y=ap(n[s],f,v);y&&(u.removeEventListener(s,y,!!v),delete n[s][y.uidEvent])}function Vy(u,n,s,f){const v=n[s]||{};for(const[y,w]of Object.entries(v))y.includes(f)&&$u(u,n,s,w.callable,w.delegationSelector)}function up(u){return u=u.replace(Fy,""),sp[u]||u}const F={on(u,n,s,f){Jd(u,n,s,f,!1)},one(u,n,s,f){Jd(u,n,s,f,!0)},off(u,n,s,f){if(typeof n!="string"||!u)return;const[v,y,w]=lp(n,s,f),S=w!==n,O=op(u),U=O[w]||{},P=n.startsWith(".");if(typeof y<"u"){if(!Object.keys(U).length)return;$u(u,O,w,y,v?s:null);return}if(P)for(const V of Object.keys(O))Vy(u,O,V,n.slice(1));for(const[V,Z]of Object.entries(U)){const K=V.replace(qy,"");(!S||n.includes(K))&&$u(u,O,w,Z.callable,Z.delegationSelector)}},trigger(u,n,s){if(typeof n!="string"||!u)return null;const f=np(),v=up(n),y=n!==v;let w=null,S=!0,O=!0,U=!1;y&&f&&(w=f.Event(n,s),f(u).trigger(w),S=!w.isPropagationStopped(),O=!w.isImmediatePropagationStopped(),U=w.isDefaultPrevented());const P=Xu(new Event(n,{bubbles:S,cancelable:!0}),s);return U&&P.preventDefault(),O&&u.dispatchEvent(P),P.defaultPrevented&&w&&w.preventDefault(),P}};function Xu(u,n={}){for(const[s,f]of Object.entries(n))try{u[s]=f}catch{Object.defineProperty(u,s,{configurable:!0,get(){return f}})}return u}function ef(u){if(u==="true")return!0;if(u==="false")return!1;if(u===Number(u).toString())return Number(u);if(u===""||u==="null")return null;if(typeof u!="string")return u;try{return JSON.parse(decodeURIComponent(u))}catch{return u}}function mu(u){return u.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}const Ai={setDataAttribute(u,n,s){u.setAttribute(`data-bs-${mu(n)}`,s)},removeDataAttribute(u,n){u.removeAttribute(`data-bs-${mu(n)}`)},getDataAttributes(u){if(!u)return{};const n={},s=Object.keys(u.dataset).filter(f=>f.startsWith("bs")&&!f.startsWith("bsConfig"));for(const f of s){let v=f.replace(/^bs/,"");v=v.charAt(0).toLowerCase()+v.slice(1),n[v]=ef(u.dataset[f])}return n},getDataAttribute(u,n){return ef(u.getAttribute(`data-bs-${mu(n)}`))}};class go{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(n){return n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n}_mergeConfigObj(n,s){const f=xi(s)?Ai.getDataAttribute(s,"config"):{};return{...this.constructor.Default,...typeof f=="object"?f:{},...xi(s)?Ai.getDataAttributes(s):{},...typeof n=="object"?n:{}}}_typeCheckConfig(n,s=this.constructor.DefaultType){for(const[f,v]of Object.entries(s)){const y=n[f],w=xi(y)?"element":Ly(y);if(!new RegExp(v).test(w))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${f}" provided type "${w}" but expected type "${v}".`)}}}const Hy="5.3.8";class Pn extends go{constructor(n,s){super(),n=Zi(n),n&&(this._element=n,this._config=this._getConfig(s),hu.set(this._element,this.constructor.DATA_KEY,this))}dispose(){hu.remove(this._element,this.constructor.DATA_KEY),F.off(this._element,this.constructor.EVENT_KEY);for(const n of Object.getOwnPropertyNames(this))this[n]=null}_queueCallback(n,s,f=!0){ip(n,s,f)}_getConfig(n){return n=this._mergeConfigObj(n,this._element),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}static getInstance(n){return hu.get(Zi(n),this.DATA_KEY)}static getOrCreateInstance(n,s={}){return this.getInstance(n)||new this(n,typeof s=="object"?s:null)}static get VERSION(){return Hy}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(n){return`${n}${this.EVENT_KEY}`}}const gu=u=>{let n=u.getAttribute("data-bs-target");if(!n||n==="#"){let s=u.getAttribute("href");if(!s||!s.includes("#")&&!s.startsWith("."))return null;s.includes("#")&&!s.startsWith("#")&&(s=`#${s.split("#")[1]}`),n=s&&s!=="#"?s.trim():null}return n?n.split(",").map(s=>Jf(s)).join(","):null},J={find(u,n=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(n,u))},findOne(u,n=document.documentElement){return Element.prototype.querySelector.call(n,u)},children(u,n){return[].concat(...u.children).filter(s=>s.matches(n))},parents(u,n){const s=[];let f=u.parentNode.closest(n);for(;f;)s.push(f),f=f.parentNode.closest(n);return s},prev(u,n){let s=u.previousElementSibling;for(;s;){if(s.matches(n))return[s];s=s.previousElementSibling}return[]},next(u,n){let s=u.nextElementSibling;for(;s;){if(s.matches(n))return[s];s=s.nextElementSibling}return[]},focusableChildren(u){const n=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(s=>`${s}:not([tabindex^="-"])`).join(",");return this.find(n,u).filter(s=>!Ji(s)&&wr(s))},getSelectorFromElement(u){const n=gu(u);return n&&J.findOne(n)?n:null},getElementFromSelector(u){const n=gu(u);return n?J.findOne(n):null},getMultipleElementsFromSelector(u){const n=gu(u);return n?J.find(n):[]}},Ma=(u,n="hide")=>{const s=`click.dismiss${u.EVENT_KEY}`,f=u.NAME;F.on(document,s,`[data-bs-dismiss="${f}"]`,function(v){if(["A","AREA"].includes(this.tagName)&&v.preventDefault(),Ji(this))return;const y=J.getElementFromSelector(this)||this.closest(`.${f}`);u.getOrCreateInstance(y)[n]()})},zy="alert",Ky="bs.alert",cp=`.${Ky}`,Yy=`close${cp}`,Gy=`closed${cp}`,jy="fade",Qy="show";class Pa extends Pn{static get NAME(){return zy}close(){if(F.trigger(this._element,Yy).defaultPrevented)return;this._element.classList.remove(Qy);const s=this._element.classList.contains(jy);this._queueCallback(()=>this._destroyElement(),this._element,s)}_destroyElement(){this._element.remove(),F.trigger(this._element,Gy),this.dispose()}static jQueryInterface(n){return this.each(function(){const s=Pa.getOrCreateInstance(this);if(typeof n=="string"){if(s[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);s[n](this)}})}}Ma(Pa,"close");An(Pa);const Xy="button",Zy="bs.button",Jy=`.${Zy}`,e1=".data-api",t1="active",tf='[data-bs-toggle="button"]',n1=`click${Jy}${e1}`;class Ra extends Pn{static get NAME(){return Xy}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(t1))}static jQueryInterface(n){return this.each(function(){const s=Ra.getOrCreateInstance(this);n==="toggle"&&s[n]()})}}F.on(document,n1,tf,u=>{u.preventDefault();const n=u.target.closest(tf);Ra.getOrCreateInstance(n).toggle()});An(Ra);const i1="swipe",xr=".bs.swipe",s1=`touchstart${xr}`,r1=`touchmove${xr}`,o1=`touchend${xr}`,a1=`pointerdown${xr}`,l1=`pointerup${xr}`,u1="touch",c1="pen",d1="pointer-event",f1=40,p1={endCallback:null,leftCallback:null,rightCallback:null},h1={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Da extends go{constructor(n,s){super(),this._element=n,!(!n||!Da.isSupported())&&(this._config=this._getConfig(s),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return p1}static get DefaultType(){return h1}static get NAME(){return i1}dispose(){F.off(this._element,xr)}_start(n){if(!this._supportPointerEvents){this._deltaX=n.touches[0].clientX;return}this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX)}_end(n){this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX-this._deltaX),this._handleSwipe(),Zt(this._config.endCallback)}_move(n){this._deltaX=n.touches&&n.touches.length>1?0:n.touches[0].clientX-this._deltaX}_handleSwipe(){const n=Math.abs(this._deltaX);if(n<=f1)return;const s=n/this._deltaX;this._deltaX=0,s&&Zt(s>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(F.on(this._element,a1,n=>this._start(n)),F.on(this._element,l1,n=>this._end(n)),this._element.classList.add(d1)):(F.on(this._element,s1,n=>this._start(n)),F.on(this._element,r1,n=>this._move(n)),F.on(this._element,o1,n=>this._end(n)))}_eventIsPointerPenTouch(n){return this._supportPointerEvents&&(n.pointerType===c1||n.pointerType===u1)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const _1="carousel",v1="bs.carousel",ns=`.${v1}`,dp=".data-api",m1="ArrowLeft",g1="ArrowRight",b1=500,lo="next",lr="prev",dr="left",Ta="right",y1=`slide${ns}`,bu=`slid${ns}`,E1=`keydown${ns}`,w1=`mouseenter${ns}`,x1=`mouseleave${ns}`,A1=`dragstart${ns}`,C1=`load${ns}${dp}`,T1=`click${ns}${dp}`,fp="carousel",ba="active",S1="slide",I1="carousel-item-end",O1="carousel-item-start",D1="carousel-item-next",k1="carousel-item-prev",pp=".active",hp=".carousel-item",N1=pp+hp,L1=".carousel-item img",$1=".carousel-indicators",M1="[data-bs-slide], [data-bs-slide-to]",P1='[data-bs-ride="carousel"]',R1={[m1]:Ta,[g1]:dr},F1={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},q1={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class bo extends Pn{constructor(n,s){super(n,s),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=J.findOne($1,this._element),this._addEventListeners(),this._config.ride===fp&&this.cycle()}static get Default(){return F1}static get DefaultType(){return q1}static get NAME(){return _1}next(){this._slide(lo)}nextWhenVisible(){!document.hidden&&wr(this._element)&&this.next()}prev(){this._slide(lr)}pause(){this._isSliding&&ep(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){F.one(this._element,bu,()=>this.cycle());return}this.cycle()}}to(n){const s=this._getItems();if(n>s.length-1||n<0)return;if(this._isSliding){F.one(this._element,bu,()=>this.to(n));return}const f=this._getItemIndex(this._getActive());if(f===n)return;const v=n>f?lo:lr;this._slide(v,s[n])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(n){return n.defaultInterval=n.interval,n}_addEventListeners(){this._config.keyboard&&F.on(this._element,E1,n=>this._keydown(n)),this._config.pause==="hover"&&(F.on(this._element,w1,()=>this.pause()),F.on(this._element,x1,()=>this._maybeEnableCycle())),this._config.touch&&Da.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const f of J.find(L1,this._element))F.on(f,A1,v=>v.preventDefault());const s={leftCallback:()=>this._slide(this._directionToOrder(dr)),rightCallback:()=>this._slide(this._directionToOrder(Ta)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),b1+this._config.interval))}};this._swipeHelper=new Da(this._element,s)}_keydown(n){if(/input|textarea/i.test(n.target.tagName))return;const s=R1[n.key];s&&(n.preventDefault(),this._slide(this._directionToOrder(s)))}_getItemIndex(n){return this._getItems().indexOf(n)}_setActiveIndicatorElement(n){if(!this._indicatorsElement)return;const s=J.findOne(pp,this._indicatorsElement);s.classList.remove(ba),s.removeAttribute("aria-current");const f=J.findOne(`[data-bs-slide-to="${n}"]`,this._indicatorsElement);f&&(f.classList.add(ba),f.setAttribute("aria-current","true"))}_updateInterval(){const n=this._activeElement||this._getActive();if(!n)return;const s=Number.parseInt(n.getAttribute("data-bs-interval"),10);this._config.interval=s||this._config.defaultInterval}_slide(n,s=null){if(this._isSliding)return;const f=this._getActive(),v=n===lo,y=s||Qu(this._getItems(),f,v,this._config.wrap);if(y===f)return;const w=this._getItemIndex(y),S=K=>F.trigger(this._element,K,{relatedTarget:y,direction:this._orderToDirection(n),from:this._getItemIndex(f),to:w});if(S(y1).defaultPrevented||!f||!y)return;const U=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(w),this._activeElement=y;const P=v?O1:I1,V=v?D1:k1;y.classList.add(V),mo(y),f.classList.add(P),y.classList.add(P);const Z=()=>{y.classList.remove(P,V),y.classList.add(ba),f.classList.remove(ba,V,P),this._isSliding=!1,S(bu)};this._queueCallback(Z,f,this._isAnimated()),U&&this.cycle()}_isAnimated(){return this._element.classList.contains(S1)}_getActive(){return J.findOne(N1,this._element)}_getItems(){return J.find(hp,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(n){return wn()?n===dr?lr:lo:n===dr?lo:lr}_orderToDirection(n){return wn()?n===lr?dr:Ta:n===lr?Ta:dr}static jQueryInterface(n){return this.each(function(){const s=bo.getOrCreateInstance(this,n);if(typeof n=="number"){s.to(n);return}if(typeof n=="string"){if(s[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);s[n]()}})}}F.on(document,T1,M1,function(u){const n=J.getElementFromSelector(this);if(!n||!n.classList.contains(fp))return;u.preventDefault();const s=bo.getOrCreateInstance(n),f=this.getAttribute("data-bs-slide-to");if(f){s.to(f),s._maybeEnableCycle();return}if(Ai.getDataAttribute(this,"slide")==="next"){s.next(),s._maybeEnableCycle();return}s.prev(),s._maybeEnableCycle()});F.on(window,C1,()=>{const u=J.find(P1);for(const n of u)bo.getOrCreateInstance(n)});An(bo);const B1="collapse",W1="bs.collapse",yo=`.${W1}`,U1=".data-api",V1=`show${yo}`,H1=`shown${yo}`,z1=`hide${yo}`,K1=`hidden${yo}`,Y1=`click${yo}${U1}`,yu="show",pr="collapse",ya="collapsing",G1="collapsed",j1=`:scope .${pr} .${pr}`,Q1="collapse-horizontal",X1="width",Z1="height",J1=".collapse.show, .collapse.collapsing",Mu='[data-bs-toggle="collapse"]',e0={parent:null,toggle:!0},t0={parent:"(null|element)",toggle:"boolean"};class _o extends Pn{constructor(n,s){super(n,s),this._isTransitioning=!1,this._triggerArray=[];const f=J.find(Mu);for(const v of f){const y=J.getSelectorFromElement(v),w=J.find(y).filter(S=>S===this._element);y!==null&&w.length&&this._triggerArray.push(v)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return e0}static get DefaultType(){return t0}static get NAME(){return B1}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let n=[];if(this._config.parent&&(n=this._getFirstLevelChildren(J1).filter(S=>S!==this._element).map(S=>_o.getOrCreateInstance(S,{toggle:!1}))),n.length&&n[0]._isTransitioning||F.trigger(this._element,V1).defaultPrevented)return;for(const S of n)S.hide();const f=this._getDimension();this._element.classList.remove(pr),this._element.classList.add(ya),this._element.style[f]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const v=()=>{this._isTransitioning=!1,this._element.classList.remove(ya),this._element.classList.add(pr,yu),this._element.style[f]="",F.trigger(this._element,H1)},w=`scroll${f[0].toUpperCase()+f.slice(1)}`;this._queueCallback(v,this._element,!0),this._element.style[f]=`${this._element[w]}px`}hide(){if(this._isTransitioning||!this._isShown()||F.trigger(this._element,z1).defaultPrevented)return;const s=this._getDimension();this._element.style[s]=`${this._element.getBoundingClientRect()[s]}px`,mo(this._element),this._element.classList.add(ya),this._element.classList.remove(pr,yu);for(const v of this._triggerArray){const y=J.getElementFromSelector(v);y&&!this._isShown(y)&&this._addAriaAndCollapsedClass([v],!1)}this._isTransitioning=!0;const f=()=>{this._isTransitioning=!1,this._element.classList.remove(ya),this._element.classList.add(pr),F.trigger(this._element,K1)};this._element.style[s]="",this._queueCallback(f,this._element,!0)}_isShown(n=this._element){return n.classList.contains(yu)}_configAfterMerge(n){return n.toggle=!!n.toggle,n.parent=Zi(n.parent),n}_getDimension(){return this._element.classList.contains(Q1)?X1:Z1}_initializeChildren(){if(!this._config.parent)return;const n=this._getFirstLevelChildren(Mu);for(const s of n){const f=J.getElementFromSelector(s);f&&this._addAriaAndCollapsedClass([s],this._isShown(f))}}_getFirstLevelChildren(n){const s=J.find(j1,this._config.parent);return J.find(n,this._config.parent).filter(f=>!s.includes(f))}_addAriaAndCollapsedClass(n,s){if(n.length)for(const f of n)f.classList.toggle(G1,!s),f.setAttribute("aria-expanded",s)}static jQueryInterface(n){const s={};return typeof n=="string"&&/show|hide/.test(n)&&(s.toggle=!1),this.each(function(){const f=_o.getOrCreateInstance(this,s);if(typeof n=="string"){if(typeof f[n]>"u")throw new TypeError(`No method named "${n}"`);f[n]()}})}}F.on(document,Y1,Mu,function(u){(u.target.tagName==="A"||u.delegateTarget&&u.delegateTarget.tagName==="A")&&u.preventDefault();for(const n of J.getMultipleElementsFromSelector(this))_o.getOrCreateInstance(n,{toggle:!1}).toggle()});An(_o);const nf="dropdown",n0="bs.dropdown",ks=`.${n0}`,Zu=".data-api",i0="Escape",sf="Tab",s0="ArrowUp",rf="ArrowDown",r0=2,o0=`hide${ks}`,a0=`hidden${ks}`,l0=`show${ks}`,u0=`shown${ks}`,_p=`click${ks}${Zu}`,vp=`keydown${ks}${Zu}`,c0=`keyup${ks}${Zu}`,fr="show",d0="dropup",f0="dropend",p0="dropstart",h0="dropup-center",_0="dropdown-center",Ts='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',v0=`${Ts}.${fr}`,Sa=".dropdown-menu",m0=".navbar",g0=".navbar-nav",b0=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",y0=wn()?"top-end":"top-start",E0=wn()?"top-start":"top-end",w0=wn()?"bottom-end":"bottom-start",x0=wn()?"bottom-start":"bottom-end",A0=wn()?"left-start":"right-start",C0=wn()?"right-start":"left-start",T0="top",S0="bottom",I0={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},O0={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class si extends Pn{constructor(n,s){super(n,s),this._popper=null,this._parent=this._element.parentNode,this._menu=J.next(this._element,Sa)[0]||J.prev(this._element,Sa)[0]||J.findOne(Sa,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return I0}static get DefaultType(){return O0}static get NAME(){return nf}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Ji(this._element)||this._isShown())return;const n={relatedTarget:this._element};if(!F.trigger(this._element,l0,n).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(g0))for(const f of[].concat(...document.body.children))F.on(f,"mouseover",Oa);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(fr),this._element.classList.add(fr),F.trigger(this._element,u0,n)}}hide(){if(Ji(this._element)||!this._isShown())return;const n={relatedTarget:this._element};this._completeHide(n)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(n){if(!F.trigger(this._element,o0,n).defaultPrevented){if("ontouchstart"in document.documentElement)for(const f of[].concat(...document.body.children))F.off(f,"mouseover",Oa);this._popper&&this._popper.destroy(),this._menu.classList.remove(fr),this._element.classList.remove(fr),this._element.setAttribute("aria-expanded","false"),Ai.removeDataAttribute(this._menu,"popper"),F.trigger(this._element,a0,n)}}_getConfig(n){if(n=super._getConfig(n),typeof n.reference=="object"&&!xi(n.reference)&&typeof n.reference.getBoundingClientRect!="function")throw new TypeError(`${nf.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return n}_createPopper(){if(typeof Zf>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let n=this._element;this._config.reference==="parent"?n=this._parent:xi(this._config.reference)?n=Zi(this._config.reference):typeof this._config.reference=="object"&&(n=this._config.reference);const s=this._getPopperConfig();this._popper=ju(n,this._menu,s)}_isShown(){return this._menu.classList.contains(fr)}_getPlacement(){const n=this._parent;if(n.classList.contains(f0))return A0;if(n.classList.contains(p0))return C0;if(n.classList.contains(h0))return T0;if(n.classList.contains(_0))return S0;const s=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return n.classList.contains(d0)?s?E0:y0:s?x0:w0}_detectNavbar(){return this._element.closest(m0)!==null}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(s=>Number.parseInt(s,10)):typeof n=="function"?s=>n(s,this._element):n}_getPopperConfig(){const n={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Ai.setDataAttribute(this._menu,"popper","static"),n.modifiers=[{name:"applyStyles",enabled:!1}]),{...n,...Zt(this._config.popperConfig,[void 0,n])}}_selectMenuItem({key:n,target:s}){const f=J.find(b0,this._menu).filter(v=>wr(v));f.length&&Qu(f,s,n===rf,!f.includes(s)).focus()}static jQueryInterface(n){return this.each(function(){const s=si.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof s[n]>"u")throw new TypeError(`No method named "${n}"`);s[n]()}})}static clearMenus(n){if(n.button===r0||n.type==="keyup"&&n.key!==sf)return;const s=J.find(v0);for(const f of s){const v=si.getInstance(f);if(!v||v._config.autoClose===!1)continue;const y=n.composedPath(),w=y.includes(v._menu);if(y.includes(v._element)||v._config.autoClose==="inside"&&!w||v._config.autoClose==="outside"&&w||v._menu.contains(n.target)&&(n.type==="keyup"&&n.key===sf||/input|select|option|textarea|form/i.test(n.target.tagName)))continue;const S={relatedTarget:v._element};n.type==="click"&&(S.clickEvent=n),v._completeHide(S)}}static dataApiKeydownHandler(n){const s=/input|textarea/i.test(n.target.tagName),f=n.key===i0,v=[s0,rf].includes(n.key);if(!v&&!f||s&&!f)return;n.preventDefault();const y=this.matches(Ts)?this:J.prev(this,Ts)[0]||J.next(this,Ts)[0]||J.findOne(Ts,n.delegateTarget.parentNode),w=si.getOrCreateInstance(y);if(v){n.stopPropagation(),w.show(),w._selectMenuItem(n);return}w._isShown()&&(n.stopPropagation(),w.hide(),y.focus())}}F.on(document,vp,Ts,si.dataApiKeydownHandler);F.on(document,vp,Sa,si.dataApiKeydownHandler);F.on(document,_p,si.clearMenus);F.on(document,c0,si.clearMenus);F.on(document,_p,Ts,function(u){u.preventDefault(),si.getOrCreateInstance(this).toggle()});An(si);const mp="backdrop",D0="fade",of="show",af=`mousedown.bs.${mp}`,k0={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},N0={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class gp extends go{constructor(n){super(),this._config=this._getConfig(n),this._isAppended=!1,this._element=null}static get Default(){return k0}static get DefaultType(){return N0}static get NAME(){return mp}show(n){if(!this._config.isVisible){Zt(n);return}this._append();const s=this._getElement();this._config.isAnimated&&mo(s),s.classList.add(of),this._emulateAnimation(()=>{Zt(n)})}hide(n){if(!this._config.isVisible){Zt(n);return}this._getElement().classList.remove(of),this._emulateAnimation(()=>{this.dispose(),Zt(n)})}dispose(){this._isAppended&&(F.off(this._element,af),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const n=document.createElement("div");n.className=this._config.className,this._config.isAnimated&&n.classList.add(D0),this._element=n}return this._element}_configAfterMerge(n){return n.rootElement=Zi(n.rootElement),n}_append(){if(this._isAppended)return;const n=this._getElement();this._config.rootElement.append(n),F.on(n,af,()=>{Zt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(n){ip(n,this._getElement(),this._config.isAnimated)}}const L0="focustrap",$0="bs.focustrap",ka=`.${$0}`,M0=`focusin${ka}`,P0=`keydown.tab${ka}`,R0="Tab",F0="forward",lf="backward",q0={autofocus:!0,trapElement:null},B0={autofocus:"boolean",trapElement:"element"};class bp extends go{constructor(n){super(),this._config=this._getConfig(n),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return q0}static get DefaultType(){return B0}static get NAME(){return L0}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),F.off(document,ka),F.on(document,M0,n=>this._handleFocusin(n)),F.on(document,P0,n=>this._handleKeydown(n)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,F.off(document,ka))}_handleFocusin(n){const{trapElement:s}=this._config;if(n.target===document||n.target===s||s.contains(n.target))return;const f=J.focusableChildren(s);f.length===0?s.focus():this._lastTabNavDirection===lf?f[f.length-1].focus():f[0].focus()}_handleKeydown(n){n.key===R0&&(this._lastTabNavDirection=n.shiftKey?lf:F0)}}const uf=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",cf=".sticky-top",Ea="padding-right",df="margin-right";class Pu{constructor(){this._element=document.body}getWidth(){const n=document.documentElement.clientWidth;return Math.abs(window.innerWidth-n)}hide(){const n=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ea,s=>s+n),this._setElementAttributes(uf,Ea,s=>s+n),this._setElementAttributes(cf,df,s=>s-n)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ea),this._resetElementAttributes(uf,Ea),this._resetElementAttributes(cf,df)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(n,s,f){const v=this.getWidth(),y=w=>{if(w!==this._element&&window.innerWidth>w.clientWidth+v)return;this._saveInitialAttribute(w,s);const S=window.getComputedStyle(w).getPropertyValue(s);w.style.setProperty(s,`${f(Number.parseFloat(S))}px`)};this._applyManipulationCallback(n,y)}_saveInitialAttribute(n,s){const f=n.style.getPropertyValue(s);f&&Ai.setDataAttribute(n,s,f)}_resetElementAttributes(n,s){const f=v=>{const y=Ai.getDataAttribute(v,s);if(y===null){v.style.removeProperty(s);return}Ai.removeDataAttribute(v,s),v.style.setProperty(s,y)};this._applyManipulationCallback(n,f)}_applyManipulationCallback(n,s){if(xi(n)){s(n);return}for(const f of J.find(n,this._element))s(f)}}const W0="modal",U0="bs.modal",xn=`.${U0}`,V0=".data-api",H0="Escape",z0=`hide${xn}`,K0=`hidePrevented${xn}`,yp=`hidden${xn}`,Ep=`show${xn}`,Y0=`shown${xn}`,G0=`resize${xn}`,j0=`click.dismiss${xn}`,Q0=`mousedown.dismiss${xn}`,X0=`keydown.dismiss${xn}`,Z0=`click${xn}${V0}`,ff="modal-open",J0="fade",pf="show",Eu="modal-static",eE=".modal.show",tE=".modal-dialog",nE=".modal-body",iE='[data-bs-toggle="modal"]',sE={backdrop:!0,focus:!0,keyboard:!0},rE={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class br extends Pn{constructor(n,s){super(n,s),this._dialog=J.findOne(tE,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Pu,this._addEventListeners()}static get Default(){return sE}static get DefaultType(){return rE}static get NAME(){return W0}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){this._isShown||this._isTransitioning||F.trigger(this._element,Ep,{relatedTarget:n}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ff),this._adjustDialog(),this._backdrop.show(()=>this._showElement(n)))}hide(){!this._isShown||this._isTransitioning||F.trigger(this._element,z0).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(pf),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){F.off(window,xn),F.off(this._dialog,xn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new gp({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new bp({trapElement:this._element})}_showElement(n){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const s=J.findOne(nE,this._dialog);s&&(s.scrollTop=0),mo(this._element),this._element.classList.add(pf);const f=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,F.trigger(this._element,Y0,{relatedTarget:n})};this._queueCallback(f,this._dialog,this._isAnimated())}_addEventListeners(){F.on(this._element,X0,n=>{if(n.key===H0){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),F.on(window,G0,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),F.on(this._element,Q0,n=>{F.one(this._element,j0,s=>{if(!(this._element!==n.target||this._element!==s.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ff),this._resetAdjustments(),this._scrollBar.reset(),F.trigger(this._element,yp)})}_isAnimated(){return this._element.classList.contains(J0)}_triggerBackdropTransition(){if(F.trigger(this._element,K0).defaultPrevented)return;const s=this._element.scrollHeight>document.documentElement.clientHeight,f=this._element.style.overflowY;f==="hidden"||this._element.classList.contains(Eu)||(s||(this._element.style.overflowY="hidden"),this._element.classList.add(Eu),this._queueCallback(()=>{this._element.classList.remove(Eu),this._queueCallback(()=>{this._element.style.overflowY=f},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const n=this._element.scrollHeight>document.documentElement.clientHeight,s=this._scrollBar.getWidth(),f=s>0;if(f&&!n){const v=wn()?"paddingLeft":"paddingRight";this._element.style[v]=`${s}px`}if(!f&&n){const v=wn()?"paddingRight":"paddingLeft";this._element.style[v]=`${s}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(n,s){return this.each(function(){const f=br.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof f[n]>"u")throw new TypeError(`No method named "${n}"`);f[n](s)}})}}F.on(document,Z0,iE,function(u){const n=J.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&u.preventDefault(),F.one(n,Ep,v=>{v.defaultPrevented||F.one(n,yp,()=>{wr(this)&&this.focus()})});const s=J.findOne(eE);s&&br.getInstance(s).hide(),br.getOrCreateInstance(n).toggle(this)});Ma(br);An(br);const oE="offcanvas",aE="bs.offcanvas",Ti=`.${aE}`,wp=".data-api",lE=`load${Ti}${wp}`,uE="Escape",hf="show",_f="showing",vf="hiding",cE="offcanvas-backdrop",xp=".offcanvas.show",dE=`show${Ti}`,fE=`shown${Ti}`,pE=`hide${Ti}`,mf=`hidePrevented${Ti}`,Ap=`hidden${Ti}`,hE=`resize${Ti}`,_E=`click${Ti}${wp}`,vE=`keydown.dismiss${Ti}`,mE='[data-bs-toggle="offcanvas"]',gE={backdrop:!0,keyboard:!0,scroll:!1},bE={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class es extends Pn{constructor(n,s){super(n,s),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return gE}static get DefaultType(){return bE}static get NAME(){return oE}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){if(this._isShown||F.trigger(this._element,dE,{relatedTarget:n}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Pu().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(_f);const f=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(hf),this._element.classList.remove(_f),F.trigger(this._element,fE,{relatedTarget:n})};this._queueCallback(f,this._element,!0)}hide(){if(!this._isShown||F.trigger(this._element,pE).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(vf),this._backdrop.hide();const s=()=>{this._element.classList.remove(hf,vf),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Pu().reset(),F.trigger(this._element,Ap)};this._queueCallback(s,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const n=()=>{if(this._config.backdrop==="static"){F.trigger(this._element,mf);return}this.hide()},s=!!this._config.backdrop;return new gp({className:cE,isVisible:s,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:s?n:null})}_initializeFocusTrap(){return new bp({trapElement:this._element})}_addEventListeners(){F.on(this._element,vE,n=>{if(n.key===uE){if(this._config.keyboard){this.hide();return}F.trigger(this._element,mf)}})}static jQueryInterface(n){return this.each(function(){const s=es.getOrCreateInstance(this,n);if(typeof n=="string"){if(s[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);s[n](this)}})}}F.on(document,_E,mE,function(u){const n=J.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&u.preventDefault(),Ji(this))return;F.one(n,Ap,()=>{wr(this)&&this.focus()});const s=J.findOne(xp);s&&s!==n&&es.getInstance(s).hide(),es.getOrCreateInstance(n).toggle(this)});F.on(window,lE,()=>{for(const u of J.find(xp))es.getOrCreateInstance(u).show()});F.on(window,hE,()=>{for(const u of J.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(u).position!=="fixed"&&es.getOrCreateInstance(u).hide()});Ma(es);An(es);const yE=/^aria-[\w-]*$/i,Cp={"*":["class","dir","id","lang","role",yE],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},EE=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),wE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,xE=(u,n)=>{const s=u.nodeName.toLowerCase();return n.includes(s)?EE.has(s)?!!wE.test(u.nodeValue):!0:n.filter(f=>f instanceof RegExp).some(f=>f.test(s))};function AE(u,n,s){if(!u.length)return u;if(s&&typeof s=="function")return s(u);const v=new window.DOMParser().parseFromString(u,"text/html"),y=[].concat(...v.body.querySelectorAll("*"));for(const w of y){const S=w.nodeName.toLowerCase();if(!Object.keys(n).includes(S)){w.remove();continue}const O=[].concat(...w.attributes),U=[].concat(n["*"]||[],n[S]||[]);for(const P of O)xE(P,U)||w.removeAttribute(P.nodeName)}return v.body.innerHTML}const CE="TemplateFactory",TE={allowList:Cp,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},SE={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},IE={entry:"(string|element|function|null)",selector:"(string|element)"};class OE extends go{constructor(n){super(),this._config=this._getConfig(n)}static get Default(){return TE}static get DefaultType(){return SE}static get NAME(){return CE}getContent(){return Object.values(this._config.content).map(n=>this._resolvePossibleFunction(n)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(n){return this._checkContent(n),this._config.content={...this._config.content,...n},this}toHtml(){const n=document.createElement("div");n.innerHTML=this._maybeSanitize(this._config.template);for(const[v,y]of Object.entries(this._config.content))this._setContent(n,y,v);const s=n.children[0],f=this._resolvePossibleFunction(this._config.extraClass);return f&&s.classList.add(...f.split(" ")),s}_typeCheckConfig(n){super._typeCheckConfig(n),this._checkContent(n.content)}_checkContent(n){for(const[s,f]of Object.entries(n))super._typeCheckConfig({selector:s,entry:f},IE)}_setContent(n,s,f){const v=J.findOne(f,n);if(v){if(s=this._resolvePossibleFunction(s),!s){v.remove();return}if(xi(s)){this._putElementInTemplate(Zi(s),v);return}if(this._config.html){v.innerHTML=this._maybeSanitize(s);return}v.textContent=s}}_maybeSanitize(n){return this._config.sanitize?AE(n,this._config.allowList,this._config.sanitizeFn):n}_resolvePossibleFunction(n){return Zt(n,[void 0,this])}_putElementInTemplate(n,s){if(this._config.html){s.innerHTML="",s.append(n);return}s.textContent=n.textContent}}const DE="tooltip",kE=new Set(["sanitize","allowList","sanitizeFn"]),wu="fade",NE="modal",wa="show",LE=".tooltip-inner",gf=`.${NE}`,bf="hide.bs.modal",uo="hover",xu="focus",Au="click",$E="manual",ME="hide",PE="hidden",RE="show",FE="shown",qE="inserted",BE="click",WE="focusin",UE="focusout",VE="mouseenter",HE="mouseleave",zE={AUTO:"auto",TOP:"top",RIGHT:wn()?"left":"right",BOTTOM:"bottom",LEFT:wn()?"right":"left"},KE={allowList:Cp,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},YE={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ar extends Pn{constructor(n,s){if(typeof Zf>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(n,s),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return KE}static get DefaultType(){return YE}static get NAME(){return DE}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),F.off(this._element.closest(gf),bf,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const n=F.trigger(this._element,this.constructor.eventName(RE)),f=(tp(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(n.defaultPrevented||!f)return;this._disposePopper();const v=this._getTipElement();this._element.setAttribute("aria-describedby",v.getAttribute("id"));const{container:y}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(y.append(v),F.trigger(this._element,this.constructor.eventName(qE))),this._popper=this._createPopper(v),v.classList.add(wa),"ontouchstart"in document.documentElement)for(const S of[].concat(...document.body.children))F.on(S,"mouseover",Oa);const w=()=>{F.trigger(this._element,this.constructor.eventName(FE)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(w,this.tip,this._isAnimated())}hide(){if(!this._isShown()||F.trigger(this._element,this.constructor.eventName(ME)).defaultPrevented)return;if(this._getTipElement().classList.remove(wa),"ontouchstart"in document.documentElement)for(const v of[].concat(...document.body.children))F.off(v,"mouseover",Oa);this._activeTrigger[Au]=!1,this._activeTrigger[xu]=!1,this._activeTrigger[uo]=!1,this._isHovered=null;const f=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),F.trigger(this._element,this.constructor.eventName(PE)))};this._queueCallback(f,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(n){const s=this._getTemplateFactory(n).toHtml();if(!s)return null;s.classList.remove(wu,wa),s.classList.add(`bs-${this.constructor.NAME}-auto`);const f=$y(this.constructor.NAME).toString();return s.setAttribute("id",f),this._isAnimated()&&s.classList.add(wu),s}setContent(n){this._newContent=n,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(n){return this._templateFactory?this._templateFactory.changeContent(n):this._templateFactory=new OE({...this._config,content:n,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[LE]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(n){return this.constructor.getOrCreateInstance(n.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(wu)}_isShown(){return this.tip&&this.tip.classList.contains(wa)}_createPopper(n){const s=Zt(this._config.placement,[this,n,this._element]),f=zE[s.toUpperCase()];return ju(this._element,n,this._getPopperConfig(f))}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(s=>Number.parseInt(s,10)):typeof n=="function"?s=>n(s,this._element):n}_resolvePossibleFunction(n){return Zt(n,[this._element,this._element])}_getPopperConfig(n){const s={placement:n,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:f=>{this._getTipElement().setAttribute("data-popper-placement",f.state.placement)}}]};return{...s,...Zt(this._config.popperConfig,[void 0,s])}}_setListeners(){const n=this._config.trigger.split(" ");for(const s of n)if(s==="click")F.on(this._element,this.constructor.eventName(BE),this._config.selector,f=>{const v=this._initializeOnDelegatedTarget(f);v._activeTrigger[Au]=!(v._isShown()&&v._activeTrigger[Au]),v.toggle()});else if(s!==$E){const f=s===uo?this.constructor.eventName(VE):this.constructor.eventName(WE),v=s===uo?this.constructor.eventName(HE):this.constructor.eventName(UE);F.on(this._element,f,this._config.selector,y=>{const w=this._initializeOnDelegatedTarget(y);w._activeTrigger[y.type==="focusin"?xu:uo]=!0,w._enter()}),F.on(this._element,v,this._config.selector,y=>{const w=this._initializeOnDelegatedTarget(y);w._activeTrigger[y.type==="focusout"?xu:uo]=w._element.contains(y.relatedTarget),w._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},F.on(this._element.closest(gf),bf,this._hideModalHandler)}_fixTitle(){const n=this._element.getAttribute("title");n&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",n),this._element.setAttribute("data-bs-original-title",n),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(n,s){clearTimeout(this._timeout),this._timeout=setTimeout(n,s)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(n){const s=Ai.getDataAttributes(this._element);for(const f of Object.keys(s))kE.has(f)&&delete s[f];return n={...s,...typeof n=="object"&&n?n:{}},n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n.container=n.container===!1?document.body:Zi(n.container),typeof n.delay=="number"&&(n.delay={show:n.delay,hide:n.delay}),typeof n.title=="number"&&(n.title=n.title.toString()),typeof n.content=="number"&&(n.content=n.content.toString()),n}_getDelegateConfig(){const n={};for(const[s,f]of Object.entries(this._config))this.constructor.Default[s]!==f&&(n[s]=f);return n.selector=!1,n.trigger="manual",n}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(n){return this.each(function(){const s=Ar.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof s[n]>"u")throw new TypeError(`No method named "${n}"`);s[n]()}})}}An(Ar);const GE="popover",jE=".popover-header",QE=".popover-body",XE={...Ar.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},ZE={...Ar.DefaultType,content:"(null|string|element|function)"};class Fa extends Ar{static get Default(){return XE}static get DefaultType(){return ZE}static get NAME(){return GE}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[jE]:this._getTitle(),[QE]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(n){return this.each(function(){const s=Fa.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof s[n]>"u")throw new TypeError(`No method named "${n}"`);s[n]()}})}}An(Fa);const JE="scrollspy",ew="bs.scrollspy",Ju=`.${ew}`,tw=".data-api",nw=`activate${Ju}`,yf=`click${Ju}`,iw=`load${Ju}${tw}`,sw="dropdown-item",ur="active",rw='[data-bs-spy="scroll"]',Cu="[href]",ow=".nav, .list-group",Ef=".nav-link",aw=".nav-item",lw=".list-group-item",uw=`${Ef}, ${aw} > ${Ef}, ${lw}`,cw=".dropdown",dw=".dropdown-toggle",fw={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},pw={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class qa extends Pn{constructor(n,s){super(n,s),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return fw}static get DefaultType(){return pw}static get NAME(){return JE}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const n of this._observableSections.values())this._observer.observe(n)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(n){return n.target=Zi(n.target)||document.body,n.rootMargin=n.offset?`${n.offset}px 0px -30%`:n.rootMargin,typeof n.threshold=="string"&&(n.threshold=n.threshold.split(",").map(s=>Number.parseFloat(s))),n}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(F.off(this._config.target,yf),F.on(this._config.target,yf,Cu,n=>{const s=this._observableSections.get(n.target.hash);if(s){n.preventDefault();const f=this._rootElement||window,v=s.offsetTop-this._element.offsetTop;if(f.scrollTo){f.scrollTo({top:v,behavior:"smooth"});return}f.scrollTop=v}}))}_getNewObserver(){const n={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(s=>this._observerCallback(s),n)}_observerCallback(n){const s=w=>this._targetLinks.get(`#${w.target.id}`),f=w=>{this._previousScrollData.visibleEntryTop=w.target.offsetTop,this._process(s(w))},v=(this._rootElement||document.documentElement).scrollTop,y=v>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=v;for(const w of n){if(!w.isIntersecting){this._activeTarget=null,this._clearActiveClass(s(w));continue}const S=w.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(y&&S){if(f(w),!v)return;continue}!y&&!S&&f(w)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const n=J.find(Cu,this._config.target);for(const s of n){if(!s.hash||Ji(s))continue;const f=J.findOne(decodeURI(s.hash),this._element);wr(f)&&(this._targetLinks.set(decodeURI(s.hash),s),this._observableSections.set(s.hash,f))}}_process(n){this._activeTarget!==n&&(this._clearActiveClass(this._config.target),this._activeTarget=n,n.classList.add(ur),this._activateParents(n),F.trigger(this._element,nw,{relatedTarget:n}))}_activateParents(n){if(n.classList.contains(sw)){J.findOne(dw,n.closest(cw)).classList.add(ur);return}for(const s of J.parents(n,ow))for(const f of J.prev(s,uw))f.classList.add(ur)}_clearActiveClass(n){n.classList.remove(ur);const s=J.find(`${Cu}.${ur}`,n);for(const f of s)f.classList.remove(ur)}static jQueryInterface(n){return this.each(function(){const s=qa.getOrCreateInstance(this,n);if(typeof n=="string"){if(s[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);s[n]()}})}}F.on(window,iw,()=>{for(const u of J.find(rw))qa.getOrCreateInstance(u)});An(qa);const hw="tab",_w="bs.tab",Ns=`.${_w}`,vw=`hide${Ns}`,mw=`hidden${Ns}`,gw=`show${Ns}`,bw=`shown${Ns}`,yw=`click${Ns}`,Ew=`keydown${Ns}`,ww=`load${Ns}`,xw="ArrowLeft",wf="ArrowRight",Aw="ArrowUp",xf="ArrowDown",Tu="Home",Af="End",Ss="active",Cf="fade",Su="show",Cw="dropdown",Tp=".dropdown-toggle",Tw=".dropdown-menu",Iu=`:not(${Tp})`,Sw='.list-group, .nav, [role="tablist"]',Iw=".nav-item, .list-group-item",Ow=`.nav-link${Iu}, .list-group-item${Iu}, [role="tab"]${Iu}`,Sp='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ou=`${Ow}, ${Sp}`,Dw=`.${Ss}[data-bs-toggle="tab"], .${Ss}[data-bs-toggle="pill"], .${Ss}[data-bs-toggle="list"]`;class yr extends Pn{constructor(n){super(n),this._parent=this._element.closest(Sw),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),F.on(this._element,Ew,s=>this._keydown(s)))}static get NAME(){return hw}show(){const n=this._element;if(this._elemIsActive(n))return;const s=this._getActiveElem(),f=s?F.trigger(s,vw,{relatedTarget:n}):null;F.trigger(n,gw,{relatedTarget:s}).defaultPrevented||f&&f.defaultPrevented||(this._deactivate(s,n),this._activate(n,s))}_activate(n,s){if(!n)return;n.classList.add(Ss),this._activate(J.getElementFromSelector(n));const f=()=>{if(n.getAttribute("role")!=="tab"){n.classList.add(Su);return}n.removeAttribute("tabindex"),n.setAttribute("aria-selected",!0),this._toggleDropDown(n,!0),F.trigger(n,bw,{relatedTarget:s})};this._queueCallback(f,n,n.classList.contains(Cf))}_deactivate(n,s){if(!n)return;n.classList.remove(Ss),n.blur(),this._deactivate(J.getElementFromSelector(n));const f=()=>{if(n.getAttribute("role")!=="tab"){n.classList.remove(Su);return}n.setAttribute("aria-selected",!1),n.setAttribute("tabindex","-1"),this._toggleDropDown(n,!1),F.trigger(n,mw,{relatedTarget:s})};this._queueCallback(f,n,n.classList.contains(Cf))}_keydown(n){if(![xw,wf,Aw,xf,Tu,Af].includes(n.key))return;n.stopPropagation(),n.preventDefault();const s=this._getChildren().filter(v=>!Ji(v));let f;if([Tu,Af].includes(n.key))f=s[n.key===Tu?0:s.length-1];else{const v=[wf,xf].includes(n.key);f=Qu(s,n.target,v,!0)}f&&(f.focus({preventScroll:!0}),yr.getOrCreateInstance(f).show())}_getChildren(){return J.find(Ou,this._parent)}_getActiveElem(){return this._getChildren().find(n=>this._elemIsActive(n))||null}_setInitialAttributes(n,s){this._setAttributeIfNotExists(n,"role","tablist");for(const f of s)this._setInitialAttributesOnChild(f)}_setInitialAttributesOnChild(n){n=this._getInnerElement(n);const s=this._elemIsActive(n),f=this._getOuterElement(n);n.setAttribute("aria-selected",s),f!==n&&this._setAttributeIfNotExists(f,"role","presentation"),s||n.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(n,"role","tab"),this._setInitialAttributesOnTargetPanel(n)}_setInitialAttributesOnTargetPanel(n){const s=J.getElementFromSelector(n);s&&(this._setAttributeIfNotExists(s,"role","tabpanel"),n.id&&this._setAttributeIfNotExists(s,"aria-labelledby",`${n.id}`))}_toggleDropDown(n,s){const f=this._getOuterElement(n);if(!f.classList.contains(Cw))return;const v=(y,w)=>{const S=J.findOne(y,f);S&&S.classList.toggle(w,s)};v(Tp,Ss),v(Tw,Su),f.setAttribute("aria-expanded",s)}_setAttributeIfNotExists(n,s,f){n.hasAttribute(s)||n.setAttribute(s,f)}_elemIsActive(n){return n.classList.contains(Ss)}_getInnerElement(n){return n.matches(Ou)?n:J.findOne(Ou,n)}_getOuterElement(n){return n.closest(Iw)||n}static jQueryInterface(n){return this.each(function(){const s=yr.getOrCreateInstance(this);if(typeof n=="string"){if(s[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);s[n]()}})}}F.on(document,yw,Sp,function(u){["A","AREA"].includes(this.tagName)&&u.preventDefault(),!Ji(this)&&yr.getOrCreateInstance(this).show()});F.on(window,ww,()=>{for(const u of J.find(Dw))yr.getOrCreateInstance(u)});An(yr);const kw="toast",Nw="bs.toast",is=`.${Nw}`,Lw=`mouseover${is}`,$w=`mouseout${is}`,Mw=`focusin${is}`,Pw=`focusout${is}`,Rw=`hide${is}`,Fw=`hidden${is}`,qw=`show${is}`,Bw=`shown${is}`,Ww="fade",Tf="hide",xa="show",Aa="showing",Uw={animation:"boolean",autohide:"boolean",delay:"number"},Vw={animation:!0,autohide:!0,delay:5e3};class Ba extends Pn{constructor(n,s){super(n,s),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Vw}static get DefaultType(){return Uw}static get NAME(){return kw}show(){if(F.trigger(this._element,qw).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Ww);const s=()=>{this._element.classList.remove(Aa),F.trigger(this._element,Bw),this._maybeScheduleHide()};this._element.classList.remove(Tf),mo(this._element),this._element.classList.add(xa,Aa),this._queueCallback(s,this._element,this._config.animation)}hide(){if(!this.isShown()||F.trigger(this._element,Rw).defaultPrevented)return;const s=()=>{this._element.classList.add(Tf),this._element.classList.remove(Aa,xa),F.trigger(this._element,Fw)};this._element.classList.add(Aa),this._queueCallback(s,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(xa),super.dispose()}isShown(){return this._element.classList.contains(xa)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(n,s){switch(n.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=s;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=s;break}}if(s){this._clearTimeout();return}const f=n.relatedTarget;this._element===f||this._element.contains(f)||this._maybeScheduleHide()}_setListeners(){F.on(this._element,Lw,n=>this._onInteraction(n,!0)),F.on(this._element,$w,n=>this._onInteraction(n,!1)),F.on(this._element,Mw,n=>this._onInteraction(n,!0)),F.on(this._element,Pw,n=>this._onInteraction(n,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(n){return this.each(function(){const s=Ba.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof s[n]>"u")throw new TypeError(`No method named "${n}"`);s[n](this)}})}}Ma(Ba);An(Ba);var co={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Hw=co.exports,Sf;function zw(){return Sf||(Sf=1,(function(u,n){(function(){var s,f="4.17.21",v=200,y="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",w="Expected a function",S="Invalid `variable` option passed into `_.template`",O="__lodash_hash_undefined__",U=500,P="__lodash_placeholder__",V=1,Z=2,K=4,ne=1,ie=2,G=1,ae=2,Ce=4,xe=8,Q=16,ce=32,be=64,Te=128,We=256,Ue=512,me=30,Ve="...",dt=800,Ke=16,At=1,Wt=2,vt=3,Qe=1/0,kt=9007199254740991,Cn=17976931348623157e292,Tn=NaN,Ct=4294967295,oi=Ct-1,Si=Ct>>>1,Sn=[["ary",Te],["bind",G],["bindKey",ae],["curry",xe],["curryRight",Q],["flip",Ue],["partial",ce],["partialRight",be],["rearg",We]],mt="[object Arguments]",et="[object Array]",Ii="[object AsyncFunction]",ft="[object Boolean]",In="[object Date]",Ls="[object DOMException]",On="[object Error]",Ut="[object Function]",Le="[object GeneratorFunction]",Fe="[object Map]",gt="[object Number]",Vt="[object Null]",Ht="[object Object]",Rn="[object Promise]",Cr="[object Proxy]",Ye="[object RegExp]",pt="[object Set]",Fn="[object String]",Jt="[object Symbol]",pn="[object Undefined]",tt="[object WeakMap]",$s="[object WeakSet]",qn="[object ArrayBuffer]",qe="[object DataView]",Ms="[object Float32Array]",ss="[object Float64Array]",Tr="[object Int8Array]",Bn="[object Int16Array]",Sr="[object Int32Array]",Ps="[object Uint8Array]",Ir="[object Uint8ClampedArray]",rs="[object Uint16Array]",q="[object Uint32Array]",Wa=/\b__p \+= '';/g,Or=/\b(__p \+=) '' \+/g,Ua=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Eo=/&(?:amp|lt|gt|quot|#39);/g,Nt=/[&<>"']/g,ai=RegExp(Eo.source),li=RegExp(Nt.source),wo=/<%-([\s\S]+?)%>/g,he=/<%([\s\S]+?)%>/g,nt=/<%=([\s\S]+?)%>/g,Dr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wn=/^\w*$/,it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,en=/[\\^$.*+?()[\]{}|]/g,Va=RegExp(en.source),Oi=/^\s+/,Ha=/\s/,za=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,bt=/\{\n\/\* \[wrapped with (.+)\] \*/,kr=/,? & /,Un=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dn=/[()=,{}\[\]\/\s]/,Nr=/\\(\\)?/g,Di=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,os=/\w*$/,Lr=/^[-+]0x[0-9a-f]+$/i,Ka=/^0b[01]+$/i,xo=/^\[object .+?Constructor\]$/,Ya=/^0o[0-7]+$/i,Ga=/^(?:0|[1-9]\d*)$/,Ao=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yt=/($^)/,ki=/['\n\r\u2028\u2029\\]/g,as="\\ud800-\\udfff",at="\\u0300-\\u036f",ls="\\ufe20-\\ufe2f",ja="\\u20d0-\\u20ff",Co=at+ls+ja,$r="\\u2700-\\u27bf",Vn="a-z\\xdf-\\xf6\\xf8-\\xff",Qa="\\xac\\xb1\\xd7\\xf7",us="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Rs="\\u2000-\\u206f",Xa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",kn="A-Z\\xc0-\\xd6\\xd8-\\xde",zt="\\ufe0e\\ufe0f",tn=Qa+us+Rs+Xa,Ni="[']",Fs="["+as+"]",cs="["+tn+"]",qs="["+Co+"]",To="\\d+",Za="["+$r+"]",nn="["+Vn+"]",Mr="[^"+as+tn+To+$r+Vn+kn+"]",Pr="\\ud83c[\\udffb-\\udfff]",So="(?:"+qs+"|"+Pr+")",ds="[^"+as+"]",Rr="(?:\\ud83c[\\udde6-\\uddff]){2}",Li="[\\ud800-\\udbff][\\udc00-\\udfff]",Hn="["+kn+"]",Bs="\\u200d",Io="(?:"+nn+"|"+Mr+")",Ws="(?:"+Hn+"|"+Mr+")",fs="(?:"+Ni+"(?:d|ll|m|re|s|t|ve))?",Us="(?:"+Ni+"(?:D|LL|M|RE|S|T|VE))?",Vs=So+"?",ps="["+zt+"]?",Hs="(?:"+Bs+"(?:"+[ds,Rr,Li].join("|")+")"+ps+Vs+")*",$e="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ja="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Oo=ps+Vs+Hs,el="(?:"+[Za,Rr,Li].join("|")+")"+Oo,tl="(?:"+[ds+qs+"?",qs,Rr,Li,Fs].join("|")+")",nl=RegExp(Ni,"g"),ui=RegExp(qs,"g"),Fr=RegExp(Pr+"(?="+Pr+")|"+tl+Oo,"g"),il=RegExp([Hn+"?"+nn+"+"+fs+"(?="+[cs,Hn,"$"].join("|")+")",Ws+"+"+Us+"(?="+[cs,Hn+Io,"$"].join("|")+")",Hn+"?"+Io+"+"+fs,Hn+"+"+Us,Ja,$e,To,el].join("|"),"g"),ci=RegExp("["+Bs+as+Co+zt+"]"),$i=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Mi=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],sl=-1,Pe={};Pe[Ms]=Pe[ss]=Pe[Tr]=Pe[Bn]=Pe[Sr]=Pe[Ps]=Pe[Ir]=Pe[rs]=Pe[q]=!0,Pe[mt]=Pe[et]=Pe[qn]=Pe[ft]=Pe[qe]=Pe[In]=Pe[On]=Pe[Ut]=Pe[Fe]=Pe[gt]=Pe[Ht]=Pe[Ye]=Pe[pt]=Pe[Fn]=Pe[tt]=!1;var ke={};ke[mt]=ke[et]=ke[qn]=ke[qe]=ke[ft]=ke[In]=ke[Ms]=ke[ss]=ke[Tr]=ke[Bn]=ke[Sr]=ke[Fe]=ke[gt]=ke[Ht]=ke[Ye]=ke[pt]=ke[Fn]=ke[Jt]=ke[Ps]=ke[Ir]=ke[rs]=ke[q]=!0,ke[On]=ke[Ut]=ke[tt]=!1;var rl={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ol={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},di={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},st={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},zn=parseFloat,Pi=parseInt,Do=typeof ma=="object"&&ma&&ma.Object===Object&&ma,al=typeof self=="object"&&self&&self.Object===Object&&self,lt=Do||al||Function("return this")(),qr=n&&!n.nodeType&&n,Kn=qr&&!0&&u&&!u.nodeType&&u,ko=Kn&&Kn.exports===qr,Br=ko&&Do.process,Tt=(function(){try{var b=Kn&&Kn.require&&Kn.require("util").types;return b||Br&&Br.binding&&Br.binding("util")}catch{}})(),Ri=Tt&&Tt.isArrayBuffer,Wr=Tt&&Tt.isDate,Ur=Tt&&Tt.isMap,zs=Tt&&Tt.isRegExp,No=Tt&&Tt.isSet,Lo=Tt&&Tt.isTypedArray;function Lt(b,k,A){switch(A.length){case 0:return b.call(k);case 1:return b.call(k,A[0]);case 2:return b.call(k,A[0],A[1]);case 3:return b.call(k,A[0],A[1],A[2])}return b.apply(k,A)}function ll(b,k,A,Y){for(var le=-1,Ie=b==null?0:b.length;++le<Ie;){var Xe=b[le];k(Y,Xe,A(Xe),b)}return Y}function Kt(b,k){for(var A=-1,Y=b==null?0:b.length;++A<Y&&k(b[A],A,b)!==!1;);return b}function $t(b,k){for(var A=b==null?0:b.length;A--&&k(b[A],A,b)!==!1;);return b}function Yn(b,k){for(var A=-1,Y=b==null?0:b.length;++A<Y;)if(!k(b[A],A,b))return!1;return!0}function St(b,k){for(var A=-1,Y=b==null?0:b.length,le=0,Ie=[];++A<Y;){var Xe=b[A];k(Xe,A,b)&&(Ie[le++]=Xe)}return Ie}function Ks(b,k){var A=b==null?0:b.length;return!!A&&Fi(b,k,0)>-1}function Gn(b,k,A){for(var Y=-1,le=b==null?0:b.length;++Y<le;)if(A(k,b[Y]))return!0;return!1}function Be(b,k){for(var A=-1,Y=b==null?0:b.length,le=Array(Y);++A<Y;)le[A]=k(b[A],A,b);return le}function jn(b,k){for(var A=-1,Y=k.length,le=b.length;++A<Y;)b[le+A]=k[A];return b}function fi(b,k,A,Y){var le=-1,Ie=b==null?0:b.length;for(Y&&Ie&&(A=b[++le]);++le<Ie;)A=k(A,b[le],le,b);return A}function Ys(b,k,A,Y){var le=b==null?0:b.length;for(Y&&le&&(A=b[--le]);le--;)A=k(A,b[le],le,b);return A}function Qn(b,k){for(var A=-1,Y=b==null?0:b.length;++A<Y;)if(k(b[A],A,b))return!0;return!1}var ul=Ge("length");function cl(b){return b.split("")}function dl(b){return b.match(Un)||[]}function Vr(b,k,A){var Y;return A(b,function(le,Ie,Xe){if(k(le,Ie,Xe))return Y=Ie,!1}),Y}function hs(b,k,A,Y){for(var le=b.length,Ie=A+(Y?1:-1);Y?Ie--:++Ie<le;)if(k(b[Ie],Ie,b))return Ie;return-1}function Fi(b,k,A){return k===k?Fo(b,k,A):hs(b,Ne,A)}function fl(b,k,A,Y){for(var le=A-1,Ie=b.length;++le<Ie;)if(Y(b[le],k))return le;return-1}function Ne(b){return b!==b}function Me(b,k){var A=b==null?0:b.length;return A?hn(b,k)/A:Tn}function Ge(b){return function(k){return k==null?s:k[b]}}function sn(b){return function(k){return b==null?s:b[k]}}function It(b,k,A,Y,le){return le(b,function(Ie,Xe,o){A=Y?(Y=!1,Ie):k(A,Ie,Xe,o)}),A}function qi(b,k){var A=b.length;for(b.sort(k);A--;)b[A]=b[A].value;return b}function hn(b,k){for(var A,Y=-1,le=b.length;++Y<le;){var Ie=k(b[Y]);Ie!==s&&(A=A===s?Ie:A+Ie)}return A}function Bi(b,k){for(var A=-1,Y=Array(b);++A<b;)Y[A]=k(A);return Y}function ut(b,k){return Be(k,function(A){return[A,b[A]]})}function _s(b){return b&&b.slice(0,qo(b)+1).replace(Oi,"")}function ht(b){return function(k){return b(k)}}function pi(b,k){return Be(k,function(A){return b[A]})}function Xn(b,k){return b.has(k)}function $o(b,k){for(var A=-1,Y=b.length;++A<Y&&Fi(k,b[A],0)>-1;);return A}function Mo(b,k){for(var A=b.length;A--&&Fi(k,b[A],0)>-1;);return A}function Gs(b,k){for(var A=b.length,Y=0;A--;)b[A]===k&&++Y;return Y}var Hr=sn(rl),pl=sn(ol);function hl(b){return"\\"+st[b]}function _l(b,k){return b==null?s:b[k]}function Wi(b){return ci.test(b)}function vl(b){return $i.test(b)}function Po(b){for(var k,A=[];!(k=b.next()).done;)A.push(k.value);return A}function zr(b){var k=-1,A=Array(b.size);return b.forEach(function(Y,le){A[++k]=[le,Y]}),A}function Ro(b,k){return function(A){return b(k(A))}}function Zn(b,k){for(var A=-1,Y=b.length,le=0,Ie=[];++A<Y;){var Xe=b[A];(Xe===k||Xe===P)&&(b[A]=P,Ie[le++]=A)}return Ie}function js(b){var k=-1,A=Array(b.size);return b.forEach(function(Y){A[++k]=Y}),A}function ml(b){var k=-1,A=Array(b.size);return b.forEach(function(Y){A[++k]=[Y,Y]}),A}function Fo(b,k,A){for(var Y=A-1,le=b.length;++Y<le;)if(b[Y]===k)return Y;return-1}function Qs(b,k,A){for(var Y=A+1;Y--;)if(b[Y]===k)return Y;return Y}function Nn(b){return Wi(b)?Ui(b):ul(b)}function rn(b){return Wi(b)?Kr(b):cl(b)}function qo(b){for(var k=b.length;k--&&Ha.test(b.charAt(k)););return k}var Xs=sn(di);function Ui(b){for(var k=Fr.lastIndex=0;Fr.test(b);)++k;return k}function Kr(b){return b.match(Fr)||[]}function gl(b){return b.match(il)||[]}var vs=(function b(k){k=k==null?lt:Vi.defaults(lt.Object(),k,Vi.pick(lt,Mi));var A=k.Array,Y=k.Date,le=k.Error,Ie=k.Function,Xe=k.Math,o=k.Object,r=k.RegExp,l=k.String,_=k.TypeError,x=A.prototype,D=Ie.prototype,I=o.prototype,B=k["__core-js_shared__"],ee=D.toString,L=I.hasOwnProperty,_e=0,Re=(function(){var e=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),te=I.toString,rt=ee.call(o),Se=lt._,Et=r("^"+ee.call(L).replace(en,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wt=ko?k.Buffer:s,_n=k.Symbol,Zs=k.Uint8Array,Bo=wt?wt.allocUnsafe:s,Wo=Ro(o.getPrototypeOf,o),ec=o.create,tc=I.propertyIsEnumerable,Uo=x.splice,nc=_n?_n.isConcatSpreadable:s,Yr=_n?_n.iterator:s,ms=_n?_n.toStringTag:s,Vo=(function(){try{var e=ws(o,"defineProperty");return e({},"",{}),e}catch{}})(),Ip=k.clearTimeout!==lt.clearTimeout&&k.clearTimeout,Op=Y&&Y.now!==lt.Date.now&&Y.now,Dp=k.setTimeout!==lt.setTimeout&&k.setTimeout,Ho=Xe.ceil,zo=Xe.floor,bl=o.getOwnPropertySymbols,kp=wt?wt.isBuffer:s,ic=k.isFinite,Np=x.join,Lp=Ro(o.keys,o),ct=Xe.max,Ot=Xe.min,$p=Y.now,Mp=k.parseInt,sc=Xe.random,Pp=x.reverse,yl=ws(k,"DataView"),Gr=ws(k,"Map"),El=ws(k,"Promise"),Js=ws(k,"Set"),jr=ws(k,"WeakMap"),Qr=ws(o,"create"),Ko=jr&&new jr,er={},Rp=xs(yl),Fp=xs(Gr),qp=xs(El),Bp=xs(Js),Wp=xs(jr),Yo=_n?_n.prototype:s,Xr=Yo?Yo.valueOf:s,rc=Yo?Yo.toString:s;function p(e){if(je(e)&&!de(e)&&!(e instanceof Ee)){if(e instanceof vn)return e;if(L.call(e,"__wrapped__"))return od(e)}return new vn(e)}var tr=(function(){function e(){}return function(t){if(!He(t))return{};if(ec)return ec(t);e.prototype=t;var i=new e;return e.prototype=s,i}})();function Go(){}function vn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=s}p.templateSettings={escape:wo,evaluate:he,interpolate:nt,variable:"",imports:{_:p}},p.prototype=Go.prototype,p.prototype.constructor=p,vn.prototype=tr(Go.prototype),vn.prototype.constructor=vn;function Ee(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ct,this.__views__=[]}function Up(){var e=new Ee(this.__wrapped__);return e.__actions__=Yt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Yt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Yt(this.__views__),e}function Vp(){if(this.__filtered__){var e=new Ee(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Hp(){var e=this.__wrapped__.value(),t=this.__dir__,i=de(e),a=t<0,d=i?e.length:0,h=n_(0,d,this.__views__),m=h.start,g=h.end,E=g-m,$=a?g:m-1,M=this.__iteratees__,R=M.length,H=0,j=Ot(E,this.__takeCount__);if(!i||!a&&d==E&&j==E)return Oc(e,this.__actions__);var re=[];e:for(;E--&&H<j;){$+=t;for(var ve=-1,oe=e[$];++ve<R;){var ye=M[ve],Ae=ye.iteratee,ln=ye.type,Rt=Ae(oe);if(ln==Wt)oe=Rt;else if(!Rt){if(ln==At)continue e;break e}}re[H++]=oe}return re}Ee.prototype=tr(Go.prototype),Ee.prototype.constructor=Ee;function gs(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}function zp(){this.__data__=Qr?Qr(null):{},this.size=0}function Kp(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Yp(e){var t=this.__data__;if(Qr){var i=t[e];return i===O?s:i}return L.call(t,e)?t[e]:s}function Gp(e){var t=this.__data__;return Qr?t[e]!==s:L.call(t,e)}function jp(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Qr&&t===s?O:t,this}gs.prototype.clear=zp,gs.prototype.delete=Kp,gs.prototype.get=Yp,gs.prototype.has=Gp,gs.prototype.set=jp;function hi(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}function Qp(){this.__data__=[],this.size=0}function Xp(e){var t=this.__data__,i=jo(t,e);if(i<0)return!1;var a=t.length-1;return i==a?t.pop():Uo.call(t,i,1),--this.size,!0}function Zp(e){var t=this.__data__,i=jo(t,e);return i<0?s:t[i][1]}function Jp(e){return jo(this.__data__,e)>-1}function eh(e,t){var i=this.__data__,a=jo(i,e);return a<0?(++this.size,i.push([e,t])):i[a][1]=t,this}hi.prototype.clear=Qp,hi.prototype.delete=Xp,hi.prototype.get=Zp,hi.prototype.has=Jp,hi.prototype.set=eh;function _i(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}function th(){this.size=0,this.__data__={hash:new gs,map:new(Gr||hi),string:new gs}}function nh(e){var t=aa(this,e).delete(e);return this.size-=t?1:0,t}function ih(e){return aa(this,e).get(e)}function sh(e){return aa(this,e).has(e)}function rh(e,t){var i=aa(this,e),a=i.size;return i.set(e,t),this.size+=i.size==a?0:1,this}_i.prototype.clear=th,_i.prototype.delete=nh,_i.prototype.get=ih,_i.prototype.has=sh,_i.prototype.set=rh;function bs(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new _i;++t<i;)this.add(e[t])}function oh(e){return this.__data__.set(e,O),this}function ah(e){return this.__data__.has(e)}bs.prototype.add=bs.prototype.push=oh,bs.prototype.has=ah;function Ln(e){var t=this.__data__=new hi(e);this.size=t.size}function lh(){this.__data__=new hi,this.size=0}function uh(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function ch(e){return this.__data__.get(e)}function dh(e){return this.__data__.has(e)}function fh(e,t){var i=this.__data__;if(i instanceof hi){var a=i.__data__;if(!Gr||a.length<v-1)return a.push([e,t]),this.size=++i.size,this;i=this.__data__=new _i(a)}return i.set(e,t),this.size=i.size,this}Ln.prototype.clear=lh,Ln.prototype.delete=uh,Ln.prototype.get=ch,Ln.prototype.has=dh,Ln.prototype.set=fh;function oc(e,t){var i=de(e),a=!i&&As(e),d=!i&&!a&&Gi(e),h=!i&&!a&&!d&&rr(e),m=i||a||d||h,g=m?Bi(e.length,l):[],E=g.length;for(var $ in e)(t||L.call(e,$))&&!(m&&($=="length"||d&&($=="offset"||$=="parent")||h&&($=="buffer"||$=="byteLength"||$=="byteOffset")||bi($,E)))&&g.push($);return g}function ac(e){var t=e.length;return t?e[Nl(0,t-1)]:s}function ph(e,t){return la(Yt(e),ys(t,0,e.length))}function hh(e){return la(Yt(e))}function wl(e,t,i){(i!==s&&!$n(e[t],i)||i===s&&!(t in e))&&vi(e,t,i)}function Zr(e,t,i){var a=e[t];(!(L.call(e,t)&&$n(a,i))||i===s&&!(t in e))&&vi(e,t,i)}function jo(e,t){for(var i=e.length;i--;)if($n(e[i][0],t))return i;return-1}function _h(e,t,i,a){return Hi(e,function(d,h,m){t(a,d,i(d),m)}),a}function lc(e,t){return e&&ei(t,_t(t),e)}function vh(e,t){return e&&ei(t,jt(t),e)}function vi(e,t,i){t=="__proto__"&&Vo?Vo(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function xl(e,t){for(var i=-1,a=t.length,d=A(a),h=e==null;++i<a;)d[i]=h?s:iu(e,t[i]);return d}function ys(e,t,i){return e===e&&(i!==s&&(e=e<=i?e:i),t!==s&&(e=e>=t?e:t)),e}function mn(e,t,i,a,d,h){var m,g=t&V,E=t&Z,$=t&K;if(i&&(m=d?i(e,a,d,h):i(e)),m!==s)return m;if(!He(e))return e;var M=de(e);if(M){if(m=s_(e),!g)return Yt(e,m)}else{var R=Dt(e),H=R==Ut||R==Le;if(Gi(e))return Nc(e,g);if(R==Ht||R==mt||H&&!d){if(m=E||H?{}:Xc(e),!g)return E?Yh(e,vh(m,e)):Kh(e,lc(m,e))}else{if(!ke[R])return d?e:{};m=r_(e,R,g)}}h||(h=new Ln);var j=h.get(e);if(j)return j;h.set(e,m),Td(e)?e.forEach(function(oe){m.add(mn(oe,t,i,oe,e,h))}):Ad(e)&&e.forEach(function(oe,ye){m.set(ye,mn(oe,t,i,ye,e,h))});var re=$?E?Vl:Ul:E?jt:_t,ve=M?s:re(e);return Kt(ve||e,function(oe,ye){ve&&(ye=oe,oe=e[ye]),Zr(m,ye,mn(oe,t,i,ye,e,h))}),m}function mh(e){var t=_t(e);return function(i){return uc(i,e,t)}}function uc(e,t,i){var a=i.length;if(e==null)return!a;for(e=o(e);a--;){var d=i[a],h=t[d],m=e[d];if(m===s&&!(d in e)||!h(m))return!1}return!0}function cc(e,t,i){if(typeof e!="function")throw new _(w);return ro(function(){e.apply(s,i)},t)}function Jr(e,t,i,a){var d=-1,h=Ks,m=!0,g=e.length,E=[],$=t.length;if(!g)return E;i&&(t=Be(t,ht(i))),a?(h=Gn,m=!1):t.length>=v&&(h=Xn,m=!1,t=new bs(t));e:for(;++d<g;){var M=e[d],R=i==null?M:i(M);if(M=a||M!==0?M:0,m&&R===R){for(var H=$;H--;)if(t[H]===R)continue e;E.push(M)}else h(t,R,a)||E.push(M)}return E}var Hi=Rc(Jn),dc=Rc(Cl,!0);function gh(e,t){var i=!0;return Hi(e,function(a,d,h){return i=!!t(a,d,h),i}),i}function Qo(e,t,i){for(var a=-1,d=e.length;++a<d;){var h=e[a],m=t(h);if(m!=null&&(g===s?m===m&&!an(m):i(m,g)))var g=m,E=h}return E}function bh(e,t,i,a){var d=e.length;for(i=pe(i),i<0&&(i=-i>d?0:d+i),a=a===s||a>d?d:pe(a),a<0&&(a+=d),a=i>a?0:Id(a);i<a;)e[i++]=t;return e}function fc(e,t){var i=[];return Hi(e,function(a,d,h){t(a,d,h)&&i.push(a)}),i}function xt(e,t,i,a,d){var h=-1,m=e.length;for(i||(i=a_),d||(d=[]);++h<m;){var g=e[h];t>0&&i(g)?t>1?xt(g,t-1,i,a,d):jn(d,g):a||(d[d.length]=g)}return d}var Al=Fc(),pc=Fc(!0);function Jn(e,t){return e&&Al(e,t,_t)}function Cl(e,t){return e&&pc(e,t,_t)}function Xo(e,t){return St(t,function(i){return yi(e[i])})}function Es(e,t){t=Ki(t,e);for(var i=0,a=t.length;e!=null&&i<a;)e=e[ti(t[i++])];return i&&i==a?e:s}function hc(e,t,i){var a=t(e);return de(e)?a:jn(a,i(e))}function Mt(e){return e==null?e===s?pn:Vt:ms&&ms in o(e)?t_(e):h_(e)}function Tl(e,t){return e>t}function yh(e,t){return e!=null&&L.call(e,t)}function Eh(e,t){return e!=null&&t in o(e)}function wh(e,t,i){return e>=Ot(t,i)&&e<ct(t,i)}function Sl(e,t,i){for(var a=i?Gn:Ks,d=e[0].length,h=e.length,m=h,g=A(h),E=1/0,$=[];m--;){var M=e[m];m&&t&&(M=Be(M,ht(t))),E=Ot(M.length,E),g[m]=!i&&(t||d>=120&&M.length>=120)?new bs(m&&M):s}M=e[0];var R=-1,H=g[0];e:for(;++R<d&&$.length<E;){var j=M[R],re=t?t(j):j;if(j=i||j!==0?j:0,!(H?Xn(H,re):a($,re,i))){for(m=h;--m;){var ve=g[m];if(!(ve?Xn(ve,re):a(e[m],re,i)))continue e}H&&H.push(re),$.push(j)}}return $}function xh(e,t,i,a){return Jn(e,function(d,h,m){t(a,i(d),h,m)}),a}function eo(e,t,i){t=Ki(t,e),e=td(e,t);var a=e==null?e:e[ti(bn(t))];return a==null?s:Lt(a,e,i)}function _c(e){return je(e)&&Mt(e)==mt}function Ah(e){return je(e)&&Mt(e)==qn}function Ch(e){return je(e)&&Mt(e)==In}function to(e,t,i,a,d){return e===t?!0:e==null||t==null||!je(e)&&!je(t)?e!==e&&t!==t:Th(e,t,i,a,to,d)}function Th(e,t,i,a,d,h){var m=de(e),g=de(t),E=m?et:Dt(e),$=g?et:Dt(t);E=E==mt?Ht:E,$=$==mt?Ht:$;var M=E==Ht,R=$==Ht,H=E==$;if(H&&Gi(e)){if(!Gi(t))return!1;m=!0,M=!1}if(H&&!M)return h||(h=new Ln),m||rr(e)?Gc(e,t,i,a,d,h):Jh(e,t,E,i,a,d,h);if(!(i&ne)){var j=M&&L.call(e,"__wrapped__"),re=R&&L.call(t,"__wrapped__");if(j||re){var ve=j?e.value():e,oe=re?t.value():t;return h||(h=new Ln),d(ve,oe,i,a,h)}}return H?(h||(h=new Ln),e_(e,t,i,a,d,h)):!1}function Sh(e){return je(e)&&Dt(e)==Fe}function Il(e,t,i,a){var d=i.length,h=d,m=!a;if(e==null)return!h;for(e=o(e);d--;){var g=i[d];if(m&&g[2]?g[1]!==e[g[0]]:!(g[0]in e))return!1}for(;++d<h;){g=i[d];var E=g[0],$=e[E],M=g[1];if(m&&g[2]){if($===s&&!(E in e))return!1}else{var R=new Ln;if(a)var H=a($,M,E,e,t,R);if(!(H===s?to(M,$,ne|ie,a,R):H))return!1}}return!0}function vc(e){if(!He(e)||u_(e))return!1;var t=yi(e)?Et:xo;return t.test(xs(e))}function Ih(e){return je(e)&&Mt(e)==Ye}function Oh(e){return je(e)&&Dt(e)==pt}function Dh(e){return je(e)&&ha(e.length)&&!!Pe[Mt(e)]}function mc(e){return typeof e=="function"?e:e==null?Qt:typeof e=="object"?de(e)?yc(e[0],e[1]):bc(e):qd(e)}function Ol(e){if(!so(e))return Lp(e);var t=[];for(var i in o(e))L.call(e,i)&&i!="constructor"&&t.push(i);return t}function kh(e){if(!He(e))return p_(e);var t=so(e),i=[];for(var a in e)a=="constructor"&&(t||!L.call(e,a))||i.push(a);return i}function Dl(e,t){return e<t}function gc(e,t){var i=-1,a=Gt(e)?A(e.length):[];return Hi(e,function(d,h,m){a[++i]=t(d,h,m)}),a}function bc(e){var t=zl(e);return t.length==1&&t[0][2]?Jc(t[0][0],t[0][1]):function(i){return i===e||Il(i,e,t)}}function yc(e,t){return Yl(e)&&Zc(t)?Jc(ti(e),t):function(i){var a=iu(i,e);return a===s&&a===t?su(i,e):to(t,a,ne|ie)}}function Zo(e,t,i,a,d){e!==t&&Al(t,function(h,m){if(d||(d=new Ln),He(h))Nh(e,t,m,i,Zo,a,d);else{var g=a?a(jl(e,m),h,m+"",e,t,d):s;g===s&&(g=h),wl(e,m,g)}},jt)}function Nh(e,t,i,a,d,h,m){var g=jl(e,i),E=jl(t,i),$=m.get(E);if($){wl(e,i,$);return}var M=h?h(g,E,i+"",e,t,m):s,R=M===s;if(R){var H=de(E),j=!H&&Gi(E),re=!H&&!j&&rr(E);M=E,H||j||re?de(g)?M=g:Ze(g)?M=Yt(g):j?(R=!1,M=Nc(E,!0)):re?(R=!1,M=Lc(E,!0)):M=[]:oo(E)||As(E)?(M=g,As(g)?M=Od(g):(!He(g)||yi(g))&&(M=Xc(E))):R=!1}R&&(m.set(E,M),d(M,E,a,h,m),m.delete(E)),wl(e,i,M)}function Ec(e,t){var i=e.length;if(i)return t+=t<0?i:0,bi(t,i)?e[t]:s}function wc(e,t,i){t.length?t=Be(t,function(h){return de(h)?function(m){return Es(m,h.length===1?h[0]:h)}:h}):t=[Qt];var a=-1;t=Be(t,ht(se()));var d=gc(e,function(h,m,g){var E=Be(t,function($){return $(h)});return{criteria:E,index:++a,value:h}});return qi(d,function(h,m){return zh(h,m,i)})}function Lh(e,t){return xc(e,t,function(i,a){return su(e,a)})}function xc(e,t,i){for(var a=-1,d=t.length,h={};++a<d;){var m=t[a],g=Es(e,m);i(g,m)&&no(h,Ki(m,e),g)}return h}function $h(e){return function(t){return Es(t,e)}}function kl(e,t,i,a){var d=a?fl:Fi,h=-1,m=t.length,g=e;for(e===t&&(t=Yt(t)),i&&(g=Be(e,ht(i)));++h<m;)for(var E=0,$=t[h],M=i?i($):$;(E=d(g,M,E,a))>-1;)g!==e&&Uo.call(g,E,1),Uo.call(e,E,1);return e}function Ac(e,t){for(var i=e?t.length:0,a=i-1;i--;){var d=t[i];if(i==a||d!==h){var h=d;bi(d)?Uo.call(e,d,1):Ml(e,d)}}return e}function Nl(e,t){return e+zo(sc()*(t-e+1))}function Mh(e,t,i,a){for(var d=-1,h=ct(Ho((t-e)/(i||1)),0),m=A(h);h--;)m[a?h:++d]=e,e+=i;return m}function Ll(e,t){var i="";if(!e||t<1||t>kt)return i;do t%2&&(i+=e),t=zo(t/2),t&&(e+=e);while(t);return i}function ge(e,t){return Ql(ed(e,t,Qt),e+"")}function Ph(e){return ac(or(e))}function Rh(e,t){var i=or(e);return la(i,ys(t,0,i.length))}function no(e,t,i,a){if(!He(e))return e;t=Ki(t,e);for(var d=-1,h=t.length,m=h-1,g=e;g!=null&&++d<h;){var E=ti(t[d]),$=i;if(E==="__proto__"||E==="constructor"||E==="prototype")return e;if(d!=m){var M=g[E];$=a?a(M,E,g):s,$===s&&($=He(M)?M:bi(t[d+1])?[]:{})}Zr(g,E,$),g=g[E]}return e}var Cc=Ko?function(e,t){return Ko.set(e,t),e}:Qt,Fh=Vo?function(e,t){return Vo(e,"toString",{configurable:!0,enumerable:!1,value:ou(t),writable:!0})}:Qt;function qh(e){return la(or(e))}function gn(e,t,i){var a=-1,d=e.length;t<0&&(t=-t>d?0:d+t),i=i>d?d:i,i<0&&(i+=d),d=t>i?0:i-t>>>0,t>>>=0;for(var h=A(d);++a<d;)h[a]=e[a+t];return h}function Bh(e,t){var i;return Hi(e,function(a,d,h){return i=t(a,d,h),!i}),!!i}function Jo(e,t,i){var a=0,d=e==null?a:e.length;if(typeof t=="number"&&t===t&&d<=Si){for(;a<d;){var h=a+d>>>1,m=e[h];m!==null&&!an(m)&&(i?m<=t:m<t)?a=h+1:d=h}return d}return $l(e,t,Qt,i)}function $l(e,t,i,a){var d=0,h=e==null?0:e.length;if(h===0)return 0;t=i(t);for(var m=t!==t,g=t===null,E=an(t),$=t===s;d<h;){var M=zo((d+h)/2),R=i(e[M]),H=R!==s,j=R===null,re=R===R,ve=an(R);if(m)var oe=a||re;else $?oe=re&&(a||H):g?oe=re&&H&&(a||!j):E?oe=re&&H&&!j&&(a||!ve):j||ve?oe=!1:oe=a?R<=t:R<t;oe?d=M+1:h=M}return Ot(h,oi)}function Tc(e,t){for(var i=-1,a=e.length,d=0,h=[];++i<a;){var m=e[i],g=t?t(m):m;if(!i||!$n(g,E)){var E=g;h[d++]=m===0?0:m}}return h}function Sc(e){return typeof e=="number"?e:an(e)?Tn:+e}function on(e){if(typeof e=="string")return e;if(de(e))return Be(e,on)+"";if(an(e))return rc?rc.call(e):"";var t=e+"";return t=="0"&&1/e==-Qe?"-0":t}function zi(e,t,i){var a=-1,d=Ks,h=e.length,m=!0,g=[],E=g;if(i)m=!1,d=Gn;else if(h>=v){var $=t?null:Xh(e);if($)return js($);m=!1,d=Xn,E=new bs}else E=t?[]:g;e:for(;++a<h;){var M=e[a],R=t?t(M):M;if(M=i||M!==0?M:0,m&&R===R){for(var H=E.length;H--;)if(E[H]===R)continue e;t&&E.push(R),g.push(M)}else d(E,R,i)||(E!==g&&E.push(R),g.push(M))}return g}function Ml(e,t){return t=Ki(t,e),e=td(e,t),e==null||delete e[ti(bn(t))]}function Ic(e,t,i,a){return no(e,t,i(Es(e,t)),a)}function ea(e,t,i,a){for(var d=e.length,h=a?d:-1;(a?h--:++h<d)&&t(e[h],h,e););return i?gn(e,a?0:h,a?h+1:d):gn(e,a?h+1:0,a?d:h)}function Oc(e,t){var i=e;return i instanceof Ee&&(i=i.value()),fi(t,function(a,d){return d.func.apply(d.thisArg,jn([a],d.args))},i)}function Pl(e,t,i){var a=e.length;if(a<2)return a?zi(e[0]):[];for(var d=-1,h=A(a);++d<a;)for(var m=e[d],g=-1;++g<a;)g!=d&&(h[d]=Jr(h[d]||m,e[g],t,i));return zi(xt(h,1),t,i)}function Dc(e,t,i){for(var a=-1,d=e.length,h=t.length,m={};++a<d;){var g=a<h?t[a]:s;i(m,e[a],g)}return m}function Rl(e){return Ze(e)?e:[]}function Fl(e){return typeof e=="function"?e:Qt}function Ki(e,t){return de(e)?e:Yl(e,t)?[e]:rd(De(e))}var Wh=ge;function Yi(e,t,i){var a=e.length;return i=i===s?a:i,!t&&i>=a?e:gn(e,t,i)}var kc=Ip||function(e){return lt.clearTimeout(e)};function Nc(e,t){if(t)return e.slice();var i=e.length,a=Bo?Bo(i):new e.constructor(i);return e.copy(a),a}function ql(e){var t=new e.constructor(e.byteLength);return new Zs(t).set(new Zs(e)),t}function Uh(e,t){var i=t?ql(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function Vh(e){var t=new e.constructor(e.source,os.exec(e));return t.lastIndex=e.lastIndex,t}function Hh(e){return Xr?o(Xr.call(e)):{}}function Lc(e,t){var i=t?ql(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function $c(e,t){if(e!==t){var i=e!==s,a=e===null,d=e===e,h=an(e),m=t!==s,g=t===null,E=t===t,$=an(t);if(!g&&!$&&!h&&e>t||h&&m&&E&&!g&&!$||a&&m&&E||!i&&E||!d)return 1;if(!a&&!h&&!$&&e<t||$&&i&&d&&!a&&!h||g&&i&&d||!m&&d||!E)return-1}return 0}function zh(e,t,i){for(var a=-1,d=e.criteria,h=t.criteria,m=d.length,g=i.length;++a<m;){var E=$c(d[a],h[a]);if(E){if(a>=g)return E;var $=i[a];return E*($=="desc"?-1:1)}}return e.index-t.index}function Mc(e,t,i,a){for(var d=-1,h=e.length,m=i.length,g=-1,E=t.length,$=ct(h-m,0),M=A(E+$),R=!a;++g<E;)M[g]=t[g];for(;++d<m;)(R||d<h)&&(M[i[d]]=e[d]);for(;$--;)M[g++]=e[d++];return M}function Pc(e,t,i,a){for(var d=-1,h=e.length,m=-1,g=i.length,E=-1,$=t.length,M=ct(h-g,0),R=A(M+$),H=!a;++d<M;)R[d]=e[d];for(var j=d;++E<$;)R[j+E]=t[E];for(;++m<g;)(H||d<h)&&(R[j+i[m]]=e[d++]);return R}function Yt(e,t){var i=-1,a=e.length;for(t||(t=A(a));++i<a;)t[i]=e[i];return t}function ei(e,t,i,a){var d=!i;i||(i={});for(var h=-1,m=t.length;++h<m;){var g=t[h],E=a?a(i[g],e[g],g,i,e):s;E===s&&(E=e[g]),d?vi(i,g,E):Zr(i,g,E)}return i}function Kh(e,t){return ei(e,Kl(e),t)}function Yh(e,t){return ei(e,jc(e),t)}function ta(e,t){return function(i,a){var d=de(i)?ll:_h,h=t?t():{};return d(i,e,se(a,2),h)}}function nr(e){return ge(function(t,i){var a=-1,d=i.length,h=d>1?i[d-1]:s,m=d>2?i[2]:s;for(h=e.length>3&&typeof h=="function"?(d--,h):s,m&&Pt(i[0],i[1],m)&&(h=d<3?s:h,d=1),t=o(t);++a<d;){var g=i[a];g&&e(t,g,a,h)}return t})}function Rc(e,t){return function(i,a){if(i==null)return i;if(!Gt(i))return e(i,a);for(var d=i.length,h=t?d:-1,m=o(i);(t?h--:++h<d)&&a(m[h],h,m)!==!1;);return i}}function Fc(e){return function(t,i,a){for(var d=-1,h=o(t),m=a(t),g=m.length;g--;){var E=m[e?g:++d];if(i(h[E],E,h)===!1)break}return t}}function Gh(e,t,i){var a=t&G,d=io(e);function h(){var m=this&&this!==lt&&this instanceof h?d:e;return m.apply(a?i:this,arguments)}return h}function qc(e){return function(t){t=De(t);var i=Wi(t)?rn(t):s,a=i?i[0]:t.charAt(0),d=i?Yi(i,1).join(""):t.slice(1);return a[e]()+d}}function ir(e){return function(t){return fi(Rd(Pd(t).replace(nl,"")),e,"")}}function io(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=tr(e.prototype),a=e.apply(i,t);return He(a)?a:i}}function jh(e,t,i){var a=io(e);function d(){for(var h=arguments.length,m=A(h),g=h,E=sr(d);g--;)m[g]=arguments[g];var $=h<3&&m[0]!==E&&m[h-1]!==E?[]:Zn(m,E);if(h-=$.length,h<i)return Hc(e,t,na,d.placeholder,s,m,$,s,s,i-h);var M=this&&this!==lt&&this instanceof d?a:e;return Lt(M,this,m)}return d}function Bc(e){return function(t,i,a){var d=o(t);if(!Gt(t)){var h=se(i,3);t=_t(t),i=function(g){return h(d[g],g,d)}}var m=e(t,i,a);return m>-1?d[h?t[m]:m]:s}}function Wc(e){return gi(function(t){var i=t.length,a=i,d=vn.prototype.thru;for(e&&t.reverse();a--;){var h=t[a];if(typeof h!="function")throw new _(w);if(d&&!m&&oa(h)=="wrapper")var m=new vn([],!0)}for(a=m?a:i;++a<i;){h=t[a];var g=oa(h),E=g=="wrapper"?Hl(h):s;E&&Gl(E[0])&&E[1]==(Te|xe|ce|We)&&!E[4].length&&E[9]==1?m=m[oa(E[0])].apply(m,E[3]):m=h.length==1&&Gl(h)?m[g]():m.thru(h)}return function(){var $=arguments,M=$[0];if(m&&$.length==1&&de(M))return m.plant(M).value();for(var R=0,H=i?t[R].apply(this,$):M;++R<i;)H=t[R].call(this,H);return H}})}function na(e,t,i,a,d,h,m,g,E,$){var M=t&Te,R=t&G,H=t&ae,j=t&(xe|Q),re=t&Ue,ve=H?s:io(e);function oe(){for(var ye=arguments.length,Ae=A(ye),ln=ye;ln--;)Ae[ln]=arguments[ln];if(j)var Rt=sr(oe),un=Gs(Ae,Rt);if(a&&(Ae=Mc(Ae,a,d,j)),h&&(Ae=Pc(Ae,h,m,j)),ye-=un,j&&ye<$){var Je=Zn(Ae,Rt);return Hc(e,t,na,oe.placeholder,i,Ae,Je,g,E,$-ye)}var Mn=R?i:this,wi=H?Mn[e]:e;return ye=Ae.length,g?Ae=__(Ae,g):re&&ye>1&&Ae.reverse(),M&&E<ye&&(Ae.length=E),this&&this!==lt&&this instanceof oe&&(wi=ve||io(wi)),wi.apply(Mn,Ae)}return oe}function Uc(e,t){return function(i,a){return xh(i,e,t(a),{})}}function ia(e,t){return function(i,a){var d;if(i===s&&a===s)return t;if(i!==s&&(d=i),a!==s){if(d===s)return a;typeof i=="string"||typeof a=="string"?(i=on(i),a=on(a)):(i=Sc(i),a=Sc(a)),d=e(i,a)}return d}}function Bl(e){return gi(function(t){return t=Be(t,ht(se())),ge(function(i){var a=this;return e(t,function(d){return Lt(d,a,i)})})})}function sa(e,t){t=t===s?" ":on(t);var i=t.length;if(i<2)return i?Ll(t,e):t;var a=Ll(t,Ho(e/Nn(t)));return Wi(t)?Yi(rn(a),0,e).join(""):a.slice(0,e)}function Qh(e,t,i,a){var d=t&G,h=io(e);function m(){for(var g=-1,E=arguments.length,$=-1,M=a.length,R=A(M+E),H=this&&this!==lt&&this instanceof m?h:e;++$<M;)R[$]=a[$];for(;E--;)R[$++]=arguments[++g];return Lt(H,d?i:this,R)}return m}function Vc(e){return function(t,i,a){return a&&typeof a!="number"&&Pt(t,i,a)&&(i=a=s),t=Ei(t),i===s?(i=t,t=0):i=Ei(i),a=a===s?t<i?1:-1:Ei(a),Mh(t,i,a,e)}}function ra(e){return function(t,i){return typeof t=="string"&&typeof i=="string"||(t=yn(t),i=yn(i)),e(t,i)}}function Hc(e,t,i,a,d,h,m,g,E,$){var M=t&xe,R=M?m:s,H=M?s:m,j=M?h:s,re=M?s:h;t|=M?ce:be,t&=~(M?be:ce),t&Ce||(t&=-4);var ve=[e,t,d,j,R,re,H,g,E,$],oe=i.apply(s,ve);return Gl(e)&&nd(oe,ve),oe.placeholder=a,id(oe,e,t)}function Wl(e){var t=Xe[e];return function(i,a){if(i=yn(i),a=a==null?0:Ot(pe(a),292),a&&ic(i)){var d=(De(i)+"e").split("e"),h=t(d[0]+"e"+(+d[1]+a));return d=(De(h)+"e").split("e"),+(d[0]+"e"+(+d[1]-a))}return t(i)}}var Xh=Js&&1/js(new Js([,-0]))[1]==Qe?function(e){return new Js(e)}:uu;function zc(e){return function(t){var i=Dt(t);return i==Fe?zr(t):i==pt?ml(t):ut(t,e(t))}}function mi(e,t,i,a,d,h,m,g){var E=t&ae;if(!E&&typeof e!="function")throw new _(w);var $=a?a.length:0;if($||(t&=-97,a=d=s),m=m===s?m:ct(pe(m),0),g=g===s?g:pe(g),$-=d?d.length:0,t&be){var M=a,R=d;a=d=s}var H=E?s:Hl(e),j=[e,t,i,a,d,M,R,h,m,g];if(H&&f_(j,H),e=j[0],t=j[1],i=j[2],a=j[3],d=j[4],g=j[9]=j[9]===s?E?0:e.length:ct(j[9]-$,0),!g&&t&(xe|Q)&&(t&=-25),!t||t==G)var re=Gh(e,t,i);else t==xe||t==Q?re=jh(e,t,g):(t==ce||t==(G|ce))&&!d.length?re=Qh(e,t,i,a):re=na.apply(s,j);var ve=H?Cc:nd;return id(ve(re,j),e,t)}function Kc(e,t,i,a){return e===s||$n(e,I[i])&&!L.call(a,i)?t:e}function Yc(e,t,i,a,d,h){return He(e)&&He(t)&&(h.set(t,e),Zo(e,t,s,Yc,h),h.delete(t)),e}function Zh(e){return oo(e)?s:e}function Gc(e,t,i,a,d,h){var m=i&ne,g=e.length,E=t.length;if(g!=E&&!(m&&E>g))return!1;var $=h.get(e),M=h.get(t);if($&&M)return $==t&&M==e;var R=-1,H=!0,j=i&ie?new bs:s;for(h.set(e,t),h.set(t,e);++R<g;){var re=e[R],ve=t[R];if(a)var oe=m?a(ve,re,R,t,e,h):a(re,ve,R,e,t,h);if(oe!==s){if(oe)continue;H=!1;break}if(j){if(!Qn(t,function(ye,Ae){if(!Xn(j,Ae)&&(re===ye||d(re,ye,i,a,h)))return j.push(Ae)})){H=!1;break}}else if(!(re===ve||d(re,ve,i,a,h))){H=!1;break}}return h.delete(e),h.delete(t),H}function Jh(e,t,i,a,d,h,m){switch(i){case qe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case qn:return!(e.byteLength!=t.byteLength||!h(new Zs(e),new Zs(t)));case ft:case In:case gt:return $n(+e,+t);case On:return e.name==t.name&&e.message==t.message;case Ye:case Fn:return e==t+"";case Fe:var g=zr;case pt:var E=a&ne;if(g||(g=js),e.size!=t.size&&!E)return!1;var $=m.get(e);if($)return $==t;a|=ie,m.set(e,t);var M=Gc(g(e),g(t),a,d,h,m);return m.delete(e),M;case Jt:if(Xr)return Xr.call(e)==Xr.call(t)}return!1}function e_(e,t,i,a,d,h){var m=i&ne,g=Ul(e),E=g.length,$=Ul(t),M=$.length;if(E!=M&&!m)return!1;for(var R=E;R--;){var H=g[R];if(!(m?H in t:L.call(t,H)))return!1}var j=h.get(e),re=h.get(t);if(j&&re)return j==t&&re==e;var ve=!0;h.set(e,t),h.set(t,e);for(var oe=m;++R<E;){H=g[R];var ye=e[H],Ae=t[H];if(a)var ln=m?a(Ae,ye,H,t,e,h):a(ye,Ae,H,e,t,h);if(!(ln===s?ye===Ae||d(ye,Ae,i,a,h):ln)){ve=!1;break}oe||(oe=H=="constructor")}if(ve&&!oe){var Rt=e.constructor,un=t.constructor;Rt!=un&&"constructor"in e&&"constructor"in t&&!(typeof Rt=="function"&&Rt instanceof Rt&&typeof un=="function"&&un instanceof un)&&(ve=!1)}return h.delete(e),h.delete(t),ve}function gi(e){return Ql(ed(e,s,ud),e+"")}function Ul(e){return hc(e,_t,Kl)}function Vl(e){return hc(e,jt,jc)}var Hl=Ko?function(e){return Ko.get(e)}:uu;function oa(e){for(var t=e.name+"",i=er[t],a=L.call(er,t)?i.length:0;a--;){var d=i[a],h=d.func;if(h==null||h==e)return d.name}return t}function sr(e){var t=L.call(p,"placeholder")?p:e;return t.placeholder}function se(){var e=p.iteratee||au;return e=e===au?mc:e,arguments.length?e(arguments[0],arguments[1]):e}function aa(e,t){var i=e.__data__;return l_(t)?i[typeof t=="string"?"string":"hash"]:i.map}function zl(e){for(var t=_t(e),i=t.length;i--;){var a=t[i],d=e[a];t[i]=[a,d,Zc(d)]}return t}function ws(e,t){var i=_l(e,t);return vc(i)?i:s}function t_(e){var t=L.call(e,ms),i=e[ms];try{e[ms]=s;var a=!0}catch{}var d=te.call(e);return a&&(t?e[ms]=i:delete e[ms]),d}var Kl=bl?function(e){return e==null?[]:(e=o(e),St(bl(e),function(t){return tc.call(e,t)}))}:cu,jc=bl?function(e){for(var t=[];e;)jn(t,Kl(e)),e=Wo(e);return t}:cu,Dt=Mt;(yl&&Dt(new yl(new ArrayBuffer(1)))!=qe||Gr&&Dt(new Gr)!=Fe||El&&Dt(El.resolve())!=Rn||Js&&Dt(new Js)!=pt||jr&&Dt(new jr)!=tt)&&(Dt=function(e){var t=Mt(e),i=t==Ht?e.constructor:s,a=i?xs(i):"";if(a)switch(a){case Rp:return qe;case Fp:return Fe;case qp:return Rn;case Bp:return pt;case Wp:return tt}return t});function n_(e,t,i){for(var a=-1,d=i.length;++a<d;){var h=i[a],m=h.size;switch(h.type){case"drop":e+=m;break;case"dropRight":t-=m;break;case"take":t=Ot(t,e+m);break;case"takeRight":e=ct(e,t-m);break}}return{start:e,end:t}}function i_(e){var t=e.match(bt);return t?t[1].split(kr):[]}function Qc(e,t,i){t=Ki(t,e);for(var a=-1,d=t.length,h=!1;++a<d;){var m=ti(t[a]);if(!(h=e!=null&&i(e,m)))break;e=e[m]}return h||++a!=d?h:(d=e==null?0:e.length,!!d&&ha(d)&&bi(m,d)&&(de(e)||As(e)))}function s_(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&L.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function Xc(e){return typeof e.constructor=="function"&&!so(e)?tr(Wo(e)):{}}function r_(e,t,i){var a=e.constructor;switch(t){case qn:return ql(e);case ft:case In:return new a(+e);case qe:return Uh(e,i);case Ms:case ss:case Tr:case Bn:case Sr:case Ps:case Ir:case rs:case q:return Lc(e,i);case Fe:return new a;case gt:case Fn:return new a(e);case Ye:return Vh(e);case pt:return new a;case Jt:return Hh(e)}}function o_(e,t){var i=t.length;if(!i)return e;var a=i-1;return t[a]=(i>1?"& ":"")+t[a],t=t.join(i>2?", ":" "),e.replace(za,`{
/* [wrapped with `+t+`] */
`)}function a_(e){return de(e)||As(e)||!!(nc&&e&&e[nc])}function bi(e,t){var i=typeof e;return t=t??kt,!!t&&(i=="number"||i!="symbol"&&Ga.test(e))&&e>-1&&e%1==0&&e<t}function Pt(e,t,i){if(!He(i))return!1;var a=typeof t;return(a=="number"?Gt(i)&&bi(t,i.length):a=="string"&&t in i)?$n(i[t],e):!1}function Yl(e,t){if(de(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||an(e)?!0:Wn.test(e)||!Dr.test(e)||t!=null&&e in o(t)}function l_(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Gl(e){var t=oa(e),i=p[t];if(typeof i!="function"||!(t in Ee.prototype))return!1;if(e===i)return!0;var a=Hl(i);return!!a&&e===a[0]}function u_(e){return!!Re&&Re in e}var c_=B?yi:du;function so(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||I;return e===i}function Zc(e){return e===e&&!He(e)}function Jc(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==s||e in o(i))}}function d_(e){var t=fa(e,function(a){return i.size===U&&i.clear(),a}),i=t.cache;return t}function f_(e,t){var i=e[1],a=t[1],d=i|a,h=d<(G|ae|Te),m=a==Te&&i==xe||a==Te&&i==We&&e[7].length<=t[8]||a==(Te|We)&&t[7].length<=t[8]&&i==xe;if(!(h||m))return e;a&G&&(e[2]=t[2],d|=i&G?0:Ce);var g=t[3];if(g){var E=e[3];e[3]=E?Mc(E,g,t[4]):g,e[4]=E?Zn(e[3],P):t[4]}return g=t[5],g&&(E=e[5],e[5]=E?Pc(E,g,t[6]):g,e[6]=E?Zn(e[5],P):t[6]),g=t[7],g&&(e[7]=g),a&Te&&(e[8]=e[8]==null?t[8]:Ot(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=d,e}function p_(e){var t=[];if(e!=null)for(var i in o(e))t.push(i);return t}function h_(e){return te.call(e)}function ed(e,t,i){return t=ct(t===s?e.length-1:t,0),function(){for(var a=arguments,d=-1,h=ct(a.length-t,0),m=A(h);++d<h;)m[d]=a[t+d];d=-1;for(var g=A(t+1);++d<t;)g[d]=a[d];return g[t]=i(m),Lt(e,this,g)}}function td(e,t){return t.length<2?e:Es(e,gn(t,0,-1))}function __(e,t){for(var i=e.length,a=Ot(t.length,i),d=Yt(e);a--;){var h=t[a];e[a]=bi(h,i)?d[h]:s}return e}function jl(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var nd=sd(Cc),ro=Dp||function(e,t){return lt.setTimeout(e,t)},Ql=sd(Fh);function id(e,t,i){var a=t+"";return Ql(e,o_(a,v_(i_(a),i)))}function sd(e){var t=0,i=0;return function(){var a=$p(),d=Ke-(a-i);if(i=a,d>0){if(++t>=dt)return arguments[0]}else t=0;return e.apply(s,arguments)}}function la(e,t){var i=-1,a=e.length,d=a-1;for(t=t===s?a:t;++i<t;){var h=Nl(i,d),m=e[h];e[h]=e[i],e[i]=m}return e.length=t,e}var rd=d_(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(it,function(i,a,d,h){t.push(d?h.replace(Nr,"$1"):a||i)}),t});function ti(e){if(typeof e=="string"||an(e))return e;var t=e+"";return t=="0"&&1/e==-Qe?"-0":t}function xs(e){if(e!=null){try{return ee.call(e)}catch{}try{return e+""}catch{}}return""}function v_(e,t){return Kt(Sn,function(i){var a="_."+i[0];t&i[1]&&!Ks(e,a)&&e.push(a)}),e.sort()}function od(e){if(e instanceof Ee)return e.clone();var t=new vn(e.__wrapped__,e.__chain__);return t.__actions__=Yt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function m_(e,t,i){(i?Pt(e,t,i):t===s)?t=1:t=ct(pe(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var d=0,h=0,m=A(Ho(a/t));d<a;)m[h++]=gn(e,d,d+=t);return m}function g_(e){for(var t=-1,i=e==null?0:e.length,a=0,d=[];++t<i;){var h=e[t];h&&(d[a++]=h)}return d}function b_(){var e=arguments.length;if(!e)return[];for(var t=A(e-1),i=arguments[0],a=e;a--;)t[a-1]=arguments[a];return jn(de(i)?Yt(i):[i],xt(t,1))}var y_=ge(function(e,t){return Ze(e)?Jr(e,xt(t,1,Ze,!0)):[]}),E_=ge(function(e,t){var i=bn(t);return Ze(i)&&(i=s),Ze(e)?Jr(e,xt(t,1,Ze,!0),se(i,2)):[]}),w_=ge(function(e,t){var i=bn(t);return Ze(i)&&(i=s),Ze(e)?Jr(e,xt(t,1,Ze,!0),s,i):[]});function x_(e,t,i){var a=e==null?0:e.length;return a?(t=i||t===s?1:pe(t),gn(e,t<0?0:t,a)):[]}function A_(e,t,i){var a=e==null?0:e.length;return a?(t=i||t===s?1:pe(t),t=a-t,gn(e,0,t<0?0:t)):[]}function C_(e,t){return e&&e.length?ea(e,se(t,3),!0,!0):[]}function T_(e,t){return e&&e.length?ea(e,se(t,3),!0):[]}function S_(e,t,i,a){var d=e==null?0:e.length;return d?(i&&typeof i!="number"&&Pt(e,t,i)&&(i=0,a=d),bh(e,t,i,a)):[]}function ad(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var d=i==null?0:pe(i);return d<0&&(d=ct(a+d,0)),hs(e,se(t,3),d)}function ld(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var d=a-1;return i!==s&&(d=pe(i),d=i<0?ct(a+d,0):Ot(d,a-1)),hs(e,se(t,3),d,!0)}function ud(e){var t=e==null?0:e.length;return t?xt(e,1):[]}function I_(e){var t=e==null?0:e.length;return t?xt(e,Qe):[]}function O_(e,t){var i=e==null?0:e.length;return i?(t=t===s?1:pe(t),xt(e,t)):[]}function D_(e){for(var t=-1,i=e==null?0:e.length,a={};++t<i;){var d=e[t];a[d[0]]=d[1]}return a}function cd(e){return e&&e.length?e[0]:s}function k_(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var d=i==null?0:pe(i);return d<0&&(d=ct(a+d,0)),Fi(e,t,d)}function N_(e){var t=e==null?0:e.length;return t?gn(e,0,-1):[]}var L_=ge(function(e){var t=Be(e,Rl);return t.length&&t[0]===e[0]?Sl(t):[]}),$_=ge(function(e){var t=bn(e),i=Be(e,Rl);return t===bn(i)?t=s:i.pop(),i.length&&i[0]===e[0]?Sl(i,se(t,2)):[]}),M_=ge(function(e){var t=bn(e),i=Be(e,Rl);return t=typeof t=="function"?t:s,t&&i.pop(),i.length&&i[0]===e[0]?Sl(i,s,t):[]});function P_(e,t){return e==null?"":Np.call(e,t)}function bn(e){var t=e==null?0:e.length;return t?e[t-1]:s}function R_(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var d=a;return i!==s&&(d=pe(i),d=d<0?ct(a+d,0):Ot(d,a-1)),t===t?Qs(e,t,d):hs(e,Ne,d,!0)}function F_(e,t){return e&&e.length?Ec(e,pe(t)):s}var q_=ge(dd);function dd(e,t){return e&&e.length&&t&&t.length?kl(e,t):e}function B_(e,t,i){return e&&e.length&&t&&t.length?kl(e,t,se(i,2)):e}function W_(e,t,i){return e&&e.length&&t&&t.length?kl(e,t,s,i):e}var U_=gi(function(e,t){var i=e==null?0:e.length,a=xl(e,t);return Ac(e,Be(t,function(d){return bi(d,i)?+d:d}).sort($c)),a});function V_(e,t){var i=[];if(!(e&&e.length))return i;var a=-1,d=[],h=e.length;for(t=se(t,3);++a<h;){var m=e[a];t(m,a,e)&&(i.push(m),d.push(a))}return Ac(e,d),i}function Xl(e){return e==null?e:Pp.call(e)}function H_(e,t,i){var a=e==null?0:e.length;return a?(i&&typeof i!="number"&&Pt(e,t,i)?(t=0,i=a):(t=t==null?0:pe(t),i=i===s?a:pe(i)),gn(e,t,i)):[]}function z_(e,t){return Jo(e,t)}function K_(e,t,i){return $l(e,t,se(i,2))}function Y_(e,t){var i=e==null?0:e.length;if(i){var a=Jo(e,t);if(a<i&&$n(e[a],t))return a}return-1}function G_(e,t){return Jo(e,t,!0)}function j_(e,t,i){return $l(e,t,se(i,2),!0)}function Q_(e,t){var i=e==null?0:e.length;if(i){var a=Jo(e,t,!0)-1;if($n(e[a],t))return a}return-1}function X_(e){return e&&e.length?Tc(e):[]}function Z_(e,t){return e&&e.length?Tc(e,se(t,2)):[]}function J_(e){var t=e==null?0:e.length;return t?gn(e,1,t):[]}function ev(e,t,i){return e&&e.length?(t=i||t===s?1:pe(t),gn(e,0,t<0?0:t)):[]}function tv(e,t,i){var a=e==null?0:e.length;return a?(t=i||t===s?1:pe(t),t=a-t,gn(e,t<0?0:t,a)):[]}function nv(e,t){return e&&e.length?ea(e,se(t,3),!1,!0):[]}function iv(e,t){return e&&e.length?ea(e,se(t,3)):[]}var sv=ge(function(e){return zi(xt(e,1,Ze,!0))}),rv=ge(function(e){var t=bn(e);return Ze(t)&&(t=s),zi(xt(e,1,Ze,!0),se(t,2))}),ov=ge(function(e){var t=bn(e);return t=typeof t=="function"?t:s,zi(xt(e,1,Ze,!0),s,t)});function av(e){return e&&e.length?zi(e):[]}function lv(e,t){return e&&e.length?zi(e,se(t,2)):[]}function uv(e,t){return t=typeof t=="function"?t:s,e&&e.length?zi(e,s,t):[]}function Zl(e){if(!(e&&e.length))return[];var t=0;return e=St(e,function(i){if(Ze(i))return t=ct(i.length,t),!0}),Bi(t,function(i){return Be(e,Ge(i))})}function fd(e,t){if(!(e&&e.length))return[];var i=Zl(e);return t==null?i:Be(i,function(a){return Lt(t,s,a)})}var cv=ge(function(e,t){return Ze(e)?Jr(e,t):[]}),dv=ge(function(e){return Pl(St(e,Ze))}),fv=ge(function(e){var t=bn(e);return Ze(t)&&(t=s),Pl(St(e,Ze),se(t,2))}),pv=ge(function(e){var t=bn(e);return t=typeof t=="function"?t:s,Pl(St(e,Ze),s,t)}),hv=ge(Zl);function _v(e,t){return Dc(e||[],t||[],Zr)}function vv(e,t){return Dc(e||[],t||[],no)}var mv=ge(function(e){var t=e.length,i=t>1?e[t-1]:s;return i=typeof i=="function"?(e.pop(),i):s,fd(e,i)});function pd(e){var t=p(e);return t.__chain__=!0,t}function gv(e,t){return t(e),e}function ua(e,t){return t(e)}var bv=gi(function(e){var t=e.length,i=t?e[0]:0,a=this.__wrapped__,d=function(h){return xl(h,e)};return t>1||this.__actions__.length||!(a instanceof Ee)||!bi(i)?this.thru(d):(a=a.slice(i,+i+(t?1:0)),a.__actions__.push({func:ua,args:[d],thisArg:s}),new vn(a,this.__chain__).thru(function(h){return t&&!h.length&&h.push(s),h}))});function yv(){return pd(this)}function Ev(){return new vn(this.value(),this.__chain__)}function wv(){this.__values__===s&&(this.__values__=Sd(this.value()));var e=this.__index__>=this.__values__.length,t=e?s:this.__values__[this.__index__++];return{done:e,value:t}}function xv(){return this}function Av(e){for(var t,i=this;i instanceof Go;){var a=od(i);a.__index__=0,a.__values__=s,t?d.__wrapped__=a:t=a;var d=a;i=i.__wrapped__}return d.__wrapped__=e,t}function Cv(){var e=this.__wrapped__;if(e instanceof Ee){var t=e;return this.__actions__.length&&(t=new Ee(this)),t=t.reverse(),t.__actions__.push({func:ua,args:[Xl],thisArg:s}),new vn(t,this.__chain__)}return this.thru(Xl)}function Tv(){return Oc(this.__wrapped__,this.__actions__)}var Sv=ta(function(e,t,i){L.call(e,i)?++e[i]:vi(e,i,1)});function Iv(e,t,i){var a=de(e)?Yn:gh;return i&&Pt(e,t,i)&&(t=s),a(e,se(t,3))}function Ov(e,t){var i=de(e)?St:fc;return i(e,se(t,3))}var Dv=Bc(ad),kv=Bc(ld);function Nv(e,t){return xt(ca(e,t),1)}function Lv(e,t){return xt(ca(e,t),Qe)}function $v(e,t,i){return i=i===s?1:pe(i),xt(ca(e,t),i)}function hd(e,t){var i=de(e)?Kt:Hi;return i(e,se(t,3))}function _d(e,t){var i=de(e)?$t:dc;return i(e,se(t,3))}var Mv=ta(function(e,t,i){L.call(e,i)?e[i].push(t):vi(e,i,[t])});function Pv(e,t,i,a){e=Gt(e)?e:or(e),i=i&&!a?pe(i):0;var d=e.length;return i<0&&(i=ct(d+i,0)),_a(e)?i<=d&&e.indexOf(t,i)>-1:!!d&&Fi(e,t,i)>-1}var Rv=ge(function(e,t,i){var a=-1,d=typeof t=="function",h=Gt(e)?A(e.length):[];return Hi(e,function(m){h[++a]=d?Lt(t,m,i):eo(m,t,i)}),h}),Fv=ta(function(e,t,i){vi(e,i,t)});function ca(e,t){var i=de(e)?Be:gc;return i(e,se(t,3))}function qv(e,t,i,a){return e==null?[]:(de(t)||(t=t==null?[]:[t]),i=a?s:i,de(i)||(i=i==null?[]:[i]),wc(e,t,i))}var Bv=ta(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});function Wv(e,t,i){var a=de(e)?fi:It,d=arguments.length<3;return a(e,se(t,4),i,d,Hi)}function Uv(e,t,i){var a=de(e)?Ys:It,d=arguments.length<3;return a(e,se(t,4),i,d,dc)}function Vv(e,t){var i=de(e)?St:fc;return i(e,pa(se(t,3)))}function Hv(e){var t=de(e)?ac:Ph;return t(e)}function zv(e,t,i){(i?Pt(e,t,i):t===s)?t=1:t=pe(t);var a=de(e)?ph:Rh;return a(e,t)}function Kv(e){var t=de(e)?hh:qh;return t(e)}function Yv(e){if(e==null)return 0;if(Gt(e))return _a(e)?Nn(e):e.length;var t=Dt(e);return t==Fe||t==pt?e.size:Ol(e).length}function Gv(e,t,i){var a=de(e)?Qn:Bh;return i&&Pt(e,t,i)&&(t=s),a(e,se(t,3))}var jv=ge(function(e,t){if(e==null)return[];var i=t.length;return i>1&&Pt(e,t[0],t[1])?t=[]:i>2&&Pt(t[0],t[1],t[2])&&(t=[t[0]]),wc(e,xt(t,1),[])}),da=Op||function(){return lt.Date.now()};function Qv(e,t){if(typeof t!="function")throw new _(w);return e=pe(e),function(){if(--e<1)return t.apply(this,arguments)}}function vd(e,t,i){return t=i?s:t,t=e&&t==null?e.length:t,mi(e,Te,s,s,s,s,t)}function md(e,t){var i;if(typeof t!="function")throw new _(w);return e=pe(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=s),i}}var Jl=ge(function(e,t,i){var a=G;if(i.length){var d=Zn(i,sr(Jl));a|=ce}return mi(e,a,t,i,d)}),gd=ge(function(e,t,i){var a=G|ae;if(i.length){var d=Zn(i,sr(gd));a|=ce}return mi(t,a,e,i,d)});function bd(e,t,i){t=i?s:t;var a=mi(e,xe,s,s,s,s,s,t);return a.placeholder=bd.placeholder,a}function yd(e,t,i){t=i?s:t;var a=mi(e,Q,s,s,s,s,s,t);return a.placeholder=yd.placeholder,a}function Ed(e,t,i){var a,d,h,m,g,E,$=0,M=!1,R=!1,H=!0;if(typeof e!="function")throw new _(w);t=yn(t)||0,He(i)&&(M=!!i.leading,R="maxWait"in i,h=R?ct(yn(i.maxWait)||0,t):h,H="trailing"in i?!!i.trailing:H);function j(Je){var Mn=a,wi=d;return a=d=s,$=Je,m=e.apply(wi,Mn),m}function re(Je){return $=Je,g=ro(ye,t),M?j(Je):m}function ve(Je){var Mn=Je-E,wi=Je-$,Bd=t-Mn;return R?Ot(Bd,h-wi):Bd}function oe(Je){var Mn=Je-E,wi=Je-$;return E===s||Mn>=t||Mn<0||R&&wi>=h}function ye(){var Je=da();if(oe(Je))return Ae(Je);g=ro(ye,ve(Je))}function Ae(Je){return g=s,H&&a?j(Je):(a=d=s,m)}function ln(){g!==s&&kc(g),$=0,a=E=d=g=s}function Rt(){return g===s?m:Ae(da())}function un(){var Je=da(),Mn=oe(Je);if(a=arguments,d=this,E=Je,Mn){if(g===s)return re(E);if(R)return kc(g),g=ro(ye,t),j(E)}return g===s&&(g=ro(ye,t)),m}return un.cancel=ln,un.flush=Rt,un}var Xv=ge(function(e,t){return cc(e,1,t)}),Zv=ge(function(e,t,i){return cc(e,yn(t)||0,i)});function Jv(e){return mi(e,Ue)}function fa(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new _(w);var i=function(){var a=arguments,d=t?t.apply(this,a):a[0],h=i.cache;if(h.has(d))return h.get(d);var m=e.apply(this,a);return i.cache=h.set(d,m)||h,m};return i.cache=new(fa.Cache||_i),i}fa.Cache=_i;function pa(e){if(typeof e!="function")throw new _(w);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function em(e){return md(2,e)}var tm=Wh(function(e,t){t=t.length==1&&de(t[0])?Be(t[0],ht(se())):Be(xt(t,1),ht(se()));var i=t.length;return ge(function(a){for(var d=-1,h=Ot(a.length,i);++d<h;)a[d]=t[d].call(this,a[d]);return Lt(e,this,a)})}),eu=ge(function(e,t){var i=Zn(t,sr(eu));return mi(e,ce,s,t,i)}),wd=ge(function(e,t){var i=Zn(t,sr(wd));return mi(e,be,s,t,i)}),nm=gi(function(e,t){return mi(e,We,s,s,s,t)});function im(e,t){if(typeof e!="function")throw new _(w);return t=t===s?t:pe(t),ge(e,t)}function sm(e,t){if(typeof e!="function")throw new _(w);return t=t==null?0:ct(pe(t),0),ge(function(i){var a=i[t],d=Yi(i,0,t);return a&&jn(d,a),Lt(e,this,d)})}function rm(e,t,i){var a=!0,d=!0;if(typeof e!="function")throw new _(w);return He(i)&&(a="leading"in i?!!i.leading:a,d="trailing"in i?!!i.trailing:d),Ed(e,t,{leading:a,maxWait:t,trailing:d})}function om(e){return vd(e,1)}function am(e,t){return eu(Fl(t),e)}function lm(){if(!arguments.length)return[];var e=arguments[0];return de(e)?e:[e]}function um(e){return mn(e,K)}function cm(e,t){return t=typeof t=="function"?t:s,mn(e,K,t)}function dm(e){return mn(e,V|K)}function fm(e,t){return t=typeof t=="function"?t:s,mn(e,V|K,t)}function pm(e,t){return t==null||uc(e,t,_t(t))}function $n(e,t){return e===t||e!==e&&t!==t}var hm=ra(Tl),_m=ra(function(e,t){return e>=t}),As=_c((function(){return arguments})())?_c:function(e){return je(e)&&L.call(e,"callee")&&!tc.call(e,"callee")},de=A.isArray,vm=Ri?ht(Ri):Ah;function Gt(e){return e!=null&&ha(e.length)&&!yi(e)}function Ze(e){return je(e)&&Gt(e)}function mm(e){return e===!0||e===!1||je(e)&&Mt(e)==ft}var Gi=kp||du,gm=Wr?ht(Wr):Ch;function bm(e){return je(e)&&e.nodeType===1&&!oo(e)}function ym(e){if(e==null)return!0;if(Gt(e)&&(de(e)||typeof e=="string"||typeof e.splice=="function"||Gi(e)||rr(e)||As(e)))return!e.length;var t=Dt(e);if(t==Fe||t==pt)return!e.size;if(so(e))return!Ol(e).length;for(var i in e)if(L.call(e,i))return!1;return!0}function Em(e,t){return to(e,t)}function wm(e,t,i){i=typeof i=="function"?i:s;var a=i?i(e,t):s;return a===s?to(e,t,s,i):!!a}function tu(e){if(!je(e))return!1;var t=Mt(e);return t==On||t==Ls||typeof e.message=="string"&&typeof e.name=="string"&&!oo(e)}function xm(e){return typeof e=="number"&&ic(e)}function yi(e){if(!He(e))return!1;var t=Mt(e);return t==Ut||t==Le||t==Ii||t==Cr}function xd(e){return typeof e=="number"&&e==pe(e)}function ha(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=kt}function He(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function je(e){return e!=null&&typeof e=="object"}var Ad=Ur?ht(Ur):Sh;function Am(e,t){return e===t||Il(e,t,zl(t))}function Cm(e,t,i){return i=typeof i=="function"?i:s,Il(e,t,zl(t),i)}function Tm(e){return Cd(e)&&e!=+e}function Sm(e){if(c_(e))throw new le(y);return vc(e)}function Im(e){return e===null}function Om(e){return e==null}function Cd(e){return typeof e=="number"||je(e)&&Mt(e)==gt}function oo(e){if(!je(e)||Mt(e)!=Ht)return!1;var t=Wo(e);if(t===null)return!0;var i=L.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&ee.call(i)==rt}var nu=zs?ht(zs):Ih;function Dm(e){return xd(e)&&e>=-kt&&e<=kt}var Td=No?ht(No):Oh;function _a(e){return typeof e=="string"||!de(e)&&je(e)&&Mt(e)==Fn}function an(e){return typeof e=="symbol"||je(e)&&Mt(e)==Jt}var rr=Lo?ht(Lo):Dh;function km(e){return e===s}function Nm(e){return je(e)&&Dt(e)==tt}function Lm(e){return je(e)&&Mt(e)==$s}var $m=ra(Dl),Mm=ra(function(e,t){return e<=t});function Sd(e){if(!e)return[];if(Gt(e))return _a(e)?rn(e):Yt(e);if(Yr&&e[Yr])return Po(e[Yr]());var t=Dt(e),i=t==Fe?zr:t==pt?js:or;return i(e)}function Ei(e){if(!e)return e===0?e:0;if(e=yn(e),e===Qe||e===-Qe){var t=e<0?-1:1;return t*Cn}return e===e?e:0}function pe(e){var t=Ei(e),i=t%1;return t===t?i?t-i:t:0}function Id(e){return e?ys(pe(e),0,Ct):0}function yn(e){if(typeof e=="number")return e;if(an(e))return Tn;if(He(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=He(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=_s(e);var i=Ka.test(e);return i||Ya.test(e)?Pi(e.slice(2),i?2:8):Lr.test(e)?Tn:+e}function Od(e){return ei(e,jt(e))}function Pm(e){return e?ys(pe(e),-kt,kt):e===0?e:0}function De(e){return e==null?"":on(e)}var Rm=nr(function(e,t){if(so(t)||Gt(t)){ei(t,_t(t),e);return}for(var i in t)L.call(t,i)&&Zr(e,i,t[i])}),Dd=nr(function(e,t){ei(t,jt(t),e)}),va=nr(function(e,t,i,a){ei(t,jt(t),e,a)}),Fm=nr(function(e,t,i,a){ei(t,_t(t),e,a)}),qm=gi(xl);function Bm(e,t){var i=tr(e);return t==null?i:lc(i,t)}var Wm=ge(function(e,t){e=o(e);var i=-1,a=t.length,d=a>2?t[2]:s;for(d&&Pt(t[0],t[1],d)&&(a=1);++i<a;)for(var h=t[i],m=jt(h),g=-1,E=m.length;++g<E;){var $=m[g],M=e[$];(M===s||$n(M,I[$])&&!L.call(e,$))&&(e[$]=h[$])}return e}),Um=ge(function(e){return e.push(s,Yc),Lt(kd,s,e)});function Vm(e,t){return Vr(e,se(t,3),Jn)}function Hm(e,t){return Vr(e,se(t,3),Cl)}function zm(e,t){return e==null?e:Al(e,se(t,3),jt)}function Km(e,t){return e==null?e:pc(e,se(t,3),jt)}function Ym(e,t){return e&&Jn(e,se(t,3))}function Gm(e,t){return e&&Cl(e,se(t,3))}function jm(e){return e==null?[]:Xo(e,_t(e))}function Qm(e){return e==null?[]:Xo(e,jt(e))}function iu(e,t,i){var a=e==null?s:Es(e,t);return a===s?i:a}function Xm(e,t){return e!=null&&Qc(e,t,yh)}function su(e,t){return e!=null&&Qc(e,t,Eh)}var Zm=Uc(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=te.call(t)),e[t]=i},ou(Qt)),Jm=Uc(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=te.call(t)),L.call(e,t)?e[t].push(i):e[t]=[i]},se),eg=ge(eo);function _t(e){return Gt(e)?oc(e):Ol(e)}function jt(e){return Gt(e)?oc(e,!0):kh(e)}function tg(e,t){var i={};return t=se(t,3),Jn(e,function(a,d,h){vi(i,t(a,d,h),a)}),i}function ng(e,t){var i={};return t=se(t,3),Jn(e,function(a,d,h){vi(i,d,t(a,d,h))}),i}var ig=nr(function(e,t,i){Zo(e,t,i)}),kd=nr(function(e,t,i,a){Zo(e,t,i,a)}),sg=gi(function(e,t){var i={};if(e==null)return i;var a=!1;t=Be(t,function(h){return h=Ki(h,e),a||(a=h.length>1),h}),ei(e,Vl(e),i),a&&(i=mn(i,V|Z|K,Zh));for(var d=t.length;d--;)Ml(i,t[d]);return i});function rg(e,t){return Nd(e,pa(se(t)))}var og=gi(function(e,t){return e==null?{}:Lh(e,t)});function Nd(e,t){if(e==null)return{};var i=Be(Vl(e),function(a){return[a]});return t=se(t),xc(e,i,function(a,d){return t(a,d[0])})}function ag(e,t,i){t=Ki(t,e);var a=-1,d=t.length;for(d||(d=1,e=s);++a<d;){var h=e==null?s:e[ti(t[a])];h===s&&(a=d,h=i),e=yi(h)?h.call(e):h}return e}function lg(e,t,i){return e==null?e:no(e,t,i)}function ug(e,t,i,a){return a=typeof a=="function"?a:s,e==null?e:no(e,t,i,a)}var Ld=zc(_t),$d=zc(jt);function cg(e,t,i){var a=de(e),d=a||Gi(e)||rr(e);if(t=se(t,4),i==null){var h=e&&e.constructor;d?i=a?new h:[]:He(e)?i=yi(h)?tr(Wo(e)):{}:i={}}return(d?Kt:Jn)(e,function(m,g,E){return t(i,m,g,E)}),i}function dg(e,t){return e==null?!0:Ml(e,t)}function fg(e,t,i){return e==null?e:Ic(e,t,Fl(i))}function pg(e,t,i,a){return a=typeof a=="function"?a:s,e==null?e:Ic(e,t,Fl(i),a)}function or(e){return e==null?[]:pi(e,_t(e))}function hg(e){return e==null?[]:pi(e,jt(e))}function _g(e,t,i){return i===s&&(i=t,t=s),i!==s&&(i=yn(i),i=i===i?i:0),t!==s&&(t=yn(t),t=t===t?t:0),ys(yn(e),t,i)}function vg(e,t,i){return t=Ei(t),i===s?(i=t,t=0):i=Ei(i),e=yn(e),wh(e,t,i)}function mg(e,t,i){if(i&&typeof i!="boolean"&&Pt(e,t,i)&&(t=i=s),i===s&&(typeof t=="boolean"?(i=t,t=s):typeof e=="boolean"&&(i=e,e=s)),e===s&&t===s?(e=0,t=1):(e=Ei(e),t===s?(t=e,e=0):t=Ei(t)),e>t){var a=e;e=t,t=a}if(i||e%1||t%1){var d=sc();return Ot(e+d*(t-e+zn("1e-"+((d+"").length-1))),t)}return Nl(e,t)}var gg=ir(function(e,t,i){return t=t.toLowerCase(),e+(i?Md(t):t)});function Md(e){return ru(De(e).toLowerCase())}function Pd(e){return e=De(e),e&&e.replace(Ao,Hr).replace(ui,"")}function bg(e,t,i){e=De(e),t=on(t);var a=e.length;i=i===s?a:ys(pe(i),0,a);var d=i;return i-=t.length,i>=0&&e.slice(i,d)==t}function yg(e){return e=De(e),e&&li.test(e)?e.replace(Nt,pl):e}function Eg(e){return e=De(e),e&&Va.test(e)?e.replace(en,"\\$&"):e}var wg=ir(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),xg=ir(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),Ag=qc("toLowerCase");function Cg(e,t,i){e=De(e),t=pe(t);var a=t?Nn(e):0;if(!t||a>=t)return e;var d=(t-a)/2;return sa(zo(d),i)+e+sa(Ho(d),i)}function Tg(e,t,i){e=De(e),t=pe(t);var a=t?Nn(e):0;return t&&a<t?e+sa(t-a,i):e}function Sg(e,t,i){e=De(e),t=pe(t);var a=t?Nn(e):0;return t&&a<t?sa(t-a,i)+e:e}function Ig(e,t,i){return i||t==null?t=0:t&&(t=+t),Mp(De(e).replace(Oi,""),t||0)}function Og(e,t,i){return(i?Pt(e,t,i):t===s)?t=1:t=pe(t),Ll(De(e),t)}function Dg(){var e=arguments,t=De(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var kg=ir(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});function Ng(e,t,i){return i&&typeof i!="number"&&Pt(e,t,i)&&(t=i=s),i=i===s?Ct:i>>>0,i?(e=De(e),e&&(typeof t=="string"||t!=null&&!nu(t))&&(t=on(t),!t&&Wi(e))?Yi(rn(e),0,i):e.split(t,i)):[]}var Lg=ir(function(e,t,i){return e+(i?" ":"")+ru(t)});function $g(e,t,i){return e=De(e),i=i==null?0:ys(pe(i),0,e.length),t=on(t),e.slice(i,i+t.length)==t}function Mg(e,t,i){var a=p.templateSettings;i&&Pt(e,t,i)&&(t=s),e=De(e),t=va({},t,a,Kc);var d=va({},t.imports,a.imports,Kc),h=_t(d),m=pi(d,h),g,E,$=0,M=t.interpolate||yt,R="__p += '",H=r((t.escape||yt).source+"|"+M.source+"|"+(M===nt?Di:yt).source+"|"+(t.evaluate||yt).source+"|$","g"),j="//# sourceURL="+(L.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++sl+"]")+`
`;e.replace(H,function(oe,ye,Ae,ln,Rt,un){return Ae||(Ae=ln),R+=e.slice($,un).replace(ki,hl),ye&&(g=!0,R+=`' +
__e(`+ye+`) +
'`),Rt&&(E=!0,R+=`';
`+Rt+`;
__p += '`),Ae&&(R+=`' +
((__t = (`+Ae+`)) == null ? '' : __t) +
'`),$=un+oe.length,oe}),R+=`';
`;var re=L.call(t,"variable")&&t.variable;if(!re)R=`with (obj) {
`+R+`
}
`;else if(Dn.test(re))throw new le(S);R=(E?R.replace(Wa,""):R).replace(Or,"$1").replace(Ua,"$1;"),R="function("+(re||"obj")+`) {
`+(re?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(g?", __e = _.escape":"")+(E?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+R+`return __p
}`;var ve=Fd(function(){return Ie(h,j+"return "+R).apply(s,m)});if(ve.source=R,tu(ve))throw ve;return ve}function Pg(e){return De(e).toLowerCase()}function Rg(e){return De(e).toUpperCase()}function Fg(e,t,i){if(e=De(e),e&&(i||t===s))return _s(e);if(!e||!(t=on(t)))return e;var a=rn(e),d=rn(t),h=$o(a,d),m=Mo(a,d)+1;return Yi(a,h,m).join("")}function qg(e,t,i){if(e=De(e),e&&(i||t===s))return e.slice(0,qo(e)+1);if(!e||!(t=on(t)))return e;var a=rn(e),d=Mo(a,rn(t))+1;return Yi(a,0,d).join("")}function Bg(e,t,i){if(e=De(e),e&&(i||t===s))return e.replace(Oi,"");if(!e||!(t=on(t)))return e;var a=rn(e),d=$o(a,rn(t));return Yi(a,d).join("")}function Wg(e,t){var i=me,a=Ve;if(He(t)){var d="separator"in t?t.separator:d;i="length"in t?pe(t.length):i,a="omission"in t?on(t.omission):a}e=De(e);var h=e.length;if(Wi(e)){var m=rn(e);h=m.length}if(i>=h)return e;var g=i-Nn(a);if(g<1)return a;var E=m?Yi(m,0,g).join(""):e.slice(0,g);if(d===s)return E+a;if(m&&(g+=E.length-g),nu(d)){if(e.slice(g).search(d)){var $,M=E;for(d.global||(d=r(d.source,De(os.exec(d))+"g")),d.lastIndex=0;$=d.exec(M);)var R=$.index;E=E.slice(0,R===s?g:R)}}else if(e.indexOf(on(d),g)!=g){var H=E.lastIndexOf(d);H>-1&&(E=E.slice(0,H))}return E+a}function Ug(e){return e=De(e),e&&ai.test(e)?e.replace(Eo,Xs):e}var Vg=ir(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),ru=qc("toUpperCase");function Rd(e,t,i){return e=De(e),t=i?s:t,t===s?vl(e)?gl(e):dl(e):e.match(t)||[]}var Fd=ge(function(e,t){try{return Lt(e,s,t)}catch(i){return tu(i)?i:new le(i)}}),Hg=gi(function(e,t){return Kt(t,function(i){i=ti(i),vi(e,i,Jl(e[i],e))}),e});function zg(e){var t=e==null?0:e.length,i=se();return e=t?Be(e,function(a){if(typeof a[1]!="function")throw new _(w);return[i(a[0]),a[1]]}):[],ge(function(a){for(var d=-1;++d<t;){var h=e[d];if(Lt(h[0],this,a))return Lt(h[1],this,a)}})}function Kg(e){return mh(mn(e,V))}function ou(e){return function(){return e}}function Yg(e,t){return e==null||e!==e?t:e}var Gg=Wc(),jg=Wc(!0);function Qt(e){return e}function au(e){return mc(typeof e=="function"?e:mn(e,V))}function Qg(e){return bc(mn(e,V))}function Xg(e,t){return yc(e,mn(t,V))}var Zg=ge(function(e,t){return function(i){return eo(i,e,t)}}),Jg=ge(function(e,t){return function(i){return eo(e,i,t)}});function lu(e,t,i){var a=_t(t),d=Xo(t,a);i==null&&!(He(t)&&(d.length||!a.length))&&(i=t,t=e,e=this,d=Xo(t,_t(t)));var h=!(He(i)&&"chain"in i)||!!i.chain,m=yi(e);return Kt(d,function(g){var E=t[g];e[g]=E,m&&(e.prototype[g]=function(){var $=this.__chain__;if(h||$){var M=e(this.__wrapped__),R=M.__actions__=Yt(this.__actions__);return R.push({func:E,args:arguments,thisArg:e}),M.__chain__=$,M}return E.apply(e,jn([this.value()],arguments))})}),e}function eb(){return lt._===this&&(lt._=Se),this}function uu(){}function tb(e){return e=pe(e),ge(function(t){return Ec(t,e)})}var nb=Bl(Be),ib=Bl(Yn),sb=Bl(Qn);function qd(e){return Yl(e)?Ge(ti(e)):$h(e)}function rb(e){return function(t){return e==null?s:Es(e,t)}}var ob=Vc(),ab=Vc(!0);function cu(){return[]}function du(){return!1}function lb(){return{}}function ub(){return""}function cb(){return!0}function db(e,t){if(e=pe(e),e<1||e>kt)return[];var i=Ct,a=Ot(e,Ct);t=se(t),e-=Ct;for(var d=Bi(a,t);++i<e;)t(i);return d}function fb(e){return de(e)?Be(e,ti):an(e)?[e]:Yt(rd(De(e)))}function pb(e){var t=++_e;return De(e)+t}var hb=ia(function(e,t){return e+t},0),_b=Wl("ceil"),vb=ia(function(e,t){return e/t},1),mb=Wl("floor");function gb(e){return e&&e.length?Qo(e,Qt,Tl):s}function bb(e,t){return e&&e.length?Qo(e,se(t,2),Tl):s}function yb(e){return Me(e,Qt)}function Eb(e,t){return Me(e,se(t,2))}function wb(e){return e&&e.length?Qo(e,Qt,Dl):s}function xb(e,t){return e&&e.length?Qo(e,se(t,2),Dl):s}var Ab=ia(function(e,t){return e*t},1),Cb=Wl("round"),Tb=ia(function(e,t){return e-t},0);function Sb(e){return e&&e.length?hn(e,Qt):0}function Ib(e,t){return e&&e.length?hn(e,se(t,2)):0}return p.after=Qv,p.ary=vd,p.assign=Rm,p.assignIn=Dd,p.assignInWith=va,p.assignWith=Fm,p.at=qm,p.before=md,p.bind=Jl,p.bindAll=Hg,p.bindKey=gd,p.castArray=lm,p.chain=pd,p.chunk=m_,p.compact=g_,p.concat=b_,p.cond=zg,p.conforms=Kg,p.constant=ou,p.countBy=Sv,p.create=Bm,p.curry=bd,p.curryRight=yd,p.debounce=Ed,p.defaults=Wm,p.defaultsDeep=Um,p.defer=Xv,p.delay=Zv,p.difference=y_,p.differenceBy=E_,p.differenceWith=w_,p.drop=x_,p.dropRight=A_,p.dropRightWhile=C_,p.dropWhile=T_,p.fill=S_,p.filter=Ov,p.flatMap=Nv,p.flatMapDeep=Lv,p.flatMapDepth=$v,p.flatten=ud,p.flattenDeep=I_,p.flattenDepth=O_,p.flip=Jv,p.flow=Gg,p.flowRight=jg,p.fromPairs=D_,p.functions=jm,p.functionsIn=Qm,p.groupBy=Mv,p.initial=N_,p.intersection=L_,p.intersectionBy=$_,p.intersectionWith=M_,p.invert=Zm,p.invertBy=Jm,p.invokeMap=Rv,p.iteratee=au,p.keyBy=Fv,p.keys=_t,p.keysIn=jt,p.map=ca,p.mapKeys=tg,p.mapValues=ng,p.matches=Qg,p.matchesProperty=Xg,p.memoize=fa,p.merge=ig,p.mergeWith=kd,p.method=Zg,p.methodOf=Jg,p.mixin=lu,p.negate=pa,p.nthArg=tb,p.omit=sg,p.omitBy=rg,p.once=em,p.orderBy=qv,p.over=nb,p.overArgs=tm,p.overEvery=ib,p.overSome=sb,p.partial=eu,p.partialRight=wd,p.partition=Bv,p.pick=og,p.pickBy=Nd,p.property=qd,p.propertyOf=rb,p.pull=q_,p.pullAll=dd,p.pullAllBy=B_,p.pullAllWith=W_,p.pullAt=U_,p.range=ob,p.rangeRight=ab,p.rearg=nm,p.reject=Vv,p.remove=V_,p.rest=im,p.reverse=Xl,p.sampleSize=zv,p.set=lg,p.setWith=ug,p.shuffle=Kv,p.slice=H_,p.sortBy=jv,p.sortedUniq=X_,p.sortedUniqBy=Z_,p.split=Ng,p.spread=sm,p.tail=J_,p.take=ev,p.takeRight=tv,p.takeRightWhile=nv,p.takeWhile=iv,p.tap=gv,p.throttle=rm,p.thru=ua,p.toArray=Sd,p.toPairs=Ld,p.toPairsIn=$d,p.toPath=fb,p.toPlainObject=Od,p.transform=cg,p.unary=om,p.union=sv,p.unionBy=rv,p.unionWith=ov,p.uniq=av,p.uniqBy=lv,p.uniqWith=uv,p.unset=dg,p.unzip=Zl,p.unzipWith=fd,p.update=fg,p.updateWith=pg,p.values=or,p.valuesIn=hg,p.without=cv,p.words=Rd,p.wrap=am,p.xor=dv,p.xorBy=fv,p.xorWith=pv,p.zip=hv,p.zipObject=_v,p.zipObjectDeep=vv,p.zipWith=mv,p.entries=Ld,p.entriesIn=$d,p.extend=Dd,p.extendWith=va,lu(p,p),p.add=hb,p.attempt=Fd,p.camelCase=gg,p.capitalize=Md,p.ceil=_b,p.clamp=_g,p.clone=um,p.cloneDeep=dm,p.cloneDeepWith=fm,p.cloneWith=cm,p.conformsTo=pm,p.deburr=Pd,p.defaultTo=Yg,p.divide=vb,p.endsWith=bg,p.eq=$n,p.escape=yg,p.escapeRegExp=Eg,p.every=Iv,p.find=Dv,p.findIndex=ad,p.findKey=Vm,p.findLast=kv,p.findLastIndex=ld,p.findLastKey=Hm,p.floor=mb,p.forEach=hd,p.forEachRight=_d,p.forIn=zm,p.forInRight=Km,p.forOwn=Ym,p.forOwnRight=Gm,p.get=iu,p.gt=hm,p.gte=_m,p.has=Xm,p.hasIn=su,p.head=cd,p.identity=Qt,p.includes=Pv,p.indexOf=k_,p.inRange=vg,p.invoke=eg,p.isArguments=As,p.isArray=de,p.isArrayBuffer=vm,p.isArrayLike=Gt,p.isArrayLikeObject=Ze,p.isBoolean=mm,p.isBuffer=Gi,p.isDate=gm,p.isElement=bm,p.isEmpty=ym,p.isEqual=Em,p.isEqualWith=wm,p.isError=tu,p.isFinite=xm,p.isFunction=yi,p.isInteger=xd,p.isLength=ha,p.isMap=Ad,p.isMatch=Am,p.isMatchWith=Cm,p.isNaN=Tm,p.isNative=Sm,p.isNil=Om,p.isNull=Im,p.isNumber=Cd,p.isObject=He,p.isObjectLike=je,p.isPlainObject=oo,p.isRegExp=nu,p.isSafeInteger=Dm,p.isSet=Td,p.isString=_a,p.isSymbol=an,p.isTypedArray=rr,p.isUndefined=km,p.isWeakMap=Nm,p.isWeakSet=Lm,p.join=P_,p.kebabCase=wg,p.last=bn,p.lastIndexOf=R_,p.lowerCase=xg,p.lowerFirst=Ag,p.lt=$m,p.lte=Mm,p.max=gb,p.maxBy=bb,p.mean=yb,p.meanBy=Eb,p.min=wb,p.minBy=xb,p.stubArray=cu,p.stubFalse=du,p.stubObject=lb,p.stubString=ub,p.stubTrue=cb,p.multiply=Ab,p.nth=F_,p.noConflict=eb,p.noop=uu,p.now=da,p.pad=Cg,p.padEnd=Tg,p.padStart=Sg,p.parseInt=Ig,p.random=mg,p.reduce=Wv,p.reduceRight=Uv,p.repeat=Og,p.replace=Dg,p.result=ag,p.round=Cb,p.runInContext=b,p.sample=Hv,p.size=Yv,p.snakeCase=kg,p.some=Gv,p.sortedIndex=z_,p.sortedIndexBy=K_,p.sortedIndexOf=Y_,p.sortedLastIndex=G_,p.sortedLastIndexBy=j_,p.sortedLastIndexOf=Q_,p.startCase=Lg,p.startsWith=$g,p.subtract=Tb,p.sum=Sb,p.sumBy=Ib,p.template=Mg,p.times=db,p.toFinite=Ei,p.toInteger=pe,p.toLength=Id,p.toLower=Pg,p.toNumber=yn,p.toSafeInteger=Pm,p.toString=De,p.toUpper=Rg,p.trim=Fg,p.trimEnd=qg,p.trimStart=Bg,p.truncate=Wg,p.unescape=Ug,p.uniqueId=pb,p.upperCase=Vg,p.upperFirst=ru,p.each=hd,p.eachRight=_d,p.first=cd,lu(p,(function(){var e={};return Jn(p,function(t,i){L.call(p.prototype,i)||(e[i]=t)}),e})(),{chain:!1}),p.VERSION=f,Kt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),Kt(["drop","take"],function(e,t){Ee.prototype[e]=function(i){i=i===s?1:ct(pe(i),0);var a=this.__filtered__&&!t?new Ee(this):this.clone();return a.__filtered__?a.__takeCount__=Ot(i,a.__takeCount__):a.__views__.push({size:Ot(i,Ct),type:e+(a.__dir__<0?"Right":"")}),a},Ee.prototype[e+"Right"]=function(i){return this.reverse()[e](i).reverse()}}),Kt(["filter","map","takeWhile"],function(e,t){var i=t+1,a=i==At||i==vt;Ee.prototype[e]=function(d){var h=this.clone();return h.__iteratees__.push({iteratee:se(d,3),type:i}),h.__filtered__=h.__filtered__||a,h}}),Kt(["head","last"],function(e,t){var i="take"+(t?"Right":"");Ee.prototype[e]=function(){return this[i](1).value()[0]}}),Kt(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");Ee.prototype[e]=function(){return this.__filtered__?new Ee(this):this[i](1)}}),Ee.prototype.compact=function(){return this.filter(Qt)},Ee.prototype.find=function(e){return this.filter(e).head()},Ee.prototype.findLast=function(e){return this.reverse().find(e)},Ee.prototype.invokeMap=ge(function(e,t){return typeof e=="function"?new Ee(this):this.map(function(i){return eo(i,e,t)})}),Ee.prototype.reject=function(e){return this.filter(pa(se(e)))},Ee.prototype.slice=function(e,t){e=pe(e);var i=this;return i.__filtered__&&(e>0||t<0)?new Ee(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==s&&(t=pe(t),i=t<0?i.dropRight(-t):i.take(t-e)),i)},Ee.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ee.prototype.toArray=function(){return this.take(Ct)},Jn(Ee.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),d=p[a?"take"+(t=="last"?"Right":""):t],h=a||/^find/.test(t);d&&(p.prototype[t]=function(){var m=this.__wrapped__,g=a?[1]:arguments,E=m instanceof Ee,$=g[0],M=E||de(m),R=function(ye){var Ae=d.apply(p,jn([ye],g));return a&&H?Ae[0]:Ae};M&&i&&typeof $=="function"&&$.length!=1&&(E=M=!1);var H=this.__chain__,j=!!this.__actions__.length,re=h&&!H,ve=E&&!j;if(!h&&M){m=ve?m:new Ee(this);var oe=e.apply(m,g);return oe.__actions__.push({func:ua,args:[R],thisArg:s}),new vn(oe,H)}return re&&ve?e.apply(this,g):(oe=this.thru(R),re?a?oe.value()[0]:oe.value():oe)})}),Kt(["pop","push","shift","sort","splice","unshift"],function(e){var t=x[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var d=arguments;if(a&&!this.__chain__){var h=this.value();return t.apply(de(h)?h:[],d)}return this[i](function(m){return t.apply(de(m)?m:[],d)})}}),Jn(Ee.prototype,function(e,t){var i=p[t];if(i){var a=i.name+"";L.call(er,a)||(er[a]=[]),er[a].push({name:t,func:i})}}),er[na(s,ae).name]=[{name:"wrapper",func:s}],Ee.prototype.clone=Up,Ee.prototype.reverse=Vp,Ee.prototype.value=Hp,p.prototype.at=bv,p.prototype.chain=yv,p.prototype.commit=Ev,p.prototype.next=wv,p.prototype.plant=Av,p.prototype.reverse=Cv,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=Tv,p.prototype.first=p.prototype.head,Yr&&(p.prototype[Yr]=xv),p}),Vi=vs();Kn?((Kn.exports=Vi)._=Vi,qr._=Vi):lt._=Vi}).call(Hw)})(co,co.exports)),co.exports}var ho=zw();function Kw(u){let n=null,s=null,f=new Map;const v=V=>JSON.stringify(V),y=async(V,Z,K,ne)=>{if(ne===(K==="cart"?n:s))return{success:!0,skipped:!0};if(f.has(K))return console.log(` Skipping duplicate ${K} request`),{success:!1,skipped:!0};const ie=new AbortController,G=setTimeout(()=>ie.abort(),5e3);f.set(K,!0);try{const ae=await fetch(V,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify(Z),signal:ie.signal});if(clearTimeout(G),!ae.ok)throw new Error(`HTTP ${ae.status}`);const Ce=await ae.json();return K==="cart"?n=ne:s=ne,console.log(` ${K} updated - v${Ce.version}`),{success:!0,data:Ce}}catch(ae){return ae.name==="AbortError"?console.warn(` ${K} update timeout`):console.error(` Failed to update ${K}:`,ae.message),{success:!1,error:ae}}finally{f.delete(K)}},w=ho.debounce(async V=>{const Z=v(V);await y("/api/pos/terminal/update-cart",{terminal_id:u,cart:V},"cart",Z)},800),S=ho.debounce(async V=>{const Z=v(V);await y("/api/pos/terminal/update-ui",{terminal_id:u,ui:V},"ui",Z)},300),O=async V=>{const Z=v(V);return await y("/api/pos/terminal/update-cart",{terminal_id:u,cart:V},"cart",Z)},U=ho.debounce(async(V,Z)=>{const K=v(V),ne=v(Z);if(K===n&&ne===s)return{success:!0,skipped:!0};const ie=new AbortController,G=setTimeout(()=>ie.abort(),5e3);try{const ae=await fetch("/api/pos/terminal/update-both",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify({terminal_id:u,cart:V,ui:Z}),signal:ie.signal});if(clearTimeout(G),!ae.ok)throw new Error(`HTTP ${ae.status}`);const Ce=await ae.json();return n=K,s=ne,console.log(` Batch update successful - v${Ce.version}`),{success:!0,data:Ce}}catch(ae){return console.error(" Batch update failed:",ae.message),{success:!1,error:ae}}},500);return{broadcastCartUpdate:w,broadcastUIUpdate:S,broadcastImmediateCartUpdate:O,broadcastBatchUpdate:U,clearBroadcastCache:()=>{n=null,s=null,f.clear(),console.log(" Broadcast cache cleared")}}}const Yw={key:0,class:"modal fade show d-block",tabindex:"-1",style:{background:"rgba(0,0,0,0.5)","z-index":"9999"}},Gw={class:"modal-dialog modal-lg modal-dialog-centered"},jw={class:"modal-content"},Qw={class:"modal-header bg-warning text-dark"},Xw={class:"modal-body"},Zw={key:0,class:"alert alert-info mb-3"},Jw={class:"mb-0"},ex={key:1,class:"alert alert-danger"},tx={class:"text-muted"},nx={key:2},ix={class:"fw-bold"},sx={key:0,class:"badge bg-secondary ms-2"},rx={class:"table table-sm table-bordered"},ox={class:"text-end"},ax={class:"text-end"},lx={class:"text-end text-danger fw-bold"},ux={class:"modal-footer"},cx={__name:"ConfirmMissingIngredientsModal",props:{show:Boolean,missingIngredients:{type:Array,default:()=>[]}},emits:["close","confirm"],setup(u,{emit:n}){const s=u,f=n;Cs(()=>s.show,S=>{console.log(" Modal show changed:",S),S&&console.log(" Missing ingredients:",s.missingIngredients)},{immediate:!0}),Cs(()=>s.missingIngredients,S=>{console.log(" Missing ingredients changed:",S),console.log(" Array length:",S?.length),console.log(" Is array?:",Array.isArray(S))},{immediate:!0,deep:!0});const v=we(()=>{if(console.log(" Computing groupedByItem"),console.log(" Input missingIngredients:",s.missingIngredients),!Array.isArray(s.missingIngredients)||s.missingIngredients.length===0)return console.log(" No ingredients to group (not array or empty)"),{};const S={};return s.missingIngredients.forEach((O,U)=>{console.log(` Processing ingredient ${U}:`,O);const P=`${O.item_id}-${O.variant_id||"default"}`;S[P]||(S[P]={item_title:O.item_title,variant_name:O.variant_name,ingredients:[]}),S[P].ingredients.push(O)}),console.log(" Final grouped data:",S),S}),y=we(()=>s.missingIngredients&&s.missingIngredients.length>0),w=we(()=>Object.keys(v.value).length);return(S,O)=>u.show?ot((C(),T("div",Yw,[c("div",Gw,[c("div",jw,[c("div",Qw,[O[4]||(O[4]=c("h5",{class:"modal-title"},[c("i",{class:"bi bi-exclamation-triangle-fill me-2"}),fe(" Ingredient Shortage Warning ")],-1)),c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:O[0]||(O[0]=U=>f("close"))},[...O[3]||(O[3]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),c("div",Xw,[y.value?X("",!0):(C(),T("div",Zw,[O[5]||(O[5]=c("strong",null,"Debug Info:",-1)),c("ul",Jw,[c("li",null,"Has data: "+N(y.value),1),c("li",null,"Array length: "+N(u.missingIngredients?.length||0),1),c("li",null,"Is array: "+N(Array.isArray(u.missingIngredients)),1),c("li",null,"Group count: "+N(w.value),1)])])),O[10]||(O[10]=c("div",{class:"alert alert-warning"},[c("strong",null,"Warning:"),fe(" The following items have ingredient shortages. The order can still be placed, but pending ingredient deductions will be recorded and automatically deducted when stock arrives. ")],-1)),y.value?(C(),T("div",nx,[(C(!0),T(Oe,null,ze(v.value,(U,P)=>(C(),T("div",{key:P,class:"mb-4"},[c("h6",ix,[fe(N(U.item_title)+" ",1),U.variant_name?(C(),T("span",sx,N(U.variant_name),1)):X("",!0)]),c("table",rx,[O[9]||(O[9]=c("thead",{class:"table-light"},[c("tr",null,[c("th",null,"Ingredient"),c("th",{class:"text-end"},"Required"),c("th",{class:"text-end"},"Available"),c("th",{class:"text-end"},"Short")])],-1)),c("tbody",null,[(C(!0),T(Oe,null,ze(U.ingredients,V=>(C(),T("tr",{key:V.inventory_item_id},[c("td",null,N(V.inventory_item_name),1),c("td",ox,N(V.required_quantity)+" "+N(V.unit),1),c("td",ax,N(V.available_quantity)+" "+N(V.unit),1),c("td",lx,N(V.shortage_quantity)+" "+N(V.unit),1)]))),128))])])]))),128))])):(C(),T("div",ex,[O[6]||(O[6]=c("i",{class:"bi bi-exclamation-circle me-2"},null,-1)),O[7]||(O[7]=fe(" No missing ingredient data available. ",-1)),O[8]||(O[8]=c("br",null,null,-1)),c("small",tx," Received "+N(u.missingIngredients?.length||0)+" ingredient(s) ",1)]))]),c("div",ux,[c("button",{type:"button",class:"btn btn-secondary px-2 py-2",onClick:O[1]||(O[1]=U=>f("close"))}," Cancel Order "),c("button",{type:"button",class:"btn btn-primary px-4 py-2",onClick:O[2]||(O[2]=U=>f("confirm"))}," Proceed Anyway ")])])])],512)),[[Xi,u.show]]):X("",!0)}},dx={class:"page-wrapper"},fx={class:"container-fluid px-3 py-3"},px={class:"row gx-3 gy-3"},hx={key:0,class:"row g-3 tablet-screen"},_x={class:"d-flex justify-content-between justify align-items-center mb-3"},vx={style:{width:"250px",position:"relative"}},mx={key:1,type:"text",class:"form-control form-control-sm",placeholder:"Search categories...",disabled:"",style:{"border-radius":"8px",padding:"8px 12px"}},gx={key:0,class:"col-12 text-center py-5"},bx={class:"col-6 col-md-4 col-lg-4 category-cards"},yx={class:"cat-pill"},Ex=["onClick"],wx={class:"cat-icon-wrap"},xx={class:"cat-icon"},Ax=["src"],Cx={key:1},Tx={class:"cat-name"},Sx={class:"cat-pill"},Ix={key:0,class:"col-12"},Ox={key:1},Dx={class:"d-flex flex-wrap gap-2 align-items-center mb-4"},kx={class:"fw-bold mb-0"},Nx={key:0,class:"d-flex gap-2 ms-auto align-items-center"},Lx={class:"search-wrap position-relative"},$x={key:0,class:"col-12"},Mx={class:"alert alert-warning border-0 rounded-4 text-center py-5"},Px={class:"text-muted mb-3"},Rx={key:1,class:"row g-3"},Fx={key:0,class:"col-12 text-center py-5"},qx={class:"card rounded-4 shadow-sm overflow-hidden border-3 w-100 d-flex flex-row align-items-stretch",style:{"border-color":"#dc3545"}},Bx={class:"position-relative",style:{flex:"0 0 40%","max-width":"40%"}},Wx=["src"],Ux={class:"position-absolute top-0 start-0 m-1 px-2 py-1 rounded-pill text-white fw-semibold bg-danger",style:{"font-size":"0.58rem","letter-spacing":"0.3px"}},Vx={class:"p-3 d-flex flex-column justify-content-between",style:{flex:"1 1 60%","min-width":"0",position:"relative"}},Hx={class:"h5 fw-bold mb-2 menu-name text-danger"},zx={class:"mb-3"},Kx={class:"d-flex flex-wrap gap-1"},Yx={class:"mt-2"},Gx=["onClick"],jx=["onClick","disabled"],Qx={class:"qty-box border rounded-pill px-2 py-2 text-center fw-semibold left-card-cntrl-btn",style:{"min-width":"55px"}},Xx=["onClick"],Zx={key:0,class:"col-12"},Jx={key:2,class:"row g-3"},eA={class:"position-relative",style:{flex:"0 0 40%","max-width":"40%"}},tA=["src"],nA={key:0,class:"position-absolute bottom-0 start-0 end-0 text-center bg-light bg-opacity-75 fw-semibold",style:{"font-size":"0.6rem !important",padding:"2px 4px"}},iA={key:0,class:"text-muted text-decoration-line-through me-1"},sA={class:"fw-bold text-success me-2"},rA={key:1,class:"text-muted text-decoration-line-through me-1"},oA={class:"fw-bold text-success"},aA={class:"text-decoration-line-through opacity-75 me-1"},lA={class:"fw-bold text-white"},uA={key:1,class:"position-absolute bottom-0 start-0 end-0 m-2 badge bg-danger py-2"},cA={class:"p-3 d-flex flex-column justify-content-between",style:{flex:"1 1 60%","min-width":"0",position:"relative"}},dA={key:0,class:"position-absolute px-2 py-1 rounded-pill bg-success text-white small fw-bold",style:{fontSize:"0.7rem",top:"7px",right:"7px"}},fA={key:0,class:"mb-3"},pA=["onUpdate:modelValue","onChange"],hA=["value"],_A={key:1},vA={class:"form-label small fw-semibold mb-2"},mA={key:0,class:"text-muted",style:{"font-size":"0.75rem"}},gA={key:0,class:"d-flex flex-wrap gap-1"},bA={key:1},yA={class:"d-flex justify-content-between align-items-center w-100"},EA={class:"fw-semibold text-success"},wA=["onClick"],xA=["onClick","disabled"],AA={class:"qty-box border rounded-pill px-2 py-2 text-center fw-semibold left-card-cntrl-btn",style:{"min-width":"55px"}},CA=["onClick"],TA={key:0,class:"col-lg-4 right-cart"},SA={class:"col-12 d-flex align-items-center justify-content-end gap-2 mb-2"},IA={key:0,class:"badge bg-danger ms-1"},OA={class:"cart card border-0 shadow-lg rounded-4"},DA={class:"cart-header"},kA={class:"order-type"},NA=["onClick"],LA={class:"cart-body"},$A={class:"mb-3"},MA={key:0,class:"row g-2"},PA={class:"col-6 table-dropdown"},RA=["value"],FA={key:0,class:"invalid-feedback d-block"},qA={class:"col-6 table-dropdown"},BA={key:1},WA={key:0,class:"invalid-feedback d-block"},UA={key:2,class:"mt-2"},VA={key:0,class:"invalid-feedback d-block"},HA={key:1,class:"invalid-feedback d-block"},zA={class:"cart-lines"},KA={key:0,class:"empty"},YA={class:"line-left"},GA=["src"],jA={class:"meta"},QA=["title"],XA={key:0},ZA={class:"badge bg-success",style:{"font-size":"0.65rem"}},JA={key:1,class:"addon-icons mt-1"},eC=["onClick","title"],tC={class:"text-muted small"},nC={key:2,class:"badge bg-success mt-1 ms-1",style:{"font-size":"0.65rem"}},iC={key:3,class:"mt-1"},sC={class:"badge",style:{"font-size":"0.65rem",background:"#1B1670",color:"white"}},rC={key:4,class:"note"},oC={class:"line-right"},aC={class:"qty-controls"},lC=["onClick"],uC={class:"qty"},cC=["onClick"],dC={class:"price-delete"},fC={class:"price"},pC=["onClick"],hC={class:"totals"},_C={class:"trow"},vC={class:"sub-total"},mC={key:0,class:"trow"},gC={class:"text-info"},bC={key:1,class:"trow"},yC={class:"fw-semibold"},EC={key:2,class:"trow"},wC={class:"fw-semibold"},xC={key:3,class:"trow"},AC={class:"text-danger"},CC={key:4,class:"promos-section mb-3"},TC={class:"promo-total mt-2 rounded-3 bg-success-subtle"},SC={class:"d-flex justify-content-between align-items-center"},IC={class:"text-success fs-6"},OC={key:5,class:"pending-discounts-section mb-3"},DC={class:"d-flex align-items-center gap-2 text-warning"},kC={class:"text-warning"},NC={key:6,class:"approved-discounts-section mb-3"},LC={class:"trow border-top pt-2 mt-2"},$C={class:"text-success"},MC={class:"trow total"},PC={class:"mb-3"},RC={class:"mb-3"},FC={class:"cart-footer"},qC={class:"modal fade",id:"chooseItem",tabindex:"-1","aria-hidden":"true"},BC={class:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"},WC={class:"modal-content rounded-3 shadow border-0",style:{"max-height":"90vh"}},UC={class:"modal-header border-0 bg-light py-2 px-3 rounded-top"},VC={class:"fw-bold mb-0"},HC={class:"px-3 pt-2 progress-bar"},zC={class:"stepper-container position-relative",style:{"min-height":"60px"}},KC={key:0,class:"bi bi-check-lg",style:{"font-size":"0.7rem"}},YC={key:1,style:{"font-size":"0.75rem"}},GC={class:"modal-body px-3 py-2"},jC={class:"row g-3 mb-3"},QC={class:"col-lg-5"},XC={class:"position-relative mb-3"},ZC=["src"],JC={key:0,class:"badge bg-danger px-2 py-1 position-absolute top-0 end-0 rounded-end-0 rounded-bottom-0 shadow-sm",style:{"font-size":"0.7rem"}},eT={class:"rounded-3 border shadow-sm p-3 bg-white"},tT={class:"d-flex justify-content-between mb-1",style:{"font-size":"0.85rem"}},nT={key:0,class:"d-flex justify-content-between mb-1",style:{"font-size":"0.85rem"}},iT={class:"text-success"},sT={class:"d-flex justify-content-between",style:{"font-size":"1rem"}},rT={class:"fw-bold text-primary"},oT={class:"col-lg-7"},aT={class:"px-1"},lT={class:"step-content"},uT={class:"row g-2"},cT=["onClick"],dT={class:"d-flex justify-content-between align-items-center"},fT={class:"fw-bold mb-0",style:{"font-size":"0.85rem"}},pT={class:"d-flex justify-content-between align-items-center gap-2"},hT={key:0,class:"text-primary"},_T={style:{"font-size":"0.9rem"}},vT={class:"step-content"},mT={class:"row g-2"},gT=["id","checked","disabled","onChange"],bT=["for"],yT={class:"step-content"},ET={class:"fw-semibold mb-2 d-flex justify-content-between",style:{"font-size":"0.85rem"}},wT={key:0,class:"badge rounded-pill bg-primary",style:{"font-size":"0.7rem"}},xT={class:"row g-2"},AT={class:"d-flex align-items-center flex-grow-1"},CT=["id","checked","onChange"],TT=["for"],ST={class:"text-success fw-semibold ms-1"},IT={key:0,class:"d-flex align-items-center gap-2"},OT=["onClick","disabled"],DT={class:"fw-bold",style:{"min-width":"25px","text-align":"center","font-size":"0.9rem"}},kT=["onClick"],NT={class:"step-content"},LT={class:"summary-card p-3 rounded-3 shadow-sm mb-3"},$T={key:0,class:"summary-item"},MT={class:"summary-value"},PT={key:1,class:"summary-item"},RT={class:"summary-value"},FT={key:2,class:"summary-item"},qT={class:"summary-value"},BT={class:"d-flex align-items-center mb-3"},WT={class:"qty-group gap-1"},UT=["disabled"],VT={class:"qty-box rounded-pill"},HT={class:"mb-2"},zT={class:"text-end small text-muted mt-1",style:{"font-size":"0.7rem"}},KT={class:"modal-footer border-0 px-3 py-2 d-flex justify-content-end gap-2"},YT={class:"modal fade",id:"customizeDealModal",tabindex:"-1","aria-hidden":"true"},GT={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},jT={class:"modal-content rounded-3 shadow border-0",style:{"max-height":"90vh"}},QT={class:"modal-header border-0 bg-light py-2 px-3 rounded-top"},XT={class:"fw-bold mb-0"},ZT={class:"text-muted small mb-0",style:{"font-size":"0.8rem"}},JT={class:"px-3 pt-2 progress-bar"},eS={class:"stepper-container position-relative",style:{"min-height":"60px"}},tS={key:0,class:"bi bi-check-lg",style:{"font-size":"0.7rem"}},nS={key:1,style:{"font-size":"0.75rem"}},iS={class:"modal-body px-3 py-2"},sS={class:"row g-3 mb-3"},rS={class:"col-lg-4"},oS={class:"position-relative mb-3"},aS=["src"],lS={class:"badge bg-danger position-absolute top-0 end-0 m-2"},uS={key:0},cS={key:1},dS={class:"rounded-3 border shadow-sm p-3 bg-white mb-3"},fS={class:"fw-bold mb-2 d-flex align-content-center",style:{"font-size":"0.9rem"}},pS={class:"d-flex align-items-center"},hS={class:"flex-grow-1"},_S={class:"text-muted small"},vS={key:0,class:"text-success small fw-semibold"},mS={class:"fw-bold text-primary"},gS={class:"rounded-3 border shadow-sm p-3 bg-white"},bS={class:"list-group list-group-flush"},yS={class:"d-flex align-items-center"},ES={key:0,class:"bi bi-check-circle-fill text-success me-2"},wS={key:2,class:"bi bi-circle text-muted me-2"},xS={class:"col-lg-8"},AS={class:"px-1"},CS={class:"step-content"},TS={class:"d-flex align-items-start mb-2"},SS={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},IS={class:"row g-2"},OS=["id","checked","disabled","onChange"],DS=["for"],kS={class:"step-content"},NS={class:"d-flex align-items-start mb-2"},LS={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},$S={class:"fw-semibold mb-1 d-flex justify-content-between",style:{"font-size":"0.85rem"}},MS={key:0,class:"badge rounded-pill bg-primary",style:{"font-size":"0.7rem"}},PS={class:"step-content"},RS={class:"d-flex align-items-start mb-2"},FS={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},qS={class:"summary-card p-3 rounded-3 shadow-sm mb-3"},BS={class:"summary-item"},WS={class:"summary-value"},US={class:"summary-item"},VS={class:"summary-value"},HS={key:0,class:"summary-item"},zS={class:"summary-value text-danger"},KS={key:1,class:"summary-item"},YS={class:"summary-value text-success"},GS={key:2,class:"summary-item"},jS={class:"summary-value text-success fw-bold"},QS={class:"summary-item border-top pt-2 mt-2"},XS={class:"summary-value fw-bold text-primary"},ZS={class:"mb-2"},JS={class:"fw-semibold mb-1",style:{"font-size":"0.85rem"}},e2={class:"text-end small text-muted mt-1",style:{"font-size":"0.7rem"}},t2={class:"modal-footer border-0 px-3 py-2 d-flex justify-content-end"},n2={class:"d-flex gap-2"},i2={class:"modal fade",id:"addonManagementModal",tabindex:"-1","aria-hidden":"true"},s2={class:"modal-dialog modal-lg modal-dialog-centered"},r2={class:"modal-content rounded-4 border-0 shadow-lg"},o2={key:0,class:"modal-body pt-2"},a2={class:"alert alert-light border rounded-3 mb-3"},l2={class:"d-flex align-items-center gap-3"},u2=["src"],c2={class:"flex-grow-1"},d2={class:"fw-bold fs-6"},f2={class:"d-flex gap-3 mt-1"},p2={class:"text-muted"},h2={class:"fw-semibold"},_2={class:"text-muted"},v2={class:"fw-semibold"},m2={key:0,class:"table-responsive"},g2={class:"table table-hover align-middle mb-0"},b2={class:"text-center"},y2={class:"form-check d-flex justify-content-center"},E2=["checked","onChange"],w2={class:"d-flex align-items-center gap-2"},x2={class:"fw-semibold"},A2={key:0,class:"text-muted"},C2={class:"text-center"},T2={class:"badge bg-success-subtle text-success px-3 py-2 fs-6"},S2={class:"d-flex align-items-center justify-content-center gap-2"},I2=["onClick","disabled"],O2={class:"fw-bold fs-5 px-3",style:{"min-width":"50px","text-align":"center"}},D2=["onClick","disabled"],k2={key:1,class:"text-center text-muted py-5"},N2={class:"mt-3 p-3 rounded-3"},L2={key:0,class:"mt-3 p-3 rounded-3 border border-success bg-light"},$2={class:"text-success fw-semibold"},M2={__name:"Index",props:["client_secret","order_code"],setup(u){const{formatCurrencySymbol:n}=qb();ar(()=>{fu(()=>{document.querySelectorAll('[data-bs-toggle="popover"]').forEach(o=>{new Fa(o)})})});const s=W([]),f=W(!0),v=W(""),y=W(Date.now()),w=`category-search-${Math.random().toString(36).substr(2,9)}`,S=W(!1),O=we(()=>{const o=v.value.trim().toLowerCase();return o?Wr.value.filter(r=>r.name.toLowerCase().includes(o)):Wr.value}),U=async()=>{f.value=!0;try{const o=await axios.get("/api/pos/fetch-menu-categories");s.value=o.data,s.value.length>0&&(Rn.value=s.value[0].id)}catch(o){console.error("Error fetching categories:",o)}finally{f.value=!1}},P=W([]),V=async()=>{try{const o=await axios.get("/api/pos/fetch-menu-items");P.value=o.data.data}catch(o){console.error("Error fetching inventory:",o)}},Z=we(()=>{const o={};return P.value.forEach(r=>{const l=r.category?.id||"uncategorized",_=r.category?.name||"Uncategorized";o[l]||(o[l]=[]);const x={id:r.id,title:r.name,img:r.image_url||"/assets/img/default.png",stock:0,price:Number(r.price),label_color:r.label_color||"#1B1670",family:_,description:r.description,nutrition:r.nutrition,tags:r.tags,allergies:r.allergies,ingredients:r.ingredients??[],variants:r.variants??[],addon_groups:r.addon_groups??[],is_saleable:r.is_saleable,resale_type:r.resale_type,resale_value:r.resale_value};o[l].push(x)}),o}),K=W({});Cs(()=>P.value,o=>{o&&o.length>0&&o.forEach(r=>{r.variants&&r.variants.length>0&&(K.value[r.id]||(K.value[r.id]=r.variants[0].id))})},{immediate:!0,deep:!0});const ne=o=>{if(!o.variants||o.variants.length===0)return null;const r=K.value[o.id];return r&&o.variants.find(l=>l.id===r)||o.variants[0]},ie=(o,r)=>{const l=parseInt(r.target.value);K.value[o.id]=l;const _=o.variants.find(x=>x.id===l);_&&console.log(`Selected ${_.name} for ${o.title} - ${n(_.price)}`)},G=W({}),ae=(o,r,l)=>{const _=o.id;G.value[_]||(G.value[_]={});const x=o.addon_groups.find(D=>D.group_id===r);if(x&&x.max_select>0&&l.length>x.max_select){z.warning(`You can only select up to ${x.max_select} ${x.group_name}`);const D=G.value[_][r]||[];G.value[_][r]=D.slice(0,x.max_select);return}G.value[_][r]=l},Ce=o=>{const r=o.id;if(!G.value[r])return 0;let l=0;return Object.values(G.value[r]).forEach(_=>{_.forEach(x=>{l+=parseFloat(x.price||0)})}),l},xe=o=>{const r=o.id;if(!G.value[r])return[];const l=[];return Object.values(G.value[r]).forEach(_=>{_.forEach(x=>{l.push({id:x.id,name:x.name,price:parseFloat(x.price),group_id:x.group_id||x.pivot?.addon_group_id})})}),l},Q=W([]),ce=()=>{if(!he.value)return[];const o=et();return o&&o.ingredients&&o.ingredients.length>0?o.ingredients:he.value.ingredients||[]},be=o=>Q.value.includes(o),Te=o=>{const r=Q.value.indexOf(o);r>-1?(Q.value.splice(r,1),z.info("Ingredient added back")):(Q.value.push(o),z.info("Ingredient removed"))},We=()=>ce().filter(o=>!Q.value.includes(o.id||o.inventory_item_id)).length,Ue=()=>{if(Q.value.length===0)return null;const o=ce(),r=Q.value.map(l=>{const _=o.find(x=>x.id===l||x.inventory_item_id===l);return _?_.product_name||_.name:null}).filter(Boolean);return r.length===0?null:`No ${r.join(", ")}`},me=W(1),Ve=we(()=>he.value?.variants&&he.value.variants.length>0),dt=we(()=>ce().length>0),Ke=we(()=>he.value?.addon_groups&&he.value.addon_groups.length>0),At=we(()=>{const o=[];return Ve.value&&o.push({id:"variants",name:"Variant"}),dt.value&&o.push({id:"ingredients",name:"Ingredients"}),Ke.value&&o.push({id:"addons",name:"Add-ons"}),o.push({id:"review",name:"Review"}),o}),Wt=we(()=>At.value.length),vt=we(()=>{if(me.value===1)return"0%";const o=At.value.length,r=(me.value-1)/(o-1);return`calc(${r*100}% - ${14-r*28}px)`}),Qe=o=>o<me.value?"bg-success text-white":o===me.value?"bg-primary text-white":"bg-light text-muted border",kt=()=>{let o=me.value+1;for(;o<=Wt.value;){const r=At.value[o-1];if(r.id==="variants"&&!Ve.value){o++;continue}if(r.id==="ingredients"&&!dt.value){o++;continue}if(r.id==="addons"&&!Ke.value){o++;continue}break}o<=Wt.value&&(me.value=o)},Cn=()=>{let o=me.value-1;for(;o>=1;){const r=At.value[o-1];if(r.id==="variants"&&!Ve.value){o--;continue}if(r.id==="ingredients"&&!dt.value){o--;continue}if(r.id==="addons"&&!Ke.value){o--;continue}break}o>=1&&(me.value=o)},Tn=o=>{Wn.value=o,mt()},Ct=()=>Ve.value&&he.value?.variants?.find(r=>r.id===Wn.value)?.name||"",oi=()=>{const o=[];return Object.values(it.value).forEach(r=>{r.forEach(l=>{const _=l.quantity>1?` x${l.quantity}`:"";o.push(`${l.name}${_} (+${n(l.price*(l.quantity||1))})`)})}),o.join(", ")},Si=async o=>{he.value=o,Dr.value="",en.value="",Wn.value=null,it.value={},Q.value=[],me.value=1,o.variants&&o.variants.length>0&&(Wn.value=o.variants[0].id);const r=o.variants&&o.variants.length>0?o.variants[0]:null,l=r?r.id:null,_=di(o,l),x=Sn(o,l,_);nt.value=x>0?1:0,Q.value=[];const D=document.getElementById("chooseItem"),I=new bootstrap.Modal(D);D.addEventListener("shown.bs.modal",async()=>{await fu()},{once:!0}),I.show()},Sn=(o,r,l)=>{const _=l.filter(I=>!Q.value.includes(I.id||I.inventory_item_id));if(!_||_.length===0)return 999999;const x={};for(const I of q.value)di(I,I.variant_id).filter(L=>!I.removed_ingredients||I.removed_ingredients.length===0?!0:!I.removed_ingredients.includes(L.id||L.inventory_item_id)).forEach(L=>{const _e=L.inventory_item_id,Re=Number(L.inventory_stock??L.inventory_item?.stock??0);x[_e]||(x[_e]={totalStock:Re,used:0});const te=Number(L.quantity??L.qty??1)*I.qty;x[_e].used+=te});let D=999999;for(const I of _){const B=I.inventory_item_id,ee=Number(I.inventory_stock??I.inventory_item?.stock??0),L=Number(I.quantity??I.qty??1);if(x[B]){const _e=x[B].totalStock-x[B].used,Re=Math.floor(_e/L);D=Math.min(D,Re)}else{const _e=Math.floor(ee/L);D=Math.min(D,_e)}}return D},mt=()=>{const o=et(),r=o?o.id:null,l=di(he.value,r),_=Sn(he.value,r,l);if(_<=0){z.error("No stock available for this variant. Please remove items from cart first."),nt.value=0;return}nt.value=Math.min(1,_)},et=()=>{if(!he.value||!he.value.variants||he.value.variants.length===0)return null;const o=Wn.value;return o&&he.value.variants.find(r=>r.id===o)||he.value.variants[0]},Ii=()=>{if(!he.value)return 0;const o=et();return parseFloat(o?o.price:he.value.price||0)},ft=()=>{let o=0;return Object.values(it.value).forEach(r=>{r.forEach(l=>{o+=parseFloat(l.price||0)*(l.quantity||1)})}),o},In=()=>{const o=[];return Object.values(it.value).forEach(r=>{r.forEach(l=>{o.push({id:l.id,name:l.name,price:parseFloat(l.price),group_id:l.group_id||l.pivot?.addon_group_id})})}),o},Ls=o=>{if(!o)return 0;const r=ne(o),l=r?r.id:null,_=di(o,l);if(!_.length)return 999999;let x=1/0;return _.forEach(D=>{const I=Number(D.quantity??D.qty??1),B=Number(D.inventory_stock??D.inventory_item?.stock??0);if(I<=0)return;const ee=Math.floor(B/I);x=Math.min(x,ee)}),x===1/0?0:x},On=o=>Ls(o),Ut=W(""),Le=W("dine"),Fe=W("Walk In"),gt=W(" "),Vt=W(" "),Ht=W(10),Rn=W(null),Cr=o=>Rn.value=o,Ye=W(!0),pt=o=>{Cr(o.id),Ye.value=!1},Fn=()=>Ye.value=!0,Jt=W({}),pn=W([]),tt=W(null),$s=async()=>{try{const o=await axios.get("/api/pos/fetch-profile-tables");if(Jt.value=o.data,Jt.value.order_types){pn.value=Jt.value.order_types.map(l=>l.charAt(0).toUpperCase()+l.slice(1));const r=localStorage.getItem("quickOrderType");if(r){const l=pn.value.find(_=>_.toLowerCase().replace(/_/g," ")===r.toLowerCase().replace(/_/g," "));l?Le.value=l:Le.value=pn.value[0]}else Le.value=pn.value[0]}}catch(o){console.error("Error fetching profile tables:",o)}},qn=we(()=>Z.value[Rn.value]??[]),qe=W({sortBy:"",priceMin:null,priceMax:null}),Ms=we(()=>{let o=qn.value;const r=Ut.value.trim().toLowerCase();if(r&&(o=o.filter(l=>l.title.toLowerCase().includes(r)||(l.family||"").toLowerCase().includes(r)||(l.description||"").toLowerCase().includes(r)||(l.tags?.map(_=>_.name.toLowerCase()).join(", ")||"").includes(r))),qe.value.priceMin!==null&&qe.value.priceMin!==""&&(o=o.filter(l=>l.price>=qe.value.priceMin)),qe.value.priceMax!==null&&qe.value.priceMax!==""&&(o=o.filter(l=>l.price<=qe.value.priceMax)),qe.value.sortBy)switch(o=[...o],qe.value.sortBy){case"name_asc":o.sort((l,_)=>l.title.localeCompare(_.title));break;case"name_desc":o.sort((l,_)=>_.title.localeCompare(l.title));break;case"price_asc":o.sort((l,_)=>l.price-_.price);break;case"price_desc":o.sort((l,_)=>_.price-l.price);break;case"stock_asc":o.sort((l,_)=>(l.stock??0)-(_.stock??0));break;case"stock_desc":o.sort((l,_)=>(_.stock??0)-(l.stock??0));break}return o}),ss=W(!1),Tr=o=>{qe.value={...o},ss.value=!0},Bn=W(""),Sr=()=>{const o=localStorage.getItem("pos_walkin_counter");o?Bn.value=parseInt(o):(Bn.value=1,localStorage.setItem("pos_walkin_counter","1"))},Ps=()=>`Walk In-${String(Bn.value).padStart(3,"0")}`,Ir=()=>{Bn.value++,localStorage.setItem("pos_walkin_counter",Bn.value.toString())},rs=()=>{qe.value={sortBy:"",priceMin:null,priceMax:null}},q=W([]),Wa=async o=>{const r=q.value[o];if(!r)return;if(r.isDeal){const _=hs({id:r.dealId,title:r.title,menu_items:r.menu_items},r.qty+1);if(!_.canAdd){console.log(" Missing ingredients for deal (cart increment)"),tn.value={itemIndex:o,item:r,newQty:r.qty+1,isDeal:!0},zt.value=_.missing,kn.value=!0,z.warning("Some ingredients are missing. Confirm to proceed.");return}r.qty++,r.price=r.unit_price*r.qty,z.success("Deal quantity updated");return}const l=Or(r,r.qty+1);if(!l.canAdd){console.log(" Missing ingredients detected (client-side)"),tn.value={itemIndex:o,item:r,newQty:r.qty+1,isDeal:!1},zt.value=l.missing,kn.value=!0,z.warning("Some ingredients are missing. Confirm to proceed.");return}r.outOfStock=!1,r.qty++,r.price=r.unit_price*r.qty,r.resale_discount_per_item&&(r.total_resale_discount=r.resale_discount_per_item*r.qty)},Or=(o,r)=>{const l=o.ingredients||[];if(l.length===0)return{canAdd:!0,missing:[]};const _=[],x={};return q.value.forEach(I=>{(I.ingredients||[]).filter(L=>!I.removed_ingredients||I.removed_ingredients.length===0?!0:!I.removed_ingredients.includes(L.id||L.inventory_item_id)).forEach(L=>{const _e=L.inventory_item_id,Re=Number(L.inventory_stock??L.inventory_item?.stock??0);x[_e]||(x[_e]={totalStock:Re,used:0,name:L.product_name||L.name,unit:L.unit||"unit"});const te=Number(L.quantity??L.qty??1)*I.qty;x[_e].used+=te})}),l.filter(I=>!o.removed_ingredients||o.removed_ingredients.length===0?!0:!o.removed_ingredients.includes(I.id||I.inventory_item_id)).forEach(I=>{const B=I.inventory_item_id,ee=Number(I.quantity??I.qty??1)*r,L=Number(I.inventory_stock??I.inventory_item?.stock??0);if(!x[B])L<ee&&_.push({item_id:o.id,item_title:o.title,variant_id:o.variant_id||null,variant_name:o.variant_name||null,inventory_item_id:B,inventory_item_name:I.product_name||I.name,required_quantity:ee,available_quantity:L,shortage_quantity:ee-L,unit:I.unit||"unit",order_quantity:r});else{const _e=x[B].totalStock-x[B].used,Re=q.value.find(te=>te.id===o.id&&te.variant_id===o.variant_id&&JSON.stringify(te.addons?.map(rt=>rt.id).sort())===JSON.stringify(o.addons?.map(rt=>rt.id).sort()));if(Re){const te=Number(I.quantity??I.qty??1)*Re.qty,rt=_e+te;rt<ee&&_.push({item_id:o.id,item_title:o.title,variant_id:o.variant_id||null,variant_name:o.variant_name||null,inventory_item_id:B,inventory_item_name:I.product_name||I.name,required_quantity:ee,available_quantity:rt,shortage_quantity:ee-rt,unit:I.unit||"unit",order_quantity:r})}else _e<ee&&_.push({item_id:o.id,item_title:o.title,variant_id:o.variant_id||null,variant_name:o.variant_name||null,inventory_item_id:B,inventory_item_name:I.product_name||I.name,required_quantity:ee,available_quantity:_e,shortage_quantity:ee-_e,unit:I.unit||"unit",order_quantity:r})}}),{canAdd:_.length===0,missing:_}},Ua=async o=>{const r=q.value[o];if(!r||r.qty<=1){z.error("Cannot reduce below 1.");return}r.qty--,r.price=r.unit_price*r.qty,r.resale_discount_per_item&&(r.total_resale_discount=r.resale_discount_per_item*r.qty),r.outOfStock=!1},Eo=o=>{if(q.value[o],q.value.splice(o,1),q.value.length===0){at.value=[],$e.value=[],yt.value=[],Vn();return}$e.value.length>0&&($e.value=$e.value.filter(l=>{if(!l.menu_items||l.menu_items.length===0)return!0;const _=l.menu_items.map(D=>D.id);return q.value.some(D=>_.includes(D.id))}));const r=[];at.value.forEach(l=>{l.min_purchase&&Nt.value<l.min_purchase?z.info(`Discount "${l.name}" removed  subtotal is lower than minimum required (${n(l.min_purchase)}).`):r.push(l)}),at.value=r},Nt=we(()=>q.value.reduce((o,r)=>o+r.price,0)),ai=we(()=>{if(Le.value!=="Delivery")return 0;const o=nn.props.onboarding.tax_and_vat;return o.has_delivery_charges?o.delivery_charge_flat?parseFloat(o.delivery_charge_flat):o.delivery_charge_percentage?Nt.value*parseFloat(o.delivery_charge_percentage)/100:0:0}),li=we(()=>{if(q.value.length===0)return 0;const o=nn.props.onboarding.tax_and_vat;return o.has_service_charges?o.service_charge_flat?parseFloat(o.service_charge_flat):o.service_charge_percentage?Nt.value*parseFloat(o.service_charge_percentage)/100:0:0}),wo=o=>`${(Math.round(o*100)/100).toFixed(2)}`,he=W(null),nt=W(0),Dr=W(""),Wn=W(null),it=W({}),en=W(""),Va=async()=>{if(!he.value)return;if(nt.value<=0){z.error("Please select at least 1 item to add to cart");return}const o=et(),r=o?o.id:null;o&&`${o.name}`;const l=o?o.name:null,_=parseFloat(o?o.price:he.value.price),x=In(),D=ft(),I=_+D,B=o?$t(o,!0):$t(he.value,!1),ee=di(he.value,r),L=Ue();try{const _e=x.map(Se=>Se.id).sort((Se,Et)=>Se-Et).join("-"),Re=ee.length>0?Oi(ee):999999,te=q.value.findIndex(Se=>{if(Se.variant_id!==r)return!1;const Et=(Se.addons||[]).map(wt=>wt.id).sort((wt,_n)=>wt-_n).join("-");return Se.id===he.value.id&&Et===_e});if(te>=0){if(q.value[te].qty+=nt.value,q.value[te].price=q.value[te].unit_price*q.value[te].qty,q.value[te].total_resale_discount=B*q.value[te].qty,en.value&&en.value.trim()){const Se=q.value[te].item_kitchen_note||"",Et=en.value.trim(),wt=[Se,Et,L].filter(Boolean).filter((_n,Zs,Bo)=>Bo.indexOf(_n)===Zs);q.value[te].item_kitchen_note=wt.join("; ")}else if(L){const Se=q.value[te].item_kitchen_note||"";q.value[te].item_kitchen_note=[Se,L].filter(Boolean).join("; ")}Q.value.length>0&&(q.value[te].removed_ingredients=[...Q.value]),z.success(`Quantity updated to ${q.value[te].qty}`)}else{const Se=[en.value.trim(),L].filter(Boolean).join(". ");q.value.push({id:he.value.id,title:he.value.title,img:he.value.img,price:I*nt.value,unit_price:Number(I),qty:nt.value,note:Dr.value||"",item_kitchen_note:Se,stock:Re,ingredients:ee,variant_id:r,variant_name:l,addons:x,removed_ingredients:[...Q.value],resale_discount_per_item:B,total_resale_discount:B*nt.value}),z.success(`${he.value.title} added to cart`)}bootstrap.Modal.getInstance(document.getElementById("chooseItem")).hide(),nt.value=0,Dr.value="",en.value="",Wn.value=null,it.value={},Q.value=[]}catch(_e){z.error("Failed to add item: "+(_e.response?.data?.message||_e.message))}},Oi=o=>{if(!o||o.length===0)return 999999;let r=1/0;return o.forEach(l=>{const _=Number(l.quantity??l.qty??1),x=Number(l.inventory_stock??l.inventory_item?.stock??0);if(_<=0)return;const D=Math.floor(x/_);r=Math.min(r,D)}),r===1/0?0:r},Ha=async()=>{if(!he.value)return;const o=et(),r=o?o.id:null,l=ce(),_=Or({id:he.value.id,title:he.value.title,variant_id:r,variant_name:o?o.name:null,ingredients:l,removed_ingredients:Q.value||[]},nt.value+1);if(!_.canAdd){console.log(" Missing ingredients for modal increment (client-side)"),Fs.value={currentQty:nt.value},zt.value=_.missing,kn.value=!0,z.warning("Some ingredients are missing. Confirm to proceed.");return}nt.value++},za=()=>{nt.value>1&&nt.value--},bt=W({}),kr=()=>{q.value=[],Fe.value=Ps(),Vt.value="",gt.value="",tt.value=null,Le.value=pn.value[0]||"eat_in",Un.value="",Dn.value="",Ht.value=0,$e.value=[],at.value=[],yt.value=[],ls.value=[],Vn()};Cs(Le,()=>bt.value={});const Un=W(""),Dn=W(""),Nr=W(!1),Di=W(null),os=W(!1),Lr=W(0),Ka=()=>{if(q.value.length===0){z.error("Please add at least one item to the cart.");return}if(Le.value==="Eat_in"&&!tt.value){bt.value.table_number=["Table number is required for dine-in orders."],z.error("Please select a table number for Dine In orders.");return}if((Le.value==="Delivery"||Le.value==="Takeaway")&&!Fe.value){bt.value.customer=["Customer name is required."],z.error("Customer name is required.");return}if(Le.value==="Delivery"&&!gt.value){bt.value.phoneNumber=["Phone number is required for delivery."],z.error("Phone number is required for delivery.");return}if(Le.value==="Delivery"&&!Vt.value){bt.value.deliveryLocation=["Delivery location is required."],z.error("Delivery location is required.");return}Lr.value=parseFloat(Mi.value).toFixed(2),os.value=!0};async function xo(o){try{const r=await axios.post("http://localhost:8085/print",{order:o,type:"customer"},{headers:{"Content-Type":"application/json"},timeout:5e3})}catch(r){console.error("Print failed:",r),z.error("Unable to connect to the customer printer. Please ensure it is properly connected.")}}const Ya=W("cash"),Ga=W(0);async function Ao(o){try{const r=await axios.post("http://localhost:8085/print",{order:o,type:"KOT"},{headers:{"Content-Type":"application/json"},timeout:5e3})}catch(r){console.error("KOT print failed:",r),z.error("Unable to connect to the kitchen printer. Please ensure it is properly connected.")}}const yt=W([]),ki=W(null),as=W(!1),at=W([]),ls=W([]),ja=async o=>{if(!o||o.length===0){z.warning("No discounts selected.");return}const r=ls.value.map(_=>_.id),l=o.filter(_=>!r.includes(_.id));if(l.length===0){z.error("All selected discounts have been rejected for this order.");return}if(l.length<o.length){const _=o.length-l.length;z.warning(`${_} discount(s) were previously rejected and cannot be requested again.`)}try{const _=await axios.post("/api/discount-approvals/request",{discounts:o.map(x=>({discount_id:x.id,discount_percentage:parseFloat(x.discount_amount),discount_name:x.name})),order_items:q.value.map(x=>({id:x.id,title:x.title,qty:x.qty,unit_price:x.unit_price,price:x.price})),order_subtotal:Nt.value,request_note:`Discount approval request from ${Ri.value?.name||"Cashier"}`});_.data.success&&(yt.value=_.data.data.map(x=>({...x,discountData:o.find(D=>D.id===x.discount_id),percentage:parseFloat(x.discount_percentage),status:"pending"})),fs.value=!1,as.value=!0,z.info("Discount approval request sent to Super Admin. Waiting for approval..."),Co())}catch(_){console.error("Error requesting discount approval:",_),z.error(_.response?.data?.message||"Failed to request discount approval")}},Co=()=>{ki.value&&clearInterval(ki.value),ki.value=setInterval(async()=>{await $r()},3e3)},$r=async()=>{if(yt.value.length===0){Vn();return}try{const o=yt.value.map(l=>l.id),r=await axios.post("/api/discount-approvals/check-status",{approval_ids:o});r.data.success&&(r.data.data.forEach(_=>{if(_.status!=="pending"){const x=yt.value.findIndex(D=>D.id===_.id);if(x>=0){if(_.status==="approved"){const D={id:_.discount_id,name:_.discount_name||_.discount?.name,percentage:parseFloat(_.discount_percentage),approval_id:_.id};Qa(D),z.success(`Discount "${D.name}" (${D.percentage}%) approved!`)}else _.status==="rejected"&&(ls.value.push({id:_.discount_id,name:_.discount_name,percentage:parseFloat(_.discount_percentage),rejection_reason:_.approval_note}),z.error(`Discount "${_.discount_name}" rejected.`+(_.approval_note?` Reason: ${_.approval_note}`:"")));yt.value.splice(x,1)}}}),yt.value.length===0&&(as.value=!1,Vn()))}catch(o){console.error("Error checking approval status:",o)}},Vn=()=>{ki.value&&(clearInterval(ki.value),ki.value=null)},Qa=o=>{at.value.push(o)};kb(()=>{Vn()}),ar(()=>{window.Echo&&window.Echo.channel("discount-approvals").listen(".approval.responded",o=>{$r()})});const us=we(()=>!at.value||at.value.length===0?0:at.value.reduce((o,r)=>{const l=parseFloat(r.percentage||0),_=Nt.value*l/100;return o+_},0)),Rs=o=>Nt.value*o/100,Xa=()=>{at.value=[],yt.value=[],ls.value=[],Vn()},kn=W(!1),zt=W([]),tn=W(null),Ni=W(null),Fs=W(null),cs=W(null),qs=W(null),To=async({paymentMethod:o,cashReceived:r,cardAmount:l,changeAmount:_,items:x,autoPrintKot:D,done:I})=>{bt.value={};try{const B={customer_name:Fe.value,phone_number:gt.value,delivery_location:Vt.value,sub_total:Nt.value,tax:ci.value,service_charges:li.value,delivery_charges:ai.value,sales_discount:$i.value,approved_discounts:us.value,approved_discount_details:at.value.map(L=>({discount_id:L.id,discount_name:L.name,discount_percentage:L.percentage,discount_amount:Rs(L.percentage),approval_id:L.approval_id})),promo_discount:ui.value,applied_promos:$e.value.map(L=>({promo_id:L.id,promo_name:L.name,promo_type:L.type,discount_amount:L.applied_discount||0,applied_to_items:L.applied_to_items||[]})),total_amount:Mi.value,note:Un.value,kitchen_note:Dn.value,order_date:new Date().toISOString().split("T")[0],order_time:new Date().toTimeString().split(" ")[0],order_type:Le.value==="Eat_in"?"Eat In":Le.value==="Delivery"?"Delivery":Le.value==="Takeaway"?"Takeaway":"Collection",table_number:tt.value?.name||null,payment_method:o,auto_print_kot:D,cash_received:r,change:_,...o==="Split"&&{payment_type:"split",cash_amount:r,card_amount:l},items:(q.value??[]).map(L=>{if(L.isDeal)return{product_id:L.dealId,title:L.title,quantity:L.qty,price:L.price,note:L.note??"",kitchen_note:Dn.value??"",unit_price:L.unit_price,item_kitchen_note:L.item_kitchen_note??"",tax_percentage:0,tax_amount:0,variant_id:null,variant_name:null,addons:[],sale_discount_per_item:0,removed_ingredients:[],is_deal:!0,deal_id:L.dealId,menu_items:L.menu_items||[]};const _e=P.value.find(Se=>Se.id===L.id);let Re=_e;if(L.variant_id&&_e?.variants){const Se=_e.variants.find(Et=>Et.id===L.variant_id);Se&&(Re=Se)}const te=Re?$t(Re,!!L.variant_id):0,rt=(L.removed_ingredients||[]).map(Se=>{const Et=(L.ingredients||[]).find(wt=>wt.id===Se||wt.inventory_item_id===Se);return{id:Se,name:Et?Et.product_name||Et.name:"Unknown Ingredient"}});return{product_id:L.id,title:L.title,quantity:L.qty,price:L.price,note:L.note??"",kitchen_note:Dn.value??"",unit_price:L.unit_price,item_kitchen_note:L.item_kitchen_note??"",tax_percentage:Pe(L),tax_amount:sl(L),variant_id:L.variant_id||null,variant_name:L.variant_name||null,addons:L.addons||[],sale_discount_per_item:te,removed_ingredients:rt||[],is_deal:!1}}),confirm_missing_ingredients:!0};console.log(" Sending order");const ee=await axios.post("/pos/order",B);if(console.log(" Order created successfully:",ee.data),ee.data.logout===!0){z.success(ee.data.message||"Order created successfully. Logging out..."),setTimeout(()=>{window.location.href=ee.data.redirect||"/login"},1e3),I&&I();return}Ir(),kr(),os.value=!1,z.success(ee.data.message||"Order placed successfully!"),Di.value={...ee.data.order,...B,items:B.items,payment_type:o==="Split"?"split":o.toLowerCase(),cash_amount:o==="Split"?r:null,card_amount:o==="Split"?l:null},console.log(" Last order data prepared:",Di.value),D&&(ds.value=await Io(),Ao(JSON.parse(JSON.stringify(Di.value)))),xo(JSON.parse(JSON.stringify(Di.value))),$e.value=[],at.value=[],yt.value=[],Vn()}catch(B){console.error(" Order submission error:",B),z.error(B.response?.data?.message||"Failed to place order")}finally{I&&I()}},Za=async()=>{if(console.log(" User confirmed missing ingredients"),kn.value=!1,tn.value&&!tn.value.isDeal){const{itemIndex:o,newQty:r}=tn.value,l=q.value[o];l&&(l.outOfStock=!1,l.qty=r,l.price=l.unit_price*l.qty,l.resale_discount_per_item&&(l.total_resale_discount=l.resale_discount_per_item*l.qty),z.success("Quantity updated")),tn.value=null,zt.value=[];return}if(tn.value&&tn.value.isDeal){const{itemIndex:o,newQty:r}=tn.value,l=q.value[o];l&&l.isDeal&&(l.qty=r,l.price=l.unit_price*l.qty,z.success("Deal quantity updated")),tn.value=null,zt.value=[];return}if(cs.value){const{deal:o,existingIndex:r,newQty:l}=cs.value;if(r>=0)q.value[r].qty=l,q.value[r].price=q.value[r].unit_price*l,z.success("Deal quantity updated");else{const x=[];o.menu_items.forEach(I=>{I.ingredients&&I.ingredients.length>0&&x.push(...I.ingredients.map(B=>({...B,menu_item_id:I.id,menu_item_name:I.name})))});const D={id:`deal-${o.id}`,title:o.title,price:Qs.value,unit_price:parseFloat(o.price),img:o.img,qty:1,stock:999999,ingredients:x,isDeal:!0,dealId:o.id,menu_items:o.menu_items.map(I=>({id:I.id,name:I.name,price:I.price,ingredients:(I.ingredients||[]).map(B=>({inventory_item_id:B.id,inventory_item_id:B.inventory_item_id,product_name:B.product_name||B.name,quantity:B.quantity||B.qty||"1.00",inventory_stock:B.inventory_stock||B.stock||0,unit:B.unit||"unit",category_id:B.category_id,supplier_id:B.supplier_id})),stock:Oi(I.ingredients||[])})),resale_discount_per_item:0,total_resale_discount:0};q.value.push(D),z.success(`${o.title} added to cart!`)}cs.value=null,zt.value=[];return}if(Ni.value){const{product:o,variantId:r,variantName:l,variantPrice:_,selectedAddons:x,addonsPrice:D,resaleDiscountPerItem:I,existingIndex:B,newQty:ee}=Ni.value,L=_+D;if(B>=0)q.value[B].qty=ee,q.value[B].price=q.value[B].unit_price*ee,q.value[B].total_resale_discount=I*ee,q.value[B].outOfStock=!1,z.success("Quantity updated");else{const _e=di(o,r),Re=On(o);q.value.push({id:o.id,title:o.title,img:o.img,price:L,unit_price:Number(L),qty:1,note:"",stock:Re,ingredients:_e,variant_id:r,variant_name:l,addons:x,outOfStock:!1,resale_discount_per_item:I,total_resale_discount:I}),z.success("Item added to cart")}Ni.value=null,zt.value=[];return}if(Fs.value){nt.value=Fs.value.currentQty+1,z.success("Quantity increased"),Fs.value=null,zt.value=[];return}};ar(async()=>{Sr();const o=String(Bn.value).padStart(3,"0");if(Fe.value=`Walk In-${o}`,window.bootstrap){document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(_=>new window.bootstrap.Tooltip(_));const l=document.getElementById("chooseItem");l&&new window.bootstrap.Modal(l,{backdrop:"static"})}v.value="",y.value=Date.now(),await fu(),setTimeout(()=>{S.value=!0;const l=document.getElementById(w);l&&(l.value="",v.value="")},100),U(),V(),$s();const r=document.getElementById("menuFilterModal");r&&r.addEventListener("hidden.bs.modal",()=>{ss.value||rs(),ss.value=!1})});const nn=Db();function Mr(){const o=nn.props.flash?.success,r=nn.props.flash?.error;o&&z.success(o,{autoClose:4e3}),r&&z.error(r,{autoClose:6e3})}ar(()=>Mr()),ar(()=>{nn.props.flash?.success;const o=nn.props.flash?.error;o&&z.error(o);const r=nn.props.flash?.print_payload;r&&setTimeout(()=>xo(r),250),r&&setTimeout(()=>Ao(r),250)}),Cs(()=>nn.props.flash,()=>Mr(),{deep:!0});const Pr=({id:o,status:r,message:l})=>{ds.value=ds.value.map(_=>_.id===o?{..._,status:r}:_)},So=W(!1),ds=W([]),Rr=W(!1),Li=W(!1),Hn=W([]),Bs=W(!1),Io=async()=>{Li.value=!0,Hn.value=[],Bs.value=!0;try{const o=await axios.get("/api/pos/orders/today");Hn.value=o.data.orders}catch(o){console.error("Failed to fetch POS orders:",o),z.error(o.response?.data?.message||"Failed to fetch POS orders")}finally{Bs.value=!1}},Ws=W(!1),fs=W(!1),Us=W(!0),Vs=W(!0),ps=W([]),Hs=W([]),$e=W([]),Ja=o=>{if($e.value=o,!o||o.length===0){z.warning("No promos selected.");return}const r=o.reduce((_,x)=>_+parseFloat(x.applied_discount||0),0);if(r<=0){z.warning("Selected promos don't provide any discount for current cart items."),$e.value=[];return}const l=new Set(o.flatMap(_=>_.applied_to_items||[])).size;z.success(`${o.length} promo(s) applied! Applied to ${l} item(s). You saved ${n(r)}`),Ws.value=!1},Oo=async()=>{Us.value=!0,Ws.value=!0;try{const o=await axios.get("/api/promos/current");o.data?.success?ps.value=o.data.data||[]:(console.warn("Failed to fetch promos:",o.data),ps.value=[],z.warning("No promos available at the moment"))}catch(o){console.error("Error fetching current meal promos:",o),ps.value=[],z.error("Failed to load promotions")}finally{Us.value=!1}},el=async()=>{Vs.value=!0,fs.value=!0;try{const o=await axios.get("/api/discounts/all");o.data?.success?Hs.value=o.data.data||[]:(console.warn("Failed to fetch discounts:",o.data),Hs.value=[],z.warning("No discounts available at the moment"))}catch(o){console.error("Error fetching current meal discounts:",o),Hs.value=[],z.error("Failed to load discounts")}finally{Vs.value=!1}},tl=o=>!$e.value||$e.value.length===0?!1:$e.value.some(r=>!r.menu_items||r.menu_items.length===0?!0:r.menu_items.map(_=>_.id).includes(o.id)),nl=o=>{Di.value=o,Nr.value=!0,Li.value=!1},ui=we(()=>!$e.value||$e.value.length===0?0:$e.value.reduce((o,r)=>{const l=parseFloat(r.discount_amount??0)||0;if(r.applied_discount!==void 0)return o+parseFloat(r.applied_discount);const _=Fr(r);if(r.min_purchase&&_<parseFloat(r.min_purchase))return o;if(r.type==="flat")return o+l;if(r.type==="percent"){const x=_*l/100,D=parseFloat(r.max_discount??0)||0;return D>0&&x>D?o+D:o+x}return o},0)),Fr=o=>{if(!o.menu_items||o.menu_items.length===0)return q.value.reduce((l,_)=>l+_.unit_price*_.qty,0);const r=o.menu_items.map(l=>l.id);return q.value.filter(l=>r.includes(l.id)).reduce((l,_)=>l+_.unit_price*_.qty,0)},il=we(()=>!$e.value||$e.value.length===0?[]:$e.value.map(o=>({promo_id:o.id,promo_name:o.name,promo_type:o.type,discount_amount:o.applied_discount||0,applied_to_items:o.applied_to_items||[]}))),ci=we(()=>{let o=0;const r=parseFloat(nn.props.onboarding.tax_and_vat.tax_rate)||0;return q.value.forEach(l=>{const _=P.value.find(x=>x.id===l.id);if(_&&_.is_taxable){const D=l.unit_price*l.qty*r/100;o+=D}}),o}),$i=we(()=>q.value.reduce((o,r)=>o+(r.total_resale_discount||0),0)),Mi=we(()=>{const o=Nt.value+ci.value+ai.value+li.value-$i.value-ui.value-us.value;return Math.max(0,o)}),sl=o=>{const r=P.value.find(l=>l.id===o.id);return r&&r.is_taxable&&r.tax_percentage?o.unit_price*o.qty*parseFloat(r.tax_percentage)/100:0},Pe=o=>{const r=P.value.find(l=>l.id===o.id);return r&&r.is_taxable&&r.tax_percentage?parseFloat(r.tax_percentage):0},ke=o=>{const r=ne(o),l=r?r.id:null,x=xe(o).map(I=>I.id).sort().join("-"),D=q.value.find(I=>{const B=(I.addons||[]).map(ee=>ee.id).sort().join("-");return I.id===o.id&&I.variant_id===l&&B===x});return D?D.qty:0},rl=async o=>{const r=ne(o),l=r?r.id:null,_=xe(o),x=_.map(Se=>Se.id).sort().join("-"),D=q.value.findIndex(Se=>{const Et=(Se.addons||[]).map(wt=>wt.id).sort().join("-");return Se.id===o.id&&Se.variant_id===l&&Et===x});let I=1,B=null;const ee=di(o,l);D>=0&&(B=q.value[D],I=B.qty+1);const L=Or({id:o.id,title:o.title,variant_id:l,variant_name:r?r.name:null,ingredients:ee,removed_ingredients:B?.removed_ingredients||[],addons:_},I);if(!L.canAdd){console.log(" Missing ingredients for card increment (client-side)");const Se=parseFloat(r?r.price:o.price),Et=Ce(o),wt=r?$t(r,!0):$t(o,!1);Ni.value={product:o,variant:r,variantId:l,variantName:r?r.name:null,variantPrice:Se,selectedAddons:_,addonsPrice:Et,resaleDiscountPerItem:wt,existingIndex:D,newQty:I},zt.value=L.missing,kn.value=!0,z.warning("Some ingredients are missing. Confirm to proceed.");return}const _e=parseFloat(r?r.price:o.price),Re=Ce(o),te=_e+Re,rt=r?$t(r,!0):$t(o,!1);if(D>=0)q.value[D].qty++,q.value[D].price=q.value[D].unit_price*q.value[D].qty,q.value[D].total_resale_discount=rt*q.value[D].qty,q.value[D].outOfStock=!1;else{const Se=On(o);q.value.push({id:o.id,title:o.title,img:o.img,price:te,unit_price:Number(te),qty:1,note:"",stock:Se,ingredients:ee,variant_id:l,variant_name:r?r.name:null,addons:_,outOfStock:!1,resale_discount_per_item:rt,total_resale_discount:rt})}},ol=o=>{const r=ne(o),l=r?r.id:null,x=xe(o).map(B=>B.id).sort().join("-"),D=q.value.findIndex(B=>{const ee=(B.addons||[]).map(L=>L.id).sort().join("-");return B.id===o.id&&B.variant_id===l&&ee===x});if(D<0)return;const I=q.value[D];I.qty<=1?q.value.splice(D,1):(I.qty--,I.price=I.unit_price*I.qty,I.outOfStock=!1)},di=(o,r)=>!r||!o.variants?.length?o.ingredients??[]:o.variants.find(_=>_.id===r)?.ingredients??o.ingredients??[],st=W(null),zn=W(null);let Pi=null;const Do=(o,r)=>{st.value=JSON.parse(JSON.stringify(o)),zn.value=r;const l=P.value.find(_=>_.id===o.id);if(l&&l.addon_groups&&l.addon_groups.length>0){const _=new Map;o.addons&&o.addons.forEach(D=>{_.set(D.id,{quantity:D.quantity||1,selected:!0})});const x=[];l.addon_groups.forEach(D=>{D.addons&&D.addons.length>0&&D.addons.forEach(I=>{const B=_.get(I.id);x.push({id:I.id,name:I.name,price:parseFloat(I.price||0),group_id:D.group_id,group_name:D.group_name,quantity:B?.quantity||1,selected:B?.selected||!1})})}),st.value.addons=x}else st.value.addons=[];if(!Pi){const _=document.getElementById("addonManagementModal");_&&(Pi=new bootstrap.Modal(_))}Pi&&Pi.show()},al=o=>{o.selected=!o.selected,o.selected||(o.quantity=1)},lt=o=>{o.selected&&(o.quantity=(o.quantity||1)+1)},qr=o=>{o.selected&&(o.quantity||1)>1&&(o.quantity-=1)},Kn=o=>o.addons?o.addons.reduce((r,l)=>l.selected!==!1?r+parseFloat(l.price)*(l.quantity||1):r,0):0,ko=()=>{if(zn.value===null)return;const o=st.value.addons.filter(D=>D.selected!==!1),r=st.value.variant_id?P.value.find(D=>D.id===st.value.id)?.variants?.find(D=>D.id===st.value.variant_id):null,l=parseFloat(r?r.price:st.value.unit_price),_=o.reduce((D,I)=>D+parseFloat(I.price)*(I.quantity||1),0),x=l+_;q.value[zn.value].addons=o,q.value[zn.value].unit_price=x,q.value[zn.value].price=x*q.value[zn.value].qty,z.success("Addons updated successfully!"),Pi&&Pi.hide(),st.value=null,zn.value=null},Br=o=>!o.addons||o.addons.length===0?"":o.addons.map(r=>r.name).join(", "),Tt=()=>{let o=0;return it.value&&typeof it.value=="object"&&Object.values(it.value).forEach(r=>{Array.isArray(r)&&(o+=r.length)}),o},Ri=we(()=>nn.props.current_user),Wr=we(()=>s.value.filter(o=>o.menu_items_count&&o.menu_items_count>0)),Ur=we(()=>Ri.value?.roles?.includes("Cashier")||Ri.value?.roles?.includes("Admin")||Ri.value?.roles?.includes("Manager")),zs=W(`terminal-${Ri.value?.id}`),{broadcastCartUpdate:No,broadcastUIUpdate:Lo}=Kw(zs.value),Lt=ho.debounce(o=>{console.log(" Broadcasting cart:",o.items.length,"items"),No(o)},300),ll=ho.debounce(o=>{console.log(" Broadcasting UI"),Lo(o)},100);Cs(()=>({items:q.value.map(o=>({id:o.id,title:o.name||o.title,img:o.image_url||o.img||"/assets/img/default.png",price:parseFloat(o.total||o.price||0),qty:parseInt(o.qty||1),variant_name:o.variant?.name||null,addons:(o.addons||[]).map(r=>({id:r.id,name:r.name,price:parseFloat(r.price||0)})),resale_discount_per_item:parseFloat(o.resale_discount_per_item||0)})),customer:Fe.value||"Walk In",phone_number:gt.value||"",delivery_location:Vt.value||"",orderType:Le.value||"Dine In",table:tt.value?{id:tt.value.id,name:tt.value.name}:null,subtotal:parseFloat(Nt.value||0),tax:parseFloat(ci.value||0),serviceCharges:parseFloat(li.value||0),deliveryCharges:parseFloat(ai.value||0),saleDiscount:parseFloat($i.value||0),promoDiscount:parseFloat(ui.value||0),total:parseFloat(Mi.value||0),note:Un.value||"",appliedPromos:($e.value||[]).map(o=>({id:o.id,name:o.name,discount:parseFloat(o.discount||0),applied_to_items:o.applied_to_items||[]}))}),o=>{console.log(" Cart changed:",o.items.length,"items, Total:",o.total),Lt(o)},{deep:!0,immediate:!0}),Cs(()=>({showCategories:Ye.value??!0,activeCat:Rn.value||null,menuCategories:(s.value||[]).map(o=>({id:o.id,name:o.name,menu_items_count:o.menu_items_count||0})),menuItems:(P.value||[]).map(o=>({id:o.id,name:o.name,price:parseFloat(o.price||0),image_url:o.image_url||null,description:o.description||"",label_color:o.label_color||"#1B1670",category:o.category?{id:o.category.id,name:o.category.name}:null,variants:(o.variants||[]).map(r=>({id:r.id,name:r.name,price:parseFloat(r.price||0),is_saleable:r.is_saleable??!1,resale_type:r.resale_type||null,resale_value:parseFloat(r.resale_value||0)})),addon_groups:(o.addon_groups||[]).map(r=>({id:r.id,name:r.name,addons:(r.addons||[]).map(l=>({id:l.id,name:l.name,price:parseFloat(l.price||0)}))})),is_saleable:o.is_saleable??!1,resale_type:o.resale_type||null,resale_value:parseFloat(o.resale_value||0)})),searchQuery:Ut.value||"",selectedCardVariant:K.value||{},selectedCardAddons:G.value||{}}),o=>{console.log(" UI changed - Categories:",o.menuCategories.length,"Items:",o.menuItems.length),ll(o)},{deep:!0,immediate:!0});const Kt=()=>{if(!Ur.value){z.error("Only cashiers can access customer display");return}const o=route("customer-display.index",{terminal:zs.value});window.open(o,"_blank","width=1920,height=1080")},$t=(o,r=!1)=>{if(!o)return 0;const l=o.is_saleable??o?.menu_item?.is_saleable,_=o.resale_type??o?.menu_item?.resale_type,x=o.resale_value??o?.menu_item?.resale_value,D=parseFloat(o.price||0);return!l||!_||!x?0:_==="flat"?parseFloat(x):_==="percentage"?D*parseFloat(x)/100:0},Yn=(o,r=!1)=>{const l=parseFloat(o.price||0),_=$t(o,r);return Math.max(0,l-_)},St=(o,r=!1)=>{if(!o)return null;const l=o.is_saleable??o?.menu_item?.is_saleable,_=o.resale_type??o?.menu_item?.resale_type,x=o.resale_value??o?.menu_item?.resale_value,D=$t(o,r);return!l||!_||!x||D<=0?null:{type:_,value:x,amount:D,display:_==="flat"?`Sale ${n(D)}`:`${x}% OFF`}},Ks=o=>{const r=ne(o);let l;r?l=Yn(r,!0):l=Yn(o,!1);const _=Ce(o);return l+_},Gn=o=>{if(!o.variants||o.variants.length===0){const x=$t(o,!1)>0;return{min:Yn(o,!1),max:Yn(o,!1),minOriginal:x?parseFloat(o.price||0):null,maxOriginal:x?parseFloat(o.price||0):null}}const r=o.variants.map(x=>Yn(x,!0)),l=o.variants.map(x=>parseFloat(x.price||0)),_=o.variants.some(x=>$t(x,!0)>0);return{min:Math.min(...r),max:Math.max(...r),minOriginal:_?Math.min(...l):null,maxOriginal:_?Math.max(...l):null}},Be=()=>{if(!he.value)return 0;const o=et();return o?Yn(o,!0):Yn(he.value,!1)},jn=()=>Be()+ft(),fi=W([]),Ys=W(!1),Qn=W(!1),ul=async()=>{Ys.value=!0;try{const o=await axios.get("/api/deals",{params:{status:1,per_page:100}});console.log("Fetched deals:",o.data.data),fi.value=o.data.data.map(r=>({id:r.id,title:r.name,price:r.price,img:r.image_url||"/assets/img/product/product29.jpg",description:r.description,menu_items:r.menu_items||[],status:r.status}))}catch(o){console.error("Error fetching deals:",o),z.error("Failed to load deals")}finally{Ys.value=!1}},cl=()=>{Qn.value=!0,Ye.value=!1},dl=()=>{Qn.value=!1,Ye.value=!0},Vr=o=>{const r=q.value.find(l=>l.isDeal&&l.dealId===o.id);return r?r.qty:0},hs=(o,r)=>{const l=[],_={};return q.value.forEach(x=>{let D=[];x.isDeal?x.menu_items?.forEach(I=>{D.push(...I.ingredients||[])}):D=x.ingredients||[],D.forEach(I=>{const B=I.inventory_item_id||I.id,ee=Number(I.inventory_stock??I.stock??0),L=Number(I.quantity??I.qty??1)*x.qty;_[B]||(_[B]={totalStock:ee,used:0,name:I.product_name||I.name,unit:I.unit||"unit"}),_[B].used+=L})}),o.menu_items.forEach(x=>{const D=x.ingredients||[];D.length!==0&&D.forEach(I=>{const B=I.inventory_item_id||I.id,ee=Number(I.quantity??I.qty??1)*r;let _e=Number(I.inventory_stock??I.stock??0);_[B]&&(_e=_[B].totalStock-_[B].used);const Re=q.value.find(te=>te.isDeal&&te.dealId===o.id);if(Re){const te=Number(I.quantity??I.qty??1)*Re.qty;_e+=te}_e<ee&&l.push({deal_id:o.id,deal_title:o.title,menu_item_id:x.id,menu_item_name:x.name,inventory_item_id:B,inventory_item_name:I.product_name||I.name,required_quantity:ee,available_quantity:Math.max(0,_e),shortage_quantity:ee-_e,unit:I.unit||"unit",order_quantity:r})})}),{canAdd:l.length===0,missing:l}},Fi=async o=>{const r=q.value.findIndex(x=>x.isDeal&&x.dealId===o.id),l=r>=0?q.value[r].qty+1:1,_=hs(o,l);if(!_.canAdd){console.log(" Missing ingredients for deal (client-side)"),cs.value={deal:o,existingIndex:r,newQty:l},zt.value=_.missing,kn.value=!0,z.warning("Some ingredients are missing. Confirm to proceed.");return}if(r>=0)q.value[r].qty++,q.value[r].price=q.value[r].unit_price*q.value[r].qty,z.success("Deal quantity updated");else{const D=[];o.menu_items.forEach(B=>{B.ingredients&&B.ingredients.length>0&&D.push(...B.ingredients.map(ee=>({...ee,menu_item_id:B.id,menu_item_name:B.name})))});const I={id:`deal-${o.id}`,title:o.title,price:parseFloat(o.price),unit_price:parseFloat(o.price),img:o.img,qty:1,stock:999999,ingredients:D,isDeal:!0,dealId:o.id,menu_items:o.menu_items.map(B=>({id:B.id,name:B.name,price:B.price,ingredients:B.ingredients||[],stock:Oi(B.ingredients||[])})),resale_discount_per_item:0,total_resale_discount:0};q.value.push(I),z.success(`${o.title} added to cart!`)}},fl=o=>{const r=q.value.findIndex(_=>_.isDeal&&_.dealId===o.id);if(r<0)return;const l=q.value[r];l.qty<=1?(q.value.splice(r,1),z.info("Deal removed from cart")):(l.qty--,l.price=l.unit_price*l.qty,z.success("Deal quantity decreased"))};ar(()=>{ul(),vs()});const Ne=W(null),Me=W(0),Ge=W(1),sn=W({}),It=W({}),qi=W({}),hn=W([]);let Bi=null;const ut=we(()=>!Ne.value||!Ne.value.menu_items?null:Ne.value.menu_items[Me.value]),_s=we(()=>Gs().length>0),ht=we(()=>ut.value?.addon_groups&&ut.value.addon_groups.length>0),pi=we(()=>{const o=[];return _s.value&&o.push({id:"ingredients",name:"Ingredients"}),ht.value&&o.push({id:"addons",name:"Add-ons"}),o.push({id:"review",name:"Review"}),o}),Xn=we(()=>pi.value.length),$o=we(()=>{if(Ge.value===1)return"0%";const o=pi.value.length,r=(Ge.value-1)/(o-1);return`calc(${r*100}% - ${14-r*28}px)`}),Mo=we(()=>Me.value===Ne.value?.menu_items?.length-1);we(()=>Ne.value?.menu_items?.length?hn.value.length/Ne.value.menu_items.length*100:0);const Gs=()=>ut.value?ut.value.ingredients||[]:[],Hr=o=>(sn.value[Me.value]||[]).includes(o),pl=o=>{const r=Me.value;sn.value[r]||(sn.value[r]=[]);const l=sn.value[r],_=l.indexOf(o);_>-1?(l.splice(_,1),z.info("Ingredient added back")):(l.push(o),z.info("Ingredient removed"))},hl=()=>{const o=Gs(),r=sn.value[Me.value]||[];return o.filter(l=>!r.includes(l.id)).length},_l=(o,r)=>{const l=Me.value;It.value[l]||(It.value[l]={});const x=ut.value?.addon_groups?.find(D=>D.group_id===o);if(x&&x.max_select>0&&r.length>x.max_select){z.warning(`You can only select up to ${x.max_select} ${x.group_name}`),It.value[l][o]=r.slice(0,x.max_select);return}It.value[l][o]=r},Wi=()=>{const o=Me.value,r=It.value[o];if(!r)return 0;let l=0;return Object.values(r).forEach(_=>{l+=_.length}),l},vl=()=>{const o=Me.value,r=It.value[o];if(!r)return"";const l=[];return Object.values(r).forEach(_=>{_.forEach(x=>{l.push(`${x.name} (+${n(x.price)})`)})}),l.join(", ")},Po=()=>{const o=Me.value,r=sn.value[o]||[];if(r.length===0)return"";const l=Gs(),_=r.map(x=>{const D=l.find(I=>I.id===x);return D?D.product_name||D.name:null}).filter(Boolean);return _.length===0?"":`No ${_.join(", ")}`},zr=o=>o<Ge.value?"bg-success text-white":o===Ge.value?"bg-primary text-white":"bg-light text-muted border",Ro=()=>{let o=Ge.value+1;for(;o<=Xn.value;){const r=pi.value[o-1];if(r.id==="ingredients"&&!_s.value){o++;continue}if(r.id==="addons"&&!ht.value){o++;continue}break}o<=Xn.value&&(Ge.value=o)},Zn=()=>{let o=Ge.value-1;for(;o>=1;){const r=pi.value[o-1];if(r.id==="ingredients"&&!_s.value){o--;continue}if(r.id==="addons"&&!ht.value){o--;continue}break}o>=1&&(Ge.value=o)},js=()=>{hn.value.includes(Me.value)||hn.value.push(Me.value),Me.value++,Ge.value=1,z.success("Item customized! Configure next item.")},ml=async()=>{if(!Ne.value)return;hn.value.includes(Me.value)||hn.value.push(Me.value);const o=Ne.value.menu_items.map((D,I)=>{const B=sn.value[I]||[],ee=It.value[I]||{},L=qi.value[I]||"",_e=[];Object.values(ee).forEach(te=>{te.forEach(rt=>{_e.push({id:rt.id,name:rt.name,price:parseFloat(rt.price||0)})})});const Re=(D.ingredients||[]).filter(te=>!B.includes(te.id)).map(te=>({id:te.id,inventory_item_id:te.inventory_item_id||te.id,product_name:te.product_name||te.name,quantity:te.quantity||te.qty||"1.00",stock:te.stock||0,unit:te.unit||"unit"}));return{id:D.id,name:D.name,price:D.price,ingredients:Re,addons:_e,kitchen_note:L,removed_ingredients:B,stock:Oi(Re)}}),r=q.value.findIndex(D=>D.isDeal&&D.dealId===Ne.value.id),l=999999,_=[];if(o.forEach(D=>{D.ingredients&&D.ingredients.length>0&&_.push(...D.ingredients.map(I=>({...I,menu_item_id:D.id,menu_item_name:D.name})))}),r>=0)q.value[r].qty++,q.value[r].price=q.value[r].unit_price*q.value[r].qty,z.success("Deal quantity updated!");else{const D={id:`deal-${Ne.value.id}`,title:Ne.value.title,price:Qs.value,unit_price:parseFloat(Ne.value.price),img:Ne.value.img,qty:1,stock:l,ingredients:_,isDeal:!0,dealId:Ne.value.id,menu_items:o,resale_discount_per_item:0,total_resale_discount:0};q.value.push(D),z.success(`${Ne.value.title} added to cart!`)}const x=bootstrap.Modal.getInstance(document.getElementById("customizeDealModal"));x&&x.hide(),qo()},Fo=we(()=>{if(!ut.value)return 0;const o=parseFloat(ut.value.price||0),r=Me.value,l=It.value[r];if(!l)return o;let _=0;return Object.values(l).forEach(x=>{x.forEach(D=>{_+=parseFloat(D.price||0)})}),o+_}),Qs=we(()=>{if(!Ne.value)return 0;const o=parseFloat(Ne.value.price||0);let r=0;return Object.values(It.value).forEach(l=>{Object.values(l).forEach(_=>{_.forEach(x=>{r+=parseFloat(x.price||0)})})}),o+r}),Nn=we(()=>{const o=Me.value,r=It.value[o];if(!r)return 0;let l=0;return Object.values(r).forEach(_=>{_.forEach(x=>{l+=parseFloat(x.price||0)})}),l}),rn=o=>{if(Ne.value=o,Me.value=0,Ge.value=1,sn.value={},It.value={},qi.value={},hn.value=[],!Bi){const r=document.getElementById("customizeDealModal");r&&(Bi=new bootstrap.Modal(r,{backdrop:"static"}))}Bi&&Bi.show()},qo=()=>{Ne.value=null,Me.value=0,Ge.value=1,sn.value={},It.value={},qi.value={},hn.value=[]},Xs=W(!1),Ui=W([]),Kr=W(!1),gl=async()=>{if(q.value.length===0){z.error("No items in cart to hold");return}try{const o={customer_name:Fe.value,phone_number:gt.value,delivery_location:Vt.value,order_type:Le.value,table_number:tt.value?.name||null,sub_total:Nt.value,tax:ci.value,service_charges:li.value,delivery_charges:ai.value,sale_discount:$i.value,promo_discount:ui.value,approved_discounts:us.value,total_amount:Mi.value,note:Un.value,kitchen_note:Dn.value,order_items:q.value.map(l=>({product_id:l.id,title:l.title,quantity:l.qty,price:l.price,unit_price:l.unit_price,note:l.note||"",item_kitchen_note:l.item_kitchen_note||"",variant_id:l.variant_id||null,variant_name:l.variant_name||null,addons:l.addons||[],ingredients:l.ingredients||[],removed_ingredients:l.removed_ingredients||[],sale_discount_per_item:l.resale_discount_per_item||0,total_resale_discount:l.total_resale_discount||0,isDeal:l.isDeal||!1,dealId:l.dealId||null,menu_items:l.menu_items||[]})),applied_promos:$e.value.map(l=>({promo_id:l.id,promo_name:l.name,promo_type:l.type,discount_amount:l.applied_discount||0,applied_to_items:l.applied_to_items||[]})),approved_discount_details:at.value.map(l=>({discount_id:l.id,discount_name:l.name,discount_percentage:l.percentage,discount_amount:Rs(l.percentage),approval_id:l.approval_id})),selected_discounts:at.value,terminal_id:zs.value};(await axios.post("/pending-orders",o)).data.success&&(z.success("Order held successfully!"),kr(),await vs())}catch(o){z.error(o.response?.data?.message||"Failed to hold order")}},vs=async()=>{Kr.value=!0;try{const o=await axios.get("/pending-orders");o.data.success?Ui.value=o.data.data:Ui.value=[]}catch{z.error("Failed to load pending orders"),Ui.value=[]}finally{Kr.value=!1}},Vi=async()=>{Xs.value=!0,await vs()},b=async o=>{try{if(Fe.value=o.customer_name||Ps(),gt.value=o.phone_number||"",Vt.value=o.delivery_location||"",Le.value=o.order_type,Un.value=o.note||"",Dn.value=o.kitchen_note||"",o.table_number){const r=Jt.value.table_details?.find(l=>l.name===o.table_number);tt.value=r||null}q.value=o.order_items.map(r=>({id:r.product_id,title:r.title,qty:r.quantity,price:r.price,unit_price:r.unit_price,note:r.note||"",item_kitchen_note:r.item_kitchen_note||"",img:r.img||"/assets/img/default.png",variant_id:r.variant_id||null,variant_name:r.variant_name||null,addons:r.addons||[],ingredients:r.ingredients||[],removed_ingredients:r.removed_ingredients||[],resale_discount_per_item:r.sale_discount_per_item||0,total_resale_discount:r.total_resale_discount||0,stock:r.stock||999999,isDeal:r.isDeal||!1,dealId:r.dealId||null,menu_items:r.menu_items||[]})),$e.value=o.applied_promos||[],at.value=o.selected_discounts||[],await axios.delete(`/pending-orders/${o.id}`),z.success("Order resumed successfully!"),Xs.value=!1,await vs()}catch{z.error("Failed to resume order")}},k=async o=>{try{await axios.delete(`/pending-orders/${o.id}`),z.success("Pending order rejected"),await vs()}catch{z.error("Failed to reject order")}},A=(o,r)=>it.value[o]?.some(l=>l.id===r),Y=(o,r)=>it.value[o]?.find(_=>_.id===r)?.quantity||1,le=(o,r)=>{it.value[o]||(it.value[o]=[]);const l=it.value[o].findIndex(_=>_.id===r.id);if(l>-1)it.value[o].splice(l,1);else{const _=he.value.addon_groups.find(x=>x.group_id===o);if(_&&_.max_select>0&&it.value[o].length>=_.max_select){z.warning(`You can only select up to ${_.max_select} ${_.group_name}`);return}it.value[o].push({id:r.id,name:r.name,price:parseFloat(r.price),group_id:o,quantity:1})}},Ie=(o,r)=>{const l=it.value[o]?.find(_=>_.id===r);l&&l.quantity++},Xe=(o,r)=>{const l=it.value[o]?.find(_=>_.id===r);l&&l.quantity>1&&l.quantity--};return(o,r)=>(C(),T(Oe,null,[Ft(ue(Nb),{title:"Sale"}),Ft($b,null,{default:pu(()=>[c("div",dx,[c("div",fx,[c("div",px,[c("div",{class:Xt(Ye.value?"col-md-12":"col-lg-8")},[Ye.value?(C(),T("div",hx,[c("div",_x,[r[28]||(r[28]=c("h4",{class:"mb-0"},"Menu Categories",-1)),Ur.value?(C(),T("button",{key:0,onClick:Kt,class:"btn btn-primary d-flex align-items-center gap-2",type:"button"},[...r[26]||(r[26]=[c("i",{class:"bi bi-tv"},null,-1),c("span",null,"Customer View",-1)])])):X("",!0),c("div",vx,[r[27]||(r[27]=c("input",{type:"email",name:"email",autocomplete:"email",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px"},tabindex:"-1","aria-hidden":"true"},null,-1)),S.value?ot((C(),T("input",{id:w,"onUpdate:modelValue":r[0]||(r[0]=l=>v.value=l),key:y.value,type:"search",class:"form-control form-control-sm",placeholder:"Search categories...",autocomplete:"new-password",name:w,role:"presentation",style:{"border-radius":"8px",padding:"8px 12px"}})),[[ni,v.value]]):(C(),T("input",mx))])]),r[33]||(r[33]=c("hr",null,null,-1)),f.value?(C(),T("div",gx,[...r[29]||(r[29]=[c("div",{class:"spinner-border",role:"status",style:{color:"#1B1670",width:"3rem",height:"3rem","border-width":"0.3em"}},null,-1),c("div",{class:"mt-2 fw-semibold text-muted"},"Loading...",-1)])])):(C(),T(Oe,{key:1},[c("div",bx,[c("div",{class:"cat-card",onClick:cl,style:{cursor:"pointer"}},[r[30]||(r[30]=c("div",{class:"cat-icon-wrap"},[c("span",{class:"cat-icon"},[c("i",{class:"bi bi-gift-fill text-danger",style:{"font-size":"2rem"}})])],-1)),r[31]||(r[31]=c("div",{class:"cat-name"},"Deals",-1)),c("div",yx,N(fi.value.length)+" Deal"+N(fi.value.length!==1?"s":""),1)])]),(C(!0),T(Oe,null,ze(O.value,l=>(C(),T("div",{key:l.id,class:"col-6 col-md-4 col-lg-4 category-cards"},[c("div",{class:"cat-card",onClick:_=>pt(l)},[c("div",wx,[c("span",xx,[l.image_url?(C(),T("img",{key:0,src:l.image_url,alt:"Category Image",class:"cat-image"},null,8,Ax)):(C(),T("span",Cx,""))])]),c("div",Tx,N(l.name),1),c("div",Sx,N(l.menu_items_count)+" Menu ",1)],8,Ex)]))),128)),!f.value&&O.value.length===0?(C(),T("div",Ix,[...r[32]||(r[32]=[c("div",{class:"alert alert-light border text-center rounded-4"}," No categories found ",-1)])])):X("",!0)],64))])):(C(),T("div",Ox,[c("div",Dx,[c("button",{class:"btn btn-primary rounded-pill shadow-sm px-3",onClick:r[1]||(r[1]=l=>Qn.value?dl():Fn())},[...r[34]||(r[34]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),fe(" Back ",-1)])]),c("h5",kx,N(Qn.value?"Deals":s.value.find(l=>l.id===Rn.value)?.name||"Items"),1),Qn.value?X("",!0):(C(),T("div",Nx,[Ft(Wb,{modelValue:qe.value,"onUpdate:modelValue":r[2]||(r[2]=l=>qe.value=l),title:"Menu Items","modal-id":"menuFilterModal","sort-options":[{value:"name_asc",label:"Name: A to Z"},{value:"name_desc",label:"Name: Z to A"},{value:"price_asc",label:"Price: Low to High"},{value:"price_desc",label:"Price: High to Low"}],"show-price-range":!0,"show-category":!1,"show-stock-status":!1,"show-date-range":!1,categories:[],suppliers:[],onApply:Tr,onClear:rs},null,8,["modelValue"]),c("div",Lx,[r[35]||(r[35]=c("i",{class:"bi bi-search position-absolute",style:{left:"12px",top:"50%",transform:"translateY(-50%)","z-index":"10"}},null,-1)),ot(c("input",{"onUpdate:modelValue":r[3]||(r[3]=l=>Ut.value=l),class:"form-control search-input ps-5",type:"text",placeholder:"Search items...",style:{"min-width":"250px"}},null,512),[[ni,Ut.value]])])]))]),Ms.value.length===0?(C(),T("div",$x,[c("div",Mx,[r[39]||(r[39]=c("i",{class:"bi bi-search me-2",style:{"font-size":"2rem",opacity:"0.5"}},null,-1)),r[40]||(r[40]=c("h5",{class:"mt-2 mb-2 text-dark fw-semibold"},"No Menu Found",-1)),c("p",Px,[Ut.value&&qe.value.priceRange&&qe.value.priceRange.length>0?(C(),T(Oe,{key:0},[fe(" No items match your search and filter criteria. ")],64)):Ut.value?(C(),T(Oe,{key:1},[r[36]||(r[36]=fe(' No items found matching "',-1)),c("strong",null,N(Ut.value),1),r[37]||(r[37]=fe('" ',-1))],64)):qe.value.priceRange&&qe.value.priceRange.length>0?(C(),T(Oe,{key:2},[fe(" No items match the selected price range. ")],64)):(C(),T(Oe,{key:3},[fe(" No Menu available in this category. ")],64))]),c("button",{class:"btn btn-sm btn-outline-secondary rounded-pill",onClick:rs},[...r[38]||(r[38]=[c("i",{class:"bi bi-arrow-clockwise me-1"},null,-1),fe("Clear Filters ",-1)])])])])):X("",!0),Qn.value?(C(),T("div",Rx,[Ys.value?(C(),T("div",Fx,[...r[41]||(r[41]=[c("div",{class:"spinner-border",role:"status",style:{color:"#1B1670",width:"3rem",height:"3rem","border-width":"0.3em"}},null,-1),c("div",{class:"mt-2 fw-semibold text-muted"},"Loading deals...",-1)])])):(C(),T(Oe,{key:1},[(C(!0),T(Oe,null,ze(fi.value,l=>(C(),T("div",{class:"col-12 col-md-6 left-card cat-cards col-xl-6 d-flex",key:l.id},[c("div",qx,[c("div",Bx,[c("img",{src:l.img,alt:"",class:"w-100 h-100",style:{"object-fit":"cover"}},null,8,Wx),c("span",Ux,[r[42]||(r[42]=c("i",{class:"bi bi-gift-fill me-1"},null,-1)),fe(" "+N(ue(n)(l.price)),1)])]),c("div",Vx,[c("div",null,[c("div",Hx,N(l.title),1),c("div",zx,[r[43]||(r[43]=c("small",{class:"text-muted fw-semibold d-block mb-1",style:{"font-size":"0.75rem"}},[c("i",{class:"bi bi-box-seam me-1"}),fe("Includes: ")],-1)),c("div",Kx,[(C(!0),T(Oe,null,ze(l.menu_items,_=>(C(),T("span",{key:_.id,class:"badge bg-light text-dark border",style:{"font-size":"1rem !important","font-weight":"500"}},N(_.name),1))),128))])])]),c("div",Yx,[c("button",{class:"btn btn-primary btn-sm w-75 mb-2",onClick:ji(_=>rn(l),["stop"])},[...r[44]||(r[44]=[c("i",{class:"bi bi-sliders me-1"},null,-1),fe(" Customize Deal ",-1)])],8,Gx),c("div",{class:"d-flex align-items-center justify-content-start gap-2",onClick:r[4]||(r[4]=ji(()=>{},["stop"]))},[c("button",{class:"qty-btn btn btn-outline-danger rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:ji(_=>fl(l),["stop"]),disabled:Vr(l)<=0},[...r[45]||(r[45]=[c("strong",null,"",-1)])],8,jx),c("div",Qx,N(Vr(l)),1),c("button",{class:"qty-btn btn btn-outline-danger rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:ji(_=>Fi(l),["stop"])},[...r[46]||(r[46]=[c("strong",null,"+",-1)])],8,Xx)])])])])]))),128)),!Ys.value&&fi.value.length===0?(C(),T("div",Zx,[...r[47]||(r[47]=[c("div",{class:"alert alert-light border text-center rounded-4 py-5"},[c("i",{class:"bi bi-gift",style:{"font-size":"3rem",opacity:"0.3",color:"#dc3545"}}),c("h6",{class:"mt-3 mb-1 fw-bold"},"No Deals Available"),c("p",{class:"text-muted mb-0 small"},"Check back later for exciting deals!")],-1)])])):X("",!0)],64))])):(C(),T("div",Jx,[(C(!0),T(Oe,null,ze(Ms.value,l=>(C(),T("div",{class:"col-12 col-md-6 left-card cat-cards col-xl-6 d-flex",key:l.id},[c("div",{class:"card rounded-4 shadow-sm overflow-hidden border-3 w-100 d-flex flex-row align-items-stretch",style:ao({borderColor:l.label_color||"#1B1670"})},[c("div",eA,[c("img",{src:l.img,alt:"",class:"w-100 h-100",style:{"object-fit":"cover"}},null,8,tA),l.variants&&l.variants.length>0?(C(),T("div",nA,[Gn(l).minOriginal!==null?(C(),T("span",iA,N(ue(n)(Gn(l).minOriginal)),1)):X("",!0),c("span",sA,N(ue(n)(Gn(l).min))+" - ",1),Gn(l).maxOriginal!==null?(C(),T("span",rA,N(ue(n)(Gn(l).maxOriginal)),1)):X("",!0),c("span",oA,N(ue(n)(Gn(l).max)),1)])):X("",!0),c("span",{class:"position-absolute top-0 start-0 m-1 px-2 py-1 rounded-pill text-white fw-semibold",style:ao({background:l.label_color||"#1B1670",fontSize:"0.58rem",letterSpacing:"0.3px"})},[St(ne(l)||l,!!l.variants?.length)?(C(),T(Oe,{key:0},[c("span",aA,N(ue(n)(ne(l)?.price||l.price)),1),c("span",lA,N(ue(n)(Ks(l))),1)],64)):(C(),T(Oe,{key:1},[fe(N(ue(n)(ne(l)?.price||l.price)),1)],64))],4),Ls(l)<=0?(C(),T("span",uA," OUT OF STOCK ")):X("",!0)]),c("div",cA,[l.variants&&l.variants.length>0&&St(ne(l),!0)||(!l.variants||l.variants.length===0)&&St(l,!1)?(C(),T("span",dA,N(l.variants&&l.variants.length>0?St(ne(l),!0).display:St(l,!1).display),1)):X("",!0),c("div",null,[c("div",{class:"h5 fw-bold mb-2 menu-name",style:ao({color:l.label_color||"#1B1670"})},N(l.title),5),l.variants&&l.variants.length>0?(C(),T("div",fA,[r[48]||(r[48]=c("label",{class:"form-label small fw-semibold mb-1"}," Variants: ",-1)),ot(c("select",{"onUpdate:modelValue":_=>K.value[l.id]=_,class:"form-select form-select-sm variant-select",onChange:_=>ie(l,_),onClick:r[5]||(r[5]=ji(()=>{},["stop"]))},[(C(!0),T(Oe,null,ze(l.variants,_=>(C(),T("option",{key:_.id,value:_.id},[fe(N(_.name)+" - "+N(ue(n)(_.price))+" ",1),_.is_saleable&&$t(_,!0)>0?(C(),T(Oe,{key:0},[fe(" (Sale: "+N(ue(n)($t(_,!0)))+") ",1)],64)):X("",!0)],8,hA))),128))],40,pA),[[Wd,K.value[l.id]]])])):X("",!0),l.addon_groups&&l.addon_groups.length>0?(C(),T("div",_A,[(C(!0),T(Oe,null,ze(l.addon_groups,_=>(C(),T("div",{key:_.group_id,class:"mb-3"},[c("label",vA,[fe(N(_.group_name)+" ",1),_.max_select>0?(C(),T("span",mA," (Max "+N(_.max_select)+") ",1)):X("",!0)]),Ft(ue(Ud),{modelValue:G.value[l.id]?.[_.group_id]||[],"onUpdate:modelValue":x=>ae(l,_.group_id,x),options:_.addons,optionLabel:"name",dataKey:"id",placeholder:"Select addons",maxSelectedLabels:3,class:"w-100 addon-multiselect"},{value:pu(x=>[x.value&&x.value.length>0?(C(),T("div",gA,[(C(!0),T(Oe,null,ze(x.value,D=>(C(),T("span",{key:D.id,class:"badge bg-primary"},N(D.name)+" +"+N(ue(n)(D.price)),1))),128))])):(C(),T("span",bA,N(x.placeholder),1))]),option:pu(x=>[c("div",yA,[c("span",null,N(x.option.name),1),c("span",EA," +"+N(ue(n)(x.option.price)),1)])]),_:1},8,["modelValue","onUpdate:modelValue","options"])]))),128))])):X("",!0),c("button",{class:"btn btn-primary btn-sm mb-2 view-details-btn",onClick:_=>Si(l)}," Customization ",8,wA)]),c("div",{class:"mt-2 d-flex align-items-center justify-content-start gap-2",onClick:r[6]||(r[6]=ji(()=>{},["stop"]))},[c("button",{class:"qty-btn btn btn-outline-secondary rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:ji(_=>ol(l),["stop"]),disabled:ke(l)<=0},[...r[49]||(r[49]=[c("strong",null,"",-1)])],8,xA),c("div",AA,N(ke(l)),1),c("button",{class:"qty-btn btn btn-outline-secondary rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:ji(_=>rl(l),["stop"])},[...r[50]||(r[50]=[c("strong",null,"+",-1)])],8,CA)])])],4)]))),128))]))]))],2),Ye.value?X("",!0):(C(),T("div",TA,[c("div",SA,[c("button",{class:"btn btn-info px-3 py-2",onClick:Vi},[r[51]||(r[51]=c("i",{class:"bi bi-clock-history me-1"},null,-1)),r[52]||(r[52]=fe(" Pending ",-1)),Ui.value.length>0?(C(),T("span",IA,N(Ui.value.length),1)):X("",!0)]),c("button",{class:"btn btn-warning px-3 py-2 promos-btn",onClick:Oo}," Promos "),c("button",{class:"btn btn-warning px-3 py-2 discount-btn",onClick:el}," Discounts ")]),c("div",OA,[c("div",DA,[c("div",kA,[(C(!0),T(Oe,null,ze(pn.value,(l,_)=>(C(),T("button",{key:_,class:Xt(["ot-pill btn cart-header-buttons",{active:Le.value===l}]),onClick:x=>Le.value=l},N(l.replace(/_/g," ")),11,NA))),128)),r[53]||(r[53]=c("div",{class:"d-flex justify-content-between mb-3"},null,-1))])]),c("div",LA,[c("div",$A,[Le.value==="Eat_in"?(C(),T("div",MA,[c("div",PA,[r[55]||(r[55]=c("label",{class:"form-label small"},"Table",-1)),ot(c("select",{"onUpdate:modelValue":r[7]||(r[7]=l=>tt.value=l),class:"form-select form-select-sm"},[r[54]||(r[54]=c("option",{value:null},"Select Table",-1)),(C(!0),T(Oe,null,ze(Jt.value.table_details,(l,_)=>(C(),T("option",{key:_,value:l},N(l.name),9,RA))),128))],512),[[Wd,tt.value]]),bt.value.table_number?(C(),T("div",FA,N(bt.value.table_number[0]),1)):X("",!0)]),c("div",qA,[r[56]||(r[56]=c("label",{class:"form-label small"},"Customer",-1)),ot(c("input",{"onUpdate:modelValue":r[8]||(r[8]=l=>Fe.value=l),class:"form-control form-control-sm",placeholder:"Walk In"},null,512),[[ni,Fe.value]])])])):(C(),T("div",BA,[r[57]||(r[57]=c("label",{class:"form-label small"},"Customer",-1)),ot(c("input",{"onUpdate:modelValue":r[9]||(r[9]=l=>Fe.value=l),class:Xt(["form-control form-control-sm",{"is-invalid":bt.value.customer}]),placeholder:"Walk In"},null,2),[[ni,Fe.value]]),bt.value.customer?(C(),T("div",WA,N(bt.value.customer[0]),1)):X("",!0)])),Le.value==="Delivery"?(C(),T("div",UA,[r[58]||(r[58]=c("label",{class:"form-label small"},"Delivery Location",-1)),ot(c("input",{"onUpdate:modelValue":r[10]||(r[10]=l=>Vt.value=l),class:"form-control form-control-sm",placeholder:"Enter delivery location"},null,512),[[ni,Vt.value]]),bt.value.delivery_location?(C(),T("div",VA,N(bt.value.delivery_location[0]),1)):X("",!0),r[59]||(r[59]=c("label",{class:"form-label small mt-2"},"Phone Number",-1)),ot(c("input",{"onUpdate:modelValue":r[11]||(r[11]=l=>gt.value=l),class:"form-control form-control-sm",placeholder:"Enter phone number"},null,512),[[ni,gt.value]]),bt.value.phone_number?(C(),T("div",HA,N(bt.value.phone_number[0]),1)):X("",!0)])):X("",!0)]),c("div",zA,[q.value.length===0?(C(),T("div",KA," Add items from the left ")):X("",!0),(C(!0),T(Oe,null,ze(q.value,(l,_)=>(C(),T("div",{key:l.title,class:"line"},[c("div",YA,[c("img",{src:l.img,alt:""},null,8,GA),c("div",jA,[c("div",{class:"name",title:l.title},N(l.title),9,QA),l.resale_discount_per_item>0?(C(),T("div",XA,[c("span",ZA,[r[60]||(r[60]=c("i",{class:"bi bi-tag-fill"},null,-1)),fe(" Save "+N(ue(n)(l.resale_discount_per_item)),1)])])):X("",!0),l.addons&&l.addons.length>0?(C(),T("div",JA,[c("button",{class:"btn-link p-0 py-0 text-decoration-none",onClick:x=>Do(l,_),title:Br(l)},[r[61]||(r[61]=c("i",{class:"bi bi-plus-circle-fill text-primary me-1",style:{"font-size":"0.9rem"}},null,-1)),c("span",tC,N(l.addons.length)+" addon(s)",1)],8,eC)])):X("",!0),tl(l)?(C(),T("span",nC,[...r[62]||(r[62]=[c("i",{class:"bi bi-tag-fill"},null,-1)])])):X("",!0),l.variant_name?(C(),T("div",iC,[c("span",sC,N(l.variant_name),1)])):X("",!0),l.note?(C(),T("div",rC,N(l.note),1)):X("",!0)])]),c("div",oC,[c("div",aC,[c("button",{class:"qty-btn",onClick:x=>Ua(_)},"",8,lC),c("div",uC,N(l.qty),1),c("button",{class:"qty-btn",onClick:x=>Wa(_)},"+",8,cC)]),c("div",dC,[c("div",fC,N(ue(n)(l.price)),1),c("button",{class:"del",onClick:x=>Eo(_)},[...r[63]||(r[63]=[c("i",{class:"bi bi-trash"},null,-1)])],8,pC)])])]))),128))]),c("div",hC,[c("div",_C,[r[64]||(r[64]=c("span",null,"Sub Total",-1)),c("b",vC,N(ue(n)(Nt.value)),1)]),ci.value>0?(C(),T("div",mC,[r[65]||(r[65]=c("span",{class:"d-flex align-items-center gap-2"},[c("i",{class:"bi bi-receipt text-info"}),fe(" Tax ")],-1)),c("b",gC,N(ue(n)(ci.value)),1)])):X("",!0),li.value>0?(C(),T("div",bC,[r[66]||(r[66]=c("span",{class:"text-muted"},"Service Charges:",-1)),c("span",yC,N(ue(n)(li.value)),1)])):X("",!0),ai.value>0?(C(),T("div",EC,[r[67]||(r[67]=c("span",{class:"text-muted"},"Delivery Charges:",-1)),c("span",wC,N(ue(n)(ai.value)),1)])):X("",!0),$i.value>0?(C(),T("div",xC,[r[68]||(r[68]=c("span",{class:"d-flex align-items-center gap-2"},[c("span",{class:"text-danger"},"Sale Discount:")],-1)),c("b",AC,"-"+N(ue(n)($i.value)),1)])):X("",!0),$e.value&&$e.value.length>0?(C(),T("div",CC,[c("div",TC,[c("div",SC,[r[69]||(r[69]=c("span",{class:"text-success"},"Promo Discount:",-1)),c("b",IC,"-"+N(ue(n)(ui.value)),1)])])])):X("",!0),yt.value.length>0?(C(),T("div",OC,[r[71]||(r[71]=c("div",{class:"alert alert-warning py-2 px-3 mb-2"},[c("div",{class:"d-flex align-items-center gap-2"},[c("i",{class:"bi bi-clock-history"}),c("small",{class:"fw-semibold"},"Pending Approval")])],-1)),(C(!0),T(Oe,null,ze(yt.value,l=>(C(),T("div",{key:l.id,class:"trow"},[c("span",DC,[r[70]||(r[70]=c("i",{class:"bi bi-hourglass-split"},null,-1)),c("span",null,N(l.discountData?.name||"Discount")+" ("+N(l.percentage)+"%)",1)]),c("span",kC," -"+N(ue(n)(Rs(l.percentage))),1)]))),128)),r[72]||(r[72]=c("small",{class:"text-muted d-block mt-1 ms-4"},[c("i",{class:"bi bi-info-circle me-1"}),fe(" Will apply after Super Admin approval ")],-1))])):X("",!0),at.value.length>0?(C(),T("div",NC,[c("div",LC,[r[73]||(r[73]=c("div",{class:"d-flex align-items-center text-success gap-2"},[c("i",{class:"bi bi-check-circle"}),c("small",{class:"fw-semibold"},"Approved Discounts"),c("i",{class:"bi bi-info-circle text-muted",tabindex:"0",role:"button","data-bs-toggle":"popover","data-bs-trigger":"click","data-bs-html":"true","data-bs-placement":"top","data-bs-container":"body","data-bs-content":"Auto-updates with cart changes<br>Approved Discounts"})],-1)),c("b",$C,"-"+N(ue(n)(us.value)),1)])])):X("",!0),c("div",MC,[r[74]||(r[74]=c("span",null,"Total",-1)),c("b",null,N(ue(n)(Mi.value)),1)])]),c("div",PC,[r[75]||(r[75]=c("label",{for:"frontNote",class:"form-label small fw-semibold"},"Front Note",-1)),ot(c("textarea",{id:"frontNote","onUpdate:modelValue":r[12]||(r[12]=l=>Un.value=l),rows:"3",class:"form-control form-control-sm rounded-3",placeholder:"Enter front note..."},null,512),[[ni,Un.value]])]),c("div",RC,[r[76]||(r[76]=c("label",{for:"kitchenNote",class:"form-label small fw-semibold"},"Kitchen Note",-1)),ot(c("textarea",{id:"kitchenNote","onUpdate:modelValue":r[13]||(r[13]=l=>Dn.value=l),rows:"3",class:"form-control form-control-sm rounded-3",placeholder:"Enter kitchen note..."},null,512),[[ni,Dn.value]])])]),c("div",FC,[c("button",{class:"btn btn-secondary btn-clear",onClick:r[14]||(r[14]=l=>kr())}," Clear "),c("button",{class:"btn btn-warning",onClick:gl},[...r[77]||(r[77]=[c("i",{class:"bi bi-clock-history me-1"},null,-1),fe(" Pending ",-1)])]),c("button",{class:"btn btn-primary btn-place",onClick:Ka}," Place Order ")])])]))])]),c("div",qC,[c("div",BC,[c("div",WC,[c("div",UC,[c("div",null,[c("h5",VC,N(he.value?.title||"Choose Item"),1),r[78]||(r[78]=c("p",{class:"text-muted small mb-0",style:{"font-size":"0.8rem"}},"Customize your order",-1))]),r[79]||(r[79]=c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])],-1))]),c("div",HC,[c("div",zC,[r[80]||(r[80]=c("div",{class:"stepper-progress-bg"},null,-1)),c("div",{class:"stepper-progress-fill",style:ao({width:vt.value})},null,4),(C(!0),T(Oe,null,ze(At.value,(l,_)=>(C(),T("div",{key:l.id,class:"stepper-step text-center"},[c("div",{class:Xt(["stepper-circle stepper-circle-sm",Qe(_+1)])},[_+1<me.value?(C(),T("i",KC)):(C(),T("span",YC,N(_+1),1))],2),c("small",{class:Xt(["stepper-label",{"stepper-label-active":_+1===me.value}]),style:{"font-size":"0.7rem","margin-top":"4px",display:"block"}},N(l.name),3)]))),128))])]),c("div",GC,[c("div",jC,[c("div",QC,[c("div",XC,[c("img",{src:he.value?.image_url||he.value?.img||"/assets/img/product/product29.jpg",class:"img-fluid rounded-3 w-100 object-fit-cover",style:{height:"200px","object-fit":"cover"},alt:"Product"},null,8,ZC),et()&&St(et(),!0)?(C(),T("span",JC,[r[81]||(r[81]=c("i",{class:"bi bi-tag-fill me-1"},null,-1)),fe(" "+N(St(et(),!0).display),1)])):X("",!0)]),c("div",eT,[r[85]||(r[85]=c("div",{class:"d-flex align-items-center mb-2"},[c("i",{class:"bi bi-receipt me-2 text-primary",style:{"font-size":"1rem"}}),c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Price Breakdown")],-1)),c("div",tT,[r[82]||(r[82]=c("span",{class:"text-muted"},"Base Price",-1)),c("strong",null,N(ue(n)(Ii())),1)]),ft()>0?(C(),T("div",nT,[r[83]||(r[83]=c("span",{class:"text-muted"},"Add-ons",-1)),c("strong",iT,"+ "+N(ue(n)(ft())),1)])):X("",!0),r[86]||(r[86]=c("hr",{class:"my-2"},null,-1)),c("div",sT,[r[84]||(r[84]=c("span",{class:"fw-bold"},"Total",-1)),c("span",rT,N(ue(n)(jn())),1)])])]),c("div",oT,[c("div",aT,[ot(c("div",lT,[r[88]||(r[88]=c("div",{class:"d-flex align-items-start mb-2"},[c("i",{class:"bi bi-grid-3x3-gap me-2 text-primary",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Choose Variant ")])],-1)),c("div",uT,[(C(!0),T(Oe,null,ze(he.value?.variants,l=>(C(),T("div",{key:l.id,class:"col-12"},[c("div",{class:Xt(["border rounded-3 p-2 shadow-sm variant-card",Wn.value===l.id?"border-primary bg-light":""]),onClick:_=>Tn(l.id),style:{cursor:"pointer"}},[c("div",dT,[c("div",null,[c("h6",fT,N(l.name),1)]),c("div",pT,[Wn.value===l.id?(C(),T("div",hT,[...r[87]||(r[87]=[c("i",{class:"bi bi-check-circle-fill",style:{"font-size":"1rem"}},null,-1)])])):X("",!0),c("strong",_T,N(ue(n)(l.price)),1)])])],10,cT)]))),128))])],512),[[Xi,me.value===1&&Ve.value]]),ot(c("div",vT,[r[89]||(r[89]=c("div",{class:"d-flex align-items-start mb-2"},[c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Remove Ingredients")])],-1)),c("div",mT,[(C(!0),T(Oe,null,ze(ce(),l=>(C(),T("div",{key:l.id||l.inventory_item_id,class:"col-md-6"},[c("div",{class:Xt(["d-flex align-items-center p-2 border rounded-2 shadow-sm",{"bg-light text-muted":be(l.id||l.inventory_item_id)}])},[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"16px",height:"16px"},id:"ingredient-"+(l.id||l.inventory_item_id),checked:!be(l.id||l.inventory_item_id),disabled:!be(l.id||l.inventory_item_id)&&We()===1,onChange:_=>Te(l.id||l.inventory_item_id)},null,40,gT),c("label",{for:"ingredient-"+(l.id||l.inventory_item_id),class:"form-check-label",style:{"font-size":"0.8rem"}},N(l.product_name||l.name),9,bT)],2)]))),128))])],512),[[Xi,me.value===2&&dt.value]]),ot(c("div",yT,[r[92]||(r[92]=c("div",{class:"d-flex align-items-start mb-2"},[c("i",{class:"bi bi-plus-circle me-2 text-success",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Add Add-ons"),c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}},"Enhance your meal")])],-1)),(C(!0),T(Oe,null,ze(he.value?.addon_groups,l=>(C(),T("div",{key:l.group_id,class:"mb-3"},[c("label",ET,[c("span",null,N(l.group_name),1),l.max_select>0?(C(),T("span",wT," Max "+N(l.max_select),1)):X("",!0)]),c("div",xT,[(C(!0),T(Oe,null,ze(l.addons,_=>(C(),T("div",{key:_.id,class:"col-12"},[c("div",{class:Xt(["border rounded-2 p-2 shadow-sm d-flex align-items-center justify-content-between",{"bg-light border-success":A(l.group_id,_.id)}])},[c("div",AT,[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"18px",height:"18px",cursor:"pointer"},id:"addon-"+_.id,checked:A(l.group_id,_.id),onChange:x=>le(l.group_id,_)},null,40,CT),c("label",{for:"addon-"+_.id,class:"form-check-label mb-0",style:{"font-size":"0.85rem",cursor:"pointer"}},[fe(N(_.name)+" ",1),c("span",ST," +"+N(ue(n)(_.price)),1)],8,TT)]),A(l.group_id,_.id)?(C(),T("div",IT,[c("button",{class:"btn btn-sm btn-outline-danger rounded-circle",style:{width:"28px",height:"28px",padding:"0",display:"flex","align-items":"center","justify-content":"center"},onClick:x=>Xe(l.group_id,_.id),disabled:Y(l.group_id,_.id)<=1},[...r[90]||(r[90]=[c("i",{class:"bi bi-dash",style:{"font-size":"0.9rem"}},null,-1)])],8,OT),c("span",DT,N(Y(l.group_id,_.id)),1),c("button",{class:"btn btn-sm btn-outline-success rounded-circle",style:{width:"28px",height:"28px",padding:"0",display:"flex","align-items":"center","justify-content":"center"},onClick:x=>Ie(l.group_id,_.id)},[...r[91]||(r[91]=[c("i",{class:"bi bi-plus",style:{"font-size":"0.9rem"}},null,-1)])],8,kT)])):X("",!0)],2)]))),128))])]))),128))],512),[[Xi,me.value===3&&Ke.value]]),ot(c("div",NT,[r[99]||(r[99]=c("div",{class:"d-flex align-items-start mb-2"},[c("i",{class:"bi bi-cart-check me-2 text-success",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Review Your Order"),c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}},"Confirm selections")])],-1)),c("div",LT,[r[96]||(r[96]=c("h6",{class:"fw-bold mb-2 text-secondary"},"Order Summary",-1)),Ve.value?(C(),T("div",$T,[r[93]||(r[93]=c("span",{class:"summary-label"},"Variant:",-1)),c("span",MT,N(Ct()),1)])):X("",!0),Q.value.length>0?(C(),T("div",PT,[r[94]||(r[94]=c("span",{class:"summary-label"},"Removed:",-1)),c("span",RT,N(Ue()),1)])):X("",!0),Tt()>0?(C(),T("div",FT,[r[95]||(r[95]=c("span",{class:"summary-label"},"Add-ons:",-1)),c("span",qT,N(oi()),1)])):X("",!0)]),c("div",BT,[r[97]||(r[97]=c("label",{class:"me-3 fw-semibold",style:{"font-size":"0.85rem"}},"Quantity:",-1)),c("div",WT,[c("button",{class:"qty-btn",onClick:za,disabled:nt.value<=1},"",8,UT),c("div",VT,N(nt.value),1),c("button",{class:"qty-btn",onClick:Ha},"+")])]),c("div",HT,[r[98]||(r[98]=c("label",{class:"fw-semibold mb-1",style:{"font-size":"0.85rem"}},[c("i",{class:"bi bi-chat-left-text me-1"}),fe(" Kitchen Note (Optional) ")],-1)),ot(c("textarea",{"onUpdate:modelValue":r[15]||(r[15]=l=>en.value=l),class:"form-control form-control-sm rounded-2 shadow-sm",rows:"2",maxlength:"200",placeholder:"Special instructions...",style:{"font-size":"0.8rem"}},null,512),[[ni,en.value]]),c("div",zT,N(en.value?.length||0)+"/200 ",1)])],512),[[Xi,me.value===Wt.value]])])])])]),c("div",KT,[me.value>1?(C(),T("button",{key:0,class:"btn btn-light btn-sm px-4 py-2 shadow-sm",onClick:Cn},[...r[100]||(r[100]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),fe("Back ",-1)])])):X("",!0),me.value<Wt.value?(C(),T("button",{key:1,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:kt},[...r[101]||(r[101]=[fe(" Next ",-1),c("i",{class:"bi bi-arrow-right ms-1"},null,-1)])])):(C(),T("button",{key:2,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:Va},[...r[102]||(r[102]=[c("i",{class:"bi bi-cart-plus me-1"},null,-1),fe("Add to Cart ",-1)])]))])])])]),c("div",YT,[c("div",GT,[c("div",jT,[c("div",QT,[c("div",null,[c("h5",XT,N(Ne.value?.title||"Customize Deal"),1),c("p",ZT," Customizing "+N(ut.value?.name||"item")+" ("+N(Me.value+1)+" of "+N(Ne.value?.menu_items?.length||0)+") ",1)]),r[103]||(r[103]=c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])],-1))]),c("div",JT,[c("div",eS,[r[104]||(r[104]=c("div",{class:"stepper-progress-bg"},null,-1)),c("div",{class:"stepper-progress-fill",style:ao({width:$o.value})},null,4),(C(!0),T(Oe,null,ze(pi.value,(l,_)=>(C(),T("div",{key:l.id,class:"stepper-step text-center"},[c("div",{class:Xt(["stepper-circle stepper-circle-sm",zr(_+1)])},[_+1<Ge.value?(C(),T("i",tS)):(C(),T("span",nS,N(_+1),1))],2),c("small",{class:Xt(["stepper-label",{"stepper-label-active":_+1===Ge.value}]),style:{"font-size":"0.7rem","margin-top":"4px",display:"block"}},N(l.name),3)]))),128))])]),c("div",iS,[c("div",sS,[c("div",rS,[c("div",oS,[c("img",{src:Ne.value?.img||"/assets/img/product/product29.jpg",class:"img-fluid rounded-3 w-100 object-fit-cover",style:{height:"200px","object-fit":"cover"},alt:"Deal"},null,8,aS),c("span",lS,[Qs.value>parseFloat(Ne.value?.price||0)?(C(),T("span",uS,[r[105]||(r[105]=fe(" Deal: ",-1)),c("del",null,N(ue(n)(Ne.value?.price||0)),1),fe(" "+N(ue(n)(Qs.value)),1)])):(C(),T("span",cS," Deal: "+N(ue(n)(Ne.value?.price||0)),1))])]),c("div",dS,[c("h6",fS,[Ft(ue(Vd),{class:"me-2 text-primary w-4"}),r[106]||(r[106]=fe(" Currently Customizing ",-1))]),c("div",pS,[c("div",hS,[c("strong",null,N(ut.value?.name),1),c("div",_S," Base Price: "+N(ue(n)(ut.value?.price||0)),1),Nn.value>0?(C(),T("div",vS," + "+N(ue(n)(Nn.value))+" (Add-ons) ",1)):X("",!0),c("div",mS," Total: "+N(ue(n)(Fo.value)),1)])])]),c("div",gS,[r[107]||(r[107]=c("h6",{class:"fw-bold mb-2",style:{"font-size":"0.9rem"}},[c("i",{class:"bi bi-list-check me-2 text-success"}),fe(" Items in Deal ")],-1)),c("div",bS,[(C(!0),T(Oe,null,ze(Ne.value?.menu_items,(l,_)=>(C(),T("div",{key:_,class:"list-group-item px-0 py-2 border-0"},[c("div",yS,[hn.value.includes(_)?(C(),T("i",ES)):_===Me.value?(C(),Lb(ue(Vd),{key:1,class:"text-primary me-2 w-4"})):(C(),T("i",wS)),c("small",{class:Xt({"fw-bold":_===Me.value})},N(l.name),3)])]))),128))])])]),c("div",xS,[c("div",AS,[ot(c("div",CS,[c("div",TS,[r[109]||(r[109]=c("i",{class:"bi bi-dash-circle me-2 text-warning",style:{"font-size":"1.1rem"}},null,-1)),c("div",null,[c("h6",SS," Remove Ingredients from "+N(ut.value?.name),1),r[108]||(r[108]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Uncheck ingredients you don't want ",-1))])]),c("div",IS,[(C(!0),T(Oe,null,ze(Gs(),l=>(C(),T("div",{key:l.id,class:"col-md-6"},[c("div",{class:Xt(["d-flex align-items-center p-2 border rounded-2 shadow-sm",{"bg-light text-muted":Hr(l.id)}])},[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"16px",height:"16px"},id:"deal-ingredient-"+l.id,checked:!Hr(l.id),disabled:!Hr(l.id)&&hl()===1,onChange:_=>pl(l.id)},null,40,OS),c("label",{for:"deal-ingredient-"+l.id,class:"form-check-label",style:{"font-size":"0.8rem"}},N(l.product_name||l.name),9,DS)],2)]))),128))])],512),[[Xi,Ge.value===1&&_s.value]]),ot(c("div",kS,[c("div",NS,[r[111]||(r[111]=c("i",{class:"bi bi-plus-circle me-2 text-success",style:{"font-size":"1.1rem"}},null,-1)),c("div",null,[c("h6",LS," Add Add-ons to "+N(ut.value?.name),1),r[110]||(r[110]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Enhance this item (charges may apply) ",-1))])]),(C(!0),T(Oe,null,ze(ut.value?.addon_groups,l=>(C(),T("div",{key:l.group_id,class:"mb-3"},[c("label",$S,[c("span",null,N(l.group_name),1),l.max_select>0?(C(),T("span",MS," Max "+N(l.max_select),1)):X("",!0)]),Ft(ue(Ud),{modelValue:It.value[Me.value]?.[l.group_id]||[],"onUpdate:modelValue":_=>_l(l.group_id,_),options:l.addons,optionLabel:"name",dataKey:"id",placeholder:"Select add-ons",maxSelectedLabels:2,class:"w-100",appendTo:"self"},null,8,["modelValue","onUpdate:modelValue","options"])]))),128))],512),[[Xi,Ge.value===2&&ht.value]]),ot(c("div",PS,[c("div",RS,[Ft(ue(Hb),{class:"me-2 text-primary w-5",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",FS," Review "+N(ut.value?.name),1),r[112]||(r[112]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Confirm your customizations ",-1))])]),c("div",qS,[r[119]||(r[119]=c("h6",{class:"fw-bold mb-2 text-secondary"},"Customization Summary",-1)),c("div",BS,[r[113]||(r[113]=c("span",{class:"summary-label"},"Item:",-1)),c("span",WS,N(ut.value?.name),1)]),c("div",US,[r[114]||(r[114]=c("span",{class:"summary-label"},"Base Price:",-1)),c("span",VS,N(ue(n)(ut.value?.price||0)),1)]),Po()?(C(),T("div",HS,[r[115]||(r[115]=c("span",{class:"summary-label"},"Removed:",-1)),c("span",zS,N(Po()),1)])):X("",!0),Wi()>0?(C(),T("div",KS,[r[116]||(r[116]=c("span",{class:"summary-label"},"Add-ons:",-1)),c("span",YS,N(vl()),1)])):X("",!0),Nn.value>0?(C(),T("div",GS,[r[117]||(r[117]=c("span",{class:"summary-label"},"Add-ons Cost:",-1)),c("span",jS," + "+N(ue(n)(Nn.value)),1)])):X("",!0),c("div",QS,[r[118]||(r[118]=c("span",{class:"summary-label fw-bold"},"Item Total:",-1)),c("span",XS,N(ue(n)(Fo.value)),1)])]),c("div",ZS,[c("label",JS,[r[120]||(r[120]=c("i",{class:"bi bi-chat-left-text me-1"},null,-1)),fe(" Kitchen Note for "+N(ut.value?.name)+" (Optional) ",1)]),ot(c("textarea",{"onUpdate:modelValue":r[16]||(r[16]=l=>qi.value[Me.value]=l),class:"form-control form-control-sm rounded-2 shadow-sm",rows:"2",maxlength:"200",placeholder:"Special instructions for this item...",style:{"font-size":"0.8rem"}},"                                    ",512),[[ni,qi.value[Me.value]]]),c("div",e2,N((qi.value[Me.value]||"").length)+"/200 ",1)])],512),[[Xi,Ge.value===Xn.value]])])])])]),c("div",t2,[c("div",n2,[Ge.value>1?(C(),T("button",{key:0,class:"btn btn-secondary btn-sm px-4 py-2 shadow-sm",onClick:Zn},[...r[121]||(r[121]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),fe("Back ",-1)])])):X("",!0),Ge.value<Xn.value?(C(),T("button",{key:1,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:Ro},[...r[122]||(r[122]=[fe(" Next ",-1),c("i",{class:"bi bi-arrow-right ms-1"},null,-1)])])):Mo.value?(C(),T("button",{key:3,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:ml},[...r[124]||(r[124]=[c("i",{class:"bi bi-cart-plus me-1"},null,-1),fe("Add Deal to Cart ",-1)])])):(C(),T("button",{key:2,class:"btn btn-success btn-sm px-4 py-2 shadow-sm",onClick:js},[...r[123]||(r[123]=[c("i",{class:"bi bi-check2 me-1"},null,-1),fe("Next Item ",-1)])]))])])])])]),c("div",i2,[c("div",s2,[c("div",r2,[r[135]||(r[135]=c("div",{class:"modal-header border-0 pb-2"},[c("h5",{class:"modal-title fw-bold"},[c("i",{class:"bi bi-puzzle-fill text-primary me-2"}),fe(" Manage Add-ons ")]),c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])])],-1)),st.value?(C(),T("div",o2,[c("div",a2,[c("div",l2,[c("img",{src:st.value.img,alt:"",class:"rounded",style:{width:"60px",height:"60px","object-fit":"cover"}},null,8,u2),c("div",c2,[c("div",d2,N(st.value.title),1),c("div",f2,[c("small",p2,[r[125]||(r[125]=c("i",{class:"bi bi-tag me-1"},null,-1)),r[126]||(r[126]=fe(" Base Price: ",-1)),c("span",h2,N(ue(n)(st.value?.unit_price-Kn(q.value[zn.value]||{addons:[]}))),1)]),c("small",_2,[r[127]||(r[127]=c("i",{class:"bi bi-box me-1"},null,-1)),r[128]||(r[128]=fe(" Quantity: ",-1)),c("span",v2,N(st.value.qty),1)])])])])]),st.value.addons&&st.value.addons.length>0?(C(),T("div",m2,[c("table",g2,[r[131]||(r[131]=c("thead",{class:"table-light"},[c("tr",null,[c("th",{style:{width:"60px"},class:"text-center"},"Select"),c("th",null,"Items"),c("th",{style:{width:"120px"},class:"text-center"},"Price"),c("th",{style:{width:"200px"},class:"text-center"},"Quantity")])],-1)),c("tbody",null,[(C(!0),T(Oe,null,ze(st.value.addons,l=>(C(),T("tr",{key:l.id,class:Xt({"table-active":l.selected!==!1})},[c("td",b2,[c("div",y2,[c("input",{type:"checkbox",class:"form-check-input",checked:l.selected!==!1,onChange:_=>al(l),style:{width:"22px",height:"22px",cursor:"pointer"}},null,40,E2)])]),c("td",null,[c("div",w2,[c("div",{class:Xt(["addon-status-indicator",l.selected!==!1?"bg-success":"bg-secondary"])},null,2),c("div",null,[c("div",x2,N(l.name),1),l.group_name?(C(),T("small",A2,N(l.group_name),1)):X("",!0)])])]),c("td",C2,[c("span",T2," +"+N(ue(n)(l.price)),1)]),c("td",null,[c("div",S2,[c("button",{class:"btn btn-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px"},onClick:_=>qr(l),disabled:!l.selected||(l.quantity||1)<=1},[...r[129]||(r[129]=[c("i",{class:"bi bi-dash-lg"},null,-1)])],8,I2),c("span",O2,N(l.quantity||1),1),c("button",{class:"btn btn-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px"},onClick:_=>lt(l),disabled:!l.selected},[...r[130]||(r[130]=[c("i",{class:"bi bi-plus-lg"},null,-1)])],8,D2)])])],2))),128))])])])):(C(),T("div",k2,[...r[132]||(r[132]=[c("i",{class:"bi bi-inbox",style:{"font-size":"3rem",opacity:"0.3"}},null,-1),c("p",{class:"mb-0 mt-3 fw-semibold"},"No add-ons available for this item",-1)])])),c("div",N2,[Tt()>0?(C(),T("div",L2,[c("small",$2,[r[133]||(r[133]=c("i",{class:"bi bi-check-circle-fill me-1"},null,-1)),fe(" "+N(Tt())+" add-on(s) selected  Add-ons Total: "+N(ue(n)(Kn(st.value))),1)])])):X("",!0)])])):X("",!0),c("div",{class:"modal-footer border-0 pt-0 bg-light"},[r[134]||(r[134]=c("button",{type:"button",class:"btn btn-secondary px-2 py-2","data-bs-dismiss":"modal"}," Cancel ",-1)),c("button",{type:"button",class:"btn btn-primary px-2 py-2",onClick:ko}," Save ")])])])]),Ft(Fb,{show:So.value,kot:ds.value,loading:Rr.value,onClose:r[17]||(r[17]=l=>So.value=!1),onStatusUpdated:Pr},null,8,["show","kot","loading"]),Ft(Pb,{show:Nr.value,order:Di.value,money:wo,onClose:r[18]||(r[18]=l=>Nr.value=!1)},null,8,["show","order"]),Ft(Mb,{show:os.value,customer:Fe.value,"delivery-location":Vt.value,phone:gt.value,"order-type":Le.value,"selected-table":tt.value,"order-items":q.value,"grand-total":Mi.value,money:wo,cashReceived:Lr.value,"onUpdate:cashReceived":r[19]||(r[19]=l=>Lr.value=l),client_secret:u.client_secret,order_code:u.order_code,"sub-total":Nt.value,tax:ci.value,"service-charges":li.value,"delivery-charges":ai.value,"promo-discount":ui.value,"promo-id":$e.value?.id,"promo-name":$e.value?.name,"promo-type":$e.value?.type,"promo-discount-amount":ui.value,note:Un.value,"kitchen-note":Dn.value,"order-date":new Date().toISOString().split("T")[0],"order-time":new Date().toTimeString().split(" ")[0],"payment-method":Ya.value,change:Ga.value,onClose:r[20]||(r[20]=l=>os.value=!1),onConfirm:To,appliedPromos:il.value,"approved-discounts":us.value,"approved-discount-details":at.value.map(l=>({discount_id:l.id,discount_name:l.name,discount_percentage:l.percentage,discount_amount:Rs(l.percentage),approval_id:l.approval_id}))},null,8,["show","customer","delivery-location","phone","order-type","selected-table","order-items","grand-total","cashReceived","client_secret","order_code","sub-total","tax","service-charges","delivery-charges","promo-discount","promo-id","promo-name","promo-type","promo-discount-amount","note","kitchen-note","order-date","order-time","payment-method","change","appliedPromos","approved-discounts","approved-discount-details"]),Ft(Bb,{show:Li.value,orders:Hn.value,onClose:r[21]||(r[21]=l=>Li.value=!1),onViewDetails:nl,loading:Bs.value},null,8,["show","orders","loading"]),Ft(Rb,{show:Ws.value,loading:Us.value,promos:ps.value,"order-items":q.value,onApplyPromo:Ja,onClose:r[22]||(r[22]=l=>Ws.value=!1)},null,8,["show","loading","promos","order-items"]),Ft(Ub,{show:fs.value,discounts:Hs.value,"order-items":q.value,loading:Vs.value,"applied-discounts":at.value,"rejected-discounts":ls.value,onClose:r[23]||(r[23]=l=>fs.value=!1),onApplyDiscount:ja,onClearDiscount:Xa},null,8,["show","discounts","order-items","loading","applied-discounts","rejected-discounts"]),Ft(cx,{show:kn.value,"missing-ingredients":zt.value,onClose:r[24]||(r[24]=l=>{kn.value=!1,qs.value=null}),onConfirm:Za},null,8,["show","missing-ingredients"]),Ft(Vb,{show:Xs.value,"pending-orders":Ui.value,loading:Kr.value,onClose:r[25]||(r[25]=l=>Xs.value=!1),onResume:b,onReject:k},null,8,["show","pending-orders","loading"])])]),_:1})],64))}},dI=Ob(M2,[["__scopeId","data-v-6974c67f"]]);export{dI as default};
