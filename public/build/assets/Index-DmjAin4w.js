import{_ as he,r as _,c as L,y as xe,o as de,I as ge,n as we,f as r,b as c,d as T,u as d,h as _e,w as Se,e,m as v,l as S,J as E,F as b,t as a,k as ke,v as De,g as V,K as z,p as Te}from"./app-COfeKFco.js";import{_ as Pe}from"./Master-BwcgCD_I.js";import{u as Ce}from"./useFormatters-DekmLp3t.js";import{s as N}from"./index-D7y0DI42.js";import{E as je,a as Le,u as J,w as Me}from"./xlsx-CQiPhMNw.js";import"./index-DWWqmOtC.js";import"./createLucideIcon-BHjiP04p.js";import"./index-dUBskPjT.js";import"./index-DAUyLLvF.js";import"./sun-Dj9dN6fF.js";import"./index-B3ocb_Xi.js";import"./index-DLoIRGAb.js";const Re={class:"page-wrapper"},Ae={class:"card border-0 shadow-sm rounded-4 mb-4"},Ve={class:"card-body"},Ne={class:"row g-3"},Ie={class:"col-md-3"},$e={class:"col-md-3"},Ye={key:0,class:"col-md-3"},Fe={key:1,class:"col-md-2"},Oe={key:2,class:"col-md-2"},Ue={key:3,class:"col-md-3"},qe={key:4,class:"col-md-2"},Qe={key:5,class:"col-md-2"},Ee={class:"row g-3 mb-4"},ze={class:"col-md-6 col-xl-3"},Je={class:"card border-0 shadow-sm rounded-4"},Be={class:"card-body d-flex align-items-center justify-content-between"},Ge={class:"mb-0 fw-bold"},Ke={class:"col-md-6 col-xl-3"},Xe={class:"card border-0 shadow-sm rounded-4"},He={class:"card-body d-flex align-items-center justify-content-between"},We={class:"mb-0 fw-bold"},Ze={class:"col-md-6 col-xl-3"},et={class:"card border-0 shadow-sm rounded-4"},tt={class:"card-body d-flex align-items-center justify-content-between"},st={class:"mb-0 fw-bold"},lt={class:"col-md-6 col-xl-3"},at={class:"card border-0 shadow-sm rounded-4"},ot={class:"card-body d-flex align-items-center justify-content-between"},dt={class:"mb-0 fw-bold"},nt={class:"col-md-6 col-xl-3"},it={class:"card border-0 shadow-sm rounded-4"},ut={class:"card-body d-flex align-items-center justify-content-between"},rt={class:"mb-0 fw-bold"},ct={class:"col-md-6 col-xl-3"},mt={class:"card border-0 shadow-sm rounded-4"},pt={class:"card-body d-flex align-items-center justify-content-between"},vt={class:"mb-0 fw-bold"},yt={class:"col-md-6 col-xl-3"},bt={class:"card border-0 shadow-sm rounded-4"},ft={class:"card-body d-flex align-items-center justify-content-between"},ht={class:"mb-0 fw-bold"},xt={class:"col-md-6 col-xl-3"},gt={class:"card border-0 shadow-sm rounded-4"},wt={class:"card-body d-flex align-items-center justify-content-between"},_t={class:"mb-0 fw-bold"},St={class:"col-md-6 col-xl-3"},kt={class:"card border-0 shadow-sm rounded-4"},Dt={class:"card-body d-flex align-items-center justify-content-between"},Tt={class:"mb-0 fw-bold"},Pt={class:"col-md-6 col-xl-3"},Ct={class:"card border-0 shadow-sm rounded-4"},jt={class:"card-body d-flex align-items-center justify-content-between"},Lt={class:"mb-0 fw-bold"},Mt={class:"col-md-6 col-xl-3"},Rt={class:"card border-0 shadow-sm rounded-4"},At={class:"card-body d-flex align-items-center justify-content-between"},Vt={class:"mb-0 fw-bold"},Nt={class:"col-md-6 col-xl-3"},It={class:"card border-0 shadow-sm rounded-4"},$t={class:"card-body d-flex align-items-center justify-content-between"},Yt={class:"mb-0 fw-bold"},Ft={class:"col-md-6 col-xl-3"},Ot={class:"card border-0 shadow-sm rounded-4"},Ut={class:"card-body d-flex align-items-center justify-content-between"},qt={class:"mb-0 fw-bold"},Qt={class:"col-md-6 col-xl-3"},Et={class:"card border-0 shadow-sm rounded-4"},zt={class:"card-body d-flex align-items-center justify-content-between"},Jt={class:"mb-0 fw-bold"},Bt={class:"col-md-6 col-xl-3"},Gt={class:"card border-0 shadow-sm rounded-4"},Kt={class:"card-body d-flex align-items-center justify-content-between"},Xt={class:"mb-0 fw-bold"},Ht={class:"col-md-6 col-xl-3"},Wt={class:"card border-0 shadow-sm rounded-4"},Zt={class:"card-body d-flex align-items-center justify-content-between"},es={class:"mb-0 fw-bold"},ts={class:"col-md-6 col-xl-3"},ss={class:"card border-0 shadow-sm rounded-4"},ls={class:"card-body d-flex align-items-center justify-content-between"},as={class:"mb-0 fw-bold"},os={class:"col-md-6 col-xl-3"},ds={class:"card border-0 shadow-sm rounded-4"},ns={class:"card-body d-flex align-items-center justify-content-between"},is={class:"mb-0 fw-bold"},us={class:"col-md-6 col-xl-3"},rs={class:"card border-0 shadow-sm rounded-4"},cs={class:"card-body d-flex align-items-center justify-content-between"},ms={class:"mb-0 fw-bold"},ps={class:"col-md-6 col-xl-3"},vs={class:"card border-0 shadow-sm rounded-4"},ys={class:"card-body d-flex align-items-center justify-content-between"},bs={class:"mb-0 fw-bold"},fs={class:"col-md-6 col-xl-3"},hs={class:"card border-0 shadow-sm rounded-4"},xs={class:"card-body d-flex align-items-center justify-content-between"},gs={class:"mb-0 fw-bold"},ws={class:"col-md-6 col-xl-3"},_s={class:"card border-0 shadow-sm rounded-4"},Ss={class:"card-body d-flex align-items-center justify-content-between"},ks={class:"mb-0 fw-bold"},Ds={class:"col-md-6 col-xl-3"},Ts={class:"card border-0 shadow-sm rounded-4"},Ps={class:"card-body d-flex align-items-center justify-content-between"},Cs={class:"mb-0 fw-bold"},js={class:"col-md-6 col-xl-3"},Ls={class:"card border-0 shadow-sm rounded-4"},Ms={class:"card-body d-flex align-items-center justify-content-between"},Rs={class:"mb-0 fw-bold"},As={key:0,class:"alert alert-warning border-0 rounded-4 shadow-sm"},Vs={class:"card border-0 shadow-sm rounded-4 mt-3"},Ns={class:"card-body"},Is={class:"d-flex flex-wrap gap-2 justify-content-between align-items-center mb-3"},$s={class:"search-wrap"},Ys={key:1,class:"form-control search-input",placeholder:"Search",disabled:"",type:"text"},Fs={class:"table-responsive"},Os={class:"table table-hover align-middle"},Us={class:"small text-muted"},qs={class:"fw-semibold"},Qs={class:"small"},Es={class:"small"},zs={class:"fw-bold text-success"},Js={class:"small"},Bs={class:"fw-semibold"},Gs={class:"fw-semibold"},Ks={class:"small"},Xs={key:0,class:"text-muted"},Hs={key:1,class:"text-secondary"},Ws={class:"small"},Zs={key:0,class:"badge bg-success-subtle text-success px-3 py-2 rounded-pill"},el={key:1,class:"badge bg-warning-subtle text-warning px-3 py-2 rounded-pill"},tl={key:2,class:"badge bg-secondary-subtle text-secondary px-3 py-2 rounded-pill"},sl={class:"fw-semibold"},ll={class:"fw-semibold"},al={key:0,class:"badge bg-success-subtle text-success"},ol={key:1,class:"badge bg-warning-subtle text-warning"},dl={key:2,class:"badge bg-danger-subtle text-danger"},nl={class:"fw-semibold"},il={class:"fw-semibold"},ul={key:0,class:"table-active fw-bold border-top border-3"},rl={class:"text-success"},cl={key:1,class:"table-active fw-bold border-top border-3"},ml={key:2},pl={key:3},vl={class:"row g-3"},yl={class:"col-lg-8"},bl={class:"card border-0 shadow-sm rounded-4 h-100"},fl={class:"card-body"},hl={class:"fw-semibold mb-2"},xl={class:"chart"},gl={viewBox:"0 0 840 280"},wl=["y1","y2"],_l=["x","y"],Sl=["x","y"],kl=["d"],Dl=["d"],Tl={key:2},Pl={key:3,x:"430",y:"140","text-anchor":"middle",fill:"#6b7280"},Cl={class:"col-lg-4"},jl={class:"card border-0 shadow-sm rounded-4 mb-3"},Ll={class:"card-body"},Ml={class:"stack-row"},Rl={class:"stack-val"},Al={class:"progress thin"},Vl={class:"card border-0 shadow-sm rounded-4"},Nl={class:"card-body"},Il={class:"stack"},$l={class:"stack-row"},Yl={class:"stack-val"},Fl={class:"stack-row"},Ol={class:"stack-val"},Ul={class:"stack-row"},ql={class:"stack-val"},Ql={class:"stack-row"},El={__name:"Index",setup(zl){const{formatNumber:f,formatCurrencySymbol:n,dateFmt:k}=Ce(),s=_({type:"sales",timeRange:"monthly",selectedMonth:"",selectedYear:"",selectedDate:"",selectedYear:"",dateFrom:"",dateTo:"",orderType:"",paymentType:""}),ne=[{label:"Sales Analytics",value:"sales"},{label:"Purchase Analytics",value:"purchase"},{label:"Sales vs Purchase",value:"comparison"},{label:"Stock Analysis",value:"stock"},{label:"Cashier Performance",value:"userSales"},{label:"Category Analysis",value:"category"}],ie=[{label:"Daily",value:"daily"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"},{label:"Custom Range",value:"custom"}],P=_(!1),D=_(""),B=_(Date.now()),F=`search-${Math.random().toString(36).substr(2,9)}`,G=_(!1),M=_(""),y=_({}),O=_([]),C=_([]),K=_([]),m=_({}),X=_("Just now"),H=_(0),ue=L(()=>{const i=[],t=["January","February","March","April","May","June","July","August","September","October","November","December"];for(let l=1;l<=12;l++){const o=String(l).padStart(2,"0");i.push({value:o,label:t[l-1]})}return i}),W=L(()=>{const i=new Date().getFullYear(),t=[];for(let l=i;l>=i-10;l--)t.push(l);return t}),Z=L(()=>({sales:"Sales Over Time",purchase:"Purchase Over Time",comparison:"Sales vs Purchase",stock:"Stock Trend",userSales:"Cashier Performance",category:"Category Distribution"})[s.value.type]||"Chart"),ee=L(()=>{if(s.value.timeRange==="daily")return s.value.selectedDate?`Date: ${s.value.selectedDate}`:"Select a date";if(s.value.timeRange==="monthly"){const t=["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(s.value.selectedMonth)-1]||"";return s.value.selectedMonth&&s.value.selectedYear?`${t} ${s.value.selectedYear}`:"Select month and year"}return s.value.timeRange==="yearly"?s.value.selectedYear?`Year: ${s.value.selectedYear}`:"Select a year":s.value.dateFrom&&s.value.dateTo?`${s.value.dateFrom} to ${s.value.dateTo}`:"Select dates"});function re(i,t,l,o={l:50,r:20,t:40,b:50}){if(!i?.length)return{paths:[],xLabels:[],yLabels:[]};const x=i.map((p,g)=>g),u=i.map(p=>+p.total||+p.sales||+p.purchase||+p.value||0),w=i.map(p=>+p.purchase||0),$=0,ve=Math.max(1,x.length-1),ye=[...u,...w].filter(p=>p>0),te=0,se=Math.max(1,...ye),be=Math.max(1,t-o.l-o.r),U=Math.max(1,l-o.t-o.b),R=p=>o.l+(p-$)/(ve-$)*be,A=p=>o.t+U-(p-te)/(se-te)*U;let q="";if(x.length===1){const p=R(0),g=A(u[0]);q=`M${p},${g} L${p+.01},${g}`}else q=x.map((p,g)=>`${g?"L":"M"}${R(p)},${A(u[g])}`).join(" ");let Q="";if(w.some(p=>p>0))if(x.length===1){const p=R(0),g=A(w[0]);Q=`M${p},${g} L${p+.01},${g}`}else Q=x.map((p,g)=>`${g?"L":"M"}${R(p)},${A(w[g])}`).join(" ");const fe=i.map((p,g)=>{let Y;if(p.date){const oe=new Date(p.date);p.date.length===7&&p.date.includes("-")?Y=oe.toLocaleDateString("en-US",{month:"short"}):Y=oe.toLocaleDateString("en-US",{weekday:"short"})}else Y=`Day ${g+1}`;return{x:R(g),y:o.t+U+20,text:Y}}),le=5,ae=[];for(let p=0;p<=le;p++){const g=se/le*p;ae.push({x:o.l-10,y:A(g),text:Math.round(g).toLocaleString()})}return{salesPath:q,purchasePath:Q,xLabels:fe,yLabels:ae}}const j=L(()=>re(O.value,840,280)),h=L(()=>{const i=M.value.trim().toLowerCase();return s.value.type!=="sales"?i?(C.value||[]).filter(t=>[t.name,t.cashierName,t.categoryName,t.metric].filter(Boolean).join(" ").toLowerCase().includes(i)):C.value||[]:i?(C.value||[]).filter(t=>[String(t.id),t.customer_name].filter(Boolean).join(" ").toLowerCase().includes(i)):C.value||[]}),ce=()=>{s.value.selectedMonth="",s.value.selectedYear="",s.value.selectedDate="",s.value.dateFrom="",s.value.dateTo=""},I=async()=>{if(s.value.timeRange==="daily"&&!s.value.selectedDate){D.value="Please select a date";return}if(s.value.timeRange==="monthly"&&(!s.value.selectedMonth||!s.value.selectedYear)){D.value="Please select both month and year";return}if(s.value.timeRange==="monthly"&&!s.value.selectedMonth){D.value="Please select a month";return}if(s.value.timeRange==="yearly"&&!s.value.selectedYear){D.value="Please select a year";return}if(s.value.timeRange==="custom"&&(!s.value.dateFrom||!s.value.dateTo)){D.value="Please select both start and end dates";return}P.value=!0,D.value="";try{const{data:i}=await Te.get("/api/analytics",{params:{type:s.value.type,timeRange:s.value.timeRange,selectedMonth:s.value.selectedMonth,selectedYear:s.value.selectedYear,selectedDate:s.value.selectedDate,dateFrom:s.value.dateFrom,dateTo:s.value.dateTo,orderType:s.value.orderType,paymentType:s.value.paymentType}});y.value=i.kpi||{},O.value=i.chartData||[],C.value=i.tableData||[],K.value=i.distributionData||[],m.value=i.totalsSummary||{},H.value=C.value.length,X.value=new Date().toLocaleTimeString()}catch(i){console.error(i),D.value=i.response?.data?.message||"Failed to load analytics"}finally{P.value=!1}};xe(()=>[s.value.type,s.value.timeRange,s.value.selectedMonth,s.value.selectedYear,s.value.selectedDate],()=>{s.value.type&&s.value.timeRange&&(s.value.timeRange==="daily"&&s.value.selectedDate||s.value.timeRange==="monthly"&&s.value.selectedMonth&&s.value.selectedYear||s.value.timeRange==="yearly"&&s.value.selectedYear||s.value.timeRange==="custom"&&s.value.dateFrom&&s.value.dateTo)&&I()}),de(()=>window.feather?.replace()),ge(()=>window.feather?.replace()),de(async()=>{M.value="",B.value=Date.now(),await we(),setTimeout(()=>{G.value=!0;const i=document.getElementById(F);i&&(i.value="",M.value="")},100)});const me=()=>{try{const i=new je("l","mm","a4");i.setFontSize(18),i.setFont("helvetica","bold"),i.text(`${Z.value}`,14,20),i.setFontSize(10),i.setFont("helvetica","normal");const t=new Date().toLocaleString();i.text(`Generated on: ${t}`,14,28),i.text(`Period: ${ee.value}`,14,34),i.text(`Total Records: ${h.value.length}`,14,40);let l=[],o=[];s.value.type==="sales"?(l=["S.#","Order ID","Customer","Items","Qty","Sub Total","Tax","Service","Delivery","Sales Disc.","Approved Disc.","Promo Disc.","Promos","Promo Type","Total","Date"],o=h.value.map((u,w)=>[w+1,u.id,u.customer_name||"-",u.item_count,u.total_qty,n(u.sub_total),n(u.tax),n(u.service_charges),n(u.delivery_charges),n(u.sales_discount),n(u.approved_discounts),n(u.promo_discount),u.promo_names||"-",u.promo_types||"-",n(u.total_amount),k(u.order_date)]),m.value&&h.value.length>0&&o.push(["TOTAL","-","-",m.value.item_count,m.value.total_qty,n(m.value.sub_total),n(m.value.tax),n(m.value.service_charges),n(m.value.delivery_charges),n(m.value.sales_discount),n(m.value.approved_discounts),n(m.value.promo_discount),"-","-",n(m.value.total_amount),"-"])):s.value.type==="purchase"?(l=["S.#","Purchase ID","Supplier","Product","Quantity","Unit Price","Sub Total","Expiry","Purchase Date","Status"],o=h.value.map((u,w)=>[w+1,u.purchase_id,u.supplier_name||"-",u.product_name||"-",u.quantity,n(u.unit_price),n(u.sub_total),u.expiry_date?k(u.expiry_date):"N/A",k(u.purchase_date),u.status||"-"]),m.value&&h.value.length>0&&o.push(["TOTAL","-","-","-",m.value.quantity,n(m.value.total_unit_price),n(m.value.sub_total),"-","-","-"])):s.value.type==="comparison"?(l=["S.#","Metric","Sales","Purchase","Difference"],o=h.value.map((u,w)=>[w+1,u.metric,n(u.sales),n(u.purchase),n(u.difference)])):s.value.type==="stock"?(l=["S.#","Item","Current Stock","Min Level","Status"],o=h.value.map((u,w)=>[w+1,u.name,u.currentStock,u.minLevel,u.currentStock>u.minLevel?"In Stock":u.currentStock>0?"Low Stock":"Out of Stock"])):s.value.type==="userSales"?(l=["S.#","Cashier Name","Orders","Total Sales","Avg Sale"],o=h.value.map((u,w)=>[w+1,u.cashierName,u.orderCount,n(u.totalSales),n(u.avgSale)])):s.value.type==="category"&&(l=["S.#","Category","Qty Sold","Revenue","% of Total"],o=h.value.map((u,w)=>[w+1,u.categoryName,u.qty,n(u.revenue),u.percentage+"%"])),Le(i,{head:[l],body:o,startY:46,styles:{fontSize:7,cellPadding:2,halign:"left",lineColor:[0,0,0],lineWidth:.1},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:14,right:14},didDrawPage:u=>{const w=i.internal.getNumberOfPages(),$=i.internal.pageSize.height;i.setFontSize(8),i.text(`Page ${u.pageNumber} of ${w}`,u.settings.margin.left,$-10)}});const x=`${s.value.type}_Analytics_${new Date().toISOString().split("T")[0]}.pdf`;i.save(x)}catch(i){console.error("PDF generation error:",i),D.value=`PDF generation failed: ${i.message}`}},pe=()=>{let i=[];s.value.type==="sales"?(i=h.value.map((o,x)=>({"S.#":x+1,"Order ID":o.id,"Customer Name":o.customer_name,"Item Count":o.item_count,"Total Qty":o.total_qty,"Sub Total":o.sub_total,Tax:o.tax,"Service Charge":o.service_charges,"Delivery Charge":o.delivery_charges,"Sales Discount":o.sales_discount,"Approved Discount":o.approved_discounts,"Promo Discount":o.promo_discount,"Applied Promos":o.promo_names,"Promo Type":o.promo_types,"Total Amount":o.total_amount,Date:k(o.order_date)})),m.value&&i.push({"S.#":"TOTAL","Order ID":"-","Customer Name":"-","Item Count":m.value.item_count,"Total Qty":m.value.total_qty,"Sub Total":m.value.sub_total,Tax:m.value.tax,"Service Charge":m.value.service_charges,"Delivery Charge":m.value.delivery_charges,"Sales Discount":m.value.sales_discount,"Approved Discount":m.value.approved_discounts,"Promo Discount":m.value.promo_discount,"Applied Promos":"-","Promo Type":"-","Total Amount":m.value.total_amount,Date:"-"})):s.value.type==="purchase"?(i=h.value.map((o,x)=>({"S.#":x+1,"Purchase ID":o.purchase_id,"Supplier Name":o.supplier_name,"Product Name":o.product_name,Quantity:o.quantity,"Unit Price":o.unit_price,"Sub Total":o.sub_total,"Expiry Date":o.expiry_date?k(o.expiry_date):"N/A","Purchase Date":k(o.purchase_date),Status:o.status})),m.value&&i.push({"S.#":"TOTAL","Purchase ID":"-","Supplier Name":"-","Product Name":"-",Quantity:m.value.quantity,"Unit Price":m.value.total_unit_price,"Sub Total":m.value.sub_total,"Expiry Date":"-","Purchase Date":"-",Status:"-"})):s.value.type==="comparison"?i=h.value.map((o,x)=>({"S.#":x+1,Metric:o.metric,Sales:o.sales,Purchase:o.purchase,Difference:o.difference})):s.value.type==="stock"?i=h.value.map((o,x)=>({"S.#":x+1,Item:o.name,"Current Stock":o.currentStock,"Min Level":o.minLevel,Status:o.currentStock>o.minLevel?"In Stock":o.currentStock>0?"Low Stock":"Out of Stock"})):s.value.type==="userSales"?i=h.value.map((o,x)=>({"S.#":x+1,"Cashier Name":o.cashierName,Orders:o.orderCount,"Total Sales":o.totalSales,"Avg Sale":o.avgSale})):s.value.type==="category"&&(i=h.value.map((o,x)=>({"S.#":x+1,Category:o.categoryName,"Qty Sold":o.qty,Revenue:o.revenue,"% of Total":o.percentage+"%"})));const t=J.json_to_sheet(i),l=J.book_new();J.book_append_sheet(l,t,s.value.type),Me(l,`${s.value.type}-analytics-${Date.now()}.xlsx`)};return(i,t)=>(c(),r(b,null,[T(d(_e),{title:"Analytics"}),T(Pe,null,{default:Se(()=>[e("div",Re,[e("div",{class:"d-flex flex-wrap gap-2 align-items-center justify-content-between mb-3"},[t[12]||(t[12]=e("h4",{class:"mb-1"},"Analytics & Reports",-1)),t[13]||(t[13]=e("div",null,null,-1)),e("div",{class:"dropdown"},[t[11]||(t[11]=e("button",{class:"btn btn-outline-secondary rounded-pill px-4 dropdown-toggle","data-bs-toggle":"dropdown"},[e("i",{class:"fas fa-download me-2"}),S("Download ")],-1)),e("ul",{class:"dropdown-menu dropdown-menu-end shadow rounded-4 py-2"},[e("li",null,[e("a",{class:"dropdown-item py-2",href:"javascript:void(0)",onClick:me},[...t[9]||(t[9]=[e("i",{class:"fas fa-file-pdf me-2 text-danger"},null,-1),S("Download as PDF ",-1)])])]),e("li",null,[e("a",{class:"dropdown-item py-2",href:"javascript:void(0)",onClick:pe},[...t[10]||(t[10]=[e("i",{class:"fas fa-file-excel me-2 text-success"},null,-1),S("Download as Excel ",-1)])])])])])]),e("div",Ae,[e("div",Ve,[e("div",Ne,[e("div",Ie,[t[14]||(t[14]=e("label",{class:"form-label fw-semibold text-dark"},[e("i",{class:"fas fa-chart-bar me-2 text-muted"}),S("Analytics Type ")],-1)),T(d(N),{modelValue:s.value.type,"onUpdate:modelValue":t[0]||(t[0]=l=>s.value.type=l),options:ne,optionLabel:"label",optionValue:"value",placeholder:"Select Analytics Type",class:"w-100"},null,8,["modelValue"])]),e("div",$e,[t[15]||(t[15]=e("label",{class:"form-label fw-semibold text-dark"},[e("i",{class:"fas fa-calendar-alt me-2 text-muted"}),S("Time Range ")],-1)),T(d(N),{modelValue:s.value.timeRange,"onUpdate:modelValue":t[1]||(t[1]=l=>s.value.timeRange=l),options:ie,optionLabel:"label",optionValue:"value",placeholder:"Select Time Range",onChange:ce,class:"w-100"},null,8,["modelValue"])]),s.value.timeRange==="daily"?(c(),r("div",Ye,[t[16]||(t[16]=e("label",{class:"form-label fw-semibold text-dark"},[e("i",{class:"fas fa-calendar me-2 text-muted"}),S("Select Date ")],-1)),T(d(E),{modelValue:s.value.selectedDate,"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.selectedDate=l),placeholder:"Choose Date",format:"yyyy-MM-dd","enable-time-picker":!1,"single-calendar":""},null,8,["modelValue"])])):v("",!0),s.value.timeRange==="monthly"?(c(),r("div",Fe,[t[17]||(t[17]=e("label",{class:"form-label fw-semibold text-dark"},[e("i",{class:"fas fa-calendar me-2 text-muted"}),S("Select Month ")],-1)),T(d(N),{modelValue:s.value.selectedMonth,"onUpdate:modelValue":t[3]||(t[3]=l=>s.value.selectedMonth=l),options:ue.value,optionLabel:"label",optionValue:"value",placeholder:"Choose Month",class:"w-100"},null,8,["modelValue","options"])])):v("",!0),s.value.timeRange==="monthly"?(c(),r("div",Oe,[t[18]||(t[18]=e("label",{class:"form-label fw-semibold text-dark"},[e("i",{class:"fas fa-calendar me-2 text-muted"}),S("Select Year ")],-1)),T(d(N),{modelValue:s.value.selectedYear,"onUpdate:modelValue":t[4]||(t[4]=l=>s.value.selectedYear=l),options:W.value,placeholder:"Choose Year",class:"w-100"},null,8,["modelValue","options"])])):v("",!0),s.value.timeRange==="yearly"?(c(),r("div",Ue,[t[19]||(t[19]=e("label",{class:"form-label fw-semibold text-dark"},[e("i",{class:"fas fa-calendar me-2 text-muted"}),S("Select Year ")],-1)),T(d(N),{modelValue:s.value.selectedYear,"onUpdate:modelValue":t[5]||(t[5]=l=>s.value.selectedYear=l),options:W.value,placeholder:"Choose Year",class:"w-100"},null,8,["modelValue","options"])])):v("",!0),s.value.timeRange==="custom"?(c(),r("div",qe,[t[20]||(t[20]=e("label",{class:"form-label fw-semibold text-dark"},[e("i",{class:"fas fa-calendar me-2 text-muted"}),S("Start Date ")],-1)),T(d(E),{modelValue:s.value.dateFrom,"onUpdate:modelValue":t[6]||(t[6]=l=>s.value.dateFrom=l),placeholder:"Select Start Date",format:"yyyy-MM-dd"},null,8,["modelValue"])])):v("",!0),s.value.timeRange==="custom"?(c(),r("div",Qe,[t[21]||(t[21]=e("label",{class:"form-label fw-semibold text-dark"},[e("i",{class:"fas fa-calendar me-2 text-muted"}),S("End Date ")],-1)),T(d(E),{modelValue:s.value.dateTo,"onUpdate:modelValue":t[7]||(t[7]=l=>s.value.dateTo=l),placeholder:"Select End Date",format:"yyyy-MM-dd"},null,8,["modelValue"])])):v("",!0)])])]),e("div",Ee,[s.value.type==="sales"?(c(),r(b,{key:0},[e("div",ze,[e("div",Je,[e("div",Be,[e("div",null,[e("h4",Ge,a(d(n)(y.value.revenue||0)),1),t[22]||(t[22]=e("p",{class:"text-muted mb-0 small"},"Total Revenue",-1))]),t[23]||(t[23]=e("div",{class:"rounded-circle p-3 bg-success-subtle text-success d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-currency-pound fs-4"})],-1))])])]),e("div",Ke,[e("div",Xe,[e("div",He,[e("div",null,[e("h4",We,a(d(f)(y.value.ordersCount)),1),t[24]||(t[24]=e("p",{class:"text-muted mb-0 small"},"Total Orders",-1))]),t[25]||(t[25]=e("div",{class:"rounded-circle p-3 bg-primary-subtle text-primary d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-receipt fs-4"})],-1))])])]),e("div",Ze,[e("div",et,[e("div",tt,[e("div",null,[e("h4",st,a(d(n)(y.value.aov||0)),1),t[26]||(t[26]=e("p",{class:"text-muted mb-0 small"},"Avg. Order Value",-1))]),t[27]||(t[27]=e("div",{class:"rounded-circle p-3 bg-warning-subtle text-warning d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-graph-up fs-4"})],-1))])])]),e("div",lt,[e("div",at,[e("div",ot,[e("div",null,[e("h4",dt,a(d(f)(y.value.itemsSold)),1),t[28]||(t[28]=e("p",{class:"text-muted mb-0 small"},"Items Sold",-1))]),t[29]||(t[29]=e("div",{class:"rounded-circle p-3 bg-danger-subtle text-danger d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-basket fs-4"})],-1))])])])],64)):v("",!0),s.value.type==="purchase"?(c(),r(b,{key:1},[e("div",nt,[e("div",it,[e("div",ut,[e("div",null,[e("h4",rt,a(d(n)(y.value.purchaseCost||0)),1),t[30]||(t[30]=e("p",{class:"text-muted mb-0 small"},"Total Purchase Cost",-1))]),t[31]||(t[31]=e("div",{class:"rounded-circle p-3 bg-info-subtle text-info d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-bag-check fs-4"})],-1))])])]),e("div",ct,[e("div",mt,[e("div",pt,[e("div",null,[e("h4",vt,a(d(f)(y.value.purchaseCount)),1),t[32]||(t[32]=e("p",{class:"text-muted mb-0 small"},"Total Purchases",-1))]),t[33]||(t[33]=e("div",{class:"rounded-circle p-3 bg-primary-subtle text-primary d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-box-seam fs-4"})],-1))])])]),e("div",yt,[e("div",bt,[e("div",ft,[e("div",null,[e("h4",ht,a(d(n)(y.value.avgPurchaseValue||0)),1),t[34]||(t[34]=e("p",{class:"text-muted mb-0 small"},"Avg. Purchase Value",-1))]),t[35]||(t[35]=e("div",{class:"rounded-circle p-3 bg-warning-subtle text-warning d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-graph-up fs-4"})],-1))])])]),e("div",xt,[e("div",gt,[e("div",wt,[e("div",null,[e("h4",_t,a(d(f)(y.value.itemsPurchased)),1),t[36]||(t[36]=e("p",{class:"text-muted mb-0 small"},"Items Purchased",-1))]),t[37]||(t[37]=e("div",{class:"rounded-circle p-3 bg-secondary-subtle text-secondary d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-boxes fs-4"})],-1))])])])],64)):v("",!0),s.value.type==="comparison"?(c(),r(b,{key:2},[e("div",St,[e("div",kt,[e("div",Dt,[e("div",null,[e("h4",Tt,a(d(n)(y.value.salesRevenue)),1),t[38]||(t[38]=e("p",{class:"text-muted mb-0 small"},"Sales Revenue",-1))]),t[39]||(t[39]=e("div",{class:"rounded-circle p-3 bg-success-subtle text-success d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-arrow-up-right fs-4"})],-1))])])]),e("div",Pt,[e("div",Ct,[e("div",jt,[e("div",null,[e("h4",Lt,a(d(n)(y.value.purchaseCost)),1),t[40]||(t[40]=e("p",{class:"text-muted mb-0 small"},"Purchase Cost",-1))]),t[41]||(t[41]=e("div",{class:"rounded-circle p-3 bg-danger-subtle text-danger d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-arrow-down-left fs-4"})],-1))])])]),e("div",Mt,[e("div",Rt,[e("div",At,[e("div",null,[e("h4",Vt,a(d(n)(y.value.grossProfit)),1),t[42]||(t[42]=e("p",{class:"text-muted mb-0 small"},"Gross Profit",-1))]),t[43]||(t[43]=e("div",{class:"rounded-circle p-3 bg-primary-subtle text-primary d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-graph-up fs-4"})],-1))])])]),e("div",Nt,[e("div",It,[e("div",$t,[e("div",null,[e("h4",Yt,a(y.value.profitMargin)+"%",1),t[44]||(t[44]=e("p",{class:"text-muted mb-0 small"},"Profit Margin",-1))]),t[45]||(t[45]=e("div",{class:"rounded-circle p-3 bg-info-subtle text-info d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-percent fs-4"})],-1))])])])],64)):v("",!0),s.value.type==="stock"?(c(),r(b,{key:3},[e("div",Ft,[e("div",Ot,[e("div",Ut,[e("div",null,[e("h4",qt,a(d(f)(y.value.totalStock)),1),t[46]||(t[46]=e("p",{class:"text-muted mb-0 small"},"Total Items in Stock",-1))]),t[47]||(t[47]=e("div",{class:"rounded-circle p-3 bg-info-subtle text-info d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-box-seam fs-4"})],-1))])])]),e("div",Qt,[e("div",Et,[e("div",zt,[e("div",null,[e("h4",Jt,a(d(f)(y.value.lowStockItems)),1),t[48]||(t[48]=e("p",{class:"text-muted mb-0 small"},"Low Stock Items",-1))]),t[49]||(t[49]=e("div",{class:"rounded-circle p-3 bg-warning-subtle text-warning d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-exclamation-triangle fs-4"})],-1))])])]),e("div",Bt,[e("div",Gt,[e("div",Kt,[e("div",null,[e("h4",Xt,a(d(f)(y.value.outOfStockItems)),1),t[50]||(t[50]=e("p",{class:"text-muted mb-0 small"},"Out of Stock",-1))]),t[51]||(t[51]=e("div",{class:"rounded-circle p-3 bg-danger-subtle text-danger d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-x-circle fs-4"})],-1))])])]),e("div",Ht,[e("div",Wt,[e("div",Zt,[e("div",null,[e("h4",es,a(d(n)(y.value.stockValue)),1),t[52]||(t[52]=e("p",{class:"text-muted mb-0 small"},"Total Stock Value",-1))]),t[53]||(t[53]=e("div",{class:"rounded-circle p-3 bg-success-subtle text-success d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-cash-coin fs-4"})],-1))])])])],64)):v("",!0),s.value.type==="userSales"?(c(),r(b,{key:4},[e("div",ts,[e("div",ss,[e("div",ls,[e("div",null,[e("h4",as,a(d(n)(y.value.totalUserSales)),1),t[54]||(t[54]=e("p",{class:"text-muted mb-0 small"},"Total Sales",-1))]),t[55]||(t[55]=e("div",{class:"rounded-circle p-3 bg-success-subtle text-success d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-currency-pound fs-4"})],-1))])])]),e("div",os,[e("div",ds,[e("div",ns,[e("div",null,[e("h4",is,a(d(n)(y.value.avgCashierSales)),1),t[56]||(t[56]=e("p",{class:"text-muted mb-0 small"},"Avg. per Cashier",-1))]),t[57]||(t[57]=e("div",{class:"rounded-circle p-3 bg-primary-subtle text-primary d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-person-check fs-4"})],-1))])])]),e("div",us,[e("div",rs,[e("div",cs,[e("div",null,[e("h4",ms,a(d(f)(y.value.activeCashiers)),1),t[58]||(t[58]=e("p",{class:"text-muted mb-0 small"},"Active Cashiers",-1))]),t[59]||(t[59]=e("div",{class:"rounded-circle p-3 bg-info-subtle text-info d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-people fs-4"})],-1))])])]),e("div",ps,[e("div",vs,[e("div",ys,[e("div",null,[e("h4",bs,a(d(n)(y.value.topCashierSales)),1),t[60]||(t[60]=e("p",{class:"text-muted mb-0 small"},"Top Cashier Sales",-1))]),t[61]||(t[61]=e("div",{class:"rounded-circle p-3 bg-warning-subtle text-warning d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-star fs-4"})],-1))])])])],64)):v("",!0),s.value.type==="category"?(c(),r(b,{key:5},[e("div",fs,[e("div",hs,[e("div",xs,[e("div",null,[e("h4",gs,a(d(f)(y.value.totalCategories)),1),t[62]||(t[62]=e("p",{class:"text-muted mb-0 small"},"Total Categories",-1))]),t[63]||(t[63]=e("div",{class:"rounded-circle p-3 bg-info-subtle text-info d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-tag fs-4"})],-1))])])]),e("div",ws,[e("div",_s,[e("div",Ss,[e("div",null,[e("h4",ks,a(d(n)(y.value.categoryRevenue)),1),t[64]||(t[64]=e("p",{class:"text-muted mb-0 small"},"Total Revenue",-1))]),t[65]||(t[65]=e("div",{class:"rounded-circle p-3 bg-success-subtle text-success d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-currency-pound fs-4"})],-1))])])]),e("div",Ds,[e("div",Ts,[e("div",Ps,[e("div",null,[e("h4",Cs,a(y.value.topCategory),1),t[66]||(t[66]=e("p",{class:"text-muted mb-0 small"},"Top Category",-1))]),t[67]||(t[67]=e("div",{class:"rounded-circle p-3 bg-primary-subtle text-primary d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-trophy fs-4"})],-1))])])]),e("div",js,[e("div",Ls,[e("div",Ms,[e("div",null,[e("h4",Rs,a(d(f)(y.value.totalCategorySales)),1),t[68]||(t[68]=e("p",{class:"text-muted mb-0 small"},"Total Items Sold",-1))]),t[69]||(t[69]=e("div",{class:"rounded-circle p-3 bg-warning-subtle text-warning d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-bag-check fs-4"})],-1))])])])],64)):v("",!0)]),D.value?(c(),r("div",As,a(D.value),1)):v("",!0),e("div",Vs,[e("div",Ns,[e("div",Is,[t[71]||(t[71]=e("h6",{class:"fw-semibold mb-0"},"Detailed Data",-1)),e("div",$s,[t[70]||(t[70]=e("i",{class:"bi bi-search"},null,-1)),G.value?ke((c(),r("input",{id:F,"onUpdate:modelValue":t[8]||(t[8]=l=>M.value=l),key:B.value,class:"form-control search-input",placeholder:"Search",type:"search",autocomplete:"new-password",name:F,role:"presentation"})),[[De,M.value]]):(c(),r("input",Ys))])]),e("div",Fs,[e("table",Os,[e("thead",Us,[e("tr",null,[t[112]||(t[112]=e("th",{style:{width:"60px"}},"S.#",-1)),s.value.type==="sales"?(c(),r(b,{key:0},[t[72]||(t[72]=e("th",null,"Order ID",-1)),t[73]||(t[73]=e("th",null,"Customer Name",-1)),t[74]||(t[74]=e("th",{style:{width:"100px"}},"Item Count",-1)),t[75]||(t[75]=e("th",{style:{width:"100px"}},"Total Qty",-1)),t[76]||(t[76]=e("th",{style:{width:"120px"}},"Sub Total",-1)),t[77]||(t[77]=e("th",{style:{width:"120px"}},"Tax",-1)),t[78]||(t[78]=e("th",{style:{width:"120px"}},"Service Charge",-1)),t[79]||(t[79]=e("th",{style:{width:"120px"}},"Delivery Charge",-1)),t[80]||(t[80]=e("th",{style:{width:"120px"}},"Sale Discount",-1)),t[81]||(t[81]=e("th",{style:{width:"120px"}},"Approved Discount",-1)),t[82]||(t[82]=e("th",{style:{width:"140px"}},"Promo Discount",-1)),t[83]||(t[83]=e("th",{style:{width:"150px"}},"Applied Promos",-1)),t[84]||(t[84]=e("th",{style:{width:"100px"}},"Promo Type",-1)),t[85]||(t[85]=e("th",{style:{width:"140px"}},"Total Amount",-1)),t[86]||(t[86]=e("th",{style:{width:"100px"}},"Date",-1))],64)):v("",!0),s.value.type==="purchase"?(c(),r(b,{key:1},[t[87]||(t[87]=e("th",{style:{width:"100px"}},"Purchase ID",-1)),t[88]||(t[88]=e("th",{style:{width:"150px"}},"Supplier Name",-1)),t[89]||(t[89]=e("th",{style:{width:"150px"}},"Product Name",-1)),t[90]||(t[90]=e("th",{style:{width:"100px"}},"Quantity",-1)),t[91]||(t[91]=e("th",{style:{width:"120px"}},"Unit Price",-1)),t[92]||(t[92]=e("th",{style:{width:"140px"}},"Sub Total",-1)),t[93]||(t[93]=e("th",{style:{width:"130px"}},"Expiry Date",-1)),t[94]||(t[94]=e("th",{style:{width:"120px"}},"Purchase Date",-1)),t[95]||(t[95]=e("th",{style:{width:"100px"}},"Status",-1))],64)):v("",!0),s.value.type==="comparison"?(c(),r(b,{key:2},[t[96]||(t[96]=e("th",null,"Metric",-1)),t[97]||(t[97]=e("th",{style:{width:"140px"}},"Sales",-1)),t[98]||(t[98]=e("th",{style:{width:"140px"}},"Purchase",-1)),t[99]||(t[99]=e("th",{style:{width:"140px"}},"Difference",-1))],64)):v("",!0),s.value.type==="stock"?(c(),r(b,{key:3},[t[100]||(t[100]=e("th",null,"Item",-1)),t[101]||(t[101]=e("th",{style:{width:"100px"}},"Stock",-1)),t[102]||(t[102]=e("th",{style:{width:"100px"}},"Min Level",-1)),t[103]||(t[103]=e("th",{style:{width:"120px"}},"Status",-1))],64)):v("",!0),s.value.type==="userSales"?(c(),r(b,{key:4},[t[104]||(t[104]=e("th",null,"Cashier Name",-1)),t[105]||(t[105]=e("th",{style:{width:"120px"}},"Orders",-1)),t[106]||(t[106]=e("th",{style:{width:"140px"}},"Total Sales",-1)),t[107]||(t[107]=e("th",{style:{width:"120px"}},"Avg Sale",-1))],64)):v("",!0),s.value.type==="category"?(c(),r(b,{key:5},[t[108]||(t[108]=e("th",null,"Category",-1)),t[109]||(t[109]=e("th",{style:{width:"120px"}},"Qty Sold",-1)),t[110]||(t[110]=e("th",{style:{width:"140px"}},"Revenue",-1)),t[111]||(t[111]=e("th",{style:{width:"100px"}},"% of Total",-1))],64)):v("",!0)])]),e("tbody",null,[(c(!0),r(b,null,V(h.value,(l,o)=>(c(),r("tr",{key:o},[e("td",null,a(o+1),1),s.value.type==="sales"?(c(),r(b,{key:0},[e("td",qs,a(l.id),1),e("td",null,a(l.customer_name),1),e("td",null,a(d(f)(l.item_count)),1),e("td",null,a(d(f)(l.total_qty)),1),e("td",null,a(d(n)(l.sub_total)),1),e("td",null,a(d(n)(l.tax)),1),e("td",null,a(d(n)(l.service_charges)),1),e("td",null,a(d(n)(l.delivery_charges)),1),e("td",null,a(d(n)(l.sales_discount)),1),e("td",null,a(d(n)(l.approved_discounts)),1),e("td",null,a(d(n)(l.promo_discount)),1),e("td",Qs,a(l.promo_names),1),e("td",Es,a(l.promo_types),1),e("td",zs,a(d(n)(l.total_amount)),1),e("td",Js,a(d(k)(l.order_date)),1)],64)):v("",!0),s.value.type==="purchase"?(c(),r(b,{key:1},[e("td",Bs,a(l.purchase_id),1),e("td",null,a(l.supplier_name),1),e("td",Gs,a(l.product_name),1),e("td",null,a(d(f)(l.quantity)),1),e("td",null,a(d(n)(l.unit_price)),1),e("td",null,a(d(n)(l.sub_total)),1),e("td",Ks,[l.expiry_date?(c(),r("span",Xs,a(d(k)(l.expiry_date)),1)):(c(),r("span",Hs,"N/A"))]),e("td",Ws,a(d(k)(l.purchase_date)),1),e("td",null,[l.status==="completed"?(c(),r("span",Zs," Completed ")):l.status==="pending"?(c(),r("span",el," Pending ")):(c(),r("span",tl,a(l.status),1))])],64)):v("",!0),s.value.type==="comparison"?(c(),r(b,{key:2},[e("td",sl,a(l.metric),1),e("td",null,a(d(n)(l.sales)),1),e("td",null,a(d(n)(l.purchase)),1),e("td",{style:z({color:l.difference>0?"#10b981":"#ef4444"}),class:"fw-semibold"},a(d(n)(l.difference)),5)],64)):v("",!0),s.value.type==="stock"?(c(),r(b,{key:3},[e("td",ll,a(l.name),1),e("td",null,a(d(f)(l.currentStock)),1),e("td",null,a(d(f)(l.minLevel)),1),e("td",null,[l.currentStock>l.minLevel?(c(),r("span",al," In Stock ")):l.currentStock>0?(c(),r("span",ol," Low Stock ")):(c(),r("span",dl," Out of Stock "))])],64)):v("",!0),s.value.type==="userSales"?(c(),r(b,{key:4},[e("td",nl,a(l.cashierName),1),e("td",null,a(d(f)(l.orderCount)),1),e("td",null,a(d(n)(l.totalSales)),1),e("td",null,a(d(n)(l.avgSale)),1)],64)):v("",!0),s.value.type==="category"?(c(),r(b,{key:5},[e("td",il,a(l.categoryName),1),e("td",null,a(d(f)(l.qty)),1),e("td",null,a(d(n)(l.revenue)),1),e("td",null,a(l.percentage)+"%",1)],64)):v("",!0)]))),128)),s.value.type==="sales"&&h.value.length>0?(c(),r("tr",ul,[t[113]||(t[113]=e("td",{colspan:"0",class:"text-end"},"TOTALS",-1)),t[114]||(t[114]=e("td",{colspan:"0"},"-",-1)),t[115]||(t[115]=e("td",{colspan:"0"},"-",-1)),e("td",null,a(d(f)(m.value.item_count)),1),e("td",null,a(d(f)(m.value.total_qty)),1),e("td",null,a(d(n)(m.value.sub_total)),1),e("td",null,a(d(n)(m.value.tax)),1),e("td",null,a(d(n)(m.value.service_charges)),1),e("td",null,a(d(n)(m.value.delivery_charges)),1),e("td",null,a(d(n)(m.value.sales_discount+m.value.approved_discounts)),1),e("td",null,a(d(n)(m.value.approved_discounts)),1),e("td",null,a(d(n)(m.value.promo_discount)),1),t[116]||(t[116]=e("td",null,"-",-1)),t[117]||(t[117]=e("td",null,"-",-1)),e("td",rl,a(d(n)(m.value.total_amount)),1),t[118]||(t[118]=e("td",null,null,-1))])):v("",!0),s.value.type==="purchase"&&h.value.length>0?(c(),r("tr",cl,[t[119]||(t[119]=e("td",{colspan:"0"},"TOTALS",-1)),t[120]||(t[120]=e("td",null,"-",-1)),t[121]||(t[121]=e("td",null,"-",-1)),t[122]||(t[122]=e("td",null,"-",-1)),e("td",null,a(d(f)(m.value.quantity)),1),e("td",null,a(d(n)(m.value.total_unit_price)),1),e("td",null,a(d(n)(m.value.sub_total)),1),t[123]||(t[123]=e("td",{colspan:"3"},null,-1))])):v("",!0),!P.value&&h.value.length===0?(c(),r("tr",ml,[...t[124]||(t[124]=[e("td",{colspan:16,class:"text-center text-muted py-4"}," No data available for this period. ",-1)])])):v("",!0),P.value?(c(),r("tr",pl,[...t[125]||(t[125]=[e("td",{colspan:5,class:"text-center text-muted py-4"},[e("i",{class:"fas fa-spinner fa-spin me-2"}),S("Loadingâ€¦ ")],-1)])])):v("",!0)])])])])]),e("div",vl,[e("div",yl,[e("div",bl,[e("div",fl,[e("h6",hl,a(Z.value),1),e("div",xl,[(c(),r("svg",gl,[t[127]||(t[127]=e("line",{x1:"50",y1:"40",x2:"50",y2:"230",stroke:"#4b5563","stroke-width":"1"},null,-1)),t[128]||(t[128]=e("line",{x1:"50",y1:"230",x2:"820",y2:"230",stroke:"#4b5563","stroke-width":"1"},null,-1)),(c(),r(b,null,V(5,l=>e("g",{key:"grid"+l},[e("line",{x1:50,x2:820,y1:230-l*38,y2:230-l*38,stroke:"#374151","stroke-width":"0.5",opacity:"0.3"},null,8,wl)])),64)),(c(!0),r(b,null,V(j.value.yLabels,(l,o)=>(c(),r("text",{key:"ylabel"+o,x:l.x,y:l.y+5,"text-anchor":"end",fill:"#9ca3af","font-size":"11"},a(l.text),9,_l))),128)),(c(!0),r(b,null,V(j.value.xLabels,(l,o)=>(c(),r("text",{key:"xlabel"+o,x:l.x,y:l.y,"text-anchor":"middle",fill:"#9ca3af","font-size":"11"},a(l.text),9,Sl))),128)),j.value.salesPath?(c(),r("path",{key:0,d:j.value.salesPath,fill:"none",stroke:"#10b981","stroke-width":"3","stroke-linecap":"round"},null,8,kl)):v("",!0),s.value.type==="comparison"&&j.value.purchasePath?(c(),r("path",{key:1,d:j.value.purchasePath,fill:"none",stroke:"#ef4444","stroke-width":"3","stroke-linecap":"round"},null,8,Dl)):v("",!0),s.value.type==="comparison"?(c(),r("g",Tl,[...t[126]||(t[126]=[e("circle",{cx:"750",cy:"20",r:"5",fill:"#10b981"},null,-1),e("text",{x:"760",y:"25",fill:"#9ca3af","font-size":"12"},"Sales",-1),e("circle",{cx:"820",cy:"20",r:"5",fill:"#ef4444"},null,-1),e("text",{x:"830",y:"25",fill:"#9ca3af","font-size":"12"},"Purchase",-1)])])):v("",!0),O.value.length?v("",!0):(c(),r("text",Pl," No data available "))]))])])])]),e("div",Cl,[e("div",jl,[e("div",Ll,[t[129]||(t[129]=e("h6",{class:"fw-semibold mb-3"},"Distribution",-1)),(c(!0),r(b,null,V(K.value,l=>(c(),r("div",{key:l.label,class:"stack"},[e("div",Ml,[e("span",null,a(l.label),1),e("span",Rl,a(l.value)+" ("+a(l.percentage)+"%)",1)]),e("div",Al,[e("div",{class:"progress-bar",style:z({width:l.percentage+"%",backgroundColor:l.color})},null,4)])]))),128))])]),e("div",Vl,[e("div",Nl,[t[134]||(t[134]=e("h6",{class:"fw-semibold mb-3"},"Summary Info",-1)),e("div",Il,[e("div",$l,[t[130]||(t[130]=e("span",null,"Period",-1)),e("span",Yl,a(d(k)(ee.value)),1)]),e("div",Fl,[t[131]||(t[131]=e("span",null,"Data Points",-1)),e("span",Ol,a(H.value),1)]),e("div",Ul,[t[132]||(t[132]=e("span",null,"Last Updated",-1)),e("span",ql,a(X.value),1)]),e("div",Ql,[t[133]||(t[133]=e("span",null,"Status",-1)),e("span",{class:"stack-val",style:z({color:P.value?"#f59e0b":"#10b981"})},a(P.value?"Loading...":"Active"),5)])])])])])])])]),_:1})],64))}},aa=he(El,[["__scopeId","data-v-015b9700"]]);export{aa as default};
