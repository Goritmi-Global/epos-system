import{_ as he,r as u,o as z,n as ve,c as v,f as m,b as p,d as y,u as C,h as be,w as R,e as t,t as c,k as E,v as ye,l as U,F as T,g as K,S as X,m as H,i as fe,x as ge,q as h}from"./app-DrUr72II.js";import{_ as _e}from"./Master-BeW6Lctk.js";import{u as we}from"./useFormatters-DMzlbhVl.js";import{F as xe}from"./FilterModal-nF80RTMq.js";import{E as Ce,a as Te,X as Ie,u as I,w as $e}from"./xlsx-7aOw9oZM.js";import{C as ke}from"./clock-C10rsBT9.js";import{c as De}from"./createLucideIcon-BENYThoS.js";import{C as Oe}from"./circle-check-big-CgIbEcoI.js";import{C as Se}from"./circle-x-CZ0G9APD.js";import{P as Fe}from"./printer-D8RzPxtz.js";import"./index-BLyqyTLg.js";import"./index-DMd6VC55.js";import"./index-DfwVUbck.js";import"./sun-pxRjjhfX.js";/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=De("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),Ne={class:"page-wrapper"},Pe={class:"row g-4"},Ee={class:"col-md-6 col-xl-3"},Ke={class:"card border-0 shadow-sm rounded-4"},Ve={class:"card-body d-flex align-items-center justify-content-between"},Le={class:"mb-0 fw-bold"},Be={class:"col-md-6 col-xl-3"},Ae={class:"card border-0 shadow-sm rounded-4"},Me={class:"card-body d-flex align-items-center justify-content-between"},We={class:"mb-0 fw-bold"},qe={class:"col-md-6 col-xl-3"},ze={class:"card border-0 shadow-sm rounded-4"},Re={class:"card-body d-flex align-items-center justify-content-between"},Ue={class:"mb-0 fw-bold"},Xe={class:"col-md-6 col-xl-3"},He={class:"card border-0 shadow-sm rounded-4"},Qe={class:"card-body d-flex align-items-center justify-content-between"},Ge={class:"mb-0 fw-bold"},Je={class:"col-md-6 col-xl-3"},Ze={class:"card border-0 shadow-sm rounded-4"},Ye={class:"card-body d-flex align-items-center justify-content-between"},et={class:"mb-0 fw-bold"},tt={class:"col-md-6 col-xl-3"},st={class:"card border-0 shadow-sm rounded-4"},at={class:"card-body d-flex align-items-center justify-content-between"},ot={class:"mb-0 fw-bold"},rt={class:"card border-0 shadow-lg rounded-4"},nt={class:"card-body"},lt={class:"d-flex flex-wrap gap-2 justify-content-between align-items-center mb-3"},dt={class:"d-flex flex-wrap gap-2 align-items-center"},it={class:"search-wrap"},ct={key:1,class:"form-control search-input",placeholder:"Search",disabled:"",type:"text"},ut={class:"col-md-6"},mt=["onUpdate:modelValue"],pt=["value"],ht={class:"col-md-6 mt-3"},vt=["onUpdate:modelValue"],bt=["value"],yt={class:"dropdown"},ft={class:"dropdown-menu dropdown-menu-end shadow rounded-4 py-2"},gt={class:"table-responsive"},_t={class:"table table-hover align-middle mb-0"},wt={key:0},xt={class:"d-flex justify-content-center align-items-center gap-2"},Ct=["onClick"],Tt=["onClick"],It=["onClick"],$t=["onClick"],kt=["onClick"],Dt={key:0},Ot={__name:"Index",setup(St){const{dateFmt:Q}=we(),f=u([]),$=u(!1),G=async()=>{$.value=!0;try{const a=await axios.get("/api/kots/all-orders");console.log("Fetched KOT Orders:",a.data.data),f.value=(a.data.data||[]).map(e=>{const s=e.pos_order_type?.order,o=s?.items||[];return{id:s?.id||e.id,created_at:s?.created_at||e.created_at,customer_name:s?.customer_name||"Walk In",total_amount:s?.total_amount||0,sub_total:s?.sub_total||0,status:e.status||"Waiting",type:{order_type:e.pos_order_type?.order_type,table_number:e.pos_order_type?.table_number},payment:s?.payment,items:(e.items||[]).map(r=>{const d=o.find(l=>l.title===r.item_name||l.product_id===r.product_id);return{...r,title:r.item_name,price:d?.price||0,quantity:r.quantity||1,variant_name:r.variant_name||"-",item_kitchen_note:r.item_kitchen_note||"",ingredients:r.ingredients||[]}}),orderIndex:e.id}})}catch(a){console.error("Error fetching orders:",a),f.value=[]}finally{$.value=!1}};z(async()=>{w.value="",V.value=Date.now(),await ve(),setTimeout(()=>{L.value=!0;const e=document.getElementById(S);e&&(e.value="",w.value="")},100),G();const a=document.getElementById("kotFilterModal");a&&a.addEventListener("hidden.bs.modal",()=>{i.value={sortBy:g.value.sortBy||"",orderType:g.value.orderType||"",status:g.value.status||"",dateFrom:g.value.dateFrom||"",dateTo:g.value.dateTo||""}})});const w=u(""),V=u(Date.now()),S=`search-${Math.random().toString(36).substr(2,9)}`,L=u(!1),i=u({sortBy:"",orderType:"",status:"",dateFrom:"",dateTo:""}),g=u({sortBy:"",orderType:"",status:"",dateFrom:"",dateTo:""});u("All"),u("All"),u(["All","Eat In","Delivery","Takeaway","Collection"]),u(["All","Waiting","In Progress","Done","Cancelled"]);const b=v(()=>!f.value||f.value.length===0?[]:f.value.flatMap((e,s)=>e.items?.map((o,r)=>({...o,status:o.status,orderIndex:s,order:e,uniqueId:`${e.id}-${r}`}))||[])),B=v(()=>{const a=w.value.trim().toLowerCase();let e=[...b.value];return a&&(e=e.filter(s=>[String(s.order?.id),s.item_name??"",s.variant_name??"",s.ingredients?.join(", ")??"",s.status??""].join(" ").toLowerCase().includes(a))),i.value.orderType&&(e=e.filter(s=>(s.order?.type?.order_type??"").toLowerCase()===i.value.orderType.toLowerCase())),i.value.status&&(e=e.filter(s=>s.status?.toLowerCase()===i.value.status.toLowerCase())),i.value.dateFrom&&(e=e.filter(s=>{const o=new Date(s.order?.created_at),r=new Date(i.value.dateFrom);return o>=r})),i.value.dateTo&&(e=e.filter(s=>{const o=new Date(s.order?.created_at),r=new Date(i.value.dateTo);return r.setHours(23,59,59,999),o<=r})),e}),J=a=>{i.value={...i.value,...a},g.value={...i.value},console.log("Filters applied:",i.value)},Z=()=>{i.value={sortBy:"",orderType:"",status:"",dateFrom:"",dateTo:""},g.value={sortBy:"",orderType:"",status:"",dateFrom:"",dateTo:""},console.log("Filters cleared")},A=v(()=>{const a=[...B.value];switch(i.value.sortBy){case"date_desc":return a.sort((s,o)=>new Date(o.order?.created_at)-new Date(s.order?.created_at));case"date_asc":return a.sort((s,o)=>new Date(s.order?.created_at)-new Date(o.order?.created_at));case"item_asc":return a.sort((s,o)=>(s.item_name||"").localeCompare(o.item_name||""));case"item_desc":return a.sort((s,o)=>(o.item_name||"").localeCompare(s.item_name||""));case"order_asc":return a.sort((s,o)=>(s.order?.id||0)-(o.order?.id||0));case"order_desc":return a.sort((s,o)=>(o.order?.id||0)-(s.order?.id||0));default:return a.sort((s,o)=>new Date(o.order?.created_at)-new Date(s.order?.created_at))}}),F=v(()=>({sortOptions:[{value:"item_asc",label:"Item: A to Z"},{value:"item_desc",label:"Item: Z to A"},{value:"order_asc",label:"Order ID: Low to High"},{value:"order_desc",label:"Order ID: High to Low"}],orderTypeOptions:[{value:"Eat In",label:"Eat In"},{value:"Delivery",label:"Delivery"},{value:"Takeaway",label:"Takeaway"},{value:"Collection",label:"Collection"}],statusOptions:[{value:"Waiting",label:"Waiting"},{value:"In Progress",label:"In Progress"},{value:"Done",label:"Done"},{value:"Cancelled",label:"Cancelled"}]})),Y=v(()=>new Set(f.value.map(e=>e.type?.table_number).filter(e=>e)).size),ee=v(()=>b.value.length),te=v(()=>b.value.filter(a=>a.status==="Waiting").length),se=v(()=>b.value.filter(a=>a.status==="In Progress").length),ae=v(()=>b.value.filter(a=>a.status==="Done").length),oe=v(()=>b.value.filter(a=>a.status==="Cancelled").length),re=a=>{switch(a){case"Done":return"bg-success";case"Cancelled":return"bg-danger";case"Waiting":return"bg-warning text-dark";case"In Progress":return"bg-info text-white";default:return"bg-secondary"}},k=async(a,e)=>{try{const s=await axios.put(`/api/pos/kot-item/${a.id}/status`,{status:e}),o=f.value.find(r=>r.id===a.order.id);if(o&&o.items){const r=o.items.find(d=>d.id===a.id);if(r){r.status=s.data.status||e;const d=o.items.map(n=>n.status),l=[...new Set(d)];l.length===1?o.status=l[0]:d.includes("In Progress")?o.status="In Progress":d.every(n=>n==="Done"||n==="Cancelled")?o.status="Done":o.status="Waiting",o.items=[...o.items]}}h.success(`"${a.item_name}" marked as ${e}`)}catch(s){console.error("Failed to update KOT item status:",s),h.error(s.response?.data?.message||"Failed to update status")}},ne=a=>{const e=JSON.parse(JSON.stringify(a)),s=e?.customer_name||"Walk-in Customer",o=e?.type?.order_type||"Eat In",r=e?.type?.table_number,d=e?.payment,l=e?.items||[],n=l.reduce((x,O)=>x+Number(O.price||0)*Number(O.quantity||0),0),N=e?.total_amount||n,q=e?.created_at?new Date(e.created_at):new Date,ce=q.toISOString().split("T")[0],ue=q.toTimeString().split(" ")[0],P=(d?.payment_method||"cash").toLowerCase();let D="";P==="split"?D=`Payment Type: Split (Cash: £${Number(d?.cash_amount??0).toFixed(2)}, Card: £${Number(d?.card_amount??0).toFixed(2)})`:P==="card"||P==="stripe"?D=`Payment Type: Card${d?.card_brand?` (${d.card_brand}`:""}${d?.last4?` •••• ${d.last4}`:""}${d?.card_brand?")":""}`:D=`Payment Type: ${d?.payment_method||"Cash"}`;const me=`
    <html>
    <head>
      <title>Kitchen Order Ticket</title>
      <style>
        @page { size: 80mm auto; margin: 0; }
        html, body {
          width: 80mm;
          margin: 0;
          padding: 8px;
          font-family: monospace, Arial, sans-serif;
          font-size: 12px;
          line-height: 1.4;
        }
        .header { text-align: center; margin-bottom: 10px; }
        .order-info { margin: 10px 0; }
        .order-info div { margin-bottom: 3px; }
        .payment-info { margin-top: 8px; margin-bottom: 8px; }
        table { width: 100%; border-collapse: collapse; margin: 10px 0; }
        th, td { padding: 4px 0; text-align: left; }
        th { border-bottom: 1px solid #000; }
        td:last-child, th:last-child { text-align: right; }
        .totals { margin-top: 10px; border-top: 1px dashed #000; padding-top: 8px; }
        .footer { text-align: center; margin-top: 10px; font-size: 11px; }
      </style>
    </head>
    <body>
      <div class="header">
        <h2>KITCHEN ORDER TICKET</h2>
      </div>
      
      <div class="order-info">
        <div>KOT ID: #${e.id}</div>
        <div>Date: ${ce}</div>
        <div>Time: ${ue}</div>
        <div>Customer: ${s}</div>
        <div>Order Type: ${o}</div>
        ${r?`<div>Table: ${r}</div>`:""}
        
        <div class="payment-info">
          <div>${D}</div>
        </div>
        
        <div>Status: ${e.status}</div>
      </div>

      <table>
        <thead>
          <tr>
            <th>Item</th>
            <th>Qty</th>
            <th>Price</th>
          </tr>
        </thead>
        <tbody>
         ${l.map(x=>{const O=Number(x.quantity)||1,pe=Number(x.price)||0;return`
      <tr>
        <td>${x.title||x.item_name||"Unknown Item"}</td>
        <td>${O}</td>
        <td>£${pe.toFixed(2)}</td>
      </tr>
    `}).join("")}
        </tbody>
      </table>

      <div class="totals">
        <div>Subtotal: £${Number(n).toFixed(2)}</div>
        <div>Total: £${Number(N).toFixed(2)}</div>
        ${d?.cash_received?`<div>Cash Received: £${Number(d.cash_received).toFixed(2)}</div>`:""}
        ${d?.change?`<div>Change: £${Number(d.change).toFixed(2)}</div>`:""}
      </div>

      <div class="footer">
        Kitchen Copy - Thank you!
      </div>
    </body>
    </html>
  `,_=window.open("","_blank","width=400,height=600");if(!_){alert("Please allow popups for this site to print KOT");return}_.document.open(),_.document.write(me),_.document.close(),_.onload=()=>{_.print(),_.close()}},M=u([]),W=u(!1);z(async()=>{W.value=!0;try{const a=await axios.get("/api/printers");console.log("Printers:",a.data.data),M.value=a.data.data.filter(e=>e.is_connected===!0||e.status==="OK").map(e=>({label:`${e.name}`,value:e.name,driver:e.driver,port:e.port}))}catch(a){console.error("Failed to fetch printers:",a)}finally{W.value=!1}});const j=a=>{if(!b.value||b.value.length===0){h.error("No kitchen orders data to download");return}const e=w.value.trim()?A.value:b.value;if(e.length===0){h.error("No kitchen orders found to download");return}try{a==="pdf"?de(e):a==="excel"?ie(e):a==="csv"?le(e):h.error("Invalid download type")}catch(s){console.error("Download failed:",s),h.error(`Download failed: ${s.message}`)}},le=a=>{try{const e=["Order ID","Item Name","Variant","Quantity","Order Type","Table Number","Ingredients","Status","Customer","Date"],s=a.map(n=>[`"${n.order?.id||""}"`,`"${n.item_name||""}"`,`"${n.variant_name||"-"}"`,`"${n.quantity||1}"`,`"${n.order?.type?.order_type||"-"}"`,`"${n.order?.type?.table_number||"-"}"`,`"${n.ingredients?.join(", ")||"-"}"`,`"${n.status||""}"`,`"${n.order?.customer_name||"Walk In"}"`,`"${n.order?.created_at?Q(n.order.created_at):""}"`]),o=[e.join(","),...s.map(n=>n.join(","))].join(`
`),r=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(r),l=document.createElement("a");l.setAttribute("href",d),l.setAttribute("download",`Kitchen_Orders_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(l),l.click(),document.body.removeChild(l),h.success("CSV downloaded successfully")}catch(e){console.error("CSV generation error:",e),h.error(`CSV generation failed: ${e.message}`)}},de=a=>{try{const e=new Ce("l","mm","a4");e.setFontSize(18),e.setFont("helvetica","bold"),e.text("Kitchen Orders Report",14,20),e.setFontSize(10),e.setFont("helvetica","normal");const s=new Date().toLocaleString();e.text(`Generated on: ${s}`,14,28),e.text(`Total Items: ${a.length}`,14,34);const o=["Order ID","Item","Variant","Qty","Type","Table","Status","Customer"],r=a.map(l=>[l.order?.id||"",l.item_name||"",l.variant_name||"-",l.quantity||1,l.order?.type?.order_type||"-",l.order?.type?.table_number||"-",l.status||"",l.order?.customer_name||"Walk In"]);Te(e,{head:[o],body:r,startY:40,styles:{fontSize:8,cellPadding:2,halign:"left",lineColor:[0,0,0],lineWidth:.1},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:14,right:14},didDrawPage:l=>{const n=e.internal.getNumberOfPages(),N=e.internal.pageSize.height;e.setFontSize(8),e.text(`Page ${l.pageNumber} of ${n}`,l.settings.margin.left,N-10)}});const d=`Kitchen_Orders_${new Date().toISOString().split("T")[0]}.pdf`;e.save(d),h.success("PDF downloaded successfully")}catch(e){console.error("PDF generation error:",e),h.error(`PDF generation failed: ${e.message}`)}},ie=a=>{try{if(typeof Ie>"u")throw new Error("XLSX library is not loaded");const e=a.map(n=>({"Order ID":n.order?.id||"","Item Name":n.item_name||"",Variant:n.variant_name||"-",Quantity:n.quantity||1,"Order Type":n.order?.type?.order_type||"-","Table Number":n.order?.type?.table_number||"-",Ingredients:n.ingredients?.join(", ")||"-",Status:n.status||"",Customer:n.order?.customer_name||"Walk In",Date:n.order?.created_at||""})),s=I.book_new(),o=I.json_to_sheet(e);o["!cols"]=[{wch:10},{wch:25},{wch:15},{wch:8},{wch:12},{wch:12},{wch:30},{wch:10},{wch:20},{wch:10},{wch:18}],I.book_append_sheet(s,o,"Kitchen Orders");const r=[{Info:"Generated On",Value:new Date().toLocaleString()},{Info:"Total Items",Value:a.length},{Info:"Exported By",Value:"Kitchen Management System"}],d=I.json_to_sheet(r);I.book_append_sheet(s,d,"Report Info");const l=`Kitchen_Orders_${new Date().toISOString().split("T")[0]}.xlsx`;$e(s,l),h.success("Excel file downloaded successfully")}catch(e){console.error("Excel generation error:",e),h.error(`Excel generation failed: ${e.message}`)}};return(a,e)=>(p(),m(T,null,[y(C(be),{title:"Kitchen Orders"}),y(_e,null,{default:R(()=>[t("div",Ne,[e[29]||(e[29]=t("h4",{class:"fw-semibold mb-3"},"Kitchen Order Tickets",-1)),t("div",Pe,[t("div",Ee,[t("div",Ke,[t("div",Ve,[t("div",null,[t("h3",Le,c(Y.value),1),e[6]||(e[6]=t("p",{class:"text-muted mb-0 small"},"Total Tables",-1))]),e[7]||(e[7]=t("div",{class:"rounded-circle p-3 bg-primary-subtle text-primary d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[t("i",{class:"bi bi-table fs-4"})],-1))])])]),t("div",Be,[t("div",Ae,[t("div",Me,[t("div",null,[t("h3",We,c(ee.value),1),e[8]||(e[8]=t("p",{class:"text-muted mb-0 small"},"Total Items",-1))]),e[9]||(e[9]=t("div",{class:"rounded-circle p-3 bg-success-subtle text-success d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[t("i",{class:"bi bi-basket fs-4"})],-1))])])]),t("div",qe,[t("div",ze,[t("div",Re,[t("div",null,[t("h3",Ue,c(te.value),1),e[10]||(e[10]=t("p",{class:"text-muted mb-0 small"},"Pending Items",-1))]),e[11]||(e[11]=t("div",{class:"rounded-circle p-3 bg-warning-subtle text-warning d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[t("i",{class:"bi bi-hourglass-split fs-4"})],-1))])])]),t("div",Xe,[t("div",He,[t("div",Qe,[t("div",null,[t("h3",Ge,c(se.value),1),e[12]||(e[12]=t("p",{class:"text-muted mb-0 small"},"In Progress",-1))]),e[13]||(e[13]=t("div",{class:"rounded-circle p-3 bg-info-subtle text-info d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[t("i",{class:"bi bi-gear fs-4"})],-1))])])]),t("div",Je,[t("div",Ze,[t("div",Ye,[t("div",null,[t("h3",et,c(ae.value),1),e[14]||(e[14]=t("p",{class:"text-muted mb-0 small"},"Completed Items",-1))]),e[15]||(e[15]=t("div",{class:"rounded-circle p-3 bg-success-subtle text-success d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[t("i",{class:"bi bi-check-circle fs-4"})],-1))])])]),t("div",tt,[t("div",st,[t("div",at,[t("div",null,[t("h3",ot,c(oe.value),1),e[16]||(e[16]=t("p",{class:"text-muted mb-0 small"},"Cancelled Items",-1))]),e[17]||(e[17]=t("div",{class:"rounded-circle p-3 bg-danger-subtle text-danger d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[t("i",{class:"bi bi-x-circle fs-4"})],-1))])])])]),t("div",rt,[t("div",nt,[t("div",lt,[e[25]||(e[25]=t("h5",{class:"mb-0 fw-semibold"},"Kitchen Orders",-1)),t("div",dt,[t("div",it,[e[18]||(e[18]=t("i",{class:"bi bi-search"},null,-1)),e[19]||(e[19]=t("input",{type:"email",name:"email",autocomplete:"email",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px"},tabindex:"-1","aria-hidden":"true"},null,-1)),L.value?E((p(),m("input",{id:S,"onUpdate:modelValue":e[0]||(e[0]=s=>w.value=s),key:V.value,class:"form-control search-input",placeholder:"Search",type:"search",autocomplete:"new-password",name:S,role:"presentation",onFocus:e[1]||(e[1]=(...s)=>a.handleFocus&&a.handleFocus(...s))},null,32)),[[ye,w.value]]):(p(),m("input",ct))]),y(xe,{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=s=>i.value=s),title:"Kitchen Orders","modal-id":"kotFilterModal","modal-size":"modal-lg","sort-options":F.value.sortOptions,"show-date-range":!0,onApply:J,showDateRange:!1,"show-stock-status":!1,onClear:Z},{customFilters:R(({filters:s})=>[t("div",ut,[e[21]||(e[21]=t("label",{class:"form-label fw-semibold text-dark"},[t("i",{class:"fas fa-concierge-bell me-2 text-muted"}),U("Order Type ")],-1)),E(t("select",{"onUpdate:modelValue":o=>s.orderType=o,class:"form-select"},[e[20]||(e[20]=t("option",{value:""},"All",-1)),(p(!0),m(T,null,K(F.value.orderTypeOptions,o=>(p(),m("option",{key:o.value,value:o.value},c(o.label),9,pt))),128))],8,mt),[[X,s.orderType]])]),t("div",ht,[e[23]||(e[23]=t("label",{class:"form-label fw-semibold text-dark"},[t("i",{class:"fas fa-tasks me-2 text-muted"}),U("Order Status ")],-1)),E(t("select",{"onUpdate:modelValue":o=>s.status=o,class:"form-select"},[e[22]||(e[22]=t("option",{value:""},"All",-1)),(p(!0),m(T,null,K(F.value.statusOptions,o=>(p(),m("option",{key:o.value,value:o.value},c(o.label),9,bt))),128))],8,vt),[[X,s.status]])])]),_:1},8,["modelValue","sort-options"]),t("div",yt,[e[24]||(e[24]=t("button",{class:"btn btn-outline-secondary rounded-pill px-4 dropdown-toggle","data-bs-toggle":"dropdown"}," Export ",-1)),t("ul",ft,[t("li",null,[t("a",{class:"dropdown-item py-2",href:"javascript:;",onClick:e[3]||(e[3]=s=>j("pdf"))}," Export as PDF ")]),t("li",null,[t("a",{class:"dropdown-item py-2",href:"javascript:;",onClick:e[4]||(e[4]=s=>j("excel"))}," Export as Excel ")]),t("li",null,[t("a",{class:"dropdown-item py-2",href:"javascript:;",onClick:e[5]||(e[5]=s=>j("csv"))}," Export as CSV ")])])])])]),t("div",gt,[t("table",_t,[e[28]||(e[28]=t("thead",{class:"border-top small text-muted"},[t("tr",null,[t("th",null,"#"),t("th",null,"Order ID"),t("th",null,"Item Name"),t("th",null,"Kitchen Note"),t("th",null,"Variant"),t("th",null,"Order Type"),t("th",null,"Ingredients"),t("th",null,"Status"),t("th",{class:"text-center"},"Actions")])],-1)),t("tbody",null,[$.value?(p(),m("tr",wt,[...e[26]||(e[26]=[t("td",{colspan:"11",class:"text-center py-5"},[t("div",{class:"d-flex flex-column align-items-center justify-content-center"},[t("div",{class:"spinner-border mb-3",role:"status",style:{color:"#1B1670",width:"3rem",height:"3rem","border-width":"0.3em"}},[t("span",{class:"visually-hidden"},"Loading...")]),t("div",{class:"fw-semibold text-muted"},"Loading KOT orders...")])],-1)])])):(p(),m(T,{key:1},[(p(!0),m(T,null,K(A.value,(s,o)=>(p(),m("tr",{key:s.uniqueId||o},[t("td",null,c(o+1),1),t("td",null,c(s.order?.id),1),t("td",null,c(s.item_name),1),t("td",null,c(s?.item_kitchen_note||"-"),1),t("td",null,c(s.variant_name),1),t("td",null,c(s.order?.type?.order_type||"-"),1),t("td",null,c(s.ingredients?.join(", ")||"-"),1),t("td",null,[t("span",{class:fe(["badge","rounded-pill",re(s.status)]),style:{width:"80px",display:"inline-flex","justify-content":"center","align-items":"center",height:"25px"}},c(s.status),3)]),t("td",null,[t("div",xt,[t("button",{onClick:r=>k(s,"Waiting"),title:"Waiting",class:"p-2 rounded-full text-warning hover:bg-gray-100"},[y(C(ke),{class:"w-5 h-5"})],8,Ct),t("button",{onClick:r=>k(s,"In Progress"),title:"In Progress",class:"p-2 rounded-full text-info hover:bg-gray-100"},[y(C(je),{class:"w-5 h-5"})],8,Tt),t("button",{onClick:r=>k(s,"Done"),title:"Done",class:"p-2 rounded-full text-success hover:bg-gray-100"},[y(C(Oe),{class:"w-5 h-5"})],8,It),t("button",{onClick:r=>k(s,"Cancelled"),title:"Cancelled",class:"p-2 rounded-full text-danger hover:bg-gray-100"},[y(C(Se),{class:"w-5 h-5"})],8,$t),M.value.length>0?(p(),m("button",{key:0,class:"p-2 rounded-full text-gray-600 hover:bg-gray-100",onClick:ge(r=>ne(s.order),["prevent"]),title:"Print"},[y(C(Fe),{class:"w-5 h-5"})],8,kt)):H("",!0)])])]))),128)),!$.value&&B.value.length===0?(p(),m("tr",Dt,[...e[27]||(e[27]=[t("td",{colspan:"8",class:"text-center text-muted py-4"}," No KOT Order found. ",-1)])])):H("",!0)],64))])])])])])])]),_:1})],64))}},Xt=he(Ot,[["__scopeId","data-v-42fcac5c"]]);export{Xt as default};
