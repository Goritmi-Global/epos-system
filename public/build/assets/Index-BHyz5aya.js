import{g as O,b as x,f as c,a3 as Et,a0 as nl,a as dn,H as hi,d as Rt,m as pt,l as j,k as gr,ae as Hr,V as Hb,j as st,a6 as Ub,aS as uf,ag as Vb,a4 as zb,E as Ru,F as He,i as mt,e as it,t as $,b5 as Fa,w as Wi,c as ge,p as he,_ as Kb,A as Gb,o as xs,n as Mu,r as W,z as Yb,s as U,u as ue,h as jb,v as mr,y as Bi,K as Lo,T as Qb}from"./app-DR8KNMKR.js";import{_ as Xb}from"./Master-CDAihGCm.js";import cf from"./ConfirmOrderModal-BEY991ew.js";import Zb from"./ReceiptModal-C6bcht4C.js";import Jb from"./PromoModal-eistzN0N.js";import ey from"./KotModal-Dyzz5EHY.js";import{u as ty}from"./useFormatters-DMXCh6bx.js";import ny from"./PosOrdersModal-BJaIfWI7.js";import{F as ry}from"./FilterModal-DzeDwtIr.js";import{s as iy}from"./index-Dm8EA-HL.js";import{a as sy,s as rl,f as oy}from"./index-D1-aYu0b.js";import{s as ay}from"./index-nqZoyhBR.js";import{R as ly}from"./index-YIqX59W4.js";import{u as uy}from"./useModal-vDbn_8lj.js";import cy from"./DiscountModal-BqnCvuTv.js";import dy from"./PendingOrdersModal-4nxsJsC8.js";import{P as df}from"./pencil-CB6eqCn5.js";import{E as fy}from"./eye-BCYcq801.js";import"./index-CLKGagE0.js";import"./createLucideIcon-B2WAtkKL.js";import"./PasswordVerificationModal-CwsPs3Zr.js";import"./sun-g0Zz1s9o.js";import"./StripePayment-CBYaks-d.js";import"./SplitPayment-DOec7cXC.js";import"./Receipt-BI0lFC75.js";import"./clock-DMji8z0I.js";import"./circle-check-big-DIF_bqOp.js";import"./circle-x-CO4bKBgL.js";import"./printer-DO8f7zQU.js";var lc={name:"ChevronUpIcon",extends:sy};function py(a){return my(a)||_y(a)||vy(a)||hy()}function hy(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vy(a,n){if(a){if(typeof a=="string")return ec(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ec(a,n):void 0}}function _y(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function my(a){if(Array.isArray(a))return ec(a)}function ec(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,f=Array(n);r<n;r++)f[r]=a[r];return f}function gy(a,n,r,f,v,g){return x(),O("svg",Et({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.pti()),py(n[0]||(n[0]=[c("path",{d:"M12.2097 10.4113C12.1057 10.4118 12.0027 10.3915 11.9067 10.3516C11.8107 10.3118 11.7237 10.2532 11.6506 10.1792L6.93602 5.46461L2.22139 10.1476C2.07272 10.244 1.89599 10.2877 1.71953 10.2717C1.54307 10.2556 1.3771 10.1808 1.24822 10.0593C1.11933 9.93766 1.035 9.77633 1.00874 9.6011C0.982477 9.42587 1.0158 9.2469 1.10338 9.09287L6.37701 3.81923C6.52533 3.6711 6.72639 3.58789 6.93602 3.58789C7.14565 3.58789 7.3467 3.6711 7.49502 3.81923L12.7687 9.09287C12.9168 9.24119 13 9.44225 13 9.65187C13 9.8615 12.9168 10.0626 12.7687 10.2109C12.616 10.3487 12.4151 10.4207 12.2097 10.4113Z",fill:"currentColor"},null,-1)])),16)}lc.render=gy;var by={root:"p-accordioncontent",content:"p-accordioncontent-content"},yy=nl.extend({name:"accordioncontent",classes:by}),wy={name:"BaseAccordionContent",extends:rl,props:{as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1}},style:yy,provide:function(){return{$pcAccordionContent:this,$parentInstance:this}}},ja={name:"AccordionContent",extends:wy,inheritAttrs:!1,inject:["$pcAccordion","$pcAccordionPanel"],computed:{id:function(){return"".concat(this.$pcAccordion.$id,"_accordioncontent_").concat(this.$pcAccordionPanel.value)},ariaLabelledby:function(){return"".concat(this.$pcAccordion.$id,"_accordionheader_").concat(this.$pcAccordionPanel.value)},attrs:function(){return Et(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){return{id:this.id,role:"region","aria-labelledby":this.ariaLabelledby,"data-pc-name":"accordioncontent","data-p-active":this.$pcAccordionPanel.active}},ptParams:function(){return{context:{active:this.$pcAccordionPanel.active}}}}};function Ey(a,n,r,f,v,g){return a.asChild?hi(a.$slots,"default",{key:1,class:st(a.cx("root")),active:g.$pcAccordionPanel.active,a11yAttrs:g.a11yAttrs}):(x(),dn(Hb,Et({key:0,name:"p-toggleable-content"},a.ptm("transition",g.ptParams)),{default:Rt(function(){return[!g.$pcAccordion.lazy||g.$pcAccordionPanel.active?pt((x(),dn(gr(a.as),Et({key:0,class:a.cx("root")},g.attrs),{default:Rt(function(){return[c("div",Et({class:a.cx("content")},a.ptm("content",g.ptParams)),[hi(a.$slots,"default")],16)]}),_:3},16,["class"])),[[Hr,g.$pcAccordion.lazy?!0:g.$pcAccordionPanel.active]]):j("",!0)]}),_:3},16))}ja.render=Ey;var Ay={root:"p-accordionheader",toggleicon:"p-accordionheader-toggle-icon"},xy=nl.extend({name:"accordionheader",classes:Ay}),Cy={name:"BaseAccordionHeader",extends:rl,props:{as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:xy,provide:function(){return{$pcAccordionHeader:this,$parentInstance:this}}},Qa={name:"AccordionHeader",extends:Cy,inheritAttrs:!1,inject:["$pcAccordion","$pcAccordionPanel"],methods:{onFocus:function(){this.$pcAccordion.selectOnFocus&&this.changeActiveValue()},onClick:function(){!this.$pcAccordion.selectOnFocus&&this.changeActiveValue()},onKeydown:function(n){switch(n.code){case"ArrowDown":this.onArrowDownKey(n);break;case"ArrowUp":this.onArrowUpKey(n);break;case"Home":this.onHomeKey(n);break;case"End":this.onEndKey(n);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(n);break}},onArrowDownKey:function(n){var r=this.findNextPanel(this.findPanel(n.currentTarget));r?this.changeFocusedPanel(n,r):this.onHomeKey(n),n.preventDefault()},onArrowUpKey:function(n){var r=this.findPrevPanel(this.findPanel(n.currentTarget));r?this.changeFocusedPanel(n,r):this.onEndKey(n),n.preventDefault()},onHomeKey:function(n){var r=this.findFirstPanel();this.changeFocusedPanel(n,r),n.preventDefault()},onEndKey:function(n){var r=this.findLastPanel();this.changeFocusedPanel(n,r),n.preventDefault()},onEnterKey:function(n){this.changeActiveValue(),n.preventDefault()},findPanel:function(n){return n?.closest('[data-pc-name="accordionpanel"]')},findHeader:function(n){return Vb(n,'[data-pc-name="accordionheader"]')},findNextPanel:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=r?n:n.nextElementSibling;return f?uf(f,"data-p-disabled")?this.findNextPanel(f):this.findHeader(f):null},findPrevPanel:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=r?n:n.previousElementSibling;return f?uf(f,"data-p-disabled")?this.findPrevPanel(f):this.findHeader(f):null},findFirstPanel:function(){return this.findNextPanel(this.$pcAccordion.$el.firstElementChild,!0)},findLastPanel:function(){return this.findPrevPanel(this.$pcAccordion.$el.lastElementChild,!0)},changeActiveValue:function(){this.$pcAccordion.updateValue(this.$pcAccordionPanel.value)},changeFocusedPanel:function(n,r){Ub(this.findHeader(r))}},computed:{id:function(){return"".concat(this.$pcAccordion.$id,"_accordionheader_").concat(this.$pcAccordionPanel.value)},ariaControls:function(){return"".concat(this.$pcAccordion.$id,"_accordioncontent_").concat(this.$pcAccordionPanel.value)},attrs:function(){return Et(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.$pcAccordionPanel.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.$pcAccordion.tabindex,"aria-expanded":this.$pcAccordionPanel.active,"aria-controls":this.ariaControls,"data-pc-name":"accordionheader","data-p-disabled":this.$pcAccordionPanel.disabled,"data-p-active":this.$pcAccordionPanel.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.$pcAccordionPanel.active}}},dataP:function(){return oy({active:this.$pcAccordionPanel.active})}},components:{ChevronUpIcon:lc,ChevronDownIcon:ay},directives:{ripple:ly}};function Ty(a,n,r,f,v,g){var w=zb("ripple");return a.asChild?hi(a.$slots,"default",{key:1,class:st(a.cx("root")),active:g.$pcAccordionPanel.active,a11yAttrs:g.a11yAttrs,onClick:g.onClick}):pt((x(),dn(gr(a.as),Et({key:0,"data-p":g.dataP,class:a.cx("root"),onClick:g.onClick},g.attrs),{default:Rt(function(){return[hi(a.$slots,"default",{active:g.$pcAccordionPanel.active}),hi(a.$slots,"toggleicon",{active:g.$pcAccordionPanel.active,class:st(a.cx("toggleicon"))},function(){return[g.$pcAccordionPanel.active?(x(),dn(gr(g.$pcAccordion.$slots.collapseicon?g.$pcAccordion.$slots.collapseicon:g.$pcAccordion.collapseIcon?"span":"ChevronUpIcon"),Et({key:0,class:[g.$pcAccordion.collapseIcon,a.cx("toggleicon")],"aria-hidden":"true"},a.ptm("toggleicon",g.ptParams)),null,16,["class"])):(x(),dn(gr(g.$pcAccordion.$slots.expandicon?g.$pcAccordion.$slots.expandicon:g.$pcAccordion.expandIcon?"span":"ChevronDownIcon"),Et({key:1,class:[g.$pcAccordion.expandIcon,a.cx("toggleicon")],"aria-hidden":"true"},a.ptm("toggleicon",g.ptParams)),null,16,["class"]))]})]}),_:3},16,["data-p","class","onClick"])),[[w]])}Qa.render=Ty;var Sy={root:function(n){var r=n.instance,f=n.props;return["p-accordionpanel",{"p-accordionpanel-active":r.active,"p-disabled":f.disabled}]}},Iy=nl.extend({name:"accordionpanel",classes:Sy}),Oy={name:"BaseAccordionPanel",extends:rl,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1}},style:Iy,provide:function(){return{$pcAccordionPanel:this,$parentInstance:this}}},Xa={name:"AccordionPanel",extends:Oy,inheritAttrs:!1,inject:["$pcAccordion"],computed:{active:function(){return this.$pcAccordion.isItemActive(this.value)},attrs:function(){return Et(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){return{"data-pc-name":"accordionpanel","data-p-disabled":this.disabled,"data-p-active":this.active}},ptParams:function(){return{context:{active:this.active}}}}};function ky(a,n,r,f,v,g){return a.asChild?hi(a.$slots,"default",{key:1,class:st(a.cx("root")),active:g.active,a11yAttrs:g.a11yAttrs}):(x(),dn(gr(a.as),Et({key:0,class:a.cx("root")},g.attrs),{default:Rt(function(){return[hi(a.$slots,"default")]}),_:3},16,["class"]))}Xa.render=ky;var Dy=`
    .p-accordionpanel {
        display: flex;
        flex-direction: column;
        border-style: solid;
        border-width: dt('accordion.panel.border.width');
        border-color: dt('accordion.panel.border.color');
    }

    .p-accordionheader {
        all: unset;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: dt('accordion.header.padding');
        color: dt('accordion.header.color');
        background: dt('accordion.header.background');
        border-style: solid;
        border-width: dt('accordion.header.border.width');
        border-color: dt('accordion.header.border.color');
        font-weight: dt('accordion.header.font.weight');
        border-radius: dt('accordion.header.border.radius');
        transition:
            background dt('accordion.transition.duration'),
            color dt('accordion.transition.duration'),
            outline-color dt('accordion.transition.duration'),
            box-shadow dt('accordion.transition.duration');
        outline-color: transparent;
    }

    .p-accordionpanel:first-child > .p-accordionheader {
        border-width: dt('accordion.header.first.border.width');
        border-start-start-radius: dt('accordion.header.first.top.border.radius');
        border-start-end-radius: dt('accordion.header.first.top.border.radius');
    }

    .p-accordionpanel:last-child > .p-accordionheader {
        border-end-start-radius: dt('accordion.header.last.bottom.border.radius');
        border-end-end-radius: dt('accordion.header.last.bottom.border.radius');
    }

    .p-accordionpanel:last-child.p-accordionpanel-active > .p-accordionheader {
        border-end-start-radius: dt('accordion.header.last.active.bottom.border.radius');
        border-end-end-radius: dt('accordion.header.last.active.bottom.border.radius');
    }

    .p-accordionheader-toggle-icon {
        color: dt('accordion.header.toggle.icon.color');
    }

    .p-accordionpanel:not(.p-disabled) .p-accordionheader:focus-visible {
        box-shadow: dt('accordion.header.focus.ring.shadow');
        outline: dt('accordion.header.focus.ring.width') dt('accordion.header.focus.ring.style') dt('accordion.header.focus.ring.color');
        outline-offset: dt('accordion.header.focus.ring.offset');
    }

    .p-accordionpanel:not(.p-accordionpanel-active):not(.p-disabled) > .p-accordionheader:hover {
        background: dt('accordion.header.hover.background');
        color: dt('accordion.header.hover.color');
    }

    .p-accordionpanel:not(.p-accordionpanel-active):not(.p-disabled) .p-accordionheader:hover .p-accordionheader-toggle-icon {
        color: dt('accordion.header.toggle.icon.hover.color');
    }

    .p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader {
        background: dt('accordion.header.active.background');
        color: dt('accordion.header.active.color');
    }

    .p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader .p-accordionheader-toggle-icon {
        color: dt('accordion.header.toggle.icon.active.color');
    }

    .p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader:hover {
        background: dt('accordion.header.active.hover.background');
        color: dt('accordion.header.active.hover.color');
    }

    .p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader:hover .p-accordionheader-toggle-icon {
        color: dt('accordion.header.toggle.icon.active.hover.color');
    }

    .p-accordioncontent-content {
        border-style: solid;
        border-width: dt('accordion.content.border.width');
        border-color: dt('accordion.content.border.color');
        background-color: dt('accordion.content.background');
        color: dt('accordion.content.color');
        padding: dt('accordion.content.padding');
    }
`,Ny={root:"p-accordion p-component"},$y=nl.extend({name:"accordion",style:Dy,classes:Ny}),Py={name:"BaseAccordion",extends:rl,props:{value:{type:[String,Number,Array],default:void 0},multiple:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1},expandIcon:{type:String,default:void 0},collapseIcon:{type:String,default:void 0},activeIndex:{type:[Number,Array],default:null}},style:$y,provide:function(){return{$pcAccordion:this,$parentInstance:this}}},jf={name:"Accordion",extends:Py,inheritAttrs:!1,emits:["update:value","update:activeIndex","tab-open","tab-close","tab-click"],data:function(){return{d_value:this.value}},watch:{value:function(n){this.d_value=n},activeIndex:{immediate:!0,handler:function(n){this.hasAccordionTab&&(this.d_value=this.multiple?n?.map(String):n?.toString())}}},methods:{isItemActive:function(n){var r;return this.multiple?(r=this.d_value)===null||r===void 0?void 0:r.includes(n):this.d_value===n},updateValue:function(n){var r,f=this.isItemActive(n);this.multiple?f?this.d_value=this.d_value.filter(function(v){return v!==n}):this.d_value?this.d_value.push(n):this.d_value=[n]:this.d_value=f?null:n,this.$emit("update:value",this.d_value),this.$emit("update:activeIndex",this.multiple?(r=this.d_value)===null||r===void 0?void 0:r.map(Number):Number(this.d_value)),this.$emit(f?"tab-close":"tab-open",{originalEvent:void 0,index:Number(n)})},isAccordionTab:function(n){return n.type.name==="AccordionTab"},getTabProp:function(n,r){return n.props?n.props[r]:void 0},getKey:function(n,r){return this.getTabProp(n,"header")||r},getHeaderPT:function(n,r){var f=this;return{root:Et({onClick:function(g){return f.onTabClick(g,r)}},this.getTabProp(n,"headerProps"),this.getTabPT(n,"header",r)),toggleicon:Et(this.getTabProp(n,"headeractionprops"),this.getTabPT(n,"headeraction",r))}},getContentPT:function(n,r){return{root:Et(this.getTabProp(n,"contentProps"),this.getTabPT(n,"toggleablecontent",r)),transition:this.getTabPT(n,"transition",r),content:this.getTabPT(n,"content",r)}},getTabPT:function(n,r,f){var v=this.tabs.length,g={props:n.props||{},parent:{instance:this,props:this.$props,state:this.$data},context:{index:f,count:v,first:f===0,last:f===v-1,active:this.isItemActive("".concat(f))}};return Et(this.ptm("accordiontab.".concat(r),g),this.ptmo(this.getTabProp(n,"pt"),r,g))},onTabClick:function(n,r){this.$emit("tab-click",{originalEvent:n,index:r})}},computed:{tabs:function(){var n=this;return this.$slots.default().reduce(function(r,f){return n.isAccordionTab(f)?r.push(f):f.children&&f.children instanceof Array&&f.children.forEach(function(v){n.isAccordionTab(v)&&r.push(v)}),r},[])},hasAccordionTab:function(){return this.tabs.length}},components:{AccordionPanel:Xa,AccordionHeader:Qa,AccordionContent:ja,ChevronUpIcon:lc,ChevronRightIcon:iy}};function Ly(a,n,r,f,v,g){var w=Ru("AccordionHeader"),T=Ru("AccordionContent"),I=Ru("AccordionPanel");return x(),O("div",Et({class:a.cx("root")},a.ptmi("root")),[g.hasAccordionTab?(x(!0),O(He,{key:0},mt(g.tabs,function(q,N){return x(),dn(I,{key:g.getKey(q,N),value:"".concat(N),pt:{root:g.getTabPT(q,"root",N)},disabled:g.getTabProp(q,"disabled")},{default:Rt(function(){return[it(w,{class:st(g.getTabProp(q,"headerClass")),pt:g.getHeaderPT(q,N)},{toggleicon:Rt(function(H){return[H.active?(x(),dn(gr(a.$slots.collapseicon?a.$slots.collapseicon:a.collapseIcon?"span":"ChevronDownIcon"),Et({key:0,class:[a.collapseIcon,H.class],"aria-hidden":"true"},{ref_for:!0},g.getTabPT(q,"headericon",N)),null,16,["class"])):(x(),dn(gr(a.$slots.expandicon?a.$slots.expandicon:a.expandIcon?"span":"ChevronUpIcon"),Et({key:1,class:[a.expandIcon,H.class],"aria-hidden":"true"},{ref_for:!0},g.getTabPT(q,"headericon",N)),null,16,["class"]))]}),default:Rt(function(){return[q.children&&q.children.headericon?(x(),dn(gr(q.children.headericon),{key:0,isTabActive:g.isItemActive("".concat(N)),active:g.isItemActive("".concat(N)),index:N},null,8,["isTabActive","active","index"])):j("",!0),q.props&&q.props.header?(x(),O("span",Et({key:1,ref_for:!0},g.getTabPT(q,"headertitle",N)),$(q.props.header),17)):j("",!0),q.children&&q.children.header?(x(),dn(gr(q.children.header),{key:2})):j("",!0)]}),_:2},1032,["class","pt"]),it(T,{pt:g.getContentPT(q,N)},{default:Rt(function(){return[(x(),dn(gr(q)))]}),_:2},1032,["pt"])]}),_:2},1032,["value","pt","disabled"])}),128)):hi(a.$slots,"default",{key:1})],16)}jf.render=Ly;var Yt="top",bn="bottom",yn="right",jt="left",il="auto",Fs=[Yt,bn,yn,jt],zi="start",Ds="end",Qf="clippingParents",uc="viewport",Ss="popper",Xf="reference",tc=Fs.reduce(function(a,n){return a.concat([n+"-"+zi,n+"-"+Ds])},[]),cc=[].concat(Fs,[il]).reduce(function(a,n){return a.concat([n,n+"-"+zi,n+"-"+Ds])},[]),Zf="beforeRead",Jf="read",ep="afterRead",tp="beforeMain",np="main",rp="afterMain",ip="beforeWrite",sp="write",op="afterWrite",ap=[Zf,Jf,ep,tp,np,rp,ip,sp,op];function wr(a){return a?(a.nodeName||"").toLowerCase():null}function wn(a){if(a==null)return window;if(a.toString()!=="[object Window]"){var n=a.ownerDocument;return n&&n.defaultView||window}return a}function Ki(a){var n=wn(a).Element;return a instanceof n||a instanceof Element}function Dn(a){var n=wn(a).HTMLElement;return a instanceof n||a instanceof HTMLElement}function dc(a){if(typeof ShadowRoot>"u")return!1;var n=wn(a).ShadowRoot;return a instanceof n||a instanceof ShadowRoot}function Ry(a){var n=a.state;Object.keys(n.elements).forEach(function(r){var f=n.styles[r]||{},v=n.attributes[r]||{},g=n.elements[r];!Dn(g)||!wr(g)||(Object.assign(g.style,f),Object.keys(v).forEach(function(w){var T=v[w];T===!1?g.removeAttribute(w):g.setAttribute(w,T===!0?"":T)}))})}function My(a){var n=a.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow),function(){Object.keys(n.elements).forEach(function(f){var v=n.elements[f],g=n.attributes[f]||{},w=Object.keys(n.styles.hasOwnProperty(f)?n.styles[f]:r[f]),T=w.reduce(function(I,q){return I[q]="",I},{});!Dn(v)||!wr(v)||(Object.assign(v.style,T),Object.keys(g).forEach(function(I){v.removeAttribute(I)}))})}}const fc={name:"applyStyles",enabled:!0,phase:"write",fn:Ry,effect:My,requires:["computeStyles"]};function br(a){return a.split("-")[0]}var Vi=Math.max,Za=Math.min,Ns=Math.round;function nc(){var a=navigator.userAgentData;return a!=null&&a.brands&&Array.isArray(a.brands)?a.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function lp(){return!/^((?!chrome|android).)*safari/i.test(nc())}function $s(a,n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var f=a.getBoundingClientRect(),v=1,g=1;n&&Dn(a)&&(v=a.offsetWidth>0&&Ns(f.width)/a.offsetWidth||1,g=a.offsetHeight>0&&Ns(f.height)/a.offsetHeight||1);var w=Ki(a)?wn(a):window,T=w.visualViewport,I=!lp()&&r,q=(f.left+(I&&T?T.offsetLeft:0))/v,N=(f.top+(I&&T?T.offsetTop:0))/g,H=f.width/v,K=f.height/g;return{width:H,height:K,top:N,right:q+H,bottom:N+K,left:q,x:q,y:N}}function pc(a){var n=$s(a),r=a.offsetWidth,f=a.offsetHeight;return Math.abs(n.width-r)<=1&&(r=n.width),Math.abs(n.height-f)<=1&&(f=n.height),{x:a.offsetLeft,y:a.offsetTop,width:r,height:f}}function up(a,n){var r=n.getRootNode&&n.getRootNode();if(a.contains(n))return!0;if(r&&dc(r)){var f=n;do{if(f&&a.isSameNode(f))return!0;f=f.parentNode||f.host}while(f)}return!1}function zr(a){return wn(a).getComputedStyle(a)}function Fy(a){return["table","td","th"].indexOf(wr(a))>=0}function gi(a){return((Ki(a)?a.ownerDocument:a.document)||window.document).documentElement}function sl(a){return wr(a)==="html"?a:a.assignedSlot||a.parentNode||(dc(a)?a.host:null)||gi(a)}function ff(a){return!Dn(a)||zr(a).position==="fixed"?null:a.offsetParent}function qy(a){var n=/firefox/i.test(nc()),r=/Trident/i.test(nc());if(r&&Dn(a)){var f=zr(a);if(f.position==="fixed")return null}var v=sl(a);for(dc(v)&&(v=v.host);Dn(v)&&["html","body"].indexOf(wr(v))<0;){var g=zr(v);if(g.transform!=="none"||g.perspective!=="none"||g.contain==="paint"||["transform","perspective"].indexOf(g.willChange)!==-1||n&&g.willChange==="filter"||n&&g.filter&&g.filter!=="none")return v;v=v.parentNode}return null}function Uo(a){for(var n=wn(a),r=ff(a);r&&Fy(r)&&zr(r).position==="static";)r=ff(r);return r&&(wr(r)==="html"||wr(r)==="body"&&zr(r).position==="static")?n:r||qy(a)||n}function hc(a){return["top","bottom"].indexOf(a)>=0?"x":"y"}function qo(a,n,r){return Vi(a,Za(n,r))}function By(a,n,r){var f=qo(a,n,r);return f>r?r:f}function cp(){return{top:0,right:0,bottom:0,left:0}}function dp(a){return Object.assign({},cp(),a)}function fp(a,n){return n.reduce(function(r,f){return r[f]=a,r},{})}var Wy=function(n,r){return n=typeof n=="function"?n(Object.assign({},r.rects,{placement:r.placement})):n,dp(typeof n!="number"?n:fp(n,Fs))};function Hy(a){var n,r=a.state,f=a.name,v=a.options,g=r.elements.arrow,w=r.modifiersData.popperOffsets,T=br(r.placement),I=hc(T),q=[jt,yn].indexOf(T)>=0,N=q?"height":"width";if(!(!g||!w)){var H=Wy(v.padding,r),K=pc(g),G=I==="y"?Yt:jt,pe=I==="y"?bn:yn,te=r.rects.reference[N]+r.rects.reference[I]-w[I]-r.rects.popper[N],X=w[I]-r.rects.reference[I],Y=Uo(g),ke=Y?I==="y"?Y.clientHeight||0:Y.clientWidth||0:0,Ie=te/2-X/2,ce=H[G],ve=ke-K[N]-H[pe],Ae=ke/2-K[N]/2+Ie,de=qo(ce,Ae,ve),Ge=I;r.modifiersData[f]=(n={},n[Ge]=de,n.centerOffset=de-Ae,n)}}function Uy(a){var n=a.state,r=a.options,f=r.element,v=f===void 0?"[data-popper-arrow]":f;v!=null&&(typeof v=="string"&&(v=n.elements.popper.querySelector(v),!v)||up(n.elements.popper,v)&&(n.elements.arrow=v))}const pp={name:"arrow",enabled:!0,phase:"main",fn:Hy,effect:Uy,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ps(a){return a.split("-")[1]}var Vy={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zy(a,n){var r=a.x,f=a.y,v=n.devicePixelRatio||1;return{x:Ns(r*v)/v||0,y:Ns(f*v)/v||0}}function pf(a){var n,r=a.popper,f=a.popperRect,v=a.placement,g=a.variation,w=a.offsets,T=a.position,I=a.gpuAcceleration,q=a.adaptive,N=a.roundOffsets,H=a.isFixed,K=w.x,G=K===void 0?0:K,pe=w.y,te=pe===void 0?0:pe,X=typeof N=="function"?N({x:G,y:te}):{x:G,y:te};G=X.x,te=X.y;var Y=w.hasOwnProperty("x"),ke=w.hasOwnProperty("y"),Ie=jt,ce=Yt,ve=window;if(q){var Ae=Uo(r),de="clientHeight",Ge="clientWidth";if(Ae===wn(r)&&(Ae=gi(r),zr(Ae).position!=="static"&&T==="absolute"&&(de="scrollHeight",Ge="scrollWidth")),Ae=Ae,v===Yt||(v===jt||v===yn)&&g===Ds){ce=bn;var je=H&&Ae===ve&&ve.visualViewport?ve.visualViewport.height:Ae[de];te-=je-f.height,te*=I?1:-1}if(v===jt||(v===Yt||v===bn)&&g===Ds){Ie=yn;var Ue=H&&Ae===ve&&ve.visualViewport?ve.visualViewport.width:Ae[Ge];G-=Ue-f.width,G*=I?1:-1}}var Fe=Object.assign({position:T},q&&Vy),gt=N===!0?zy({x:G,y:te},wn(r)):{x:G,y:te};if(G=gt.x,te=gt.y,I){var ot;return Object.assign({},Fe,(ot={},ot[ce]=ke?"0":"",ot[Ie]=Y?"0":"",ot.transform=(ve.devicePixelRatio||1)<=1?"translate("+G+"px, "+te+"px)":"translate3d("+G+"px, "+te+"px, 0)",ot))}return Object.assign({},Fe,(n={},n[ce]=ke?te+"px":"",n[Ie]=Y?G+"px":"",n.transform="",n))}function Ky(a){var n=a.state,r=a.options,f=r.gpuAcceleration,v=f===void 0?!0:f,g=r.adaptive,w=g===void 0?!0:g,T=r.roundOffsets,I=T===void 0?!0:T,q={placement:br(n.placement),variation:Ps(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:v,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,pf(Object.assign({},q,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:w,roundOffsets:I})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,pf(Object.assign({},q,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:I})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}const vc={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ky,data:{}};var qa={passive:!0};function Gy(a){var n=a.state,r=a.instance,f=a.options,v=f.scroll,g=v===void 0?!0:v,w=f.resize,T=w===void 0?!0:w,I=wn(n.elements.popper),q=[].concat(n.scrollParents.reference,n.scrollParents.popper);return g&&q.forEach(function(N){N.addEventListener("scroll",r.update,qa)}),T&&I.addEventListener("resize",r.update,qa),function(){g&&q.forEach(function(N){N.removeEventListener("scroll",r.update,qa)}),T&&I.removeEventListener("resize",r.update,qa)}}const _c={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Gy,data:{}};var Yy={left:"right",right:"left",bottom:"top",top:"bottom"};function Ka(a){return a.replace(/left|right|bottom|top/g,function(n){return Yy[n]})}var jy={start:"end",end:"start"};function hf(a){return a.replace(/start|end/g,function(n){return jy[n]})}function mc(a){var n=wn(a),r=n.pageXOffset,f=n.pageYOffset;return{scrollLeft:r,scrollTop:f}}function gc(a){return $s(gi(a)).left+mc(a).scrollLeft}function Qy(a,n){var r=wn(a),f=gi(a),v=r.visualViewport,g=f.clientWidth,w=f.clientHeight,T=0,I=0;if(v){g=v.width,w=v.height;var q=lp();(q||!q&&n==="fixed")&&(T=v.offsetLeft,I=v.offsetTop)}return{width:g,height:w,x:T+gc(a),y:I}}function Xy(a){var n,r=gi(a),f=mc(a),v=(n=a.ownerDocument)==null?void 0:n.body,g=Vi(r.scrollWidth,r.clientWidth,v?v.scrollWidth:0,v?v.clientWidth:0),w=Vi(r.scrollHeight,r.clientHeight,v?v.scrollHeight:0,v?v.clientHeight:0),T=-f.scrollLeft+gc(a),I=-f.scrollTop;return zr(v||r).direction==="rtl"&&(T+=Vi(r.clientWidth,v?v.clientWidth:0)-g),{width:g,height:w,x:T,y:I}}function bc(a){var n=zr(a),r=n.overflow,f=n.overflowX,v=n.overflowY;return/auto|scroll|overlay|hidden/.test(r+v+f)}function hp(a){return["html","body","#document"].indexOf(wr(a))>=0?a.ownerDocument.body:Dn(a)&&bc(a)?a:hp(sl(a))}function Bo(a,n){var r;n===void 0&&(n=[]);var f=hp(a),v=f===((r=a.ownerDocument)==null?void 0:r.body),g=wn(f),w=v?[g].concat(g.visualViewport||[],bc(f)?f:[]):f,T=n.concat(w);return v?T:T.concat(Bo(sl(w)))}function rc(a){return Object.assign({},a,{left:a.x,top:a.y,right:a.x+a.width,bottom:a.y+a.height})}function Zy(a,n){var r=$s(a,!1,n==="fixed");return r.top=r.top+a.clientTop,r.left=r.left+a.clientLeft,r.bottom=r.top+a.clientHeight,r.right=r.left+a.clientWidth,r.width=a.clientWidth,r.height=a.clientHeight,r.x=r.left,r.y=r.top,r}function vf(a,n,r){return n===uc?rc(Qy(a,r)):Ki(n)?Zy(n,r):rc(Xy(gi(a)))}function Jy(a){var n=Bo(sl(a)),r=["absolute","fixed"].indexOf(zr(a).position)>=0,f=r&&Dn(a)?Uo(a):a;return Ki(f)?n.filter(function(v){return Ki(v)&&up(v,f)&&wr(v)!=="body"}):[]}function e1(a,n,r,f){var v=n==="clippingParents"?Jy(a):[].concat(n),g=[].concat(v,[r]),w=g[0],T=g.reduce(function(I,q){var N=vf(a,q,f);return I.top=Vi(N.top,I.top),I.right=Za(N.right,I.right),I.bottom=Za(N.bottom,I.bottom),I.left=Vi(N.left,I.left),I},vf(a,w,f));return T.width=T.right-T.left,T.height=T.bottom-T.top,T.x=T.left,T.y=T.top,T}function vp(a){var n=a.reference,r=a.element,f=a.placement,v=f?br(f):null,g=f?Ps(f):null,w=n.x+n.width/2-r.width/2,T=n.y+n.height/2-r.height/2,I;switch(v){case Yt:I={x:w,y:n.y-r.height};break;case bn:I={x:w,y:n.y+n.height};break;case yn:I={x:n.x+n.width,y:T};break;case jt:I={x:n.x-r.width,y:T};break;default:I={x:n.x,y:n.y}}var q=v?hc(v):null;if(q!=null){var N=q==="y"?"height":"width";switch(g){case zi:I[q]=I[q]-(n[N]/2-r[N]/2);break;case Ds:I[q]=I[q]+(n[N]/2-r[N]/2);break}}return I}function Ls(a,n){n===void 0&&(n={});var r=n,f=r.placement,v=f===void 0?a.placement:f,g=r.strategy,w=g===void 0?a.strategy:g,T=r.boundary,I=T===void 0?Qf:T,q=r.rootBoundary,N=q===void 0?uc:q,H=r.elementContext,K=H===void 0?Ss:H,G=r.altBoundary,pe=G===void 0?!1:G,te=r.padding,X=te===void 0?0:te,Y=dp(typeof X!="number"?X:fp(X,Fs)),ke=K===Ss?Xf:Ss,Ie=a.rects.popper,ce=a.elements[pe?ke:K],ve=e1(Ki(ce)?ce:ce.contextElement||gi(a.elements.popper),I,N,w),Ae=$s(a.elements.reference),de=vp({reference:Ae,element:Ie,placement:v}),Ge=rc(Object.assign({},Ie,de)),je=K===Ss?Ge:Ae,Ue={top:ve.top-je.top+Y.top,bottom:je.bottom-ve.bottom+Y.bottom,left:ve.left-je.left+Y.left,right:je.right-ve.right+Y.right},Fe=a.modifiersData.offset;if(K===Ss&&Fe){var gt=Fe[v];Object.keys(Ue).forEach(function(ot){var Qt=[yn,bn].indexOf(ot)>=0?1:-1,Ve=[Yt,bn].indexOf(ot)>=0?"y":"x";Ue[ot]+=gt[Ve]*Qt})}return Ue}function t1(a,n){n===void 0&&(n={});var r=n,f=r.placement,v=r.boundary,g=r.rootBoundary,w=r.padding,T=r.flipVariations,I=r.allowedAutoPlacements,q=I===void 0?cc:I,N=Ps(f),H=N?T?tc:tc.filter(function(pe){return Ps(pe)===N}):Fs,K=H.filter(function(pe){return q.indexOf(pe)>=0});K.length===0&&(K=H);var G=K.reduce(function(pe,te){return pe[te]=Ls(a,{placement:te,boundary:v,rootBoundary:g,padding:w})[br(te)],pe},{});return Object.keys(G).sort(function(pe,te){return G[pe]-G[te]})}function n1(a){if(br(a)===il)return[];var n=Ka(a);return[hf(a),n,hf(n)]}function r1(a){var n=a.state,r=a.options,f=a.name;if(!n.modifiersData[f]._skip){for(var v=r.mainAxis,g=v===void 0?!0:v,w=r.altAxis,T=w===void 0?!0:w,I=r.fallbackPlacements,q=r.padding,N=r.boundary,H=r.rootBoundary,K=r.altBoundary,G=r.flipVariations,pe=G===void 0?!0:G,te=r.allowedAutoPlacements,X=n.options.placement,Y=br(X),ke=Y===X,Ie=I||(ke||!pe?[Ka(X)]:n1(X)),ce=[X].concat(Ie).reduce(function(Zn,Be){return Zn.concat(br(Be)===il?t1(n,{placement:Be,boundary:N,rootBoundary:H,padding:q,flipVariations:pe,allowedAutoPlacements:te}):Be)},[]),ve=n.rects.reference,Ae=n.rects.popper,de=new Map,Ge=!0,je=ce[0],Ue=0;Ue<ce.length;Ue++){var Fe=ce[Ue],gt=br(Fe),ot=Ps(Fe)===zi,Qt=[Yt,bn].indexOf(gt)>=0,Ve=Qt?"width":"height",at=Ls(n,{placement:Fe,boundary:N,rootBoundary:H,altBoundary:K,padding:q}),Xe=Qt?ot?yn:jt:ot?bn:Yt;ve[Ve]>Ae[Ve]&&(Xe=Ka(Xe));var Mt=Ka(Xe),En=[];if(g&&En.push(at[gt]<=0),T&&En.push(at[Xe]<=0,at[Mt]<=0),En.every(function(Zn){return Zn})){je=Fe,Ge=!1;break}de.set(Fe,En)}if(Ge)for(var Ne=pe?3:1,It=function(Be){var pn=ce.find(function(Yr){var Ft=de.get(Yr);if(Ft)return Ft.slice(0,Be).every(function(Ln){return Ln})});if(pn)return je=pn,"break"},An=Ne;An>0;An--){var Gr=It(An);if(Gr==="break")break}n.placement!==je&&(n.modifiersData[f]._skip=!0,n.placement=je,n.reset=!0)}}const _p={name:"flip",enabled:!0,phase:"main",fn:r1,requiresIfExists:["offset"],data:{_skip:!1}};function _f(a,n,r){return r===void 0&&(r={x:0,y:0}),{top:a.top-n.height-r.y,right:a.right-n.width+r.x,bottom:a.bottom-n.height+r.y,left:a.left-n.width-r.x}}function mf(a){return[Yt,yn,bn,jt].some(function(n){return a[n]>=0})}function i1(a){var n=a.state,r=a.name,f=n.rects.reference,v=n.rects.popper,g=n.modifiersData.preventOverflow,w=Ls(n,{elementContext:"reference"}),T=Ls(n,{altBoundary:!0}),I=_f(w,f),q=_f(T,v,g),N=mf(I),H=mf(q);n.modifiersData[r]={referenceClippingOffsets:I,popperEscapeOffsets:q,isReferenceHidden:N,hasPopperEscaped:H},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":N,"data-popper-escaped":H})}const mp={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:i1};function s1(a,n,r){var f=br(a),v=[jt,Yt].indexOf(f)>=0?-1:1,g=typeof r=="function"?r(Object.assign({},n,{placement:a})):r,w=g[0],T=g[1];return w=w||0,T=(T||0)*v,[jt,yn].indexOf(f)>=0?{x:T,y:w}:{x:w,y:T}}function o1(a){var n=a.state,r=a.options,f=a.name,v=r.offset,g=v===void 0?[0,0]:v,w=cc.reduce(function(N,H){return N[H]=s1(H,n.rects,g),N},{}),T=w[n.placement],I=T.x,q=T.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=I,n.modifiersData.popperOffsets.y+=q),n.modifiersData[f]=w}const gp={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:o1};function a1(a){var n=a.state,r=a.name;n.modifiersData[r]=vp({reference:n.rects.reference,element:n.rects.popper,placement:n.placement})}const yc={name:"popperOffsets",enabled:!0,phase:"read",fn:a1,data:{}};function l1(a){return a==="x"?"y":"x"}function u1(a){var n=a.state,r=a.options,f=a.name,v=r.mainAxis,g=v===void 0?!0:v,w=r.altAxis,T=w===void 0?!1:w,I=r.boundary,q=r.rootBoundary,N=r.altBoundary,H=r.padding,K=r.tether,G=K===void 0?!0:K,pe=r.tetherOffset,te=pe===void 0?0:pe,X=Ls(n,{boundary:I,rootBoundary:q,padding:H,altBoundary:N}),Y=br(n.placement),ke=Ps(n.placement),Ie=!ke,ce=hc(Y),ve=l1(ce),Ae=n.modifiersData.popperOffsets,de=n.rects.reference,Ge=n.rects.popper,je=typeof te=="function"?te(Object.assign({},n.rects,{placement:n.placement})):te,Ue=typeof je=="number"?{mainAxis:je,altAxis:je}:Object.assign({mainAxis:0,altAxis:0},je),Fe=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,gt={x:0,y:0};if(Ae){if(g){var ot,Qt=ce==="y"?Yt:jt,Ve=ce==="y"?bn:yn,at=ce==="y"?"height":"width",Xe=Ae[ce],Mt=Xe+X[Qt],En=Xe-X[Ve],Ne=G?-Ge[at]/2:0,It=ke===zi?de[at]:Ge[at],An=ke===zi?-Ge[at]:-de[at],Gr=n.elements.arrow,Zn=G&&Gr?pc(Gr):{width:0,height:0},Be=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:cp(),pn=Be[Qt],Yr=Be[Ve],Ft=qo(0,de[at],Zn[at]),Ln=Ie?de[at]/2-Ne-Ft-pn-Ue.mainAxis:It-Ft-pn-Ue.mainAxis,Hs=Ie?-de[at]/2+Ne+Ft+Yr+Ue.mainAxis:An+Ft+Yr+Ue.mainAxis,Jn=n.elements.arrow&&Uo(n.elements.arrow),jr=Jn?ce==="y"?Jn.clientTop||0:Jn.clientLeft||0:0,wi=(ot=Fe?.[ce])!=null?ot:0,qt=Xe+Ln-wi-jr,Er=Xe+Hs-wi,Ei=qo(G?Za(Mt,qt):Mt,Xe,G?Vi(En,Er):En);Ae[ce]=Ei,gt[ce]=Ei-Xe}if(T){var Xt,Rn=ce==="x"?Yt:jt,Us=ce==="x"?bn:yn,At=Ae[ve],xt=ve==="y"?"height":"width",Mn=At+X[Rn],er=At-X[Us],Zt=[Yt,jt].indexOf(Y)!==-1,_e=(Xt=Fe?.[ve])!=null?Xt:0,et=Zt?Mn:At-de[xt]-Ge[xt]-_e+Ue.altAxis,lt=Zt?At+de[xt]+Ge[xt]-_e-Ue.altAxis:er,tt=G&&Zt?By(et,At,lt):qo(G?et:Mn,At,G?lt:er);Ae[ve]=tt,gt[ve]=tt-At}n.modifiersData[f]=gt}}const bp={name:"preventOverflow",enabled:!0,phase:"main",fn:u1,requiresIfExists:["offset"]};function c1(a){return{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}}function d1(a){return a===wn(a)||!Dn(a)?mc(a):c1(a)}function f1(a){var n=a.getBoundingClientRect(),r=Ns(n.width)/a.offsetWidth||1,f=Ns(n.height)/a.offsetHeight||1;return r!==1||f!==1}function p1(a,n,r){r===void 0&&(r=!1);var f=Dn(n),v=Dn(n)&&f1(n),g=gi(n),w=$s(a,v,r),T={scrollLeft:0,scrollTop:0},I={x:0,y:0};return(f||!f&&!r)&&((wr(n)!=="body"||bc(g))&&(T=d1(n)),Dn(n)?(I=$s(n,!0),I.x+=n.clientLeft,I.y+=n.clientTop):g&&(I.x=gc(g))),{x:w.left+T.scrollLeft-I.x,y:w.top+T.scrollTop-I.y,width:w.width,height:w.height}}function h1(a){var n=new Map,r=new Set,f=[];a.forEach(function(g){n.set(g.name,g)});function v(g){r.add(g.name);var w=[].concat(g.requires||[],g.requiresIfExists||[]);w.forEach(function(T){if(!r.has(T)){var I=n.get(T);I&&v(I)}}),f.push(g)}return a.forEach(function(g){r.has(g.name)||v(g)}),f}function v1(a){var n=h1(a);return ap.reduce(function(r,f){return r.concat(n.filter(function(v){return v.phase===f}))},[])}function _1(a){var n;return function(){return n||(n=new Promise(function(r){Promise.resolve().then(function(){n=void 0,r(a())})})),n}}function m1(a){var n=a.reduce(function(r,f){var v=r[f.name];return r[f.name]=v?Object.assign({},v,f,{options:Object.assign({},v.options,f.options),data:Object.assign({},v.data,f.data)}):f,r},{});return Object.keys(n).map(function(r){return n[r]})}var gf={placement:"bottom",modifiers:[],strategy:"absolute"};function bf(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return!n.some(function(f){return!(f&&typeof f.getBoundingClientRect=="function")})}function ol(a){a===void 0&&(a={});var n=a,r=n.defaultModifiers,f=r===void 0?[]:r,v=n.defaultOptions,g=v===void 0?gf:v;return function(T,I,q){q===void 0&&(q=g);var N={placement:"bottom",orderedModifiers:[],options:Object.assign({},gf,g),modifiersData:{},elements:{reference:T,popper:I},attributes:{},styles:{}},H=[],K=!1,G={state:N,setOptions:function(Y){var ke=typeof Y=="function"?Y(N.options):Y;te(),N.options=Object.assign({},g,N.options,ke),N.scrollParents={reference:Ki(T)?Bo(T):T.contextElement?Bo(T.contextElement):[],popper:Bo(I)};var Ie=v1(m1([].concat(f,N.options.modifiers)));return N.orderedModifiers=Ie.filter(function(ce){return ce.enabled}),pe(),G.update()},forceUpdate:function(){if(!K){var Y=N.elements,ke=Y.reference,Ie=Y.popper;if(bf(ke,Ie)){N.rects={reference:p1(ke,Uo(Ie),N.options.strategy==="fixed"),popper:pc(Ie)},N.reset=!1,N.placement=N.options.placement,N.orderedModifiers.forEach(function(Ue){return N.modifiersData[Ue.name]=Object.assign({},Ue.data)});for(var ce=0;ce<N.orderedModifiers.length;ce++){if(N.reset===!0){N.reset=!1,ce=-1;continue}var ve=N.orderedModifiers[ce],Ae=ve.fn,de=ve.options,Ge=de===void 0?{}:de,je=ve.name;typeof Ae=="function"&&(N=Ae({state:N,options:Ge,name:je,instance:G})||N)}}}},update:_1(function(){return new Promise(function(X){G.forceUpdate(),X(N)})}),destroy:function(){te(),K=!0}};if(!bf(T,I))return G;G.setOptions(q).then(function(X){!K&&q.onFirstUpdate&&q.onFirstUpdate(X)});function pe(){N.orderedModifiers.forEach(function(X){var Y=X.name,ke=X.options,Ie=ke===void 0?{}:ke,ce=X.effect;if(typeof ce=="function"){var ve=ce({state:N,name:Y,instance:G,options:Ie}),Ae=function(){};H.push(ve||Ae)}})}function te(){H.forEach(function(X){return X()}),H=[]}return G}}var g1=ol(),b1=[_c,yc,vc,fc],y1=ol({defaultModifiers:b1}),w1=[_c,yc,vc,fc,gp,_p,bp,pp,mp],wc=ol({defaultModifiers:w1});const yp=Object.freeze(Object.defineProperty({__proto__:null,afterMain:rp,afterRead:ep,afterWrite:op,applyStyles:fc,arrow:pp,auto:il,basePlacements:Fs,beforeMain:tp,beforeRead:Zf,beforeWrite:ip,bottom:bn,clippingParents:Qf,computeStyles:vc,createPopper:wc,createPopperBase:g1,createPopperLite:y1,detectOverflow:Ls,end:Ds,eventListeners:_c,flip:_p,hide:mp,left:jt,main:np,modifierPhases:ap,offset:gp,placements:cc,popper:Ss,popperGenerator:ol,popperOffsets:yc,preventOverflow:bp,read:Jf,reference:Xf,right:yn,start:zi,top:Yt,variationPlacements:tc,viewport:uc,write:sp},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const pi=new Map,Fu={set(a,n,r){pi.has(a)||pi.set(a,new Map);const f=pi.get(a);if(!f.has(n)&&f.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(f.keys())[0]}.`);return}f.set(n,r)},get(a,n){return pi.has(a)&&pi.get(a).get(n)||null},remove(a,n){if(!pi.has(a))return;const r=pi.get(a);r.delete(n),r.size===0&&pi.delete(a)}},E1=1e6,A1=1e3,ic="transitionend",wp=a=>(a&&window.CSS&&window.CSS.escape&&(a=a.replace(/#([^\s"#']+)/g,(n,r)=>`#${CSS.escape(r)}`)),a),x1=a=>a==null?`${a}`:Object.prototype.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase(),C1=a=>{do a+=Math.floor(Math.random()*E1);while(document.getElementById(a));return a},T1=a=>{if(!a)return 0;let{transitionDuration:n,transitionDelay:r}=window.getComputedStyle(a);const f=Number.parseFloat(n),v=Number.parseFloat(r);return!f&&!v?0:(n=n.split(",")[0],r=r.split(",")[0],(Number.parseFloat(n)+Number.parseFloat(r))*A1)},Ep=a=>{a.dispatchEvent(new Event(ic))},Ur=a=>!a||typeof a!="object"?!1:(typeof a.jquery<"u"&&(a=a[0]),typeof a.nodeType<"u"),vi=a=>Ur(a)?a.jquery?a[0]:a:typeof a=="string"&&a.length>0?document.querySelector(wp(a)):null,qs=a=>{if(!Ur(a)||a.getClientRects().length===0)return!1;const n=getComputedStyle(a).getPropertyValue("visibility")==="visible",r=a.closest("details:not([open])");if(!r)return n;if(r!==a){const f=a.closest("summary");if(f&&f.parentNode!==r||f===null)return!1}return n},_i=a=>!a||a.nodeType!==Node.ELEMENT_NODE||a.classList.contains("disabled")?!0:typeof a.disabled<"u"?a.disabled:a.hasAttribute("disabled")&&a.getAttribute("disabled")!=="false",Ap=a=>{if(!document.documentElement.attachShadow)return null;if(typeof a.getRootNode=="function"){const n=a.getRootNode();return n instanceof ShadowRoot?n:null}return a instanceof ShadowRoot?a:a.parentNode?Ap(a.parentNode):null},Ja=()=>{},Vo=a=>{a.offsetHeight},xp=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,qu=[],S1=a=>{document.readyState==="loading"?(qu.length||document.addEventListener("DOMContentLoaded",()=>{for(const n of qu)n()}),qu.push(a)):a()},Nn=()=>document.documentElement.dir==="rtl",Pn=a=>{S1(()=>{const n=xp();if(n){const r=a.NAME,f=n.fn[r];n.fn[r]=a.jQueryInterface,n.fn[r].Constructor=a,n.fn[r].noConflict=()=>(n.fn[r]=f,a.jQueryInterface)}})},fn=(a,n=[],r=a)=>typeof a=="function"?a.call(...n):r,Cp=(a,n,r=!0)=>{if(!r){fn(a);return}const v=T1(n)+5;let g=!1;const w=({target:T})=>{T===n&&(g=!0,n.removeEventListener(ic,w),fn(a))};n.addEventListener(ic,w),setTimeout(()=>{g||Ep(n)},v)},Ec=(a,n,r,f)=>{const v=a.length;let g=a.indexOf(n);return g===-1?!r&&f?a[v-1]:a[0]:(g+=r?1:-1,f&&(g=(g+v)%v),a[Math.max(0,Math.min(g,v-1))])},I1=/[^.]*(?=\..*)\.|.*/,O1=/\..*/,k1=/::\d+$/,Bu={};let yf=1;const Tp={mouseenter:"mouseover",mouseleave:"mouseout"},D1=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Sp(a,n){return n&&`${n}::${yf++}`||a.uidEvent||yf++}function Ip(a){const n=Sp(a);return a.uidEvent=n,Bu[n]=Bu[n]||{},Bu[n]}function N1(a,n){return function r(f){return Ac(f,{delegateTarget:a}),r.oneOff&&F.off(a,f.type,n),n.apply(a,[f])}}function $1(a,n,r){return function f(v){const g=a.querySelectorAll(n);for(let{target:w}=v;w&&w!==this;w=w.parentNode)for(const T of g)if(T===w)return Ac(v,{delegateTarget:w}),f.oneOff&&F.off(a,v.type,n,r),r.apply(w,[v])}}function Op(a,n,r=null){return Object.values(a).find(f=>f.callable===n&&f.delegationSelector===r)}function kp(a,n,r){const f=typeof n=="string",v=f?r:n||r;let g=Dp(a);return D1.has(g)||(g=a),[f,v,g]}function wf(a,n,r,f,v){if(typeof n!="string"||!a)return;let[g,w,T]=kp(n,r,f);n in Tp&&(w=(pe=>function(te){if(!te.relatedTarget||te.relatedTarget!==te.delegateTarget&&!te.delegateTarget.contains(te.relatedTarget))return pe.call(this,te)})(w));const I=Ip(a),q=I[T]||(I[T]={}),N=Op(q,w,g?r:null);if(N){N.oneOff=N.oneOff&&v;return}const H=Sp(w,n.replace(I1,"")),K=g?$1(a,r,w):N1(a,w);K.delegationSelector=g?r:null,K.callable=w,K.oneOff=v,K.uidEvent=H,q[H]=K,a.addEventListener(T,K,g)}function sc(a,n,r,f,v){const g=Op(n[r],f,v);g&&(a.removeEventListener(r,g,!!v),delete n[r][g.uidEvent])}function P1(a,n,r,f){const v=n[r]||{};for(const[g,w]of Object.entries(v))g.includes(f)&&sc(a,n,r,w.callable,w.delegationSelector)}function Dp(a){return a=a.replace(O1,""),Tp[a]||a}const F={on(a,n,r,f){wf(a,n,r,f,!1)},one(a,n,r,f){wf(a,n,r,f,!0)},off(a,n,r,f){if(typeof n!="string"||!a)return;const[v,g,w]=kp(n,r,f),T=w!==n,I=Ip(a),q=I[w]||{},N=n.startsWith(".");if(typeof g<"u"){if(!Object.keys(q).length)return;sc(a,I,w,g,v?r:null);return}if(N)for(const H of Object.keys(I))P1(a,I,H,n.slice(1));for(const[H,K]of Object.entries(q)){const G=H.replace(k1,"");(!T||n.includes(G))&&sc(a,I,w,K.callable,K.delegationSelector)}},trigger(a,n,r){if(typeof n!="string"||!a)return null;const f=xp(),v=Dp(n),g=n!==v;let w=null,T=!0,I=!0,q=!1;g&&f&&(w=f.Event(n,r),f(a).trigger(w),T=!w.isPropagationStopped(),I=!w.isImmediatePropagationStopped(),q=w.isDefaultPrevented());const N=Ac(new Event(n,{bubbles:T,cancelable:!0}),r);return q&&N.preventDefault(),I&&a.dispatchEvent(N),N.defaultPrevented&&w&&w.preventDefault(),N}};function Ac(a,n={}){for(const[r,f]of Object.entries(n))try{a[r]=f}catch{Object.defineProperty(a,r,{configurable:!0,get(){return f}})}return a}function Ef(a){if(a==="true")return!0;if(a==="false")return!1;if(a===Number(a).toString())return Number(a);if(a===""||a==="null")return null;if(typeof a!="string")return a;try{return JSON.parse(decodeURIComponent(a))}catch{return a}}function Wu(a){return a.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}const Vr={setDataAttribute(a,n,r){a.setAttribute(`data-bs-${Wu(n)}`,r)},removeDataAttribute(a,n){a.removeAttribute(`data-bs-${Wu(n)}`)},getDataAttributes(a){if(!a)return{};const n={},r=Object.keys(a.dataset).filter(f=>f.startsWith("bs")&&!f.startsWith("bsConfig"));for(const f of r){let v=f.replace(/^bs/,"");v=v.charAt(0).toLowerCase()+v.slice(1),n[v]=Ef(a.dataset[f])}return n},getDataAttribute(a,n){return Ef(a.getAttribute(`data-bs-${Wu(n)}`))}};class zo{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(n){return n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n}_mergeConfigObj(n,r){const f=Ur(r)?Vr.getDataAttribute(r,"config"):{};return{...this.constructor.Default,...typeof f=="object"?f:{},...Ur(r)?Vr.getDataAttributes(r):{},...typeof n=="object"?n:{}}}_typeCheckConfig(n,r=this.constructor.DefaultType){for(const[f,v]of Object.entries(r)){const g=n[f],w=Ur(g)?"element":x1(g);if(!new RegExp(v).test(w))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${f}" provided type "${w}" but expected type "${v}".`)}}}const L1="5.3.8";class Xn extends zo{constructor(n,r){super(),n=vi(n),n&&(this._element=n,this._config=this._getConfig(r),Fu.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Fu.remove(this._element,this.constructor.DATA_KEY),F.off(this._element,this.constructor.EVENT_KEY);for(const n of Object.getOwnPropertyNames(this))this[n]=null}_queueCallback(n,r,f=!0){Cp(n,r,f)}_getConfig(n){return n=this._mergeConfigObj(n,this._element),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}static getInstance(n){return Fu.get(vi(n),this.DATA_KEY)}static getOrCreateInstance(n,r={}){return this.getInstance(n)||new this(n,typeof r=="object"?r:null)}static get VERSION(){return L1}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(n){return`${n}${this.EVENT_KEY}`}}const Hu=a=>{let n=a.getAttribute("data-bs-target");if(!n||n==="#"){let r=a.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),n=r&&r!=="#"?r.trim():null}return n?n.split(",").map(r=>wp(r)).join(","):null},ee={find(a,n=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(n,a))},findOne(a,n=document.documentElement){return Element.prototype.querySelector.call(n,a)},children(a,n){return[].concat(...a.children).filter(r=>r.matches(n))},parents(a,n){const r=[];let f=a.parentNode.closest(n);for(;f;)r.push(f),f=f.parentNode.closest(n);return r},prev(a,n){let r=a.previousElementSibling;for(;r;){if(r.matches(n))return[r];r=r.previousElementSibling}return[]},next(a,n){let r=a.nextElementSibling;for(;r;){if(r.matches(n))return[r];r=r.nextElementSibling}return[]},focusableChildren(a){const n=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(r=>`${r}:not([tabindex^="-"])`).join(",");return this.find(n,a).filter(r=>!_i(r)&&qs(r))},getSelectorFromElement(a){const n=Hu(a);return n&&ee.findOne(n)?n:null},getElementFromSelector(a){const n=Hu(a);return n?ee.findOne(n):null},getMultipleElementsFromSelector(a){const n=Hu(a);return n?ee.find(n):[]}},al=(a,n="hide")=>{const r=`click.dismiss${a.EVENT_KEY}`,f=a.NAME;F.on(document,r,`[data-bs-dismiss="${f}"]`,function(v){if(["A","AREA"].includes(this.tagName)&&v.preventDefault(),_i(this))return;const g=ee.getElementFromSelector(this)||this.closest(`.${f}`);a.getOrCreateInstance(g)[n]()})},R1="alert",M1="bs.alert",Np=`.${M1}`,F1=`close${Np}`,q1=`closed${Np}`,B1="fade",W1="show";class ll extends Xn{static get NAME(){return R1}close(){if(F.trigger(this._element,F1).defaultPrevented)return;this._element.classList.remove(W1);const r=this._element.classList.contains(B1);this._queueCallback(()=>this._destroyElement(),this._element,r)}_destroyElement(){this._element.remove(),F.trigger(this._element,q1),this.dispose()}static jQueryInterface(n){return this.each(function(){const r=ll.getOrCreateInstance(this);if(typeof n=="string"){if(r[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);r[n](this)}})}}al(ll,"close");Pn(ll);const H1="button",U1="bs.button",V1=`.${U1}`,z1=".data-api",K1="active",Af='[data-bs-toggle="button"]',G1=`click${V1}${z1}`;class ul extends Xn{static get NAME(){return H1}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(K1))}static jQueryInterface(n){return this.each(function(){const r=ul.getOrCreateInstance(this);n==="toggle"&&r[n]()})}}F.on(document,G1,Af,a=>{a.preventDefault();const n=a.target.closest(Af);ul.getOrCreateInstance(n).toggle()});Pn(ul);const Y1="swipe",Bs=".bs.swipe",j1=`touchstart${Bs}`,Q1=`touchmove${Bs}`,X1=`touchend${Bs}`,Z1=`pointerdown${Bs}`,J1=`pointerup${Bs}`,e0="touch",t0="pen",n0="pointer-event",r0=40,i0={endCallback:null,leftCallback:null,rightCallback:null},s0={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class el extends zo{constructor(n,r){super(),this._element=n,!(!n||!el.isSupported())&&(this._config=this._getConfig(r),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return i0}static get DefaultType(){return s0}static get NAME(){return Y1}dispose(){F.off(this._element,Bs)}_start(n){if(!this._supportPointerEvents){this._deltaX=n.touches[0].clientX;return}this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX)}_end(n){this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX-this._deltaX),this._handleSwipe(),fn(this._config.endCallback)}_move(n){this._deltaX=n.touches&&n.touches.length>1?0:n.touches[0].clientX-this._deltaX}_handleSwipe(){const n=Math.abs(this._deltaX);if(n<=r0)return;const r=n/this._deltaX;this._deltaX=0,r&&fn(r>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(F.on(this._element,Z1,n=>this._start(n)),F.on(this._element,J1,n=>this._end(n)),this._element.classList.add(n0)):(F.on(this._element,j1,n=>this._start(n)),F.on(this._element,Q1,n=>this._move(n)),F.on(this._element,X1,n=>this._end(n)))}_eventIsPointerPenTouch(n){return this._supportPointerEvents&&(n.pointerType===t0||n.pointerType===e0)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const o0="carousel",a0="bs.carousel",bi=`.${a0}`,$p=".data-api",l0="ArrowLeft",u0="ArrowRight",c0=500,Ro="next",Cs="prev",Is="left",Ga="right",d0=`slide${bi}`,Uu=`slid${bi}`,f0=`keydown${bi}`,p0=`mouseenter${bi}`,h0=`mouseleave${bi}`,v0=`dragstart${bi}`,_0=`load${bi}${$p}`,m0=`click${bi}${$p}`,Pp="carousel",Ba="active",g0="slide",b0="carousel-item-end",y0="carousel-item-start",w0="carousel-item-next",E0="carousel-item-prev",Lp=".active",Rp=".carousel-item",A0=Lp+Rp,x0=".carousel-item img",C0=".carousel-indicators",T0="[data-bs-slide], [data-bs-slide-to]",S0='[data-bs-ride="carousel"]',I0={[l0]:Ga,[u0]:Is},O0={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},k0={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ko extends Xn{constructor(n,r){super(n,r),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ee.findOne(C0,this._element),this._addEventListeners(),this._config.ride===Pp&&this.cycle()}static get Default(){return O0}static get DefaultType(){return k0}static get NAME(){return o0}next(){this._slide(Ro)}nextWhenVisible(){!document.hidden&&qs(this._element)&&this.next()}prev(){this._slide(Cs)}pause(){this._isSliding&&Ep(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){F.one(this._element,Uu,()=>this.cycle());return}this.cycle()}}to(n){const r=this._getItems();if(n>r.length-1||n<0)return;if(this._isSliding){F.one(this._element,Uu,()=>this.to(n));return}const f=this._getItemIndex(this._getActive());if(f===n)return;const v=n>f?Ro:Cs;this._slide(v,r[n])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(n){return n.defaultInterval=n.interval,n}_addEventListeners(){this._config.keyboard&&F.on(this._element,f0,n=>this._keydown(n)),this._config.pause==="hover"&&(F.on(this._element,p0,()=>this.pause()),F.on(this._element,h0,()=>this._maybeEnableCycle())),this._config.touch&&el.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const f of ee.find(x0,this._element))F.on(f,v0,v=>v.preventDefault());const r={leftCallback:()=>this._slide(this._directionToOrder(Is)),rightCallback:()=>this._slide(this._directionToOrder(Ga)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),c0+this._config.interval))}};this._swipeHelper=new el(this._element,r)}_keydown(n){if(/input|textarea/i.test(n.target.tagName))return;const r=I0[n.key];r&&(n.preventDefault(),this._slide(this._directionToOrder(r)))}_getItemIndex(n){return this._getItems().indexOf(n)}_setActiveIndicatorElement(n){if(!this._indicatorsElement)return;const r=ee.findOne(Lp,this._indicatorsElement);r.classList.remove(Ba),r.removeAttribute("aria-current");const f=ee.findOne(`[data-bs-slide-to="${n}"]`,this._indicatorsElement);f&&(f.classList.add(Ba),f.setAttribute("aria-current","true"))}_updateInterval(){const n=this._activeElement||this._getActive();if(!n)return;const r=Number.parseInt(n.getAttribute("data-bs-interval"),10);this._config.interval=r||this._config.defaultInterval}_slide(n,r=null){if(this._isSliding)return;const f=this._getActive(),v=n===Ro,g=r||Ec(this._getItems(),f,v,this._config.wrap);if(g===f)return;const w=this._getItemIndex(g),T=G=>F.trigger(this._element,G,{relatedTarget:g,direction:this._orderToDirection(n),from:this._getItemIndex(f),to:w});if(T(d0).defaultPrevented||!f||!g)return;const q=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(w),this._activeElement=g;const N=v?y0:b0,H=v?w0:E0;g.classList.add(H),Vo(g),f.classList.add(N),g.classList.add(N);const K=()=>{g.classList.remove(N,H),g.classList.add(Ba),f.classList.remove(Ba,H,N),this._isSliding=!1,T(Uu)};this._queueCallback(K,f,this._isAnimated()),q&&this.cycle()}_isAnimated(){return this._element.classList.contains(g0)}_getActive(){return ee.findOne(A0,this._element)}_getItems(){return ee.find(Rp,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(n){return Nn()?n===Is?Cs:Ro:n===Is?Ro:Cs}_orderToDirection(n){return Nn()?n===Cs?Is:Ga:n===Cs?Ga:Is}static jQueryInterface(n){return this.each(function(){const r=Ko.getOrCreateInstance(this,n);if(typeof n=="number"){r.to(n);return}if(typeof n=="string"){if(r[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);r[n]()}})}}F.on(document,m0,T0,function(a){const n=ee.getElementFromSelector(this);if(!n||!n.classList.contains(Pp))return;a.preventDefault();const r=Ko.getOrCreateInstance(n),f=this.getAttribute("data-bs-slide-to");if(f){r.to(f),r._maybeEnableCycle();return}if(Vr.getDataAttribute(this,"slide")==="next"){r.next(),r._maybeEnableCycle();return}r.prev(),r._maybeEnableCycle()});F.on(window,_0,()=>{const a=ee.find(S0);for(const n of a)Ko.getOrCreateInstance(n)});Pn(Ko);const D0="collapse",N0="bs.collapse",Go=`.${N0}`,$0=".data-api",P0=`show${Go}`,L0=`shown${Go}`,R0=`hide${Go}`,M0=`hidden${Go}`,F0=`click${Go}${$0}`,Vu="show",ks="collapse",Wa="collapsing",q0="collapsed",B0=`:scope .${ks} .${ks}`,W0="collapse-horizontal",H0="width",U0="height",V0=".collapse.show, .collapse.collapsing",oc='[data-bs-toggle="collapse"]',z0={parent:null,toggle:!0},K0={parent:"(null|element)",toggle:"boolean"};class Ho extends Xn{constructor(n,r){super(n,r),this._isTransitioning=!1,this._triggerArray=[];const f=ee.find(oc);for(const v of f){const g=ee.getSelectorFromElement(v),w=ee.find(g).filter(T=>T===this._element);g!==null&&w.length&&this._triggerArray.push(v)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return z0}static get DefaultType(){return K0}static get NAME(){return D0}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let n=[];if(this._config.parent&&(n=this._getFirstLevelChildren(V0).filter(T=>T!==this._element).map(T=>Ho.getOrCreateInstance(T,{toggle:!1}))),n.length&&n[0]._isTransitioning||F.trigger(this._element,P0).defaultPrevented)return;for(const T of n)T.hide();const f=this._getDimension();this._element.classList.remove(ks),this._element.classList.add(Wa),this._element.style[f]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const v=()=>{this._isTransitioning=!1,this._element.classList.remove(Wa),this._element.classList.add(ks,Vu),this._element.style[f]="",F.trigger(this._element,L0)},w=`scroll${f[0].toUpperCase()+f.slice(1)}`;this._queueCallback(v,this._element,!0),this._element.style[f]=`${this._element[w]}px`}hide(){if(this._isTransitioning||!this._isShown()||F.trigger(this._element,R0).defaultPrevented)return;const r=this._getDimension();this._element.style[r]=`${this._element.getBoundingClientRect()[r]}px`,Vo(this._element),this._element.classList.add(Wa),this._element.classList.remove(ks,Vu);for(const v of this._triggerArray){const g=ee.getElementFromSelector(v);g&&!this._isShown(g)&&this._addAriaAndCollapsedClass([v],!1)}this._isTransitioning=!0;const f=()=>{this._isTransitioning=!1,this._element.classList.remove(Wa),this._element.classList.add(ks),F.trigger(this._element,M0)};this._element.style[r]="",this._queueCallback(f,this._element,!0)}_isShown(n=this._element){return n.classList.contains(Vu)}_configAfterMerge(n){return n.toggle=!!n.toggle,n.parent=vi(n.parent),n}_getDimension(){return this._element.classList.contains(W0)?H0:U0}_initializeChildren(){if(!this._config.parent)return;const n=this._getFirstLevelChildren(oc);for(const r of n){const f=ee.getElementFromSelector(r);f&&this._addAriaAndCollapsedClass([r],this._isShown(f))}}_getFirstLevelChildren(n){const r=ee.find(B0,this._config.parent);return ee.find(n,this._config.parent).filter(f=>!r.includes(f))}_addAriaAndCollapsedClass(n,r){if(n.length)for(const f of n)f.classList.toggle(q0,!r),f.setAttribute("aria-expanded",r)}static jQueryInterface(n){const r={};return typeof n=="string"&&/show|hide/.test(n)&&(r.toggle=!1),this.each(function(){const f=Ho.getOrCreateInstance(this,r);if(typeof n=="string"){if(typeof f[n]>"u")throw new TypeError(`No method named "${n}"`);f[n]()}})}}F.on(document,F0,oc,function(a){(a.target.tagName==="A"||a.delegateTarget&&a.delegateTarget.tagName==="A")&&a.preventDefault();for(const n of ee.getMultipleElementsFromSelector(this))Ho.getOrCreateInstance(n,{toggle:!1}).toggle()});Pn(Ho);const xf="dropdown",G0="bs.dropdown",Gi=`.${G0}`,xc=".data-api",Y0="Escape",Cf="Tab",j0="ArrowUp",Tf="ArrowDown",Q0=2,X0=`hide${Gi}`,Z0=`hidden${Gi}`,J0=`show${Gi}`,ew=`shown${Gi}`,Mp=`click${Gi}${xc}`,Fp=`keydown${Gi}${xc}`,tw=`keyup${Gi}${xc}`,Os="show",nw="dropup",rw="dropend",iw="dropstart",sw="dropup-center",ow="dropdown-center",Hi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',aw=`${Hi}.${Os}`,Ya=".dropdown-menu",lw=".navbar",uw=".navbar-nav",cw=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",dw=Nn()?"top-end":"top-start",fw=Nn()?"top-start":"top-end",pw=Nn()?"bottom-end":"bottom-start",hw=Nn()?"bottom-start":"bottom-end",vw=Nn()?"left-start":"right-start",_w=Nn()?"right-start":"left-start",mw="top",gw="bottom",bw={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},yw={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class yr extends Xn{constructor(n,r){super(n,r),this._popper=null,this._parent=this._element.parentNode,this._menu=ee.next(this._element,Ya)[0]||ee.prev(this._element,Ya)[0]||ee.findOne(Ya,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return bw}static get DefaultType(){return yw}static get NAME(){return xf}toggle(){return this._isShown()?this.hide():this.show()}show(){if(_i(this._element)||this._isShown())return;const n={relatedTarget:this._element};if(!F.trigger(this._element,J0,n).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(uw))for(const f of[].concat(...document.body.children))F.on(f,"mouseover",Ja);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Os),this._element.classList.add(Os),F.trigger(this._element,ew,n)}}hide(){if(_i(this._element)||!this._isShown())return;const n={relatedTarget:this._element};this._completeHide(n)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(n){if(!F.trigger(this._element,X0,n).defaultPrevented){if("ontouchstart"in document.documentElement)for(const f of[].concat(...document.body.children))F.off(f,"mouseover",Ja);this._popper&&this._popper.destroy(),this._menu.classList.remove(Os),this._element.classList.remove(Os),this._element.setAttribute("aria-expanded","false"),Vr.removeDataAttribute(this._menu,"popper"),F.trigger(this._element,Z0,n)}}_getConfig(n){if(n=super._getConfig(n),typeof n.reference=="object"&&!Ur(n.reference)&&typeof n.reference.getBoundingClientRect!="function")throw new TypeError(`${xf.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return n}_createPopper(){if(typeof yp>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let n=this._element;this._config.reference==="parent"?n=this._parent:Ur(this._config.reference)?n=vi(this._config.reference):typeof this._config.reference=="object"&&(n=this._config.reference);const r=this._getPopperConfig();this._popper=wc(n,this._menu,r)}_isShown(){return this._menu.classList.contains(Os)}_getPlacement(){const n=this._parent;if(n.classList.contains(rw))return vw;if(n.classList.contains(iw))return _w;if(n.classList.contains(sw))return mw;if(n.classList.contains(ow))return gw;const r=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return n.classList.contains(nw)?r?fw:dw:r?hw:pw}_detectNavbar(){return this._element.closest(lw)!==null}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(r=>Number.parseInt(r,10)):typeof n=="function"?r=>n(r,this._element):n}_getPopperConfig(){const n={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Vr.setDataAttribute(this._menu,"popper","static"),n.modifiers=[{name:"applyStyles",enabled:!1}]),{...n,...fn(this._config.popperConfig,[void 0,n])}}_selectMenuItem({key:n,target:r}){const f=ee.find(cw,this._menu).filter(v=>qs(v));f.length&&Ec(f,r,n===Tf,!f.includes(r)).focus()}static jQueryInterface(n){return this.each(function(){const r=yr.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof r[n]>"u")throw new TypeError(`No method named "${n}"`);r[n]()}})}static clearMenus(n){if(n.button===Q0||n.type==="keyup"&&n.key!==Cf)return;const r=ee.find(aw);for(const f of r){const v=yr.getInstance(f);if(!v||v._config.autoClose===!1)continue;const g=n.composedPath(),w=g.includes(v._menu);if(g.includes(v._element)||v._config.autoClose==="inside"&&!w||v._config.autoClose==="outside"&&w||v._menu.contains(n.target)&&(n.type==="keyup"&&n.key===Cf||/input|select|option|textarea|form/i.test(n.target.tagName)))continue;const T={relatedTarget:v._element};n.type==="click"&&(T.clickEvent=n),v._completeHide(T)}}static dataApiKeydownHandler(n){const r=/input|textarea/i.test(n.target.tagName),f=n.key===Y0,v=[j0,Tf].includes(n.key);if(!v&&!f||r&&!f)return;n.preventDefault();const g=this.matches(Hi)?this:ee.prev(this,Hi)[0]||ee.next(this,Hi)[0]||ee.findOne(Hi,n.delegateTarget.parentNode),w=yr.getOrCreateInstance(g);if(v){n.stopPropagation(),w.show(),w._selectMenuItem(n);return}w._isShown()&&(n.stopPropagation(),w.hide(),g.focus())}}F.on(document,Fp,Hi,yr.dataApiKeydownHandler);F.on(document,Fp,Ya,yr.dataApiKeydownHandler);F.on(document,Mp,yr.clearMenus);F.on(document,tw,yr.clearMenus);F.on(document,Mp,Hi,function(a){a.preventDefault(),yr.getOrCreateInstance(this).toggle()});Pn(yr);const qp="backdrop",ww="fade",Sf="show",If=`mousedown.bs.${qp}`,Ew={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Aw={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Bp extends zo{constructor(n){super(),this._config=this._getConfig(n),this._isAppended=!1,this._element=null}static get Default(){return Ew}static get DefaultType(){return Aw}static get NAME(){return qp}show(n){if(!this._config.isVisible){fn(n);return}this._append();const r=this._getElement();this._config.isAnimated&&Vo(r),r.classList.add(Sf),this._emulateAnimation(()=>{fn(n)})}hide(n){if(!this._config.isVisible){fn(n);return}this._getElement().classList.remove(Sf),this._emulateAnimation(()=>{this.dispose(),fn(n)})}dispose(){this._isAppended&&(F.off(this._element,If),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const n=document.createElement("div");n.className=this._config.className,this._config.isAnimated&&n.classList.add(ww),this._element=n}return this._element}_configAfterMerge(n){return n.rootElement=vi(n.rootElement),n}_append(){if(this._isAppended)return;const n=this._getElement();this._config.rootElement.append(n),F.on(n,If,()=>{fn(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(n){Cp(n,this._getElement(),this._config.isAnimated)}}const xw="focustrap",Cw="bs.focustrap",tl=`.${Cw}`,Tw=`focusin${tl}`,Sw=`keydown.tab${tl}`,Iw="Tab",Ow="forward",Of="backward",kw={autofocus:!0,trapElement:null},Dw={autofocus:"boolean",trapElement:"element"};class Wp extends zo{constructor(n){super(),this._config=this._getConfig(n),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return kw}static get DefaultType(){return Dw}static get NAME(){return xw}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),F.off(document,tl),F.on(document,Tw,n=>this._handleFocusin(n)),F.on(document,Sw,n=>this._handleKeydown(n)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,F.off(document,tl))}_handleFocusin(n){const{trapElement:r}=this._config;if(n.target===document||n.target===r||r.contains(n.target))return;const f=ee.focusableChildren(r);f.length===0?r.focus():this._lastTabNavDirection===Of?f[f.length-1].focus():f[0].focus()}_handleKeydown(n){n.key===Iw&&(this._lastTabNavDirection=n.shiftKey?Of:Ow)}}const kf=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Df=".sticky-top",Ha="padding-right",Nf="margin-right";class ac{constructor(){this._element=document.body}getWidth(){const n=document.documentElement.clientWidth;return Math.abs(window.innerWidth-n)}hide(){const n=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ha,r=>r+n),this._setElementAttributes(kf,Ha,r=>r+n),this._setElementAttributes(Df,Nf,r=>r-n)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ha),this._resetElementAttributes(kf,Ha),this._resetElementAttributes(Df,Nf)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(n,r,f){const v=this.getWidth(),g=w=>{if(w!==this._element&&window.innerWidth>w.clientWidth+v)return;this._saveInitialAttribute(w,r);const T=window.getComputedStyle(w).getPropertyValue(r);w.style.setProperty(r,`${f(Number.parseFloat(T))}px`)};this._applyManipulationCallback(n,g)}_saveInitialAttribute(n,r){const f=n.style.getPropertyValue(r);f&&Vr.setDataAttribute(n,r,f)}_resetElementAttributes(n,r){const f=v=>{const g=Vr.getDataAttribute(v,r);if(g===null){v.style.removeProperty(r);return}Vr.removeDataAttribute(v,r),v.style.setProperty(r,g)};this._applyManipulationCallback(n,f)}_applyManipulationCallback(n,r){if(Ur(n)){r(n);return}for(const f of ee.find(n,this._element))r(f)}}const Nw="modal",$w="bs.modal",$n=`.${$w}`,Pw=".data-api",Lw="Escape",Rw=`hide${$n}`,Mw=`hidePrevented${$n}`,Hp=`hidden${$n}`,Up=`show${$n}`,Fw=`shown${$n}`,qw=`resize${$n}`,Bw=`click.dismiss${$n}`,Ww=`mousedown.dismiss${$n}`,Hw=`keydown.dismiss${$n}`,Uw=`click${$n}${Pw}`,$f="modal-open",Vw="fade",Pf="show",zu="modal-static",zw=".modal.show",Kw=".modal-dialog",Gw=".modal-body",Yw='[data-bs-toggle="modal"]',jw={backdrop:!0,focus:!0,keyboard:!0},Qw={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Rs extends Xn{constructor(n,r){super(n,r),this._dialog=ee.findOne(Kw,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ac,this._addEventListeners()}static get Default(){return jw}static get DefaultType(){return Qw}static get NAME(){return Nw}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){this._isShown||this._isTransitioning||F.trigger(this._element,Up,{relatedTarget:n}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add($f),this._adjustDialog(),this._backdrop.show(()=>this._showElement(n)))}hide(){!this._isShown||this._isTransitioning||F.trigger(this._element,Rw).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Pf),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){F.off(window,$n),F.off(this._dialog,$n),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Bp({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Wp({trapElement:this._element})}_showElement(n){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const r=ee.findOne(Gw,this._dialog);r&&(r.scrollTop=0),Vo(this._element),this._element.classList.add(Pf);const f=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,F.trigger(this._element,Fw,{relatedTarget:n})};this._queueCallback(f,this._dialog,this._isAnimated())}_addEventListeners(){F.on(this._element,Hw,n=>{if(n.key===Lw){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),F.on(window,qw,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),F.on(this._element,Ww,n=>{F.one(this._element,Bw,r=>{if(!(this._element!==n.target||this._element!==r.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove($f),this._resetAdjustments(),this._scrollBar.reset(),F.trigger(this._element,Hp)})}_isAnimated(){return this._element.classList.contains(Vw)}_triggerBackdropTransition(){if(F.trigger(this._element,Mw).defaultPrevented)return;const r=this._element.scrollHeight>document.documentElement.clientHeight,f=this._element.style.overflowY;f==="hidden"||this._element.classList.contains(zu)||(r||(this._element.style.overflowY="hidden"),this._element.classList.add(zu),this._queueCallback(()=>{this._element.classList.remove(zu),this._queueCallback(()=>{this._element.style.overflowY=f},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const n=this._element.scrollHeight>document.documentElement.clientHeight,r=this._scrollBar.getWidth(),f=r>0;if(f&&!n){const v=Nn()?"paddingLeft":"paddingRight";this._element.style[v]=`${r}px`}if(!f&&n){const v=Nn()?"paddingRight":"paddingLeft";this._element.style[v]=`${r}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(n,r){return this.each(function(){const f=Rs.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof f[n]>"u")throw new TypeError(`No method named "${n}"`);f[n](r)}})}}F.on(document,Uw,Yw,function(a){const n=ee.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&a.preventDefault(),F.one(n,Up,v=>{v.defaultPrevented||F.one(n,Hp,()=>{qs(this)&&this.focus()})});const r=ee.findOne(zw);r&&Rs.getInstance(r).hide(),Rs.getOrCreateInstance(n).toggle(this)});al(Rs);Pn(Rs);const Xw="offcanvas",Zw="bs.offcanvas",Kr=`.${Zw}`,Vp=".data-api",Jw=`load${Kr}${Vp}`,eE="Escape",Lf="show",Rf="showing",Mf="hiding",tE="offcanvas-backdrop",zp=".offcanvas.show",nE=`show${Kr}`,rE=`shown${Kr}`,iE=`hide${Kr}`,Ff=`hidePrevented${Kr}`,Kp=`hidden${Kr}`,sE=`resize${Kr}`,oE=`click${Kr}${Vp}`,aE=`keydown.dismiss${Kr}`,lE='[data-bs-toggle="offcanvas"]',uE={backdrop:!0,keyboard:!0,scroll:!1},cE={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class mi extends Xn{constructor(n,r){super(n,r),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return uE}static get DefaultType(){return cE}static get NAME(){return Xw}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){if(this._isShown||F.trigger(this._element,nE,{relatedTarget:n}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ac().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Rf);const f=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Lf),this._element.classList.remove(Rf),F.trigger(this._element,rE,{relatedTarget:n})};this._queueCallback(f,this._element,!0)}hide(){if(!this._isShown||F.trigger(this._element,iE).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Mf),this._backdrop.hide();const r=()=>{this._element.classList.remove(Lf,Mf),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ac().reset(),F.trigger(this._element,Kp)};this._queueCallback(r,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const n=()=>{if(this._config.backdrop==="static"){F.trigger(this._element,Ff);return}this.hide()},r=!!this._config.backdrop;return new Bp({className:tE,isVisible:r,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:r?n:null})}_initializeFocusTrap(){return new Wp({trapElement:this._element})}_addEventListeners(){F.on(this._element,aE,n=>{if(n.key===eE){if(this._config.keyboard){this.hide();return}F.trigger(this._element,Ff)}})}static jQueryInterface(n){return this.each(function(){const r=mi.getOrCreateInstance(this,n);if(typeof n=="string"){if(r[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);r[n](this)}})}}F.on(document,oE,lE,function(a){const n=ee.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&a.preventDefault(),_i(this))return;F.one(n,Kp,()=>{qs(this)&&this.focus()});const r=ee.findOne(zp);r&&r!==n&&mi.getInstance(r).hide(),mi.getOrCreateInstance(n).toggle(this)});F.on(window,Jw,()=>{for(const a of ee.find(zp))mi.getOrCreateInstance(a).show()});F.on(window,sE,()=>{for(const a of ee.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(a).position!=="fixed"&&mi.getOrCreateInstance(a).hide()});al(mi);Pn(mi);const dE=/^aria-[\w-]*$/i,Gp={"*":["class","dir","id","lang","role",dE],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},fE=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),pE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,hE=(a,n)=>{const r=a.nodeName.toLowerCase();return n.includes(r)?fE.has(r)?!!pE.test(a.nodeValue):!0:n.filter(f=>f instanceof RegExp).some(f=>f.test(r))};function vE(a,n,r){if(!a.length)return a;if(r&&typeof r=="function")return r(a);const v=new window.DOMParser().parseFromString(a,"text/html"),g=[].concat(...v.body.querySelectorAll("*"));for(const w of g){const T=w.nodeName.toLowerCase();if(!Object.keys(n).includes(T)){w.remove();continue}const I=[].concat(...w.attributes),q=[].concat(n["*"]||[],n[T]||[]);for(const N of I)hE(N,q)||w.removeAttribute(N.nodeName)}return v.body.innerHTML}const _E="TemplateFactory",mE={allowList:Gp,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},gE={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},bE={entry:"(string|element|function|null)",selector:"(string|element)"};class yE extends zo{constructor(n){super(),this._config=this._getConfig(n)}static get Default(){return mE}static get DefaultType(){return gE}static get NAME(){return _E}getContent(){return Object.values(this._config.content).map(n=>this._resolvePossibleFunction(n)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(n){return this._checkContent(n),this._config.content={...this._config.content,...n},this}toHtml(){const n=document.createElement("div");n.innerHTML=this._maybeSanitize(this._config.template);for(const[v,g]of Object.entries(this._config.content))this._setContent(n,g,v);const r=n.children[0],f=this._resolvePossibleFunction(this._config.extraClass);return f&&r.classList.add(...f.split(" ")),r}_typeCheckConfig(n){super._typeCheckConfig(n),this._checkContent(n.content)}_checkContent(n){for(const[r,f]of Object.entries(n))super._typeCheckConfig({selector:r,entry:f},bE)}_setContent(n,r,f){const v=ee.findOne(f,n);if(v){if(r=this._resolvePossibleFunction(r),!r){v.remove();return}if(Ur(r)){this._putElementInTemplate(vi(r),v);return}if(this._config.html){v.innerHTML=this._maybeSanitize(r);return}v.textContent=r}}_maybeSanitize(n){return this._config.sanitize?vE(n,this._config.allowList,this._config.sanitizeFn):n}_resolvePossibleFunction(n){return fn(n,[void 0,this])}_putElementInTemplate(n,r){if(this._config.html){r.innerHTML="",r.append(n);return}r.textContent=n.textContent}}const wE="tooltip",EE=new Set(["sanitize","allowList","sanitizeFn"]),Ku="fade",AE="modal",Ua="show",xE=".tooltip-inner",qf=`.${AE}`,Bf="hide.bs.modal",Mo="hover",Gu="focus",Yu="click",CE="manual",TE="hide",SE="hidden",IE="show",OE="shown",kE="inserted",DE="click",NE="focusin",$E="focusout",PE="mouseenter",LE="mouseleave",RE={AUTO:"auto",TOP:"top",RIGHT:Nn()?"left":"right",BOTTOM:"bottom",LEFT:Nn()?"right":"left"},ME={allowList:Gp,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},FE={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ws extends Xn{constructor(n,r){if(typeof yp>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(n,r),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ME}static get DefaultType(){return FE}static get NAME(){return wE}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),F.off(this._element.closest(qf),Bf,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const n=F.trigger(this._element,this.constructor.eventName(IE)),f=(Ap(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(n.defaultPrevented||!f)return;this._disposePopper();const v=this._getTipElement();this._element.setAttribute("aria-describedby",v.getAttribute("id"));const{container:g}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(g.append(v),F.trigger(this._element,this.constructor.eventName(kE))),this._popper=this._createPopper(v),v.classList.add(Ua),"ontouchstart"in document.documentElement)for(const T of[].concat(...document.body.children))F.on(T,"mouseover",Ja);const w=()=>{F.trigger(this._element,this.constructor.eventName(OE)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(w,this.tip,this._isAnimated())}hide(){if(!this._isShown()||F.trigger(this._element,this.constructor.eventName(TE)).defaultPrevented)return;if(this._getTipElement().classList.remove(Ua),"ontouchstart"in document.documentElement)for(const v of[].concat(...document.body.children))F.off(v,"mouseover",Ja);this._activeTrigger[Yu]=!1,this._activeTrigger[Gu]=!1,this._activeTrigger[Mo]=!1,this._isHovered=null;const f=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),F.trigger(this._element,this.constructor.eventName(SE)))};this._queueCallback(f,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(n){const r=this._getTemplateFactory(n).toHtml();if(!r)return null;r.classList.remove(Ku,Ua),r.classList.add(`bs-${this.constructor.NAME}-auto`);const f=C1(this.constructor.NAME).toString();return r.setAttribute("id",f),this._isAnimated()&&r.classList.add(Ku),r}setContent(n){this._newContent=n,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(n){return this._templateFactory?this._templateFactory.changeContent(n):this._templateFactory=new yE({...this._config,content:n,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[xE]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(n){return this.constructor.getOrCreateInstance(n.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Ku)}_isShown(){return this.tip&&this.tip.classList.contains(Ua)}_createPopper(n){const r=fn(this._config.placement,[this,n,this._element]),f=RE[r.toUpperCase()];return wc(this._element,n,this._getPopperConfig(f))}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(r=>Number.parseInt(r,10)):typeof n=="function"?r=>n(r,this._element):n}_resolvePossibleFunction(n){return fn(n,[this._element,this._element])}_getPopperConfig(n){const r={placement:n,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:f=>{this._getTipElement().setAttribute("data-popper-placement",f.state.placement)}}]};return{...r,...fn(this._config.popperConfig,[void 0,r])}}_setListeners(){const n=this._config.trigger.split(" ");for(const r of n)if(r==="click")F.on(this._element,this.constructor.eventName(DE),this._config.selector,f=>{const v=this._initializeOnDelegatedTarget(f);v._activeTrigger[Yu]=!(v._isShown()&&v._activeTrigger[Yu]),v.toggle()});else if(r!==CE){const f=r===Mo?this.constructor.eventName(PE):this.constructor.eventName(NE),v=r===Mo?this.constructor.eventName(LE):this.constructor.eventName($E);F.on(this._element,f,this._config.selector,g=>{const w=this._initializeOnDelegatedTarget(g);w._activeTrigger[g.type==="focusin"?Gu:Mo]=!0,w._enter()}),F.on(this._element,v,this._config.selector,g=>{const w=this._initializeOnDelegatedTarget(g);w._activeTrigger[g.type==="focusout"?Gu:Mo]=w._element.contains(g.relatedTarget),w._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},F.on(this._element.closest(qf),Bf,this._hideModalHandler)}_fixTitle(){const n=this._element.getAttribute("title");n&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",n),this._element.setAttribute("data-bs-original-title",n),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(n,r){clearTimeout(this._timeout),this._timeout=setTimeout(n,r)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(n){const r=Vr.getDataAttributes(this._element);for(const f of Object.keys(r))EE.has(f)&&delete r[f];return n={...r,...typeof n=="object"&&n?n:{}},n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n.container=n.container===!1?document.body:vi(n.container),typeof n.delay=="number"&&(n.delay={show:n.delay,hide:n.delay}),typeof n.title=="number"&&(n.title=n.title.toString()),typeof n.content=="number"&&(n.content=n.content.toString()),n}_getDelegateConfig(){const n={};for(const[r,f]of Object.entries(this._config))this.constructor.Default[r]!==f&&(n[r]=f);return n.selector=!1,n.trigger="manual",n}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(n){return this.each(function(){const r=Ws.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof r[n]>"u")throw new TypeError(`No method named "${n}"`);r[n]()}})}}Pn(Ws);const qE="popover",BE=".popover-header",WE=".popover-body",HE={...Ws.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},UE={...Ws.DefaultType,content:"(null|string|element|function)"};class cl extends Ws{static get Default(){return HE}static get DefaultType(){return UE}static get NAME(){return qE}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[BE]:this._getTitle(),[WE]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(n){return this.each(function(){const r=cl.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof r[n]>"u")throw new TypeError(`No method named "${n}"`);r[n]()}})}}Pn(cl);const VE="scrollspy",zE="bs.scrollspy",Cc=`.${zE}`,KE=".data-api",GE=`activate${Cc}`,Wf=`click${Cc}`,YE=`load${Cc}${KE}`,jE="dropdown-item",Ts="active",QE='[data-bs-spy="scroll"]',ju="[href]",XE=".nav, .list-group",Hf=".nav-link",ZE=".nav-item",JE=".list-group-item",eA=`${Hf}, ${ZE} > ${Hf}, ${JE}`,tA=".dropdown",nA=".dropdown-toggle",rA={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},iA={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class dl extends Xn{constructor(n,r){super(n,r),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return rA}static get DefaultType(){return iA}static get NAME(){return VE}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const n of this._observableSections.values())this._observer.observe(n)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(n){return n.target=vi(n.target)||document.body,n.rootMargin=n.offset?`${n.offset}px 0px -30%`:n.rootMargin,typeof n.threshold=="string"&&(n.threshold=n.threshold.split(",").map(r=>Number.parseFloat(r))),n}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(F.off(this._config.target,Wf),F.on(this._config.target,Wf,ju,n=>{const r=this._observableSections.get(n.target.hash);if(r){n.preventDefault();const f=this._rootElement||window,v=r.offsetTop-this._element.offsetTop;if(f.scrollTo){f.scrollTo({top:v,behavior:"smooth"});return}f.scrollTop=v}}))}_getNewObserver(){const n={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(r=>this._observerCallback(r),n)}_observerCallback(n){const r=w=>this._targetLinks.get(`#${w.target.id}`),f=w=>{this._previousScrollData.visibleEntryTop=w.target.offsetTop,this._process(r(w))},v=(this._rootElement||document.documentElement).scrollTop,g=v>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=v;for(const w of n){if(!w.isIntersecting){this._activeTarget=null,this._clearActiveClass(r(w));continue}const T=w.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(g&&T){if(f(w),!v)return;continue}!g&&!T&&f(w)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const n=ee.find(ju,this._config.target);for(const r of n){if(!r.hash||_i(r))continue;const f=ee.findOne(decodeURI(r.hash),this._element);qs(f)&&(this._targetLinks.set(decodeURI(r.hash),r),this._observableSections.set(r.hash,f))}}_process(n){this._activeTarget!==n&&(this._clearActiveClass(this._config.target),this._activeTarget=n,n.classList.add(Ts),this._activateParents(n),F.trigger(this._element,GE,{relatedTarget:n}))}_activateParents(n){if(n.classList.contains(jE)){ee.findOne(nA,n.closest(tA)).classList.add(Ts);return}for(const r of ee.parents(n,XE))for(const f of ee.prev(r,eA))f.classList.add(Ts)}_clearActiveClass(n){n.classList.remove(Ts);const r=ee.find(`${ju}.${Ts}`,n);for(const f of r)f.classList.remove(Ts)}static jQueryInterface(n){return this.each(function(){const r=dl.getOrCreateInstance(this,n);if(typeof n=="string"){if(r[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);r[n]()}})}}F.on(window,YE,()=>{for(const a of ee.find(QE))dl.getOrCreateInstance(a)});Pn(dl);const sA="tab",oA="bs.tab",Yi=`.${oA}`,aA=`hide${Yi}`,lA=`hidden${Yi}`,uA=`show${Yi}`,cA=`shown${Yi}`,dA=`click${Yi}`,fA=`keydown${Yi}`,pA=`load${Yi}`,hA="ArrowLeft",Uf="ArrowRight",vA="ArrowUp",Vf="ArrowDown",Qu="Home",zf="End",Ui="active",Kf="fade",Xu="show",_A="dropdown",Yp=".dropdown-toggle",mA=".dropdown-menu",Zu=`:not(${Yp})`,gA='.list-group, .nav, [role="tablist"]',bA=".nav-item, .list-group-item",yA=`.nav-link${Zu}, .list-group-item${Zu}, [role="tab"]${Zu}`,jp='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ju=`${yA}, ${jp}`,wA=`.${Ui}[data-bs-toggle="tab"], .${Ui}[data-bs-toggle="pill"], .${Ui}[data-bs-toggle="list"]`;class Ms extends Xn{constructor(n){super(n),this._parent=this._element.closest(gA),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),F.on(this._element,fA,r=>this._keydown(r)))}static get NAME(){return sA}show(){const n=this._element;if(this._elemIsActive(n))return;const r=this._getActiveElem(),f=r?F.trigger(r,aA,{relatedTarget:n}):null;F.trigger(n,uA,{relatedTarget:r}).defaultPrevented||f&&f.defaultPrevented||(this._deactivate(r,n),this._activate(n,r))}_activate(n,r){if(!n)return;n.classList.add(Ui),this._activate(ee.getElementFromSelector(n));const f=()=>{if(n.getAttribute("role")!=="tab"){n.classList.add(Xu);return}n.removeAttribute("tabindex"),n.setAttribute("aria-selected",!0),this._toggleDropDown(n,!0),F.trigger(n,cA,{relatedTarget:r})};this._queueCallback(f,n,n.classList.contains(Kf))}_deactivate(n,r){if(!n)return;n.classList.remove(Ui),n.blur(),this._deactivate(ee.getElementFromSelector(n));const f=()=>{if(n.getAttribute("role")!=="tab"){n.classList.remove(Xu);return}n.setAttribute("aria-selected",!1),n.setAttribute("tabindex","-1"),this._toggleDropDown(n,!1),F.trigger(n,lA,{relatedTarget:r})};this._queueCallback(f,n,n.classList.contains(Kf))}_keydown(n){if(![hA,Uf,vA,Vf,Qu,zf].includes(n.key))return;n.stopPropagation(),n.preventDefault();const r=this._getChildren().filter(v=>!_i(v));let f;if([Qu,zf].includes(n.key))f=r[n.key===Qu?0:r.length-1];else{const v=[Uf,Vf].includes(n.key);f=Ec(r,n.target,v,!0)}f&&(f.focus({preventScroll:!0}),Ms.getOrCreateInstance(f).show())}_getChildren(){return ee.find(Ju,this._parent)}_getActiveElem(){return this._getChildren().find(n=>this._elemIsActive(n))||null}_setInitialAttributes(n,r){this._setAttributeIfNotExists(n,"role","tablist");for(const f of r)this._setInitialAttributesOnChild(f)}_setInitialAttributesOnChild(n){n=this._getInnerElement(n);const r=this._elemIsActive(n),f=this._getOuterElement(n);n.setAttribute("aria-selected",r),f!==n&&this._setAttributeIfNotExists(f,"role","presentation"),r||n.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(n,"role","tab"),this._setInitialAttributesOnTargetPanel(n)}_setInitialAttributesOnTargetPanel(n){const r=ee.getElementFromSelector(n);r&&(this._setAttributeIfNotExists(r,"role","tabpanel"),n.id&&this._setAttributeIfNotExists(r,"aria-labelledby",`${n.id}`))}_toggleDropDown(n,r){const f=this._getOuterElement(n);if(!f.classList.contains(_A))return;const v=(g,w)=>{const T=ee.findOne(g,f);T&&T.classList.toggle(w,r)};v(Yp,Ui),v(mA,Xu),f.setAttribute("aria-expanded",r)}_setAttributeIfNotExists(n,r,f){n.hasAttribute(r)||n.setAttribute(r,f)}_elemIsActive(n){return n.classList.contains(Ui)}_getInnerElement(n){return n.matches(Ju)?n:ee.findOne(Ju,n)}_getOuterElement(n){return n.closest(bA)||n}static jQueryInterface(n){return this.each(function(){const r=Ms.getOrCreateInstance(this);if(typeof n=="string"){if(r[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);r[n]()}})}}F.on(document,dA,jp,function(a){["A","AREA"].includes(this.tagName)&&a.preventDefault(),!_i(this)&&Ms.getOrCreateInstance(this).show()});F.on(window,pA,()=>{for(const a of ee.find(wA))Ms.getOrCreateInstance(a)});Pn(Ms);const EA="toast",AA="bs.toast",yi=`.${AA}`,xA=`mouseover${yi}`,CA=`mouseout${yi}`,TA=`focusin${yi}`,SA=`focusout${yi}`,IA=`hide${yi}`,OA=`hidden${yi}`,kA=`show${yi}`,DA=`shown${yi}`,NA="fade",Gf="hide",Va="show",za="showing",$A={animation:"boolean",autohide:"boolean",delay:"number"},PA={animation:!0,autohide:!0,delay:5e3};class fl extends Xn{constructor(n,r){super(n,r),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return PA}static get DefaultType(){return $A}static get NAME(){return EA}show(){if(F.trigger(this._element,kA).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(NA);const r=()=>{this._element.classList.remove(za),F.trigger(this._element,DA),this._maybeScheduleHide()};this._element.classList.remove(Gf),Vo(this._element),this._element.classList.add(Va,za),this._queueCallback(r,this._element,this._config.animation)}hide(){if(!this.isShown()||F.trigger(this._element,IA).defaultPrevented)return;const r=()=>{this._element.classList.add(Gf),this._element.classList.remove(za,Va),F.trigger(this._element,OA)};this._element.classList.add(za),this._queueCallback(r,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Va),super.dispose()}isShown(){return this._element.classList.contains(Va)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(n,r){switch(n.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=r;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=r;break}}if(r){this._clearTimeout();return}const f=n.relatedTarget;this._element===f||this._element.contains(f)||this._maybeScheduleHide()}_setListeners(){F.on(this._element,xA,n=>this._onInteraction(n,!0)),F.on(this._element,CA,n=>this._onInteraction(n,!1)),F.on(this._element,TA,n=>this._onInteraction(n,!0)),F.on(this._element,SA,n=>this._onInteraction(n,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(n){return this.each(function(){const r=fl.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof r[n]>"u")throw new TypeError(`No method named "${n}"`);r[n](this)}})}}al(fl);Pn(fl);var Fo={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var LA=Fo.exports,Yf;function RA(){return Yf||(Yf=1,(function(a,n){(function(){var r,f="4.17.21",v=200,g="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",w="Expected a function",T="Invalid `variable` option passed into `_.template`",I="__lodash_hash_undefined__",q=500,N="__lodash_placeholder__",H=1,K=2,G=4,pe=1,te=2,X=1,Y=2,ke=4,Ie=8,ce=16,ve=32,Ae=64,de=128,Ge=256,je=512,Ue=30,Fe="...",gt=800,ot=16,Qt=1,Ve=2,at=3,Xe=1/0,Mt=9007199254740991,En=17976931348623157e292,Ne=NaN,It=4294967295,An=It-1,Gr=It>>>1,Zn=[["ary",de],["bind",X],["bindKey",Y],["curry",Ie],["curryRight",ce],["flip",je],["partial",ve],["partialRight",Ae],["rearg",Ge]],Be="[object Arguments]",pn="[object Array]",Yr="[object AsyncFunction]",Ft="[object Boolean]",Ln="[object Date]",Hs="[object DOMException]",Jn="[object Error]",jr="[object Function]",wi="[object GeneratorFunction]",qt="[object Map]",Er="[object Number]",Ei="[object Null]",Xt="[object Object]",Rn="[object Promise]",Us="[object Proxy]",At="[object RegExp]",xt="[object Set]",Mn="[object String]",er="[object Symbol]",Zt="[object Undefined]",_e="[object WeakMap]",et="[object WeakSet]",lt="[object ArrayBuffer]",tt="[object DataView]",Vs="[object Float32Array]",Ar="[object Float64Array]",zs="[object Int8Array]",tr="[object Int16Array]",Ks="[object Int32Array]",Gs="[object Uint8Array]",xr="[object Uint8ClampedArray]",nr="[object Uint16Array]",Ct="[object Uint32Array]",pl=/\b__p \+= '';/g,hl=/\b(__p \+=) '' \+/g,Tt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ys=/&(?:amp|lt|gt|quot|#39);/g,ji=/[&<>"']/g,vl=RegExp(Ys.source),Qi=RegExp(ji.source),js=/<%-([\s\S]+?)%>/g,Qs=/<%([\s\S]+?)%>/g,M=/<%=([\s\S]+?)%>/g,_l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xs=/^\w*$/,ml=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zs=/[\\^$.*+?()[\]{}|]/g,Bt=RegExp(Zs.source),Ai=/^\s+/,Fn=/\s/,qn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Js=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,eo=/[()=,{}\[\]\/\s]/,rr=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xn=/\w*$/,gl=/^[-+]0x[0-9a-f]+$/i,Xi=/^0b[01]+$/i,bl=/^\[object .+?Constructor\]$/,yl=/^0o[0-7]+$/i,Ot=/^(?:0|[1-9]\d*)$/,xi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jt=/($^)/,en=/['\n\r\u2028\u2029\\]/g,Qr="\\ud800-\\udfff",Zi="\\u0300-\\u036f",ir="\\ufe20-\\ufe2f",Xr="\\u20d0-\\u20ff",Yo=Zi+ir+Xr,Ji="\\u2700-\\u27bf",jo="a-z\\xdf-\\xf6\\xf8-\\xff",wl="\\xac\\xb1\\xd7\\xf7",El="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Qo="\\u2000-\\u206f",Wt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cr="A-Z\\xc0-\\xd6\\xd8-\\xde",to="\\ufe0e\\ufe0f",nt=wl+El+Qo+Wt,Tr="[']",Al="["+Qr+"]",Xo="["+nt+"]",Ci="["+Yo+"]",sr="\\d+",xl="["+Ji+"]",Sr="["+jo+"]",Zr="[^"+Qr+nt+sr+Ji+jo+Cr+"]",no="\\ud83c[\\udffb-\\udfff]",or="(?:"+Ci+"|"+no+")",tn="[^"+Qr+"]",nn="(?:\\ud83c[\\udde6-\\uddff]){2}",Jr="[\\ud800-\\udbff][\\udc00-\\udfff]",Bn="["+Cr+"]",Ti="\\u200d",Zo="(?:"+Sr+"|"+Zr+")",ei="(?:"+Bn+"|"+Zr+")",ro="(?:"+Tr+"(?:d|ll|m|re|s|t|ve))?",io="(?:"+Tr+"(?:D|LL|M|RE|S|T|VE))?",so=or+"?",Jo="["+to+"]?",ea="(?:"+Ti+"(?:"+[tn,nn,Jr].join("|")+")"+Jo+so+")*",es="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Cl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",oo=Jo+so+ea,ts="(?:"+[xl,nn,Jr].join("|")+")"+oo,Tl="(?:"+[tn+Ci+"?",Ci,nn,Jr,Al].join("|")+")",ns=RegExp(Tr,"g"),ao=RegExp(Ci,"g"),Si=RegExp(no+"(?="+no+")|"+Tl+oo,"g"),Sl=RegExp([Bn+"?"+Sr+"+"+ro+"(?="+[Xo,Bn,"$"].join("|")+")",ei+"+"+io+"(?="+[Xo,Bn+Zo,"$"].join("|")+")",Bn+"?"+Zo+"+"+ro,Bn+"+"+io,Cl,es,sr,ts].join("|"),"g"),rs=RegExp("["+Ti+Qr+Yo+to+"]"),is=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,lo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],uo=-1,Pe={};Pe[Vs]=Pe[Ar]=Pe[zs]=Pe[tr]=Pe[Ks]=Pe[Gs]=Pe[xr]=Pe[nr]=Pe[Ct]=!0,Pe[Be]=Pe[pn]=Pe[lt]=Pe[Ft]=Pe[tt]=Pe[Ln]=Pe[Jn]=Pe[jr]=Pe[qt]=Pe[Er]=Pe[Xt]=Pe[At]=Pe[xt]=Pe[Mn]=Pe[_e]=!1;var $e={};$e[Be]=$e[pn]=$e[lt]=$e[tt]=$e[Ft]=$e[Ln]=$e[Vs]=$e[Ar]=$e[zs]=$e[tr]=$e[Ks]=$e[qt]=$e[Er]=$e[Xt]=$e[At]=$e[xt]=$e[Mn]=$e[er]=$e[Gs]=$e[xr]=$e[nr]=$e[Ct]=!0,$e[Jn]=$e[jr]=$e[_e]=!1;var Le={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Il={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ol={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},kl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Dl=parseFloat,Nl=parseInt,Wn=typeof Fa=="object"&&Fa&&Fa.Object===Object&&Fa,$l=typeof self=="object"&&self&&self.Object===Object&&self,yt=Wn||$l||Function("return this")(),Cn=n&&!n.nodeType&&n,Ht=Cn&&!0&&a&&!a.nodeType&&a,ar=Ht&&Ht.exports===Cn,Ir=ar&&Wn.process,Dt=(function(){try{var y=Ht&&Ht.require&&Ht.require("util").types;return y||Ir&&Ir.binding&&Ir.binding("util")}catch{}})(),co=Dt&&Dt.isArrayBuffer,ta=Dt&&Dt.isDate,na=Dt&&Dt.isMap,lr=Dt&&Dt.isRegExp,ut=Dt&&Dt.isSet,Hn=Dt&&Dt.isTypedArray;function vt(y,D,C){switch(C.length){case 0:return y.call(D);case 1:return y.call(D,C[0]);case 2:return y.call(D,C[0],C[1]);case 3:return y.call(D,C[0],C[1],C[2])}return y.apply(D,C)}function Pl(y,D,C,z){for(var oe=-1,xe=y==null?0:y.length;++oe<xe;){var ct=y[oe];D(z,ct,C(ct),y)}return z}function rn(y,D){for(var C=-1,z=y==null?0:y.length;++C<z&&D(y[C],C,y)!==!1;);return y}function Ll(y,D){for(var C=y==null?0:y.length;C--&&D(y[C],C,y)!==!1;);return y}function ra(y,D){for(var C=-1,z=y==null?0:y.length;++C<z;)if(!D(y[C],C,y))return!1;return!0}function Un(y,D){for(var C=-1,z=y==null?0:y.length,oe=0,xe=[];++C<z;){var ct=y[C];D(ct,C,y)&&(xe[oe++]=ct)}return xe}function ss(y,D){var C=y==null?0:y.length;return!!C&&on(y,D,0)>-1}function fo(y,D,C){for(var z=-1,oe=y==null?0:y.length;++z<oe;)if(C(D,y[z]))return!0;return!1}function We(y,D){for(var C=-1,z=y==null?0:y.length,oe=Array(z);++C<z;)oe[C]=D(y[C],C,y);return oe}function sn(y,D){for(var C=-1,z=D.length,oe=y.length;++C<z;)y[oe+C]=D[C];return y}function os(y,D,C,z){var oe=-1,xe=y==null?0:y.length;for(z&&xe&&(C=y[++oe]);++oe<xe;)C=D(C,y[oe],oe,y);return C}function po(y,D,C,z){var oe=y==null?0:y.length;for(z&&oe&&(C=y[--oe]);oe--;)C=D(C,y[oe],oe,y);return C}function ho(y,D){for(var C=-1,z=y==null?0:y.length;++C<z;)if(D(y[C],C,y))return!0;return!1}var Rl=vo("length");function Ml(y){return y.split("")}function Fl(y){return y.match(bt)||[]}function ia(y,D,C){var z;return C(y,function(oe,xe,ct){if(D(oe,xe,ct))return z=xe,!1}),z}function Nt(y,D,C,z){for(var oe=y.length,xe=C+(z?1:-1);z?xe--:++xe<oe;)if(D(y[xe],xe,y))return xe;return-1}function on(y,D,C){return D===D?us(y,D,C):Nt(y,sa,C)}function Ii(y,D,C,z){for(var oe=C-1,xe=y.length;++oe<xe;)if(z(y[oe],D))return oe;return-1}function sa(y){return y!==y}function Or(y,D){var C=y==null?0:y.length;return C?mo(y,D)/C:Ne}function vo(y){return function(D){return D==null?r:D[y]}}function _o(y){return function(D){return y==null?r:y[D]}}function ti(y,D,C,z,oe){return oe(y,function(xe,ct,qe){C=z?(z=!1,xe):D(C,xe,ct,qe)}),C}function oa(y,D){var C=y.length;for(y.sort(D);C--;)y[C]=y[C].value;return y}function mo(y,D){for(var C,z=-1,oe=y.length;++z<oe;){var xe=D(y[z]);xe!==r&&(C=C===r?xe:C+xe)}return C}function as(y,D){for(var C=-1,z=Array(y);++C<y;)z[C]=D(C);return z}function ql(y,D){return We(D,function(C){return[C,y[C]]})}function Oi(y){return y&&y.slice(0,aa(y)+1).replace(Ai,"")}function $t(y){return function(D){return y(D)}}function go(y,D){return We(D,function(C){return y[C]})}function ki(y,D){return y.has(D)}function Ye(y,D){for(var C=-1,z=y.length;++C<z&&on(D,y[C],0)>-1;);return C}function ze(y,D){for(var C=y.length;C--&&on(D,y[C],0)>-1;);return C}function Ze(y,D){for(var C=y.length,z=0;C--;)y[C]===D&&++z;return z}var Vn=_o(Le),ur=_o(Il);function ni(y){return"\\"+kl[y]}function cr(y,D){return y==null?r:y[D]}function zn(y){return rs.test(y)}function Ke(y){return is.test(y)}function Bl(y){for(var D,C=[];!(D=y.next()).done;)C.push(D.value);return C}function bo(y){var D=-1,C=Array(y.size);return y.forEach(function(z,oe){C[++D]=[oe,z]}),C}function Ut(y,D){return function(C){return y(D(C))}}function Kn(y,D){for(var C=-1,z=y.length,oe=0,xe=[];++C<z;){var ct=y[C];(ct===D||ct===N)&&(y[C]=N,xe[oe++]=C)}return xe}function ls(y){var D=-1,C=Array(y.size);return y.forEach(function(z){C[++D]=z}),C}function Wl(y){var D=-1,C=Array(y.size);return y.forEach(function(z){C[++D]=[z,z]}),C}function us(y,D,C){for(var z=C-1,oe=y.length;++z<oe;)if(y[z]===D)return z;return-1}function yo(y,D,C){for(var z=C+1;z--;)if(y[z]===D)return z;return z}function ri(y){return zn(y)?la(y):Rl(y)}function hn(y){return zn(y)?Ul(y):Ml(y)}function aa(y){for(var D=y.length;D--&&Fn.test(y.charAt(D)););return D}var Hl=_o(Ol);function la(y){for(var D=Si.lastIndex=0;Si.test(y);)++D;return D}function Ul(y){return y.match(Si)||[]}function ua(y){return y.match(Sl)||[]}var ca=(function y(D){D=D==null?yt:ii.defaults(yt.Object(),D,ii.pick(yt,lo));var C=D.Array,z=D.Date,oe=D.Error,xe=D.Function,ct=D.Math,qe=D.Object,dr=D.RegExp,si=D.String,Pt=D.TypeError,cs=C.prototype,Gn=xe.prototype,oi=qe.prototype,ds=D["__core-js_shared__"],fs=Gn.toString,Ce=oi.hasOwnProperty,ps=0,wo=(function(){var e=/[^.]+$/.exec(ds&&ds.keys&&ds.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),Di=oi.toString,da=fs.call(qe),kr=yt._,De=dr("^"+fs.call(Ce).replace(Zs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hs=ar?D.Buffer:r,fr=D.Symbol,vs=D.Uint8Array,o=hs?hs.allocUnsafe:r,s=Ut(qe.getPrototypeOf,qe),u=qe.create,_=oi.propertyIsEnumerable,A=cs.splice,k=fr?fr.isConcatSpreadable:r,S=fr?fr.iterator:r,B=fr?fr.toStringTag:r,ae=(function(){try{var e=Mi(qe,"defineProperty");return e({},"",{}),e}catch{}})(),se=D.clearTimeout!==yt.clearTimeout&&D.clearTimeout,we=z&&z.now!==yt.Date.now&&z.now,Qe=D.setTimeout!==yt.setTimeout&&D.setTimeout,J=ct.ceil,Oe=ct.floor,Re=qe.getOwnPropertySymbols,wt=hs?hs.isBuffer:r,Vt=D.isFinite,Ni=cs.join,Dr=Ut(qe.keys,qe),Q=ct.max,_t=ct.min,Eo=z.now,Vl=D.parseInt,fa=ct.random,pr=cs.reverse,Nr=Mi(D,"DataView"),ai=Mi(D,"Map"),zl=Mi(D,"Promise"),_s=Mi(D,"Set"),Ao=Mi(D,"WeakMap"),xo=Mi(qe,"create"),pa=Ao&&new Ao,ms={},Qp=Fi(Nr),Xp=Fi(ai),Zp=Fi(zl),Jp=Fi(_s),eh=Fi(Ao),ha=fr?fr.prototype:r,Co=ha?ha.valueOf:r,Tc=ha?ha.toString:r;function p(e){if(rt(e)&&!fe(e)&&!(e instanceof Te)){if(e instanceof Tn)return e;if(Ce.call(e,"__wrapped__"))return Sd(e)}return new Tn(e)}var gs=(function(){function e(){}return function(t){if(!Je(t))return{};if(u)return u(t);e.prototype=t;var i=new e;return e.prototype=r,i}})();function va(){}function Tn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}p.templateSettings={escape:js,evaluate:Qs,interpolate:M,variable:"",imports:{_:p}},p.prototype=va.prototype,p.prototype.constructor=p,Tn.prototype=gs(va.prototype),Tn.prototype.constructor=Tn;function Te(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=It,this.__views__=[]}function th(){var e=new Te(this.__wrapped__);return e.__actions__=an(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=an(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=an(this.__views__),e}function nh(){if(this.__filtered__){var e=new Te(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function rh(){var e=this.__wrapped__.value(),t=this.__dir__,i=fe(e),l=t<0,d=i?e.length:0,h=vv(0,d,this.__views__),m=h.start,b=h.end,E=b-m,P=l?b:m-1,L=this.__iteratees__,R=L.length,V=0,Z=_t(E,this.__takeCount__);if(!i||!l&&d==E&&Z==E)return Qc(e,this.__actions__);var re=[];e:for(;E--&&V<Z;){P+=t;for(var be=-1,ie=e[P];++be<R;){var Ee=L[be],Se=Ee.iteratee,mn=Ee.type,Gt=Se(ie);if(mn==Ve)ie=Gt;else if(!Gt){if(mn==Qt)continue e;break e}}re[V++]=ie}return re}Te.prototype=gs(va.prototype),Te.prototype.constructor=Te;function $i(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var l=e[t];this.set(l[0],l[1])}}function ih(){this.__data__=xo?xo(null):{},this.size=0}function sh(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function oh(e){var t=this.__data__;if(xo){var i=t[e];return i===I?r:i}return Ce.call(t,e)?t[e]:r}function ah(e){var t=this.__data__;return xo?t[e]!==r:Ce.call(t,e)}function lh(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=xo&&t===r?I:t,this}$i.prototype.clear=ih,$i.prototype.delete=sh,$i.prototype.get=oh,$i.prototype.has=ah,$i.prototype.set=lh;function $r(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var l=e[t];this.set(l[0],l[1])}}function uh(){this.__data__=[],this.size=0}function ch(e){var t=this.__data__,i=_a(t,e);if(i<0)return!1;var l=t.length-1;return i==l?t.pop():A.call(t,i,1),--this.size,!0}function dh(e){var t=this.__data__,i=_a(t,e);return i<0?r:t[i][1]}function fh(e){return _a(this.__data__,e)>-1}function ph(e,t){var i=this.__data__,l=_a(i,e);return l<0?(++this.size,i.push([e,t])):i[l][1]=t,this}$r.prototype.clear=uh,$r.prototype.delete=ch,$r.prototype.get=dh,$r.prototype.has=fh,$r.prototype.set=ph;function Pr(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var l=e[t];this.set(l[0],l[1])}}function hh(){this.size=0,this.__data__={hash:new $i,map:new(ai||$r),string:new $i}}function vh(e){var t=Ia(this,e).delete(e);return this.size-=t?1:0,t}function _h(e){return Ia(this,e).get(e)}function mh(e){return Ia(this,e).has(e)}function gh(e,t){var i=Ia(this,e),l=i.size;return i.set(e,t),this.size+=i.size==l?0:1,this}Pr.prototype.clear=hh,Pr.prototype.delete=vh,Pr.prototype.get=_h,Pr.prototype.has=mh,Pr.prototype.set=gh;function Pi(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new Pr;++t<i;)this.add(e[t])}function bh(e){return this.__data__.set(e,I),this}function yh(e){return this.__data__.has(e)}Pi.prototype.add=Pi.prototype.push=bh,Pi.prototype.has=yh;function Yn(e){var t=this.__data__=new $r(e);this.size=t.size}function wh(){this.__data__=new $r,this.size=0}function Eh(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function Ah(e){return this.__data__.get(e)}function xh(e){return this.__data__.has(e)}function Ch(e,t){var i=this.__data__;if(i instanceof $r){var l=i.__data__;if(!ai||l.length<v-1)return l.push([e,t]),this.size=++i.size,this;i=this.__data__=new Pr(l)}return i.set(e,t),this.size=i.size,this}Yn.prototype.clear=wh,Yn.prototype.delete=Eh,Yn.prototype.get=Ah,Yn.prototype.has=xh,Yn.prototype.set=Ch;function Sc(e,t){var i=fe(e),l=!i&&qi(e),d=!i&&!l&&fi(e),h=!i&&!l&&!d&&Es(e),m=i||l||d||h,b=m?as(e.length,si):[],E=b.length;for(var P in e)(t||Ce.call(e,P))&&!(m&&(P=="length"||d&&(P=="offset"||P=="parent")||h&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||Fr(P,E)))&&b.push(P);return b}function Ic(e){var t=e.length;return t?e[nu(0,t-1)]:r}function Th(e,t){return Oa(an(e),Li(t,0,e.length))}function Sh(e){return Oa(an(e))}function Kl(e,t,i){(i!==r&&!jn(e[t],i)||i===r&&!(t in e))&&Lr(e,t,i)}function To(e,t,i){var l=e[t];(!(Ce.call(e,t)&&jn(l,i))||i===r&&!(t in e))&&Lr(e,t,i)}function _a(e,t){for(var i=e.length;i--;)if(jn(e[i][0],t))return i;return-1}function Ih(e,t,i,l){return li(e,function(d,h,m){t(l,d,i(d),m)}),l}function Oc(e,t){return e&&vr(t,St(t),e)}function Oh(e,t){return e&&vr(t,un(t),e)}function Lr(e,t,i){t=="__proto__"&&ae?ae(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function Gl(e,t){for(var i=-1,l=t.length,d=C(l),h=e==null;++i<l;)d[i]=h?r:Su(e,t[i]);return d}function Li(e,t,i){return e===e&&(i!==r&&(e=e<=i?e:i),t!==r&&(e=e>=t?e:t)),e}function Sn(e,t,i,l,d,h){var m,b=t&H,E=t&K,P=t&G;if(i&&(m=d?i(e,l,d,h):i(e)),m!==r)return m;if(!Je(e))return e;var L=fe(e);if(L){if(m=mv(e),!b)return an(e,m)}else{var R=Lt(e),V=R==jr||R==wi;if(fi(e))return Jc(e,b);if(R==Xt||R==Be||V&&!d){if(m=E||V?{}:gd(e),!b)return E?ov(e,Oh(m,e)):sv(e,Oc(m,e))}else{if(!$e[R])return d?e:{};m=gv(e,R,b)}}h||(h=new Yn);var Z=h.get(e);if(Z)return Z;h.set(e,m),Gd(e)?e.forEach(function(ie){m.add(Sn(ie,t,i,ie,e,h))}):zd(e)&&e.forEach(function(ie,Ee){m.set(Ee,Sn(ie,t,i,Ee,e,h))});var re=P?E?pu:fu:E?un:St,be=L?r:re(e);return rn(be||e,function(ie,Ee){be&&(Ee=ie,ie=e[Ee]),To(m,Ee,Sn(ie,t,i,Ee,e,h))}),m}function kh(e){var t=St(e);return function(i){return kc(i,e,t)}}function kc(e,t,i){var l=i.length;if(e==null)return!l;for(e=qe(e);l--;){var d=i[l],h=t[d],m=e[d];if(m===r&&!(d in e)||!h(m))return!1}return!0}function Dc(e,t,i){if(typeof e!="function")throw new Pt(w);return $o(function(){e.apply(r,i)},t)}function So(e,t,i,l){var d=-1,h=ss,m=!0,b=e.length,E=[],P=t.length;if(!b)return E;i&&(t=We(t,$t(i))),l?(h=fo,m=!1):t.length>=v&&(h=ki,m=!1,t=new Pi(t));e:for(;++d<b;){var L=e[d],R=i==null?L:i(L);if(L=l||L!==0?L:0,m&&R===R){for(var V=P;V--;)if(t[V]===R)continue e;E.push(L)}else h(t,R,l)||E.push(L)}return E}var li=id(hr),Nc=id(jl,!0);function Dh(e,t){var i=!0;return li(e,function(l,d,h){return i=!!t(l,d,h),i}),i}function ma(e,t,i){for(var l=-1,d=e.length;++l<d;){var h=e[l],m=t(h);if(m!=null&&(b===r?m===m&&!_n(m):i(m,b)))var b=m,E=h}return E}function Nh(e,t,i,l){var d=e.length;for(i=me(i),i<0&&(i=-i>d?0:d+i),l=l===r||l>d?d:me(l),l<0&&(l+=d),l=i>l?0:jd(l);i<l;)e[i++]=t;return e}function $c(e,t){var i=[];return li(e,function(l,d,h){t(l,d,h)&&i.push(l)}),i}function kt(e,t,i,l,d){var h=-1,m=e.length;for(i||(i=yv),d||(d=[]);++h<m;){var b=e[h];t>0&&i(b)?t>1?kt(b,t-1,i,l,d):sn(d,b):l||(d[d.length]=b)}return d}var Yl=sd(),Pc=sd(!0);function hr(e,t){return e&&Yl(e,t,St)}function jl(e,t){return e&&Pc(e,t,St)}function ga(e,t){return Un(t,function(i){return qr(e[i])})}function Ri(e,t){t=ci(t,e);for(var i=0,l=t.length;e!=null&&i<l;)e=e[_r(t[i++])];return i&&i==l?e:r}function Lc(e,t,i){var l=t(e);return fe(e)?l:sn(l,i(e))}function zt(e){return e==null?e===r?Zt:Ei:B&&B in qe(e)?hv(e):Sv(e)}function Ql(e,t){return e>t}function $h(e,t){return e!=null&&Ce.call(e,t)}function Ph(e,t){return e!=null&&t in qe(e)}function Lh(e,t,i){return e>=_t(t,i)&&e<Q(t,i)}function Xl(e,t,i){for(var l=i?fo:ss,d=e[0].length,h=e.length,m=h,b=C(h),E=1/0,P=[];m--;){var L=e[m];m&&t&&(L=We(L,$t(t))),E=_t(L.length,E),b[m]=!i&&(t||d>=120&&L.length>=120)?new Pi(m&&L):r}L=e[0];var R=-1,V=b[0];e:for(;++R<d&&P.length<E;){var Z=L[R],re=t?t(Z):Z;if(Z=i||Z!==0?Z:0,!(V?ki(V,re):l(P,re,i))){for(m=h;--m;){var be=b[m];if(!(be?ki(be,re):l(e[m],re,i)))continue e}V&&V.push(re),P.push(Z)}}return P}function Rh(e,t,i,l){return hr(e,function(d,h,m){t(l,i(d),h,m)}),l}function Io(e,t,i){t=ci(t,e),e=Ed(e,t);var l=e==null?e:e[_r(On(t))];return l==null?r:vt(l,e,i)}function Rc(e){return rt(e)&&zt(e)==Be}function Mh(e){return rt(e)&&zt(e)==lt}function Fh(e){return rt(e)&&zt(e)==Ln}function Oo(e,t,i,l,d){return e===t?!0:e==null||t==null||!rt(e)&&!rt(t)?e!==e&&t!==t:qh(e,t,i,l,Oo,d)}function qh(e,t,i,l,d,h){var m=fe(e),b=fe(t),E=m?pn:Lt(e),P=b?pn:Lt(t);E=E==Be?Xt:E,P=P==Be?Xt:P;var L=E==Xt,R=P==Xt,V=E==P;if(V&&fi(e)){if(!fi(t))return!1;m=!0,L=!1}if(V&&!L)return h||(h=new Yn),m||Es(e)?vd(e,t,i,l,d,h):fv(e,t,E,i,l,d,h);if(!(i&pe)){var Z=L&&Ce.call(e,"__wrapped__"),re=R&&Ce.call(t,"__wrapped__");if(Z||re){var be=Z?e.value():e,ie=re?t.value():t;return h||(h=new Yn),d(be,ie,i,l,h)}}return V?(h||(h=new Yn),pv(e,t,i,l,d,h)):!1}function Bh(e){return rt(e)&&Lt(e)==qt}function Zl(e,t,i,l){var d=i.length,h=d,m=!l;if(e==null)return!h;for(e=qe(e);d--;){var b=i[d];if(m&&b[2]?b[1]!==e[b[0]]:!(b[0]in e))return!1}for(;++d<h;){b=i[d];var E=b[0],P=e[E],L=b[1];if(m&&b[2]){if(P===r&&!(E in e))return!1}else{var R=new Yn;if(l)var V=l(P,L,E,e,t,R);if(!(V===r?Oo(L,P,pe|te,l,R):V))return!1}}return!0}function Mc(e){if(!Je(e)||Ev(e))return!1;var t=qr(e)?De:bl;return t.test(Fi(e))}function Wh(e){return rt(e)&&zt(e)==At}function Hh(e){return rt(e)&&Lt(e)==xt}function Uh(e){return rt(e)&&La(e.length)&&!!Pe[zt(e)]}function Fc(e){return typeof e=="function"?e:e==null?cn:typeof e=="object"?fe(e)?Wc(e[0],e[1]):Bc(e):af(e)}function Jl(e){if(!No(e))return Dr(e);var t=[];for(var i in qe(e))Ce.call(e,i)&&i!="constructor"&&t.push(i);return t}function Vh(e){if(!Je(e))return Tv(e);var t=No(e),i=[];for(var l in e)l=="constructor"&&(t||!Ce.call(e,l))||i.push(l);return i}function eu(e,t){return e<t}function qc(e,t){var i=-1,l=ln(e)?C(e.length):[];return li(e,function(d,h,m){l[++i]=t(d,h,m)}),l}function Bc(e){var t=vu(e);return t.length==1&&t[0][2]?yd(t[0][0],t[0][1]):function(i){return i===e||Zl(i,e,t)}}function Wc(e,t){return mu(e)&&bd(t)?yd(_r(e),t):function(i){var l=Su(i,e);return l===r&&l===t?Iu(i,e):Oo(t,l,pe|te)}}function ba(e,t,i,l,d){e!==t&&Yl(t,function(h,m){if(d||(d=new Yn),Je(h))zh(e,t,m,i,ba,l,d);else{var b=l?l(bu(e,m),h,m+"",e,t,d):r;b===r&&(b=h),Kl(e,m,b)}},un)}function zh(e,t,i,l,d,h,m){var b=bu(e,i),E=bu(t,i),P=m.get(E);if(P){Kl(e,i,P);return}var L=h?h(b,E,i+"",e,t,m):r,R=L===r;if(R){var V=fe(E),Z=!V&&fi(E),re=!V&&!Z&&Es(E);L=E,V||Z||re?fe(b)?L=b:dt(b)?L=an(b):Z?(R=!1,L=Jc(E,!0)):re?(R=!1,L=ed(E,!0)):L=[]:Po(E)||qi(E)?(L=b,qi(b)?L=Qd(b):(!Je(b)||qr(b))&&(L=gd(E))):R=!1}R&&(m.set(E,L),d(L,E,l,h,m),m.delete(E)),Kl(e,i,L)}function Hc(e,t){var i=e.length;if(i)return t+=t<0?i:0,Fr(t,i)?e[t]:r}function Uc(e,t,i){t.length?t=We(t,function(h){return fe(h)?function(m){return Ri(m,h.length===1?h[0]:h)}:h}):t=[cn];var l=-1;t=We(t,$t(ne()));var d=qc(e,function(h,m,b){var E=We(t,function(P){return P(h)});return{criteria:E,index:++l,value:h}});return oa(d,function(h,m){return iv(h,m,i)})}function Kh(e,t){return Vc(e,t,function(i,l){return Iu(e,l)})}function Vc(e,t,i){for(var l=-1,d=t.length,h={};++l<d;){var m=t[l],b=Ri(e,m);i(b,m)&&ko(h,ci(m,e),b)}return h}function Gh(e){return function(t){return Ri(t,e)}}function tu(e,t,i,l){var d=l?Ii:on,h=-1,m=t.length,b=e;for(e===t&&(t=an(t)),i&&(b=We(e,$t(i)));++h<m;)for(var E=0,P=t[h],L=i?i(P):P;(E=d(b,L,E,l))>-1;)b!==e&&A.call(b,E,1),A.call(e,E,1);return e}function zc(e,t){for(var i=e?t.length:0,l=i-1;i--;){var d=t[i];if(i==l||d!==h){var h=d;Fr(d)?A.call(e,d,1):su(e,d)}}return e}function nu(e,t){return e+Oe(fa()*(t-e+1))}function Yh(e,t,i,l){for(var d=-1,h=Q(J((t-e)/(i||1)),0),m=C(h);h--;)m[l?h:++d]=e,e+=i;return m}function ru(e,t){var i="";if(!e||t<1||t>Mt)return i;do t%2&&(i+=e),t=Oe(t/2),t&&(e+=e);while(t);return i}function ye(e,t){return yu(wd(e,t,cn),e+"")}function jh(e){return Ic(As(e))}function Qh(e,t){var i=As(e);return Oa(i,Li(t,0,i.length))}function ko(e,t,i,l){if(!Je(e))return e;t=ci(t,e);for(var d=-1,h=t.length,m=h-1,b=e;b!=null&&++d<h;){var E=_r(t[d]),P=i;if(E==="__proto__"||E==="constructor"||E==="prototype")return e;if(d!=m){var L=b[E];P=l?l(L,E,b):r,P===r&&(P=Je(L)?L:Fr(t[d+1])?[]:{})}To(b,E,P),b=b[E]}return e}var Kc=pa?function(e,t){return pa.set(e,t),e}:cn,Xh=ae?function(e,t){return ae(e,"toString",{configurable:!0,enumerable:!1,value:ku(t),writable:!0})}:cn;function Zh(e){return Oa(As(e))}function In(e,t,i){var l=-1,d=e.length;t<0&&(t=-t>d?0:d+t),i=i>d?d:i,i<0&&(i+=d),d=t>i?0:i-t>>>0,t>>>=0;for(var h=C(d);++l<d;)h[l]=e[l+t];return h}function Jh(e,t){var i;return li(e,function(l,d,h){return i=t(l,d,h),!i}),!!i}function ya(e,t,i){var l=0,d=e==null?l:e.length;if(typeof t=="number"&&t===t&&d<=Gr){for(;l<d;){var h=l+d>>>1,m=e[h];m!==null&&!_n(m)&&(i?m<=t:m<t)?l=h+1:d=h}return d}return iu(e,t,cn,i)}function iu(e,t,i,l){var d=0,h=e==null?0:e.length;if(h===0)return 0;t=i(t);for(var m=t!==t,b=t===null,E=_n(t),P=t===r;d<h;){var L=Oe((d+h)/2),R=i(e[L]),V=R!==r,Z=R===null,re=R===R,be=_n(R);if(m)var ie=l||re;else P?ie=re&&(l||V):b?ie=re&&V&&(l||!Z):E?ie=re&&V&&!Z&&(l||!be):Z||be?ie=!1:ie=l?R<=t:R<t;ie?d=L+1:h=L}return _t(h,An)}function Gc(e,t){for(var i=-1,l=e.length,d=0,h=[];++i<l;){var m=e[i],b=t?t(m):m;if(!i||!jn(b,E)){var E=b;h[d++]=m===0?0:m}}return h}function Yc(e){return typeof e=="number"?e:_n(e)?Ne:+e}function vn(e){if(typeof e=="string")return e;if(fe(e))return We(e,vn)+"";if(_n(e))return Tc?Tc.call(e):"";var t=e+"";return t=="0"&&1/e==-Xe?"-0":t}function ui(e,t,i){var l=-1,d=ss,h=e.length,m=!0,b=[],E=b;if(i)m=!1,d=fo;else if(h>=v){var P=t?null:cv(e);if(P)return ls(P);m=!1,d=ki,E=new Pi}else E=t?[]:b;e:for(;++l<h;){var L=e[l],R=t?t(L):L;if(L=i||L!==0?L:0,m&&R===R){for(var V=E.length;V--;)if(E[V]===R)continue e;t&&E.push(R),b.push(L)}else d(E,R,i)||(E!==b&&E.push(R),b.push(L))}return b}function su(e,t){return t=ci(t,e),e=Ed(e,t),e==null||delete e[_r(On(t))]}function jc(e,t,i,l){return ko(e,t,i(Ri(e,t)),l)}function wa(e,t,i,l){for(var d=e.length,h=l?d:-1;(l?h--:++h<d)&&t(e[h],h,e););return i?In(e,l?0:h,l?h+1:d):In(e,l?h+1:0,l?d:h)}function Qc(e,t){var i=e;return i instanceof Te&&(i=i.value()),os(t,function(l,d){return d.func.apply(d.thisArg,sn([l],d.args))},i)}function ou(e,t,i){var l=e.length;if(l<2)return l?ui(e[0]):[];for(var d=-1,h=C(l);++d<l;)for(var m=e[d],b=-1;++b<l;)b!=d&&(h[d]=So(h[d]||m,e[b],t,i));return ui(kt(h,1),t,i)}function Xc(e,t,i){for(var l=-1,d=e.length,h=t.length,m={};++l<d;){var b=l<h?t[l]:r;i(m,e[l],b)}return m}function au(e){return dt(e)?e:[]}function lu(e){return typeof e=="function"?e:cn}function ci(e,t){return fe(e)?e:mu(e,t)?[e]:Td(Me(e))}var ev=ye;function di(e,t,i){var l=e.length;return i=i===r?l:i,!t&&i>=l?e:In(e,t,i)}var Zc=se||function(e){return yt.clearTimeout(e)};function Jc(e,t){if(t)return e.slice();var i=e.length,l=o?o(i):new e.constructor(i);return e.copy(l),l}function uu(e){var t=new e.constructor(e.byteLength);return new vs(t).set(new vs(e)),t}function tv(e,t){var i=t?uu(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function nv(e){var t=new e.constructor(e.source,xn.exec(e));return t.lastIndex=e.lastIndex,t}function rv(e){return Co?qe(Co.call(e)):{}}function ed(e,t){var i=t?uu(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function td(e,t){if(e!==t){var i=e!==r,l=e===null,d=e===e,h=_n(e),m=t!==r,b=t===null,E=t===t,P=_n(t);if(!b&&!P&&!h&&e>t||h&&m&&E&&!b&&!P||l&&m&&E||!i&&E||!d)return 1;if(!l&&!h&&!P&&e<t||P&&i&&d&&!l&&!h||b&&i&&d||!m&&d||!E)return-1}return 0}function iv(e,t,i){for(var l=-1,d=e.criteria,h=t.criteria,m=d.length,b=i.length;++l<m;){var E=td(d[l],h[l]);if(E){if(l>=b)return E;var P=i[l];return E*(P=="desc"?-1:1)}}return e.index-t.index}function nd(e,t,i,l){for(var d=-1,h=e.length,m=i.length,b=-1,E=t.length,P=Q(h-m,0),L=C(E+P),R=!l;++b<E;)L[b]=t[b];for(;++d<m;)(R||d<h)&&(L[i[d]]=e[d]);for(;P--;)L[b++]=e[d++];return L}function rd(e,t,i,l){for(var d=-1,h=e.length,m=-1,b=i.length,E=-1,P=t.length,L=Q(h-b,0),R=C(L+P),V=!l;++d<L;)R[d]=e[d];for(var Z=d;++E<P;)R[Z+E]=t[E];for(;++m<b;)(V||d<h)&&(R[Z+i[m]]=e[d++]);return R}function an(e,t){var i=-1,l=e.length;for(t||(t=C(l));++i<l;)t[i]=e[i];return t}function vr(e,t,i,l){var d=!i;i||(i={});for(var h=-1,m=t.length;++h<m;){var b=t[h],E=l?l(i[b],e[b],b,i,e):r;E===r&&(E=e[b]),d?Lr(i,b,E):To(i,b,E)}return i}function sv(e,t){return vr(e,_u(e),t)}function ov(e,t){return vr(e,_d(e),t)}function Ea(e,t){return function(i,l){var d=fe(i)?Pl:Ih,h=t?t():{};return d(i,e,ne(l,2),h)}}function bs(e){return ye(function(t,i){var l=-1,d=i.length,h=d>1?i[d-1]:r,m=d>2?i[2]:r;for(h=e.length>3&&typeof h=="function"?(d--,h):r,m&&Kt(i[0],i[1],m)&&(h=d<3?r:h,d=1),t=qe(t);++l<d;){var b=i[l];b&&e(t,b,l,h)}return t})}function id(e,t){return function(i,l){if(i==null)return i;if(!ln(i))return e(i,l);for(var d=i.length,h=t?d:-1,m=qe(i);(t?h--:++h<d)&&l(m[h],h,m)!==!1;);return i}}function sd(e){return function(t,i,l){for(var d=-1,h=qe(t),m=l(t),b=m.length;b--;){var E=m[e?b:++d];if(i(h[E],E,h)===!1)break}return t}}function av(e,t,i){var l=t&X,d=Do(e);function h(){var m=this&&this!==yt&&this instanceof h?d:e;return m.apply(l?i:this,arguments)}return h}function od(e){return function(t){t=Me(t);var i=zn(t)?hn(t):r,l=i?i[0]:t.charAt(0),d=i?di(i,1).join(""):t.slice(1);return l[e]()+d}}function ys(e){return function(t){return os(sf(rf(t).replace(ns,"")),e,"")}}function Do(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=gs(e.prototype),l=e.apply(i,t);return Je(l)?l:i}}function lv(e,t,i){var l=Do(e);function d(){for(var h=arguments.length,m=C(h),b=h,E=ws(d);b--;)m[b]=arguments[b];var P=h<3&&m[0]!==E&&m[h-1]!==E?[]:Kn(m,E);if(h-=P.length,h<i)return dd(e,t,Aa,d.placeholder,r,m,P,r,r,i-h);var L=this&&this!==yt&&this instanceof d?l:e;return vt(L,this,m)}return d}function ad(e){return function(t,i,l){var d=qe(t);if(!ln(t)){var h=ne(i,3);t=St(t),i=function(b){return h(d[b],b,d)}}var m=e(t,i,l);return m>-1?d[h?t[m]:m]:r}}function ld(e){return Mr(function(t){var i=t.length,l=i,d=Tn.prototype.thru;for(e&&t.reverse();l--;){var h=t[l];if(typeof h!="function")throw new Pt(w);if(d&&!m&&Sa(h)=="wrapper")var m=new Tn([],!0)}for(l=m?l:i;++l<i;){h=t[l];var b=Sa(h),E=b=="wrapper"?hu(h):r;E&&gu(E[0])&&E[1]==(de|Ie|ve|Ge)&&!E[4].length&&E[9]==1?m=m[Sa(E[0])].apply(m,E[3]):m=h.length==1&&gu(h)?m[b]():m.thru(h)}return function(){var P=arguments,L=P[0];if(m&&P.length==1&&fe(L))return m.plant(L).value();for(var R=0,V=i?t[R].apply(this,P):L;++R<i;)V=t[R].call(this,V);return V}})}function Aa(e,t,i,l,d,h,m,b,E,P){var L=t&de,R=t&X,V=t&Y,Z=t&(Ie|ce),re=t&je,be=V?r:Do(e);function ie(){for(var Ee=arguments.length,Se=C(Ee),mn=Ee;mn--;)Se[mn]=arguments[mn];if(Z)var Gt=ws(ie),gn=Ze(Se,Gt);if(l&&(Se=nd(Se,l,d,Z)),h&&(Se=rd(Se,h,m,Z)),Ee-=gn,Z&&Ee<P){var ft=Kn(Se,Gt);return dd(e,t,Aa,ie.placeholder,i,Se,ft,b,E,P-Ee)}var Qn=R?i:this,Wr=V?Qn[e]:e;return Ee=Se.length,b?Se=Iv(Se,b):re&&Ee>1&&Se.reverse(),L&&E<Ee&&(Se.length=E),this&&this!==yt&&this instanceof ie&&(Wr=be||Do(Wr)),Wr.apply(Qn,Se)}return ie}function ud(e,t){return function(i,l){return Rh(i,e,t(l),{})}}function xa(e,t){return function(i,l){var d;if(i===r&&l===r)return t;if(i!==r&&(d=i),l!==r){if(d===r)return l;typeof i=="string"||typeof l=="string"?(i=vn(i),l=vn(l)):(i=Yc(i),l=Yc(l)),d=e(i,l)}return d}}function cu(e){return Mr(function(t){return t=We(t,$t(ne())),ye(function(i){var l=this;return e(t,function(d){return vt(d,l,i)})})})}function Ca(e,t){t=t===r?" ":vn(t);var i=t.length;if(i<2)return i?ru(t,e):t;var l=ru(t,J(e/ri(t)));return zn(t)?di(hn(l),0,e).join(""):l.slice(0,e)}function uv(e,t,i,l){var d=t&X,h=Do(e);function m(){for(var b=-1,E=arguments.length,P=-1,L=l.length,R=C(L+E),V=this&&this!==yt&&this instanceof m?h:e;++P<L;)R[P]=l[P];for(;E--;)R[P++]=arguments[++b];return vt(V,d?i:this,R)}return m}function cd(e){return function(t,i,l){return l&&typeof l!="number"&&Kt(t,i,l)&&(i=l=r),t=Br(t),i===r?(i=t,t=0):i=Br(i),l=l===r?t<i?1:-1:Br(l),Yh(t,i,l,e)}}function Ta(e){return function(t,i){return typeof t=="string"&&typeof i=="string"||(t=kn(t),i=kn(i)),e(t,i)}}function dd(e,t,i,l,d,h,m,b,E,P){var L=t&Ie,R=L?m:r,V=L?r:m,Z=L?h:r,re=L?r:h;t|=L?ve:Ae,t&=~(L?Ae:ve),t&ke||(t&=-4);var be=[e,t,d,Z,R,re,V,b,E,P],ie=i.apply(r,be);return gu(e)&&Ad(ie,be),ie.placeholder=l,xd(ie,e,t)}function du(e){var t=ct[e];return function(i,l){if(i=kn(i),l=l==null?0:_t(me(l),292),l&&Vt(i)){var d=(Me(i)+"e").split("e"),h=t(d[0]+"e"+(+d[1]+l));return d=(Me(h)+"e").split("e"),+(d[0]+"e"+(+d[1]-l))}return t(i)}}var cv=_s&&1/ls(new _s([,-0]))[1]==Xe?function(e){return new _s(e)}:$u;function fd(e){return function(t){var i=Lt(t);return i==qt?bo(t):i==xt?Wl(t):ql(t,e(t))}}function Rr(e,t,i,l,d,h,m,b){var E=t&Y;if(!E&&typeof e!="function")throw new Pt(w);var P=l?l.length:0;if(P||(t&=-97,l=d=r),m=m===r?m:Q(me(m),0),b=b===r?b:me(b),P-=d?d.length:0,t&Ae){var L=l,R=d;l=d=r}var V=E?r:hu(e),Z=[e,t,i,l,d,L,R,h,m,b];if(V&&Cv(Z,V),e=Z[0],t=Z[1],i=Z[2],l=Z[3],d=Z[4],b=Z[9]=Z[9]===r?E?0:e.length:Q(Z[9]-P,0),!b&&t&(Ie|ce)&&(t&=-25),!t||t==X)var re=av(e,t,i);else t==Ie||t==ce?re=lv(e,t,b):(t==ve||t==(X|ve))&&!d.length?re=uv(e,t,i,l):re=Aa.apply(r,Z);var be=V?Kc:Ad;return xd(be(re,Z),e,t)}function pd(e,t,i,l){return e===r||jn(e,oi[i])&&!Ce.call(l,i)?t:e}function hd(e,t,i,l,d,h){return Je(e)&&Je(t)&&(h.set(t,e),ba(e,t,r,hd,h),h.delete(t)),e}function dv(e){return Po(e)?r:e}function vd(e,t,i,l,d,h){var m=i&pe,b=e.length,E=t.length;if(b!=E&&!(m&&E>b))return!1;var P=h.get(e),L=h.get(t);if(P&&L)return P==t&&L==e;var R=-1,V=!0,Z=i&te?new Pi:r;for(h.set(e,t),h.set(t,e);++R<b;){var re=e[R],be=t[R];if(l)var ie=m?l(be,re,R,t,e,h):l(re,be,R,e,t,h);if(ie!==r){if(ie)continue;V=!1;break}if(Z){if(!ho(t,function(Ee,Se){if(!ki(Z,Se)&&(re===Ee||d(re,Ee,i,l,h)))return Z.push(Se)})){V=!1;break}}else if(!(re===be||d(re,be,i,l,h))){V=!1;break}}return h.delete(e),h.delete(t),V}function fv(e,t,i,l,d,h,m){switch(i){case tt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case lt:return!(e.byteLength!=t.byteLength||!h(new vs(e),new vs(t)));case Ft:case Ln:case Er:return jn(+e,+t);case Jn:return e.name==t.name&&e.message==t.message;case At:case Mn:return e==t+"";case qt:var b=bo;case xt:var E=l&pe;if(b||(b=ls),e.size!=t.size&&!E)return!1;var P=m.get(e);if(P)return P==t;l|=te,m.set(e,t);var L=vd(b(e),b(t),l,d,h,m);return m.delete(e),L;case er:if(Co)return Co.call(e)==Co.call(t)}return!1}function pv(e,t,i,l,d,h){var m=i&pe,b=fu(e),E=b.length,P=fu(t),L=P.length;if(E!=L&&!m)return!1;for(var R=E;R--;){var V=b[R];if(!(m?V in t:Ce.call(t,V)))return!1}var Z=h.get(e),re=h.get(t);if(Z&&re)return Z==t&&re==e;var be=!0;h.set(e,t),h.set(t,e);for(var ie=m;++R<E;){V=b[R];var Ee=e[V],Se=t[V];if(l)var mn=m?l(Se,Ee,V,t,e,h):l(Ee,Se,V,e,t,h);if(!(mn===r?Ee===Se||d(Ee,Se,i,l,h):mn)){be=!1;break}ie||(ie=V=="constructor")}if(be&&!ie){var Gt=e.constructor,gn=t.constructor;Gt!=gn&&"constructor"in e&&"constructor"in t&&!(typeof Gt=="function"&&Gt instanceof Gt&&typeof gn=="function"&&gn instanceof gn)&&(be=!1)}return h.delete(e),h.delete(t),be}function Mr(e){return yu(wd(e,r,kd),e+"")}function fu(e){return Lc(e,St,_u)}function pu(e){return Lc(e,un,_d)}var hu=pa?function(e){return pa.get(e)}:$u;function Sa(e){for(var t=e.name+"",i=ms[t],l=Ce.call(ms,t)?i.length:0;l--;){var d=i[l],h=d.func;if(h==null||h==e)return d.name}return t}function ws(e){var t=Ce.call(p,"placeholder")?p:e;return t.placeholder}function ne(){var e=p.iteratee||Du;return e=e===Du?Fc:e,arguments.length?e(arguments[0],arguments[1]):e}function Ia(e,t){var i=e.__data__;return wv(t)?i[typeof t=="string"?"string":"hash"]:i.map}function vu(e){for(var t=St(e),i=t.length;i--;){var l=t[i],d=e[l];t[i]=[l,d,bd(d)]}return t}function Mi(e,t){var i=cr(e,t);return Mc(i)?i:r}function hv(e){var t=Ce.call(e,B),i=e[B];try{e[B]=r;var l=!0}catch{}var d=Di.call(e);return l&&(t?e[B]=i:delete e[B]),d}var _u=Re?function(e){return e==null?[]:(e=qe(e),Un(Re(e),function(t){return _.call(e,t)}))}:Pu,_d=Re?function(e){for(var t=[];e;)sn(t,_u(e)),e=s(e);return t}:Pu,Lt=zt;(Nr&&Lt(new Nr(new ArrayBuffer(1)))!=tt||ai&&Lt(new ai)!=qt||zl&&Lt(zl.resolve())!=Rn||_s&&Lt(new _s)!=xt||Ao&&Lt(new Ao)!=_e)&&(Lt=function(e){var t=zt(e),i=t==Xt?e.constructor:r,l=i?Fi(i):"";if(l)switch(l){case Qp:return tt;case Xp:return qt;case Zp:return Rn;case Jp:return xt;case eh:return _e}return t});function vv(e,t,i){for(var l=-1,d=i.length;++l<d;){var h=i[l],m=h.size;switch(h.type){case"drop":e+=m;break;case"dropRight":t-=m;break;case"take":t=_t(t,e+m);break;case"takeRight":e=Q(e,t-m);break}}return{start:e,end:t}}function _v(e){var t=e.match(Js);return t?t[1].split(le):[]}function md(e,t,i){t=ci(t,e);for(var l=-1,d=t.length,h=!1;++l<d;){var m=_r(t[l]);if(!(h=e!=null&&i(e,m)))break;e=e[m]}return h||++l!=d?h:(d=e==null?0:e.length,!!d&&La(d)&&Fr(m,d)&&(fe(e)||qi(e)))}function mv(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&Ce.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function gd(e){return typeof e.constructor=="function"&&!No(e)?gs(s(e)):{}}function gv(e,t,i){var l=e.constructor;switch(t){case lt:return uu(e);case Ft:case Ln:return new l(+e);case tt:return tv(e,i);case Vs:case Ar:case zs:case tr:case Ks:case Gs:case xr:case nr:case Ct:return ed(e,i);case qt:return new l;case Er:case Mn:return new l(e);case At:return nv(e);case xt:return new l;case er:return rv(e)}}function bv(e,t){var i=t.length;if(!i)return e;var l=i-1;return t[l]=(i>1?"& ":"")+t[l],t=t.join(i>2?", ":" "),e.replace(qn,`{
/* [wrapped with `+t+`] */
`)}function yv(e){return fe(e)||qi(e)||!!(k&&e&&e[k])}function Fr(e,t){var i=typeof e;return t=t??Mt,!!t&&(i=="number"||i!="symbol"&&Ot.test(e))&&e>-1&&e%1==0&&e<t}function Kt(e,t,i){if(!Je(i))return!1;var l=typeof t;return(l=="number"?ln(i)&&Fr(t,i.length):l=="string"&&t in i)?jn(i[t],e):!1}function mu(e,t){if(fe(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||_n(e)?!0:Xs.test(e)||!_l.test(e)||t!=null&&e in qe(t)}function wv(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function gu(e){var t=Sa(e),i=p[t];if(typeof i!="function"||!(t in Te.prototype))return!1;if(e===i)return!0;var l=hu(i);return!!l&&e===l[0]}function Ev(e){return!!wo&&wo in e}var Av=ds?qr:Lu;function No(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||oi;return e===i}function bd(e){return e===e&&!Je(e)}function yd(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==r||e in qe(i))}}function xv(e){var t=$a(e,function(l){return i.size===q&&i.clear(),l}),i=t.cache;return t}function Cv(e,t){var i=e[1],l=t[1],d=i|l,h=d<(X|Y|de),m=l==de&&i==Ie||l==de&&i==Ge&&e[7].length<=t[8]||l==(de|Ge)&&t[7].length<=t[8]&&i==Ie;if(!(h||m))return e;l&X&&(e[2]=t[2],d|=i&X?0:ke);var b=t[3];if(b){var E=e[3];e[3]=E?nd(E,b,t[4]):b,e[4]=E?Kn(e[3],N):t[4]}return b=t[5],b&&(E=e[5],e[5]=E?rd(E,b,t[6]):b,e[6]=E?Kn(e[5],N):t[6]),b=t[7],b&&(e[7]=b),l&de&&(e[8]=e[8]==null?t[8]:_t(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=d,e}function Tv(e){var t=[];if(e!=null)for(var i in qe(e))t.push(i);return t}function Sv(e){return Di.call(e)}function wd(e,t,i){return t=Q(t===r?e.length-1:t,0),function(){for(var l=arguments,d=-1,h=Q(l.length-t,0),m=C(h);++d<h;)m[d]=l[t+d];d=-1;for(var b=C(t+1);++d<t;)b[d]=l[d];return b[t]=i(m),vt(e,this,b)}}function Ed(e,t){return t.length<2?e:Ri(e,In(t,0,-1))}function Iv(e,t){for(var i=e.length,l=_t(t.length,i),d=an(e);l--;){var h=t[l];e[l]=Fr(h,i)?d[h]:r}return e}function bu(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Ad=Cd(Kc),$o=Qe||function(e,t){return yt.setTimeout(e,t)},yu=Cd(Xh);function xd(e,t,i){var l=t+"";return yu(e,bv(l,Ov(_v(l),i)))}function Cd(e){var t=0,i=0;return function(){var l=Eo(),d=ot-(l-i);if(i=l,d>0){if(++t>=gt)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Oa(e,t){var i=-1,l=e.length,d=l-1;for(t=t===r?l:t;++i<t;){var h=nu(i,d),m=e[h];e[h]=e[i],e[i]=m}return e.length=t,e}var Td=xv(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ml,function(i,l,d,h){t.push(d?h.replace(rr,"$1"):l||i)}),t});function _r(e){if(typeof e=="string"||_n(e))return e;var t=e+"";return t=="0"&&1/e==-Xe?"-0":t}function Fi(e){if(e!=null){try{return fs.call(e)}catch{}try{return e+""}catch{}}return""}function Ov(e,t){return rn(Zn,function(i){var l="_."+i[0];t&i[1]&&!ss(e,l)&&e.push(l)}),e.sort()}function Sd(e){if(e instanceof Te)return e.clone();var t=new Tn(e.__wrapped__,e.__chain__);return t.__actions__=an(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function kv(e,t,i){(i?Kt(e,t,i):t===r)?t=1:t=Q(me(t),0);var l=e==null?0:e.length;if(!l||t<1)return[];for(var d=0,h=0,m=C(J(l/t));d<l;)m[h++]=In(e,d,d+=t);return m}function Dv(e){for(var t=-1,i=e==null?0:e.length,l=0,d=[];++t<i;){var h=e[t];h&&(d[l++]=h)}return d}function Nv(){var e=arguments.length;if(!e)return[];for(var t=C(e-1),i=arguments[0],l=e;l--;)t[l-1]=arguments[l];return sn(fe(i)?an(i):[i],kt(t,1))}var $v=ye(function(e,t){return dt(e)?So(e,kt(t,1,dt,!0)):[]}),Pv=ye(function(e,t){var i=On(t);return dt(i)&&(i=r),dt(e)?So(e,kt(t,1,dt,!0),ne(i,2)):[]}),Lv=ye(function(e,t){var i=On(t);return dt(i)&&(i=r),dt(e)?So(e,kt(t,1,dt,!0),r,i):[]});function Rv(e,t,i){var l=e==null?0:e.length;return l?(t=i||t===r?1:me(t),In(e,t<0?0:t,l)):[]}function Mv(e,t,i){var l=e==null?0:e.length;return l?(t=i||t===r?1:me(t),t=l-t,In(e,0,t<0?0:t)):[]}function Fv(e,t){return e&&e.length?wa(e,ne(t,3),!0,!0):[]}function qv(e,t){return e&&e.length?wa(e,ne(t,3),!0):[]}function Bv(e,t,i,l){var d=e==null?0:e.length;return d?(i&&typeof i!="number"&&Kt(e,t,i)&&(i=0,l=d),Nh(e,t,i,l)):[]}function Id(e,t,i){var l=e==null?0:e.length;if(!l)return-1;var d=i==null?0:me(i);return d<0&&(d=Q(l+d,0)),Nt(e,ne(t,3),d)}function Od(e,t,i){var l=e==null?0:e.length;if(!l)return-1;var d=l-1;return i!==r&&(d=me(i),d=i<0?Q(l+d,0):_t(d,l-1)),Nt(e,ne(t,3),d,!0)}function kd(e){var t=e==null?0:e.length;return t?kt(e,1):[]}function Wv(e){var t=e==null?0:e.length;return t?kt(e,Xe):[]}function Hv(e,t){var i=e==null?0:e.length;return i?(t=t===r?1:me(t),kt(e,t)):[]}function Uv(e){for(var t=-1,i=e==null?0:e.length,l={};++t<i;){var d=e[t];l[d[0]]=d[1]}return l}function Dd(e){return e&&e.length?e[0]:r}function Vv(e,t,i){var l=e==null?0:e.length;if(!l)return-1;var d=i==null?0:me(i);return d<0&&(d=Q(l+d,0)),on(e,t,d)}function zv(e){var t=e==null?0:e.length;return t?In(e,0,-1):[]}var Kv=ye(function(e){var t=We(e,au);return t.length&&t[0]===e[0]?Xl(t):[]}),Gv=ye(function(e){var t=On(e),i=We(e,au);return t===On(i)?t=r:i.pop(),i.length&&i[0]===e[0]?Xl(i,ne(t,2)):[]}),Yv=ye(function(e){var t=On(e),i=We(e,au);return t=typeof t=="function"?t:r,t&&i.pop(),i.length&&i[0]===e[0]?Xl(i,r,t):[]});function jv(e,t){return e==null?"":Ni.call(e,t)}function On(e){var t=e==null?0:e.length;return t?e[t-1]:r}function Qv(e,t,i){var l=e==null?0:e.length;if(!l)return-1;var d=l;return i!==r&&(d=me(i),d=d<0?Q(l+d,0):_t(d,l-1)),t===t?yo(e,t,d):Nt(e,sa,d,!0)}function Xv(e,t){return e&&e.length?Hc(e,me(t)):r}var Zv=ye(Nd);function Nd(e,t){return e&&e.length&&t&&t.length?tu(e,t):e}function Jv(e,t,i){return e&&e.length&&t&&t.length?tu(e,t,ne(i,2)):e}function e_(e,t,i){return e&&e.length&&t&&t.length?tu(e,t,r,i):e}var t_=Mr(function(e,t){var i=e==null?0:e.length,l=Gl(e,t);return zc(e,We(t,function(d){return Fr(d,i)?+d:d}).sort(td)),l});function n_(e,t){var i=[];if(!(e&&e.length))return i;var l=-1,d=[],h=e.length;for(t=ne(t,3);++l<h;){var m=e[l];t(m,l,e)&&(i.push(m),d.push(l))}return zc(e,d),i}function wu(e){return e==null?e:pr.call(e)}function r_(e,t,i){var l=e==null?0:e.length;return l?(i&&typeof i!="number"&&Kt(e,t,i)?(t=0,i=l):(t=t==null?0:me(t),i=i===r?l:me(i)),In(e,t,i)):[]}function i_(e,t){return ya(e,t)}function s_(e,t,i){return iu(e,t,ne(i,2))}function o_(e,t){var i=e==null?0:e.length;if(i){var l=ya(e,t);if(l<i&&jn(e[l],t))return l}return-1}function a_(e,t){return ya(e,t,!0)}function l_(e,t,i){return iu(e,t,ne(i,2),!0)}function u_(e,t){var i=e==null?0:e.length;if(i){var l=ya(e,t,!0)-1;if(jn(e[l],t))return l}return-1}function c_(e){return e&&e.length?Gc(e):[]}function d_(e,t){return e&&e.length?Gc(e,ne(t,2)):[]}function f_(e){var t=e==null?0:e.length;return t?In(e,1,t):[]}function p_(e,t,i){return e&&e.length?(t=i||t===r?1:me(t),In(e,0,t<0?0:t)):[]}function h_(e,t,i){var l=e==null?0:e.length;return l?(t=i||t===r?1:me(t),t=l-t,In(e,t<0?0:t,l)):[]}function v_(e,t){return e&&e.length?wa(e,ne(t,3),!1,!0):[]}function __(e,t){return e&&e.length?wa(e,ne(t,3)):[]}var m_=ye(function(e){return ui(kt(e,1,dt,!0))}),g_=ye(function(e){var t=On(e);return dt(t)&&(t=r),ui(kt(e,1,dt,!0),ne(t,2))}),b_=ye(function(e){var t=On(e);return t=typeof t=="function"?t:r,ui(kt(e,1,dt,!0),r,t)});function y_(e){return e&&e.length?ui(e):[]}function w_(e,t){return e&&e.length?ui(e,ne(t,2)):[]}function E_(e,t){return t=typeof t=="function"?t:r,e&&e.length?ui(e,r,t):[]}function Eu(e){if(!(e&&e.length))return[];var t=0;return e=Un(e,function(i){if(dt(i))return t=Q(i.length,t),!0}),as(t,function(i){return We(e,vo(i))})}function $d(e,t){if(!(e&&e.length))return[];var i=Eu(e);return t==null?i:We(i,function(l){return vt(t,r,l)})}var A_=ye(function(e,t){return dt(e)?So(e,t):[]}),x_=ye(function(e){return ou(Un(e,dt))}),C_=ye(function(e){var t=On(e);return dt(t)&&(t=r),ou(Un(e,dt),ne(t,2))}),T_=ye(function(e){var t=On(e);return t=typeof t=="function"?t:r,ou(Un(e,dt),r,t)}),S_=ye(Eu);function I_(e,t){return Xc(e||[],t||[],To)}function O_(e,t){return Xc(e||[],t||[],ko)}var k_=ye(function(e){var t=e.length,i=t>1?e[t-1]:r;return i=typeof i=="function"?(e.pop(),i):r,$d(e,i)});function Pd(e){var t=p(e);return t.__chain__=!0,t}function D_(e,t){return t(e),e}function ka(e,t){return t(e)}var N_=Mr(function(e){var t=e.length,i=t?e[0]:0,l=this.__wrapped__,d=function(h){return Gl(h,e)};return t>1||this.__actions__.length||!(l instanceof Te)||!Fr(i)?this.thru(d):(l=l.slice(i,+i+(t?1:0)),l.__actions__.push({func:ka,args:[d],thisArg:r}),new Tn(l,this.__chain__).thru(function(h){return t&&!h.length&&h.push(r),h}))});function $_(){return Pd(this)}function P_(){return new Tn(this.value(),this.__chain__)}function L_(){this.__values__===r&&(this.__values__=Yd(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}}function R_(){return this}function M_(e){for(var t,i=this;i instanceof va;){var l=Sd(i);l.__index__=0,l.__values__=r,t?d.__wrapped__=l:t=l;var d=l;i=i.__wrapped__}return d.__wrapped__=e,t}function F_(){var e=this.__wrapped__;if(e instanceof Te){var t=e;return this.__actions__.length&&(t=new Te(this)),t=t.reverse(),t.__actions__.push({func:ka,args:[wu],thisArg:r}),new Tn(t,this.__chain__)}return this.thru(wu)}function q_(){return Qc(this.__wrapped__,this.__actions__)}var B_=Ea(function(e,t,i){Ce.call(e,i)?++e[i]:Lr(e,i,1)});function W_(e,t,i){var l=fe(e)?ra:Dh;return i&&Kt(e,t,i)&&(t=r),l(e,ne(t,3))}function H_(e,t){var i=fe(e)?Un:$c;return i(e,ne(t,3))}var U_=ad(Id),V_=ad(Od);function z_(e,t){return kt(Da(e,t),1)}function K_(e,t){return kt(Da(e,t),Xe)}function G_(e,t,i){return i=i===r?1:me(i),kt(Da(e,t),i)}function Ld(e,t){var i=fe(e)?rn:li;return i(e,ne(t,3))}function Rd(e,t){var i=fe(e)?Ll:Nc;return i(e,ne(t,3))}var Y_=Ea(function(e,t,i){Ce.call(e,i)?e[i].push(t):Lr(e,i,[t])});function j_(e,t,i,l){e=ln(e)?e:As(e),i=i&&!l?me(i):0;var d=e.length;return i<0&&(i=Q(d+i,0)),Ra(e)?i<=d&&e.indexOf(t,i)>-1:!!d&&on(e,t,i)>-1}var Q_=ye(function(e,t,i){var l=-1,d=typeof t=="function",h=ln(e)?C(e.length):[];return li(e,function(m){h[++l]=d?vt(t,m,i):Io(m,t,i)}),h}),X_=Ea(function(e,t,i){Lr(e,i,t)});function Da(e,t){var i=fe(e)?We:qc;return i(e,ne(t,3))}function Z_(e,t,i,l){return e==null?[]:(fe(t)||(t=t==null?[]:[t]),i=l?r:i,fe(i)||(i=i==null?[]:[i]),Uc(e,t,i))}var J_=Ea(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});function em(e,t,i){var l=fe(e)?os:ti,d=arguments.length<3;return l(e,ne(t,4),i,d,li)}function tm(e,t,i){var l=fe(e)?po:ti,d=arguments.length<3;return l(e,ne(t,4),i,d,Nc)}function nm(e,t){var i=fe(e)?Un:$c;return i(e,Pa(ne(t,3)))}function rm(e){var t=fe(e)?Ic:jh;return t(e)}function im(e,t,i){(i?Kt(e,t,i):t===r)?t=1:t=me(t);var l=fe(e)?Th:Qh;return l(e,t)}function sm(e){var t=fe(e)?Sh:Zh;return t(e)}function om(e){if(e==null)return 0;if(ln(e))return Ra(e)?ri(e):e.length;var t=Lt(e);return t==qt||t==xt?e.size:Jl(e).length}function am(e,t,i){var l=fe(e)?ho:Jh;return i&&Kt(e,t,i)&&(t=r),l(e,ne(t,3))}var lm=ye(function(e,t){if(e==null)return[];var i=t.length;return i>1&&Kt(e,t[0],t[1])?t=[]:i>2&&Kt(t[0],t[1],t[2])&&(t=[t[0]]),Uc(e,kt(t,1),[])}),Na=we||function(){return yt.Date.now()};function um(e,t){if(typeof t!="function")throw new Pt(w);return e=me(e),function(){if(--e<1)return t.apply(this,arguments)}}function Md(e,t,i){return t=i?r:t,t=e&&t==null?e.length:t,Rr(e,de,r,r,r,r,t)}function Fd(e,t){var i;if(typeof t!="function")throw new Pt(w);return e=me(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=r),i}}var Au=ye(function(e,t,i){var l=X;if(i.length){var d=Kn(i,ws(Au));l|=ve}return Rr(e,l,t,i,d)}),qd=ye(function(e,t,i){var l=X|Y;if(i.length){var d=Kn(i,ws(qd));l|=ve}return Rr(t,l,e,i,d)});function Bd(e,t,i){t=i?r:t;var l=Rr(e,Ie,r,r,r,r,r,t);return l.placeholder=Bd.placeholder,l}function Wd(e,t,i){t=i?r:t;var l=Rr(e,ce,r,r,r,r,r,t);return l.placeholder=Wd.placeholder,l}function Hd(e,t,i){var l,d,h,m,b,E,P=0,L=!1,R=!1,V=!0;if(typeof e!="function")throw new Pt(w);t=kn(t)||0,Je(i)&&(L=!!i.leading,R="maxWait"in i,h=R?Q(kn(i.maxWait)||0,t):h,V="trailing"in i?!!i.trailing:V);function Z(ft){var Qn=l,Wr=d;return l=d=r,P=ft,m=e.apply(Wr,Qn),m}function re(ft){return P=ft,b=$o(Ee,t),L?Z(ft):m}function be(ft){var Qn=ft-E,Wr=ft-P,lf=t-Qn;return R?_t(lf,h-Wr):lf}function ie(ft){var Qn=ft-E,Wr=ft-P;return E===r||Qn>=t||Qn<0||R&&Wr>=h}function Ee(){var ft=Na();if(ie(ft))return Se(ft);b=$o(Ee,be(ft))}function Se(ft){return b=r,V&&l?Z(ft):(l=d=r,m)}function mn(){b!==r&&Zc(b),P=0,l=E=d=b=r}function Gt(){return b===r?m:Se(Na())}function gn(){var ft=Na(),Qn=ie(ft);if(l=arguments,d=this,E=ft,Qn){if(b===r)return re(E);if(R)return Zc(b),b=$o(Ee,t),Z(E)}return b===r&&(b=$o(Ee,t)),m}return gn.cancel=mn,gn.flush=Gt,gn}var cm=ye(function(e,t){return Dc(e,1,t)}),dm=ye(function(e,t,i){return Dc(e,kn(t)||0,i)});function fm(e){return Rr(e,je)}function $a(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Pt(w);var i=function(){var l=arguments,d=t?t.apply(this,l):l[0],h=i.cache;if(h.has(d))return h.get(d);var m=e.apply(this,l);return i.cache=h.set(d,m)||h,m};return i.cache=new($a.Cache||Pr),i}$a.Cache=Pr;function Pa(e){if(typeof e!="function")throw new Pt(w);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function pm(e){return Fd(2,e)}var hm=ev(function(e,t){t=t.length==1&&fe(t[0])?We(t[0],$t(ne())):We(kt(t,1),$t(ne()));var i=t.length;return ye(function(l){for(var d=-1,h=_t(l.length,i);++d<h;)l[d]=t[d].call(this,l[d]);return vt(e,this,l)})}),xu=ye(function(e,t){var i=Kn(t,ws(xu));return Rr(e,ve,r,t,i)}),Ud=ye(function(e,t){var i=Kn(t,ws(Ud));return Rr(e,Ae,r,t,i)}),vm=Mr(function(e,t){return Rr(e,Ge,r,r,r,t)});function _m(e,t){if(typeof e!="function")throw new Pt(w);return t=t===r?t:me(t),ye(e,t)}function mm(e,t){if(typeof e!="function")throw new Pt(w);return t=t==null?0:Q(me(t),0),ye(function(i){var l=i[t],d=di(i,0,t);return l&&sn(d,l),vt(e,this,d)})}function gm(e,t,i){var l=!0,d=!0;if(typeof e!="function")throw new Pt(w);return Je(i)&&(l="leading"in i?!!i.leading:l,d="trailing"in i?!!i.trailing:d),Hd(e,t,{leading:l,maxWait:t,trailing:d})}function bm(e){return Md(e,1)}function ym(e,t){return xu(lu(t),e)}function wm(){if(!arguments.length)return[];var e=arguments[0];return fe(e)?e:[e]}function Em(e){return Sn(e,G)}function Am(e,t){return t=typeof t=="function"?t:r,Sn(e,G,t)}function xm(e){return Sn(e,H|G)}function Cm(e,t){return t=typeof t=="function"?t:r,Sn(e,H|G,t)}function Tm(e,t){return t==null||kc(e,t,St(t))}function jn(e,t){return e===t||e!==e&&t!==t}var Sm=Ta(Ql),Im=Ta(function(e,t){return e>=t}),qi=Rc((function(){return arguments})())?Rc:function(e){return rt(e)&&Ce.call(e,"callee")&&!_.call(e,"callee")},fe=C.isArray,Om=co?$t(co):Mh;function ln(e){return e!=null&&La(e.length)&&!qr(e)}function dt(e){return rt(e)&&ln(e)}function km(e){return e===!0||e===!1||rt(e)&&zt(e)==Ft}var fi=wt||Lu,Dm=ta?$t(ta):Fh;function Nm(e){return rt(e)&&e.nodeType===1&&!Po(e)}function $m(e){if(e==null)return!0;if(ln(e)&&(fe(e)||typeof e=="string"||typeof e.splice=="function"||fi(e)||Es(e)||qi(e)))return!e.length;var t=Lt(e);if(t==qt||t==xt)return!e.size;if(No(e))return!Jl(e).length;for(var i in e)if(Ce.call(e,i))return!1;return!0}function Pm(e,t){return Oo(e,t)}function Lm(e,t,i){i=typeof i=="function"?i:r;var l=i?i(e,t):r;return l===r?Oo(e,t,r,i):!!l}function Cu(e){if(!rt(e))return!1;var t=zt(e);return t==Jn||t==Hs||typeof e.message=="string"&&typeof e.name=="string"&&!Po(e)}function Rm(e){return typeof e=="number"&&Vt(e)}function qr(e){if(!Je(e))return!1;var t=zt(e);return t==jr||t==wi||t==Yr||t==Us}function Vd(e){return typeof e=="number"&&e==me(e)}function La(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Mt}function Je(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function rt(e){return e!=null&&typeof e=="object"}var zd=na?$t(na):Bh;function Mm(e,t){return e===t||Zl(e,t,vu(t))}function Fm(e,t,i){return i=typeof i=="function"?i:r,Zl(e,t,vu(t),i)}function qm(e){return Kd(e)&&e!=+e}function Bm(e){if(Av(e))throw new oe(g);return Mc(e)}function Wm(e){return e===null}function Hm(e){return e==null}function Kd(e){return typeof e=="number"||rt(e)&&zt(e)==Er}function Po(e){if(!rt(e)||zt(e)!=Xt)return!1;var t=s(e);if(t===null)return!0;var i=Ce.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&fs.call(i)==da}var Tu=lr?$t(lr):Wh;function Um(e){return Vd(e)&&e>=-Mt&&e<=Mt}var Gd=ut?$t(ut):Hh;function Ra(e){return typeof e=="string"||!fe(e)&&rt(e)&&zt(e)==Mn}function _n(e){return typeof e=="symbol"||rt(e)&&zt(e)==er}var Es=Hn?$t(Hn):Uh;function Vm(e){return e===r}function zm(e){return rt(e)&&Lt(e)==_e}function Km(e){return rt(e)&&zt(e)==et}var Gm=Ta(eu),Ym=Ta(function(e,t){return e<=t});function Yd(e){if(!e)return[];if(ln(e))return Ra(e)?hn(e):an(e);if(S&&e[S])return Bl(e[S]());var t=Lt(e),i=t==qt?bo:t==xt?ls:As;return i(e)}function Br(e){if(!e)return e===0?e:0;if(e=kn(e),e===Xe||e===-Xe){var t=e<0?-1:1;return t*En}return e===e?e:0}function me(e){var t=Br(e),i=t%1;return t===t?i?t-i:t:0}function jd(e){return e?Li(me(e),0,It):0}function kn(e){if(typeof e=="number")return e;if(_n(e))return Ne;if(Je(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Je(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Oi(e);var i=Xi.test(e);return i||yl.test(e)?Nl(e.slice(2),i?2:8):gl.test(e)?Ne:+e}function Qd(e){return vr(e,un(e))}function jm(e){return e?Li(me(e),-Mt,Mt):e===0?e:0}function Me(e){return e==null?"":vn(e)}var Qm=bs(function(e,t){if(No(t)||ln(t)){vr(t,St(t),e);return}for(var i in t)Ce.call(t,i)&&To(e,i,t[i])}),Xd=bs(function(e,t){vr(t,un(t),e)}),Ma=bs(function(e,t,i,l){vr(t,un(t),e,l)}),Xm=bs(function(e,t,i,l){vr(t,St(t),e,l)}),Zm=Mr(Gl);function Jm(e,t){var i=gs(e);return t==null?i:Oc(i,t)}var eg=ye(function(e,t){e=qe(e);var i=-1,l=t.length,d=l>2?t[2]:r;for(d&&Kt(t[0],t[1],d)&&(l=1);++i<l;)for(var h=t[i],m=un(h),b=-1,E=m.length;++b<E;){var P=m[b],L=e[P];(L===r||jn(L,oi[P])&&!Ce.call(e,P))&&(e[P]=h[P])}return e}),tg=ye(function(e){return e.push(r,hd),vt(Zd,r,e)});function ng(e,t){return ia(e,ne(t,3),hr)}function rg(e,t){return ia(e,ne(t,3),jl)}function ig(e,t){return e==null?e:Yl(e,ne(t,3),un)}function sg(e,t){return e==null?e:Pc(e,ne(t,3),un)}function og(e,t){return e&&hr(e,ne(t,3))}function ag(e,t){return e&&jl(e,ne(t,3))}function lg(e){return e==null?[]:ga(e,St(e))}function ug(e){return e==null?[]:ga(e,un(e))}function Su(e,t,i){var l=e==null?r:Ri(e,t);return l===r?i:l}function cg(e,t){return e!=null&&md(e,t,$h)}function Iu(e,t){return e!=null&&md(e,t,Ph)}var dg=ud(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=Di.call(t)),e[t]=i},ku(cn)),fg=ud(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=Di.call(t)),Ce.call(e,t)?e[t].push(i):e[t]=[i]},ne),pg=ye(Io);function St(e){return ln(e)?Sc(e):Jl(e)}function un(e){return ln(e)?Sc(e,!0):Vh(e)}function hg(e,t){var i={};return t=ne(t,3),hr(e,function(l,d,h){Lr(i,t(l,d,h),l)}),i}function vg(e,t){var i={};return t=ne(t,3),hr(e,function(l,d,h){Lr(i,d,t(l,d,h))}),i}var _g=bs(function(e,t,i){ba(e,t,i)}),Zd=bs(function(e,t,i,l){ba(e,t,i,l)}),mg=Mr(function(e,t){var i={};if(e==null)return i;var l=!1;t=We(t,function(h){return h=ci(h,e),l||(l=h.length>1),h}),vr(e,pu(e),i),l&&(i=Sn(i,H|K|G,dv));for(var d=t.length;d--;)su(i,t[d]);return i});function gg(e,t){return Jd(e,Pa(ne(t)))}var bg=Mr(function(e,t){return e==null?{}:Kh(e,t)});function Jd(e,t){if(e==null)return{};var i=We(pu(e),function(l){return[l]});return t=ne(t),Vc(e,i,function(l,d){return t(l,d[0])})}function yg(e,t,i){t=ci(t,e);var l=-1,d=t.length;for(d||(d=1,e=r);++l<d;){var h=e==null?r:e[_r(t[l])];h===r&&(l=d,h=i),e=qr(h)?h.call(e):h}return e}function wg(e,t,i){return e==null?e:ko(e,t,i)}function Eg(e,t,i,l){return l=typeof l=="function"?l:r,e==null?e:ko(e,t,i,l)}var ef=fd(St),tf=fd(un);function Ag(e,t,i){var l=fe(e),d=l||fi(e)||Es(e);if(t=ne(t,4),i==null){var h=e&&e.constructor;d?i=l?new h:[]:Je(e)?i=qr(h)?gs(s(e)):{}:i={}}return(d?rn:hr)(e,function(m,b,E){return t(i,m,b,E)}),i}function xg(e,t){return e==null?!0:su(e,t)}function Cg(e,t,i){return e==null?e:jc(e,t,lu(i))}function Tg(e,t,i,l){return l=typeof l=="function"?l:r,e==null?e:jc(e,t,lu(i),l)}function As(e){return e==null?[]:go(e,St(e))}function Sg(e){return e==null?[]:go(e,un(e))}function Ig(e,t,i){return i===r&&(i=t,t=r),i!==r&&(i=kn(i),i=i===i?i:0),t!==r&&(t=kn(t),t=t===t?t:0),Li(kn(e),t,i)}function Og(e,t,i){return t=Br(t),i===r?(i=t,t=0):i=Br(i),e=kn(e),Lh(e,t,i)}function kg(e,t,i){if(i&&typeof i!="boolean"&&Kt(e,t,i)&&(t=i=r),i===r&&(typeof t=="boolean"?(i=t,t=r):typeof e=="boolean"&&(i=e,e=r)),e===r&&t===r?(e=0,t=1):(e=Br(e),t===r?(t=e,e=0):t=Br(t)),e>t){var l=e;e=t,t=l}if(i||e%1||t%1){var d=fa();return _t(e+d*(t-e+Dl("1e-"+((d+"").length-1))),t)}return nu(e,t)}var Dg=ys(function(e,t,i){return t=t.toLowerCase(),e+(i?nf(t):t)});function nf(e){return Ou(Me(e).toLowerCase())}function rf(e){return e=Me(e),e&&e.replace(xi,Vn).replace(ao,"")}function Ng(e,t,i){e=Me(e),t=vn(t);var l=e.length;i=i===r?l:Li(me(i),0,l);var d=i;return i-=t.length,i>=0&&e.slice(i,d)==t}function $g(e){return e=Me(e),e&&Qi.test(e)?e.replace(ji,ur):e}function Pg(e){return e=Me(e),e&&Bt.test(e)?e.replace(Zs,"\\$&"):e}var Lg=ys(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),Rg=ys(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),Mg=od("toLowerCase");function Fg(e,t,i){e=Me(e),t=me(t);var l=t?ri(e):0;if(!t||l>=t)return e;var d=(t-l)/2;return Ca(Oe(d),i)+e+Ca(J(d),i)}function qg(e,t,i){e=Me(e),t=me(t);var l=t?ri(e):0;return t&&l<t?e+Ca(t-l,i):e}function Bg(e,t,i){e=Me(e),t=me(t);var l=t?ri(e):0;return t&&l<t?Ca(t-l,i)+e:e}function Wg(e,t,i){return i||t==null?t=0:t&&(t=+t),Vl(Me(e).replace(Ai,""),t||0)}function Hg(e,t,i){return(i?Kt(e,t,i):t===r)?t=1:t=me(t),ru(Me(e),t)}function Ug(){var e=arguments,t=Me(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Vg=ys(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});function zg(e,t,i){return i&&typeof i!="number"&&Kt(e,t,i)&&(t=i=r),i=i===r?It:i>>>0,i?(e=Me(e),e&&(typeof t=="string"||t!=null&&!Tu(t))&&(t=vn(t),!t&&zn(e))?di(hn(e),0,i):e.split(t,i)):[]}var Kg=ys(function(e,t,i){return e+(i?" ":"")+Ou(t)});function Gg(e,t,i){return e=Me(e),i=i==null?0:Li(me(i),0,e.length),t=vn(t),e.slice(i,i+t.length)==t}function Yg(e,t,i){var l=p.templateSettings;i&&Kt(e,t,i)&&(t=r),e=Me(e),t=Ma({},t,l,pd);var d=Ma({},t.imports,l.imports,pd),h=St(d),m=go(d,h),b,E,P=0,L=t.interpolate||Jt,R="__p += '",V=dr((t.escape||Jt).source+"|"+L.source+"|"+(L===M?ht:Jt).source+"|"+(t.evaluate||Jt).source+"|$","g"),Z="//# sourceURL="+(Ce.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++uo+"]")+`
`;e.replace(V,function(ie,Ee,Se,mn,Gt,gn){return Se||(Se=mn),R+=e.slice(P,gn).replace(en,ni),Ee&&(b=!0,R+=`' +
__e(`+Ee+`) +
'`),Gt&&(E=!0,R+=`';
`+Gt+`;
__p += '`),Se&&(R+=`' +
((__t = (`+Se+`)) == null ? '' : __t) +
'`),P=gn+ie.length,ie}),R+=`';
`;var re=Ce.call(t,"variable")&&t.variable;if(!re)R=`with (obj) {
`+R+`
}
`;else if(eo.test(re))throw new oe(T);R=(E?R.replace(pl,""):R).replace(hl,"$1").replace(Tt,"$1;"),R="function("+(re||"obj")+`) {
`+(re?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(b?", __e = _.escape":"")+(E?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+R+`return __p
}`;var be=of(function(){return xe(h,Z+"return "+R).apply(r,m)});if(be.source=R,Cu(be))throw be;return be}function jg(e){return Me(e).toLowerCase()}function Qg(e){return Me(e).toUpperCase()}function Xg(e,t,i){if(e=Me(e),e&&(i||t===r))return Oi(e);if(!e||!(t=vn(t)))return e;var l=hn(e),d=hn(t),h=Ye(l,d),m=ze(l,d)+1;return di(l,h,m).join("")}function Zg(e,t,i){if(e=Me(e),e&&(i||t===r))return e.slice(0,aa(e)+1);if(!e||!(t=vn(t)))return e;var l=hn(e),d=ze(l,hn(t))+1;return di(l,0,d).join("")}function Jg(e,t,i){if(e=Me(e),e&&(i||t===r))return e.replace(Ai,"");if(!e||!(t=vn(t)))return e;var l=hn(e),d=Ye(l,hn(t));return di(l,d).join("")}function eb(e,t){var i=Ue,l=Fe;if(Je(t)){var d="separator"in t?t.separator:d;i="length"in t?me(t.length):i,l="omission"in t?vn(t.omission):l}e=Me(e);var h=e.length;if(zn(e)){var m=hn(e);h=m.length}if(i>=h)return e;var b=i-ri(l);if(b<1)return l;var E=m?di(m,0,b).join(""):e.slice(0,b);if(d===r)return E+l;if(m&&(b+=E.length-b),Tu(d)){if(e.slice(b).search(d)){var P,L=E;for(d.global||(d=dr(d.source,Me(xn.exec(d))+"g")),d.lastIndex=0;P=d.exec(L);)var R=P.index;E=E.slice(0,R===r?b:R)}}else if(e.indexOf(vn(d),b)!=b){var V=E.lastIndexOf(d);V>-1&&(E=E.slice(0,V))}return E+l}function tb(e){return e=Me(e),e&&vl.test(e)?e.replace(Ys,Hl):e}var nb=ys(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),Ou=od("toUpperCase");function sf(e,t,i){return e=Me(e),t=i?r:t,t===r?Ke(e)?ua(e):Fl(e):e.match(t)||[]}var of=ye(function(e,t){try{return vt(e,r,t)}catch(i){return Cu(i)?i:new oe(i)}}),rb=Mr(function(e,t){return rn(t,function(i){i=_r(i),Lr(e,i,Au(e[i],e))}),e});function ib(e){var t=e==null?0:e.length,i=ne();return e=t?We(e,function(l){if(typeof l[1]!="function")throw new Pt(w);return[i(l[0]),l[1]]}):[],ye(function(l){for(var d=-1;++d<t;){var h=e[d];if(vt(h[0],this,l))return vt(h[1],this,l)}})}function sb(e){return kh(Sn(e,H))}function ku(e){return function(){return e}}function ob(e,t){return e==null||e!==e?t:e}var ab=ld(),lb=ld(!0);function cn(e){return e}function Du(e){return Fc(typeof e=="function"?e:Sn(e,H))}function ub(e){return Bc(Sn(e,H))}function cb(e,t){return Wc(e,Sn(t,H))}var db=ye(function(e,t){return function(i){return Io(i,e,t)}}),fb=ye(function(e,t){return function(i){return Io(e,i,t)}});function Nu(e,t,i){var l=St(t),d=ga(t,l);i==null&&!(Je(t)&&(d.length||!l.length))&&(i=t,t=e,e=this,d=ga(t,St(t)));var h=!(Je(i)&&"chain"in i)||!!i.chain,m=qr(e);return rn(d,function(b){var E=t[b];e[b]=E,m&&(e.prototype[b]=function(){var P=this.__chain__;if(h||P){var L=e(this.__wrapped__),R=L.__actions__=an(this.__actions__);return R.push({func:E,args:arguments,thisArg:e}),L.__chain__=P,L}return E.apply(e,sn([this.value()],arguments))})}),e}function pb(){return yt._===this&&(yt._=kr),this}function $u(){}function hb(e){return e=me(e),ye(function(t){return Hc(t,e)})}var vb=cu(We),_b=cu(ra),mb=cu(ho);function af(e){return mu(e)?vo(_r(e)):Gh(e)}function gb(e){return function(t){return e==null?r:Ri(e,t)}}var bb=cd(),yb=cd(!0);function Pu(){return[]}function Lu(){return!1}function wb(){return{}}function Eb(){return""}function Ab(){return!0}function xb(e,t){if(e=me(e),e<1||e>Mt)return[];var i=It,l=_t(e,It);t=ne(t),e-=It;for(var d=as(l,t);++i<e;)t(i);return d}function Cb(e){return fe(e)?We(e,_r):_n(e)?[e]:an(Td(Me(e)))}function Tb(e){var t=++ps;return Me(e)+t}var Sb=xa(function(e,t){return e+t},0),Ib=du("ceil"),Ob=xa(function(e,t){return e/t},1),kb=du("floor");function Db(e){return e&&e.length?ma(e,cn,Ql):r}function Nb(e,t){return e&&e.length?ma(e,ne(t,2),Ql):r}function $b(e){return Or(e,cn)}function Pb(e,t){return Or(e,ne(t,2))}function Lb(e){return e&&e.length?ma(e,cn,eu):r}function Rb(e,t){return e&&e.length?ma(e,ne(t,2),eu):r}var Mb=xa(function(e,t){return e*t},1),Fb=du("round"),qb=xa(function(e,t){return e-t},0);function Bb(e){return e&&e.length?mo(e,cn):0}function Wb(e,t){return e&&e.length?mo(e,ne(t,2)):0}return p.after=um,p.ary=Md,p.assign=Qm,p.assignIn=Xd,p.assignInWith=Ma,p.assignWith=Xm,p.at=Zm,p.before=Fd,p.bind=Au,p.bindAll=rb,p.bindKey=qd,p.castArray=wm,p.chain=Pd,p.chunk=kv,p.compact=Dv,p.concat=Nv,p.cond=ib,p.conforms=sb,p.constant=ku,p.countBy=B_,p.create=Jm,p.curry=Bd,p.curryRight=Wd,p.debounce=Hd,p.defaults=eg,p.defaultsDeep=tg,p.defer=cm,p.delay=dm,p.difference=$v,p.differenceBy=Pv,p.differenceWith=Lv,p.drop=Rv,p.dropRight=Mv,p.dropRightWhile=Fv,p.dropWhile=qv,p.fill=Bv,p.filter=H_,p.flatMap=z_,p.flatMapDeep=K_,p.flatMapDepth=G_,p.flatten=kd,p.flattenDeep=Wv,p.flattenDepth=Hv,p.flip=fm,p.flow=ab,p.flowRight=lb,p.fromPairs=Uv,p.functions=lg,p.functionsIn=ug,p.groupBy=Y_,p.initial=zv,p.intersection=Kv,p.intersectionBy=Gv,p.intersectionWith=Yv,p.invert=dg,p.invertBy=fg,p.invokeMap=Q_,p.iteratee=Du,p.keyBy=X_,p.keys=St,p.keysIn=un,p.map=Da,p.mapKeys=hg,p.mapValues=vg,p.matches=ub,p.matchesProperty=cb,p.memoize=$a,p.merge=_g,p.mergeWith=Zd,p.method=db,p.methodOf=fb,p.mixin=Nu,p.negate=Pa,p.nthArg=hb,p.omit=mg,p.omitBy=gg,p.once=pm,p.orderBy=Z_,p.over=vb,p.overArgs=hm,p.overEvery=_b,p.overSome=mb,p.partial=xu,p.partialRight=Ud,p.partition=J_,p.pick=bg,p.pickBy=Jd,p.property=af,p.propertyOf=gb,p.pull=Zv,p.pullAll=Nd,p.pullAllBy=Jv,p.pullAllWith=e_,p.pullAt=t_,p.range=bb,p.rangeRight=yb,p.rearg=vm,p.reject=nm,p.remove=n_,p.rest=_m,p.reverse=wu,p.sampleSize=im,p.set=wg,p.setWith=Eg,p.shuffle=sm,p.slice=r_,p.sortBy=lm,p.sortedUniq=c_,p.sortedUniqBy=d_,p.split=zg,p.spread=mm,p.tail=f_,p.take=p_,p.takeRight=h_,p.takeRightWhile=v_,p.takeWhile=__,p.tap=D_,p.throttle=gm,p.thru=ka,p.toArray=Yd,p.toPairs=ef,p.toPairsIn=tf,p.toPath=Cb,p.toPlainObject=Qd,p.transform=Ag,p.unary=bm,p.union=m_,p.unionBy=g_,p.unionWith=b_,p.uniq=y_,p.uniqBy=w_,p.uniqWith=E_,p.unset=xg,p.unzip=Eu,p.unzipWith=$d,p.update=Cg,p.updateWith=Tg,p.values=As,p.valuesIn=Sg,p.without=A_,p.words=sf,p.wrap=ym,p.xor=x_,p.xorBy=C_,p.xorWith=T_,p.zip=S_,p.zipObject=I_,p.zipObjectDeep=O_,p.zipWith=k_,p.entries=ef,p.entriesIn=tf,p.extend=Xd,p.extendWith=Ma,Nu(p,p),p.add=Sb,p.attempt=of,p.camelCase=Dg,p.capitalize=nf,p.ceil=Ib,p.clamp=Ig,p.clone=Em,p.cloneDeep=xm,p.cloneDeepWith=Cm,p.cloneWith=Am,p.conformsTo=Tm,p.deburr=rf,p.defaultTo=ob,p.divide=Ob,p.endsWith=Ng,p.eq=jn,p.escape=$g,p.escapeRegExp=Pg,p.every=W_,p.find=U_,p.findIndex=Id,p.findKey=ng,p.findLast=V_,p.findLastIndex=Od,p.findLastKey=rg,p.floor=kb,p.forEach=Ld,p.forEachRight=Rd,p.forIn=ig,p.forInRight=sg,p.forOwn=og,p.forOwnRight=ag,p.get=Su,p.gt=Sm,p.gte=Im,p.has=cg,p.hasIn=Iu,p.head=Dd,p.identity=cn,p.includes=j_,p.indexOf=Vv,p.inRange=Og,p.invoke=pg,p.isArguments=qi,p.isArray=fe,p.isArrayBuffer=Om,p.isArrayLike=ln,p.isArrayLikeObject=dt,p.isBoolean=km,p.isBuffer=fi,p.isDate=Dm,p.isElement=Nm,p.isEmpty=$m,p.isEqual=Pm,p.isEqualWith=Lm,p.isError=Cu,p.isFinite=Rm,p.isFunction=qr,p.isInteger=Vd,p.isLength=La,p.isMap=zd,p.isMatch=Mm,p.isMatchWith=Fm,p.isNaN=qm,p.isNative=Bm,p.isNil=Hm,p.isNull=Wm,p.isNumber=Kd,p.isObject=Je,p.isObjectLike=rt,p.isPlainObject=Po,p.isRegExp=Tu,p.isSafeInteger=Um,p.isSet=Gd,p.isString=Ra,p.isSymbol=_n,p.isTypedArray=Es,p.isUndefined=Vm,p.isWeakMap=zm,p.isWeakSet=Km,p.join=jv,p.kebabCase=Lg,p.last=On,p.lastIndexOf=Qv,p.lowerCase=Rg,p.lowerFirst=Mg,p.lt=Gm,p.lte=Ym,p.max=Db,p.maxBy=Nb,p.mean=$b,p.meanBy=Pb,p.min=Lb,p.minBy=Rb,p.stubArray=Pu,p.stubFalse=Lu,p.stubObject=wb,p.stubString=Eb,p.stubTrue=Ab,p.multiply=Mb,p.nth=Xv,p.noConflict=pb,p.noop=$u,p.now=Na,p.pad=Fg,p.padEnd=qg,p.padStart=Bg,p.parseInt=Wg,p.random=kg,p.reduce=em,p.reduceRight=tm,p.repeat=Hg,p.replace=Ug,p.result=yg,p.round=Fb,p.runInContext=y,p.sample=rm,p.size=om,p.snakeCase=Vg,p.some=am,p.sortedIndex=i_,p.sortedIndexBy=s_,p.sortedIndexOf=o_,p.sortedLastIndex=a_,p.sortedLastIndexBy=l_,p.sortedLastIndexOf=u_,p.startCase=Kg,p.startsWith=Gg,p.subtract=qb,p.sum=Bb,p.sumBy=Wb,p.template=Yg,p.times=xb,p.toFinite=Br,p.toInteger=me,p.toLength=jd,p.toLower=jg,p.toNumber=kn,p.toSafeInteger=jm,p.toString=Me,p.toUpper=Qg,p.trim=Xg,p.trimEnd=Zg,p.trimStart=Jg,p.truncate=eb,p.unescape=tb,p.uniqueId=Tb,p.upperCase=nb,p.upperFirst=Ou,p.each=Ld,p.eachRight=Rd,p.first=Dd,Nu(p,(function(){var e={};return hr(p,function(t,i){Ce.call(p.prototype,i)||(e[i]=t)}),e})(),{chain:!1}),p.VERSION=f,rn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),rn(["drop","take"],function(e,t){Te.prototype[e]=function(i){i=i===r?1:Q(me(i),0);var l=this.__filtered__&&!t?new Te(this):this.clone();return l.__filtered__?l.__takeCount__=_t(i,l.__takeCount__):l.__views__.push({size:_t(i,It),type:e+(l.__dir__<0?"Right":"")}),l},Te.prototype[e+"Right"]=function(i){return this.reverse()[e](i).reverse()}}),rn(["filter","map","takeWhile"],function(e,t){var i=t+1,l=i==Qt||i==at;Te.prototype[e]=function(d){var h=this.clone();return h.__iteratees__.push({iteratee:ne(d,3),type:i}),h.__filtered__=h.__filtered__||l,h}}),rn(["head","last"],function(e,t){var i="take"+(t?"Right":"");Te.prototype[e]=function(){return this[i](1).value()[0]}}),rn(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");Te.prototype[e]=function(){return this.__filtered__?new Te(this):this[i](1)}}),Te.prototype.compact=function(){return this.filter(cn)},Te.prototype.find=function(e){return this.filter(e).head()},Te.prototype.findLast=function(e){return this.reverse().find(e)},Te.prototype.invokeMap=ye(function(e,t){return typeof e=="function"?new Te(this):this.map(function(i){return Io(i,e,t)})}),Te.prototype.reject=function(e){return this.filter(Pa(ne(e)))},Te.prototype.slice=function(e,t){e=me(e);var i=this;return i.__filtered__&&(e>0||t<0)?new Te(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==r&&(t=me(t),i=t<0?i.dropRight(-t):i.take(t-e)),i)},Te.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Te.prototype.toArray=function(){return this.take(It)},hr(Te.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),l=/^(?:head|last)$/.test(t),d=p[l?"take"+(t=="last"?"Right":""):t],h=l||/^find/.test(t);d&&(p.prototype[t]=function(){var m=this.__wrapped__,b=l?[1]:arguments,E=m instanceof Te,P=b[0],L=E||fe(m),R=function(Ee){var Se=d.apply(p,sn([Ee],b));return l&&V?Se[0]:Se};L&&i&&typeof P=="function"&&P.length!=1&&(E=L=!1);var V=this.__chain__,Z=!!this.__actions__.length,re=h&&!V,be=E&&!Z;if(!h&&L){m=be?m:new Te(this);var ie=e.apply(m,b);return ie.__actions__.push({func:ka,args:[R],thisArg:r}),new Tn(ie,V)}return re&&be?e.apply(this,b):(ie=this.thru(R),re?l?ie.value()[0]:ie.value():ie)})}),rn(["pop","push","shift","sort","splice","unshift"],function(e){var t=cs[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",l=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var d=arguments;if(l&&!this.__chain__){var h=this.value();return t.apply(fe(h)?h:[],d)}return this[i](function(m){return t.apply(fe(m)?m:[],d)})}}),hr(Te.prototype,function(e,t){var i=p[t];if(i){var l=i.name+"";Ce.call(ms,l)||(ms[l]=[]),ms[l].push({name:t,func:i})}}),ms[Aa(r,Y).name]=[{name:"wrapper",func:r}],Te.prototype.clone=th,Te.prototype.reverse=nh,Te.prototype.value=rh,p.prototype.at=N_,p.prototype.chain=$_,p.prototype.commit=P_,p.prototype.next=L_,p.prototype.plant=M_,p.prototype.reverse=F_,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=q_,p.prototype.first=p.prototype.head,S&&(p.prototype[S]=R_),p}),ii=ca();Ht?((Ht.exports=ii)._=ii,Cn._=ii):yt._=ii}).call(LA)})(Fo,Fo.exports)),Fo.exports}var Wo=RA();function MA(a){let n=null,r=null,f=new Map;const v=H=>JSON.stringify(H),g=async(H,K,G,pe)=>{if(pe===(G==="cart"?n:r))return{success:!0,skipped:!0};if(f.has(G))return console.log(` Skipping duplicate ${G} request`),{success:!1,skipped:!0};const te=new AbortController,X=setTimeout(()=>te.abort(),5e3);f.set(G,!0);try{const Y=await fetch(H,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify(K),signal:te.signal});if(clearTimeout(X),!Y.ok)throw new Error(`HTTP ${Y.status}`);const ke=await Y.json();return G==="cart"?n=pe:r=pe,console.log(` ${G} updated - v${ke.version}`),{success:!0,data:ke}}catch(Y){return Y.name==="AbortError"?console.warn(` ${G} update timeout`):console.error(` Failed to update ${G}:`,Y.message),{success:!1,error:Y}}finally{f.delete(G)}},w=Wo.debounce(async H=>{const K=v(H);await g("/api/pos/terminal/update-cart",{terminal_id:a,cart:H},"cart",K)},800),T=Wo.debounce(async H=>{const K=v(H);await g("/api/pos/terminal/update-ui",{terminal_id:a,ui:H},"ui",K)},300),I=async H=>{const K=v(H);return await g("/api/pos/terminal/update-cart",{terminal_id:a,cart:H},"cart",K)},q=Wo.debounce(async(H,K)=>{const G=v(H),pe=v(K);if(G===n&&pe===r)return{success:!0,skipped:!0};const te=new AbortController,X=setTimeout(()=>te.abort(),5e3);try{const Y=await fetch("/api/pos/terminal/update-both",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify({terminal_id:a,cart:H,ui:K}),signal:te.signal});if(clearTimeout(X),!Y.ok)throw new Error(`HTTP ${Y.status}`);const ke=await Y.json();return n=G,r=pe,console.log(` Batch update successful - v${ke.version}`),{success:!0,data:ke}}catch(Y){return console.error(" Batch update failed:",Y.message),{success:!1,error:Y}}},500);return{broadcastCartUpdate:w,broadcastUIUpdate:T,broadcastImmediateCartUpdate:I,broadcastBatchUpdate:q,clearBroadcastCache:()=>{n=null,r=null,f.clear(),console.log(" Broadcast cache cleared")}}}const FA={key:0,class:"modal fade show d-block",tabindex:"-1",style:{background:"rgba(0,0,0,0.5)","z-index":"9999"}},qA={class:"modal-dialog modal-lg modal-dialog-centered"},BA={class:"modal-content"},WA={class:"modal-header bg-warning text-dark"},HA={class:"modal-body"},UA={key:0,class:"alert alert-info mb-3"},VA={class:"mb-0"},zA={key:1,class:"alert alert-danger"},KA={class:"text-muted"},GA={key:2},YA={class:"fw-bold"},jA={key:0,class:"badge bg-secondary ms-2"},QA={class:"table table-sm table-bordered"},XA={class:"text-end"},ZA={class:"text-end"},JA={class:"text-end text-danger fw-bold"},ex={class:"modal-footer"},tx={__name:"ConfirmMissingIngredientsModal",props:{show:Boolean,missingIngredients:{type:Array,default:()=>[]}},emits:["close","confirm"],setup(a,{emit:n}){const r=a,f=n;Wi(()=>r.show,T=>{console.log(" Modal show changed:",T),T&&console.log(" Missing ingredients:",r.missingIngredients)},{immediate:!0}),Wi(()=>r.missingIngredients,T=>{console.log(" Missing ingredients changed:",T),console.log(" Array length:",T?.length),console.log(" Is array?:",Array.isArray(T))},{immediate:!0,deep:!0});const v=ge(()=>{if(console.log(" Computing groupedByItem"),console.log(" Input missingIngredients:",r.missingIngredients),!Array.isArray(r.missingIngredients)||r.missingIngredients.length===0)return console.log(" No ingredients to group (not array or empty)"),{};const T={};return r.missingIngredients.forEach((I,q)=>{console.log(` Processing ingredient ${q}:`,I);const N=`${I.item_id}-${I.variant_id||"default"}`;T[N]||(T[N]={item_title:I.item_title,variant_name:I.variant_name,ingredients:[]}),T[N].ingredients.push(I)}),console.log(" Final grouped data:",T),T}),g=ge(()=>r.missingIngredients&&r.missingIngredients.length>0),w=ge(()=>Object.keys(v.value).length);return(T,I)=>a.show?pt((x(),O("div",FA,[c("div",qA,[c("div",BA,[c("div",WA,[I[4]||(I[4]=c("h5",{class:"modal-title"},[c("i",{class:"bi bi-exclamation-triangle-fill me-2"}),he(" Ingredient Shortage Warning ")],-1)),c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:I[0]||(I[0]=q=>f("close"))},[...I[3]||(I[3]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),c("div",HA,[g.value?j("",!0):(x(),O("div",UA,[I[5]||(I[5]=c("strong",null,"Debug Info:",-1)),c("ul",VA,[c("li",null,"Has data: "+$(g.value),1),c("li",null,"Array length: "+$(a.missingIngredients?.length||0),1),c("li",null,"Is array: "+$(Array.isArray(a.missingIngredients)),1),c("li",null,"Group count: "+$(w.value),1)])])),I[10]||(I[10]=c("div",{class:"alert alert-warning"},[c("strong",null,"Warning:"),he(" The following items have ingredient shortages. The order can still be placed, but pending ingredient deductions will be recorded and automatically deducted when stock arrives. ")],-1)),g.value?(x(),O("div",GA,[(x(!0),O(He,null,mt(v.value,(q,N)=>(x(),O("div",{key:N,class:"mb-4"},[c("h6",YA,[he($(q.item_title)+" ",1),q.variant_name?(x(),O("span",jA,$(q.variant_name),1)):j("",!0)]),c("table",QA,[I[9]||(I[9]=c("thead",{class:"table-light"},[c("tr",null,[c("th",null,"Ingredient"),c("th",{class:"text-end"},"Required"),c("th",{class:"text-end"},"Available"),c("th",{class:"text-end"},"Short")])],-1)),c("tbody",null,[(x(!0),O(He,null,mt(q.ingredients,H=>(x(),O("tr",{key:H.inventory_item_id},[c("td",null,$(H.inventory_item_name),1),c("td",XA,$(H.required_quantity)+" "+$(H.unit),1),c("td",ZA,$(H.available_quantity)+" "+$(H.unit),1),c("td",JA,$(H.shortage_quantity)+" "+$(H.unit),1)]))),128))])])]))),128))])):(x(),O("div",zA,[I[6]||(I[6]=c("i",{class:"bi bi-exclamation-circle me-2"},null,-1)),I[7]||(I[7]=he(" No missing ingredient data available. ",-1)),I[8]||(I[8]=c("br",null,null,-1)),c("small",KA," Received "+$(a.missingIngredients?.length||0)+" ingredient(s) ",1)]))]),c("div",ex,[c("button",{type:"button",class:"btn btn-secondary px-2 py-2",onClick:I[1]||(I[1]=q=>f("close"))}," Cancel Order "),c("button",{type:"button",class:"btn btn-primary px-4 py-2",onClick:I[2]||(I[2]=q=>f("confirm"))}," Proceed Anyway ")])])])],512)),[[Hr,a.show]]):j("",!0)}},nx={class:"page-wrapper"},rx={class:"container-fluid px-3 py-3"},ix={class:"row gx-3 gy-3"},sx={key:0,class:"row g-3 tablet-screen"},ox={class:"d-flex justify-content-between justify align-items-center mb-3"},ax={style:{width:"250px",position:"relative"}},lx={key:1,type:"text",class:"form-control form-control-sm",placeholder:"Search categories...",disabled:"",style:{"border-radius":"8px",padding:"8px 12px"}},ux={key:0,class:"col-12 text-center py-5"},cx=["onClick"],dx={class:"cat-icon-wrap"},fx={class:"cat-icon"},px=["src"],hx={key:1},vx={class:"cat-name"},_x={class:"cat-pill"},mx={key:0,class:"text-danger ms-1"},gx={key:0,class:"col-12"},bx={key:1},yx={class:"d-flex flex-wrap gap-2 align-items-center mb-4"},wx={class:"fw-bold mb-0"},Ex={class:"d-flex gap-2 ms-auto align-items-center"},Ax={class:"search-wrap position-relative"},xx={key:0,class:"col-12"},Cx={class:"alert alert-warning border-0 rounded-4 text-center py-5"},Tx={class:"text-muted mb-3"},Sx={class:"row g-3"},Ix={key:0,class:"card rounded-4 shadow-sm overflow-hidden border-3 w-100 d-flex flex-row align-items-stretch",style:{"border-color":"#dc3545"}},Ox={class:"position-relative",style:{flex:"0 0 40%","max-width":"40%"}},kx=["src"],Dx={class:"position-absolute top-0 start-0 m-1 px-2 py-1 rounded-pill text-white fw-semibold bg-danger",style:{"font-size":"0.58rem","letter-spacing":"0.3px"}},Nx={class:"p-3 d-flex flex-column justify-content-between",style:{flex:"1 1 60%","min-width":"0",position:"relative"}},$x={class:"h5 fw-bold mb-2 menu-name text-danger"},Px={class:"mt-2"},Lx=["onClick"],Rx=["onClick","disabled"],Mx={class:"qty-box border rounded-pill px-2 py-2 text-center fw-semibold left-card-cntrl-btn",style:{"min-width":"55px"}},Fx=["onClick"],qx={class:"position-relative",style:{flex:"0 0 40%","max-width":"40%"}},Bx=["src"],Wx={key:0,class:"position-absolute bottom-0 start-0 end-0 text-center bg-light bg-opacity-75 fw-semibold",style:{"font-size":"0.6rem !important",padding:"2px 4px"}},Hx={key:0,class:"text-muted text-decoration-line-through me-1"},Ux={class:"fw-bold text-success me-2"},Vx={key:1,class:"text-muted text-decoration-line-through me-1"},zx={class:"fw-bold text-success"},Kx={class:"text-decoration-line-through opacity-75 me-1"},Gx={class:"fw-bold text-white"},Yx={key:1,class:"position-absolute bottom-0 start-0 end-0 m-2 badge bg-danger py-2"},jx={class:"p-3 d-flex flex-column justify-content-between",style:{flex:"1 1 60%","min-width":"0",position:"relative"}},Qx={key:0,class:"position-absolute px-2 py-1 rounded-pill bg-success text-white small fw-bold",style:{fontSize:"0.7rem",top:"7px",right:"7px"}},Xx=["onClick"],Zx=["onClick","disabled"],Jx={class:"qty-box border rounded-pill px-2 py-2 text-center fw-semibold left-card-cntrl-btn",style:{"min-width":"55px"}},eC=["onClick"],tC={key:0,class:"col-lg-4 right-cart"},nC={class:"col-12 d-flex align-items-center justify-content-end gap-2 mb-2"},rC={key:0,class:"badge bg-danger ms-1"},iC={class:"cart card border-0 shadow-lg rounded-4"},sC={class:"cart-header"},oC={class:"order-type"},aC=["onClick"],lC={class:"cart-body"},uC={class:"mb-3"},cC={key:0,class:"row g-2"},dC={class:"col-6 table-dropdown"},fC=["value"],pC={key:0,class:"invalid-feedback d-block"},hC={class:"col-6 table-dropdown"},vC={key:1},_C={key:0,class:"invalid-feedback d-block"},mC={key:2,class:"mt-2"},gC={key:0,class:"invalid-feedback d-block"},bC={key:1,class:"invalid-feedback d-block"},yC={class:"cart-lines"},wC={key:0,class:"empty"},EC={class:"line-left"},AC=["src"],xC={class:"meta"},CC=["title"],TC={key:0},SC={class:"badge bg-success",style:{"font-size":"0.65rem"}},IC={key:1,class:"addon-icons mt-1"},OC=["onClick","title"],kC={class:"text-muted small"},DC={key:2,class:"badge bg-success mt-1 ms-1",style:{"font-size":"0.65rem"}},NC={key:3,class:"mt-1"},$C={class:"badge",style:{"font-size":"0.65rem",background:"#1B1670",color:"white"}},PC={key:4,class:"note"},LC={class:"line-right"},RC={class:"qty-controls"},MC=["onClick"],FC={class:"qty"},qC=["onClick"],BC={class:"price-delete"},WC={class:"price"},HC=["onClick"],UC={class:"totals"},VC={class:"trow"},zC={class:"sub-total"},KC={key:0,class:"trow"},GC={class:"text-success fw-semibold"},YC={key:1,class:"trow"},jC={class:"text-info"},QC={key:2,class:"trow"},XC={class:"fw-semibold"},ZC={key:3,class:"trow"},JC={class:"fw-semibold"},eT={key:4,class:"trow"},tT={class:"text-danger"},nT={key:5,class:"promos-section mb-3"},rT={class:"promo-total mt-2 rounded-3 bg-success-subtle"},iT={class:"d-flex justify-content-between align-items-center"},sT={class:"text-success fs-6"},oT={key:6,class:"pending-discounts-section mb-3"},aT={class:"d-flex align-items-center gap-2 text-warning"},lT={class:"text-warning"},uT={key:7,class:"approved-discounts-section mb-3"},cT={class:"trow border-top pt-2 mt-2"},dT={class:"text-success"},fT={class:"trow total"},pT={class:""},hT={class:"mb-3"},vT={class:"mb-3"},_T={class:"cart-footer"},mT={class:"modal fade",id:"chooseItem",tabindex:"-1","aria-hidden":"true"},gT={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},bT={class:"modal-content rounded-3 shadow border-0",style:{"max-height":"90vh"}},yT={class:"modal-header border-0 bg-light py-2 px-3 rounded-top"},wT={class:"fw-bold mb-0"},ET={class:"px-1 pt-3 progress-bar"},AT={class:"stepper-container position-relative",style:{"min-height":"60px"}},xT=["onClick"],CT={key:0,class:"bi bi-check-lg",style:{"font-size":"0.7rem"}},TT={key:1,style:{"font-size":"0.75rem"}},ST=["onClick"],IT={class:"modal-body px-3 py-2"},OT={class:"row g-3 mb-3"},kT={class:"col-lg-5"},DT={class:"rounded-3 border shadow-sm p-3 bg-white"},NT={class:"d-flex justify-content-between mb-1",style:{"font-size":"0.85rem"}},$T={key:0,class:"d-flex justify-content-between mb-1",style:{"font-size":"0.85rem"}},PT={class:"text-success"},LT={class:"d-flex justify-content-between",style:{"font-size":"1rem"}},RT={class:"fw-bold text-primary"},MT={class:"col-lg-7"},FT={class:"px-1"},qT={class:"step-content"},BT={class:"row g-2"},WT=["onClick"],HT={class:"d-flex justify-content-between align-items-center"},UT={class:"fw-bold mb-0",style:{"font-size":"0.85rem"}},VT={class:"d-flex justify-content-between align-items-center gap-2"},zT={key:0,class:"text-primary"},KT={style:{"font-size":"0.9rem"}},GT={class:"step-content"},YT={class:"row g-2"},jT=["id","checked","disabled","onChange"],QT=["for"],XT={class:"step-content"},ZT={key:0,class:"mb-3"},JT={class:"d-flex justify-content-between align-items-center mb-2"},eS={class:"text-muted",style:{"font-size":"0.75rem"}},tS={class:"d-flex gap-1"},nS={key:1,class:"mb-3"},rS={class:"bg-light rounded-3 p-1 mb-3"},iS={class:"d-flex justify-content-between align-items-center mb-0"},sS={class:"fw-bold mb-0",style:{"font-size":"0.95rem"}},oS={key:0,class:"badge rounded-pill bg-primary",style:{"font-size":"0.7rem"}},aS={key:0,class:"text-muted small mb-0",style:{"font-size":"0.75rem"}},lS={class:"row g-2"},uS={class:"d-flex align-items-center flex-grow-1"},cS=["id","checked","onChange"],dS=["for"],fS={class:"text-success fw-semibold ms-1"},pS={key:0,class:"d-flex align-items-center gap-1"},hS=["onClick","disabled"],vS={class:"fw-bold",style:{"min-width":"20px","text-align":"center","font-size":"0.75rem"}},_S=["onClick"],mS={key:2,class:"d-flex justify-content-between gap-2 mt-3"},gS=["disabled"],bS=["disabled"],yS={class:"step-content"},wS={class:"summary-card p-3 rounded-3 shadow-sm mb-3"},ES={key:0,class:"summary-item"},AS={class:"summary-value"},xS={key:1,class:"summary-item"},CS={class:"summary-value"},TS={key:2,class:"summary-item"},SS={class:"summary-value"},IS={class:"d-flex align-items-center mb-3"},OS={class:"qty-group gap-1"},kS=["disabled"],DS={class:"qty-box rounded-pill"},NS={class:"mb-2"},$S={class:"text-end small text-muted mt-1",style:{"font-size":"0.7rem"}},PS={class:"modal-footer border-0 px-3 py-2 d-flex justify-content-end gap-2"},LS={class:"modal fade",id:"customizeDealModal",tabindex:"-1","aria-hidden":"true"},RS={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},MS={class:"modal-content rounded-3 shadow border-0",style:{"max-height":"90vh"}},FS={class:"modal-header border-0 bg-light py-2 px-3 rounded-top"},qS={class:"fw-bold mb-0"},BS={class:"text-muted small mb-0",style:{"font-size":"0.8rem"}},WS={class:"px-3 pt-3 progress-bar"},HS={class:"stepper-container position-relative",style:{"min-height":"60px"}},US=["onClick"],VS={key:0,class:"bi bi-check-lg",style:{"font-size":"0.7rem"}},zS={key:1,style:{"font-size":"0.75rem"}},KS=["onClick"],GS={class:"modal-body px-3 py-2"},YS={class:"row g-3 mb-3"},jS={class:"col-lg-4"},QS={class:"rounded-3 border shadow-sm p-3 bg-white mb-3"},XS={class:"fw-bold mb-2 d-flex align-content-center",style:{"font-size":"0.9rem"}},ZS={class:"d-flex align-items-center"},JS={class:"flex-grow-1"},e2={class:"text-muted small"},t2={key:0,class:"text-success small fw-semibold"},n2={class:"fw-bold text-primary"},r2={class:"rounded-3 border shadow-sm p-3 bg-white"},i2={class:"list-group list-group-flush"},s2={class:"d-flex align-items-center"},o2={key:0,class:"bi bi-check-circle-fill text-success me-2"},a2={key:2,class:"bi bi-circle text-muted me-2"},l2={class:"col-lg-8"},u2={class:"px-1"},c2={class:"step-content"},d2={class:"d-flex align-items-start mb-2"},f2={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},p2={class:"row g-2"},h2=["id","checked","disabled","onChange"],v2=["for"],_2={class:"step-content"},m2={class:"d-flex align-items-start mb-3"},g2={class:"flex-grow-1"},b2={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},y2={key:0,class:"mb-3"},w2={class:"d-flex justify-content-between align-items-center mb-2"},E2={class:"text-muted",style:{"font-size":"0.75rem"}},A2={class:"d-flex gap-1"},x2={key:1,class:"mb-3"},C2={class:"bg-light rounded-3 p-1 mb-3"},T2={class:"d-flex justify-content-between align-items-center mb-0"},S2={class:"fw-bold mb-0",style:{"font-size":"0.95rem"}},I2={key:0,class:"badge rounded-pill bg-primary",style:{"font-size":"0.7rem"}},O2={key:0,class:"text-muted small mb-0",style:{"font-size":"0.75rem"}},k2={class:"row g-2"},D2={class:"d-flex align-items-center flex-grow-1"},N2=["id","checked","onChange"],$2=["for"],P2={class:"text-success fw-semibold ms-1"},L2={key:0,class:"d-flex align-items-center gap-1"},R2=["onClick","disabled"],M2={class:"fw-bold",style:{"min-width":"20px","text-align":"center","font-size":"0.75rem"}},F2=["onClick"],q2={key:2,class:"d-flex justify-content-between gap-2 mt-3"},B2=["disabled"],W2=["disabled"],H2={class:"step-content"},U2={class:"d-flex align-items-start mb-2"},V2={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},z2={class:"summary-card p-3 rounded-3 shadow-sm mb-3"},K2={class:"summary-item"},G2={class:"summary-value"},Y2={class:"summary-item"},j2={class:"summary-value"},Q2={key:0,class:"summary-item"},X2={class:"summary-value text-danger"},Z2={key:1,class:"summary-item"},J2={class:"summary-value text-success"},eI={key:2,class:"summary-item"},tI={class:"summary-value text-success fw-bold"},nI={class:"summary-item border-top pt-2 mt-2"},rI={class:"summary-value fw-bold text-primary"},iI={class:"mb-2"},sI={class:"fw-semibold mb-1",style:{"font-size":"0.85rem"}},oI={class:"text-end small text-muted mt-1",style:{"font-size":"0.7rem"}},aI={class:"modal-footer border-0 px-3 py-2 d-flex justify-content-end"},lI={class:"d-flex gap-2"},uI={class:"modal fade",id:"addonManagementModal",tabindex:"-1","aria-hidden":"true"},cI={class:"modal-dialog modal-lg modal-dialog-centered"},dI={class:"modal-content rounded-4 border-0 shadow-lg"},fI={key:0,class:"modal-body pt-2"},pI={class:"alert alert-light border rounded-3 mb-3"},hI={class:"d-flex align-items-center gap-3"},vI=["src"],_I={class:"flex-grow-1"},mI={class:"fw-bold fs-6"},gI={class:"d-flex gap-3 mt-1"},bI={class:"text-muted"},yI={class:"fw-semibold"},wI={class:"text-muted"},EI={class:"fw-semibold"},AI={key:0,class:"table-responsive"},xI={class:"table table-hover align-middle mb-0"},CI={class:"text-center"},TI={class:"form-check d-flex justify-content-center"},SI=["checked","onChange"],II={class:"d-flex align-items-center gap-2"},OI={class:"fw-semibold"},kI={key:0,class:"text-muted"},DI={class:"text-center"},NI={class:"badge bg-success-subtle text-success px-3 py-2 fs-6"},$I={class:"d-flex align-items-center justify-content-center gap-2"},PI=["onClick","disabled"],LI={class:"fw-bold fs-5 px-3",style:{"min-width":"50px","text-align":"center"}},RI=["onClick","disabled"],MI={key:1,class:"text-center text-muted py-5"},FI={class:"mt-3 p-3 rounded-3"},qI={key:0,class:"mt-3 p-3 rounded-3 border border-success bg-light"},BI={class:"text-success fw-semibold"},WI={__name:"Index",props:["client_secret","order_code"],setup(a){const{closeModal:n}=uy(),{formatCurrencySymbol:r}=ty(),f=Gb();xs(()=>{Mu(()=>{document.querySelectorAll('[data-bs-toggle="popover"]').forEach(o=>{new cl(o)})})});const v=W([]),g=W(!0),w=W(""),T=W(Date.now()),I=`category-search-${Math.random().toString(36).substr(2,9)}`,q=W(!1),N=W(0),H=W(0),K=ge(()=>!le.value?.addon_groups||le.value.addon_groups.length===0?null:le.value.addon_groups[N.value]),G=()=>{N.value<le.value?.addon_groups?.length-1&&N.value++},pe=()=>{N.value>0&&N.value--},te=()=>{Ne.value=pn.value},X=W(0),Y=ge(()=>!Ke.value?.addon_groups||Ke.value.addon_groups.length===0?null:Ke.value.addon_groups[X.value]),ke=()=>{X.value<Ke.value?.addon_groups?.length-1&&X.value++},Ie=()=>{X.value>0&&X.value--},ce=()=>{Ze.value=Kn.value},ve=ge(()=>{const o=w.value.trim().toLowerCase();return o?os.value.filter(s=>s.name.toLowerCase().includes(o)):os.value}),Ae=async()=>{g.value=!0;try{const o=await axios.get("/api/pos/fetch-menu-categories");v.value=o.data,v.value.length>0&&(Ar.value=v.value[0].id)}catch(o){console.error("Error fetching categories:",o)}finally{g.value=!1}},de=W([]),Ge=async()=>{try{const o=await axios.get("/api/pos/fetch-menu-items");de.value=o.data.data}catch(o){console.error("Error fetching inventory:",o)}},je=ge(()=>{const o={};return de.value.forEach(s=>{const u=s.category?.id||"uncategorized",_=s.category?.name||"Uncategorized";o[u]||(o[u]=[]);const A={id:s.id,title:s.name,img:s.image_url||"/assets/img/default.png",stock:0,price:Number(s.price),label_color:s.label_color||"#1B1670",family:_,description:s.description,nutrition:s.nutrition,tags:s.tags,allergies:s.allergies,ingredients:s.ingredients??[],variants:s.variants??[],addon_groups:s.addon_groups??[],is_saleable:s.is_saleable,resale_type:s.resale_type,resale_value:s.resale_value,isDeal:!1};o[u].push(A)}),ti.value.forEach(s=>{const u=s.category_id||"uncategorized";o[u]||(o[u]=[]);const _={id:s.id,dealId:s.id,title:s.title,img:s.img,stock:999999,price:Number(s.price),label_color:"#dc3545",family:"Deal",description:s.description,nutrition:{},tags:[],allergies:[],ingredients:[],variants:[],addon_groups:[],is_saleable:!1,resale_type:null,resale_value:null,isDeal:!0,category_id:s.category_id,menu_items:s.menu_items||[]};o[u].push(_)}),o}),Ue=W({});Wi(()=>de.value,o=>{o&&o.length>0&&o.forEach(s=>{s.variants&&s.variants.length>0&&(Ue.value[s.id]||(Ue.value[s.id]=s.variants[0].id))})},{immediate:!0,deep:!0});const Fe=o=>{if(!o.variants||o.variants.length===0)return null;const s=Ue.value[o.id];return s&&o.variants.find(u=>u.id===s)||o.variants[0]},gt=W({}),ot=o=>{const s=o.id;if(!gt.value[s])return 0;let u=0;return Object.values(gt.value[s]).forEach(_=>{_.forEach(A=>{u+=parseFloat(A.price||0)})}),u},Qt=o=>{const s=o.id;if(!gt.value[s])return[];const u=[];return Object.values(gt.value[s]).forEach(_=>{_.forEach(A=>{u.push({id:A.id,name:A.name,price:parseFloat(A.price),group_id:A.group_id||A.pivot?.addon_group_id})})}),u},Ve=W([]),at=()=>{if(!le.value)return[];const o=Rn();return o&&o.ingredients&&o.ingredients.length>0?o.ingredients:le.value.ingredients||[]},Xe=o=>Ve.value.includes(o),Mt=o=>{const s=Ve.value.indexOf(o);s>-1?(Ve.value.splice(s,1),U.info("Ingredient added back")):(Ve.value.push(o),U.info("Ingredient removed"))},En=()=>{if(Ve.value.length===0)return null;const o=at(),s=Ve.value.map(u=>{const _=o.find(A=>A.id===u||A.inventory_item_id===u);return _?_.product_name||_.name:null}).filter(Boolean);return s.length===0?null:`No ${s.join(", ")}`},Ne=W(1),It=o=>{(o<=Ne.value||o===Ne.value+1)&&(Ne.value=o)},An=ge(()=>le.value?.variants&&le.value.variants.length>0),Gr=ge(()=>at().length>0),Zn=ge(()=>le.value?.addon_groups&&le.value.addon_groups.length>0),Be=ge(()=>{let o=[],s=1;return An.value&&(o.push({id:"variants",name:"Variant",stepNumber:s,actualStep:1}),s++),Gr.value&&(o.push({id:"ingredients",name:"Ingredients",stepNumber:s,actualStep:2}),s++),Zn.value&&(o.push({id:"addons",name:"Add-ons",stepNumber:s,actualStep:3}),s++),o.push({id:"review",name:"Review",stepNumber:s,actualStep:4}),o}),pn=ge(()=>Be.value[Be.value.length-1]?.stepNumber||1),Yr=ge(()=>{if(Ne.value===1)return"0%";const o=Be.value.length,s=(Ne.value-1)/(o-1);return`calc(${s*100}% - ${14-s*28}px)`}),Ft=o=>o<Ne.value?"stepper-circle-completed":o===Ne.value?"stepper-circle-active":"stepper-circle-inactive",Ln=()=>{const o=at(),s=Ve.value||[];return o.filter(u=>!s.includes(u.id||u.inventory_item_id)).length},Hs=()=>{const o=Be.value.findIndex(s=>s.stepNumber===Ne.value);o<Be.value.length-1&&(Ne.value=Be.value[o+1].stepNumber)},Jn=()=>{const o=Be.value.findIndex(s=>s.stepNumber===Ne.value);o>0&&(Ne.value=Be.value[o-1].stepNumber)},jr=o=>{rr.value=o,Xt()},wi=()=>An.value&&le.value?.variants?.find(s=>s.id===rr.value)?.name||"",qt=()=>{const o=[];return Object.values(ht.value).forEach(s=>{s.forEach(u=>{const _=u.quantity>1?` x${u.quantity}`:"";o.push(`${u.name}${_} (+${r(u.price*(u.quantity||1))})`)})}),o.join(", ")},Er=async o=>{le.value=o,eo.value="",xn.value="",rr.value=null,ht.value={},N.value=0,Ve.value=[],Ne.value=1,o.variants&&o.variants.length>0&&(rr.value=o.variants[0].id);const s=o.variants&&o.variants.length>0?o.variants[0]:null,u=s?s.id:null,_=lr(o,u),A=Ei(o,u,_);bt.value=A>0?1:0,Ve.value=[];const k=document.getElementById("chooseItem"),S=new bootstrap.Modal(k);k.addEventListener("shown.bs.modal",async()=>{await Mu()},{once:!0}),S.show()},Ei=(o,s,u)=>{if(!es.value)return 999999;const _=u.filter(S=>!Ve.value.includes(S.id||S.inventory_item_id));if(!_||_.length===0)return 999999;const A={};for(const S of M.value)lr(S,S.variant_id).filter(se=>!S.removed_ingredients||S.removed_ingredients.length===0?!0:!S.removed_ingredients.includes(se.id||se.inventory_item_id)).forEach(se=>{const we=se.inventory_item_id,Qe=Number(se.inventory_stock??se.inventory_item?.stock??0);A[we]||(A[we]={totalStock:Qe,used:0});const J=Number(se.quantity??se.qty??1)*S.qty;A[we].used+=J});let k=999999;for(const S of _){const B=S.inventory_item_id,ae=Number(S.inventory_stock??S.inventory_item?.stock??0),se=Number(S.quantity??S.qty??1);if(A[B]){const we=A[B].totalStock-A[B].used,Qe=Math.floor(we/se);k=Math.min(k,Qe)}else{const we=Math.floor(ae/se);k=Math.min(k,we)}}return k},Xt=()=>{const o=Rn(),s=o?o.id:null,u=lr(le.value,s),_=Ei(le.value,s,u);if(_<=0){U.error("No stock available for this variant. Please remove items from cart first."),bt.value=0;return}bt.value=Math.min(1,_)},Rn=()=>{if(!le.value||!le.value.variants||le.value.variants.length===0)return null;const o=rr.value;return o&&le.value.variants.find(s=>s.id===o)||le.value.variants[0]},Us=()=>{if(!le.value)return 0;const o=Rn();return parseFloat(o?o.price:le.value.price||0)},At=()=>{let o=0;return Object.values(ht.value).forEach(s=>{s.forEach(u=>{o+=parseFloat(u.price||0)*(u.quantity||1)})}),o},xt=()=>{const o=[];return Object.values(ht.value).forEach(s=>{s.forEach(u=>{o.push({id:u.id,name:u.name,price:parseFloat(u.price),group_id:u.group_id||u.pivot?.addon_group_id})})}),o},Mn=o=>{if(!o)return 0;if(!es.value)return 999999;const s=Fe(o),u=s?s.id:null,_=lr(o,u);if(!_.length)return 999999;let A=1/0;return _.forEach(k=>{const S=Number(k.quantity??k.qty??1),B=Number(k.inventory_stock??k.inventory_item?.stock??0);if(S<=0)return;const ae=Math.floor(B/S);A=Math.min(A,ae)}),A===1/0?0:A},er=o=>Mn(o),Zt=W(""),_e=W("dine"),et=W("Walk In"),lt=W(" "),tt=W(" "),Vs=W(10),Ar=W(null),zs=o=>Ar.value=o,tr=W(!0),Ks=o=>{zs(o.id),tr.value=!1},Gs=()=>tr.value=!0,xr=W({}),nr=W([]),Ct=W(null),pl=async()=>{try{const o=await axios.get("/api/pos/fetch-profile-tables");if(xr.value=o.data,xr.value.order_types){nr.value=xr.value.order_types.map(u=>u.charAt(0).toUpperCase()+u.slice(1));const s=localStorage.getItem("quickOrderType");if(s){const u=nr.value.find(_=>_.toLowerCase().replace(/_/g," ")===s.toLowerCase().replace(/_/g," "));u?_e.value=u:_e.value=nr.value[0]}else _e.value=nr.value[0]}}catch(o){console.error("Error fetching profile tables:",o)}},hl=ge(()=>je.value[Ar.value]??[]),Tt=W({sortBy:"",priceMin:null,priceMax:null}),Ys=ge(()=>{let o=hl.value;const s=Zt.value.trim().toLowerCase();if(s&&(o=o.filter(u=>u.title.toLowerCase().includes(s)||(u.family||"").toLowerCase().includes(s)||(u.description||"").toLowerCase().includes(s)||(u.tags?.map(_=>_.name.toLowerCase()).join(", ")||"").includes(s))),Tt.value.priceMin!==null&&Tt.value.priceMin!==""&&(o=o.filter(u=>u.price>=Tt.value.priceMin)),Tt.value.priceMax!==null&&Tt.value.priceMax!==""&&(o=o.filter(u=>u.price<=Tt.value.priceMax)),Tt.value.sortBy)switch(o=[...o],Tt.value.sortBy){case"name_asc":o.sort((u,_)=>u.title.localeCompare(_.title));break;case"name_desc":o.sort((u,_)=>_.title.localeCompare(u.title));break;case"price_asc":o.sort((u,_)=>u.price-_.price);break;case"price_desc":o.sort((u,_)=>_.price-u.price);break;case"stock_asc":o.sort((u,_)=>(u.stock??0)-(_.stock??0));break;case"stock_desc":o.sort((u,_)=>(_.stock??0)-(u.stock??0));break}return o}),ji=W(!1),vl=o=>{Tt.value={...o},ji.value=!0},Qi=async()=>{try{const o=await axios.get("/pos/walk-in/current");if(o.data.success)if(H.value=o.data.number,H.value===0){const s=await axios.get("/pos/walk-in/next");s.data.success&&(H.value=s.data.number,et.value=s.data.formatted)}else et.value=js()}catch(o){console.error("Failed to initialize walk-in counter:",o),H.value=1,et.value="Walk In-001"}},js=()=>`Walk In-${String(H.value).padStart(3,"0")}`,Qs=()=>{Tt.value={sortBy:"",priceMin:null,priceMax:null},Zt.value="",n("menuFilterModal")},M=W([]),_l=async o=>{const s=M.value[o];if(!s)return;if(s.isDeal){const _=$t({id:s.dealId,title:s.title,menu_items:s.menu_items},s.qty+1);if(!_.canAdd){console.log(" Missing ingredients for deal (cart increment)"),nn.value={itemIndex:o,item:s,newQty:s.qty+1,isDeal:!0},tn.value=_.missing,or.value=!0,U.warning("Some ingredients are missing. Confirm to proceed.");return}s.qty++,s.price=s.unit_price*s.qty,U.success("Deal quantity updated");return}const u=Xs(s,s.qty+1);if(!u.canAdd){console.log(" Missing ingredients detected (client-side)"),nn.value={itemIndex:o,item:s,newQty:s.qty+1,isDeal:!1},tn.value=u.missing,or.value=!0,U.warning("Some ingredients are missing. Confirm to proceed.");return}s.outOfStock=!1,s.qty++,s.price=s.unit_price*s.qty,s.resale_discount_per_item&&(s.total_resale_discount=s.resale_discount_per_item*s.qty)},Xs=(o,s)=>{if(!es.value)return{canAdd:!0,missing:[]};const u=o.ingredients||[];if(u.length===0)return{canAdd:!0,missing:[]};const _=[],A={};return M.value.forEach(S=>{(S.ingredients||[]).filter(se=>!S.removed_ingredients||S.removed_ingredients.length===0?!0:!S.removed_ingredients.includes(se.id||se.inventory_item_id)).forEach(se=>{const we=se.inventory_item_id,Qe=Number(se.inventory_stock??se.inventory_item?.stock??0);A[we]||(A[we]={totalStock:Qe,used:0,name:se.product_name||se.name,unit:se.unit||"unit"});const J=Number(se.quantity??se.qty??1)*S.qty;A[we].used+=J})}),u.filter(S=>!o.removed_ingredients||o.removed_ingredients.length===0?!0:!o.removed_ingredients.includes(S.id||S.inventory_item_id)).forEach(S=>{const B=S.inventory_item_id,ae=Number(S.quantity??S.qty??1)*s,se=Number(S.inventory_stock??S.inventory_item?.stock??0);if(!A[B])se<ae&&_.push({item_id:o.id,item_title:o.title,variant_id:o.variant_id||null,variant_name:o.variant_name||null,inventory_item_id:B,inventory_item_name:S.product_name||S.name,required_quantity:ae,available_quantity:se,shortage_quantity:ae-se,unit:S.unit||"unit",order_quantity:s});else{const we=A[B].totalStock-A[B].used,Qe=M.value.find(J=>J.id===o.id&&J.variant_id===o.variant_id&&JSON.stringify(J.addons?.map(Oe=>Oe.id).sort())===JSON.stringify(o.addons?.map(Oe=>Oe.id).sort()));if(Qe){const J=Number(S.quantity??S.qty??1)*Qe.qty,Oe=we+J;Oe<ae&&_.push({item_id:o.id,item_title:o.title,variant_id:o.variant_id||null,variant_name:o.variant_name||null,inventory_item_id:B,inventory_item_name:S.product_name||S.name,required_quantity:ae,available_quantity:Oe,shortage_quantity:ae-Oe,unit:S.unit||"unit",order_quantity:s})}else we<ae&&_.push({item_id:o.id,item_title:o.title,variant_id:o.variant_id||null,variant_name:o.variant_name||null,inventory_item_id:B,inventory_item_name:S.product_name||S.name,required_quantity:ae,available_quantity:we,shortage_quantity:ae-we,unit:S.unit||"unit",order_quantity:s})}}),{canAdd:_.length===0,missing:_}},ml=async o=>{const s=M.value[o];if(!s||s.qty<=1){U.error("Cannot reduce below 1.");return}s.qty--,s.price=s.unit_price*s.qty,s.resale_discount_per_item&&(s.total_resale_discount=s.resale_discount_per_item*s.qty),s.outOfStock=!1},Zs=o=>{if(M.value[o],M.value.splice(o,1),M.value.length===0){nt.value=[],Le.value=[],Wt.value=[],sr();return}Le.value.length>0&&(Le.value=Le.value.filter(u=>{if(!u.menu_items||u.menu_items.length===0)return!0;const _=u.menu_items.map(k=>k.id);return M.value.some(k=>_.includes(k.id))}));const s=[];nt.value.forEach(u=>{u.min_purchase&&Bt.value<u.min_purchase?U.info(`Discount "${u.name}" removed  subtotal is lower than minimum required (${r(u.min_purchase)}).`):s.push(u)}),nt.value=s},Bt=ge(()=>M.value.reduce((o,s)=>o+s.price,0)),Ai=ge(()=>M.value.reduce((o,s)=>{if(!s.addons||s.addons.length===0)return o;const u=s.addons.reduce((_,A)=>{const k=parseFloat(A.price||0),S=A.quantity||1;return _+k*S},0);return o+u*s.qty},0)),Fn=ge(()=>{if(_e.value!=="Delivery")return 0;const o=f.props.onboarding.tax_and_vat;return o.has_delivery_charges?o.delivery_charge_flat?parseFloat(o.delivery_charge_flat):o.delivery_charge_percentage?Bt.value*parseFloat(o.delivery_charge_percentage)/100:0:0}),qn=ge(()=>{if(M.value.length===0)return 0;const o=f.props.onboarding.tax_and_vat;return o.has_service_charges?o.service_charge_flat?parseFloat(o.service_charge_flat):o.service_charge_percentage?Bt.value*parseFloat(o.service_charge_percentage)/100:0:0}),Js=o=>`${(Math.round(o*100)/100).toFixed(2)}`,le=W(null),bt=W(0),eo=W(""),rr=W(null),ht=W({}),xn=W(""),gl=async()=>{if(!le.value)return;if(bt.value<=0){U.error("Please select at least 1 item to add to cart");return}const o=Rn(),s=o?o.id:null;o&&`${o.name}`;const u=o?o.name:null,_=parseFloat(o?o.price:le.value.price),A=xt(),k=At(),S=_+k,B=o?Nt(o,!0):Nt(le.value,!1),ae=lr(le.value,s),se=En();try{const we=A.map(Re=>Re.id).sort((Re,wt)=>Re-wt).join("-"),Qe=ae.length>0?Xi(ae):999999,J=M.value.findIndex(Re=>{if(Re.variant_id!==s)return!1;const wt=(Re.addons||[]).map(Vt=>Vt.id).sort((Vt,Ni)=>Vt-Ni).join("-");return Re.id===le.value.id&&wt===we});if(J>=0){if(M.value[J].qty+=bt.value,M.value[J].price=M.value[J].unit_price*M.value[J].qty,M.value[J].total_resale_discount=B*M.value[J].qty,xn.value&&xn.value.trim()){const Re=M.value[J].item_kitchen_note||"",wt=xn.value.trim(),Vt=[Re,wt,se].filter(Boolean).filter((Ni,Dr,Q)=>Q.indexOf(Ni)===Dr);M.value[J].item_kitchen_note=Vt.join("; ")}else if(se){const Re=M.value[J].item_kitchen_note||"";M.value[J].item_kitchen_note=[Re,se].filter(Boolean).join("; ")}Ve.value.length>0&&(M.value[J].removed_ingredients=[...Ve.value]),U.success(`Quantity updated to ${M.value[J].qty}`)}else{const Re=[xn.value.trim(),se].filter(Boolean).join(". ");M.value.push({id:le.value.id,title:le.value.title,img:le.value.img,price:S*bt.value,unit_price:Number(S),qty:bt.value,note:eo.value||"",item_kitchen_note:Re,stock:Qe,ingredients:ae,variant_id:s,variant_name:u,addons:A,removed_ingredients:[...Ve.value],resale_discount_per_item:B,total_resale_discount:B*bt.value}),U.success(`${le.value.title} added to cart`)}bootstrap.Modal.getInstance(document.getElementById("chooseItem")).hide(),bt.value=0,eo.value="",xn.value="",rr.value=null,ht.value={},Ve.value=[]}catch(we){U.error("Failed to add item: "+(we.response?.data?.message||we.message))}},Xi=o=>{if(!o||o.length===0)return 999999;let s=1/0;return o.forEach(u=>{const _=Number(u.quantity??u.qty??1),A=Number(u.inventory_stock??u.inventory_item?.stock??0);if(_<=0)return;const k=Math.floor(A/_);s=Math.min(s,k)}),s===1/0?0:s},bl=async()=>{if(!le.value)return;const o=Rn(),s=o?o.id:null,u=at(),_=Xs({id:le.value.id,title:le.value.title,variant_id:s,variant_name:o?o.name:null,ingredients:u,removed_ingredients:Ve.value||[]},bt.value+1);if(!_.canAdd){console.log(" Missing ingredients for modal increment (client-side)"),Bn.value={currentQty:bt.value},tn.value=_.missing,or.value=!0,U.warning("Some ingredients are missing. Confirm to proceed.");return}bt.value++},yl=()=>{bt.value>1&&bt.value--},Ot=W({}),xi=()=>{M.value=[],et.value=js(),tt.value="",lt.value="",Ct.value=null,_e.value=nr.value[0]||"eat_in",Jt.value="",en.value="",Vs.value=0,Le.value=[],nt.value=[],Wt.value=[],Tr.value=[],sr()};Wi(_e,()=>Ot.value={});const Jt=W(""),en=W(""),Qr=W(!1),Zi=W(null),ir=W(!1),Xr=W(0),Yo=()=>{if(M.value.length===0){U.error("Please add at least one item to the cart.");return}if(_e.value==="Eat_in"&&!Ct.value){Ot.value.table_number=["Table number is required for dine-in orders."],U.error("Please select a table number for Dine In orders.");return}if((_e.value==="Delivery"||_e.value==="Takeaway")&&!et.value){Ot.value.customer=["Customer name is required."],U.error("Customer name is required.");return}if(_e.value==="Delivery"&&!lt.value){Ot.value.phoneNumber=["Phone number is required for delivery."],U.error("Phone number is required for delivery.");return}if(_e.value==="Delivery"&&!tt.value){Ot.value.deliveryLocation=["Delivery location is required."],U.error("Delivery location is required.");return}Xr.value=parseFloat(ar.value).toFixed(2),ir.value=!0};async function Ji(o,s){const u=s?"yes":"no";console.log(" printReceiptN called"),console.log(" shouldPrint (boolean):",s),console.log(" print value sent to printer:",u);try{const _=await axios.post("http://localhost:8085/print",{order:o,type:"customer",print:u},{headers:{"Content-Type":"application/json"},timeout:5e3})}catch(_){console.error("Print failed:",_),U.error("Unable to connect to the customer printer. Please ensure it is properly connected.")}}async function jo(o){console.log(" Customer View (Cart Data):",o);try{const s=await axios.post("http://localhost:8085/data",{cartData:o},{headers:{"Content-Type":"application/json"},timeout:1e4});s.setHeader("Access-Control-Allow-Origin","*"),s.setHeader("Access-Control-Allow-Methods","POST, GET, OPTIONS"),console.log(" Data sent successfully")}catch(s){s.code==="ECONNABORTED"?console.error("Timeout: Customer view didn't respond"):s.code==="ERR_NETWORK"?console.error("Network error: Cannot reach customer view"):console.error("Customer View failed:",s)}}const wl=W("cash"),El=W(0);async function Qo(o){try{const s=await axios.post("http://localhost:8085/print",{order:o,type:"KOT",print:"yes"},{headers:{"Content-Type":"application/json"},timeout:5e3})}catch(s){console.error("KOT print failed:",s),U.error("Unable to connect to the kitchen printer. Please ensure it is properly connected.")}}const Wt=W([]),Cr=W(null),to=W(!1),nt=W([]),Tr=W([]),Al=async o=>{if(!o||o.length===0){U.warning("No discounts selected.");return}const s=Tr.value.map(_=>_.id),u=o.filter(_=>!s.includes(_.id));if(u.length===0){U.error("All selected discounts have been rejected for this order.");return}if(u.length<o.length){const _=o.length-u.length;U.warning(`${_} discount(s) were previously rejected and cannot be requested again.`)}try{const _=await axios.post("/api/discount-approvals/request",{discounts:o.map(A=>({discount_id:A.id,discount_percentage:parseFloat(A.discount_amount),discount_name:A.name})),order_items:M.value.map(A=>({id:A.id,title:A.title,qty:A.qty,unit_price:A.unit_price,price:A.price})),order_subtotal:Bt.value,request_note:`Discount approval request from ${sn.value?.name||"Cashier"}`});_.data.success&&(Wt.value=_.data.data.map(A=>({...A,discountData:o.find(k=>k.id===A.discount_id),percentage:parseFloat(A.discount_percentage),status:"pending"})),is.value=!1,to.value=!0,U.info("Discount approval request sent to Super Admin. Waiting for approval..."),Xo())}catch(_){console.error("Error requesting discount approval:",_),U.error(_.response?.data?.message||"Failed to request discount approval")}},Xo=()=>{Cr.value&&clearInterval(Cr.value),Cr.value=setInterval(async()=>{await Ci()},3e3)},Ci=async()=>{if(Wt.value.length===0){sr();return}try{const o=Wt.value.map(u=>u.id),s=await axios.post("/api/discount-approvals/check-status",{approval_ids:o});s.data.success&&(s.data.data.forEach(_=>{if(_.status!=="pending"){const A=Wt.value.findIndex(k=>k.id===_.id);if(A>=0){if(_.status==="approved"){const k={id:_.discount_id,name:_.discount_name||_.discount?.name,percentage:parseFloat(_.discount_percentage),approval_id:_.id};xl(k),U.success(`Discount "${k.name}" (${k.percentage}%) approved!`)}else _.status==="rejected"&&(Tr.value.push({id:_.discount_id,name:_.discount_name,percentage:parseFloat(_.discount_percentage),rejection_reason:_.approval_note}),U.error(`Discount "${_.discount_name}" rejected.`+(_.approval_note?` Reason: ${_.approval_note}`:"")));Wt.value.splice(A,1)}}}),Wt.value.length===0&&(to.value=!1,sr()))}catch(o){console.error("Error checking approval status:",o)}},sr=()=>{Cr.value&&(clearInterval(Cr.value),Cr.value=null)},xl=o=>{nt.value.push(o)};Yb(()=>{sr()}),xs(()=>{window.Echo&&window.Echo.channel("discount-approvals").listen(".approval.responded",o=>{Ci()})});const Sr=ge(()=>!nt.value||nt.value.length===0?0:nt.value.reduce((o,s)=>{const u=parseFloat(s.percentage||0),_=Bt.value*u/100;return o+_},0)),Zr=o=>Bt.value*o/100,no=()=>{nt.value=[],Wt.value=[],Tr.value=[],sr()},or=W(!1),tn=W([]),nn=W(null),Jr=W(null),Bn=W(null),Ti=W(null),Zo=W(null),ei=W(null),ro=async o=>{try{const s=await axios.get(`/pos/orders/${o}`);if(s.data.success&&s.data.order){const u=s.data.order.items;if(M.value=M.value.map(_=>{const A=u.find(k=>k.menu_item_id===_.id||k.deal_id===_.dealId);return A?{..._,payment_status:A.payment_status,amount_paid:A.amount_paid,server_item_id:A.id}:_}),De.value&&De.value.order_items){const _=De.value.order_items.map(A=>{const k=u.find(S=>S.id===A.server_item_id);return k?{...A,payment_status:k.payment_status,amount_paid:k.amount_paid}:A});De.value={...De.value,order_items:_}}}}catch(s){console.error("Failed to refresh order items:",s)}},io=async({paymentMethod:o,cashReceived:s,cardAmount:u,changeAmount:_,items:A,autoPrintKot:k,isPartialPayment:S,selectedItemIds:B,paidItemIds:ae,paidProductIds:se,paidDealIds:we,existingOrderId:Qe,done:J})=>{Ot.value={};try{let Oe=Qe;if(Oe)console.log(" Using existing order ID:",Oe);else{console.log(" Creating new order...");const Ni={customer_name:et.value,phone_number:lt.value,delivery_location:tt.value,sub_total:Bt.value,tax:Cn.value,service_charges:qn.value,delivery_charges:Fn.value,sales_discount:Ht.value,approved_discounts:Sr.value,approved_discount_details:nt.value.map(Q=>({discount_id:Q.id,discount_name:Q.name,discount_percentage:Q.percentage,discount_amount:Zr(Q.percentage),approval_id:Q.approval_id})),promo_discount:Wn.value,applied_promos:Le.value.map(Q=>({promo_id:Q.id,promo_name:Q.name,promo_type:Q.type,discount_amount:Q.applied_discount||0,applied_to_items:Q.applied_to_items||[]})),total_amount:ar.value,note:Jt.value,kitchen_note:en.value,order_date:new Date().toISOString().split("T")[0],order_time:new Date().toTimeString().split(" ")[0],order_type:_e.value==="Eat_in"?"Eat In":_e.value==="Delivery"?"Delivery":_e.value==="Takeaway"?"Takeaway":"Collection",table_number:Ct.value?.name||null,items:(M.value??[]).map(Q=>{if(Q.isDeal)return{product_id:Q.dealId,title:Q.title,quantity:Q.qty,price:Q.price,note:Q.note??"",kitchen_note:en.value??"",unit_price:Q.unit_price,item_kitchen_note:Q.item_kitchen_note??"",tax_percentage:0,tax_amount:0,variant_id:null,variant_name:null,addons:[],sale_discount_per_item:0,removed_ingredients:[],is_deal:!0,deal_id:Q.dealId,menu_items:Q.menu_items||[]};const _t=de.value.find(pr=>pr.id===Q.id);let Eo=_t;if(Q.variant_id&&_t?.variants){const pr=_t.variants.find(Nr=>Nr.id===Q.variant_id);pr&&(Eo=pr)}const Vl=Eo?Nt(Eo,!!Q.variant_id):0,fa=(Q.removed_ingredients||[]).map(pr=>{const Nr=(Q.ingredients||[]).find(ai=>ai.id===pr||ai.inventory_item_id===pr);return{id:pr,name:Nr?Nr.product_name||Nr.name:"Unknown Ingredient"}});return{product_id:Q.id,title:Q.title,quantity:Q.qty,price:Q.price,note:Q.note??"",kitchen_note:en.value??"",unit_price:Q.unit_price,item_kitchen_note:Q.item_kitchen_note??"",tax_percentage:Dt(Q),tax_amount:Ir(Q),variant_id:Q.variant_id||null,variant_name:Q.variant_name||null,addons:Q.addons||[],sale_discount_per_item:Vl,removed_ingredients:fa||[],is_deal:!1}}),confirm_missing_ingredients:!0},Dr=await axios.post("/pos/order",Ni);if(console.log(" Order created:",Dr.data),Dr.data.logout===!0){U.success(Dr.data.message||"Order created successfully. Logging out..."),setTimeout(()=>{window.location.href=Dr.data.redirect||"/login"},1e3),J&&J();return}Oe=Dr.data.order.id}const Re={full_payment:!S,paid_item_ids:S?ae||[]:[],paid_product_ids:S?se||[]:[],paid_deal_ids:S?we||[]:[],payment_method:o,cash_received:s,payment_type:o==="Split"?"split":o.toLowerCase(),...o==="Split"&&{cash_amount:s,card_amount:u}};console.log(" Processing payment for order:",Oe,Re);const wt=await axios.post(`/pos/orders/${Oe}/payment`,Re);console.log(" Payment processed:",wt.data);const Vt=wt.data.is_final_payment===!0||wt.data.is_final_payment===1;console.log(" is_final_payment:",Vt),Vt?(U.success("Order fully paid! Generating final receipt..."),xi(),ir.value=!1,kr.value=!1,dr.value=!1,De.value=null,ei.value=null,Gn(),Zi.value={id:Oe,payment:wt.data.payment,payment_type:o==="Split"?"split":o.toLowerCase(),cash_amount:o==="Split"?s:null,card_amount:o==="Split"?u:null},Ji(JSON.parse(JSON.stringify(Zi.value)),k===!0),ts.value=await Sl(),Qo(JSON.parse(JSON.stringify(wt.data.order)))):(console.log(" Partial payment received. Keeping modal open."),U.info(`Partial payment received (${wt.data.paid_items?.length||0} items). 
                Remaining: ${(wt.data.remaining_balance||0).toFixed(2)}`),ei.value=Oe,await ro(Oe),De.value?kr.value=!0:ir.value=!0),Qi(),Le.value=[],nt.value=[],Wt.value=[],sr()}catch(Oe){console.error(" Order/Payment error:",Oe),U.error(Oe.response?.data?.message||"Failed to process order/payment")}finally{J&&J()}},so=async o=>{console.log(" onStripeSuccess called:",o);const{order:s,is_final_payment:u,print_payload:_}=o,A=u===!0||u===1;if(console.log(" is_final_payment:",A),A)U.success(o.message||"Order fully paid!"),xi(),ir.value=!1,kr.value=!1,dr.value=!1,De.value=null,ei.value=null,Gn(),Le.value=[],nt.value=[],Wt.value=[],_&&Ji(JSON.parse(JSON.stringify(_)),!0),setTimeout(()=>{window.location.reload()},1e3);else{if(U.info(o.message||"Partial payment processed!"),s&&s.id){if(ei.value=s.id,De.value&&s.items){const k=s.items.map(S=>({...S,server_item_id:S.id}));De.value={...De.value,order_items:k,total_amount:s.total_amount,sub_total:s.sub_total,payment_status:s.payment_status}}Gn()}De.value?kr.value=!0:ir.value=!0}Qi()},Jo=async()=>{if(console.log(" User confirmed missing ingredients"),or.value=!1,nn.value&&!nn.value.isDeal){const{itemIndex:o,newQty:s}=nn.value,u=M.value[o];u&&(u.outOfStock=!1,u.qty=s,u.price=u.unit_price*u.qty,u.resale_discount_per_item&&(u.total_resale_discount=u.resale_discount_per_item*u.qty),U.success("Quantity updated")),nn.value=null,tn.value=[];return}if(nn.value&&nn.value.isDeal){const{itemIndex:o,newQty:s}=nn.value,u=M.value[o];u&&u.isDeal&&(u.qty=s,u.price=u.unit_price*u.qty,U.success("Deal quantity updated")),nn.value=null,tn.value=[];return}if(Ti.value){const{deal:o,existingIndex:s,newQty:u}=Ti.value;if(s>=0)M.value[s].qty=u,M.value[s].price=M.value[s].unit_price*u,U.success("Deal quantity updated");else{const A=[];o.menu_items.forEach(S=>{S.ingredients&&S.ingredients.length>0&&A.push(...S.ingredients.map(B=>({...B,menu_item_id:S.id,menu_item_name:S.name})))});const k={id:o.id,title:o.title,price:oe.value,unit_price:parseFloat(o.price),img:o.img,qty:1,stock:999999,ingredients:A,isDeal:!0,dealId:o.id,menu_items:o.menu_items.map(S=>({id:S.id,name:S.name,price:S.price,ingredients:(S.ingredients||[]).map(B=>({inventory_item_id:B.id,inventory_item_id:B.inventory_item_id,product_name:B.product_name||B.name,quantity:B.quantity||B.qty||"1.00",inventory_stock:B.inventory_stock||B.stock||0,unit:B.unit||"unit",category_id:B.category_id,supplier_id:B.supplier_id})),stock:Xi(S.ingredients||[])})),resale_discount_per_item:0,total_resale_discount:0};M.value.push(k),U.success(`${o.title} added to cart!`)}Ti.value=null,tn.value=[];return}if(Jr.value){const{product:o,variantId:s,variantName:u,variantPrice:_,selectedAddons:A,addonsPrice:k,resaleDiscountPerItem:S,existingIndex:B,newQty:ae}=Jr.value,se=_+k;if(B>=0)M.value[B].qty=ae,M.value[B].price=M.value[B].unit_price*ae,M.value[B].total_resale_discount=S*ae,M.value[B].outOfStock=!1,U.success("Quantity updated");else{const we=lr(o,s),Qe=er(o);M.value.push({id:o.id,title:o.title,img:o.img,price:se,unit_price:Number(se),qty:1,note:"",stock:Qe,ingredients:we,variant_id:s,variant_name:u,addons:A,outOfStock:!1,resale_discount_per_item:S,total_resale_discount:S}),U.success("Item added to cart")}Jr.value=null,tn.value=[];return}if(Bn.value){bt.value=Bn.value.currentQty+1,U.success("Quantity increased"),Bn.value=null,tn.value=[];return}};xs(async()=>{if(Qi(),window.bootstrap){document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(k=>new window.bootstrap.Tooltip(k));const A=document.getElementById("chooseItem");A&&new window.bootstrap.Modal(A,{backdrop:"static"})}w.value="",T.value=Date.now(),await Mu(),setTimeout(()=>{q.value=!0;const A=document.getElementById(I);A&&(A.value="",w.value="")},100),Ae(),Ge(),pl();const o=new URLSearchParams(window.location.search),s=o.get("order_id"),u=o.get("redirect_status");s&&u==="succeeded"&&(ei.value=s,await ro(s),ir.value=!0,window.history.replaceState({},document.title,window.location.pathname),U.success("Payment succeeded! Restoring modal context."));const _=document.getElementById("menuFilterModal");_&&_.addEventListener("hidden.bs.modal",()=>{ji.value||Qs(),ji.value=!1})});function ea(){const o=f.props.flash?.success,s=f.props.flash?.error;o&&U.success(o,{autoClose:4e3}),s&&U.error(s,{autoClose:6e3})}xs(()=>ea()),xs(()=>{f.props.flash?.success;const o=f.props.flash?.error;o&&U.error(o);const s=f.props.flash?.print_payload;s&&setTimeout(()=>Ji(s),250),s&&setTimeout(()=>Qo(s),250)}),Wi(()=>f.props.flash,()=>ea(),{deep:!0});const es=ge(()=>f.props.onboarding?.optional_features?.enable_inventory_tracking??!0),Cl=({id:o,status:s,message:u})=>{ts.value=ts.value.map(_=>_.id===o?{..._,status:s}:_)},oo=W(!1),ts=W([]),Tl=W(!1),ns=W(!1),ao=W([]),Si=W(!1),Sl=async()=>{ns.value=!1,ao.value=[],Si.value=!0;try{const o=await axios.get("/api/pos/orders/today");ao.value=o.data.orders}catch(o){console.error("Failed to fetch POS orders:",o),U.error(o.response?.data?.message||"Failed to fetch POS orders")}finally{Si.value=!1}},rs=W(!1),is=W(!1),lo=W(!0),uo=W(!0),Pe=W([]),$e=W([]),Le=W([]),Il=o=>{if(Le.value=o,!o||o.length===0){U.warning("No promos selected.");return}const s=o.reduce((_,A)=>_+parseFloat(A.applied_discount||0),0);if(s<=0){U.warning("Selected promos don't provide any discount for current cart items."),Le.value=[];return}const u=new Set(o.flatMap(_=>_.applied_to_items||[])).size;U.success(`${o.length} promo(s) applied! Applied to ${u} item(s). You saved ${r(s)}`),rs.value=!1},Ol=async()=>{lo.value=!0,rs.value=!0;try{const o=await axios.get("/api/promos/current");o.data?.success?Pe.value=o.data.data||[]:(console.warn("Failed to fetch promos:",o.data),Pe.value=[],U.warning("No promos available at the moment"))}catch(o){console.error("Error fetching current meal promos:",o),Pe.value=[],U.error("Failed to load promotions")}finally{lo.value=!1}},kl=async()=>{uo.value=!0,is.value=!0;try{const o=await axios.get("/api/discounts/all");o.data?.success?$e.value=o.data.data||[]:(console.warn("Failed to fetch discounts:",o.data),$e.value=[],U.warning("No discounts available at the moment"))}catch(o){console.error("Error fetching current meal discounts:",o),$e.value=[],U.error("Failed to load discounts")}finally{uo.value=!1}},Dl=o=>!Le.value||Le.value.length===0?!1:Le.value.some(s=>!s.menu_items||s.menu_items.length===0?!0:s.menu_items.map(_=>_.id).includes(o.id)),Nl=o=>{Zi.value=o,Qr.value=!0,ns.value=!1},Wn=ge(()=>!Le.value||Le.value.length===0?0:Le.value.reduce((o,s)=>{const u=parseFloat(s.discount_amount??0)||0;if(s.applied_discount!==void 0)return o+parseFloat(s.applied_discount);const _=$l(s);if(s.min_purchase&&_<parseFloat(s.min_purchase))return o;if(s.type==="flat")return o+u;if(s.type==="percent"){const A=_*u/100,k=parseFloat(s.max_discount??0)||0;return k>0&&A>k?o+k:o+A}return o},0)),$l=o=>{if(!o.menu_items||o.menu_items.length===0)return M.value.reduce((u,_)=>u+_.unit_price*_.qty,0);const s=o.menu_items.map(u=>u.id);return M.value.filter(u=>s.includes(u.id)).reduce((u,_)=>u+_.unit_price*_.qty,0)},yt=ge(()=>!Le.value||Le.value.length===0?[]:Le.value.map(o=>({promo_id:o.id,promo_name:o.name,promo_type:o.type,discount_amount:o.applied_discount||0,applied_to_items:o.applied_to_items||[]}))),Cn=ge(()=>{let o=0;const s=parseFloat(f.props.onboarding.tax_and_vat.tax_rate)||0;return M.value.forEach(u=>{const _=de.value.find(A=>A.id===u.id);if(_&&_.is_taxable){const k=u.unit_price*u.qty*s/100;o+=k}}),o}),Ht=ge(()=>M.value.reduce((o,s)=>o+(s.total_resale_discount||0),0)),ar=ge(()=>{const o=Bt.value+Ai.value+Cn.value+Fn.value+qn.value-Ht.value-Wn.value-Sr.value;return Math.round(Math.max(0,o)*100)/100}),Ir=o=>{const s=de.value.find(u=>u.id===o.id);return s&&s.is_taxable&&s.tax_percentage?o.unit_price*o.qty*parseFloat(s.tax_percentage)/100:0},Dt=o=>{const s=de.value.find(u=>u.id===o.id);return s&&s.is_taxable&&s.tax_percentage?parseFloat(s.tax_percentage):0},co=o=>{const s=Fe(o),u=s?s.id:null,A=Qt(o).map(S=>S.id).sort().join("-"),k=M.value.find(S=>{const B=(S.addons||[]).map(ae=>ae.id).sort().join("-");return S.id===o.id&&S.variant_id===u&&B===A});return k?k.qty:0},ta=async o=>{const s=Fe(o),u=s?s.id:null,_=Qt(o),A=_.map(Re=>Re.id).sort().join("-"),k=M.value.findIndex(Re=>{const wt=(Re.addons||[]).map(Vt=>Vt.id).sort().join("-");return Re.id===o.id&&Re.variant_id===u&&wt===A});let S=1,B=null;const ae=lr(o,u);k>=0&&(B=M.value[k],S=B.qty+1);const se=Xs({id:o.id,title:o.title,variant_id:u,variant_name:s?s.name:null,ingredients:ae,removed_ingredients:B?.removed_ingredients||[],addons:_},S);if(!se.canAdd){console.log(" Missing ingredients for card increment (client-side)");const Re=parseFloat(s?s.price:o.price),wt=ot(o),Vt=s?Nt(s,!0):Nt(o,!1);Jr.value={product:o,variant:s,variantId:u,variantName:s?s.name:null,variantPrice:Re,selectedAddons:_,addonsPrice:wt,resaleDiscountPerItem:Vt,existingIndex:k,newQty:S},tn.value=se.missing,or.value=!0,U.warning("Some ingredients are missing. Confirm to proceed.");return}const we=parseFloat(s?s.price:o.price),Qe=ot(o),J=we+Qe,Oe=s?Nt(s,!0):Nt(o,!1);if(k>=0)M.value[k].qty++,M.value[k].price=M.value[k].unit_price*M.value[k].qty,M.value[k].total_resale_discount=Oe*M.value[k].qty,M.value[k].outOfStock=!1;else{const Re=er(o);M.value.push({id:o.id,title:o.title,img:o.img,price:J,unit_price:Number(J),qty:1,note:"",stock:Re,ingredients:ae,variant_id:u,variant_name:s?s.name:null,addons:_,outOfStock:!1,resale_discount_per_item:Oe,total_resale_discount:Oe})}},na=o=>{const s=Fe(o),u=s?s.id:null,A=Qt(o).map(B=>B.id).sort().join("-"),k=M.value.findIndex(B=>{const ae=(B.addons||[]).map(se=>se.id).sort().join("-");return B.id===o.id&&B.variant_id===u&&ae===A});if(k<0)return;const S=M.value[k];S.qty<=1?M.value.splice(k,1):(S.qty--,S.price=S.unit_price*S.qty,S.outOfStock=!1)},lr=(o,s)=>!s||!o.variants?.length?o.ingredients??[]:o.variants.find(_=>_.id===s)?.ingredients??o.ingredients??[],ut=W(null),Hn=W(null);let vt=null;const Pl=(o,s)=>{ut.value=JSON.parse(JSON.stringify(o)),Hn.value=s;const u=de.value.find(_=>_.id===o.id);if(u&&u.addon_groups&&u.addon_groups.length>0){const _=new Map;o.addons&&o.addons.forEach(k=>{_.set(k.id,{quantity:k.quantity||1,selected:!0})});const A=[];u.addon_groups.forEach(k=>{k.addons&&k.addons.length>0&&k.addons.forEach(S=>{const B=_.get(S.id);A.push({id:S.id,name:S.name,price:parseFloat(S.price||0),group_id:k.group_id,group_name:k.group_name,quantity:B?.quantity||1,selected:B?.selected||!1})})}),ut.value.addons=A}else ut.value.addons=[];if(!vt){const _=document.getElementById("addonManagementModal");_&&(vt=new bootstrap.Modal(_))}vt&&vt.show()},rn=o=>{o.selected=!o.selected,o.selected||(o.quantity=1)},Ll=o=>{o.selected&&(o.quantity=(o.quantity||1)+1)},ra=o=>{o.selected&&(o.quantity||1)>1&&(o.quantity-=1)},Un=o=>o.addons?o.addons.reduce((s,u)=>u.selected!==!1?s+parseFloat(u.price)*(u.quantity||1):s,0):0,ss=()=>{if(Hn.value===null)return;const o=ut.value.addons.filter(k=>k.selected!==!1),s=ut.value.variant_id?de.value.find(k=>k.id===ut.value.id)?.variants?.find(k=>k.id===ut.value.variant_id):null,u=parseFloat(s?s.price:ut.value.unit_price),_=o.reduce((k,S)=>k+parseFloat(S.price)*(S.quantity||1),0),A=u+_;M.value[Hn.value].addons=o,M.value[Hn.value].unit_price=A,M.value[Hn.value].price=A*M.value[Hn.value].qty,U.success("Addons updated successfully!"),vt&&vt.hide(),ut.value=null,Hn.value=null},fo=o=>!o.addons||o.addons.length===0?"":o.addons.map(s=>s.name).join(", "),We=()=>{let o=0;return ht.value&&typeof ht.value=="object"&&Object.values(ht.value).forEach(s=>{Array.isArray(s)&&(o+=s.length)}),o},sn=ge(()=>f.props.current_user);ge(()=>f.props.onboarding.customer_view_url.url);const os=ge(()=>v.value.filter(o=>{const s=o.menu_items_count&&o.menu_items_count>0,u=o.deals_count&&o.deals_count>0;return s||u}));ge(()=>sn.value?.roles?.includes("Cashier")||sn.value?.roles?.includes("Admin")||sn.value?.roles?.includes("Manager"));const po=W(`terminal-${sn.value?.id}`),{broadcastCartUpdate:ho,broadcastUIUpdate:Rl}=MA(po.value),Ml=Wo.debounce(o=>{console.log(" Broadcasting cart:",o.items.length,"items"),ho(o)},300),Fl=Wo.debounce(o=>{console.log(" Broadcasting UI"),Rl(o)},100);Wi(()=>({items:M.value.map(o=>({id:o.id,title:o.name||o.title,img:o.image_url||o.img||"/assets/img/default.png",price:parseFloat(o.total||o.price||0),qty:parseInt(o.qty||1),variant_name:o.variant?.name||null,addons:(o.addons||[]).map(s=>({id:s.id,name:s.name,price:parseFloat(s.price||0)})),resale_discount_per_item:parseFloat(o.resale_discount_per_item||0)})),customer:et.value||"Walk In",phone_number:lt.value||"",delivery_location:tt.value||"",orderType:_e.value||"Dine In",table:Ct.value?{id:Ct.value.id,name:Ct.value.name}:null,subtotal:parseFloat(Bt.value||0),tax:parseFloat(Cn.value||0),serviceCharges:parseFloat(qn.value||0),deliveryCharges:parseFloat(Fn.value||0),saleDiscount:parseFloat(Ht.value||0),promoDiscount:parseFloat(Wn.value||0),total:parseFloat(ar.value||0),note:Jt.value||"",appliedPromos:(Le.value||[]).map(o=>({id:o.id,name:o.name,discount:parseFloat(o.discount||0),applied_to_items:o.applied_to_items||[]}))}),o=>{console.log(" Cart changed:",o.items.length,"items, Total:",o.total),Ml(o),jo(o)},{deep:!0,immediate:!0}),Wi(()=>({showCategories:tr.value??!0,activeCat:Ar.value||null,menuCategories:(v.value||[]).map(o=>({id:o.id,name:o.name,menu_items_count:o.menu_items_count||0})),menuItems:(de.value||[]).map(o=>({id:o.id,name:o.name,price:parseFloat(o.price||0),image_url:o.image_url||null,description:o.description||"",label_color:o.label_color||"#1B1670",category:o.category?{id:o.category.id,name:o.category.name}:null,variants:(o.variants||[]).map(s=>({id:s.id,name:s.name,price:parseFloat(s.price||0),is_saleable:s.is_saleable??!1,resale_type:s.resale_type||null,resale_value:parseFloat(s.resale_value||0)})),addon_groups:(o.addon_groups||[]).map(s=>({id:s.id,name:s.name,addons:(s.addons||[]).map(u=>({id:u.id,name:u.name,price:parseFloat(u.price||0)}))})),is_saleable:o.is_saleable??!1,resale_type:o.resale_type||null,resale_value:parseFloat(o.resale_value||0)})),searchQuery:Zt.value||"",selectedCardVariant:Ue.value||{},selectedCardAddons:gt.value||{}}),o=>{console.log(" UI changed - Categories:",o.menuCategories.length,"Items:",o.menuItems.length),Fl(o)},{deep:!0,immediate:!0});const ia=()=>{const o=route("customer-display.index",{terminal:po.value});window.open(o,"_blank","width=1920,height=1080")},Nt=(o,s=!1)=>{if(!o)return 0;const u=o.is_saleable??o?.menu_item?.is_saleable,_=o.resale_type??o?.menu_item?.resale_type,A=o.resale_value??o?.menu_item?.resale_value,k=parseFloat(o.price||0);return!u||!_||!A?0:_==="flat"?parseFloat(A):_==="percentage"?k*parseFloat(A)/100:0},on=(o,s=!1)=>{const u=parseFloat(o.price||0),_=Nt(o,s);return Math.max(0,u-_)},Ii=(o,s=!1)=>{if(!o)return null;const u=o.is_saleable??o?.menu_item?.is_saleable,_=o.resale_type??o?.menu_item?.resale_type,A=o.resale_value??o?.menu_item?.resale_value,k=Nt(o,s);return!u||!_||!A||k<=0?null:{type:_,value:A,amount:k,display:_==="flat"?`Sale ${r(k)}`:`${A}% OFF`}},sa=o=>{const s=Fe(o);let u;s?u=on(s,!0):u=on(o,!1);const _=ot(o);return u+_},Or=o=>{if(!o.variants||o.variants.length===0){const A=Nt(o,!1)>0;return{min:on(o,!1),max:on(o,!1),minOriginal:A?parseFloat(o.price||0):null,maxOriginal:A?parseFloat(o.price||0):null}}const s=o.variants.map(A=>on(A,!0)),u=o.variants.map(A=>parseFloat(A.price||0)),_=o.variants.some(A=>Nt(A,!0)>0);return{min:Math.min(...s),max:Math.max(...s),minOriginal:_?Math.min(...u):null,maxOriginal:_?Math.max(...u):null}},vo=()=>{if(!le.value)return 0;const o=Rn();return o?on(o,!0):on(le.value,!1)},_o=()=>vo()+At(),ti=W([]),oa=W(!1),mo=async()=>{oa.value=!0;try{const o=await axios.get("/api/deals",{params:{status:1,per_page:100}});console.log("Fetched deals:",o.data.data),ti.value=o.data.data.map(s=>({id:s.id,title:s.name,price:s.price,img:s.image_url||"/assets/img/product/product29.jpg",description:s.description,menu_items:s.menu_items||[],status:s.status,category_id:s.category_id,category:s.category}))}catch(o){console.error("Error fetching deals:",o),U.error("Failed to load deals")}finally{oa.value=!1}},as=o=>{const s=M.value.find(u=>u.isDeal&&u.dealId===(o.dealId||o.id));return s?s.qty:0},ql=o=>{const u=+(v.value.find(A=>A.id===o)?.menu_items_count||0),_=Oi(o);return u+_},Oi=o=>!ti.value||ti.value.length===0?0:ti.value.filter(s=>s.category_id===o).length,$t=(o,s)=>{if(!es.value)return{canAdd:!0,missing:[]};const u=[],_={};return M.value.forEach(A=>{let k=[];A.isDeal?A.menu_items?.forEach(S=>{k.push(...S.ingredients||[])}):k=A.ingredients||[],k.forEach(S=>{const B=S.inventory_item_id||S.id,ae=Number(S.inventory_stock??S.stock??0),se=Number(S.quantity??S.qty??1)*A.qty;_[B]||(_[B]={totalStock:ae,used:0,name:S.product_name||S.name,unit:S.unit||"unit"}),_[B].used+=se})}),o.menu_items.forEach(A=>{const k=A.ingredients||[];k.length!==0&&k.forEach(S=>{const B=S.inventory_item_id||S.id,ae=Number(S.quantity??S.qty??1)*s;let we=Number(S.inventory_stock??S.stock??0);_[B]&&(we=_[B].totalStock-_[B].used);const Qe=M.value.find(J=>J.isDeal&&J.dealId===o.id);if(Qe){const J=Number(S.quantity??S.qty??1)*Qe.qty;we+=J}we<ae&&u.push({deal_id:o.id,deal_title:o.title,menu_item_id:A.id,menu_item_name:A.name,inventory_item_id:B,inventory_item_name:S.product_name||S.name,required_quantity:ae,available_quantity:Math.max(0,we),shortage_quantity:ae-we,unit:S.unit||"unit",order_quantity:s})})}),{canAdd:u.length===0,missing:u}},go=async o=>{const s=M.value.findIndex(A=>A.isDeal&&A.dealId===o.id),u=s>=0?M.value[s].qty+1:1,_=$t(o,u);if(!_.canAdd){console.log(" Missing ingredients for deal (client-side)"),Ti.value={deal:o,existingIndex:s,newQty:u},tn.value=_.missing,or.value=!0,U.warning("Some ingredients are missing. Confirm to proceed.");return}if(s>=0)M.value[s].qty++,M.value[s].price=M.value[s].unit_price*M.value[s].qty,U.success("Deal quantity updated");else{const k=[];o.menu_items.forEach(B=>{B.ingredients&&B.ingredients.length>0&&k.push(...B.ingredients.map(ae=>({...ae,menu_item_id:B.id,menu_item_name:B.name})))});const S={id:o.id,title:o.title,price:parseFloat(o.price),unit_price:parseFloat(o.price),img:o.img,qty:1,stock:999999,ingredients:k,isDeal:!0,dealId:o.id,menu_items:o.menu_items.map(B=>({id:B.id,name:B.name,price:B.price,ingredients:B.ingredients||[],stock:Xi(B.ingredients||[])})),resale_discount_per_item:0,total_resale_discount:0};M.value.push(S),U.success(`${o.title} added to cart!`)}},ki=o=>{const s=M.value.findIndex(_=>_.isDeal&&_.dealId===o.id);if(s<0)return;const u=M.value[s];u.qty<=1?(M.value.splice(s,1),U.info("Deal removed from cart")):(u.qty--,u.price=u.unit_price*u.qty,U.success("Deal quantity decreased"))};xs(()=>{mo(),Gn()});const Ye=W(null),ze=W(0),Ze=W(1),Vn=W({}),ur=W({}),ni=W({}),cr=W([]);let zn=null;const Ke=ge(()=>!Ye.value||!Ye.value.menu_items?null:Ye.value.menu_items[ze.value]),Bl=ge(()=>us().length>0),bo=ge(()=>Ke.value?.addon_groups&&Ke.value.addon_groups.length>0),Ut=ge(()=>{let o=[],s=1;return Bl.value&&(o.push({id:"ingredients",name:"Ingredients",stepNumber:s,actualStep:1}),s++),bo.value&&(o.push({id:"addons",name:"Add-ons",stepNumber:s,actualStep:2}),s++),o.push({id:"review",name:"Review",stepNumber:s,actualStep:3}),o}),Kn=ge(()=>Ut.value.length),ls=ge(()=>{if(Ze.value===1)return"0%";const o=Ut.value.length,s=(Ze.value-1)/(o-1);return`calc(${s*100}% - ${14-s*28}px)`}),Wl=ge(()=>ze.value===Ye.value?.menu_items?.length-1);ge(()=>Ye.value?.menu_items?.length?cr.value.length/Ye.value.menu_items.length*100:0);const us=()=>Ke.value?Ke.value.ingredients||[]:[],yo=o=>(Vn.value[ze.value]||[]).includes(o),ri=o=>{const s=ze.value;Vn.value[s]||(Vn.value[s]=[]);const u=Vn.value[s],_=u.indexOf(o);_>-1?(u.splice(_,1),U.info("Ingredient added back")):(u.push(o),U.info("Ingredient removed"))},hn=()=>{const o=us(),s=Vn.value[ze.value]||[];return o.filter(u=>!s.includes(u.id)).length},aa=()=>{const o=ze.value,s=ur.value[o];if(!s)return 0;let u=0;return Object.values(s).forEach(_=>{u+=_.length}),u},Hl=()=>{const o=ze.value,s=ur.value[o];if(!s)return"";const u=[];return Object.values(s).forEach(_=>{_.forEach(A=>{u.push(`${A.name} (+${r(A.price)})`)})}),u.join(", ")},la=()=>{const o=ze.value,s=Vn.value[o]||[];if(s.length===0)return"";const u=us(),_=s.map(A=>{const k=u.find(S=>S.id===A);return k?k.product_name||k.name:null}).filter(Boolean);return _.length===0?"":`No ${_.join(", ")}`},Ul=o=>o<Ze.value?"stepper-circle-completed":o===Ze.value?"stepper-circle-active":"stepper-circle-inactive",ua=o=>{(o<=Ze.value||o===Ze.value+1)&&(Ze.value=o)},ca=()=>{Ze.value=Ut.value[0]?.stepNumber||1},ii=()=>{const o=Ut.value.findIndex(s=>s.stepNumber===Ze.value);o<Ut.value.length-1&&(Ze.value=Ut.value[o+1].stepNumber)},y=()=>{const o=Ut.value.findIndex(s=>s.stepNumber===Ze.value);o>0&&(Ze.value=Ut.value[o-1].stepNumber)},D=()=>{cr.value.includes(ze.value)||cr.value.push(ze.value),ze.value++,X.value=0,ca(),U.success("Item customized! Configure next item.")},C=async()=>{if(!Ye.value)return;cr.value.includes(ze.value)||cr.value.push(ze.value);const o=Ye.value.menu_items.map((k,S)=>{const B=Vn.value[S]||[],ae=ur.value[S]||{},se=ni.value[S]||"",we=[];Object.values(ae).forEach(J=>{J.forEach(Oe=>{we.push({id:Oe.id,name:Oe.name,price:parseFloat(Oe.price||0)})})});const Qe=(k.ingredients||[]).filter(J=>!B.includes(J.id)).map(J=>({id:J.id,inventory_item_id:J.inventory_item_id||J.id,product_name:J.product_name||J.name,quantity:J.quantity||J.qty||"1.00",stock:J.stock||0,unit:J.unit||"unit"}));return{id:k.id,name:k.name,price:k.price,ingredients:Qe,addons:we,kitchen_note:se,removed_ingredients:B,stock:Xi(Qe)}}),s=M.value.findIndex(k=>k.isDeal&&k.dealId===Ye.value.id),u=999999,_=[];if(o.forEach(k=>{k.ingredients&&k.ingredients.length>0&&_.push(...k.ingredients.map(S=>({...S,menu_item_id:k.id,menu_item_name:k.name})))}),s>=0)M.value[s].qty++,M.value[s].price=M.value[s].unit_price*M.value[s].qty,U.success("Deal quantity updated!");else{const k={id:Ye.value.id,title:Ye.value.title,price:oe.value,unit_price:parseFloat(Ye.value.price),img:Ye.value.img,qty:1,stock:u,ingredients:_,isDeal:!0,dealId:Ye.value.id,menu_items:o,resale_discount_per_item:0,total_resale_discount:0};M.value.push(k),U.success(`${Ye.value.title} added to cart!`)}const A=bootstrap.Modal.getInstance(document.getElementById("customizeDealModal"));A&&A.hide(),qe()},z=ge(()=>{if(!Ke.value)return 0;const o=parseFloat(Ke.value.price||0),s=ze.value,u=ur.value[s];if(!u)return o;let _=0;return Object.values(u).forEach(A=>{A.forEach(k=>{_+=parseFloat(k.price||0)})}),o+_}),oe=ge(()=>{if(!Ye.value)return 0;const o=parseFloat(Ye.value.price||0);let s=0;return Object.values(ur.value).forEach(u=>{Object.values(u).forEach(_=>{_.forEach(A=>{s+=parseFloat(A.price||0)})})}),o+s}),xe=ge(()=>{const o=ze.value,s=ur.value[o];if(!s)return 0;let u=0;return Object.values(s).forEach(_=>{_.forEach(A=>{u+=parseFloat(A.price||0)})}),u}),ct=o=>{if(Ye.value=o,ze.value=0,Vn.value={},ur.value={},ni.value={},cr.value=[],ca(),!zn){const s=document.getElementById("customizeDealModal");s&&(zn=new bootstrap.Modal(s,{backdrop:"static"}))}zn&&zn.show()},qe=()=>{Ye.value=null,ze.value=0,Ze.value=1,Vn.value={},ur.value={},ni.value={},cr.value=[],X.value=0},dr=W(!1),si=W([]),Pt=W(!1),cs=async()=>{if(M.value.length===0){U.error("No items in cart to hold");return}try{const o={customer_name:et.value,phone_number:lt.value,delivery_location:tt.value,order_type:_e.value,table_number:Ct.value?.name||null,sub_total:Bt.value,tax:Cn.value,service_charges:qn.value,delivery_charges:Fn.value,sale_discount:Ht.value,promo_discount:Wn.value,approved_discounts:Sr.value,total_amount:ar.value,note:Jt.value,kitchen_note:en.value,order_items:M.value.map(u=>({product_id:u.id,title:u.title,quantity:u.qty,price:u.price,unit_price:u.unit_price,note:u.note||"",item_kitchen_note:u.item_kitchen_note||"",variant_id:u.variant_id||null,variant_name:u.variant_name||null,addons:u.addons||[],ingredients:u.ingredients||[],removed_ingredients:u.removed_ingredients||[],sale_discount_per_item:u.resale_discount_per_item||0,total_resale_discount:u.total_resale_discount||0,isDeal:u.isDeal||!1,dealId:u.dealId||null,menu_items:u.menu_items||[]})),applied_promos:Le.value.map(u=>({promo_id:u.id,promo_name:u.name,promo_type:u.type,discount_amount:u.applied_discount||0,applied_to_items:u.applied_to_items||[]})),approved_discount_details:nt.value.map(u=>({discount_id:u.id,discount_name:u.name,discount_percentage:u.percentage,discount_amount:Zr(u.percentage),approval_id:u.approval_id})),selected_discounts:nt.value,terminal_id:po.value};(await axios.post("/pending-orders",o)).data.success&&(U.success("Order held successfully!"),xi(),await Gn())}catch(o){U.error(o.response?.data?.message||"Failed to hold order")}},Gn=async()=>{Pt.value=!0;try{const o=await axios.get("/pending-orders");o.data.success?si.value=o.data.data:si.value=[]}catch(o){console.error("Error fetching pending orders:",o),U.error("Failed to load pending orders"),si.value=[]}finally{Pt.value=!1}},oi=async()=>{dr.value=!0,await Gn()},ds=async o=>{try{if(et.value=o.customer_name||js(),lt.value=o.phone_number||"",tt.value=o.delivery_location||"",_e.value=o.order_type,Jt.value=o.note||"",en.value=o.kitchen_note||"",o.table_number){const s=xr.value.table_details?.find(u=>u.name===o.table_number);Ct.value=s||null}M.value=o.order_items.map(s=>({id:s.id||s.product_id,product_id:s.product_id,server_item_id:s.id,title:s.title,qty:s.quantity,price:s.price,unit_price:s.unit_price,note:s.note||"",item_kitchen_note:s.item_kitchen_note||"",img:s.img||"/assets/img/default.png",variant_id:s.variant_id||null,variant_name:s.variant_name||null,addons:s.addons||[],ingredients:s.ingredients||[],removed_ingredients:s.removed_ingredients||[],resale_discount_per_item:s.sale_discount_per_item||0,total_resale_discount:s.total_resale_discount||0,stock:s.stock||999999,isDeal:s.isDeal||!1,dealId:s.dealId||null,menu_items:s.menu_items||[]})),Le.value=o.applied_promos||[],nt.value=o.selected_discounts||[],await axios.delete(`/pending-orders/${o.id}`),U.success("Order resumed successfully!"),dr.value=!1,await Gn()}catch{U.error("Failed to resume order")}},fs=async o=>{try{let s="",u={};o.type==="unpaid"?(s=`/pending-orders/${o.id}`,u={order_type:"unpaid"}):(s=`/pending-orders/${o.id}`,u={order_type:"held"}),await axios.delete(s,{data:u}),U.success("Order rejected successfully"),await Gn()}catch(s){console.error("Error rejecting order:",s),U.error("Failed to reject order")}},Ce=(o,s)=>ht.value[o]?.some(u=>u.id===s),ps=(o,s)=>ht.value[o]?.find(_=>_.id===s)?.quantity||1,wo=(o,s)=>{ht.value[o]||(ht.value[o]=[]);const u=ht.value[o].findIndex(_=>_.id===s.id);if(u>-1)ht.value[o].splice(u,1);else{const _=le.value.addon_groups.find(A=>A.group_id===o);if(_&&_.max_select>0&&ht.value[o].length>=_.max_select){U.warning(`You can only select up to ${_.max_select} ${_.group_name}`);return}ht.value[o].push({id:s.id,name:s.name,price:parseFloat(s.price),group_id:o,quantity:1})}},Di=(o,s)=>{const u=ht.value[o]?.find(_=>_.id===s);u&&u.quantity++},da=(o,s)=>{const u=ht.value[o]?.find(_=>_.id===s);u&&u.quantity>1&&u.quantity--},kr=W(!1),De=W(null),hs=async()=>{if(M.value.length===0){U.error("Please add at least one item to the cart.");return}if(_e.value==="Eat_in"&&!Ct.value){U.error("Please select a table number for Dine In orders.");return}if((_e.value==="Delivery"||_e.value==="Takeaway")&&!et.value){U.error("Customer name is required.");return}if(_e.value==="Delivery"&&!lt.value){U.error("Phone number is required for delivery.");return}if(_e.value==="Delivery"&&!tt.value){U.error("Delivery location is required.");return}try{const o={customer_name:et.value,phone_number:lt.value,delivery_location:tt.value,sub_total:Bt.value,tax:Cn.value,service_charges:qn.value,delivery_charges:Fn.value,sales_discount:Ht.value,approved_discounts:Sr.value,approved_discount_details:nt.value.map(u=>({discount_id:u.id,discount_name:u.name,discount_percentage:u.percentage,discount_amount:Zr(u.percentage),approval_id:u.approval_id})),promo_discount:Wn.value,applied_promos:Le.value.map(u=>({promo_id:u.id,promo_name:u.name,promo_type:u.type,discount_amount:u.applied_discount||0,applied_to_items:u.applied_to_items||[]})),total_amount:ar.value,note:Jt.value,kitchen_note:en.value,order_date:new Date().toISOString().split("T")[0],order_time:new Date().toTimeString().split(" ")[0],order_type:_e.value==="Eat_in"?"Eat In":_e.value,table_number:Ct.value?.name||null,items:M.value.map(u=>({product_id:u.id,title:u.title,quantity:u.qty,price:u.price,note:u.note??"",kitchen_note:en.value??"",unit_price:u.unit_price,item_kitchen_note:u.item_kitchen_note??"",tax_percentage:Dt(u),tax_amount:Ir(u),variant_id:u.variant_id||null,variant_name:u.variant_name||null,addons:u.addons||[],sale_discount_per_item:u.resale_discount_per_item||0,removed_ingredients:u.removed_ingredients||[],is_deal:u.isDeal||!1,deal_id:u.dealId||null,menu_items:u.menu_items||[]})),confirm_missing_ingredients:!0};(await axios.post("/pos/order-without-payment",o)).data.success&&(U.success("Order placed successfully! Payment pending."),xi(),await Gn())}catch(o){console.error("Error placing order:",o),U.error(o.response?.data?.message||"Failed to place order")}},fr=o=>{const s=(o.order_items||[]).map(u=>({...u,server_item_id:u.id}));De.value={...o,order_items:s},Xr.value=parseFloat(o.total_amount).toFixed(2),kr.value=!0},vs=async o=>{try{const s={customer_name:et.value,phone_number:lt.value,delivery_location:tt.value,sub_total:(Number(o.unit_price)||0)*(Number(o.qty)||0),tax:Ir(o),service_charges:qn.value,delivery_charges:Fn.value,sales_discount:0,approved_discounts:0,approved_discount_details:[],promo_discount:0,applied_promos:[],total_amount:(Number(o.unit_price)||0)*(Number(o.qty)||0)+Ir(o),note:o.note??"",kitchen_note:en.value??"",order_date:new Date().toISOString().split("T")[0],order_time:new Date().toTimeString().split(" ")[0],order_type:_e.value==="Eat_in"?"Eat In":_e.value==="Delivery"?"Delivery":_e.value==="Takeaway"?"Takeaway":"Collection",table_number:Ct.value?.name||null,is_paid:!0,payment_method:"Cash",auto_print_kot:!0,cash_received:(Number(o.unit_price)||0)*(Number(o.qty)||0),change:0,items:[{product_id:o.id,title:o.title,quantity:o.qty,price:o.price,note:o.note??"",kitchen_note:o.kitchen_note??"",unit_price:o.unit_price,item_kitchen_note:o.item_kitchen_note??"",tax_percentage:Dt(o),tax_amount:Ir(o),variant_id:o.variant_id||null,variant_name:o.variant_name||null,addons:o.addons||[],sale_discount_per_item:0,removed_ingredients:o.removed_ingredients||[],is_deal:o.isDeal||!1}],confirm_missing_ingredients:!0};console.log(" Sending single item order:",s);const u=await axios.post("/pos/order",s);U.success(u.data.message||"Item order placed successfully!"),o.isPaid=!0,Qi()}catch(s){console.error(" Single item order error:",s),U.error(s.response?.data?.message||"Failed to place item order")}};return(o,s)=>(x(),O(He,null,[it(ue(jb),{title:"Sale"}),it(Xb,null,{default:Rt(()=>[c("div",nx,[c("div",rx,[c("div",ix,[c("div",{class:st(tr.value?"col-md-12":"col-lg-8")},[tr.value?(x(),O("div",sx,[c("div",ox,[s[29]||(s[29]=c("h4",{class:"mb-0"},"Categories",-1)),c("button",{onClick:ia,class:"btn btn-primary d-flex align-items-center gap-2",type:"button"},[...s[27]||(s[27]=[c("i",{class:"bi bi-tv"},null,-1),c("span",null,"Customer View",-1)])]),c("div",ax,[s[28]||(s[28]=c("input",{type:"email",name:"email",autocomplete:"email",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px"},tabindex:"-1","aria-hidden":"true"},null,-1)),q.value?pt((x(),O("input",{id:I,"onUpdate:modelValue":s[0]||(s[0]=u=>w.value=u),key:T.value,type:"search",class:"form-control form-control-sm",placeholder:"Search categories...",autocomplete:"new-password",name:I,role:"presentation",style:{"border-radius":"8px",padding:"8px 12px"}})),[[mr,w.value]]):(x(),O("input",lx))])]),s[32]||(s[32]=c("hr",null,null,-1)),g.value?(x(),O("div",ux,[...s[30]||(s[30]=[c("div",{class:"spinner-border",role:"status",style:{color:"#1B1670",width:"3rem",height:"3rem","border-width":"0.3em"}},null,-1),c("div",{class:"mt-2 fw-semibold text-muted"},"Loading...",-1)])])):(x(),O(He,{key:1},[(x(!0),O(He,null,mt(ve.value,u=>(x(),O("div",{key:u.id,class:"col-6 col-md-4 col-lg-4 category-cards"},[c("div",{class:"cat-card",onClick:_=>Ks(u)},[c("div",dx,[c("span",fx,[u.image_url?(x(),O("img",{key:0,src:u.image_url,alt:"Category Image",class:"cat-image"},null,8,px)):(x(),O("span",hx,""))])]),c("div",vx,$(u.name),1),c("div",_x,[he($(ql(u.id))+" Items ",1),Oi(u.id)>0?(x(),O("span",mx," ("+$(Oi(u.id))+" Deal"+$(Oi(u.id)>1?"s":"")+") ",1)):j("",!0)])],8,cx)]))),128)),!g.value&&ve.value.length===0?(x(),O("div",gx,[...s[31]||(s[31]=[c("div",{class:"alert alert-light border text-center rounded-4"}," No categories found ",-1)])])):j("",!0)],64))])):(x(),O("div",bx,[c("div",yx,[c("button",{class:"btn btn-primary rounded-pill shadow-sm px-3",onClick:s[1]||(s[1]=u=>Gs())},[...s[33]||(s[33]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),he(" Back ",-1)])]),c("h5",wx,$(v.value.find(u=>u.id===Ar.value)?.name||"Items"),1),c("div",Ex,[it(ry,{modelValue:Tt.value,"onUpdate:modelValue":s[2]||(s[2]=u=>Tt.value=u),title:"Menu Items","modal-id":"menuFilterModal","sort-options":[{value:"name_asc",label:"Name: A to Z"},{value:"name_desc",label:"Name: Z to A"},{value:"price_asc",label:"Price: Low to High"},{value:"price_desc",label:"Price: High to Low"}],"show-price-range":!0,"show-category":!1,"show-stock-status":!1,"show-date-range":!1,categories:[],suppliers:[],onApply:vl,onClear:Qs},null,8,["modelValue"]),c("div",Ax,[s[34]||(s[34]=c("i",{class:"bi bi-search position-absolute",style:{left:"12px",top:"50%",transform:"translateY(-50%)","z-index":"10"}},null,-1)),pt(c("input",{"onUpdate:modelValue":s[3]||(s[3]=u=>Zt.value=u),class:"form-control search-input ps-5",type:"text",placeholder:"Search items...",style:{"min-width":"250px"}},null,512),[[mr,Zt.value]])])])]),Ys.value.length===0?(x(),O("div",xx,[c("div",Cx,[s[38]||(s[38]=c("i",{class:"bi bi-search me-2",style:{"font-size":"2rem",opacity:"0.5"}},null,-1)),s[39]||(s[39]=c("h5",{class:"mt-2 mb-2 text-dark fw-semibold"},"No Menu Found",-1)),c("p",Tx,[Zt.value&&Tt.value.priceRange&&Tt.value.priceRange.length>0?(x(),O(He,{key:0},[he(" No items match your search and filter criteria. ")],64)):Zt.value?(x(),O(He,{key:1},[s[35]||(s[35]=he(' No items found matching "',-1)),c("strong",null,$(Zt.value),1),s[36]||(s[36]=he('" ',-1))],64)):Tt.value.priceRange&&Tt.value.priceRange.length>0?(x(),O(He,{key:2},[he(" No items match the selected price range. ")],64)):(x(),O(He,{key:3},[he(" No Menu available in this category. ")],64))]),c("button",{class:"btn btn-sm btn-outline-secondary rounded-pill",onClick:Qs},[...s[37]||(s[37]=[c("i",{class:"bi bi-arrow-clockwise me-1"},null,-1),he("Clear Filters ",-1)])])])])):j("",!0),c("div",Sx,[(x(!0),O(He,null,mt(Ys.value,u=>(x(),O("div",{class:"col-12 col-md-6 left-card cat-cards col-xl-6 d-flex",key:u.id},[u.isDeal?(x(),O("div",Ix,[c("div",Ox,[c("img",{src:u.img,alt:"",class:"w-100 h-100",style:{"object-fit":"cover"}},null,8,kx),c("span",Dx,[s[40]||(s[40]=c("i",{class:"bi bi-gift-fill me-1"},null,-1)),he(" "+$(ue(r)(u.price)),1)])]),c("div",Nx,[c("div",null,[c("div",$x,$(u.title),1)]),c("div",Px,[c("button",{class:"btn btn-primary customize-deal btn-sm w-75 mb-2",onClick:Bi(_=>ct(u),["stop"])}," Customize Deal ",8,Lx),c("div",{class:"d-flex align-items-center justify-content-start gap-2",onClick:s[4]||(s[4]=Bi(()=>{},["stop"]))},[c("button",{class:"qty-btn btn btn-outline-danger rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Bi(_=>ki(u),["stop"]),disabled:as(u)<=0},[...s[41]||(s[41]=[c("strong",null,"",-1)])],8,Rx),c("div",Mx,$(as(u)),1),c("button",{class:"qty-btn btn btn-outline-danger rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Bi(_=>go(u),["stop"])},[...s[42]||(s[42]=[c("strong",null,"+",-1)])],8,Fx)])])])])):(x(),O("div",{key:1,class:"card rounded-4 shadow-sm overflow-hidden border-3 w-100 d-flex flex-row align-items-stretch",style:Lo({borderColor:u.label_color||"#1B1670"})},[c("div",qx,[c("img",{src:u.img,alt:"",class:"w-100 h-100",style:{"object-fit":"cover"}},null,8,Bx),u.variants&&u.variants.length>0?(x(),O("div",Wx,[Or(u).minOriginal!==null?(x(),O("span",Hx,$(ue(r)(Or(u).minOriginal)),1)):j("",!0),c("span",Ux,$(ue(r)(Or(u).min))+" - ",1),Or(u).maxOriginal!==null?(x(),O("span",Vx,$(ue(r)(Or(u).maxOriginal)),1)):j("",!0),c("span",zx,$(ue(r)(Or(u).max)),1)])):j("",!0),c("span",{class:"position-absolute top-0 start-0 m-1 px-2 py-1 rounded-pill text-white fw-semibold",style:Lo({background:u.label_color||"#1B1670",fontSize:"0.58rem",letterSpacing:"0.3px"})},[Ii(Fe(u)||u,!!u.variants?.length)?(x(),O(He,{key:0},[c("span",Kx,$(ue(r)(Fe(u)?.price||u.price)),1),c("span",Gx,$(ue(r)(sa(u))),1)],64)):(x(),O(He,{key:1},[he($(ue(r)(Fe(u)?.price||u.price)),1)],64))],4),Mn(u)<=0?(x(),O("span",Yx," OUT OF STOCK ")):j("",!0)]),c("div",jx,[u.variants&&u.variants.length>0&&Ii(Fe(u),!0)||(!u.variants||u.variants.length===0)&&Ii(u,!1)?(x(),O("span",Qx,$(u.variants&&u.variants.length>0?Ii(Fe(u),!0).display:Ii(u,!1).display),1)):j("",!0),c("div",null,[c("div",{class:"h5 fw-bold mb-2 menu-name",style:Lo({color:u.label_color||"#1B1670"})},$(u.title),5),c("button",{class:"btn btn-primary btn-sm mb-2 view-details-btn",onClick:_=>Er(u)}," Customization ",8,Xx)]),c("div",{class:"mt-2 d-flex align-items-center justify-content-start gap-2",onClick:s[5]||(s[5]=Bi(()=>{},["stop"]))},[c("button",{class:"qty-btn btn btn-outline-secondary rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Bi(_=>na(u),["stop"]),disabled:co(u)<=0},[...s[43]||(s[43]=[c("strong",null,"",-1)])],8,Zx),c("div",Jx,$(co(u)),1),c("button",{class:"qty-btn btn btn-outline-secondary rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Bi(_=>ta(u),["stop"])},[...s[44]||(s[44]=[c("strong",null,"+",-1)])],8,eC)])])],4))]))),128))])]))],2),tr.value?j("",!0):(x(),O("div",tC,[c("div",nC,[c("button",{class:"btn pending btn-info px-3 py-2",onClick:oi},[s[45]||(s[45]=he(" Pending ",-1)),si.value.length>0?(x(),O("span",rC,$(si.value.length),1)):j("",!0)]),c("button",{class:"btn btn-warning px-3 py-2 promos-btn",onClick:Ol}," Promos "),c("button",{class:"btn btn-warning px-3 py-2 discount-btn",onClick:kl}," Discounts ")]),c("div",iC,[c("div",sC,[c("div",oC,[(x(!0),O(He,null,mt(nr.value,(u,_)=>(x(),O("button",{key:_,class:st(["ot-pill btn cart-header-buttons",{active:_e.value===u}]),onClick:A=>_e.value=u},$(u.replace(/_/g," ")),11,aC))),128)),s[46]||(s[46]=c("div",{class:"d-flex justify-content-between mb-3"},null,-1))])]),c("div",lC,[c("div",uC,[_e.value==="Eat_in"?(x(),O("div",cC,[c("div",dC,[s[48]||(s[48]=c("label",{class:"form-label small"},"Table",-1)),pt(c("select",{"onUpdate:modelValue":s[6]||(s[6]=u=>Ct.value=u),class:"form-select form-select-sm"},[s[47]||(s[47]=c("option",{value:null},"Select Table",-1)),(x(!0),O(He,null,mt(xr.value.table_details,(u,_)=>(x(),O("option",{key:_,value:u},$(u.name),9,fC))),128))],512),[[Qb,Ct.value]]),Ot.value.table_number?(x(),O("div",pC,$(Ot.value.table_number[0]),1)):j("",!0)]),c("div",hC,[s[49]||(s[49]=c("label",{class:"form-label small"},"Customer",-1)),pt(c("input",{"onUpdate:modelValue":s[7]||(s[7]=u=>et.value=u),class:"form-control form-control-sm",placeholder:"Walk In"},null,512),[[mr,et.value]])])])):(x(),O("div",vC,[s[50]||(s[50]=c("label",{class:"form-label small"},"Customer",-1)),pt(c("input",{"onUpdate:modelValue":s[8]||(s[8]=u=>et.value=u),class:st(["form-control form-control-sm",{"is-invalid":Ot.value.customer}]),placeholder:"Walk In"},null,2),[[mr,et.value]]),Ot.value.customer?(x(),O("div",_C,$(Ot.value.customer[0]),1)):j("",!0)])),_e.value==="Delivery"?(x(),O("div",mC,[s[51]||(s[51]=c("label",{class:"form-label small"},"Delivery Location",-1)),pt(c("input",{"onUpdate:modelValue":s[9]||(s[9]=u=>tt.value=u),class:"form-control form-control-sm",placeholder:"Enter delivery location"},null,512),[[mr,tt.value]]),Ot.value.delivery_location?(x(),O("div",gC,$(Ot.value.delivery_location[0]),1)):j("",!0),s[52]||(s[52]=c("label",{class:"form-label small mt-2"},"Phone Number",-1)),pt(c("input",{"onUpdate:modelValue":s[10]||(s[10]=u=>lt.value=u),class:"form-control form-control-sm",placeholder:"Enter phone number"},null,512),[[mr,lt.value]]),Ot.value.phone_number?(x(),O("div",bC,$(Ot.value.phone_number[0]),1)):j("",!0)])):j("",!0)]),c("div",yC,[M.value.length===0?(x(),O("div",wC," Add items from the left ")):j("",!0),(x(!0),O(He,null,mt(M.value,(u,_)=>(x(),O("div",{key:u.title,class:"line"},[c("div",EC,[c("img",{src:u.img,alt:""},null,8,AC),c("div",xC,[c("div",{class:"name",title:u.title},$(u.title),9,CC),u.resale_discount_per_item>0?(x(),O("div",TC,[c("span",SC,[s[53]||(s[53]=c("i",{class:"bi bi-tag-fill"},null,-1)),he(" Save "+$(ue(r)(u.resale_discount_per_item)),1)])])):j("",!0),u.addons&&u.addons.length>0?(x(),O("div",IC,[c("button",{class:"btn-link p-0 py-0 text-decoration-none",onClick:A=>Pl(u,_),title:fo(u)},[s[54]||(s[54]=c("i",{class:"bi bi-plus-circle-fill text-primary me-1",style:{"font-size":"0.9rem"}},null,-1)),c("span",kC,$(u.addons.length)+" addon(s)",1)],8,OC)])):j("",!0),Dl(u)?(x(),O("span",DC,[...s[55]||(s[55]=[c("i",{class:"bi bi-tag-fill"},null,-1)])])):j("",!0),u.variant_name?(x(),O("div",NC,[c("span",$C,$(u.variant_name),1)])):j("",!0),u.note?(x(),O("div",PC,$(u.note),1)):j("",!0)])]),c("div",LC,[c("div",RC,[c("button",{class:"qty-btn",onClick:A=>ml(_)},"",8,MC),c("div",FC,$(u.qty),1),c("button",{class:"qty-btn",onClick:A=>_l(_)},"+",8,qC)]),c("div",BC,[c("div",WC,$(ue(r)(u.price)),1),c("button",{class:"del",onClick:A=>Zs(_)},[...s[56]||(s[56]=[c("i",{class:"bi bi-trash"},null,-1)])],8,HC)])])]))),128))]),c("div",UC,[c("div",VC,[s[57]||(s[57]=c("span",null,"Sub Total",-1)),c("b",zC,$(ue(r)(Bt.value)),1)]),Ai.value>0?(x(),O("div",KC,[s[58]||(s[58]=c("span",{class:"text-muted"}," Add-ons Total: ",-1)),c("span",GC,$(ue(r)(Ai.value)),1)])):j("",!0),Cn.value>0?(x(),O("div",YC,[s[59]||(s[59]=c("span",{class:"d-flex align-items-center gap-2"},[c("i",{class:"bi bi-receipt text-info"}),he(" Tax ")],-1)),c("b",jC,$(ue(r)(Cn.value)),1)])):j("",!0),qn.value>0?(x(),O("div",QC,[s[60]||(s[60]=c("span",{class:"text-muted"},"Service Charges:",-1)),c("span",XC,$(ue(r)(qn.value)),1)])):j("",!0),Fn.value>0?(x(),O("div",ZC,[s[61]||(s[61]=c("span",{class:"text-muted"},"Delivery Charges:",-1)),c("span",JC,$(ue(r)(Fn.value)),1)])):j("",!0),Ht.value>0?(x(),O("div",eT,[s[62]||(s[62]=c("span",{class:"d-flex align-items-center gap-2"},[c("span",{class:"text-danger"},"Sale Discount:")],-1)),c("b",tT,"-"+$(ue(r)(Ht.value)),1)])):j("",!0),Le.value&&Le.value.length>0?(x(),O("div",nT,[c("div",rT,[c("div",iT,[s[63]||(s[63]=c("span",{class:"text-success"},"Promo Discount:",-1)),c("b",sT,"-"+$(ue(r)(Wn.value)),1)])])])):j("",!0),Wt.value.length>0?(x(),O("div",oT,[s[65]||(s[65]=c("div",{class:"alert alert-warning py-2 px-3 mb-2"},[c("div",{class:"d-flex align-items-center gap-2"},[c("i",{class:"bi bi-clock-history"}),c("small",{class:"fw-semibold"},"Pending Approval")])],-1)),(x(!0),O(He,null,mt(Wt.value,u=>(x(),O("div",{key:u.id,class:"trow"},[c("span",aT,[s[64]||(s[64]=c("i",{class:"bi bi-hourglass-split"},null,-1)),c("span",null,$(u.discountData?.name||"Discount")+" ("+$(u.percentage)+"%)",1)]),c("span",lT," -"+$(ue(r)(Zr(u.percentage))),1)]))),128)),s[66]||(s[66]=c("small",{class:"text-muted d-block mt-1 ms-4"},[c("i",{class:"bi bi-info-circle me-1"}),he(" Will apply after Super Admin approval ")],-1))])):j("",!0),nt.value.length>0?(x(),O("div",uT,[c("div",cT,[s[67]||(s[67]=c("div",{class:"d-flex align-items-center text-success gap-2"},[c("i",{class:"bi bi-check-circle"}),c("small",{class:"fw-semibold"},"Approved Discounts"),c("i",{class:"bi bi-info-circle text-muted",tabindex:"0",role:"button","data-bs-toggle":"popover","data-bs-trigger":"click","data-bs-html":"true","data-bs-placement":"top","data-bs-container":"body","data-bs-content":"Auto-updates with cart changes<br>Approved Discounts"})],-1)),c("b",dT,"-"+$(ue(r)(Sr.value)),1)])])):j("",!0),c("div",fT,[s[68]||(s[68]=c("span",null,"Total",-1)),c("b",null,$(ue(r)(ar.value)),1)])]),c("div",pT,[it(ue(jf),null,{default:Rt(()=>[it(ue(Xa),{value:"0"},{default:Rt(()=>[it(ue(Qa),null,{default:Rt(()=>[...s[69]||(s[69]=[he("Front Note",-1)])]),_:1}),it(ue(ja),null,{default:Rt(()=>[c("div",hT,[pt(c("textarea",{id:"frontNote","onUpdate:modelValue":s[11]||(s[11]=u=>Jt.value=u),rows:"3",class:"form-control form-control-sm rounded-3",placeholder:"Enter front note..."},null,512),[[mr,Jt.value]])])]),_:1})]),_:1}),it(ue(Xa),{value:"1"},{default:Rt(()=>[it(ue(Qa),null,{default:Rt(()=>[...s[70]||(s[70]=[he("Kitchen Note",-1)])]),_:1}),it(ue(ja),null,{default:Rt(()=>[c("div",vT,[pt(c("textarea",{id:"kitchenNote","onUpdate:modelValue":s[12]||(s[12]=u=>en.value=u),rows:"3",class:"form-control form-control-sm rounded-3",placeholder:"Enter kitchen note..."},null,512),[[mr,en.value]])])]),_:1})]),_:1})]),_:1})])]),c("div",_T,[c("button",{class:"btn btn-secondary btn-clear",onClick:s[13]||(s[13]=u=>xi())}," Clear "),c("button",{class:"btn btn-warning",onClick:cs}," Pending "),c("button",{class:"btn btn-primary btn-place",onClick:Yo}," Place Order "),c("button",{class:"btn btn-info",onClick:hs},[...s[71]||(s[71]=[c("i",{class:"bi bi-clock me-1"},null,-1),he(" Pay Later ",-1)])])])])]))])]),c("div",mT,[c("div",gT,[c("div",bT,[c("div",yT,[c("div",null,[c("h5",wT,$(le.value?.title||"Choose Item"),1),s[72]||(s[72]=c("p",{class:"text-muted small mb-0",style:{"font-size":"0.8rem"}},"Customize your order",-1))]),s[73]||(s[73]=c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])],-1))]),c("div",ET,[c("div",AT,[s[74]||(s[74]=c("div",{class:"stepper-progress-bg"},null,-1)),c("div",{class:"stepper-progress-fill",style:Lo({width:Yr.value})},null,4),(x(!0),O(He,null,mt(Be.value,(u,_)=>(x(),O("div",{key:u.id,class:"stepper-step text-center"},[c("div",{class:st(["stepper-circle stepper-circle-sm",Ft(u.stepNumber)]),onClick:A=>It(u.stepNumber),style:{cursor:"pointer"}},[u.stepNumber<Ne.value?(x(),O("i",CT)):(x(),O("span",TT,$(u.stepNumber),1))],10,xT),c("small",{class:st(["stepper-label",{"stepper-label-active":u.stepNumber===Ne.value}]),style:{"font-size":"0.7rem","margin-top":"4px",display:"block",cursor:"pointer"},onClick:A=>It(u.stepNumber)},$(u.name),11,ST)]))),128))])]),c("div",IT,[c("div",OT,[c("div",kT,[c("div",DT,[s[78]||(s[78]=c("div",{class:"d-flex align-items-center mb-2"},[c("i",{class:"bi bi-receipt me-2 text-primary",style:{"font-size":"1rem"}}),c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Price Breakdown")],-1)),c("div",NT,[s[75]||(s[75]=c("span",{class:"text-muted"},"Base Price",-1)),c("strong",null,$(ue(r)(Us())),1)]),At()>0?(x(),O("div",$T,[s[76]||(s[76]=c("span",{class:"text-muted"},"Add-ons",-1)),c("strong",PT,"+ "+$(ue(r)(At())),1)])):j("",!0),s[79]||(s[79]=c("hr",{class:"my-2"},null,-1)),c("div",LT,[s[77]||(s[77]=c("span",{class:"fw-bold"},"Total",-1)),c("span",RT,$(ue(r)(_o())),1)])])]),c("div",MT,[c("div",FT,[pt(c("div",qT,[s[81]||(s[81]=c("div",{class:"d-flex align-items-start mb-2"},[c("i",{class:"bi bi-grid-3x3-gap me-2 text-primary",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Choose Variant ")])],-1)),c("div",BT,[(x(!0),O(He,null,mt(le.value?.variants,u=>(x(),O("div",{key:u.id,class:"col-12"},[c("div",{class:st(["border rounded-3 p-2 shadow-sm variant-card",rr.value===u.id?"border-primary bg-light":""]),onClick:_=>jr(u.id),style:{cursor:"pointer"}},[c("div",HT,[c("div",null,[c("h6",UT,$(u.name),1)]),c("div",VT,[rr.value===u.id?(x(),O("div",zT,[...s[80]||(s[80]=[c("i",{class:"bi bi-check-circle-fill",style:{"font-size":"1rem"}},null,-1)])])):j("",!0),c("strong",KT,$(ue(r)(u.price)),1)])])],10,WT)]))),128))])],512),[[Hr,Ne.value===1&&An.value]]),pt(c("div",GT,[s[82]||(s[82]=c("div",{class:"d-flex align-items-start mb-2"},[c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Remove Ingredients")])],-1)),c("div",YT,[(x(!0),O(He,null,mt(at(),u=>(x(),O("div",{key:u.id||u.inventory_item_id,class:"col-md-6"},[c("div",{class:st(["d-flex align-items-center p-2 border rounded-2 shadow-sm",{"bg-light text-muted":Xe(u.id||u.inventory_item_id)}])},[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"16px",height:"16px"},id:"ingredient-"+(u.id||u.inventory_item_id),checked:!Xe(u.id||u.inventory_item_id),disabled:!Xe(u.id||u.inventory_item_id)&&Ln()===1,onChange:_=>Mt(u.id||u.inventory_item_id)},null,40,jT),c("label",{for:"ingredient-"+(u.id||u.inventory_item_id),class:"form-check-label",style:{"font-size":"0.8rem"}},$(u.product_name||u.name),9,QT)],2)]))),128))])],512),[[Hr,Be.value[Ne.value-1]?.id==="ingredients"]]),pt(c("div",XT,[s[88]||(s[88]=c("div",{class:"d-flex align-items-start mb-3"},[c("i",{class:"bi bi-plus-circle me-2 text-success",style:{"font-size":"1.1rem"}}),c("div",{class:"flex-grow-1"},[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Add Add-ons"),c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}},"Enhance your meal")])],-1)),le.value?.addon_groups?.length>1?(x(),O("div",ZT,[c("div",JT,[c("small",eS," Group "+$(N.value+1)+" of "+$(le.value?.addon_groups?.length),1),c("div",tS,[(x(!0),O(He,null,mt(le.value?.addon_groups,(u,_)=>(x(),O("span",{key:_,class:st(["rounded-circle",_===N.value?"bg-primary":"bg-secondary"]),style:{width:"8px",height:"8px",display:"inline-block",opacity:"0.6"}},null,2))),128))])])])):j("",!0),K.value?(x(),O("div",nS,[c("div",rS,[c("div",iS,[c("h6",sS,$(K.value.group_name),1),K.value.max_select>0?(x(),O("span",oS," Max "+$(K.value.max_select),1)):j("",!0)]),K.value.description?(x(),O("p",aS,$(K.value.description),1)):j("",!0)]),c("div",lS,[(x(!0),O(He,null,mt(K.value.addons,u=>(x(),O("div",{key:u.id,class:"col-12"},[c("div",{class:st(["border rounded-2 p-2 shadow-sm d-flex align-items-center justify-content-between",{"bg-light border-success":Ce(K.value.group_id,u.id)}])},[c("div",uS,[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"18px",height:"18px",cursor:"pointer"},id:"addon-"+u.id,checked:Ce(K.value.group_id,u.id),onChange:_=>wo(K.value.group_id,u)},null,40,cS),c("label",{for:"addon-"+u.id,class:"form-check-label mb-0",style:{"font-size":"0.85rem",cursor:"pointer"}},[he($(u.name)+" ",1),c("span",fS," +"+$(ue(r)(u.price)),1)],8,dS)]),Ce(K.value.group_id,u.id)?(x(),O("div",pS,[c("button",{class:"btn btn-primary rounded-circle p-0",style:{width:"35px",height:"10px"},onClick:_=>da(K.value.group_id,u.id),disabled:ps(K.value.group_id,u.id)<=1},[...s[83]||(s[83]=[c("i",{class:"bi bi-dash",style:{"font-size":"0.9rem"}},null,-1)])],8,hS),c("span",vS,$(ps(K.value.group_id,u.id)),1),c("button",{class:"btn btn-primary rounded-circle p-0",style:{width:"35px",height:"10px"},onClick:_=>Di(K.value.group_id,u.id)},[...s[84]||(s[84]=[c("i",{class:"bi bi-plus",style:{"font-size":"0.9rem"}},null,-1)])],8,_S)])):j("",!0)],2)]))),128))])])):j("",!0),le.value?.addon_groups?.length>1?(x(),O("div",mS,[c("button",{class:"btn btn-primary btn-sm px-3",onClick:pe,disabled:N.value===0},[...s[85]||(s[85]=[c("i",{class:"bi bi-chevron-left me-1"},null,-1),he(" Previous ",-1)])],8,gS),c("button",{class:"btn btn-primary btn-sm px-3",onClick:G,disabled:N.value>=le.value?.addon_groups?.length-1},[...s[86]||(s[86]=[he(" Next ",-1),c("i",{class:"bi bi-chevron-right ms-1"},null,-1)])],8,bS)])):j("",!0),c("div",{class:"text-center mt-3"},[c("button",{class:"btn btn-link btn-sm text-muted",onClick:te},[...s[87]||(s[87]=[c("small",null,"Skip add-ons",-1)])])])],512),[[Hr,Be.value[Ne.value-1]?.id==="addons"]]),pt(c("div",yS,[s[95]||(s[95]=c("div",{class:"d-flex align-items-start mb-2"},[c("i",{class:"bi bi-cart-check me-2 text-success",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Review Your Order"),c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}},"Confirm selections")])],-1)),c("div",wS,[s[92]||(s[92]=c("h6",{class:"fw-bold mb-2 text-secondary"},"Order Summary",-1)),An.value?(x(),O("div",ES,[s[89]||(s[89]=c("span",{class:"summary-label"},"Variant:",-1)),c("span",AS,$(wi()),1)])):j("",!0),Ve.value.length>0?(x(),O("div",xS,[s[90]||(s[90]=c("span",{class:"summary-label"},"Removed:",-1)),c("span",CS,$(En()),1)])):j("",!0),We()>0?(x(),O("div",TS,[s[91]||(s[91]=c("span",{class:"summary-label"},"Add-ons:",-1)),c("span",SS,$(qt()),1)])):j("",!0)]),c("div",IS,[s[93]||(s[93]=c("label",{class:"me-3 fw-semibold",style:{"font-size":"0.85rem"}},"Quantity:",-1)),c("div",OS,[c("button",{class:"qty-btn",onClick:yl,disabled:bt.value<=1},"",8,kS),c("div",DS,$(bt.value),1),c("button",{class:"qty-btn",onClick:bl},"+")])]),c("div",NS,[s[94]||(s[94]=c("label",{class:"fw-semibold mb-1",style:{"font-size":"0.85rem"}},[c("i",{class:"bi bi-chat-left-text me-1"}),he(" Kitchen Note (Optional) ")],-1)),pt(c("textarea",{"onUpdate:modelValue":s[14]||(s[14]=u=>xn.value=u),class:"form-control form-control-sm rounded-2 shadow-sm",rows:"2",maxlength:"200",placeholder:"Special instructions...",style:{"font-size":"0.8rem"}},null,512),[[mr,xn.value]]),c("div",$S,$(xn.value?.length||0)+"/200 ",1)])],512),[[Hr,Be.value[Ne.value-1]?.id==="review"]])])])])]),c("div",PS,[Ne.value>1?(x(),O("button",{key:0,class:"btn btn-light btn-sm px-4 py-2 shadow-sm",onClick:Jn},[...s[96]||(s[96]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),he("Back ",-1)])])):j("",!0),Ne.value<pn.value?(x(),O("button",{key:1,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:Hs},[...s[97]||(s[97]=[he(" Next ",-1),c("i",{class:"bi bi-arrow-right ms-1"},null,-1)])])):(x(),O("button",{key:2,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:gl},[...s[98]||(s[98]=[c("i",{class:"bi bi-cart-plus me-1"},null,-1),he("Add to Cart ",-1)])]))])])])]),c("div",LS,[c("div",RS,[c("div",MS,[c("div",FS,[c("div",null,[c("h5",qS,$(Ye.value?.title||"Customize Deal"),1),c("p",BS," Customizing "+$(Ke.value?.name||"item")+" ("+$(ze.value+1)+" of "+$(Ye.value?.menu_items?.length||0)+") ",1)]),s[99]||(s[99]=c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])],-1))]),c("div",WS,[c("div",HS,[s[100]||(s[100]=c("div",{class:"stepper-progress-bg"},null,-1)),c("div",{class:"stepper-progress-fill",style:Lo({width:ls.value})},null,4),(x(!0),O(He,null,mt(Ut.value,(u,_)=>(x(),O("div",{key:u.id,class:"stepper-step text-center"},[c("div",{class:st(["stepper-circle stepper-circle-sm",Ul(u.stepNumber)]),onClick:A=>ua(u.stepNumber),style:{cursor:"pointer"}},[u.stepNumber<Ze.value?(x(),O("i",VS)):(x(),O("span",zS,$(u.stepNumber),1))],10,US),c("small",{class:st(["stepper-label",{"stepper-label-active":u.stepNumber===Ze.value}]),style:{"font-size":"0.7rem","margin-top":"4px",display:"block",cursor:"pointer"},onClick:A=>ua(u.stepNumber)},$(u.name),11,KS)]))),128))])]),c("div",GS,[c("div",YS,[c("div",jS,[c("div",QS,[c("h6",XS,[it(ue(df),{class:"me-2 text-primary w-4"}),s[101]||(s[101]=he(" Currently Customizing ",-1))]),c("div",ZS,[c("div",JS,[c("strong",null,$(Ke.value?.name),1),c("div",e2," Base Price: "+$(ue(r)(Ke.value?.price||0)),1),xe.value>0?(x(),O("div",t2," + "+$(ue(r)(xe.value))+" (Add-ons) ",1)):j("",!0),c("div",n2," Total: "+$(ue(r)(z.value)),1)])])]),c("div",r2,[s[102]||(s[102]=c("h6",{class:"fw-bold mb-2",style:{"font-size":"0.9rem"}},[c("i",{class:"bi bi-list-check me-2 text-success"}),he(" Items in Deal ")],-1)),c("div",i2,[(x(!0),O(He,null,mt(Ye.value?.menu_items,(u,_)=>(x(),O("div",{key:_,class:"list-group-item px-0 py-2 border-0"},[c("div",s2,[cr.value.includes(_)?(x(),O("i",o2)):_===ze.value?(x(),dn(ue(df),{key:1,class:"text-primary me-2 w-4"})):(x(),O("i",a2)),c("small",{class:st({"fw-bold":_===ze.value})},$(u.name),3)])]))),128))])])]),c("div",l2,[c("div",u2,[pt(c("div",c2,[c("div",d2,[s[104]||(s[104]=c("i",{class:"bi bi-dash-circle me-2 text-warning",style:{"font-size":"1.1rem"}},null,-1)),c("div",null,[c("h6",f2," Remove Ingredients from "+$(Ke.value?.name),1),s[103]||(s[103]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Uncheck ingredients you don't want ",-1))])]),c("div",p2,[(x(!0),O(He,null,mt(us(),u=>(x(),O("div",{key:u.id,class:"col-md-6"},[c("div",{class:st(["d-flex align-items-center p-2 border rounded-2 shadow-sm",{"bg-light text-muted":yo(u.id)}])},[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"16px",height:"16px"},id:"deal-ingredient-"+u.id,checked:!yo(u.id),disabled:!yo(u.id)&&hn()===1,onChange:_=>ri(u.id)},null,40,h2),c("label",{for:"deal-ingredient-"+u.id,class:"form-check-label",style:{"font-size":"0.8rem"}},$(u.product_name||u.name),9,v2)],2)]))),128))])],512),[[Hr,Ut.value[Ze.value-1]?.id==="ingredients"]]),pt(c("div",_2,[c("div",m2,[s[106]||(s[106]=c("i",{class:"bi bi-plus-circle me-2 text-success",style:{"font-size":"1.1rem"}},null,-1)),c("div",g2,[c("h6",b2," Add Add-ons to "+$(Ke.value?.name),1),s[105]||(s[105]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Enhance this item (charges may apply) ",-1))])]),Ke.value?.addon_groups?.length>1?(x(),O("div",y2,[c("div",w2,[c("small",E2," Group "+$(X.value+1)+" of "+$(Ke.value?.addon_groups?.length),1),c("div",A2,[(x(!0),O(He,null,mt(Ke.value?.addon_groups,(u,_)=>(x(),O("span",{key:_,class:st(["rounded-circle",_===X.value?"bg-primary":"bg-secondary"]),style:{width:"8px",height:"8px",display:"inline-block",opacity:"0.6"}},null,2))),128))])])])):j("",!0),Y.value?(x(),O("div",x2,[c("div",C2,[c("div",T2,[c("h6",S2,$(Y.value.group_name),1),Y.value.max_select>0?(x(),O("span",I2," Max "+$(Y.value.max_select),1)):j("",!0)]),Y.value.description?(x(),O("p",O2,$(Y.value.description),1)):j("",!0)]),c("div",k2,[(x(!0),O(He,null,mt(Y.value.addons,u=>(x(),O("div",{key:u.id,class:"col-12"},[c("div",{class:st(["border rounded-2 p-2 shadow-sm d-flex align-items-center justify-content-between",{"bg-light border-success":Ce(Y.value.group_id,u.id)}])},[c("div",D2,[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"18px",height:"18px",cursor:"pointer"},id:"deal-addon-"+u.id,checked:Ce(Y.value.group_id,u.id),onChange:_=>wo(Y.value.group_id,u)},null,40,N2),c("label",{for:"deal-addon-"+u.id,class:"form-check-label mb-0",style:{"font-size":"0.85rem",cursor:"pointer"}},[he($(u.name)+" ",1),c("span",P2," +"+$(ue(r)(u.price)),1)],8,$2)]),Ce(Y.value.group_id,u.id)?(x(),O("div",L2,[c("button",{class:"btn btn-primary rounded-circle p-0",style:{width:"35px",height:"10px"},onClick:_=>da(Y.value.group_id,u.id),disabled:ps(Y.value.group_id,u.id)<=1},[...s[107]||(s[107]=[c("i",{class:"bi bi-dash",style:{"font-size":"0.9rem"}},null,-1)])],8,R2),c("span",M2,$(ps(Y.value.group_id,u.id)),1),c("button",{class:"btn btn-primary rounded-circle p-0",style:{width:"35px",height:"10px"},onClick:_=>Di(Y.value.group_id,u.id)},[...s[108]||(s[108]=[c("i",{class:"bi bi-plus",style:{"font-size":"0.9rem"}},null,-1)])],8,F2)])):j("",!0)],2)]))),128))])])):j("",!0),Ke.value?.addon_groups?.length>1?(x(),O("div",q2,[c("button",{class:"btn btn-primary btn-sm px-3",onClick:Ie,disabled:X.value===0},[...s[109]||(s[109]=[c("i",{class:"bi bi-chevron-left me-1"},null,-1),he(" Previous ",-1)])],8,B2),c("button",{class:"btn btn-primary btn-sm px-3",onClick:ke,disabled:X.value>=Ke.value?.addon_groups?.length-1},[...s[110]||(s[110]=[he(" Next ",-1),c("i",{class:"bi bi-chevron-right ms-1"},null,-1)])],8,W2)])):j("",!0),c("div",{class:"text-center mt-3"},[c("button",{class:"btn btn-link btn-sm text-muted",onClick:ce},[...s[111]||(s[111]=[c("small",null,"Skip add-ons",-1)])])])],512),[[Hr,Ut.value[Ze.value-1]?.id==="addons"]]),pt(c("div",H2,[c("div",U2,[it(ue(fy),{class:"me-2 text-primary w-5",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",V2," Review "+$(Ke.value?.name),1),s[112]||(s[112]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Confirm your customizations ",-1))])]),c("div",z2,[s[119]||(s[119]=c("h6",{class:"fw-bold mb-2 text-secondary"},"Customization Summary",-1)),c("div",K2,[s[113]||(s[113]=c("span",{class:"summary-label"},"Item:",-1)),c("span",G2,$(Ke.value?.name),1)]),c("div",Y2,[s[114]||(s[114]=c("span",{class:"summary-label"},"Base Price:",-1)),c("span",j2,$(ue(r)(Ke.value?.price||0)),1)]),la()?(x(),O("div",Q2,[s[115]||(s[115]=c("span",{class:"summary-label"},"Removed:",-1)),c("span",X2,$(la()),1)])):j("",!0),aa()>0?(x(),O("div",Z2,[s[116]||(s[116]=c("span",{class:"summary-label"},"Add-ons:",-1)),c("span",J2,$(Hl()),1)])):j("",!0),xe.value>0?(x(),O("div",eI,[s[117]||(s[117]=c("span",{class:"summary-label"},"Add-ons Cost:",-1)),c("span",tI," + "+$(ue(r)(xe.value)),1)])):j("",!0),c("div",nI,[s[118]||(s[118]=c("span",{class:"summary-label fw-bold"},"Item Total:",-1)),c("span",rI,$(ue(r)(z.value)),1)])]),c("div",iI,[c("label",sI,[s[120]||(s[120]=c("i",{class:"bi bi-chat-left-text me-1"},null,-1)),he(" Kitchen Note for "+$(Ke.value?.name)+" (Optional) ",1)]),pt(c("textarea",{"onUpdate:modelValue":s[15]||(s[15]=u=>ni.value[ze.value]=u),class:"form-control form-control-sm rounded-2 shadow-sm",rows:"2",maxlength:"200",placeholder:"Special instructions for this item...",style:{"font-size":"0.8rem"}},"                                    ",512),[[mr,ni.value[ze.value]]]),c("div",oI,$((ni.value[ze.value]||"").length)+"/200 ",1)])],512),[[Hr,Ut.value[Ze.value-1]?.id==="review"]])])])])]),c("div",aI,[c("div",lI,[Ze.value>1?(x(),O("button",{key:0,class:"btn btn-secondary btn-sm px-4 py-2 shadow-sm",onClick:y},[...s[121]||(s[121]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),he("Back ",-1)])])):j("",!0),Ze.value<Kn.value?(x(),O("button",{key:1,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:ii},[...s[122]||(s[122]=[he(" Next ",-1),c("i",{class:"bi bi-arrow-right ms-1"},null,-1)])])):Wl.value?(x(),O("button",{key:3,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:C},[...s[124]||(s[124]=[c("i",{class:"bi bi-cart-plus me-1"},null,-1),he("Add Deal to Cart ",-1)])])):(x(),O("button",{key:2,class:"btn btn-success btn-sm px-4 py-2 shadow-sm",onClick:D},[...s[123]||(s[123]=[c("i",{class:"bi bi-check2 me-1"},null,-1),he("Next Item ",-1)])]))])])])])]),c("div",uI,[c("div",cI,[c("div",dI,[s[135]||(s[135]=c("div",{class:"modal-header border-0 pb-2"},[c("h5",{class:"modal-title fw-bold"},[c("i",{class:"bi bi-puzzle-fill text-primary me-2"}),he(" Manage Add-ons ")]),c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])])],-1)),ut.value?(x(),O("div",fI,[c("div",pI,[c("div",hI,[c("img",{src:ut.value.img,alt:"",class:"rounded",style:{width:"60px",height:"60px","object-fit":"cover"}},null,8,vI),c("div",_I,[c("div",mI,$(ut.value.title),1),c("div",gI,[c("small",bI,[s[125]||(s[125]=c("i",{class:"bi bi-tag me-1"},null,-1)),s[126]||(s[126]=he(" Base Price: ",-1)),c("span",yI,$(ue(r)(ut.value?.unit_price-Un(M.value[Hn.value]||{addons:[]}))),1)]),c("small",wI,[s[127]||(s[127]=c("i",{class:"bi bi-box me-1"},null,-1)),s[128]||(s[128]=he(" Quantity: ",-1)),c("span",EI,$(ut.value.qty),1)])])])])]),ut.value.addons&&ut.value.addons.length>0?(x(),O("div",AI,[c("table",xI,[s[131]||(s[131]=c("thead",{class:"table-light"},[c("tr",null,[c("th",{style:{width:"60px"},class:"text-center"},"Select"),c("th",null,"Items"),c("th",{style:{width:"120px"},class:"text-center"},"Price"),c("th",{style:{width:"200px"},class:"text-center"},"Quantity")])],-1)),c("tbody",null,[(x(!0),O(He,null,mt(ut.value.addons,u=>(x(),O("tr",{key:u.id,class:st({"table-active":u.selected!==!1})},[c("td",CI,[c("div",TI,[c("input",{type:"checkbox",class:"form-check-input",checked:u.selected!==!1,onChange:_=>rn(u),style:{width:"22px",height:"22px",cursor:"pointer"}},null,40,SI)])]),c("td",null,[c("div",II,[c("div",{class:st(["addon-status-indicator",u.selected!==!1?"bg-success":"bg-secondary"])},null,2),c("div",null,[c("div",OI,$(u.name),1),u.group_name?(x(),O("small",kI,$(u.group_name),1)):j("",!0)])])]),c("td",DI,[c("span",NI," +"+$(ue(r)(u.price)),1)]),c("td",null,[c("div",$I,[c("button",{class:"btn btn-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px"},onClick:_=>ra(u),disabled:!u.selected||(u.quantity||1)<=1},[...s[129]||(s[129]=[c("i",{class:"bi bi-dash-lg"},null,-1)])],8,PI),c("span",LI,$(u.quantity||1),1),c("button",{class:"btn btn-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px"},onClick:_=>Ll(u),disabled:!u.selected},[...s[130]||(s[130]=[c("i",{class:"bi bi-plus-lg"},null,-1)])],8,RI)])])],2))),128))])])])):(x(),O("div",MI,[...s[132]||(s[132]=[c("i",{class:"bi bi-inbox",style:{"font-size":"3rem",opacity:"0.3"}},null,-1),c("p",{class:"mb-0 mt-3 fw-semibold"},"No add-ons available for this item",-1)])])),c("div",FI,[We()>0?(x(),O("div",qI,[c("small",BI,[s[133]||(s[133]=c("i",{class:"bi bi-check-circle-fill me-1"},null,-1)),he(" "+$(We())+" add-on(s) selected  Add-ons Total: "+$(ue(r)(Un(ut.value))),1)])])):j("",!0)])])):j("",!0),c("div",{class:"modal-footer border-0 pt-0 bg-light"},[s[134]||(s[134]=c("button",{type:"button",class:"btn btn-secondary px-2 py-2","data-bs-dismiss":"modal"}," Cancel ",-1)),c("button",{type:"button",class:"btn btn-primary px-2 py-2",onClick:ss}," Save ")])])])]),it(ey,{show:oo.value,kot:ts.value,loading:Tl.value,onClose:s[16]||(s[16]=u=>oo.value=!1),onStatusUpdated:Cl},null,8,["show","kot","loading"]),it(Zb,{show:Qr.value,order:Zi.value,money:Js,onClose:s[17]||(s[17]=u=>Qr.value=!1)},null,8,["show","order"]),it(cf,{show:ir.value,customer:et.value,"delivery-location":tt.value,phone:lt.value,"order-type":_e.value,"selected-table":Ct.value,"order-items":M.value,"grand-total":ar.value,money:Js,cashReceived:Xr.value,"onUpdate:cashReceived":s[18]||(s[18]=u=>Xr.value=u),client_secret:a.client_secret,order_code:a.order_code,"sub-total":Bt.value,tax:Cn.value,"service-charges":qn.value,"delivery-charges":Fn.value,"promo-discount":Wn.value,"promo-id":Le.value?.id,"promo-name":Le.value?.name,"promo-type":Le.value?.type,"promo-discount-amount":Wn.value,note:Jt.value,"kitchen-note":en.value,"order-date":new Date().toISOString().split("T")[0],"order-time":new Date().toTimeString().split(" ")[0],"payment-method":wl.value,change:El.value,"current-order-id":ei.value,onClose:s[19]||(s[19]=u=>ir.value=!1),onConfirm:io,onPayItem:vs,onPaymentSuccess:so,appliedPromos:yt.value,"approved-discounts":Sr.value,"approved-discount-details":nt.value.map(u=>({discount_id:u.id,discount_name:u.name,discount_percentage:u.percentage,discount_amount:Zr(u.percentage),approval_id:u.approval_id}))},null,8,["show","customer","delivery-location","phone","order-type","selected-table","order-items","grand-total","cashReceived","client_secret","order_code","sub-total","tax","service-charges","delivery-charges","promo-discount","promo-id","promo-name","promo-type","promo-discount-amount","note","kitchen-note","order-date","order-time","payment-method","change","current-order-id","appliedPromos","approved-discounts","approved-discount-details"]),it(ny,{show:ns.value,orders:ao.value,onClose:s[20]||(s[20]=u=>ns.value=!1),onViewDetails:Nl,loading:Si.value},null,8,["show","orders","loading"]),it(Jb,{show:rs.value,loading:lo.value,promos:Pe.value,"order-items":M.value,onApplyPromo:Il,onClose:s[21]||(s[21]=u=>rs.value=!1)},null,8,["show","loading","promos","order-items"]),it(cy,{show:is.value,discounts:$e.value,"order-items":M.value,loading:uo.value,"applied-discounts":nt.value,"rejected-discounts":Tr.value,onClose:s[22]||(s[22]=u=>is.value=!1),onApplyDiscount:Al,onClearDiscount:no},null,8,["show","discounts","order-items","loading","applied-discounts","rejected-discounts"]),it(tx,{show:or.value,"missing-ingredients":tn.value,onClose:s[23]||(s[23]=u=>{or.value=!1,Zo.value=null}),onConfirm:Jo},null,8,["show","missing-ingredients"]),it(dy,{show:dr.value,"pending-orders":si.value,loading:Pt.value,onClose:s[24]||(s[24]=u=>dr.value=!1),onResume:ds,onReject:fs,onPayNow:fr},null,8,["show","pending-orders","loading"]),De.value?(x(),dn(cf,{key:0,show:kr.value,customer:De.value.customer_name,"delivery-location":De.value.delivery_location,phone:De.value.phone_number,"order-type":De.value.order_type,"selected-table":{name:De.value.table_number},"order-items":De.value.order_items,"grand-total":De.value.total_amount,"sub-total":De.value.sub_total,tax:De.value.tax,"service-charges":De.value.service_charges,"delivery-charges":De.value.delivery_charges,"promo-discount":De.value.promo_discount,note:De.value.note,"kitchen-note":De.value.kitchen_note,cashReceived:Xr.value,"onUpdate:cashReceived":s[25]||(s[25]=u=>Xr.value=u),money:Js,onClose:s[26]||(s[26]=u=>{kr.value=!1,De.value=null}),onConfirm:io,onPaymentSuccess:so,"is-payment-only":!0,"current-order-id":De.value.pos_order_id},null,8,["show","customer","delivery-location","phone","order-type","selected-table","order-items","grand-total","sub-total","tax","service-charges","delivery-charges","promo-discount","note","kitchen-note","cashReceived","current-order-id"])):j("",!0)])]),_:1})],64))}},mO=Kb(WI,[["__scopeId","data-v-9526d787"]]);export{mO as default};
