import{_ as Ge,r as i,c as te,o as he,n as Qe,I as Je,w as ea,E as Ce,a as le,b as r,d as X,e as C,f as a,u as D,h as aa,g as u,F as j,i as se,t as g,j as F,k as ta,l as w,m as q,v as de,p as U,T as ce,P as la,U as _e,y as we,X as sa,W as oa,q as P,s as d}from"./app-DFa9wJfT.js";import{_ as na}from"./Master-Blz5Sgk_.js";import{s as ke}from"./index-C8UETYap.js";import{s as ra}from"./index-BBh0WxyH.js";import{u as ia}from"./useFormatters-B_Oq-Qyw.js";import{F as ua}from"./FilterModal-DH26WM9s.js";import{s as da}from"./index-BS4qPMf4.js";import{E as ca,a as ma,X as va,u as Y,w as pa}from"./xlsx-D7Bllkjp.js";import{u as ga}from"./useModal-vDbn_8lj.js";import{I as ba}from"./importFile-DztHevzD.js";import{S as fa}from"./shapes-BFf1aebW.js";import{P as ya}from"./package-BzSUPcu8.js";import{C as ha}from"./circle-x-trXv7DOv.js";import{P as Ca}from"./plus-D98gvM_U.js";import{P as Se}from"./pencil-BrP7vlBH.js";import"./index-DKTP6ctL.js";import"./createLucideIcon-4LHIASzF.js";import"./PasswordVerificationModal-CIm5aGet.js";import"./index-V7bpXnBA.js";import"./index-obOPNEdp.js";import"./sun-GYtCXPyF.js";import"./index-D7oJSlVI.js";import"./index-BjeygHyk.js";import"./index-BtyAJPKh.js";const _a={class:"page-wrapper"},wa={class:"row g-3"},ka={class:"card border-0 shadow-sm rounded-4"},Sa={class:"card-body d-flex align-items-center justify-content-between"},xa={class:"fw-bold fs-4"},Ma={class:"text-muted fs-6"},$a={class:"card border-0 shadow-lg rounded-4 mt-0"},Fa={class:"card-body"},Ia={class:"d-flex flex-wrap gap-2 justify-content-between align-items-center mb-3"},Va={class:"d-flex flex-wrap gap-2 align-items-center"},Ba={class:"search-wrap"},Da={key:1,class:"form-control search-input",placeholder:"Search",disabled:"",type:"text"},Pa={class:"col-md-6"},Aa=["onUpdate:modelValue"],Ea=["value"],La={class:"col-md-6 mt-3"},Na=["onUpdate:modelValue"],Ta={class:"col-md-12 mt-3"},ja=["onUpdate:modelValue"],Ua={class:"table-responsive"},Oa={class:"table table-hover align-middle"},Ra={class:"fw-semibold"},za={class:"text-truncate",style:{"max-width":"260px"}},qa={key:0},Wa=["onClick"],Ha={key:1},Ka={class:"rounded d-inline-flex align-items-center justify-content-center img-chip"},Xa=["src","alt"],Ya={key:1,class:"fs-5"},Za={class:"text-center"},Ga={class:"d-inline-flex align-items-center gap-3"},Qa=["onClick"],Ja={key:0},et={key:0,class:"mt-4 d-flex justify-content-between align-items-center"},at={class:"text-muted small"},tt={class:"modal fade",id:"addCatModal",tabindex:"-1","aria-hidden":"true"},lt={class:"modal-dialog modal-lg modal-dialog-centered"},st={class:"modal-content rounded-4"},ot={class:"modal-header"},nt={class:"modal-title fw-semibold"},rt={class:"modal-body"},it={class:"row"},ut={class:"col-md-7"},dt={class:"row g-3"},ct={class:"col-12"},mt={class:"d-flex align-items-center gap-3"},vt={class:"form-check"},pt=["checked"],gt={class:"form-check"},bt=["checked"],ft={key:0,class:"col-12"},yt={key:0,class:"text-danger"},ht={key:1,class:"col-12"},Ct={key:2,class:"text-danger"},_t={key:2,class:"col-12"},wt={class:"p-3 d-flex justify-content-between"},kt={class:"d-flex gap-2"},St={key:0,class:"text-danger"},xt={key:1,class:"text-danger"},Mt={key:3,class:"col-12"},$t=["value"],Ft={class:"col-12"},It={class:"d-flex align-items-center gap-3"},Vt={class:"form-check"},Bt=["checked"],Dt={class:"form-check"},Pt=["checked"],At={class:"col-md-5"},Et=["src"],Lt={key:1,class:"placeholder"},Nt={key:0,class:"text-danger"},Tt={class:"mt-4"},jt=["disabled"],Ut={class:"modal fade",id:"editSubCatModal",tabindex:"-1","aria-labelledby":"editSubCatModalLabel","aria-hidden":"true"},Ot={class:"modal-dialog modal-md modal-dialog-centered"},Rt={class:"modal-content"},zt={class:"modal-body"},qt={class:"mb-3"},Wt=["disabled"],Ht={class:"text-danger"},Kt=["disabled"],Xt={__name:"Category",setup(Yt){ia();const{closeModal:xe}=ga(),b=i([]),W=i([]),f=i(null),S=i([]),oe=i(null),me=i([]),I=i(null),_=i(null),O=i(!1),H=i(!1),Me=i(null),$e=[{label:"PDF",value:"pdf"},{label:"Excel",value:"excel"},{label:"CSV",value:"csv"}],ne=i([{label:"Hot Drinks",value:"Hot Drinks"},{label:"Cold Drinks",value:"Cold Drinks"},{label:"Breakfast",value:"Breakfast"},{label:"Street Snacks",value:"Street Snacks"},{label:"Wala Wraps",value:"Wala Wraps"},{label:"Bombay Toasties",value:"Bombay Toasties"},{label:"Salads",value:"Salads"},{label:"Bombay Bowls",value:"Bombay Bowls"},{label:"Bakery",value:"Bakery"},{label:"Soup",value:"Soup"},{label:"Desserts",value:"Desserts"},{label:"Ice Cream",value:"Ice Cream"}]),Fe=t=>{t.value&&(He(t.value),oe.value=null)},k=i({current_page:1,last_page:1,per_page:10,total:0,from:0,to:0,links:[]}),Z=i({total:0,active:0,inactive:0}),G={sortBy:"",category:"",status:"",hasSubcategories:""},Q=i({...G}),v=i({...G}),Ie=async()=>{try{const t=await P.get("/api/menu-categories/parents/dropdown");me.value=t.data.data||[]}catch(t){console.error("Failed to fetch parent categories for dropdown:",t),d.error("Failed to load categories for filter")}},V=async(t=null)=>{try{J.value=!0;const e={page:t||1,per_page:k.value.per_page||10},n=(A.value||"").trim();n&&(e.q=n),v.value.sortBy&&(e.sort_by=v.value.sortBy),v.value.status&&(e.status=v.value.status),v.value.category&&(e.category=v.value.category),v.value.hasSubcategories&&(e.has_subcategories=v.value.hasSubcategories),console.log("ðŸ“¤ Sending params:",e);const s=await P.get("/api/menu-categories/parents/list",{params:e});W.value=s.data.data||[],s.data.stats&&(Z.value=s.data.stats),k.value={current_page:s.data.current_page||1,last_page:s.data.last_page||1,per_page:s.data.per_page||10,total:s.data.total||0,from:s.data.from||0,to:s.data.to||0,links:s.data.links||[]},J.value=!1}catch(e){console.error("Failed to fetch categories:",e),d.error("Failed to load categories"),J.value=!1}},Ve=te(()=>v.value.sortBy&&v.value.sortBy!==""||v.value.status&&v.value.status!==""||v.value.category&&v.value.category!==""||v.value.hasSubcategories&&v.value.hasSubcategories!=="");let ve=null;const Be=t=>{if(!t)return;const n=new URLSearchParams(t.split("?")[1]).get("page");n&&V(parseInt(n))};he(async()=>{A.value="",ge.value=Date.now(),await Qe(),setTimeout(()=>{be.value=!0;const t=document.getElementById(re);t&&(t.value="",A.value="")},100),V(),Ie()});const pe=te(()=>me.value),De=te(()=>[{label:"Total Categories",value:Z.value.total,icon:fa,iconBg:"bg-light-primary",iconColor:"text-primary"},{label:"Active Categories",value:Z.value.active,icon:ya,iconBg:"bg-light-success",iconColor:"text-success"},{label:"Inactive Categories",value:Z.value.inactive,icon:ha,iconBg:"bg-light-danger",iconColor:"text-danger"}]),A=i(""),ge=i(Date.now()),re=`search-${Math.random().toString(36).substr(2,9)}`,be=i(!1),J=i(!1),Pe=()=>{v.value={...Q.value},k.value.current_page=1,V(1)},fe=te(()=>({sortOptions:[{value:"name_asc",label:"Name: A to Z"},{value:"name_desc",label:"Name: Z to A"}],statusOptions:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],hasSubcategoriesOptions:[{value:"yes",label:"Has Subcategories"},{value:"no",label:"No Subcategories"}]})),Ae=()=>{Q.value={...G},v.value={...G},k.value.current_page=1,k.value.per_page=10,V(1),xe("categoryFilterModal")};he(()=>window.feather?.replace()),Je(()=>window.feather?.replace());const h=i(!1),ee=i(""),$=i(!0),x=i(null),B=i(!1),p=i({}),Ee=()=>{h.value=!1,b.value=[],S.value=[],ee.value="",$.value=!0,x.value=null,_.value&&_.value.startsWith("blob:")&&URL.revokeObjectURL(_.value),I.value=null,_.value=null,p.value={},ae.value="",K.value="",L.value=[],R.value="",f.value=null,O.value=!1,H.value=!1},Le=({file:t})=>{I.value=t,_.value=URL.createObjectURL(t),O.value=!1},Ne=async()=>{if(h.value&&!x.value){p.value.parent_id=["Please select a parent category"],d.error(p.value.parent_id[0]),B.value=!1;return}E(),B.value=!0;try{if(f.value){const e=new FormData;let n="";if(h.value?n=ee.value?.trim():n=b.value[0]?.label?.trim()||b.value[0]?.name?.trim()||(typeof b.value[0]=="string"?b.value[0].trim():""),!n){p.value.name=["Category name cannot be empty"],d.error("Category name cannot be empty"),B.value=!1;return}e.append("name",n),e.append("active",$.value?"1":"0"),e.append("parent_id",x.value||""),e.append("_method","PUT"),I.value instanceof File&&e.append("icon",I.value),!x.value&&R.value&&R.value.split(",").map(l=>l.trim()).filter(l=>l.length>0).forEach((l,c)=>{const m=f.value.subcategories?.find(o=>o.name.toLowerCase()===l.toLowerCase());e.append(`subcategories[${c}][name]`,l),m?(e.append(`subcategories[${c}][id]`,m.id),e.append(`subcategories[${c}][active]`,m.active?"1":"0")):e.append(`subcategories[${c}][active]`,"1")}),await P.post(`/menu-categories/${f.value.id}`,e,{headers:{"Content-Type":"multipart/form-data"}}),d.success("Category updated successfully")}else{const e=new FormData;let n=[];if(h.value){if(S.value.length===0){p.value.subcategories=["Please add at least one subcategory"],d.error("Please add at least one subcategory"),B.value=!1;return}n=S.value.map(s=>({name:typeof s=="string"?s:s.label,active:$.value,parent_id:x.value}))}else{if(b.value.length===0){p.value.name=["Please add at least one category"],d.error("Please add at least one category"),B.value=!1;return}n=b.value.map(s=>({name:typeof s=="string"?s:s.label,active:$.value,parent_id:null}))}e.append("isSubCategory",h.value?"1":"0"),n.forEach((s,l)=>{e.append(`categories[${l}][name]`,s.name),e.append(`categories[${l}][active]`,s.active?"1":"0"),s.parent_id&&e.append(`categories[${l}][parent_id]`,s.parent_id)}),I.value instanceof File&&e.append("icon",I.value),console.log("ðŸ“¤ FormData Contents:");for(let s of e.entries())s[1]instanceof File?console.log(`  ${s[0]}: [File] ${s[1].name} (${s[1].type}, ${s[1].size} bytes)`):console.log(`  ${s[0]}: ${s[1]}`);await P.post("/menu-categories",e,{headers:{"Content-Type":"multipart/form-data"}}),d.success("Category created successfully")}bootstrap.Modal.getInstance(document.getElementById("addCatModal"))?.hide(),ie(),f.value=null,await V()}catch(t){if(console.error("âŒ Submit error:",t),t.response?.status===422&&t.response?.data?.errors){const e=t.response.data.errors;let n=[];p.value={},Object.keys(e).forEach(s=>{let l=s.replace(/^categories\.\d+\./,"");p.value[l]=e[s],Array.isArray(e[s])&&e[s].forEach(c=>{n.push(c)})}),n.length>0?d.error(n.join(`
`)):d.error("Validation failed. Please check your input.")}else{const e=t.response?.data?.message||"Failed to save category";d.error(e+" âŒ")}}finally{B.value=!1}},ie=()=>{h.value=!1,b.value=[],$.value=!0,x.value=null,ee.value="",_.value&&_.value.startsWith("blob:")&&URL.revokeObjectURL(_.value),I.value=null,_.value=null,f.value=null,R.value="",O.value=!1,H.value=!1,Me.value=null},E=()=>{p.value={},N.value=""},R=i(""),Te=t=>{E(),f.value=t,h.value=!!t.parent_id,x.value=t.parent_id||null,I.value=null,_.value=t.image_url||null,h.value?ee.value=t.name:b.value=[{label:t.name,value:t.name,id:t.id}],$.value=t.active,t.subcategories&&t.subcategories.length>0?(L.value=t.subcategories.map(s=>({label:s.name,value:s.id?s.id.toString():`temp_${Date.now()}_${Math.random()}`})),S.value=t.subcategories.map(s=>s.id?s.id.toString():`temp_${Date.now()}_${Math.random()}`),R.value=t.subcategories.map(s=>s.name).join(", ")):(L.value=[],S.value=[],R.value="");const e=document.getElementById("addCatModal");new bootstrap.Modal(e).show()},ae=i(""),ye=()=>{const t=(ae.value||"").trim();t&&(ne.value.some(e=>e.label.toLowerCase()===t.toLowerCase())||ne.value.push({label:t,value:t}),b.value.includes(t)||(b.value=[...b.value,t]),ae.value="")},je=async t=>{if(t?.id)try{const e=await P.delete(`/menu-categories/${t.id}`);d.success(e.data.message||"Category deleted successfully"),await V()}catch(e){console.error("âŒ Delete error:",e.response?.data||e.message);const n=e.response?.data?.message||"Failed to delete category âŒ";d.error(n)}},L=i([]),K=i(""),ue=()=>{const t=K.value?.trim();t&&(L.value.some(e=>e.value.toLowerCase()===t.toLowerCase())||L.value.push({label:t,value:t}),S.value.includes(t)||S.value.push(t),K.value="")},Ue=()=>{S.value=L.value.map(t=>t.value)},Oe=()=>{S.value=[]},M=i({id:null,name:"",parent_id:null}),Re=(t,e)=>{M.value={id:e.id,name:e.name,parent_id:t.id};const n=document.getElementById("editSubCatModal"),s=bootstrap.Modal.getOrCreateInstance(n);E(),s.show()},z=i(!1),N=i(""),ze=()=>{M.value={id:null,name:"",parent_id:null},N.value={},z.value=!1},qe=async()=>{if(!M.value.name.trim()){N.value="Subcategory name cannot be empty",d.error("Please filled all the required fields");return}z.value=!0;try{const{data:t}=await P.put(`/menu-categories/subcategories/${M.value.id}`,{name:M.value.name.trim()});if(t.success){d.success(t.message);const e=W.value.find(l=>l.id===M.value.parent_id);if(e){const l=e.subcategories.find(c=>c.id===M.value.id);l&&(l.name=M.value.name)}const n=document.getElementById("editSubCatModal");bootstrap.Modal.getInstance(n).hide(),M.value={id:null,name:"",parent_id:null}}else N.value=t.message||"Failed to update subcategory"}catch(t){console.error(t),N.value=t.response?.data?.message||"An error occurred while updating"}finally{z.value=!1}},We=async()=>{try{const t={per_page:999999},e=(A.value||"").trim();return e&&(t.q=e),v.value.sortBy&&(t.sort_by=v.value.sortBy),v.value.status&&(t.status=v.value.status),v.value.category&&(t.category=v.value.category),v.value.hasSubcategories&&(t.has_subcategories=v.value.hasSubcategories),(await P.get("/api/menu-categories/parents/list",{params:t})).data.data||[]}catch(t){return console.error("Failed to fetch all categories:",t),d.error("Failed to load all categories for export"),[]}},He=async t=>{try{d.info("Preparing download...");const e=await We();if(!e||e.length===0){d.error("No categories data to download");return}t==="pdf"?Xe(e):t==="excel"?Ye(e):t==="csv"?Ke(e):d.error("Invalid download type")}catch(e){console.error("Download failed:",e),d.error(`Download failed: ${e.message}`)}};ea(A,()=>{clearTimeout(ve),ve=setTimeout(()=>{k.value.current_page=1,k.value.per_page=10,V(1)},500)});const Ke=t=>{try{const e=["category","subcategory","active"],n=t.map(o=>{const y=o.subcategories&&o.subcategories.length>0?o.subcategories.map(T=>T.name).join(", "):"";return[`"${o.name||""}"`,`"${y}"`,`${o.active?"Yes":"No"}`]}),s=[e.join(","),...n.map(o=>o.join(","))].join(`
`),l=new Blob([s],{type:"text/csv;charset=utf-8;"}),c=URL.createObjectURL(l),m=document.createElement("a");m.setAttribute("href",c),m.setAttribute("download",`Categories_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(m),m.click(),document.body.removeChild(m),d.success("CSV downloaded successfully")}catch(e){console.error("CSV generation error:",e),d.error(`CSV generation failed: ${e.message}`,{autoClose:5e3})}},Xe=t=>{try{const e=new ca("p","mm","a4");e.setFontSize(18),e.setFont("helvetica","bold"),e.text("Menu Categories Report",60,20),e.setFontSize(10),e.setFont("helvetica","normal");const n=new Date().toLocaleString();e.text(`Generated on: ${n}`,14,28),e.text(`Total Categories: ${t.length}`,14,34);const s=["Category","Subcategories","Active"],l=t.map(m=>{const o=m.subcategories&&m.subcategories.length>0?m.subcategories.map(y=>y.name).join(", "):"";return[m.name||"",o,m.active?"Yes":"No"]});ma(e,{head:[s],body:l,startY:40,styles:{fontSize:9,cellPadding:3,halign:"left",lineColor:[0,0,0],lineWidth:.1},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:14,right:14},didDrawPage:m=>{const o=e.internal.getNumberOfPages(),y=e.internal.pageSize.height;e.setFontSize(8),e.text(`Page ${m.pageNumber} of ${o}`,m.settings.margin.left,y-10)}});const c=`Categories_${new Date().toISOString().split("T")[0]}.pdf`;e.save(c),d.success("PDF downloaded successfully")}catch(e){console.error("PDF generation error:",e),d.error(`PDF generation failed: ${e.message}`,{autoClose:5e3})}},Ye=t=>{try{if(typeof va>"u")throw new Error("XLSX library is not loaded");const e=t.map(o=>{const y=o.subcategories&&o.subcategories.length>0?o.subcategories.map(T=>T.name).join(", "):"";return{Category:o.name||"",Subcategory:y,Active:o.active?"Yes":"No"}}),n=Y.book_new(),s=Y.json_to_sheet(e);s["!cols"]=[{wch:25},{wch:40},{wch:10}],Y.book_append_sheet(n,s,"Menu Categories");const l=[{Info:"Generated On",Value:new Date().toLocaleString()},{Info:"Total Categories",Value:t.length},{Info:"Exported By",Value:"Menu Categories Management"}],c=Y.json_to_sheet(l);Y.book_append_sheet(n,c,"Report Info");const m=`Categories_${new Date().toISOString().split("T")[0]}.xlsx`;pa(n,m),d.success("Excel downloaded successfully",{autoClose:2500})}catch(e){console.error("Excel generation error:",e),d.error(`Excel generation failed: ${e.message}`,{autoClose:5e3})}},Ze=t=>{if(!t||t.length<=1){d.error("The imported file is empty.");return}t[0];const n=t.slice(1).map(o=>({category:o[0]||"",subcategory:o[1]||null,active:o[2]=="0"?0:1})),s=n.filter(o=>o.category).map(o=>o.category.trim().toLowerCase()),l=s.filter((o,y)=>s.indexOf(o)!==y);if(l.length>0){d.error(`Duplicate parent category names found in CSV: ${[...new Set(l)].join(", ")}`);return}const c=W.value.filter(o=>!o.parent_id).map(o=>o.name.trim().toLowerCase()),m=n.filter(o=>o.category).filter(o=>c.includes(o.category.trim().toLowerCase()));if(m.length>0){const o=m.map(y=>y.category).join(", ");d.error(`Parent categories already exist in the table: ${o}`);return}P.post("/api/menu-categories/import",{categories:n}).then(()=>{d.success("Categories imported successfully");const o=document.querySelector(".modal.show");if(o){const y=bootstrap.Modal.getInstance(o);y&&y.hide()}setTimeout(()=>{document.querySelectorAll(".modal-backdrop").forEach(T=>T.remove()),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight=""},100),V()}).catch(o=>{console.error(o),d.error("Import failed"),setTimeout(()=>{document.querySelectorAll(".modal-backdrop").forEach(T=>T.remove()),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight=""},100)})};return(t,e)=>{const n=Ce("ConfirmModal"),s=Ce("Button");return r(),le(na,null,{default:X(()=>[C(D(aa),{title:"Menu Category"}),a("div",_a,[e[52]||(e[52]=a("h4",{class:"mb-3"},"Categories",-1)),a("div",wa,[(r(!0),u(j,null,se(De.value,l=>(r(),u("div",{key:l.label,class:"col-md-6 col-xl-4"},[a("div",ka,[a("div",Sa,[a("div",null,[a("div",xa,g(l.value),1),a("div",Ma,g(l.label),1)]),a("div",{class:F(["p-3 rounded-3 d-flex align-items-center justify-content-center",l.iconBg])},[(r(),le(ta(l.icon),{class:F(l.iconColor),size:"28"},null,8,["class"]))],2)])])]))),128))]),a("div",$a,[a("div",Fa,[a("div",Ia,[e[31]||(e[31]=a("h4",{class:"mb-0"},"Categories",-1)),a("div",Va,[a("div",Ba,[e[22]||(e[22]=a("i",{class:"bi bi-search"},null,-1)),e[23]||(e[23]=a("input",{type:"email",name:"email",autocomplete:"email",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px"},tabindex:"-1","aria-hidden":"true"},null,-1)),be.value?q((r(),u("input",{id:re,"onUpdate:modelValue":e[0]||(e[0]=l=>A.value=l),key:ge.value,class:"form-control search-input",placeholder:"Search",type:"search",autocomplete:"new-password",name:re,role:"presentation",onFocus:e[1]||(e[1]=(...l)=>t.handleFocus&&t.handleFocus(...l))},null,32)),[[de,A.value]]):(r(),u("input",Da))]),C(ua,{modelValue:Q.value,"onUpdate:modelValue":e[2]||(e[2]=l=>Q.value=l),title:"Menu Categories","modal-id":"categoryFilterModal","modal-size":"modal-lg","sort-options":fe.value.sortOptions,"status-options":fe.value.statusOptions,"show-stock-status":!1,"show-price-range":!1,"show-date-range":!1,"show-category":!1,suppliers:[],onApply:Pe,onClear:Ae},{customFilters:X(({filters:l})=>[a("div",Pa,[e[25]||(e[25]=a("label",{class:"form-label fw-semibold text-dark"},[a("i",{class:"fas fa-tags me-2 text-muted"}),U("Category ")],-1)),q(a("select",{"onUpdate:modelValue":c=>l.category=c,class:"form-select"},[e[24]||(e[24]=a("option",{value:""},"All Categories",-1)),(r(!0),u(j,null,se(pe.value,c=>(r(),u("option",{key:c.id,value:c.id},g(c.name),9,Ea))),128))],8,Aa),[[ce,l.category]])]),a("div",La,[e[27]||(e[27]=a("label",{class:"form-label fw-semibold text-dark"},[a("i",{class:"fas fa-toggle-on me-2 text-muted"}),U("Status ")],-1)),q(a("select",{"onUpdate:modelValue":c=>l.status=c,class:"form-select"},[...e[26]||(e[26]=[a("option",{value:""},"All Status",-1),a("option",{value:"active"},"Active",-1),a("option",{value:"inactive"},"Inactive",-1)])],8,Na),[[ce,l.status]])]),a("div",Ta,[e[29]||(e[29]=a("label",{class:"form-label fw-semibold text-dark"},[a("i",{class:"fas fa-sitemap me-2 text-muted"}),U("Has Subcategories ")],-1)),q(a("select",{"onUpdate:modelValue":c=>l.hasSubcategories=c,class:"form-select"},[...e[28]||(e[28]=[a("option",{value:""},"All",-1),a("option",{value:"yes"},"Has Subcategories",-1),a("option",{value:"no"},"No Subcategories",-1)])],8,ja),[[ce,l.hasSubcategories]])])]),_:1},8,["modelValue","sort-options","status-options"]),a("button",{"data-bs-toggle":"modal","data-bs-target":"#addCatModal",onClick:e[3]||(e[3]=l=>{f.value=null,ze(),Ee()}),class:"d-flex align-items-center gap-1 px-4 btn-sm py-2 rounded-pill btn btn-primary text-white"},[C(D(Ca),{class:"w-4 h-4"}),e[30]||(e[30]=U(" Add Category ",-1))]),C(ba,{label:"Import",sampleHeaders:["category","subcategory","active"],sampleData:[["Dairy","TestSubCat",1],["Bakery","Bread",1],["Beverages","Juices",0]],onOnImport:Ze}),C(D(da),{modelValue:oe.value,"onUpdate:modelValue":e[4]||(e[4]=l=>oe.value=l),options:$e,optionLabel:"label",optionValue:"value",placeholder:"Export",class:"export-dropdown",onChange:Fe},null,8,["modelValue"])])]),a("div",Ua,[a("table",Oa,[e[33]||(e[33]=a("thead",{class:"border-top small text-muted"},[a("tr",null,[a("th",null,"S.#"),a("th",null,"Category"),a("th",null,"Sub Category"),a("th",null,"Icon"),a("th",null,"Total Item"),a("th",null,"Status"),a("th",{class:"text-center"},"Action")])],-1)),a("tbody",null,[(r(!0),u(j,null,se(W.value,(l,c)=>(r(),u("tr",{key:l.id},[a("td",null,g(c+1),1),a("td",Ra,g(l.name),1),a("td",za,[l.subcategories&&l.subcategories.length?(r(),u("div",qa,[(r(!0),u(j,null,se(l.subcategories,m=>(r(),u("div",{key:m.id,class:"d-flex justify-content-between align-items-center",style:{gap:"5px"}},[a("span",null,g(m.name),1),a("button",{"data-bs-toggle":"modal",onClick:()=>{Re(l,m)},title:"Edit",class:"p-2 rounded-full text-blue-600 hover:bg-blue-100"},[C(D(Se),{class:"w-4 h-4"})],8,Wa)]))),128))])):(r(),u("span",Ha,"â€“"))]),a("td",null,[a("div",Ka,[l.image_url?(r(),u("img",{key:0,src:l.image_url,alt:l.name,class:"rounded",style:{width:"32px",height:"32px","object-fit":"cover"}},null,8,Xa)):(r(),u("span",Ya,"ðŸ“¦"))])]),a("td",null,g(l.total_menu_items),1),a("td",null,[a("span",{class:F(["badge",l.active?"bg-success rounded-pill":"bg-danger rounded-pill"])},g(l.active?"Active":"Inactive"),3)]),a("td",Za,[a("div",Ga,[a("button",{"data-bs-toggle":"modal","data-bs-target":"#modalUnitForm",onClick:()=>{Te(l)},title:"Edit",class:"p-2 rounded-full text-blue-600 hover:bg-blue-100"},[C(D(Se),{class:"w-4 h-4"})],8,Qa),C(n,{title:"Confirm Delete",message:`Are you sure you want to delete ${l.name}?`,showDeleteButton:!0,onConfirm:()=>{je(l)},onCancel:()=>{}},null,8,["message","onConfirm"])])])]))),128)),W.value.length===0?(r(),u("tr",Ja,[...e[32]||(e[32]=[a("td",{colspan:"10",class:"text-center text-muted py-4"}," No categories found. ",-1)])])):w("",!0)])])]),!J.value&&!Ve.value&&k.value.last_page>1?(r(),u("div",et,[a("div",at," Showing "+g(k.value.from)+" to "+g(k.value.to)+" of "+g(k.value.total)+" entries ",1),C(la,{pagination:k.value.links,isApiDriven:!0,onPageChanged:Be},null,8,["pagination"])])):w("",!0)])]),a("div",tt,[a("div",lt,[a("div",st,[a("div",ot,[a("h5",nt,g(f.value?"Edit Menu Category":"Add Menu Category"),1),a("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:ie},[...e[34]||(e[34]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),a("div",rt,[a("div",it,[a("div",ut,[a("div",dt,[f.value?w("",!0):(r(),u(j,{key:0},[a("div",ct,[e[37]||(e[37]=a("label",{class:"form-label d-block mb-2"},"Is this a subcategory?",-1)),a("div",mt,[a("div",vt,[a("input",{class:"form-check-input",type:"radio",checked:h.value,onClick:e[5]||(e[5]=l=>E()),onChange:e[6]||(e[6]=l=>{h.value=!0,x.value=null}),name:"isSub"},null,40,pt),e[35]||(e[35]=a("label",{class:"form-check-label"},"Yes",-1))]),a("div",gt,[a("input",{class:"form-check-input",type:"radio",checked:!h.value,onClick:e[7]||(e[7]=l=>E()),onChange:e[8]||(e[8]=l=>{h.value=!1,x.value=null}),name:"isSub"},null,40,bt),e[36]||(e[36]=a("label",{class:"form-check-label"},"No",-1))])])]),h.value?(r(),u("div",ft,[e[38]||(e[38]=a("label",{class:"form-label"},"Category",-1)),C(D(ra),{modelValue:x.value,"onUpdate:modelValue":e[9]||(e[9]=l=>x.value=l),options:pe.value,optionLabel:"name",optionValue:"id",placeholder:"Select Category",class:F(["w-100",{"is-invalid":p.value?.parent_id}]),appendTo:"self",autoZIndex:!0,baseZIndex:2e3},null,8,["modelValue","options","class"]),p.value?.parent_id?(r(),u("small",yt,g(p.value.parent_id[0]),1)):w("",!0)])):w("",!0)],64)),!h.value||f.value?(r(),u("div",ht,[e[39]||(e[39]=a("label",{class:"form-label"},"Category Name",-1)),f.value?q((r(),u("input",{key:0,type:"text","onUpdate:modelValue":e[10]||(e[10]=l=>b.value[0].label=l),class:F(["form-control",{"is-invalid":p.value.name}]),placeholder:"Enter category name"},null,2)),[[de,b.value[0].label]]):(r(),le(D(ke),{key:1,modelValue:b.value,"onUpdate:modelValue":e[11]||(e[11]=l=>b.value=l),options:ne.value,optionLabel:"label",optionValue:"value",filter:!0,display:"chip",class:F([{"is-invalid":p.value.name},"w-100"]),placeholder:"Select or add categories...",appendTo:"self",onKeydown:_e(we(ye,["prevent"]),["enter"]),onBlur:ye,onFilter:e[12]||(e[12]=l=>ae.value=l.value)},{option:X(({option:l})=>[U(g(l.label),1)]),_:1},8,["modelValue","options","class","onKeydown"])),p.value.name?(r(),u("small",Ct,g(p.value.name[0]),1)):w("",!0)])):w("",!0),h.value&&!f.value?(r(),u("div",_t,[e[40]||(e[40]=a("label",{class:"form-label"},"Subcategory Name(s)",-1)),C(D(ke),{modelValue:S.value,"onUpdate:modelValue":e[13]||(e[13]=l=>S.value=l),options:L.value,optionLabel:"label",optionValue:"value",filter:!0,display:"chip",class:F([{"is-invalid":p.value?.subcategories||p.value?.name},"w-100"]),placeholder:"Select or add subcategories...",appendTo:"self",onFilter:e[14]||(e[14]=l=>K.value=l.value||""),onKeydown:_e(we(ue,["prevent"]),["enter"]),onBlur:ue},{option:X(({option:l})=>[a("div",null,g(l.label),1)]),footer:X(()=>[a("div",wt,[C(s,{label:"Add Custom",severity:"secondary",variant:"text",size:"small",icon:"pi pi-plus",onClick:ue,disabled:!K.value.trim()},null,8,["disabled"]),a("div",kt,[C(s,{label:"Select All",severity:"secondary",variant:"text",size:"small",icon:"pi pi-check",onClick:Ue}),C(s,{label:"Clear All",severity:"danger",variant:"text",size:"small",icon:"pi pi-times",onClick:Oe})])])]),_:1},8,["modelValue","options","class","onKeydown"]),p.value?.subcategories?(r(),u("div",St,g(p.value.subcategories[0]),1)):w("",!0),p.value?.name?(r(),u("div",xt,g(p.value.name[0]),1)):w("",!0)])):w("",!0),f.value&&t.parentCategory?(r(),u("div",Mt,[e[41]||(e[41]=a("label",{class:"form-label"},"Parent Category",-1)),a("input",{type:"text",class:"form-control",value:t.parentCategory.label,disabled:""},null,8,$t)])):w("",!0),a("div",Ft,[e[44]||(e[44]=a("label",{class:"form-label d-block mb-2"},"Active",-1)),a("div",It,[a("div",Vt,[a("input",{class:"form-check-input",type:"radio",checked:$.value,onChange:e[15]||(e[15]=l=>$.value=!0),name:"active"},null,40,Bt),e[42]||(e[42]=a("label",{class:"form-check-label"},"Yes",-1))]),a("div",Dt,[a("input",{class:"form-check-input",type:"radio",checked:!$.value,onChange:e[16]||(e[16]=l=>$.value=!1),name:"active"},null,40,Pt),e[43]||(e[43]=a("label",{class:"form-check-label"},"No",-1))])])])])]),a("div",At,[e[46]||(e[46]=a("label",{class:"form-label d-block mb-2"},"Category Image",-1)),a("div",{class:F(["logo-card",{"is-invalid":p.value.icon}]),style:{border:"2px dashed #6c757d","border-radius":"8px",padding:"1rem","min-height":"250px"}},[a("div",{class:"logo-frame d-flex flex-column align-items-center justify-content-center",style:{height:"200px",cursor:"pointer"},onClick:e[17]||(e[17]=l=>O.value=!0)},[_.value?(r(),u("img",{key:0,src:_.value,alt:"Category Image",style:{"max-width":"100%","max-height":"150px","object-fit":"contain"}},null,8,Et)):(r(),u("div",Lt,[...e[45]||(e[45]=[a("i",{class:"bi bi-image"},null,-1)])]))]),C(sa,{show:O.value,onClose:e[18]||(e[18]=l=>O.value=!1),onCropped:Le},null,8,["show"]),H.value?(r(),le(oa,{key:0,show:H.value,image:_.value,onClose:e[19]||(e[19]=l=>H.value=!1)},null,8,["show","image"])):w("",!0)],2),p.value.icon?(r(),u("small",Nt,g(p.value.icon[0]),1)):w("",!0)])]),e[48]||(e[48]=a("hr",{class:"my-4"},null,-1)),a("div",Tt,[a("button",{class:"btn btn-primary rounded-pill btn-sm py-2 px-4",disabled:B.value,onClick:e[20]||(e[20]=l=>Ne())},[B.value?(r(),u(j,{key:0},[e[47]||(e[47]=a("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),U(" "+g((f.value,"Saving...")),1)],64)):(r(),u(j,{key:1},[U(g((f.value,"Save")),1)],64))],8,jt),a("button",{class:"btn btn-secondary btn-sm py-2 rounded-pill px-4 ms-2","data-bs-dismiss":"modal",onClick:ie}," Cancel ")])])])])]),a("div",Ut,[a("div",Ot,[a("div",Rt,[a("div",{class:"modal-header"},[e[50]||(e[50]=a("h5",{class:"modal-title",id:"editSubCatModalLabel"}," Edit Subcategory ",-1)),a("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:E},[...e[49]||(e[49]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),a("div",zt,[a("div",qt,[e[51]||(e[51]=a("label",{for:"subCategoryName",class:"form-label"},"Subcategory Name",-1)),q(a("input",{type:"text",class:F(["form-control",{"is-invalid":N.value}]),id:"subCategoryName","onUpdate:modelValue":e[21]||(e[21]=l=>M.value.name=l),disabled:z.value},null,10,Wt),[[de,M.value.name]]),a("small",Ht,g(N.value),1)]),a("button",{type:"button",class:"btn btn-primary rounded-pill px-4",onClick:qe,disabled:z.value},g(z.value?"Saving...":"Save"),9,Kt)])])])])])]),_:1})}}},Cl=Ge(Xt,[["__scopeId","data-v-8041e7ef"]]);export{Cl as default};
