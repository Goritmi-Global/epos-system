import{_ as Pe,r as m,c as f,o as le,n as Ne,w as je,g as c,b as u,e as h,u as y,h as Ee,d as oe,f as e,t as n,l as N,m as H,v as Me,p as L,F as C,i as j,T as ne,j as D,y as Ke,P as Ae,s as g}from"./app-V2s1lVwu.js";import{_ as Ve}from"./Master-WElJ1C4A.js";import{u as Be}from"./useFormatters-DBoQqG9N.js";import{F as Le}from"./FilterModal-DUiOIWh-.js";import{E as We,a as qe,X as ze,u as M,w as Re}from"./xlsx-CFUnkIXt.js";import{s as Ue}from"./index-UlX-uW-d.js";import{E as Xe}from"./eye-BC3cGgI1.js";import{P as re}from"./printer-C_Fip2bG.js";import{C as He}from"./clock-DAouo08V.js";import{c as Ge}from"./createLucideIcon-Coq8DOvK.js";import{C as Je}from"./circle-check-big-aK5XXc8q.js";import{C as Qe}from"./circle-x-IjGY2f6Z.js";import"./index-DoagSzzV.js";import"./index-Cak9KJ6C.js";import"./index-DzFuXtkm.js";import"./sun-DZ5FTXo1.js";import"./index-MBvvLjiN.js";import"./index-BkYT2TiQ.js";import"./index-BF4Ii756.js";/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=Ge("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),Ze={class:"page-wrapper"},et={class:"row g-4"},tt={class:"col-md-6 col-xl-3"},st={class:"card border-0 shadow-sm rounded-4"},at={class:"card-body d-flex align-items-center justify-content-between"},lt={class:"mb-0 fw-bold"},ot={class:"col-md-6 col-xl-3"},nt={class:"card border-0 shadow-sm rounded-4"},rt={class:"card-body d-flex align-items-center justify-content-between"},it={class:"mb-0 fw-bold"},dt={class:"col-md-6 col-xl-3"},ct={class:"card border-0 shadow-sm rounded-4"},ut={class:"card-body d-flex align-items-center justify-content-between"},mt={class:"mb-0 fw-bold"},pt={class:"col-md-6 col-xl-3"},bt={class:"card border-0 shadow-sm rounded-4"},vt={class:"card-body d-flex align-items-center justify-content-between"},gt={class:"mb-0 fw-bold"},ht={class:"col-md-6 col-xl-3"},_t={class:"card border-0 shadow-sm rounded-4"},yt={class:"card-body d-flex align-items-center justify-content-between"},ft={class:"mb-0 fw-bold"},xt={class:"col-md-6 col-xl-3"},wt={class:"card border-0 shadow-sm rounded-4"},kt={class:"card-body d-flex align-items-center justify-content-between"},Ct={class:"mb-0 fw-bold"},Tt={class:"card border-0 shadow-lg rounded-4"},It={class:"card-body"},Ot={class:"d-flex flex-wrap gap-2 justify-content-between align-items-center mb-3"},$t={class:"d-flex flex-wrap gap-2 align-items-center"},Dt={class:"search-wrap"},Ft={key:1,class:"form-control search-input",placeholder:"Search",disabled:"",type:"text"},St={class:"col-md-6"},Pt=["onUpdate:modelValue"],Nt=["value"],jt={class:"col-md-6 mt-3"},Et=["onUpdate:modelValue"],Mt=["value"],Kt={class:"mb-4"},At={class:"d-flex gap-2 flex-wrap"},Vt=["onClick"],Bt={class:"table-responsive"},Lt={class:"table table-hover align-middle mb-0"},Wt={key:0},qt={class:"fw-semibold"},zt={class:"badge bg-info text-white rounded-pill"},Rt={class:"d-flex justify-content-center align-items-center gap-2"},Ut=["onClick"],Xt=["onClick"],Ht={key:0},Gt={colspan:"10",class:"text-center text-muted py-4"},Jt={class:"d-flex flex-column align-items-center justify-content-center py-3"},Qt={class:"small text-secondary mt-1"},Yt={key:0,class:"mt-4 d-flex justify-content-between align-items-center"},Zt={class:"text-muted small"},es={class:"modal fade",id:"orderItemsModal",tabindex:"-1","aria-hidden":"true"},ts={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},ss={class:"modal-content rounded-4 shadow border-0 dark:bg-[#212121]"},as={class:"modal-header border-0 dark:bg-[#181818]"},ls={class:"d-flex align-items-center gap-3 dark:text-white"},os={class:"modal-title fw-bold mb-1"},ns={class:"opacity-75"},rs={class:"modal-body p-4"},is={key:0,class:"rounded-3 p-4"},ds={class:"row mb-4"},cs={class:"col-md-3"},us={class:"dark:text-white"},ms={class:"col-md-3"},ps={class:"dark:text-white"},bs={class:"col-md-3"},vs={class:"col-md-3"},gs={class:"dark:text-white"},hs={class:"fw-bold mb-3 text-primary dark:text-blue-400"},_s={class:"table-responsive"},ys={class:"table table-hover align-middle rounded-3 overflow-hidden dark:text-gray-200"},fs={class:"px-3"},xs={class:"fw-semibold"},ws={class:"badge bg-secondary"},ks={class:"text-muted dark:text-gray-400"},Cs={class:"d-flex align-items-center gap-2"},Ts={class:"text-muted dark:text-gray-400 text-truncate",style:{"max-width":"150px"}},Is=["onClick"],Os={class:"d-flex justify-content-center align-items-center gap-2"},$s=["onClick"],Ds=["onClick"],Fs=["onClick"],Ss=["onClick"],Ps={class:"modal-footer border-0 dark:bg-[#212121]"},Ns={class:"modal fade",id:"ingredientsModal",tabindex:"-1","aria-hidden":"true"},js={class:"modal-dialog modal-dialog-centered"},Es={class:"modal-content rounded-4 shadow border-0 dark:bg-[#212121]"},Ms={class:"modal-header border-0 dark:bg-[#181818]"},Ks={class:"d-flex align-items-center gap-3 dark:text-white"},As={class:"opacity-75"},Vs={class:"modal-body p-4"},Bs={key:0},Ls={class:"list-group list-group-flush"},Ws={key:1,class:"text-center text-muted py-4 dark:text-gray-400"},qs={__name:"Index",setup(zs){const{dateFmt:K}=Be(),_=m([]),T=m(!1),b=m(null),G=m(!1),F=m(null),S=m("All"),ie=m([{label:"All",value:"All",icon:"bi-list-ul"},{label:"Waiting",value:"Waiting",icon:"bi-hourglass-split"},{label:"In Progress",value:"In Progress",icon:"bi-gear"},{label:"Done",value:"Done",icon:"bi-check-circle"},{label:"Cancelled",value:"Cancelled",icon:"bi-x-circle"}]),x=m({status_counts:{All:0,Waiting:0,"In Progress":0,Done:0,Cancelled:0},kpis:{total_tables:0,total_items:0,pending_items:0,in_progress_items:0,done_items:0,cancelled_items:0}}),de=l=>{S.value=l,l==="All"?p.value.status="":p.value.status=l,v.value.current_page=1,I(1)},W=m(null),ce=[{label:"PDF",value:"pdf"},{label:"Excel",value:"excel"},{label:"CSV",value:"csv"}],ue=l=>{l.value&&(Ce(l.value),W.value=null)},J=f(()=>x.value.status_counts),me=l=>{switch(l){case"Waiting":return"bg-warning text-dark";case"In Progress":return"bg-info text-white";case"Done":return"bg-success";case"Cancelled":return"bg-danger";default:return"bg-secondary"}},v=m({current_page:1,last_page:1,per_page:10,total:0,from:0,to:0,links:[]}),I=async(l=null)=>{T.value=!0;try{const t={q:O.value,page:l||v.value.current_page,per_page:v.value.per_page,sort_by:p.value.sortBy||"",order_type:p.value.orderType||"",status:p.value.status||"",date_from:p.value.dateFrom||"",date_to:p.value.dateTo||""};Object.keys(t).forEach(a=>{(t[a]===void 0||t[a]==="")&&delete t[a]});const s=await axios.get("/api/kots/all-orders",{params:t});console.log("Fetched KOT Orders:",s.data),s.data.statistics&&(x.value=s.data.statistics),_.value=(s.data.data||[]).map(a=>{const o=a.pos_order_type?.order,d=o?.items||[];return{id:o?.id||a.id,kot_id:a.id,created_at:o?.created_at||a.created_at,customer_name:o?.customer_name||"Walk In",total_amount:o?.total_amount||0,sub_total:o?.sub_total||0,status:a.status||"Waiting",type:{order_type:a.pos_order_type?.order_type,table_number:a.pos_order_type?.table_number},payment:o?.payment,items:(a.items||[]).map(i=>{const r=d.find(k=>k.title===i.item_name||k.product_id===i.product_id);return{...i,title:i.item_name,price:r?.price||0,quantity:i.quantity||1,variant_name:i.variant_name||"-",item_kitchen_note:i.item_kitchen_note||"",ingredients:i.ingredients||[]}}),item_count:a.items?.length||0}}),v.value={current_page:s.data.current_page,last_page:s.data.last_page,per_page:s.data.per_page,total:s.data.total,from:s.data.from,to:s.data.to,links:s.data.links}}catch(t){console.error("Error fetching orders:",t),_.value=[],g.error("Failed to load KOT orders")}finally{T.value=!1}},pe=l=>{if(!l)return;const s=new URLSearchParams(l.split("?")[1]).get("page");s&&I(parseInt(s))};le(async()=>{O.value="",Q.value=Date.now(),await Ne(),setTimeout(()=>{Y.value=!0;const t=document.getElementById(q);t&&(t.value="",O.value="")},100),I();const l=document.getElementById("kotFilterModal");l&&l.addEventListener("hidden.bs.modal",()=>{w.value={sortBy:p.value.sortBy||"",orderType:p.value.orderType||"",status:p.value.status||"",dateFrom:p.value.dateFrom||"",dateTo:p.value.dateTo||""}})});const O=m(""),Q=m(Date.now()),q=`search-${Math.random().toString(36).substr(2,9)}`,Y=m(!1),w=m({sortBy:"",orderType:"",status:"",dateFrom:"",dateTo:""}),p=m({sortBy:"",orderType:"",status:"",dateFrom:"",dateTo:""});m("All"),m("All"),m(["All","Eat In","Delivery","Takeaway","Collection"]),m(["All","Waiting","In Progress","Done","Cancelled"]);const be=l=>{w.value={...w.value,...l},p.value={...w.value},v.value.current_page=1,I(1),bootstrap.Modal.getInstance(document.getElementById("kotFilterModal"))?.hide(),console.log("Filters applied:",w.value)},ve=()=>{w.value={sortBy:"",orderType:"",status:"",dateFrom:"",dateTo:""},p.value={sortBy:"",orderType:"",status:"",dateFrom:"",dateTo:""},v.value.current_page=1,v.value.per_page=10,I(1),console.log("Filters cleared")},Z=f(()=>_.value),z=f(()=>({sortOptions:[{value:"order_desc",label:"Order ID: High to Low"},{value:"order_asc",label:"Order ID: Low to High"},{value:"date_desc",label:"Date: Newest First"},{value:"date_asc",label:"Date: Oldest First"}],orderTypeOptions:[{value:"Eat In",label:"Eat In"},{value:"Delivery",label:"Delivery"},{value:"Takeaway",label:"Takeaway"},{value:"Collection",label:"Collection"}],statusOptions:[{value:"Waiting",label:"Waiting"},{value:"In Progress",label:"In Progress"},{value:"Done",label:"Done"},{value:"Cancelled",label:"Cancelled"}]})),ge=f(()=>x.value.kpis.total_tables),he=f(()=>x.value.kpis.total_items),_e=f(()=>x.value.kpis.pending_items),ye=f(()=>x.value.kpis.in_progress_items),fe=f(()=>x.value.kpis.done_items),xe=f(()=>x.value.kpis.cancelled_items),R=l=>{switch(l){case"Done":return"bg-success";case"Cancelled":return"bg-danger";case"Waiting":return"bg-warning text-dark";case"In Progress":return"bg-info text-white";default:return"bg-secondary"}},ee=l=>{const t=JSON.parse(JSON.stringify(l)),s=t?.customer_name||"Walk-in Customer",a=t?.type?.order_type||"Eat In",o=t?.type?.table_number,d=t?.payment,i=t?.items||[],r=i.reduce((P,B)=>P+Number(B.price||0)*Number(B.quantity||0),0),k=t?.total_amount||r,E=t?.created_at?new Date(t.created_at):new Date,$e=E.toISOString().split("T")[0],De=E.toTimeString().split(" ")[0],X=(d?.payment_method||"cash").toLowerCase();let V="";X==="split"?V=`Payment Type: Split (Cash: £${Number(d?.cash_amount??0).toFixed(2)}, Card: £${Number(d?.card_amount??0).toFixed(2)})`:X==="card"||X==="stripe"?V=`Payment Type: Card${d?.card_brand?` (${d.card_brand}`:""}${d?.last4?` •••• ${d.last4}`:""}${d?.card_brand?")":""}`:V=`Payment Type: ${d?.payment_method||"Cash"}`;const Fe=`
    <html>
    <head>
      <title>Kitchen Order Ticket</title>
      <style>
        @page { size: 80mm auto; margin: 0; }
        html, body {
          width: 80mm;
          margin: 0;
          padding: 8px;
          font-family: monospace, Arial, sans-serif;
          font-size: 12px;
          line-height: 1.4;
        }
        .header { text-align: center; margin-bottom: 10px; }
        .order-info { margin: 10px 0; }
        .order-info div { margin-bottom: 3px; }
        .payment-info { margin-top: 8px; margin-bottom: 8px; }
        table { width: 100%; border-collapse: collapse; margin: 10px 0; }
        th, td { padding: 4px 0; text-align: left; }
        th { border-bottom: 1px solid #000; }
        td:last-child, th:last-child { text-align: right; }
        .totals { margin-top: 10px; border-top: 1px dashed #000; padding-top: 8px; }
        .footer { text-align: center; margin-top: 10px; font-size: 11px; }
      </style>
    </head>
    <body>
      <div class="header">
        <h2>KITCHEN ORDER TICKET</h2>
      </div>
      
      <div class="order-info">
        <div>KOT ID: #${t.id}</div>
        <div>Date: ${$e}</div>
        <div>Time: ${De}</div>
        <div>Customer: ${s}</div>
        <div>Order Type: ${a}</div>
        ${o?`<div>Table: ${o}</div>`:""}
        
        <div class="payment-info">
          <div>${V}</div>
        </div>
        
        <div>Status: ${t.status}</div>
      </div>

      <table>
        <thead>
          <tr>
            <th>Item</th>
            <th>Qty</th>
            <th>Price</th>
          </tr>
        </thead>
        <tbody>
         ${i.map(P=>{const B=Number(P.quantity)||1,Se=Number(P.price)||0;return`
      <tr>
        <td>${P.title||P.item_name||"Unknown Item"}</td>
        <td>${B}</td>
        <td>£${Se.toFixed(2)}</td>
      </tr>
    `}).join("")}
        </tbody>
      </table>

      <div class="totals">
        <div>Subtotal: £${Number(r).toFixed(2)}</div>
        <div>Total: £${Number(k).toFixed(2)}</div>
        ${d?.cash_received?`<div>Cash Received: £${Number(d.cash_received).toFixed(2)}</div>`:""}
        ${d?.change?`<div>Change: £${Number(d.change).toFixed(2)}</div>`:""}
      </div>

      <div class="footer">
        Kitchen Copy - Thank you!
      </div>
    </body>
    </html>
  `,$=window.open("","_blank","width=400,height=600");if(!$){alert("Please allow popups for this site to print KOT");return}$.document.open(),$.document.write(Fe),$.document.close(),$.onload=()=>{$.print(),$.close()}},U=m([]),te=m(!1);le(async()=>{te.value=!0;try{const l=await axios.get("/api/printers");console.log("Printers:",l.data.data),U.value=l.data.data.filter(t=>t.is_connected===!0||t.status==="OK").map(t=>({label:`${t.name}`,value:t.name,driver:t.driver,port:t.port}))}catch(l){console.error("Failed to fetch printers:",l)}finally{te.value=!1}});let se=null;je(O,()=>{clearTimeout(se),se=setTimeout(()=>{v.value.current_page=1,I(1)},500)});const we=l=>{b.value=l,G.value=!0;const t=document.getElementById("orderItemsModal");t&&new bootstrap.Modal(t).show()},ae=()=>{G.value=!1,b.value=null;const l=document.getElementById("orderItemsModal");if(l){const t=bootstrap.Modal.getInstance(l);t&&t.hide()}},ke=l=>{F.value=l;const t=document.getElementById("ingredientsModal");t&&new bootstrap.Modal(t).show()},A=async(l,t,s)=>{try{const a=await axios.put(`/api/kots/pos/kot-item/${t.id}/status`,{status:s}),o=_.value.findIndex(d=>d.kot_id===l.kot_id);if(o!==-1){const d=_.value[o].items.findIndex(i=>i.id===t.id);d!==-1&&(_.value[o].items[d].status=a.data.status,_.value[o].status=a.data.order_status,_.value=[..._.value])}await I(v.value.current_page),g.success(`"${t.item_name}" marked as ${s}`)}catch(a){console.error("Failed to update KOT item status:",a),g.error(a.response?.data?.message||"Failed to update status")}},Ce=async l=>{if(!_.value||_.value.length===0){g.error("No kitchen orders data to download");return}try{T.value=!0;const t={q:O.value,sort_by:p.value.sortBy||"",order_type:p.value.orderType||"",status:p.value.status||"",date_from:p.value.dateFrom||"",date_to:p.value.dateTo||"",export:"all"};Object.keys(t).forEach(o=>{(t[o]===void 0||t[o]==="")&&delete t[o]});const a=((await axios.get("/api/kots/all-orders",{params:t})).data.data||[]).map(o=>{const d=o.pos_order_type?.order,i=d?.items||[];return{id:d?.id||o.id,kot_id:o.id,created_at:d?.created_at||o.created_at,customer_name:d?.customer_name||"Walk In",total_amount:d?.total_amount||0,sub_total:d?.sub_total||0,status:o.status||"Waiting",type:{order_type:o.pos_order_type?.order_type,table_number:o.pos_order_type?.table_number},payment:d?.payment,items:(o.items||[]).map(r=>{const k=i.find(E=>E.title===r.item_name||E.product_id===r.product_id);return{...r,title:r.item_name,price:k?.price||0,quantity:r.quantity||1,variant_name:r.variant_name||"-",item_kitchen_note:r.item_kitchen_note||"",ingredients:r.ingredients||[]}}),item_count:o.items?.length||0}});if(a.length===0){g.error("No kitchen orders found to download");return}l==="pdf"?Ie(a):l==="excel"?Oe(a):l==="csv"?Te(a):g.error("Invalid download type")}catch(t){console.error("Download failed:",t),g.error(`Download failed: ${t.message}`)}finally{T.value=!1}},Te=l=>{try{const t=["KOT ID","Order ID","Customer Name","Order Type","Table Number","Items Count","Status","Total Amount","Date"],s=l.map(r=>[`"${r.kot_id||""}"`,`"${r.id||""}"`,`"${r.customer_name||"Walk In"}"`,`"${r.type?.order_type||"-"}"`,`"${r.type?.table_number||"-"}"`,`"${r.item_count||0}"`,`"${r.status||""}"`,`"${Number(r.total_amount||0).toFixed(2)}"`,`"${r.created_at?K(r.created_at):""}"`]),a=[t.join(","),...s.map(r=>r.join(","))].join(`
`),o=new Blob([a],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(o),i=document.createElement("a");i.setAttribute("href",d),i.setAttribute("download",`Kitchen_Orders_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(i),i.click(),document.body.removeChild(i),g.success("CSV downloaded successfully")}catch(t){console.error("CSV generation error:",t),g.error(`CSV generation failed: ${t.message}`)}},Ie=l=>{try{const t=new We("l","mm","a4");t.setFontSize(18),t.setFont("helvetica","bold"),t.text("Kitchen Orders Report",14,20),t.setFontSize(10),t.setFont("helvetica","normal");const s=new Date().toLocaleString();t.text(`Generated on: ${s}`,14,28),t.text(`Total Orders: ${l.length}`,14,34);const a=["KOT ID","Order ID","Customer","Type","Table","Items","Status","Amount","Date"],o=l.map(i=>[i.kot_id||"",i.id||"",i.customer_name||"Walk In",i.type?.order_type||"-",i.type?.table_number||"-",i.item_count||0,i.status||"",`£${Number(i.total_amount||0).toFixed(2)}`,i.created_at?K(i.created_at):""]);qe(t,{head:[a],body:o,startY:40,styles:{fontSize:8,cellPadding:2,halign:"left",lineColor:[0,0,0],lineWidth:.1},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:14,right:14},didDrawPage:i=>{const r=t.internal.getNumberOfPages(),k=t.internal.pageSize.height;t.setFontSize(8),t.text(`Page ${i.pageNumber} of ${r}`,i.settings.margin.left,k-10)}});const d=`Kitchen_Orders_${new Date().toISOString().split("T")[0]}.pdf`;t.save(d),g.success("PDF downloaded successfully")}catch(t){console.error("PDF generation error:",t),g.error(`PDF generation failed: ${t.message}`)}},Oe=l=>{try{if(typeof ze>"u")throw new Error("XLSX library is not loaded");const t=l.map(r=>({"KOT ID":r.kot_id||"","Order ID":r.id||"","Customer Name":r.customer_name||"Walk In","Order Type":r.type?.order_type||"-","Table Number":r.type?.table_number||"-","Items Count":r.item_count||0,Status:r.status||"","Total Amount":Number(r.total_amount||0).toFixed(2),Date:r.created_at||""})),s=M.book_new(),a=M.json_to_sheet(t);a["!cols"]=[{wch:10},{wch:10},{wch:20},{wch:12},{wch:12},{wch:12},{wch:12},{wch:12},{wch:18}],M.book_append_sheet(s,a,"Kitchen Orders");const o=[{Info:"Generated On",Value:new Date().toLocaleString()},{Info:"Total Orders",Value:l.length},{Info:"Exported By",Value:"Kitchen Management System"}],d=M.json_to_sheet(o);M.book_append_sheet(s,d,"Report Info");const i=`Kitchen_Orders_${new Date().toISOString().split("T")[0]}.xlsx`;Re(s,i),g.success("Excel file downloaded successfully")}catch(t){console.error("Excel generation error:",t),g.error(`Excel generation failed: ${t.message}`)}};return(l,t)=>(u(),c(C,null,[h(y(Ee),{title:"Kitchen Orders"}),h(Ve,null,{default:oe(()=>[e("div",Ze,[t[28]||(t[28]=e("h4",{class:"fw-semibold mb-3"},"Kitchen Order Tickets",-1)),e("div",et,[e("div",tt,[e("div",st,[e("div",at,[e("div",null,[e("h3",lt,n(ge.value),1),t[5]||(t[5]=e("p",{class:"text-muted mb-0 small"},"Total Tables",-1))]),t[6]||(t[6]=e("div",{class:"rounded-circle p-3 bg-primary-subtle text-primary d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-table fs-4"})],-1))])])]),e("div",ot,[e("div",nt,[e("div",rt,[e("div",null,[e("h3",it,n(he.value),1),t[7]||(t[7]=e("p",{class:"text-muted mb-0 small"},"Total Items",-1))]),t[8]||(t[8]=e("div",{class:"rounded-circle p-3 bg-success-subtle text-success d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-basket fs-4"})],-1))])])]),e("div",dt,[e("div",ct,[e("div",ut,[e("div",null,[e("h3",mt,n(_e.value),1),t[9]||(t[9]=e("p",{class:"text-muted mb-0 small"},"Pending Items",-1))]),t[10]||(t[10]=e("div",{class:"rounded-circle p-3 bg-warning-subtle text-warning d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-hourglass-split fs-4"})],-1))])])]),e("div",pt,[e("div",bt,[e("div",vt,[e("div",null,[e("h3",gt,n(ye.value),1),t[11]||(t[11]=e("p",{class:"text-muted mb-0 small"},"In Progress",-1))]),t[12]||(t[12]=e("div",{class:"rounded-circle p-3 bg-info-subtle text-info d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-gear fs-4"})],-1))])])]),e("div",ht,[e("div",_t,[e("div",yt,[e("div",null,[e("h3",ft,n(fe.value),1),t[13]||(t[13]=e("p",{class:"text-muted mb-0 small"},"Completed Items",-1))]),t[14]||(t[14]=e("div",{class:"rounded-circle p-3 bg-success-subtle text-success d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-check-circle fs-4"})],-1))])])]),e("div",xt,[e("div",wt,[e("div",kt,[e("div",null,[e("h3",Ct,n(xe.value),1),t[15]||(t[15]=e("p",{class:"text-muted mb-0 small"},"Cancelled Items",-1))]),t[16]||(t[16]=e("div",{class:"rounded-circle p-3 bg-danger-subtle text-danger d-flex align-items-center justify-content-center",style:{width:"56px",height:"56px"}},[e("i",{class:"bi bi-x-circle fs-4"})],-1))])])])]),e("div",Tt,[e("div",It,[e("div",Ot,[t[23]||(t[23]=e("h5",{class:"mb-0 fw-semibold"},"Kitchen Orders",-1)),e("div",$t,[e("div",Dt,[t[17]||(t[17]=e("i",{class:"bi bi-search"},null,-1)),t[18]||(t[18]=e("input",{type:"email",name:"email",autocomplete:"email",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px"},tabindex:"-1","aria-hidden":"true"},null,-1)),Y.value?H((u(),c("input",{id:q,"onUpdate:modelValue":t[0]||(t[0]=s=>O.value=s),key:Q.value,class:"form-control search-input",placeholder:"Search",type:"search",autocomplete:"new-password",name:q,role:"presentation",onFocus:t[1]||(t[1]=(...s)=>l.handleFocus&&l.handleFocus(...s))},null,32)),[[Me,O.value]]):(u(),c("input",Ft))]),h(Le,{modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=s=>w.value=s),title:"Kitchen Orders","modal-id":"kotFilterModal","modal-size":"modal-lg","sort-options":z.value.sortOptions,"show-date-range":!0,onApply:be,showDateRange:!1,"show-stock-status":!1,onClear:ve},{customFilters:oe(({filters:s})=>[e("div",St,[t[20]||(t[20]=e("label",{class:"form-label fw-semibold text-dark"},[e("i",{class:"fas fa-concierge-bell me-2 text-muted"}),L("Order Type ")],-1)),H(e("select",{"onUpdate:modelValue":a=>s.orderType=a,class:"form-select"},[t[19]||(t[19]=e("option",{value:""},"All",-1)),(u(!0),c(C,null,j(z.value.orderTypeOptions,a=>(u(),c("option",{key:a.value,value:a.value},n(a.label),9,Nt))),128))],8,Pt),[[ne,s.orderType]])]),e("div",jt,[t[22]||(t[22]=e("label",{class:"form-label fw-semibold text-dark"},[e("i",{class:"fas fa-tasks me-2 text-muted"}),L("Order Status ")],-1)),H(e("select",{"onUpdate:modelValue":a=>s.status=a,class:"form-select"},[t[21]||(t[21]=e("option",{value:""},"All",-1)),(u(!0),c(C,null,j(z.value.statusOptions,a=>(u(),c("option",{key:a.value,value:a.value},n(a.label),9,Mt))),128))],8,Et),[[ne,s.status]])])]),_:1},8,["modelValue","sort-options"]),h(y(Ue),{modelValue:W.value,"onUpdate:modelValue":t[3]||(t[3]=s=>W.value=s),options:ce,optionLabel:"label",optionValue:"value",placeholder:"Export",class:"export-dropdown",onChange:ue},null,8,["modelValue"])])]),e("div",Kt,[e("div",At,[(u(!0),c(C,null,j(ie.value,s=>(u(),c("button",{key:s.value,onClick:a=>de(s.value),class:D(["btn btn-sm rounded-pill px-4 py-2 d-flex align-items-center gap-2",S.value===s.value?"btn-primary text-white shadow-sm":"btn-outline-secondary"]),style:{"min-width":"120px",transition:"all 0.2s ease"}},[e("i",{class:D(s.icon)},null,2),e("span",null,n(s.label),1),s.value!=="All"?(u(),c("span",{key:0,class:D(["badge rounded-pill ms-1",S.value===s.value?"bg-white text-primary":me(s.value)]),style:{"min-width":"24px"}},n(J.value[s.value]||0),3)):(u(),c("span",{key:1,class:D(["badge rounded-pill ms-1",S.value===s.value?"bg-white text-primary":"bg-secondary"]),style:{"min-width":"24px"}},n(J.value.All),3))],10,Vt))),128))])]),e("div",Bt,[e("table",Lt,[t[27]||(t[27]=e("thead",{class:"border-top small text-muted"},[e("tr",null,[e("th",null,"#"),e("th",null,"KOT ID"),e("th",null,"Order ID"),e("th",null,"Customer"),e("th",null,"Order Type"),e("th",null,"Table"),e("th",null,"Items Count"),e("th",null,"Status"),e("th",null,"Date"),e("th",null,"Total Amount"),e("th",{class:"text-center"},"Actions")])],-1)),e("tbody",null,[T.value?(u(),c("tr",Wt,[...t[24]||(t[24]=[e("td",{colspan:"10",class:"text-center py-5"},[e("div",{class:"d-flex flex-column align-items-center justify-content-center"},[e("div",{class:"spinner-border mb-3",role:"status",style:{color:"#1B1670",width:"3rem",height:"3rem","border-width":"0.3em"}},[e("span",{class:"visually-hidden"},"Loading...")]),e("div",{class:"fw-semibold text-muted"},"Loading KOT orders...")])],-1)])])):(u(),c(C,{key:1},[(u(!0),c(C,null,j(Z.value,(s,a)=>(u(),c("tr",{key:s.kot_id},[e("td",null,n((v.value.current_page-1)*v.value.per_page+a+1),1),e("td",qt,n(s.kot_id),1),e("td",null,n(s.id),1),e("td",null,n(s.customer_name),1),e("td",null,n(s.type?.order_type||"-"),1),e("td",null,n(s.type?.table_number||"-"),1),e("td",null,[e("span",zt,n(s.item_count)+" items ",1)]),e("td",null,[e("span",{class:D(["badge","rounded-pill",R(s.status)]),style:{"min-width":"90px",display:"inline-flex","justify-content":"center","align-items":"center",height:"25px"}},n(s.status),3)]),e("td",null,n(y(K)(s.created_at)),1),e("td",null,n(s.payment.amount_received),1),e("td",null,[e("div",Rt,[e("button",{onClick:o=>we(s),title:"View Items",class:"p-2 rounded-full text-primary hover:bg-gray-100"},[h(y(Xe),{class:"w-5 h-5"})],8,Ut),U.value.length>0?(u(),c("button",{key:0,class:"p-2 rounded-full text-gray-600 hover:bg-gray-100",onClick:Ke(o=>ee(s),["prevent"]),title:"Print"},[h(y(re),{class:"w-5 h-5"})],8,Xt)):N("",!0)])])]))),128)),!T.value&&Z.value.length===0?(u(),c("tr",Ht,[e("td",Gt,[e("div",Jt,[t[25]||(t[25]=e("i",{class:"bi bi-inbox",style:{"font-size":"2rem",opacity:"0.5","margin-bottom":"0.5rem"}},null,-1)),t[26]||(t[26]=e("div",{class:"fw-semibold"},"No KOT orders found",-1)),e("div",Qt,n(S.value==="All"?"Try adjusting your filters or date range":`No orders with status "${S.value}"`),1)])])])):N("",!0)],64))])])]),!T.value&&v.value.last_page>1?(u(),c("div",Yt,[e("div",Zt," Showing "+n(v.value.from)+" to "+n(v.value.to)+" of "+n(v.value.total)+" items ",1),h(Ae,{pagination:v.value.links,isApiDriven:!0,onPageChanged:pe},null,8,["pagination"])])):N("",!0)])])]),e("div",es,[e("div",ts,[e("div",ss,[e("div",as,[e("div",ls,[t[29]||(t[29]=e("div",{class:"rounded-circle p-3 bg-white bg-opacity-25 dark:bg-white dark:bg-opacity-10"},[e("i",{class:"bi bi-list-task fs-4"})],-1)),e("div",null,[e("h5",os," Order Items - KOT #"+n(b.value?.kot_id),1),e("small",ns," Order #"+n(b.value?.id)+" | "+n(b.value?.customer_name),1)])]),e("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition transform hover:scale-110",onClick:ae,"data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[...t[30]||(t[30]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",rs,[b.value?(u(),c("div",is,[e("div",ds,[e("div",cs,[t[31]||(t[31]=e("small",{class:"text-muted d-block dark:text-gray-400"},"Order Type",-1)),e("strong",us,n(b.value.type?.order_type||"-"),1)]),e("div",ms,[t[32]||(t[32]=e("small",{class:"text-muted d-block dark:text-gray-400"},"Table Number",-1)),e("strong",ps,n(b.value.type?.table_number||"-"),1)]),e("div",bs,[t[33]||(t[33]=e("small",{class:"text-muted d-block dark:text-gray-400"},"Order Status",-1)),e("span",{class:D(["badge","rounded-pill",R(b.value.status)])},n(b.value.status),3)]),e("div",vs,[t[34]||(t[34]=e("small",{class:"text-muted d-block dark:text-gray-400"},"Date",-1)),e("strong",gs,n(y(K)(b.value.created_at)),1)])]),t[38]||(t[38]=e("hr",{class:"my-3 dark:border-gray-600"},null,-1)),e("h6",hs,[t[35]||(t[35]=e("i",{class:"bi bi-basket me-2"},null,-1)),L("Order Items ("+n(b.value.item_count)+") ",1)]),e("div",_s,[e("table",ys,[t[37]||(t[37]=e("thead",null,[e("tr",null,[e("th",{class:"px-3"},"#"),e("th",null,"Item Name"),e("th",null,"Variant"),e("th",null,"Quantity"),e("th",null,"Kitchen Note"),e("th",null,"Ingredients"),e("th",null,"Status"),e("th",{class:"text-center"},"Actions")])],-1)),e("tbody",null,[(u(!0),c(C,null,j(b.value.items,(s,a)=>(u(),c("tr",{key:s.id,class:"dark:border-gray-700"},[e("td",fs,n(a+1),1),e("td",xs,n(s.item_name),1),e("td",null,n(s.variant_name),1),e("td",null,[e("span",ws,n(s.quantity),1)]),e("td",null,[e("small",ks,n(s.item_kitchen_note||"-"),1)]),e("td",null,[e("div",Cs,[e("small",Ts,n(s.ingredients?.join(", ")||"-"),1),s.ingredients&&s.ingredients.length>0?(u(),c("button",{key:0,onClick:o=>ke(s),class:"btn btn-sm p-1 text-info dark:text-blue-400 dark:hover:bg-gray-700",title:"View Ingredients"},[...t[36]||(t[36]=[e("i",{class:"bi bi-eye"},null,-1)])],8,Is)):N("",!0)])]),e("td",null,[e("span",{class:D(["badge","rounded-pill",R(s.status)]),style:{"min-width":"80px"}},n(s.status),3)]),e("td",null,[e("div",Os,[e("button",{onClick:o=>A(b.value,s,"Waiting"),title:"Waiting",class:"btn btn-sm p-1 text-warning dark:text-yellow-400 dark:hover:bg-gray-700"},[h(y(He),{class:"w-4 h-4"})],8,$s),e("button",{onClick:o=>A(b.value,s,"In Progress"),title:"In Progress",class:"btn btn-sm p-1 text-info dark:text-blue-400 dark:hover:bg-gray-700"},[h(y(Ye),{class:"w-4 h-4"})],8,Ds),e("button",{onClick:o=>A(b.value,s,"Done"),title:"Done",class:"btn btn-sm p-1 text-success dark:text-green-400 dark:hover:bg-gray-700"},[h(y(Je),{class:"w-4 h-4"})],8,Fs),e("button",{onClick:o=>A(b.value,s,"Cancelled"),title:"Cancelled",class:"btn btn-sm p-1 text-danger dark:text-red-400 dark:hover:bg-gray-700"},[h(y(Qe),{class:"w-4 h-4"})],8,Ss)])])]))),128))])])])])):N("",!0)]),e("div",Ps,[e("button",{type:"button",class:"btn btn-secondary rounded-pill px-4 py-2",onClick:ae}," Close "),U.value.length>0?(u(),c("button",{key:0,class:"btn btn-primary rounded-pill px-4",onClick:t[4]||(t[4]=s=>ee(b.value))},[h(y(re),{class:"w-4 h-4 me-2",style:{display:"inline-block"}}),t[39]||(t[39]=L(" Print Order ",-1))])):N("",!0)])])])]),e("div",Ns,[e("div",js,[e("div",Es,[e("div",Ms,[e("div",Ks,[t[41]||(t[41]=e("div",{class:"rounded-circle p-2 bg-white bg-opacity-25 dark:bg-white dark:bg-opacity-10"},[e("i",{class:"bi bi-egg-fried fs-5"})],-1)),e("div",null,[t[40]||(t[40]=e("h5",{class:"modal-title fw-bold mb-0"},"Ingredients",-1)),e("small",As,n(F.value?.item_name),1)])]),t[42]||(t[42]=e("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])],-1))]),e("div",Vs,[F.value&&F.value.ingredients&&F.value.ingredients.length>0?(u(),c("div",Bs,[e("ul",Ls,[(u(!0),c(C,null,j(F.value.ingredients,(s,a)=>(u(),c("li",{key:a,class:"list-group-item d-flex align-items-center gap-2 dark:bg-transparent dark:text-gray-200 dark:border-gray-700"},[t[43]||(t[43]=e("i",{class:"bi bi-check-circle-fill text-success"},null,-1)),e("span",null,n(s),1)]))),128))])])):(u(),c("div",Ws,[...t[44]||(t[44]=[e("i",{class:"bi bi-info-circle fs-3 mb-2"},null,-1),e("p",{class:"mb-0"},"No ingredients available",-1)])]))]),t[45]||(t[45]=e("div",{class:"modal-footer border-0 dark:bg-[#212121]"},[e("button",{type:"button",class:"btn btn-secondary rounded-pill px-4 py-2","data-bs-dismiss":"modal"}," Close ")],-1))])])])]),_:1})],64))}},ma=Pe(qs,[["__scopeId","data-v-f79f7d29"]]);export{ma as default};
