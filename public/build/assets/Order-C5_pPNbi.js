import{_ as vt,r as u,k as G,p as yt,C as h,g as n,o as d,a as T,d as v,h as bt,w as K,b as t,t as o,x as F,y as ht,f as _,F as x,v as O,I as Q,i as y}from"./app-CYEkE9GK.js";import{_ as _t}from"./Master-D-99QHuT.js";import{u as wt}from"./useFormatters-BBfJnlDF.js";import{F as ft}from"./FilterModal-BLKsnOWP.js";import{E as gt}from"./eye-B5CHwhPQ.js";import"./index-DGJ9z-Qf.js";import"./createLucideIcon-BvjKrCmJ.js";import"./sun-BKrnKPUQ.js";const xt={class:"page-wrapper"},Ct={class:"row g-3"},$t={class:"col-md-6 col-xl-4"},kt={class:"card border-0 shadow-sm rounded-4"},Dt={class:"card-body d-flex align-items-center justify-content-between"},Tt={class:"mb-0 fw-bold"},Ot={class:"col-md-6 col-xl-4"},Pt={class:"card border-0 shadow-sm rounded-4"},Mt={class:"card-body d-flex align-items-center justify-content-between"},St={class:"mb-0 fw-bold"},Ft={class:"col-md-6 col-xl-4"},At={class:"card border-0 shadow-sm rounded-4"},Nt={class:"card-body d-flex align-items-center justify-content-between"},Lt={class:"mb-0 fw-bold"},It={class:"card border-0 shadow-lg rounded-4 mt-0"},jt={class:"card-body"},Et={class:"d-flex flex-wrap gap-2 justify-content-between align-items-center mb-3"},qt={class:"d-flex flex-wrap gap-2 align-items-center"},Bt={class:"search-wrap"},Vt={key:1,class:"form-control search-input",placeholder:"Search",disabled:"",type:"text"},Rt={class:"col-md-6"},zt=["onUpdate:modelValue"],Ut=["value"],Ht={class:"col-md-6 mt-3"},Gt=["onUpdate:modelValue"],Kt=["value"],Qt={class:"table-responsive"},Yt={class:"table table-hover align-middle mb-0",style:{"min-height":"320px"}},Zt=["onClick"],Wt={class:"text-success"},Jt={class:"text-center"},Xt=["onClick"],te={key:0},ee={class:"modal fade",id:"paymentDetailsModal",tabindex:"-1","aria-hidden":"true"},se={class:"modal-dialog modal-md modal-dialog-centered"},ae={class:"modal-content border-0 shadow-lg rounded-4 overflow-hidden"},le={class:"modal-body p-4"},oe={class:"payment-info"},ne={class:"row g-3"},de={class:"col-6"},ie={class:"info-card"},re={class:"value"},ce={class:"col-6"},ue={class:"info-card"},me={class:"value"},pe={key:0,class:"col-6"},ve={class:"info-card"},ye={class:"value"},be={key:1,class:"col-6"},he={class:"info-card"},_e={class:"value"},we={class:"col-6"},fe={class:"info-card"},ge={class:"value"},xe={key:2,class:"col-6"},Ce={class:"info-card"},$e={class:"value text-capitalize"},ke={key:3,class:"col-6"},De={class:"info-card"},Te={class:"value"},Oe={key:4,class:"col-6"},Pe={class:"info-card"},Me={class:"value"},Se={key:5,class:"col-6"},Fe={class:"info-card"},Ae={class:"value"},Ne={class:"modal fade",id:"orderDetailsModal",tabindex:"-1","aria-hidden":"true"},Le={class:"modal-dialog modal-lg modal-dialog-centered"},Ie={class:"modal-content rounded-4 shadow border-0"},je={class:"modal-header bg-white border-0 position-relative px-4 pt-4"},Ee={class:"d-flex align-items-center gap-3"},qe={class:"d-flex flex-column"},Be={class:"modal-title fw-bold mb-0"},Ve={class:"text-muted"},Re={class:"modal-body bg-light px-4 pb-4"},ze={key:0,class:"rounded-3 bg-white shadow-sm p-4"},Ue={class:"mb-4"},He={class:"row text-muted small"},Ge={class:"col-md-4 mb-2"},Ke={class:"col-md-4 mb-2"},Qe={class:"table-responsive"},Ye={class:"table align-middle table-striped table-hover border rounded-3 overflow-hidden shadow-sm"},Ze={class:"px-3"},We={class:"fw-semibold"},Je={class:"fw-bold text-success"},Xe={key:0},ts={class:"text-success fw-semibold",colspan:"3"},es={class:"fw-bold text-success"},ss={key:1},as={class:"modal-footer bg-white border-0 shadow-sm px-4 py-3"},ls={__name:"Order",setup(os){const{formatCurrencySymbol:b,dateFmt:A}=wt(),w=u([]),Y=async()=>{try{const a=await axios.get("/api/orders/all");w.value=a.data.data}catch(a){console.error("Error fetching inventory:",a)}};G(async()=>{f.value="",N.value=Date.now(),await yt(),setTimeout(()=>{L.value=!0;const a=document.getElementById(P);a&&(a.value="",f.value="")},100),Y()});const f=u(""),N=u(Date.now()),P=`search-${Math.random().toString(36).substr(2,9)}`,L=u(!1),r=u({sortBy:"",orderType:"",paymentType:"",status:"",priceMin:null,priceMax:null,dateFrom:"",dateTo:""});u("All"),u("All"),u(["All","Dine In","Delivery","Takeaway"]),u(["All","Cash","Card","Split"]);const I=h(()=>{const a=f.value.trim().toLowerCase();let e=[...w.value];return a&&(e=e.filter(s=>[String(s.id),s.type?.table_number??"",s.type?.order_type??"",s.customer_name??"",s.payment?.payment_type??"",s.status??"",String(s.total_amount??""),j(s.created_at),E(s.created_at)].join(" ").toLowerCase().includes(a))),r.value.orderType&&(e=e.filter(s=>(s.type?.order_type??"").toLowerCase()===r.value.orderType.toLowerCase())),r.value.paymentType&&(e=e.filter(s=>(s.payment?.payment_type??"").toLowerCase()===r.value.paymentType.toLowerCase())),r.value.status&&(e=e.filter(s=>s.status?.toLowerCase()===r.value.status.toLowerCase())),(r.value.priceMin!==null||r.value.priceMax!==null)&&(e=e.filter(s=>{const l=s.total_amount||0,i=r.value.priceMin||0,S=r.value.priceMax||1/0;return l>=i&&l<=S})),r.value.dateFrom&&(e=e.filter(s=>{const l=new Date(s.created_at),i=new Date(r.value.dateFrom);return l>=i})),r.value.dateTo&&(e=e.filter(s=>{const l=new Date(s.created_at),i=new Date(r.value.dateTo);return i.setHours(23,59,59,999),l<=i})),e}),Z=h(()=>{const a=[...I.value];switch(r.value.sortBy){case"date_desc":return a.sort((s,l)=>new Date(l.created_at)-new Date(s.created_at));case"date_asc":return a.sort((s,l)=>new Date(s.created_at)-new Date(l.created_at));case"price_desc":return a.sort((s,l)=>(l.total_amount||0)-(s.total_amount||0));case"price_asc":return a.sort((s,l)=>(s.total_amount||0)-(l.total_amount||0));case"customer_asc":return a.sort((s,l)=>(s.customer_name||"").localeCompare(l.customer_name||""));case"customer_desc":return a.sort((s,l)=>(l.customer_name||"").localeCompare(s.customer_name||""));default:return a.sort((s,l)=>new Date(l.created_at)-new Date(s.created_at))}}),C=h(()=>({sortOptions:[{value:"date_desc",label:"Date: Newest First"},{value:"date_asc",label:"Date: Oldest First"},{value:"price_desc",label:"Price: High to Low"},{value:"price_asc",label:"Price: Low to High"},{value:"customer_asc",label:"Customer: A to Z"},{value:"customer_desc",label:"Customer: Z to A"}],orderTypeOptions:[{value:"Dine In",label:"Dine In"},{value:"Delivery",label:"Delivery"},{value:"Takeaway",label:"Takeaway"},{value:"Collection",label:"Collection"}],paymentTypeOptions:[{value:"Cash",label:"Cash"},{value:"Card",label:"Card"},{value:"Split",label:"Split"}],statusOptions:[{value:"paid",label:"Paid"},{value:"pending",label:"Pending"},{value:"cancelled",label:"Cancelled"}]})),W=a=>{console.log("Filters applied:",a)},J=()=>{console.log("Filters cleared")},X=h(()=>w.value.length),tt=h(()=>w.value.filter(a=>a.status==="paid").length),et=h(()=>w.value.filter(a=>a.status!=="paid").length);function j(a){const e=new Date(a),s=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${s}-${l}-${i}`}function E(a){const e=Date.now()-new Date(a).getTime(),s=Math.floor(e/6e4);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const l=Math.floor(s/60);if(l<24)return`${l} hour${l===1?"":"s"} ago`;const i=Math.floor(l/24);return`${i} day${i===1?"":"s"} ago`}function M(a){const e=Number(a??0);return`£${Number.isInteger(e)?e.toFixed(0):e.toFixed(1)}`}const st=u(!1),c=u(null),m=u(null);function at(a){c.value=a,st.value=!0,new bootstrap.Modal(document.getElementById("paymentDetailsModal")).show()}const lt=a=>{m.value=a,new bootstrap.Modal(document.getElementById("orderDetailsModal")).show()};function ot(a){const e=p=>`£${Number(p??0).toFixed(2)}`,s=p=>(p??"").toString(),l=a?.payment??{},i=(l.payment_type??a?.payment_method??"Cash").toLowerCase(),S=l.cash_amount??a?.cash_amount??a?.cash_received??0,nt=l.card_amount??a?.card_amount??0,V=l.brand??a?.card_brand??"",R=l.last_digits??a?.last4??a?.last_digits??"";let $="";if(i==="split")$=`Payment: Split (Cash: ${e(S)}, Card: ${e(nt)})`;else if(i==="card"||i==="stripe"){const p=V?` (${V})`:"",D=R?` •••• ${R}`:"";$=`Payment: Card${p}${D}`}else $=`Payment: ${s(a?.payment_method)||"Cash"}`;const dt=a?.id??"N/A",it=a?.type?.order_type??a?.order_type??"N/A",z=a?.type?.table_number??a?.table_number??null,rt=a?.customer_name||"Walk In",g=a?.created_at?new Date(a.created_at):new Date,ct=`${g.getFullYear()}-${String(g.getMonth()+1).padStart(2,"0")}-${String(g.getDate()).padStart(2,"0")} ${String(g.getHours()).padStart(2,"0")}:${String(g.getMinutes()).padStart(2,"0")}`,U=Array.isArray(a?.items)?a.items:[],H=a?.sub_total??U.reduce((p,D)=>p+Number(D.price??0)*Number(D.quantity??0),0),ut=a?.total_amount??H,mt=U.map(p=>`
    <div class="row">
      <span class="w-50 ellips">${s(p.title)}</span>
      <span class="w-20 right">x${Number(p.quantity??0)}</span>
      <span class="w-30 right">${e(p.price)}</span>
    </div>
  `).join(""),pt=`
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Receipt</title>
<style>
  :root { --w: 58mm; }
  html, body { margin:0; padding:0; }
  body { width: var(--w); font-family: monospace; font-size: 12px; line-height: 1.3; color:#000; }
  .center { text-align:center; }
  .right { text-align:right; }
  .row { display:flex; justify-content:space-between; gap:4px; }
  .w-50 { width:50%; } .w-20 { width:20%; } .w-30 { width:30%; }
  .ellips { white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  hr { border:0; border-top:1px dashed #000; margin:4px 0; }
  h3 { margin:0 0 2px 0; font-size: 14px; }
  small { font-size:11px; }
  .mt-4 { margin-top:4px; }
  .mb-4 { margin-bottom:4px; }
  .bold { font-weight:bold; }
  @page { size: var(--w) auto; margin: 3mm; }
  @media print { body { -webkit-print-color-adjust: exact; print-color-adjust: exact; } }
</style>
</head>
<body>
  <div class="center">
    <h3>Goritmi</h3>
    <small>Order #${dt}</small><br/>
    <small>${ct}</small>
  </div>

  <hr/>
  <div><small>Customer: ${s(rt)}</small></div>
  <div><small>Order Type: ${s(it)}${z?` | Table: ${s(z)}`:""}</small></div>
  <div><small>${$}</small></div>

  <hr/>
  <div class="row bold"><span class="w-50">Item</span><span class="w-20 right">Qty</span><span class="w-30 right">Price</span></div>
  ${mt}
  <hr/>

  <div class="row"><span>Subtotal:</span><span class="right">${e(H)}</span></div>
  ${Number(a?.tax??0)?`<div class="row"><span>Tax:</span><span class="right">${e(a.tax)}</span></div>`:""}
  ${Number(a?.service_charges??0)?`<div class="row"><span>Service:</span><span class="right">${e(a.service_charges)}</span></div>`:""}
  ${Number(a?.delivery_charges??0)?`<div class="row"><span>Delivery:</span><span class="right">${e(a.delivery_charges)}</span></div>`:""}

  <div class="row bold mt-4"><span>Total:</span><span class="right">${e(ut)}</span></div>

  ${i==="cash"||!i?`<div class="row"><span>Cash Received:</span><span class="right">${e(a?.cash_received??l?.amount_received??0)}</span></div>
       <div class="row"><span>Change:</span><span class="right">${e(a?.change??0)}</span></div>`:""}

  <hr/>
  <div class="center">
    <small>Abdara Road, Peshawar</small><br/>
    <small>info@goritmi.com</small><br/>
    <small>Thank you for your visit!</small>
  </div>

<script>
  async function ready() {
    try { if (document.fonts && document.fonts.ready) { await document.fonts.ready; } } catch(e){}
    window.focus();
    const mq = window.matchMedia && window.matchMedia('print');
    if (mq && mq.addEventListener) {
      mq.addEventListener('change', function(e){ if(!e.matches) setTimeout(function(){ window.close(); }, 300); });
    } else if (mq && mq.addListener) { // older browsers
      mq.addListener(function(mql){ if(!mql.matches) setTimeout(function(){ window.close(); }, 300); });
    }
    window.onafterprint = function(){ setTimeout(function(){ window.close(); }, 300); };
    setTimeout(function(){ window.print(); }, 200);
  }
  if (document.readyState === 'complete') ready();
  else window.addEventListener('load', ready);
<\/script>
</body>
</html>
`,k=window.open("","","width=420,height=640");if(!k){console.error("Popup blocked or failed to open"),alert("Please allow popups for this site to print receipts");return}k.document.open(),k.document.write(pt),k.document.close()}const q=u([]),B=u(!1);return G(async()=>{B.value=!0;try{const a=await axios.get("/api/printers");console.log("Printers:",a.data.data),q.value=a.data.data.filter(e=>e.is_connected===!0||e.status==="OK").map(e=>({label:`${e.name}`,value:e.name,driver:e.driver,port:e.port}))}catch(a){console.error("Failed to fetch printers:",a)}finally{B.value=!1}}),(a,e)=>(d(),n(x,null,[T(v(bt),{title:"Orders"}),T(_t,null,{default:K(()=>[t("div",xt,[e[46]||(e[46]=t("h4",{class:"fw-semibold mb-3"},"Overall Orders",-1)),t("div",Ct,[t("div",$t,[t("div",kt,[t("div",Dt,[t("div",null,[t("h3",Tt,o(X.value),1),e[4]||(e[4]=t("p",{class:"text-muted mb-0 small"},"Total Orders",-1))]),e[5]||(e[5]=t("div",{class:"rounded-circle p-2 d-flex align-items-center justify-content-center text-primary",style:{width:"40px",height:"40px"}},[t("i",{class:"bi bi-list-task fs-4"})],-1))])])]),t("div",Ot,[t("div",Pt,[t("div",Mt,[t("div",null,[t("h3",St,o(tt.value),1),e[6]||(e[6]=t("p",{class:"text-muted mb-0 small"},"Completed Orders",-1))]),e[7]||(e[7]=t("div",{class:"rounded-circle p-3 d-flex align-items-center justify-content-center text-success",style:{width:"40px",height:"40px"}},[t("i",{class:"bi bi-check2-circle fs-4"})],-1))])])]),t("div",Ft,[t("div",At,[t("div",Nt,[t("div",null,[t("h3",Lt,o(et.value),1),e[8]||(e[8]=t("p",{class:"text-muted mb-0 small"},"Pending Orders",-1))]),e[9]||(e[9]=t("div",{class:"rounded-circle p-3 d-flex align-items-center justify-content-center text-warning",style:{width:"40px",height:"40px"}},[t("i",{class:"bi bi-hourglass-split fs-4"})],-1))])])])]),t("div",It,[t("div",jt,[t("div",Et,[e[17]||(e[17]=t("h5",{class:"mb-0 fw-semibold"},"Orders",-1)),t("div",qt,[t("div",Bt,[e[10]||(e[10]=t("i",{class:"bi bi-search"},null,-1)),e[11]||(e[11]=t("input",{type:"email",name:"email",autocomplete:"email",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px"},tabindex:"-1","aria-hidden":"true"},null,-1)),L.value?F((d(),n("input",{id:P,"onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),key:N.value,class:"form-control search-input",placeholder:"Search",type:"search",autocomplete:"new-password",name:P,role:"presentation",onFocus:e[1]||(e[1]=(...s)=>a.handleFocus&&a.handleFocus(...s))},null,32)),[[ht,f.value]]):(d(),n("input",Vt))]),T(ft,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=s=>r.value=s),title:"Orders","modal-id":"orderFilterModal","modal-size":"modal-lg","sort-options":C.value.sortOptions,"status-options":C.value.statusOptions,"show-price-range":!0,"show-date-range":!0,"price-label":"Total Amount Range",onApply:W,onClear:J},{customFilters:K(({filters:s})=>[t("div",Rt,[e[13]||(e[13]=t("label",{class:"form-label fw-semibold text-dark"},[t("i",{class:"fas fa-concierge-bell me-2 text-muted"}),_("Order Type ")],-1)),F(t("select",{"onUpdate:modelValue":l=>s.orderType=l,class:"form-select"},[e[12]||(e[12]=t("option",{value:""},"All",-1)),(d(!0),n(x,null,O(C.value.orderTypeOptions,l=>(d(),n("option",{key:l.value,value:l.value},o(l.label),9,Ut))),128))],8,zt),[[Q,s.orderType]])]),t("div",Ht,[e[15]||(e[15]=t("label",{class:"form-label fw-semibold text-dark"},[t("i",{class:"fas fa-credit-card me-2 text-muted"}),_("Payment Type ")],-1)),F(t("select",{"onUpdate:modelValue":l=>s.paymentType=l,class:"form-select"},[e[14]||(e[14]=t("option",{value:""},"All",-1)),(d(!0),n(x,null,O(C.value.paymentTypeOptions,l=>(d(),n("option",{key:l.value,value:l.value},o(l.label),9,Kt))),128))],8,Gt),[[Q,s.paymentType]])])]),_:1},8,["modelValue","sort-options","status-options"]),e[16]||(e[16]=t("div",{class:"dropdown"},[t("button",{class:"btn btn-outline-secondary rounded-pill px-4 dropdown-toggle","data-bs-toggle":"dropdown"}," Export "),t("ul",{class:"dropdown-menu dropdown-menu-end shadow rounded-4 py-2"},[t("li",null,[t("a",{class:"dropdown-item py-2",href:"javascript:void(0)"},"Export as PDF")]),t("li",null,[t("a",{class:"dropdown-item py-2",href:"javascript:void(0)"},"Export as Excel")])])],-1))])]),t("div",Qt,[t("table",Yt,[e[19]||(e[19]=t("thead",{class:"border-top small text-muted"},[t("tr",null,[t("th",{style:{width:"70px"}},"S. #"),t("th",null,"Table No."),t("th",null,"Order Type"),t("th",null,"Date"),t("th",null,"Time"),t("th",null,"Customer"),t("th",null,"Payment Type"),t("th",null,"Actual Price"),t("th",null,"Promo Discount"),t("th",null,"Promo Name"),t("th",null,"Total"),t("th",{class:"text-center"},"Actions")])],-1)),t("tbody",null,[(d(!0),n(x,null,O(Z.value,(s,l)=>(d(),n("tr",{key:s.id},[t("td",null,o(l+1),1),t("td",null,o(s.type?.table_number??"-"),1),t("td",null,o(s.type?.order_type??"-"),1),t("td",null,o(v(A)(s.created_at)),1),t("td",null,o(E(s.created_at)),1),t("td",null,o(s.customer_name??"-"),1),t("td",null,[t("span",{class:"cursor-pointer",onClick:i=>at(s.payment)},o(s.payment?.payment_type??"-"),9,Zt)]),t("td",null,o(v(b)(s.sub_total??0)),1),t("td",Wt," -"+o(v(b)(s.promo?.discount_amount??0)),1),t("td",null,o(s.promo?.promo_name||"-"),1),t("td",null,o(v(b)(s.total_amount)),1),t("td",Jt,[t("button",{onClick:i=>lt(s),"data-bs-toggle":"modal","data-bs-target":"#viewItemModal",title:"View Item",class:"p-2 rounded-full text-primary hover:bg-gray-100"},[T(v(gt),{class:"w-4 h-4"})],8,Xt)])]))),128)),I.value.length===0?(d(),n("tr",te,[...e[18]||(e[18]=[t("td",{colspan:"11",class:"text-center text-muted py-4"}," No orders found. ",-1)])])):y("",!0)])])])])]),t("div",ee,[t("div",se,[t("div",ae,[e[29]||(e[29]=t("div",{class:"modal-header border-0 text-black"},[t("h6",{class:"modal-title fw-semibold"},[t("i",{class:"bi bi-credit-card me-2"}),_(" Payment Details ")]),t("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-danger",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])])],-1)),t("div",le,[t("div",oe,[t("div",ne,[t("div",de,[t("div",ie,[e[20]||(e[20]=t("span",{class:"label"},"Payment Type",-1)),t("span",re,o(c.value?.payment_type??"-"),1)])]),t("div",ce,[t("div",ue,[e[21]||(e[21]=t("span",{class:"label"},"Amount Received",-1)),t("span",me,o(M(c.value?.amount_received)),1)])]),c.value?.payment_type==="Split"?(d(),n("div",pe,[t("div",ve,[e[22]||(e[22]=t("span",{class:"label"},"Cash Amount",-1)),t("span",ye,o(M(c.value?.cash_amount)),1)])])):y("",!0),c.value?.payment_type==="Split"?(d(),n("div",be,[t("div",he,[e[23]||(e[23]=t("span",{class:"label"},"Card Amount",-1)),t("span",_e,o(M(c.value?.card_amount)),1)])])):y("",!0),t("div",we,[t("div",fe,[e[24]||(e[24]=t("span",{class:"label"},"Payment Date",-1)),t("span",ge,o(j(c.value?.payment_date)),1)])]),c.value?.brand?(d(),n("div",xe,[t("div",Ce,[e[25]||(e[25]=t("span",{class:"label"},"Card Brand",-1)),t("span",$e,o(c.value.brand),1)])])):y("",!0),c.value?.last_digits?(d(),n("div",ke,[t("div",De,[e[26]||(e[26]=t("span",{class:"label"},"Last 4 Digits",-1)),t("span",Te,"**** **** **** "+o(c.value.last_digits),1)])])):y("",!0),c.value?.exp_month?(d(),n("div",Oe,[t("div",Pe,[e[27]||(e[27]=t("span",{class:"label"},"Expiry",-1)),t("span",Me,o(c.value.exp_month)+"/"+o(c.value.exp_year),1)])])):y("",!0),c.value?.currency_code?(d(),n("div",Se,[t("div",Fe,[e[28]||(e[28]=t("span",{class:"label"},"Currency",-1)),t("span",Ae,o(c.value.currency_code),1)])])):y("",!0)])])])])])]),t("div",Ne,[t("div",Le,[t("div",Ie,[t("div",je,[t("div",Ee,[e[30]||(e[30]=t("span",{class:"badge bg-gradient rounded-circle p-3 shadow-sm",style:{background:`linear-gradient(
                                            135deg,
                                            #4e73df,
                                            #224abe
                                        )`}},[t("i",{class:"bi bi-receipt fs-5 text-black"})],-1)),t("div",qe,[t("h5",Be," Order #"+o(m.value?.id),1),t("small",Ve," Customer: "+o(m.value?.customer_name??"—"),1)])]),e[31]||(e[31]=t("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])],-1))]),t("div",Re,[m.value?(d(),n("div",ze,[t("div",Ue,[e[34]||(e[34]=t("h6",{class:"fw-bold mb-3 text-primary"}," Order Details ",-1)),t("div",He,[t("div",Ge,[e[32]||(e[32]=t("span",{class:"fw-semibold text-dark"},"Order Type:",-1)),_(" "+o(m.value?.type?.order_type??"—"),1)]),t("div",Ke,[e[33]||(e[33]=t("span",{class:"fw-semibold text-dark"},"Date:",-1)),_(" "+o(v(A)(m.value?.created_at)),1)])])]),e[43]||(e[43]=t("h6",{class:"fw-bold mb-3 text-primary"}," Order Items ",-1)),t("div",Qe,[t("table",Ye,[e[42]||(e[42]=t("thead",{class:"bg-light text-muted small"},[t("tr",null,[t("th",{class:"px-3"},"#"),t("th",null,"Item"),t("th",null,"Qty"),t("th",null,"Actual Price"),t("th",null,"Promo Discount"),t("th",null,"Promo Name"),t("th",null,"Total Price")])],-1)),t("tbody",null,[(d(!0),n(x,null,O(m.value.items??[],(s,l)=>(d(),n("tr",{key:s.id},[t("td",Ze,o(l+1),1),t("td",null,o(s.title),1),t("td",null,o(s.quantity),1),t("td",We,o(v(b)(s.price)),1),e[35]||(e[35]=t("td",null,"-",-1)),t("td",null,o(m.value?.promo?.promo_name||"-"),1),t("td",Je,o(v(b)(s.price)),1)]))),128)),m.value.promo?(d(),n("tr",Xe,[e[36]||(e[36]=t("td",null,null,-1)),e[37]||(e[37]=t("td",null,null,-1)),e[38]||(e[38]=t("td",null,null,-1)),e[39]||(e[39]=t("td",{colspan:"3",class:"text-end text-muted"}," Promo Discount ",-1)),t("td",ts," -"+o(v(b)(m.value.promo.discount_amount)),1)])):y("",!0),t("tr",null,[e[40]||(e[40]=t("td",{colspan:"6",rowspan:"2",class:"text-end fw-bold"},"Grand Total",-1)),t("td",es,o(v(b)(m.value.total_amount)),1)]),(m.value.items??[]).length===0?(d(),n("tr",ss,[...e[41]||(e[41]=[t("td",{colspan:"7",class:"text-center text-muted py-4"}," No items found ",-1)])])):y("",!0)])])])])):y("",!0)]),t("div",as,[e[45]||(e[45]=t("button",{class:"btn btn-secondary px-2 py-2","data-bs-dismiss":"modal"}," Close ",-1)),q.value.length>0?(d(),n("button",{key:0,class:"btn btn-primary shadow-sm rounded-pill px-4 py-2",onClick:e[3]||(e[3]=s=>ot(m.value))},[...e[44]||(e[44]=[t("i",{class:"bi bi-printer me-1"},null,-1),_(" Print Receipt ",-1)])])):y("",!0)])])])])])]),_:1})],64))}},ys=vt(ls,[["__scopeId","data-v-66338414"]]);export{ys as default};
