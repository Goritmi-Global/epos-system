import{_ as V,r as A,y as O,c as y,o as R,f as o,b as d,e as l,l as i,m as n,t as c,i as I,F as v,g as p,k as m,Y as T,T as k,v as b,H as $}from"./app-DOXFdmcK.js";const U={key:0,class:"ms-1 badge bg-primary rounded-pill"},D=["id"],E={class:"modal-content rounded-4"},L={class:"modal-header border-0 pb-2"},N={class:"modal-title fw-bold",id:"filterModalLabel"},j={class:"modal-body pt-4"},P={class:"row g-3"},z={key:0,class:"col-12"},H={class:"row g-2"},Z={class:"form-check"},Y=["id","value"],q=["for"],G={key:1,class:"col-md-6"},J=["value"],Q={key:2,class:"col-md-6"},W=["value"],X={key:3,class:"col-md-6"},_=["value"],K={key:4,class:"col-md-6"},ee={class:"row g-2"},le={class:"col-6"},te={class:"col-6"},ae={key:5,class:"col-12"},se={class:"row g-2"},oe={class:"col-md-6"},de={class:"col-md-6"},ue={key:6,class:"col-12"},ie={key:0,class:"mt-3"},re={class:"d-flex flex-wrap gap-1"},ne=["onClick"],ce={__name:"FilterModal",props:{modelValue:{type:Object,default:()=>({})},title:{type:String,default:"Items"},modalId:{type:String,default:"filterModal"},modalSize:{type:String,default:"modal-lg",validator:u=>["modal-sm","modal-lg","modal-xl"].includes(u)},sortOptions:{type:Array,default:()=>[{value:"stock_desc",label:"Stock: High to Low"},{value:"stock_asc",label:"Stock: Low to High"},{value:"name_asc",label:"Name: A to Z"},{value:"name_desc",label:"Name: Z to A"}]},categories:{type:Array,default:()=>[]},suppliers:{type:Array,default:()=>[]},stockStatusOptions:{type:Array,default:()=>[{value:"in_stock",label:"In Stock"},{value:"low_stock",label:"Low Stock"},{value:"out_of_stock",label:"Out of Stock"},{value:"expired",label:"Expired"},{value:"near_expire",label:"Near Expiry"}]},showPriceRange:{type:Boolean,default:!1},showDateRange:{type:Boolean,default:!1},showCategory:{type:Boolean,default:!0},showStockStatus:{type:Boolean,default:!0}},emits:["update:modelValue","apply","clear"],setup(u,{emit:w}){const r=u,f=w,t=A({sortBy:"",category:"",supplier:"",stockStatus:"",priceMin:null,priceMax:null,dateFrom:"",dateTo:"",...r.modelValue});O(()=>r.modelValue,s=>{t.value={...t.value,...s}},{deep:!0});const g=y(()=>Object.values(t.value).some(s=>s!==""&&s!==null&&s!==void 0)),M=y(()=>Object.values(t.value).filter(s=>s!==""&&s!==null&&s!==void 0).length),h=y(()=>{const s=[];if(t.value.sortBy){const e=r.sortOptions.find(a=>a.value===t.value.sortBy);s.push({key:"sortBy",label:"Sort",value:e?.label||t.value.sortBy})}if(t.value.category){const e=r.categories.find(a=>(a.id||a.value)===t.value.category);s.push({key:"category",label:"Category",value:e?.name||e?.label||t.value.category})}if(t.value.supplier){const e=r.suppliers.find(a=>(a.id||a.value)===t.value.supplier);s.push({key:"supplier",label:"Supplier",value:e?.name||e?.label||t.value.supplier})}if(t.value.stockStatus){const e=r.stockStatusOptions.find(a=>a.value===t.value.stockStatus);s.push({key:"stockStatus",label:"Stock Status",value:e?.label||t.value.stockStatus})}return(t.value.priceMin||t.value.priceMax)&&s.push({key:"priceRange",label:"Price",value:`${t.value.priceMin||0} - ${t.value.priceMax||"âˆž"}`}),(t.value.dateFrom||t.value.dateTo)&&s.push({key:"dateRange",label:"Date",value:`${t.value.dateFrom||"..."} - ${t.value.dateTo||"..."}`}),s}),F=()=>{const s=document.getElementById(r.modalId);s&&new bootstrap.Modal(s).show()},B=()=>{f("update:modelValue",{...t.value}),f("apply",{...t.value});const s=document.getElementById(r.modalId);s&&bootstrap.Modal.getInstance(s)?.hide()},x=()=>{t.value={sortBy:"",category:"",supplier:"",stockStatus:"",priceMin:null,priceMax:null,dateFrom:"",dateTo:""},f("update:modelValue",{...t.value}),f("clear")},C=s=>{s==="priceRange"?(t.value.priceMin=null,t.value.priceMax=null):s==="dateRange"?(t.value.dateFrom="",t.value.dateTo=""):t.value[s]=""};return R(()=>{t.value={...t.value,...r.modelValue}}),(s,e)=>(d(),o("div",null,[l("button",{class:"btn btn-outline-secondary rounded-pill px-4",onClick:F},[e[8]||(e[8]=l("i",{class:"fas fa-filter me-2"},null,-1)),e[9]||(e[9]=i(" Filter ",-1)),g.value?(d(),o("span",U,c(M.value),1)):n("",!0)]),l("div",{id:u.modalId,class:"modal fade",tabindex:"-1","aria-labelledby":"filterModalLabel","aria-hidden":"true"},[l("div",{class:I(["modal-dialog modal-dialog-centered",u.modalSize])},[l("div",E,[l("div",L,[l("h5",N,[e[10]||(e[10]=l("i",{class:"fas fa-filter text-primary me-2"},null,-1)),i(" Filter "+c(u.title),1)]),l("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:x},[...e[11]||(e[11]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),l("div",j,[l("div",P,[u.sortOptions?.length?(d(),o("div",z,[e[12]||(e[12]=l("label",{class:"form-label fw-semibold text-dark"},[l("i",{class:"fas fa-sort me-2 text-muted"}),i("Sort By ")],-1)),l("div",H,[(d(!0),o(v,null,p(u.sortOptions,a=>(d(),o("div",{key:a.value,class:"col-6"},[l("div",Z,[m(l("input",{id:`sort-${a.value}`,"onUpdate:modelValue":e[0]||(e[0]=S=>t.value.sortBy=S),class:"form-check-input",type:"radio",value:a.value},null,8,Y),[[T,t.value.sortBy]]),l("label",{for:`sort-${a.value}`,class:"form-check-label small"},c(a.label),9,q)])]))),128))])])):n("",!0),u.showCategory&&u.categories?.length?(d(),o("div",G,[e[14]||(e[14]=l("label",{class:"form-label fw-semibold text-dark"},[l("i",{class:"fas fa-tags me-2 text-muted"}),i("Category ")],-1)),m(l("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.category=a),class:"form-select"},[e[13]||(e[13]=l("option",{value:""},"All Categories",-1)),(d(!0),o(v,null,p(u.categories,a=>(d(),o("option",{key:a.id||a.value,value:a.id||a.value},c(a.name||a.label),9,J))),128))],512),[[k,t.value.category]])])):n("",!0),u.showStockStatus&&u.stockStatusOptions?.length?(d(),o("div",Q,[e[16]||(e[16]=l("label",{class:"form-label fw-semibold text-dark"},[l("i",{class:"fas fa-boxes me-2 text-muted"}),i("Stock Status ")],-1)),m(l("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.stockStatus=a),class:"form-select"},[e[15]||(e[15]=l("option",{value:""},"All Status",-1)),(d(!0),o(v,null,p(u.stockStatusOptions,a=>(d(),o("option",{key:a.value,value:a.value},c(a.label),9,W))),128))],512),[[k,t.value.stockStatus]])])):n("",!0),u.suppliers?.length?(d(),o("div",X,[e[18]||(e[18]=l("label",{class:"form-label fw-semibold text-dark"},[l("i",{class:"fas fa-truck me-2 text-muted"}),i("Supplier ")],-1)),m(l("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.supplier=a),class:"form-select"},[e[17]||(e[17]=l("option",{value:""},"All Suppliers",-1)),(d(!0),o(v,null,p(u.suppliers,a=>(d(),o("option",{key:a.id||a.value,value:a.id||a.value},c(a.name||a.label),9,_))),128))],512),[[k,t.value.supplier]])])):n("",!0),u.showPriceRange?(d(),o("div",K,[e[19]||(e[19]=l("label",{class:"form-label fw-semibold text-dark"},[l("i",{class:"fas fa-dollar-sign me-2 text-muted"}),i("Price Range ")],-1)),l("div",ee,[l("div",le,[m(l("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.priceMin=a),type:"number",class:"form-control",placeholder:"Min",min:"0",step:"0.01"},null,512),[[b,t.value.priceMin,void 0,{number:!0}]])]),l("div",te,[m(l("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.priceMax=a),type:"number",class:"form-control",placeholder:"Max",min:"0",step:"0.01"},null,512),[[b,t.value.priceMax,void 0,{number:!0}]])])])])):n("",!0),u.showDateRange?(d(),o("div",ae,[e[20]||(e[20]=l("label",{class:"form-label fw-semibold text-dark"},[l("i",{class:"fas fa-calendar-alt me-2 text-muted"}),i("Date Range ")],-1)),l("div",se,[l("div",oe,[m(l("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.dateFrom=a),type:"date",class:"form-control"},null,512),[[b,t.value.dateFrom]])]),l("div",de,[m(l("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.dateTo=a),type:"date",class:"form-control"},null,512),[[b,t.value.dateTo]])])])])):n("",!0),s.$slots.customFilters?(d(),o("div",ue,[$(s.$slots,"customFilters",{filters:t.value},void 0,!0)])):n("",!0)]),g.value?(d(),o("div",ie,[e[21]||(e[21]=l("small",{class:"text-muted d-block mb-2"},"Active Filters:",-1)),l("div",re,[(d(!0),o(v,null,p(h.value,a=>(d(),o("span",{key:a.key,class:"badge bg-primary bg-opacity-10 text-primary px-2 py-1 rounded-pill"},[i(c(a.label)+": "+c(a.value)+" ",1),l("i",{class:"fas fa-times ms-1 cursor-pointer",onClick:S=>C(a.key)},null,8,ne)]))),128))])])):n("",!0)]),l("div",{class:"modal-footer border-0 pt-0"},[l("div",{class:"w-100 d-flex gap-2"},[l("button",{type:"button",class:"px-4 py-2 rounded-pill btn btn-primary text-white text-center",onClick:B},[...e[22]||(e[22]=[l("i",{class:"fas fa-check me-2"},null,-1),i("Apply ",-1)])]),l("button",{type:"button",class:"btn btn-secondary rounded-pill px-2 py-2",onClick:x},[...e[23]||(e[23]=[l("i",{class:"fas fa-undo me-2"},null,-1),i("Clear ",-1)])])])])])],2)],8,D)]))}},ve=V(ce,[["__scopeId","data-v-d8f2a554"]]);export{ve as F};
