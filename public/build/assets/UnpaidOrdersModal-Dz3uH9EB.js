import{_ as j,c as M,g as n,b as a,f as t,l as g,p as d,F as y,i as P,j as w,t as l,u as b,y as B,K as D}from"./app-DFa9wJfT.js";import{u as O}from"./useFormatters-B_Oq-Qyw.js";const z={class:"modal-dialog modal-xl modal-dialog-scrollable"},N={class:"modal-content rounded-4 border-0 shadow-lg"},S={class:"modal-header border-0 bg-info bg-opacity-10"},T={class:"modal-body p-4"},F={key:0,class:"text-center py-5"},L={key:1,class:"text-center py-5"},I={key:2,class:"row g-3"},U={class:"card shadow-sm border-warning border-2 hover-shadow h-100"},V={class:"card-body p-3"},A={class:"d-flex align-items-start gap-3"},R={class:"flex-grow-1"},W={class:"fw-bold mb-1 pe-5"},E={class:"badge ms-1",style:{"background-color":"#1C0D82",padding:"4px 8px","border-radius":"6px","font-size":"0.75rem"}},H={key:0,class:"badge bg-info ms-1",style:{"font-size":"0.75rem"}},K={class:"text-muted small mb-3"},q={class:"bg-light p-2 rounded-3 mb-3"},G={class:"d-flex justify-content-between align-items-center mb-1"},J={class:"fw-semibold small text-dark"},Q={class:"d-flex justify-content-between align-items-center mb-1"},X={class:"fw-semibold small text-success"},Y={class:"border-top pt-1 mt-1 d-flex justify-content-between align-items-center"},Z={class:"fw-bold text-danger"},tt={class:"d-flex gap-2"},st=["onClick"],et=["onClick"],ot={class:"modal-footer border-0"},nt={key:0,class:"modal-backdrop fade show"},at={__name:"UnpaidOrdersModal",props:{show:Boolean,pendingOrders:{type:Array,default:()=>[]},loading:Boolean},emits:["close","pay-now","reject"],setup(i,{emit:v}){const{formatCurrencySymbol:m}=O(),x=i,_=v,h=o=>{const s=new Date,e=new Date(o),u=s-e,r=Math.floor(u/6e4);if(r<1)return"just now";if(r<60)return`${r} min${r>1?"s":""} ago`;const c=Math.floor(r/60);if(c<24)return`${c} hour${c>1?"s":""} ago`;const p=Math.floor(c/24);return`${p} day${p>1?"s":""} ago`},f=M(()=>x.pendingOrders.filter(o=>o.type==="unpaid")),k=o=>o.payment_status==="partial"?"bg-warning":"bg-danger",C=o=>o.payment_status==="partial"?"Partially Paid":"Payment Pending",$=o=>{confirm(`Are you sure you want to reject order for "${o.customer_name||"Walk In"}"? This action cannot be undone.`)&&_("reject",o)};return(o,s)=>(a(),n(y,null,[t("div",{class:w(["modal fade",{show:i.show,"d-block":i.show}]),style:D({display:i.show?"block":"none"}),tabindex:"-1",onClick:s[2]||(s[2]=B(e=>o.$emit("close"),["self"]))},[t("div",z,[t("div",N,[t("div",S,[s[4]||(s[4]=t("div",null,[t("h5",{class:"fw-bold mb-0"},[t("i",{class:"bi bi-credit-card-fill text-info me-2"}),d(" Unpaid Orders ")]),t("small",{class:"text-muted"},"Pay Later and Partially Paid Orders")],-1)),t("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:s[0]||(s[0]=e=>o.$emit("close"))},[...s[3]||(s[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",T,[i.loading?(a(),n("div",F,[...s[5]||(s[5]=[t("div",{class:"spinner-border text-info",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),t("p",{class:"mt-3 text-muted"},"Fetching unpaid orders...",-1)])])):f.value.length===0?(a(),n("div",L,[...s[6]||(s[6]=[t("i",{class:"bi bi-inbox",style:{"font-size":"4rem",opacity:"0.2"}},null,-1),t("p",{class:"mt-3 text-muted fw-semibold"},"No unpaid orders found",-1)])])):(a(),n("div",I,[(a(!0),n(y,null,P(f.value,e=>(a(),n("div",{key:e.id,class:"col-md-4 col-sm-6"},[t("div",U,[t("span",{class:w(["badge position-absolute top-0 end-0 m-2",k(e)])},[s[7]||(s[7]=t("i",{class:"bi bi-credit-card me-1"},null,-1)),d(" "+l(C(e)),1)],2),t("div",V,[t("div",A,[t("div",R,[t("h6",W,[d(l(e.customer_name||"Walk In")+" ",1),t("span",E,l(e.order_type.replace("_"," ")),1),e.table_number?(a(),n("span",H,l(e.table_number),1)):g("",!0)]),t("p",K,[s[8]||(s[8]=t("i",{class:"bi bi-clock me-1"},null,-1)),d(" Created "+l(h(e.created_at)),1)]),t("div",q,[t("div",G,[s[9]||(s[9]=t("span",{class:"text-muted extra-small"},"Total:",-1)),t("span",J,l(b(m)(e.total_amount)),1)]),t("div",Q,[s[10]||(s[10]=t("span",{class:"text-muted extra-small"},"Paid:",-1)),t("span",X,l(b(m)(e.total_paid||0)),1)]),t("div",Y,[s[11]||(s[11]=t("span",{class:"fw-bold text-danger extra-small"},"Due:",-1)),t("span",Z,l(b(m)(e.remaining_balance||e.total_amount)),1)])]),t("div",tt,[t("button",{class:"btn btn-success btn-sm flex-fill d-flex align-items-center justify-content-center gap-2 py-2",onClick:u=>o.$emit("pay-now",e)},[...s[12]||(s[12]=[t("i",{class:"bi bi-credit-card-fill"},null,-1),d(" Pay Now ",-1)])],8,st),t("button",{class:"btn btn-danger btn-sm flex-fill d-flex align-items-center justify-content-center gap-2 py-2",onClick:u=>$(e)},[...s[13]||(s[13]=[t("i",{class:"bi bi-trash-fill"},null,-1),d(" Delete ",-1)])],8,et)])])])])])]))),128))]))]),t("div",ot,[t("button",{type:"button",class:"btn btn-secondary px-4 py-2",onClick:s[1]||(s[1]=e=>o.$emit("close"))}," Close ")])])])],6),i.show?(a(),n("div",nt)):g("",!0)],64))}},dt=j(at,[["__scopeId","data-v-776ad903"]]);export{dt as default};
