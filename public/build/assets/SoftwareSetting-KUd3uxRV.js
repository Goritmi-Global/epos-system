import{_ as j,a as M,b as u,d as E,g as m,l as H,f as e,t as y,V as q,r as c,c as k,e as R,p as b,F as O,i as F,y as X,j as T,k as G,q as K,s as d}from"./app-DR8KNMKR.js";import W from"./Step1-DFbhm7pS.js";import J from"./Step2-DnfR4A1W.js";import U from"./Step3-C0mCkptL.js";import Y from"./Step4-DIxIg4ai.js";import Q from"./Step5-CMcIKxOp.js";import Z from"./Step6-CdPnKcFC.js";import ee from"./Step7-CiO0rIXP.js";import te from"./Step8-Che1D1Wf.js";import se from"./Step9-CkfEVBZd.js";import{P as oe}from"./PasswordVerificationModal-CwsPs3Zr.js";import"./index-D-wNi1xB.js";import"./index-YIqX59W4.js";import"./index-D1-aYu0b.js";import"./index-Dwzhpvva.js";import"./index-BOMKKwwB.js";import"./index-nqZoyhBR.js";import"./useFormatters-DMXCh6bx.js";const ae={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},ne={class:"bg-white rounded-xl shadow-xl w-full max-w-md p-6 animate-drop-in relative"},ie={class:"text-center text-lg font-medium text-gray-800 mb-2"},re={class:"text-center text-sm text-gray-500 mb-6"},le={key:0,class:"flex justify-center mb-4"},ce={key:1,class:"flex justify-center gap-3"},de={__name:"RestoreModal",props:{title:{type:String,default:"Restore System"},message:{type:String,default:"Are you sure you want to restore the system? This will delete all orders, payments, purchases, and shifts data. This action cannot be undone!"},show:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},emits:["confirm","cancel"],setup(f,{emit:a}){const o=a,v=()=>o("confirm"),p=()=>o("cancel");return(n,i)=>(u(),M(q,{name:"fade-slide"},{default:E(()=>[f.show?(u(),m("div",ae,[e("div",ne,[e("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110",onClick:p,title:"Close"},[...i[0]||(i[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])]),i[2]||(i[2]=e("div",{class:"flex justify-center mb-4"},[e("div",{class:"bg-yellow-100 p-3 rounded-full"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])])],-1)),e("h3",ie,y(f.title),1),e("p",re,y(f.message),1),f.isLoading?(u(),m("div",le,[...i[1]||(i[1]=[e("div",{class:"spinner-border text-danger",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)])])):(u(),m("div",ce,[e("button",{onClick:v,class:"btn btn-danger d-flex align-items-center gap-1 px-3 py-2 rounded-pill text-white"}," Yes, Restore "),e("button",{onClick:p,class:"btn btn-secondary d-flex align-items-center gap-1 px-3 py-2 rounded-pill text-white"}," Cancel ")]))])])):H("",!0)]),_:1}))}},ue=j(de,[["__scopeId","data-v-4fd1059f"]]),pe={class:"settings-wrapper"},me={class:"settings-sidebar-horizontal mb-3"},fe={class:"settings-nav-horizontal shadow-sm rounded-4 p-3"},ve={class:"nav-horizontal-container"},ge={class:"nav nav-pills nav-horizontal gap-2"},he=["onClick"],be={class:"fw-semibold small"},ye={class:"row g-0"},we={class:"col-12"},_e={class:"card shadow-sm border-0 rounded-4"},xe={class:"card-header border-0 p-4"},Se={class:"d-flex align-items-start gap-3"},Ce={class:"icon-wrapper"},ke={class:"flex-grow-1"},Te={class:"mb-1 fw-bold"},Re={class:"text-muted small mb-0"},Oe={class:"card-body p-4 settings-content"},je={class:"card-footer bg-light border-0 p-4"},Me={class:"d-flex justify-content-between align-items-center"},De=["disabled"],Be={key:0},Pe={key:1},Ie={__name:"SoftwareSetting",props:{profile:Object,profileData:Object},setup(f){const a=f,o=c(1),v=c({}),p=c(!1),n=c({...a.profileData.step1,...a.profileData.step2,...a.profileData.step3,...a.profileData.step4,...a.profileData.step5,...a.profileData.step6,...a.profileData.step7,...a.profileData.step8,...a.profileData.step9}),i=c(!1),w=c(!1),_=c(!1),h=c(!1),g=c(""),D=()=>{i.value=!0},B=()=>{i.value=!1,w.value=!0,g.value=""},P=async t=>{h.value=!0,g.value="";try{const r=await(await fetch(route("settings.verify-password"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({password:t})})).json();if(!r.success){g.value=r.message,h.value=!1;return}h.value=!1,w.value=!1,g.value="",_.value=!0;const l=await fetch(route("settings.restore"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const C=await l.json();C.success===!0?(d.success(C.message,{autoClose:3e3,position:d.POSITION.BOTTOM_RIGHT}),setTimeout(()=>{window.location.reload()},1500)):d.error(C.message,{autoClose:4e3,position:d.POSITION.BOTTOM_RIGHT})}catch(s){console.error("Error:",s),d.error("An error occurred while restoring the system.",{autoClose:4e3,position:d.POSITION.BOTTOM_RIGHT})}finally{h.value=!1,_.value=!1}},I=()=>{w.value=!1,g.value=""},L=()=>{i.value=!1},x=[{id:1,title:"Language & Location",icon:"bi-globe",description:"Set your timezone, language, and regional preferences"},{id:2,title:"Business Information",icon:"bi-building",description:"Update restaurant name, contact details, and address"},{id:3,title:"Currency & Locale",icon:"bi-currency-dollar",description:"Configure currency, number and date formats"},{id:4,title:"Tax & VAT",icon:"bi-receipt",description:"Manage tax registration and rates"},{id:5,title:"Service Options",icon:"bi-cart-check",description:"Configure order types and table management"},{id:6,title:"Receipt & Printers",icon:"bi-printer",description:"Customize receipts and printer settings"},{id:7,title:"Payment Methods",icon:"bi-credit-card",description:"Enable and configure payment options"},{id:8,title:"Business Hours",icon:"bi-clock",description:"Set your operating hours"},{id:9,title:"Advanced Features",icon:"bi-gear",description:"Advanced features and settings"}],A={1:W,2:J,3:U,4:Y,5:Q,6:Z,7:ee,8:te,9:se},V=k(()=>A[o.value]),S=k(()=>x.find(t=>t.id===o.value));k(()=>o.value/x.length*100);const $=t=>{Object.assign(n.value,t?.data||{})};async function z(){v.value={},p.value=!0;try{let t,s={};o.value===2&&n.value.logo_file||o.value===6&&n.value.receipt_logo_file?(t=new FormData,Object.keys(n.value).forEach(l=>{n.value[l]!==null&&n.value[l]!==void 0&&t.append(l,n.value[l])}),s.headers={"Content-Type":"multipart/form-data"}):t=n.value;const{data:r}=await K.post(`/settings/update/${o.value}`,t,s);Object.assign(n.value,r.data||{}),d.success("Settings updated successfully!")}catch(t){t?.response?.status===422&&t.response.data?.errors?(v.value=t.response.data.errors,d.error("Please fix the validation errors.")):(d.error(t.response?.data?.message||"An unexpected error occurred."),console.error(t))}finally{p.value=!1}}function N(t){v.value={},o.value=t}return(t,s)=>(u(),m(O,null,[e("div",pe,[e("div",{class:"settings-header mb-2 px-2"},[e("div",{class:"d-flex justify-content-between align-items-center"},[s[1]||(s[1]=e("div",null,[e("h3",{class:"fw-bold mb-0"},"Restaurant Settings")],-1)),e("div",null,[e("button",{onClick:D,class:"btn btn-danger d-flex align-items-center gap-2 px-3 py-2 rounded-pill"},[...s[0]||(s[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),b(" Restore System ",-1)])])])])]),e("div",me,[e("div",fe,[s[2]||(s[2]=e("div",{class:"mb-3"},[e("h6",{class:"text-muted text-uppercase small fw-bold mb-3"},[e("i",{class:"bi bi-gear-fill me-2"}),b(" Settings ")])],-1)),e("div",ve,[e("ul",ge,[(u(),m(O,null,F(x,r=>e("li",{class:"nav-item",key:r.id},[e("a",{class:T(["nav-link-horizontal d-flex align-items-center gap-2 py-2 px-4",{active:o.value===r.id}]),onClick:X(l=>N(r.id),["prevent"]),href:"#",role:"button"},[e("i",{class:T(r.icon)},null,2),e("span",be,y(r.title),1)],10,he)])),64))])])])]),e("div",ye,[e("div",we,[e("div",_e,[e("div",xe,[e("div",Se,[e("div",Ce,[e("i",{class:T([S.value?.icon,"fs-3"])},null,2)]),e("div",ke,[e("h5",Te,y(S.value?.title),1),e("p",Re,y(S.value?.description),1)])])]),e("div",Oe,[(u(),M(G(V.value),{key:o.value,model:n.value,"form-errors":v.value,onSave:$},null,40,["model","form-errors"]))]),e("div",je,[e("div",Me,[s[5]||(s[5]=e("small",{class:"text-muted"},[e("i",{class:"bi bi-info-circle me-1"}),b(" Changes will be saved immediately ")],-1)),e("button",{class:"btn btn-primary px-4 rounded-pill",onClick:z,disabled:p.value},[p.value?(u(),m("span",Be,[...s[3]||(s[3]=[e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),b(" Saving... ",-1)])])):(u(),m("span",Pe,[...s[4]||(s[4]=[e("i",{class:"bi bi-check-circle me-2"},null,-1),b(" Save Changes ",-1)])]))],8,De)])])])])])]),R(ue,{show:i.value,isLoading:!1,title:"Restore System",message:"Are you sure you want to restore the system? This will permanently delete all orders, payments, purchases, kitchen orders, and shifts data. This action cannot be undone!",onConfirm:B,onCancel:L},null,8,["show"]),R(oe,{show:w.value,isVerifying:h.value||_.value,errorMessage:g.value,onConfirm:P,onCancel:I},null,8,["show","isVerifying","errorMessage"])],64))}},Ze=j(Ie,[["__scopeId","data-v-137aaeb5"]]);export{Ze as default};
