import{_ as k,g as n,b as o,f as s,l as u,p as c,F as m,i as y,t as i,u as _,y as x,K as C,j as $}from"./app-CCSEjIT4.js";import{u as j}from"./useFormatters-DQEMZb3n.js";const M={class:"modal-dialog modal-xl modal-dialog-scrollable"},O={class:"modal-content rounded-4 border-0 shadow-lg"},P={class:"modal-header border-0 bg-warning bg-opacity-10"},B={class:"modal-body p-4"},D={key:0,class:"text-center py-5"},N={key:1,class:"text-center py-5"},I={key:2,class:"row g-3"},L={class:"card shadow-sm border-warning border-2 hover-shadow"},R={class:"card-body p-3"},T={key:0,class:"badge bg-danger position-absolute top-0 end-0 m-2"},z={class:"align-items-center"},F={class:"col-lg-12"},H={class:"d-flex align-items-start gap-3"},S={class:"flex-grow-1"},V={class:"fw-bold mb-1"},A={class:"badge ms-2",style:{"background-color":"#1C0D82",padding:"8px","border-radius":"6px"}},W={key:0,class:"badge bg-info ms-1"},q={class:"text-muted small mb-2"},E={class:"mb-2"},K={class:"fw-semibold text-secondary"},U={class:"d-flex flex-wrap gap-1 mt-1"},G={key:0,class:"badge bg-secondary"},J={class:"fw-bold text-success fs-5"},Q={class:"d-flex gap-2 mt-2"},X=["onClick"],Y=["onClick"],Z=["onClick"],ss=["onClick"],ts={class:"modal-footer border-0"},es={key:0,class:"modal-backdrop fade show"},ns={__name:"PendingOrdersModal",props:{show:Boolean,pendingOrders:{type:Array,default:()=>[]},loading:Boolean},emits:["close","resume","reject","pay-now"],setup(a,{emit:p}){const{formatCurrencySymbol:h}=j(),v=p,w=l=>{const t=new Date,e=new Date(l),d=t-e,r=Math.floor(d/6e4);if(r<1)return"just now";if(r<60)return`${r} min${r>1?"s":""} ago`;const b=Math.floor(r/60);if(b<24)return`${b} hour${b>1?"s":""} ago`;const f=Math.floor(b/24);return`${f} day${f>1?"s":""} ago`},g=l=>{confirm(`Are you sure you want to reject order for "${l.customer_name||"Walk In"}"? This action cannot be undone.`)&&v("reject",l)};return(l,t)=>(o(),n(m,null,[s("div",{class:$(["modal fade",{show:a.show,"d-block":a.show}]),style:C({display:a.show?"block":"none"}),tabindex:"-1",onClick:t[2]||(t[2]=x(e=>l.$emit("close"),["self"]))},[s("div",M,[s("div",O,[s("div",P,[t[4]||(t[4]=s("div",null,[s("h5",{class:"fw-bold mb-0"},[s("i",{class:"bi bi-clock-history text-warning me-2"}),c(" Pending Orders ")]),s("small",{class:"text-muted"},"Hold and resume orders")],-1)),s("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:t[0]||(t[0]=e=>l.$emit("close"))},[...t[3]||(t[3]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s("div",B,[a.loading?(o(),n("div",D,[...t[5]||(t[5]=[s("div",{class:"spinner-border text-warning",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"mt-3 text-muted"},"Loading pending orders...",-1)])])):!a.loading&&(!a.pendingOrders||a.pendingOrders.length===0)?(o(),n("div",N,[...t[6]||(t[6]=[s("i",{class:"bi bi-inbox",style:{"font-size":"4rem",opacity:"0.2"}},null,-1),s("p",{class:"mt-3 text-muted fw-semibold"},"No pending orders",-1),s("p",{class:"text-muted small"},'Use "Pending" button to hold orders',-1)])])):(o(),n("div",I,[(o(!0),n(m,null,y(a.pendingOrders,e=>(o(),n("div",{key:e.id,class:"col-4"},[s("div",L,[s("div",R,[e.type==="unpaid"?(o(),n("span",T,[...t[7]||(t[7]=[s("i",{class:"bi bi-credit-card me-1"},null,-1),c(" Payment Pending ",-1)])])):u("",!0),s("div",z,[s("div",F,[s("div",H,[s("div",S,[s("h6",V,[c(i(e.customer_name||"Walk In")+" ",1),s("span",A,i(e.order_type.replace("_"," ")),1),e.table_number?(o(),n("span",W,i(e.table_number),1)):u("",!0)]),s("p",q,[t[8]||(t[8]=s("i",{class:"bi bi-clock me-1"},null,-1)),c(" "+i(e.type==="unpaid"?"Created":"Held")+" "+i(w(e.held_at)),1)]),s("div",E,[s("small",K,"Items ("+i(e.order_items.length)+"):",1),s("div",U,[(o(!0),n(m,null,y(e.order_items.slice(0,3),(d,r)=>(o(),n("span",{key:r,class:"badge bg-light text-dark border"},i(d.title)+" ("+i(d.quantity)+"x) ",1))),128)),e.order_items.length>3?(o(),n("span",G," +"+i(e.order_items.length-3)+" more ",1)):u("",!0)])]),s("div",J," Total: "+i(_(h)(e.total_amount)),1)])]),s("div",Q,[e.type==="unpaid"?(o(),n(m,{key:0},[s("button",{class:"btn btn-success btn-sm flex-fill d-flex align-items-center justify-content-center gap-2",onClick:d=>l.$emit("pay-now",e)},[...t[9]||(t[9]=[s("i",{class:"bi bi-credit-card-fill"},null,-1),c(" Pay Now ",-1)])],8,X),s("button",{class:"btn btn-danger btn-sm d-flex align-items-center justify-content-center",style:{width:"40px"},onClick:d=>g(e)},[...t[10]||(t[10]=[s("i",{class:"bi bi-trash"},null,-1)])],8,Y)],64)):(o(),n(m,{key:1},[s("button",{class:"btn btn-success btn-sm flex-fill d-flex align-items-center justify-content-center gap-2",onClick:d=>l.$emit("resume",e)},[...t[11]||(t[11]=[s("i",{class:"bi bi-play-fill"},null,-1),c(" Resume ",-1)])],8,Z),s("button",{class:"btn btn-danger btn-sm flex-fill d-flex align-items-center justify-content-center gap-2",onClick:d=>g(e)},[...t[12]||(t[12]=[s("i",{class:"bi bi-trash"},null,-1),c(" Reject ",-1)])],8,ss)],64))])])])])])]))),128))]))]),s("div",ts,[s("button",{type:"button",class:"btn btn-secondary px-2 py-2",onClick:t[1]||(t[1]=e=>l.$emit("close"))}," Close ")])])])],6),a.show?(o(),n("div",es)):u("",!0)],64))}},is=k(ns,[["__scopeId","data-v-410035d3"]]);export{is as default};
