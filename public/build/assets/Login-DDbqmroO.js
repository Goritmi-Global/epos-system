import{_ as F,s as U,r as u,y as T,o as y,z as q,q as b,n as z,A as D,f as r,b as a,d as A,e as t,a as j,m as c,u as i,h as O,B as G,F as $,g as H,i as P,t as f,l as k,x as K,k as V,v as Q,D as W}from"./app-DOXFdmcK.js";import{V as J}from"./VerifyOtpModal-DrOm0eFt.js";import{u as R,a as X}from"./index-CqytW5C1.js";const Y={class:"account-page"},Z={class:"main-wrapper"},ss={class:"account-content"},ts={class:"login-wrapper"},es={class:"login-content"},os={class:"login-userset"},ns={key:0,class:"pin-login-container"},is={class:"pin-display-container"},as={class:"pin-dots"},ls={key:0,class:"text-danger d-block text-center mt-2"},rs={class:"numeric-keypad"},ds={class:"keypad-row"},ps={class:"keypad-row"},us={class:"keypad-row"},cs={class:"keypad-row"},vs={key:1,class:"email-login-container"},ms={class:"form-login"},gs={class:"form-addons"},fs={key:0,class:"text-danger text-sm"},ys={class:"form-login"},bs={class:"pass-group"},ks=["type"],ws={key:0,class:"text-danger text-sm"},hs={class:"form-login"},xs={class:"alreadyuser"},Cs=["href"],_s={class:"form-login"},Es=["disabled"],Ls={key:0},Ts={key:1},Ds={key:0,class:"loading-overlay"},$s={__name:"Login",setup(Ps){const e=U({email:"",password:"",pin:"",remember:!1}),w=R(),I=X(w),v=u(!1),d=u("pin"),m=u(["","","",""]),l=o=>{e.pin.length<4&&(e.pin+=o,x())},h=()=>{e.pin.length>0&&(e.pin=e.pin.slice(0,-1),x())},g=()=>{e.pin="",m.value=["","","",""]},x=()=>{const o=e.pin.split("");m.value=["","","",""],o.forEach((s,n)=>{n<4&&(m.value[n]="â€¢")})};T(()=>e.pin,o=>{o.length===4&&d.value==="pin"&&setTimeout(()=>{_()},300)}),y(()=>{window.addEventListener("keydown",C)}),q(()=>{window.removeEventListener("keydown",C)});function C(o){const s=o.key;/^[0-9]$/.test(s)&&l(s),(s==="Backspace"||s==="Delete")&&h(),s.toLowerCase()==="r"&&g()}const _=()=>{e.post(route("login"),{preserveScroll:!0,onSuccess:()=>{},onError:o=>{o.unverified&&o.email_address&&(L.value=o.email_address,p.value=!0,b.warning(o.unverified)),e.errors.email=o.email,e.errors.password=o.password,e.errors.pin=o.pin,o.pin&&d.value==="pin"&&g()},onFinish:()=>{d.value==="email"&&e.reset("password")}})},E=()=>{document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(s=>{new bootstrap.Tooltip(s)})};T([()=>e.email,()=>e.pin],()=>{z(()=>E())}),y(()=>{w.value||I(!0),E()}),D();function S(){const o=D().props.flash||{};o.message&&b.success(o.message),o.error&&b.error(o.error)}y(()=>{S()});const p=u(!1),L=u(""),M=()=>{d.value="email",g(),e.clearErrors()},N=()=>{d.value="pin",e.email="",e.password="",e.clearErrors()};return(o,s)=>(a(),r($,null,[A(i(O),{title:"Login"}),t("div",Y,[t("div",Z,[t("div",ss,[t("div",ts,[t("div",es,[t("div",os,[s[25]||(s[25]=t("div",{class:"login-logo-wrapper mx-auto"},[t("div",{class:"login-logo"},[t("img",{src:"/assets/img/10x Global.png",alt:"img",class:"logo-img"})])],-1)),d.value==="pin"?(a(),r("div",ns,[s[18]||(s[18]=t("div",{class:"login-userheading text-center"},[t("h3",null,"Quick PIN Login"),t("p",{class:"text-muted"},"Enter your 4-digit PIN")],-1)),t("div",is,[t("div",as,[(a(!0),r($,null,H(m.value,(n,B)=>(a(),r("div",{key:B,class:P(["pin-dot",{filled:n}])},f(n),3))),128))]),i(e).errors.pin?(a(),r("span",ls,f(i(e).errors.pin),1)):c("",!0)]),t("div",rs,[t("div",ds,[t("button",{type:"button",class:"keypad-btn",onClick:s[0]||(s[0]=n=>l("1"))},"1"),t("button",{type:"button",class:"keypad-btn",onClick:s[1]||(s[1]=n=>l("2"))},"2"),t("button",{type:"button",class:"keypad-btn",onClick:s[2]||(s[2]=n=>l("3"))},"3")]),t("div",ps,[t("button",{type:"button",class:"keypad-btn",onClick:s[3]||(s[3]=n=>l("4"))},"4"),t("button",{type:"button",class:"keypad-btn",onClick:s[4]||(s[4]=n=>l("5"))},"5"),t("button",{type:"button",class:"keypad-btn",onClick:s[5]||(s[5]=n=>l("6"))},"6")]),t("div",us,[t("button",{type:"button",class:"keypad-btn",onClick:s[6]||(s[6]=n=>l("7"))},"7"),t("button",{type:"button",class:"keypad-btn",onClick:s[7]||(s[7]=n=>l("8"))},"8"),t("button",{type:"button",class:"keypad-btn",onClick:s[8]||(s[8]=n=>l("9"))},"9")]),t("div",cs,[t("button",{type:"button",class:"keypad-btn keypad-clear",onClick:g},[...s[15]||(s[15]=[t("i",{class:"fas fa-redo"},null,-1)])]),t("button",{type:"button",class:"keypad-btn",onClick:s[9]||(s[9]=n=>l("0"))},"0"),t("button",{type:"button",class:"keypad-btn keypad-delete",onClick:h},[...s[16]||(s[16]=[t("i",{class:"fas fa-backspace"},null,-1)])])])]),t("div",{class:"text-center mt-4"},[t("button",{type:"button",class:"btn-link-switch",onClick:M},[...s[17]||(s[17]=[t("i",{class:"fas fa-envelope me-2"},null,-1),k("Login with Email Instead ",-1)])])])])):(a(),r("div",vs,[s[24]||(s[24]=t("div",{class:"login-userheading"},[t("h3",null,"Sign In"),t("p",{class:"text-muted mb-4"},"Login with your credentials")],-1)),t("form",{onSubmit:K(_,["prevent"])},[t("div",ms,[s[20]||(s[20]=t("label",{class:"form-label"},"Email Address",-1)),t("div",gs,[V(t("input",{type:"email","onUpdate:modelValue":s[10]||(s[10]=n=>i(e).email=n),placeholder:"Enter your email address",class:"form-control"},null,512),[[Q,i(e).email]]),s[19]||(s[19]=t("img",{src:"/assets/img/icons/mail.svg",alt:"img"},null,-1))]),i(e).errors.email?(a(),r("span",fs,f(i(e).errors.email),1)):c("",!0)]),t("div",ys,[s[21]||(s[21]=t("label",{class:"form-label"},"Password",-1)),t("div",bs,[V(t("input",{type:v.value?"text":"password","onUpdate:modelValue":s[11]||(s[11]=n=>i(e).password=n),class:"pass-input form-control",placeholder:"Enter your password"},null,8,ks),[[W,i(e).password]]),t("span",{class:P(["fas toggle-password",v.value?"fa-eye":"fa-eye-slash"]),onClick:s[12]||(s[12]=n=>v.value=!v.value)},null,2)]),i(e).errors.password?(a(),r("span",ws,f(i(e).errors.password),1)):c("",!0)]),t("div",hs,[t("div",xs,[t("h4",null,[t("a",{href:o.route("password.request"),class:"hover-a"}," Forgot Password? ",8,Cs)])])]),t("div",_s,[t("button",{type:"submit",class:"btn btn-login",disabled:i(e).processing},[i(e).processing?(a(),r("span",Ls,[...s[22]||(s[22]=[t("i",{class:"fas fa-spinner fa-spin me-2"},null,-1),k("Signing In... ",-1)])])):(a(),r("span",Ts,"Sign In"))],8,Es)]),t("div",{class:"text-center mt-3"},[t("button",{type:"button",class:"btn-link-switch",onClick:N},[...s[23]||(s[23]=[t("i",{class:"fas fa-keyboard me-2"},null,-1),k("Use PIN Instead ",-1)])])])],32)]))])]),s[26]||(s[26]=G('<div class="login-img position-relative" data-v-c53fb527><img src="/assets/img/login.jpg" alt="img" class="w-100 h-100 object-fit-cover" data-v-c53fb527><div class="login-overlay text-center" data-v-c53fb527><div class="overlay-content" data-v-c53fb527><h1 class="restaurant-name" data-v-c53fb527>The Tasty House</h1><p class="restaurant-desc" data-v-c53fb527> Where taste meets comfort and every meal feels like home. </p></div></div></div>',1))])]),i(e).processing?(a(),r("div",Ds,[...s[27]||(s[27]=[t("div",{class:"spinner"},null,-1),t("p",{class:"loading-text"},"Logging you in...",-1)])])):c("",!0)])]),p.value?(a(),j(J,{key:0,open:p.value,email:L.value,onVerified:s[13]||(s[13]=()=>{p.value=!1,o.window.location.href=o.route("dashboard")}),onClosed:s[14]||(s[14]=()=>{p.value=!1})},null,8,["open","email"])):c("",!0)],64))}},Ms=F($s,[["__scopeId","data-v-c53fb527"]]);export{Ms as default};
