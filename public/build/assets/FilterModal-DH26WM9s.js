import{_ as D,r as T,w as E,c as k,o as I,E as L,g as o,b as i,f as t,p as r,l as c,t as m,j as g,F as f,i as b,m as p,Z as $,T as x,v as h,e as F,H as U,s as N}from"./app-DFa9wJfT.js";const P={key:0,class:"ms-1 badge bg-primary rounded-pill"},j=["id"],z={class:"modal-content rounded-4"},H={class:"modal-header border-0 pb-2"},Z={class:"modal-title fw-bold",id:"filterModalLabel"},_={class:"modal-body pt-4"},q={class:"row g-3"},G={key:0,class:"col-12"},J={class:"row g-2"},Q={class:"form-check"},W=["id","value"],X=["for"],Y={key:1,class:"col-md-6"},K=["value"],ee={key:2,class:"col-md-6"},le=["value"],te={key:3,class:"col-md-6"},ae=["value"],se={key:4,class:"col-md-6"},oe={class:"form-label fw-semibold text-dark"},ie={class:"row g-2"},ue={class:"col-6"},de={class:"col-6"},re={key:0,class:"text-danger d-block mt-1"},ne={key:5,class:"col-12"},ce={class:"row g-2"},me={class:"col-md-6"},ve={class:"col-md-6"},pe={key:6,class:"col-12"},fe={key:0,class:"mt-3"},be={class:"d-flex flex-wrap gap-1"},ye=["onClick"],ke={__name:"FilterModal",props:{modelValue:{type:Object,default:()=>({})},title:{type:String,default:"Items"},modalId:{type:String,default:"filterModal"},modalSize:{type:String,default:"modal-lg",validator:u=>["modal-sm","modal-lg","modal-xl"].includes(u)},sortOptions:{type:Array,default:()=>[{value:"stock_desc",label:"Stock: High to Low"},{value:"stock_asc",label:"Stock: Low to High"},{value:"name_asc",label:"Name: A to Z"},{value:"name_desc",label:"Name: Z to A"}]},categories:{type:Array,default:()=>[]},suppliers:{type:Array,default:()=>[]},stockStatusOptions:{type:Array,default:()=>[{value:"in_stock",label:"In Stock"},{value:"low_stock",label:"Low Stock"},{value:"out_of_stock",label:"Out of Stock"},{value:"expired",label:"Expired"},{value:"near_expire",label:"Near Expiry"}]},showPriceRange:{type:Boolean,default:!1},showDateRange:{type:Boolean,default:!1},showCategory:{type:Boolean,default:!0},showStockStatus:{type:Boolean,default:!0},priceRangeLabel:{type:String,default:"Price Range"}},emits:["update:modelValue","apply","clear"],setup(u,{emit:V}){const n=u,y=V,l=T({sortBy:"",category:"",supplier:"",stockStatus:"",priceMin:null,priceMax:null,dateFrom:"",dateTo:"",...n.modelValue});E(()=>n.modelValue,s=>{l.value={...l.value,...s}},{deep:!0});const S=k(()=>Object.values(l.value).some(s=>s!==""&&s!==null&&s!==void 0)),B=k(()=>{let s=0;return l.value.sortBy&&s++,l.value.category&&s++,l.value.supplier&&s++,l.value.stockStatus&&s++,(l.value.priceMin!==null||l.value.priceMax!==null)&&s++,(l.value.dateFrom||l.value.dateTo)&&s++,s}),v=k(()=>{const s=l.value.priceMin,e=l.value.priceMax;return s!==null&&e!==null&&s>e?"Minimum value cannot be greater than maximum value":null}),C=k(()=>{const s=[];if(l.value.sortBy){const e=n.sortOptions.find(d=>d.value===l.value.sortBy);s.push({key:"sortBy",label:"Sort",value:e?.label||l.value.sortBy})}if(l.value.category){const e=n.categories.find(d=>(d.id||d.value)===l.value.category);s.push({key:"category",label:"Category",value:e?.name||e?.label||l.value.category})}if(l.value.supplier){const e=n.suppliers.find(d=>(d.id||d.value)===l.value.supplier);s.push({key:"supplier",label:"Supplier",value:e?.name||e?.label||l.value.supplier})}if(l.value.stockStatus){const e=n.stockStatusOptions.find(d=>d.value===l.value.stockStatus);s.push({key:"stockStatus",label:"Stock Status",value:e?.label||l.value.stockStatus})}return(l.value.priceMin||l.value.priceMax)&&s.push({key:"priceRange",label:n.priceRangeLabel,value:`${l.value.priceMin||0} - ${l.value.priceMax||"âˆž"}`}),(l.value.dateFrom||l.value.dateTo)&&s.push({key:"dateRange",label:"Date",value:`${l.value.dateFrom||"..."} - ${l.value.dateTo||"..."}`}),s}),R=()=>{const s=document.getElementById(n.modalId);s&&new bootstrap.Modal(s).show()},A=()=>{if(v.value){N.error(v.value);return}y("update:modelValue",{...l.value}),y("apply",{...l.value});const s=document.getElementById(n.modalId);s&&bootstrap.Modal.getInstance(s)?.hide()},M=()=>{l.value={sortBy:"",category:"",supplier:"",stockStatus:"",priceMin:null,priceMax:null,dateFrom:"",dateTo:""},y("update:modelValue",{...l.value}),y("clear")},O=s=>{s==="priceRange"?(l.value.priceMin=null,l.value.priceMax=null):s==="dateRange"?(l.value.dateFrom="",l.value.dateTo=""):l.value[s]=""};return I(()=>{l.value={...l.value,...n.modelValue}}),(s,e)=>{const d=L("VueDatePicker");return i(),o("div",null,[t("button",{class:"btn btn-outline-secondary rounded-pill px-4",onClick:R},[e[8]||(e[8]=t("i",{class:"fas fa-filter me-2"},null,-1)),e[9]||(e[9]=r(" Filter ",-1)),S.value?(i(),o("span",P,m(B.value),1)):c("",!0)]),t("div",{id:u.modalId,class:"modal fade",tabindex:"-1","aria-labelledby":"filterModalLabel","aria-hidden":"true"},[t("div",{class:g(["modal-dialog modal-dialog-centered",u.modalSize])},[t("div",z,[t("div",H,[t("h5",Z,[e[10]||(e[10]=t("i",{class:"fas fa-filter text-primary me-2"},null,-1)),r(" Filter "+m(u.title),1)]),t("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:M},[...e[11]||(e[11]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",_,[t("div",q,[u.sortOptions?.length?(i(),o("div",G,[e[12]||(e[12]=t("label",{class:"form-label fw-semibold text-dark"},[t("i",{class:"fas fa-sort me-2 text-muted"}),r("Sort By ")],-1)),t("div",J,[(i(!0),o(f,null,b(u.sortOptions,a=>(i(),o("div",{key:a.value,class:"col-6"},[t("div",Q,[p(t("input",{id:`sort-${a.value}`,"onUpdate:modelValue":e[0]||(e[0]=w=>l.value.sortBy=w),class:"form-check-input",type:"radio",value:a.value},null,8,W),[[$,l.value.sortBy]]),t("label",{for:`sort-${a.value}`,class:"form-check-label small"},m(a.label),9,X)])]))),128))])])):c("",!0),u.showCategory&&u.categories?.length?(i(),o("div",Y,[e[14]||(e[14]=t("label",{class:"form-label fw-semibold text-dark"},[t("i",{class:"fas fa-tags me-2 text-muted"}),r("Category ")],-1)),p(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.category=a),class:"form-select"},[e[13]||(e[13]=t("option",{value:""},"All Categories",-1)),(i(!0),o(f,null,b(u.categories,a=>(i(),o("option",{key:a.id||a.value,value:a.id||a.value},m(a.name||a.label),9,K))),128))],512),[[x,l.value.category]])])):c("",!0),u.showStockStatus&&u.stockStatusOptions?.length?(i(),o("div",ee,[e[16]||(e[16]=t("label",{class:"form-label fw-semibold text-dark"},[t("i",{class:"fas fa-boxes me-2 text-muted"}),r("Stock Status ")],-1)),p(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.stockStatus=a),class:"form-select"},[e[15]||(e[15]=t("option",{value:""},"All Status",-1)),(i(!0),o(f,null,b(u.stockStatusOptions,a=>(i(),o("option",{key:a.value,value:a.value},m(a.label),9,le))),128))],512),[[x,l.value.stockStatus]])])):c("",!0),u.suppliers?.length?(i(),o("div",te,[e[18]||(e[18]=t("label",{class:"form-label fw-semibold text-dark"},[t("i",{class:"fas fa-truck me-2 text-muted"}),r("Supplier ")],-1)),p(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.supplier=a),class:"form-select"},[e[17]||(e[17]=t("option",{value:""},"All Suppliers",-1)),(i(!0),o(f,null,b(u.suppliers,a=>(i(),o("option",{key:a.id||a.value,value:a.id||a.value},m(a.name||a.label),9,ae))),128))],512),[[x,l.value.supplier]])])):c("",!0),u.showPriceRange?(i(),o("div",se,[t("label",oe,[e[19]||(e[19]=t("i",{class:"fas fa-dollar-sign me-2 text-muted"},null,-1)),r(m(u.priceRangeLabel),1)]),t("div",ie,[t("div",ue,[p(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>l.value.priceMin=a),type:"number",class:g(["form-control",{"is-invalid":v.value}]),placeholder:"Min",min:"0",step:"0.01"},null,2),[[h,l.value.priceMin,void 0,{number:!0}]])]),t("div",de,[p(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>l.value.priceMax=a),type:"number",class:g(["form-control",{"is-invalid":v.value}]),placeholder:"Max",min:"0",step:"0.01"},null,2),[[h,l.value.priceMax,void 0,{number:!0}]])])]),v.value?(i(),o("small",re,[e[20]||(e[20]=t("i",{class:"fas fa-exclamation-circle me-1"},null,-1)),r(m(v.value),1)])):c("",!0)])):c("",!0),u.showDateRange?(i(),o("div",ne,[e[21]||(e[21]=t("label",{class:"form-label fw-semibold text-dark"},[t("i",{class:"fas fa-calendar-alt me-2 text-muted"}),r("Date Range ")],-1)),t("div",ce,[t("div",me,[F(d,{modelValue:l.value.dateFrom,"onUpdate:modelValue":e[6]||(e[6]=a=>l.value.dateFrom=a),placeholder:"Start Date",format:"yyyy-MM-dd","enable-time-picker":!1,"single-calendar":""},null,8,["modelValue"])]),t("div",ve,[F(d,{modelValue:l.value.dateTo,"onUpdate:modelValue":e[7]||(e[7]=a=>l.value.dateTo=a),placeholder:"End Date",format:"yyyy-MM-dd","enable-time-picker":!1,"single-calendar":""},null,8,["modelValue"])])])])):c("",!0),s.$slots.customFilters?(i(),o("div",pe,[U(s.$slots,"customFilters",{filters:l.value},void 0,!0)])):c("",!0)]),S.value?(i(),o("div",fe,[e[22]||(e[22]=t("small",{class:"text-muted d-block mb-2"},"Active Filters:",-1)),t("div",be,[(i(!0),o(f,null,b(C.value,a=>(i(),o("span",{key:a.key,class:"badge bg-primary bg-opacity-10 text-primary px-2 py-1 rounded-pill"},[r(m(a.label)+": "+m(a.value)+" ",1),t("i",{class:"fas fa-times ms-1 cursor-pointer",onClick:w=>O(a.key)},null,8,ye)]))),128))])])):c("",!0)]),t("div",{class:"modal-footer border-0 pt-0"},[t("div",{class:"w-100 d-flex gap-2"},[t("button",{type:"button",class:"px-4 py-2 rounded-pill btn btn-primary text-white text-center",onClick:A},[...e[23]||(e[23]=[t("i",{class:"fas fa-check me-2"},null,-1),r("Apply ",-1)])]),t("button",{type:"button",class:"btn btn-secondary rounded-pill px-2 py-2",onClick:M},[...e[24]||(e[24]=[t("i",{class:"fas fa-undo me-2"},null,-1),r("Clear ",-1)])])])])])],2)],8,j)])}}},xe=D(ke,[["__scopeId","data-v-99653f75"]]);export{xe as F};
