import{r as z,R as kb,b6 as ha,y as _s,c as Ee,k as et,m as se,ae as Vi,f as I,b as O,e as c,l as be,t as k,F as Ce,g as Ke,_ as Lb,o as Xs,n as lu,A as $b,z as Rb,q as X,d as Nt,u as ce,h as Pb,w as uu,i as tn,v as Gn,x as Ui,K as Zr,S as qd,a as Mb}from"./app-I1xAEktG.js";import{_ as Fb}from"./Master-CdoukPtk.js";import Bb from"./ConfirmOrderModal-CP2ShsyV.js";import qb from"./ReceiptModal-CMLkrskp.js";import Ub from"./PromoModal-B_lgWEHt.js";import Wb from"./KotModal-BwW16p-z.js";import{u as Vb}from"./useFormatters-BH_Llf_6.js";import Hb from"./PosOrdersModal-UEIFtd5n.js";import{F as zb}from"./FilterModal-BOd0BBwS.js";import{s as cu}from"./index-BE7mRmLb.js";import Kb from"./DiscountModal-8h10IMRt.js";import{P as Ud}from"./pencil-m4xHMYFa.js";import{E as Yb}from"./eye-DzknbMWH.js";import"./index-CCcihXZ1.js";import"./createLucideIcon-bHsuCVXV.js";import"./index-CmJfvnBt.js";import"./index-ur9SuMgD.js";import"./sun-C34MkrPm.js";import"./StripePayment-C9HebQJa.js";import"./SplitPayment-DsdeJElS.js";import"./Receipt-CvqVfB97.js";import"./clock-CKn6jx2n.js";import"./circle-check-big-CbLmxvqY.js";import"./circle-x--sEsS8Hf.js";import"./printer-CSIZSqdX.js";import"./index-py1Nua_i.js";import"./index-f94f_6r1.js";import"./index-CJfIJ4i8.js";const he=kb({device:null,connected:!1,printerName:null,webUSBSupported:!1,lastError:null}),Te={INIT:[27,64],CUT:[29,86,0],PARTIAL_CUT:[29,86,1],FEED:[27,100],ALIGN_LEFT:[27,97,0],ALIGN_CENTER:[27,97,1],ALIGN_RIGHT:[27,97,2],BOLD_ON:[27,69,1],BOLD_OFF:[27,69,0],DOUBLE_ON:[29,33,17],DOUBLE_OFF:[29,33,0]},Wd=[1155,1046,1049,1208,1317,1659,5380,6790,3540,4070,8401,5455];function Gb(){const n=z(!1),s=()=>(he.webUSBSupported="usb"in navigator,he.webUSBSupported),f=async()=>{if(!he.webUSBSupported)return[];try{return(await navigator.usb.getDevices()).filter(H=>Wd.includes(H.vendorId)||H.productName?.toLowerCase().includes("printer")||H.productName?.toLowerCase().includes("pos")||H.productName?.toLowerCase().includes("thermal"))}catch(N){return console.error("Error getting USB devices:",N),[]}},v=async()=>{if(!he.webUSBSupported)return he.lastError="WebUSB not supported. Use Chrome or Edge.",!1;try{n.value=!0,he.lastError=null;const N=Wd.map(ie=>({vendorId:ie}));he.device=await navigator.usb.requestDevice({filters:N}),await he.device.open(),he.device.configuration===null&&await he.device.selectConfiguration(1);const H=he.device.configuration.interfaces[0].interfaceNumber;return await he.device.claimInterface(H),he.connected=!0,he.printerName=he.device.productName||"USB Printer",localStorage.setItem("usb_printer_connected","true"),!0}catch(N){return he.lastError=N.message,he.connected=!1,!1}finally{n.value=!1}},x=async()=>{if(he.device&&he.connected){try{await he.device.close()}catch{}he.device=null,he.connected=!1,he.printerName=null,localStorage.removeItem("usb_printer_connected")}},E=async N=>{if(!he.connected||!he.device)throw new Error("Printer not connected");const H=he.device.configuration.interfaces[0].alternate.endpoints.find(M=>M.direction==="out");if(!H)throw new Error("No output endpoint found");const ie=N instanceof Uint8Array?N:new Uint8Array(N);await he.device.transferOut(H.endpointNumber,ie)},S=N=>new TextEncoder().encode(N+`
`),C=async N=>{await E(S(N))},U=async(N,H)=>{const ie=48-N.length-H.length,M=N+" ".repeat(Math.max(1,ie))+H;await C(M)},L=(N,H="£")=>H+parseFloat(N).toFixed(2),V=async(N="-")=>{await C(N.repeat(48))},ee=async(N,H)=>{if((JSON.parse(localStorage.getItem("pos_printer_config")||"{}").customer_printer||"browser")==="browser"||!he.connected)return te(N,H);try{n.value=!0,await E(new Uint8Array(Te.INIT)),await E(new Uint8Array(Te.ALIGN_CENTER)),await E(new Uint8Array(Te.BOLD_ON)),await E(new Uint8Array(Te.DOUBLE_ON)),await C((H.name||"Business").toUpperCase()),await E(new Uint8Array(Te.DOUBLE_OFF)),await E(new Uint8Array(Te.BOLD_OFF)),H.phone&&await C(H.phone),H.address&&await C(H.address),await V("="),await E(new Uint8Array(Te.BOLD_ON)),await C("CUSTOMER RECEIPT"),await E(new Uint8Array(Te.BOLD_OFF)),await V("="),await E(new Uint8Array(Te.ALIGN_LEFT)),await U("Date:",N.order_date||new Date().toLocaleDateString()),await U("Time:",N.order_time||new Date().toLocaleTimeString()),await U("Customer:",N.customer_name||"Walk In"),await U("Order Type:",N.order_type||"Collection"),N.note&&await U("Note:",N.note),await V("-"),await E(new Uint8Array(Te.BOLD_ON)),await C("Item                     Qty    Price    Total"),await E(new Uint8Array(Te.BOLD_OFF)),await V("-");const B=H.currency||"£";for(const Q of N.items||[]){const ue=(Q.title||"Item").substring(0,24).padEnd(24),Oe=(Q.quantity||Q.qty||1).toString().padStart(4),Ie=L(Q.unit_price||Q.price||0,B).padStart(8),fe=L((Q.unit_price||Q.price||0)*(Q.quantity||Q.qty||1),B).padStart(8);await C(ue+Oe+Ie+fe)}if(await V("-"),await U("Subtotal:",L(N.sub_total||0,B)),await E(new Uint8Array(Te.BOLD_ON)),await U("Total:",L(N.total_amount||N.sub_total||0,B)),await E(new Uint8Array(Te.BOLD_OFF)),N.payment_type&&(await E(new Uint8Array([...Te.FEED,1])),await U("Payment:",N.payment_type.toUpperCase()),N.payment_type==="cash"&&N.cash_received>0)){await U("Cash Received:",L(N.cash_received,B));const Q=N.cash_received-(N.total_amount||N.sub_total||0);Q>0&&await U("Change:",L(Q,B))}return await E(new Uint8Array([...Te.FEED,2])),await E(new Uint8Array(Te.ALIGN_CENTER)),await C((H.footer||"Thank you!").toUpperCase()),await E(new Uint8Array([...Te.FEED,3])),await E(new Uint8Array(Te.CUT)),{success:!0,method:"usb"}}catch(B){return console.error("USB print error:",B),te(N,H)}finally{n.value=!1}},G=async(N,H)=>{if((JSON.parse(localStorage.getItem("pos_printer_config")||"{}").kot_printer||"browser")==="browser"||!he.connected)return ne(N,H);try{n.value=!0,await E(new Uint8Array(Te.INIT)),await E(new Uint8Array(Te.ALIGN_CENTER)),await E(new Uint8Array(Te.BOLD_ON)),await E(new Uint8Array(Te.DOUBLE_ON)),await C((H.name||"KITCHEN").toUpperCase()),await E(new Uint8Array(Te.DOUBLE_OFF)),await E(new Uint8Array(Te.BOLD_OFF)),await V("="),await E(new Uint8Array(Te.BOLD_ON)),await C("KITCHEN ORDER TICKET"),await E(new Uint8Array(Te.BOLD_OFF)),await V("="),await E(new Uint8Array(Te.ALIGN_LEFT)),await U("Date:",N.order_date||new Date().toLocaleDateString()),await U("Time:",N.order_time||new Date().toLocaleTimeString()),await U("Customer:",N.customer_name||"Walk In"),await U("Order Type:",N.order_type||"Dine In"),N.kitchen_note&&await U("Note:",N.kitchen_note),await V("-"),await E(new Uint8Array(Te.BOLD_ON)),await U("Item","Qty"),await E(new Uint8Array(Te.BOLD_OFF)),await V("-");for(const B of N.items||[]){const Q=(B.title||"Item").substring(0,40),ue=(B.quantity||B.qty||1).toString();await U(Q,ue),B.item_kitchen_note&&await C("  Note: "+B.item_kitchen_note)}return await V("-"),await E(new Uint8Array([...Te.FEED,2])),await E(new Uint8Array(Te.ALIGN_CENTER)),await C((H.footer||"KITCHEN COPY").toUpperCase()),await E(new Uint8Array([...Te.FEED,3])),await E(new Uint8Array(Te.CUT)),{success:!0,method:"usb"}}catch(B){return console.error("USB KOT print error:",B),ne(N,H)}finally{n.value=!1}},te=(N,H)=>{const ie=H.currency||"£";let M="";for(const ue of N.items||[]){const Oe=ue.quantity||ue.qty||1,Ie=ue.unit_price||ue.price||0,fe=Ie*Oe;M+="<tr>",M+="<td>"+(ue.title||"Item")+"</td>",M+='<td style="text-align:center">'+Oe+"</td>",M+='<td style="text-align:right">'+L(Ie,ie)+"</td>",M+='<td style="text-align:right">'+L(fe,ie)+"</td>",M+="</tr>"}let B='<!DOCTYPE html><html><head><meta charset="UTF-8">';B+="<title>Receipt</title>",B+="<style>",B+="@page { size: 80mm auto; margin: 0; }",B+='body { font-family: "Courier New", monospace; font-size: 12px; width: 80mm; margin: 0 auto; padding: 5mm; }',B+=".header { text-align: center; margin-bottom: 10px; }",B+=".business-name { font-size: 16px; font-weight: bold; }",B+=".divider { border-top: 1px dashed #000; margin: 8px 0; }",B+=".info-row { display: flex; justify-content: space-between; }",B+="table { width: 100%; border-collapse: collapse; }",B+="th, td { padding: 3px 0; }",B+=".footer { text-align: center; margin-top: 15px; font-weight: bold; }",B+="</style></head><body>",B+='<div class="header">',H.logo_url&&(B+='<img src="'+H.logo_url+'" style="max-width:100px;max-height:60px;margin-bottom:5px">'),B+='<div class="business-name">'+(H.name||"Business").toUpperCase()+"</div>",B+="<div>"+(H.phone||"")+"</div>",B+="<div>"+(H.address||"")+"</div>",B+="</div>",B+='<div class="divider"></div>',B+='<div style="text-align:center;font-weight:bold">CUSTOMER RECEIPT</div>',B+='<div class="divider"></div>',B+='<div class="info-row"><span>Date:</span><span>'+(N.order_date||new Date().toLocaleDateString())+"</span></div>",B+='<div class="info-row"><span>Time:</span><span>'+(N.order_time||new Date().toLocaleTimeString())+"</span></div>",B+='<div class="info-row"><span>Customer:</span><span>'+(N.customer_name||"Walk In")+"</span></div>",B+='<div class="info-row"><span>Order Type:</span><span>'+(N.order_type||"Collection")+"</span></div>",B+='<div class="divider"></div>',B+="<table><thead><tr><th>Item</th><th>Qty</th><th>Price</th><th>Total</th></tr></thead>",B+="<tbody>"+M+"</tbody></table>",B+='<div class="divider"></div>',B+='<div class="info-row"><span>Subtotal:</span><span>'+L(N.sub_total||0,ie)+"</span></div>",B+='<div class="info-row" style="font-weight:bold"><span>Total:</span><span>'+L(N.total_amount||N.sub_total||0,ie)+"</span></div>",B+='<div class="divider"></div>',B+='<div class="footer">'+(H.footer||"Thank you!").toUpperCase()+"</div>",B+="</body></html>";const Q=window.open("","_blank","width=400,height=600");return Q.document.write(B),Q.document.close(),setTimeout(function(){Q.focus(),Q.print()},500),{success:!0,method:"browser"}},ne=(N,H)=>{let ie="";for(const Q of N.items||[]){const ue=Q.quantity||Q.qty||1;ie+="<tr>",ie+="<td>"+(Q.title||"Item")+"</td>",ie+='<td style="text-align:right">'+ue+"</td>",ie+="</tr>",Q.item_kitchen_note&&(ie+='<tr><td colspan="2" style="padding-left:15px;font-style:italic">Note: '+Q.item_kitchen_note+"</td></tr>")}let M='<!DOCTYPE html><html><head><meta charset="UTF-8">';M+="<title>Kitchen Order</title>",M+="<style>",M+="@page { size: 80mm auto; margin: 0; }",M+='body { font-family: "Courier New", monospace; font-size: 12px; width: 80mm; margin: 0 auto; padding: 5mm; }',M+=".header { text-align: center; margin-bottom: 10px; }",M+=".business-name { font-size: 16px; font-weight: bold; }",M+=".divider { border-top: 1px dashed #000; margin: 8px 0; }",M+=".info-row { display: flex; justify-content: space-between; }",M+="table { width: 100%; border-collapse: collapse; }",M+="th, td { padding: 3px 0; }",M+=".footer { text-align: center; margin-top: 15px; font-weight: bold; }",M+="</style></head><body>",M+='<div class="header">',M+='<div class="business-name">'+(H.name||"KITCHEN").toUpperCase()+"</div>",M+="</div>",M+='<div class="divider"></div>',M+='<div style="text-align:center;font-weight:bold;font-size:14px">KITCHEN ORDER TICKET</div>',M+='<div class="divider"></div>',M+='<div class="info-row"><span>Date:</span><span>'+(N.order_date||new Date().toLocaleDateString())+"</span></div>",M+='<div class="info-row"><span>Time:</span><span>'+(N.order_time||new Date().toLocaleTimeString())+"</span></div>",M+='<div class="info-row"><span>Customer:</span><span>'+(N.customer_name||"Walk In")+"</span></div>",M+='<div class="info-row"><span>Order Type:</span><span>'+(N.order_type||"Dine In")+"</span></div>",N.kitchen_note&&(M+='<div class="info-row"><span>Note:</span><span>'+N.kitchen_note+"</span></div>"),M+='<div class="divider"></div>',M+='<table><thead><tr><th>Item</th><th style="text-align:right">Qty</th></tr></thead>',M+="<tbody>"+ie+"</tbody></table>",M+='<div class="divider"></div>',M+='<div class="footer">KITCHEN COPY</div>',M+="</body></html>";const B=window.open("","_blank","width=400,height=600");return B.document.write(M),B.document.close(),setTimeout(function(){B.focus(),B.print()},500),{success:!0,method:"browser"}};return{isConnected:()=>he.connected,printerName:()=>he.printerName,isWebUSBSupported:()=>he.webUSBSupported,lastError:()=>he.lastError,loading:n,checkSupport:s,connectPrinter:v,disconnectPrinter:x,autoReconnect:async()=>{if(s(),he.webUSBSupported&&localStorage.getItem("usb_printer_connected")){const N=await f();if(N.length>0)try{he.device=N[0],await he.device.open(),he.device.configuration===null&&await he.device.selectConfiguration(1);const H=he.device.configuration.interfaces[0].interfaceNumber;await he.device.claimInterface(H),he.connected=!0,he.printerName=he.device.productName||"USB Printer"}catch(H){console.log("Auto-reconnect failed:",H.message)}}},getPairedDevices:f,printReceipt:ee,printKOT:G,browserPrintReceipt:te,browserPrintKOT:ne}}var kt="top",nn="bottom",sn="right",Lt="left",Ia="auto",dr=[kt,nn,sn,Lt],bs="start",sr="end",Sf="clippingParents",$u="viewport",er="popper",Of="reference",Su=dr.reduce(function(l,n){return l.concat([n+"-"+bs,n+"-"+sr])},[]),Ru=[].concat(dr,[Ia]).reduce(function(l,n){return l.concat([n,n+"-"+bs,n+"-"+sr])},[]),If="beforeRead",Df="read",Nf="afterRead",kf="beforeMain",Lf="main",$f="afterMain",Rf="beforeWrite",Pf="write",Mf="afterWrite",Ff=[If,Df,Nf,kf,Lf,$f,Rf,Pf,Mf];function Xn(l){return l?(l.nodeName||"").toLowerCase():null}function rn(l){if(l==null)return window;if(l.toString()!=="[object Window]"){var n=l.ownerDocument;return n&&n.defaultView||window}return l}function ys(l){var n=rn(l).Element;return l instanceof n||l instanceof Element}function mn(l){var n=rn(l).HTMLElement;return l instanceof n||l instanceof HTMLElement}function Pu(l){if(typeof ShadowRoot>"u")return!1;var n=rn(l).ShadowRoot;return l instanceof n||l instanceof ShadowRoot}function jb(l){var n=l.state;Object.keys(n.elements).forEach(function(s){var f=n.styles[s]||{},v=n.attributes[s]||{},x=n.elements[s];!mn(x)||!Xn(x)||(Object.assign(x.style,f),Object.keys(v).forEach(function(E){var S=v[E];S===!1?x.removeAttribute(E):x.setAttribute(E,S===!0?"":S)}))})}function Qb(l){var n=l.state,s={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,s.popper),n.styles=s,n.elements.arrow&&Object.assign(n.elements.arrow.style,s.arrow),function(){Object.keys(n.elements).forEach(function(f){var v=n.elements[f],x=n.attributes[f]||{},E=Object.keys(n.styles.hasOwnProperty(f)?n.styles[f]:s[f]),S=E.reduce(function(C,U){return C[U]="",C},{});!mn(v)||!Xn(v)||(Object.assign(v.style,S),Object.keys(x).forEach(function(C){v.removeAttribute(C)}))})}}const Mu={name:"applyStyles",enabled:!0,phase:"write",fn:jb,effect:Qb,requires:["computeStyles"]};function jn(l){return l.split("-")[0]}var gs=Math.max,Ta=Math.min,rr=Math.round;function Ou(){var l=navigator.userAgentData;return l!=null&&l.brands&&Array.isArray(l.brands)?l.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function Bf(){return!/^((?!chrome|android).)*safari/i.test(Ou())}function or(l,n,s){n===void 0&&(n=!1),s===void 0&&(s=!1);var f=l.getBoundingClientRect(),v=1,x=1;n&&mn(l)&&(v=l.offsetWidth>0&&rr(f.width)/l.offsetWidth||1,x=l.offsetHeight>0&&rr(f.height)/l.offsetHeight||1);var E=ys(l)?rn(l):window,S=E.visualViewport,C=!Bf()&&s,U=(f.left+(C&&S?S.offsetLeft:0))/v,L=(f.top+(C&&S?S.offsetTop:0))/x,V=f.width/v,ee=f.height/x;return{width:V,height:ee,top:L,right:U+V,bottom:L+ee,left:U,x:U,y:L}}function Fu(l){var n=or(l),s=l.offsetWidth,f=l.offsetHeight;return Math.abs(n.width-s)<=1&&(s=n.width),Math.abs(n.height-f)<=1&&(f=n.height),{x:l.offsetLeft,y:l.offsetTop,width:s,height:f}}function qf(l,n){var s=n.getRootNode&&n.getRootNode();if(l.contains(n))return!0;if(s&&Pu(s)){var f=n;do{if(f&&l.isSameNode(f))return!0;f=f.parentNode||f.host}while(f)}return!1}function yi(l){return rn(l).getComputedStyle(l)}function Xb(l){return["table","td","th"].indexOf(Xn(l))>=0}function Yi(l){return((ys(l)?l.ownerDocument:l.document)||window.document).documentElement}function Da(l){return Xn(l)==="html"?l:l.assignedSlot||l.parentNode||(Pu(l)?l.host:null)||Yi(l)}function Vd(l){return!mn(l)||yi(l).position==="fixed"?null:l.offsetParent}function Jb(l){var n=/firefox/i.test(Ou()),s=/Trident/i.test(Ou());if(s&&mn(l)){var f=yi(l);if(f.position==="fixed")return null}var v=Da(l);for(Pu(v)&&(v=v.host);mn(v)&&["html","body"].indexOf(Xn(v))<0;){var x=yi(v);if(x.transform!=="none"||x.perspective!=="none"||x.contain==="paint"||["transform","perspective"].indexOf(x.willChange)!==-1||n&&x.willChange==="filter"||n&&x.filter&&x.filter!=="none")return v;v=v.parentNode}return null}function ao(l){for(var n=rn(l),s=Vd(l);s&&Xb(s)&&yi(s).position==="static";)s=Vd(s);return s&&(Xn(s)==="html"||Xn(s)==="body"&&yi(s).position==="static")?n:s||Jb(l)||n}function Bu(l){return["top","bottom"].indexOf(l)>=0?"x":"y"}function io(l,n,s){return gs(l,Ta(n,s))}function Zb(l,n,s){var f=io(l,n,s);return f>s?s:f}function Uf(){return{top:0,right:0,bottom:0,left:0}}function Wf(l){return Object.assign({},Uf(),l)}function Vf(l,n){return n.reduce(function(s,f){return s[f]=l,s},{})}var ey=function(n,s){return n=typeof n=="function"?n(Object.assign({},s.rects,{placement:s.placement})):n,Wf(typeof n!="number"?n:Vf(n,dr))};function ty(l){var n,s=l.state,f=l.name,v=l.options,x=s.elements.arrow,E=s.modifiersData.popperOffsets,S=jn(s.placement),C=Bu(S),U=[Lt,sn].indexOf(S)>=0,L=U?"height":"width";if(!(!x||!E)){var V=ey(v.padding,s),ee=Fu(x),G=C==="y"?kt:Lt,te=C==="y"?nn:sn,ne=s.rects.reference[L]+s.rects.reference[C]-E[C]-s.rects.popper[L],J=E[C]-s.rects.reference[C],N=ao(x),H=N?C==="y"?N.clientHeight||0:N.clientWidth||0:0,ie=ne/2-J/2,M=V[G],B=H-ee[L]-V[te],Q=H/2-ee[L]/2+ie,ue=io(M,Q,B),Oe=C;s.modifiersData[f]=(n={},n[Oe]=ue,n.centerOffset=ue-Q,n)}}function ny(l){var n=l.state,s=l.options,f=s.element,v=f===void 0?"[data-popper-arrow]":f;v!=null&&(typeof v=="string"&&(v=n.elements.popper.querySelector(v),!v)||qf(n.elements.popper,v)&&(n.elements.arrow=v))}const Hf={name:"arrow",enabled:!0,phase:"main",fn:ty,effect:ny,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ar(l){return l.split("-")[1]}var iy={top:"auto",right:"auto",bottom:"auto",left:"auto"};function sy(l,n){var s=l.x,f=l.y,v=n.devicePixelRatio||1;return{x:rr(s*v)/v||0,y:rr(f*v)/v||0}}function Hd(l){var n,s=l.popper,f=l.popperRect,v=l.placement,x=l.variation,E=l.offsets,S=l.position,C=l.gpuAcceleration,U=l.adaptive,L=l.roundOffsets,V=l.isFixed,ee=E.x,G=ee===void 0?0:ee,te=E.y,ne=te===void 0?0:te,J=typeof L=="function"?L({x:G,y:ne}):{x:G,y:ne};G=J.x,ne=J.y;var N=E.hasOwnProperty("x"),H=E.hasOwnProperty("y"),ie=Lt,M=kt,B=window;if(U){var Q=ao(s),ue="clientHeight",Oe="clientWidth";if(Q===rn(s)&&(Q=Yi(s),yi(Q).position!=="static"&&S==="absolute"&&(ue="scrollHeight",Oe="scrollWidth")),Q=Q,v===kt||(v===Lt||v===sn)&&x===sr){M=nn;var Ie=V&&Q===B&&B.visualViewport?B.visualViewport.height:Q[ue];ne-=Ie-f.height,ne*=C?1:-1}if(v===Lt||(v===kt||v===nn)&&x===sr){ie=sn;var fe=V&&Q===B&&B.visualViewport?B.visualViewport.width:Q[Oe];G-=fe-f.width,G*=C?1:-1}}var Fe=Object.assign({position:S},U&&iy),st=L===!0?sy({x:G,y:ne},rn(s)):{x:G,y:ne};if(G=st.x,ne=st.y,C){var We;return Object.assign({},Fe,(We={},We[M]=H?"0":"",We[ie]=N?"0":"",We.transform=(B.devicePixelRatio||1)<=1?"translate("+G+"px, "+ne+"px)":"translate3d("+G+"px, "+ne+"px, 0)",We))}return Object.assign({},Fe,(n={},n[M]=H?ne+"px":"",n[ie]=N?G+"px":"",n.transform="",n))}function ry(l){var n=l.state,s=l.options,f=s.gpuAcceleration,v=f===void 0?!0:f,x=s.adaptive,E=x===void 0?!0:x,S=s.roundOffsets,C=S===void 0?!0:S,U={placement:jn(n.placement),variation:ar(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:v,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,Hd(Object.assign({},U,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:E,roundOffsets:C})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,Hd(Object.assign({},U,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:C})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}const qu={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ry,data:{}};var _a={passive:!0};function oy(l){var n=l.state,s=l.instance,f=l.options,v=f.scroll,x=v===void 0?!0:v,E=f.resize,S=E===void 0?!0:E,C=rn(n.elements.popper),U=[].concat(n.scrollParents.reference,n.scrollParents.popper);return x&&U.forEach(function(L){L.addEventListener("scroll",s.update,_a)}),S&&C.addEventListener("resize",s.update,_a),function(){x&&U.forEach(function(L){L.removeEventListener("scroll",s.update,_a)}),S&&C.removeEventListener("resize",s.update,_a)}}const Uu={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:oy,data:{}};var ay={left:"right",right:"left",bottom:"top",top:"bottom"};function Ea(l){return l.replace(/left|right|bottom|top/g,function(n){return ay[n]})}var ly={start:"end",end:"start"};function zd(l){return l.replace(/start|end/g,function(n){return ly[n]})}function Wu(l){var n=rn(l),s=n.pageXOffset,f=n.pageYOffset;return{scrollLeft:s,scrollTop:f}}function Vu(l){return or(Yi(l)).left+Wu(l).scrollLeft}function uy(l,n){var s=rn(l),f=Yi(l),v=s.visualViewport,x=f.clientWidth,E=f.clientHeight,S=0,C=0;if(v){x=v.width,E=v.height;var U=Bf();(U||!U&&n==="fixed")&&(S=v.offsetLeft,C=v.offsetTop)}return{width:x,height:E,x:S+Vu(l),y:C}}function cy(l){var n,s=Yi(l),f=Wu(l),v=(n=l.ownerDocument)==null?void 0:n.body,x=gs(s.scrollWidth,s.clientWidth,v?v.scrollWidth:0,v?v.clientWidth:0),E=gs(s.scrollHeight,s.clientHeight,v?v.scrollHeight:0,v?v.clientHeight:0),S=-f.scrollLeft+Vu(l),C=-f.scrollTop;return yi(v||s).direction==="rtl"&&(S+=gs(s.clientWidth,v?v.clientWidth:0)-x),{width:x,height:E,x:S,y:C}}function Hu(l){var n=yi(l),s=n.overflow,f=n.overflowX,v=n.overflowY;return/auto|scroll|overlay|hidden/.test(s+v+f)}function zf(l){return["html","body","#document"].indexOf(Xn(l))>=0?l.ownerDocument.body:mn(l)&&Hu(l)?l:zf(Da(l))}function so(l,n){var s;n===void 0&&(n=[]);var f=zf(l),v=f===((s=l.ownerDocument)==null?void 0:s.body),x=rn(f),E=v?[x].concat(x.visualViewport||[],Hu(f)?f:[]):f,S=n.concat(E);return v?S:S.concat(so(Da(E)))}function Iu(l){return Object.assign({},l,{left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height})}function dy(l,n){var s=or(l,!1,n==="fixed");return s.top=s.top+l.clientTop,s.left=s.left+l.clientLeft,s.bottom=s.top+l.clientHeight,s.right=s.left+l.clientWidth,s.width=l.clientWidth,s.height=l.clientHeight,s.x=s.left,s.y=s.top,s}function Kd(l,n,s){return n===$u?Iu(uy(l,s)):ys(n)?dy(n,s):Iu(cy(Yi(l)))}function fy(l){var n=so(Da(l)),s=["absolute","fixed"].indexOf(yi(l).position)>=0,f=s&&mn(l)?ao(l):l;return ys(f)?n.filter(function(v){return ys(v)&&qf(v,f)&&Xn(v)!=="body"}):[]}function py(l,n,s,f){var v=n==="clippingParents"?fy(l):[].concat(n),x=[].concat(v,[s]),E=x[0],S=x.reduce(function(C,U){var L=Kd(l,U,f);return C.top=gs(L.top,C.top),C.right=Ta(L.right,C.right),C.bottom=Ta(L.bottom,C.bottom),C.left=gs(L.left,C.left),C},Kd(l,E,f));return S.width=S.right-S.left,S.height=S.bottom-S.top,S.x=S.left,S.y=S.top,S}function Kf(l){var n=l.reference,s=l.element,f=l.placement,v=f?jn(f):null,x=f?ar(f):null,E=n.x+n.width/2-s.width/2,S=n.y+n.height/2-s.height/2,C;switch(v){case kt:C={x:E,y:n.y-s.height};break;case nn:C={x:E,y:n.y+n.height};break;case sn:C={x:n.x+n.width,y:S};break;case Lt:C={x:n.x-s.width,y:S};break;default:C={x:n.x,y:n.y}}var U=v?Bu(v):null;if(U!=null){var L=U==="y"?"height":"width";switch(x){case bs:C[U]=C[U]-(n[L]/2-s[L]/2);break;case sr:C[U]=C[U]+(n[L]/2-s[L]/2);break}}return C}function lr(l,n){n===void 0&&(n={});var s=n,f=s.placement,v=f===void 0?l.placement:f,x=s.strategy,E=x===void 0?l.strategy:x,S=s.boundary,C=S===void 0?Sf:S,U=s.rootBoundary,L=U===void 0?$u:U,V=s.elementContext,ee=V===void 0?er:V,G=s.altBoundary,te=G===void 0?!1:G,ne=s.padding,J=ne===void 0?0:ne,N=Wf(typeof J!="number"?J:Vf(J,dr)),H=ee===er?Of:er,ie=l.rects.popper,M=l.elements[te?H:ee],B=py(ys(M)?M:M.contextElement||Yi(l.elements.popper),C,L,E),Q=or(l.elements.reference),ue=Kf({reference:Q,element:ie,placement:v}),Oe=Iu(Object.assign({},ie,ue)),Ie=ee===er?Oe:Q,fe={top:B.top-Ie.top+N.top,bottom:Ie.bottom-B.bottom+N.bottom,left:B.left-Ie.left+N.left,right:Ie.right-B.right+N.right},Fe=l.modifiersData.offset;if(ee===er&&Fe){var st=Fe[v];Object.keys(fe).forEach(function(We){var ft=[sn,nn].indexOf(We)>=0?1:-1,$t=[kt,nn].indexOf(We)>=0?"y":"x";fe[We]+=st[$t]*ft})}return fe}function hy(l,n){n===void 0&&(n={});var s=n,f=s.placement,v=s.boundary,x=s.rootBoundary,E=s.padding,S=s.flipVariations,C=s.allowedAutoPlacements,U=C===void 0?Ru:C,L=ar(f),V=L?S?Su:Su.filter(function(te){return ar(te)===L}):dr,ee=V.filter(function(te){return U.indexOf(te)>=0});ee.length===0&&(ee=V);var G=ee.reduce(function(te,ne){return te[ne]=lr(l,{placement:ne,boundary:v,rootBoundary:x,padding:E})[jn(ne)],te},{});return Object.keys(G).sort(function(te,ne){return G[te]-G[ne]})}function _y(l){if(jn(l)===Ia)return[];var n=Ea(l);return[zd(l),n,zd(n)]}function my(l){var n=l.state,s=l.options,f=l.name;if(!n.modifiersData[f]._skip){for(var v=s.mainAxis,x=v===void 0?!0:v,E=s.altAxis,S=E===void 0?!0:E,C=s.fallbackPlacements,U=s.padding,L=s.boundary,V=s.rootBoundary,ee=s.altBoundary,G=s.flipVariations,te=G===void 0?!0:G,ne=s.allowedAutoPlacements,J=n.options.placement,N=jn(J),H=N===J,ie=C||(H||!te?[Ea(J)]:_y(J)),M=[J].concat(ie).reduce(function(En,ut){return En.concat(jn(ut)===Ia?hy(n,{placement:ut,boundary:L,rootBoundary:V,padding:U,flipVariations:te,allowedAutoPlacements:ne}):ut)},[]),B=n.rects.reference,Q=n.rects.popper,ue=new Map,Oe=!0,Ie=M[0],fe=0;fe<M.length;fe++){var Fe=M[fe],st=jn(Fe),We=ar(Fe)===bs,ft=[kt,nn].indexOf(st)>=0,$t=ft?"width":"height",lt=lr(n,{placement:Fe,boundary:L,rootBoundary:V,altBoundary:ee,padding:U}),Ye=ft?We?sn:Lt:We?nn:kt;B[$t]>Q[$t]&&(Ye=Ea(Ye));var wt=Ea(Ye),yn=[];if(x&&yn.push(lt[st]<=0),S&&yn.push(lt[Ye]<=0,lt[wt]<=0),yn.every(function(En){return En})){Ie=Fe,Oe=!1;break}ue.set(Fe,yn)}if(Oe)for(var wn=te?3:1,pt=function(ut){var on=M.find(function(ht){var Et=ue.get(ht);if(Et)return Et.slice(0,ut).every(function(Rt){return Rt})});if(on)return Ie=on,"break"},Jn=wn;Jn>0;Jn--){var Ei=pt(Jn);if(Ei==="break")break}n.placement!==Ie&&(n.modifiersData[f]._skip=!0,n.placement=Ie,n.reset=!0)}}const Yf={name:"flip",enabled:!0,phase:"main",fn:my,requiresIfExists:["offset"],data:{_skip:!1}};function Yd(l,n,s){return s===void 0&&(s={x:0,y:0}),{top:l.top-n.height-s.y,right:l.right-n.width+s.x,bottom:l.bottom-n.height+s.y,left:l.left-n.width-s.x}}function Gd(l){return[kt,sn,nn,Lt].some(function(n){return l[n]>=0})}function vy(l){var n=l.state,s=l.name,f=n.rects.reference,v=n.rects.popper,x=n.modifiersData.preventOverflow,E=lr(n,{elementContext:"reference"}),S=lr(n,{altBoundary:!0}),C=Yd(E,f),U=Yd(S,v,x),L=Gd(C),V=Gd(U);n.modifiersData[s]={referenceClippingOffsets:C,popperEscapeOffsets:U,isReferenceHidden:L,hasPopperEscaped:V},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":L,"data-popper-escaped":V})}const Gf={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:vy};function gy(l,n,s){var f=jn(l),v=[Lt,kt].indexOf(f)>=0?-1:1,x=typeof s=="function"?s(Object.assign({},n,{placement:l})):s,E=x[0],S=x[1];return E=E||0,S=(S||0)*v,[Lt,sn].indexOf(f)>=0?{x:S,y:E}:{x:E,y:S}}function by(l){var n=l.state,s=l.options,f=l.name,v=s.offset,x=v===void 0?[0,0]:v,E=Ru.reduce(function(L,V){return L[V]=gy(V,n.rects,x),L},{}),S=E[n.placement],C=S.x,U=S.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=C,n.modifiersData.popperOffsets.y+=U),n.modifiersData[f]=E}const jf={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:by};function yy(l){var n=l.state,s=l.name;n.modifiersData[s]=Kf({reference:n.rects.reference,element:n.rects.popper,placement:n.placement})}const zu={name:"popperOffsets",enabled:!0,phase:"read",fn:yy,data:{}};function wy(l){return l==="x"?"y":"x"}function Ey(l){var n=l.state,s=l.options,f=l.name,v=s.mainAxis,x=v===void 0?!0:v,E=s.altAxis,S=E===void 0?!1:E,C=s.boundary,U=s.rootBoundary,L=s.altBoundary,V=s.padding,ee=s.tether,G=ee===void 0?!0:ee,te=s.tetherOffset,ne=te===void 0?0:te,J=lr(n,{boundary:C,rootBoundary:U,padding:V,altBoundary:L}),N=jn(n.placement),H=ar(n.placement),ie=!H,M=Bu(N),B=wy(M),Q=n.modifiersData.popperOffsets,ue=n.rects.reference,Oe=n.rects.popper,Ie=typeof ne=="function"?ne(Object.assign({},n.rects,{placement:n.placement})):ne,fe=typeof Ie=="number"?{mainAxis:Ie,altAxis:Ie}:Object.assign({mainAxis:0,altAxis:0},Ie),Fe=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,st={x:0,y:0};if(Q){if(x){var We,ft=M==="y"?kt:Lt,$t=M==="y"?nn:sn,lt=M==="y"?"height":"width",Ye=Q[M],wt=Ye+J[ft],yn=Ye-J[$t],wn=G?-Oe[lt]/2:0,pt=H===bs?ue[lt]:Oe[lt],Jn=H===bs?-Oe[lt]:-ue[lt],Ei=n.elements.arrow,En=G&&Ei?Fu(Ei):{width:0,height:0},ut=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:Uf(),on=ut[ft],ht=ut[$t],Et=io(0,ue[lt],En[lt]),Rt=ie?ue[lt]/2-wn-Et-on-fe.mainAxis:pt-Et-on-fe.mainAxis,_r=ie?-ue[lt]/2+wn+Et+ht+fe.mainAxis:Jn+Et+ht+fe.mainAxis,xn=n.elements.arrow&&ao(n.elements.arrow),Zn=xn?M==="y"?xn.clientTop||0:xn.clientLeft||0:0,Gt=(We=Fe?.[M])!=null?We:0,Ae=Ye+Rt-Gt-Zn,rt=Ye+_r-Gt,an=io(G?Ta(wt,Ae):wt,Ye,G?gs(yn,rt):yn);Q[M]=an,st[M]=an-Ye}if(S){var Qe,xs=M==="x"?kt:Lt,ei=M==="x"?nn:sn,xt=Q[B],Be=B==="y"?"height":"width",Rn=xt+J[xs],ti=xt-J[ei],Pn=[kt,Lt].indexOf(N)!==-1,At=(Qe=Fe?.[B])!=null?Qe:0,Pt=Pn?Rn:xt-ue[Be]-Oe[Be]-At+fe.altAxis,Mn=Pn?xt+ue[Be]+Oe[Be]-At-fe.altAxis:ti,An=G&&Pn?Zb(Pt,xt,Mn):io(G?Pt:Rn,xt,G?Mn:ti);Q[B]=An,st[B]=An-xt}n.modifiersData[f]=st}}const Qf={name:"preventOverflow",enabled:!0,phase:"main",fn:Ey,requiresIfExists:["offset"]};function xy(l){return{scrollLeft:l.scrollLeft,scrollTop:l.scrollTop}}function Ay(l){return l===rn(l)||!mn(l)?Wu(l):xy(l)}function Ty(l){var n=l.getBoundingClientRect(),s=rr(n.width)/l.offsetWidth||1,f=rr(n.height)/l.offsetHeight||1;return s!==1||f!==1}function Cy(l,n,s){s===void 0&&(s=!1);var f=mn(n),v=mn(n)&&Ty(n),x=Yi(n),E=or(l,v,s),S={scrollLeft:0,scrollTop:0},C={x:0,y:0};return(f||!f&&!s)&&((Xn(n)!=="body"||Hu(x))&&(S=Ay(n)),mn(n)?(C=or(n,!0),C.x+=n.clientLeft,C.y+=n.clientTop):x&&(C.x=Vu(x))),{x:E.left+S.scrollLeft-C.x,y:E.top+S.scrollTop-C.y,width:E.width,height:E.height}}function Sy(l){var n=new Map,s=new Set,f=[];l.forEach(function(x){n.set(x.name,x)});function v(x){s.add(x.name);var E=[].concat(x.requires||[],x.requiresIfExists||[]);E.forEach(function(S){if(!s.has(S)){var C=n.get(S);C&&v(C)}}),f.push(x)}return l.forEach(function(x){s.has(x.name)||v(x)}),f}function Oy(l){var n=Sy(l);return Ff.reduce(function(s,f){return s.concat(n.filter(function(v){return v.phase===f}))},[])}function Iy(l){var n;return function(){return n||(n=new Promise(function(s){Promise.resolve().then(function(){n=void 0,s(l())})})),n}}function Dy(l){var n=l.reduce(function(s,f){var v=s[f.name];return s[f.name]=v?Object.assign({},v,f,{options:Object.assign({},v.options,f.options),data:Object.assign({},v.data,f.data)}):f,s},{});return Object.keys(n).map(function(s){return n[s]})}var jd={placement:"bottom",modifiers:[],strategy:"absolute"};function Qd(){for(var l=arguments.length,n=new Array(l),s=0;s<l;s++)n[s]=arguments[s];return!n.some(function(f){return!(f&&typeof f.getBoundingClientRect=="function")})}function Na(l){l===void 0&&(l={});var n=l,s=n.defaultModifiers,f=s===void 0?[]:s,v=n.defaultOptions,x=v===void 0?jd:v;return function(S,C,U){U===void 0&&(U=x);var L={placement:"bottom",orderedModifiers:[],options:Object.assign({},jd,x),modifiersData:{},elements:{reference:S,popper:C},attributes:{},styles:{}},V=[],ee=!1,G={state:L,setOptions:function(N){var H=typeof N=="function"?N(L.options):N;ne(),L.options=Object.assign({},x,L.options,H),L.scrollParents={reference:ys(S)?so(S):S.contextElement?so(S.contextElement):[],popper:so(C)};var ie=Oy(Dy([].concat(f,L.options.modifiers)));return L.orderedModifiers=ie.filter(function(M){return M.enabled}),te(),G.update()},forceUpdate:function(){if(!ee){var N=L.elements,H=N.reference,ie=N.popper;if(Qd(H,ie)){L.rects={reference:Cy(H,ao(ie),L.options.strategy==="fixed"),popper:Fu(ie)},L.reset=!1,L.placement=L.options.placement,L.orderedModifiers.forEach(function(fe){return L.modifiersData[fe.name]=Object.assign({},fe.data)});for(var M=0;M<L.orderedModifiers.length;M++){if(L.reset===!0){L.reset=!1,M=-1;continue}var B=L.orderedModifiers[M],Q=B.fn,ue=B.options,Oe=ue===void 0?{}:ue,Ie=B.name;typeof Q=="function"&&(L=Q({state:L,options:Oe,name:Ie,instance:G})||L)}}}},update:Iy(function(){return new Promise(function(J){G.forceUpdate(),J(L)})}),destroy:function(){ne(),ee=!0}};if(!Qd(S,C))return G;G.setOptions(U).then(function(J){!ee&&U.onFirstUpdate&&U.onFirstUpdate(J)});function te(){L.orderedModifiers.forEach(function(J){var N=J.name,H=J.options,ie=H===void 0?{}:H,M=J.effect;if(typeof M=="function"){var B=M({state:L,name:N,instance:G,options:ie}),Q=function(){};V.push(B||Q)}})}function ne(){V.forEach(function(J){return J()}),V=[]}return G}}var Ny=Na(),ky=[Uu,zu,qu,Mu],Ly=Na({defaultModifiers:ky}),$y=[Uu,zu,qu,Mu,jf,Yf,Qf,Hf,Gf],Ku=Na({defaultModifiers:$y});const Xf=Object.freeze(Object.defineProperty({__proto__:null,afterMain:$f,afterRead:Nf,afterWrite:Mf,applyStyles:Mu,arrow:Hf,auto:Ia,basePlacements:dr,beforeMain:kf,beforeRead:If,beforeWrite:Rf,bottom:nn,clippingParents:Sf,computeStyles:qu,createPopper:Ku,createPopperBase:Ny,createPopperLite:Ly,detectOverflow:lr,end:sr,eventListeners:Uu,flip:Yf,hide:Gf,left:Lt,main:Lf,modifierPhases:Ff,offset:jf,placements:Ru,popper:er,popperGenerator:Na,popperOffsets:zu,preventOverflow:Qf,read:Df,reference:Of,right:sn,start:bs,top:kt,variationPlacements:Su,viewport:$u,write:Pf},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Wi=new Map,du={set(l,n,s){Wi.has(l)||Wi.set(l,new Map);const f=Wi.get(l);if(!f.has(n)&&f.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(f.keys())[0]}.`);return}f.set(n,s)},get(l,n){return Wi.has(l)&&Wi.get(l).get(n)||null},remove(l,n){if(!Wi.has(l))return;const s=Wi.get(l);s.delete(n),s.size===0&&Wi.delete(l)}},Ry=1e6,Py=1e3,Du="transitionend",Jf=l=>(l&&window.CSS&&window.CSS.escape&&(l=l.replace(/#([^\s"#']+)/g,(n,s)=>`#${CSS.escape(s)}`)),l),My=l=>l==null?`${l}`:Object.prototype.toString.call(l).match(/\s([a-z]+)/i)[1].toLowerCase(),Fy=l=>{do l+=Math.floor(Math.random()*Ry);while(document.getElementById(l));return l},By=l=>{if(!l)return 0;let{transitionDuration:n,transitionDelay:s}=window.getComputedStyle(l);const f=Number.parseFloat(n),v=Number.parseFloat(s);return!f&&!v?0:(n=n.split(",")[0],s=s.split(",")[0],(Number.parseFloat(n)+Number.parseFloat(s))*Py)},Zf=l=>{l.dispatchEvent(new Event(Du))},gi=l=>!l||typeof l!="object"?!1:(typeof l.jquery<"u"&&(l=l[0]),typeof l.nodeType<"u"),Hi=l=>gi(l)?l.jquery?l[0]:l:typeof l=="string"&&l.length>0?document.querySelector(Jf(l)):null,fr=l=>{if(!gi(l)||l.getClientRects().length===0)return!1;const n=getComputedStyle(l).getPropertyValue("visibility")==="visible",s=l.closest("details:not([open])");if(!s)return n;if(s!==l){const f=l.closest("summary");if(f&&f.parentNode!==s||f===null)return!1}return n},zi=l=>!l||l.nodeType!==Node.ELEMENT_NODE||l.classList.contains("disabled")?!0:typeof l.disabled<"u"?l.disabled:l.hasAttribute("disabled")&&l.getAttribute("disabled")!=="false",ep=l=>{if(!document.documentElement.attachShadow)return null;if(typeof l.getRootNode=="function"){const n=l.getRootNode();return n instanceof ShadowRoot?n:null}return l instanceof ShadowRoot?l:l.parentNode?ep(l.parentNode):null},Ca=()=>{},lo=l=>{l.offsetHeight},tp=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,fu=[],qy=l=>{document.readyState==="loading"?(fu.length||document.addEventListener("DOMContentLoaded",()=>{for(const n of fu)n()}),fu.push(l)):l()},vn=()=>document.documentElement.dir==="rtl",bn=l=>{qy(()=>{const n=tp();if(n){const s=l.NAME,f=n.fn[s];n.fn[s]=l.jQueryInterface,n.fn[s].Constructor=l,n.fn[s].noConflict=()=>(n.fn[s]=f,l.jQueryInterface)}})},Yt=(l,n=[],s=l)=>typeof l=="function"?l.call(...n):s,np=(l,n,s=!0)=>{if(!s){Yt(l);return}const v=By(n)+5;let x=!1;const E=({target:S})=>{S===n&&(x=!0,n.removeEventListener(Du,E),Yt(l))};n.addEventListener(Du,E),setTimeout(()=>{x||Zf(n)},v)},Yu=(l,n,s,f)=>{const v=l.length;let x=l.indexOf(n);return x===-1?!s&&f?l[v-1]:l[0]:(x+=s?1:-1,f&&(x=(x+v)%v),l[Math.max(0,Math.min(x,v-1))])},Uy=/[^.]*(?=\..*)\.|.*/,Wy=/\..*/,Vy=/::\d+$/,pu={};let Xd=1;const ip={mouseenter:"mouseover",mouseleave:"mouseout"},Hy=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function sp(l,n){return n&&`${n}::${Xd++}`||l.uidEvent||Xd++}function rp(l){const n=sp(l);return l.uidEvent=n,pu[n]=pu[n]||{},pu[n]}function zy(l,n){return function s(f){return Gu(f,{delegateTarget:l}),s.oneOff&&q.off(l,f.type,n),n.apply(l,[f])}}function Ky(l,n,s){return function f(v){const x=l.querySelectorAll(n);for(let{target:E}=v;E&&E!==this;E=E.parentNode)for(const S of x)if(S===E)return Gu(v,{delegateTarget:E}),f.oneOff&&q.off(l,v.type,n,s),s.apply(E,[v])}}function op(l,n,s=null){return Object.values(l).find(f=>f.callable===n&&f.delegationSelector===s)}function ap(l,n,s){const f=typeof n=="string",v=f?s:n||s;let x=lp(l);return Hy.has(x)||(x=l),[f,v,x]}function Jd(l,n,s,f,v){if(typeof n!="string"||!l)return;let[x,E,S]=ap(n,s,f);n in ip&&(E=(te=>function(ne){if(!ne.relatedTarget||ne.relatedTarget!==ne.delegateTarget&&!ne.delegateTarget.contains(ne.relatedTarget))return te.call(this,ne)})(E));const C=rp(l),U=C[S]||(C[S]={}),L=op(U,E,x?s:null);if(L){L.oneOff=L.oneOff&&v;return}const V=sp(E,n.replace(Uy,"")),ee=x?Ky(l,s,E):zy(l,E);ee.delegationSelector=x?s:null,ee.callable=E,ee.oneOff=v,ee.uidEvent=V,U[V]=ee,l.addEventListener(S,ee,x)}function Nu(l,n,s,f,v){const x=op(n[s],f,v);x&&(l.removeEventListener(s,x,!!v),delete n[s][x.uidEvent])}function Yy(l,n,s,f){const v=n[s]||{};for(const[x,E]of Object.entries(v))x.includes(f)&&Nu(l,n,s,E.callable,E.delegationSelector)}function lp(l){return l=l.replace(Wy,""),ip[l]||l}const q={on(l,n,s,f){Jd(l,n,s,f,!1)},one(l,n,s,f){Jd(l,n,s,f,!0)},off(l,n,s,f){if(typeof n!="string"||!l)return;const[v,x,E]=ap(n,s,f),S=E!==n,C=rp(l),U=C[E]||{},L=n.startsWith(".");if(typeof x<"u"){if(!Object.keys(U).length)return;Nu(l,C,E,x,v?s:null);return}if(L)for(const V of Object.keys(C))Yy(l,C,V,n.slice(1));for(const[V,ee]of Object.entries(U)){const G=V.replace(Vy,"");(!S||n.includes(G))&&Nu(l,C,E,ee.callable,ee.delegationSelector)}},trigger(l,n,s){if(typeof n!="string"||!l)return null;const f=tp(),v=lp(n),x=n!==v;let E=null,S=!0,C=!0,U=!1;x&&f&&(E=f.Event(n,s),f(l).trigger(E),S=!E.isPropagationStopped(),C=!E.isImmediatePropagationStopped(),U=E.isDefaultPrevented());const L=Gu(new Event(n,{bubbles:S,cancelable:!0}),s);return U&&L.preventDefault(),C&&l.dispatchEvent(L),L.defaultPrevented&&E&&E.preventDefault(),L}};function Gu(l,n={}){for(const[s,f]of Object.entries(n))try{l[s]=f}catch{Object.defineProperty(l,s,{configurable:!0,get(){return f}})}return l}function Zd(l){if(l==="true")return!0;if(l==="false")return!1;if(l===Number(l).toString())return Number(l);if(l===""||l==="null")return null;if(typeof l!="string")return l;try{return JSON.parse(decodeURIComponent(l))}catch{return l}}function hu(l){return l.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}const bi={setDataAttribute(l,n,s){l.setAttribute(`data-bs-${hu(n)}`,s)},removeDataAttribute(l,n){l.removeAttribute(`data-bs-${hu(n)}`)},getDataAttributes(l){if(!l)return{};const n={},s=Object.keys(l.dataset).filter(f=>f.startsWith("bs")&&!f.startsWith("bsConfig"));for(const f of s){let v=f.replace(/^bs/,"");v=v.charAt(0).toLowerCase()+v.slice(1),n[v]=Zd(l.dataset[f])}return n},getDataAttribute(l,n){return Zd(l.getAttribute(`data-bs-${hu(n)}`))}};class uo{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(n){return n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n}_mergeConfigObj(n,s){const f=gi(s)?bi.getDataAttribute(s,"config"):{};return{...this.constructor.Default,...typeof f=="object"?f:{},...gi(s)?bi.getDataAttributes(s):{},...typeof n=="object"?n:{}}}_typeCheckConfig(n,s=this.constructor.DefaultType){for(const[f,v]of Object.entries(s)){const x=n[f],E=gi(x)?"element":My(x);if(!new RegExp(v).test(E))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${f}" provided type "${E}" but expected type "${v}".`)}}}const Gy="5.3.8";class $n extends uo{constructor(n,s){super(),n=Hi(n),n&&(this._element=n,this._config=this._getConfig(s),du.set(this._element,this.constructor.DATA_KEY,this))}dispose(){du.remove(this._element,this.constructor.DATA_KEY),q.off(this._element,this.constructor.EVENT_KEY);for(const n of Object.getOwnPropertyNames(this))this[n]=null}_queueCallback(n,s,f=!0){np(n,s,f)}_getConfig(n){return n=this._mergeConfigObj(n,this._element),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}static getInstance(n){return du.get(Hi(n),this.DATA_KEY)}static getOrCreateInstance(n,s={}){return this.getInstance(n)||new this(n,typeof s=="object"?s:null)}static get VERSION(){return Gy}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(n){return`${n}${this.EVENT_KEY}`}}const _u=l=>{let n=l.getAttribute("data-bs-target");if(!n||n==="#"){let s=l.getAttribute("href");if(!s||!s.includes("#")&&!s.startsWith("."))return null;s.includes("#")&&!s.startsWith("#")&&(s=`#${s.split("#")[1]}`),n=s&&s!=="#"?s.trim():null}return n?n.split(",").map(s=>Jf(s)).join(","):null},re={find(l,n=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(n,l))},findOne(l,n=document.documentElement){return Element.prototype.querySelector.call(n,l)},children(l,n){return[].concat(...l.children).filter(s=>s.matches(n))},parents(l,n){const s=[];let f=l.parentNode.closest(n);for(;f;)s.push(f),f=f.parentNode.closest(n);return s},prev(l,n){let s=l.previousElementSibling;for(;s;){if(s.matches(n))return[s];s=s.previousElementSibling}return[]},next(l,n){let s=l.nextElementSibling;for(;s;){if(s.matches(n))return[s];s=s.nextElementSibling}return[]},focusableChildren(l){const n=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(s=>`${s}:not([tabindex^="-"])`).join(",");return this.find(n,l).filter(s=>!zi(s)&&fr(s))},getSelectorFromElement(l){const n=_u(l);return n&&re.findOne(n)?n:null},getElementFromSelector(l){const n=_u(l);return n?re.findOne(n):null},getMultipleElementsFromSelector(l){const n=_u(l);return n?re.find(n):[]}},ka=(l,n="hide")=>{const s=`click.dismiss${l.EVENT_KEY}`,f=l.NAME;q.on(document,s,`[data-bs-dismiss="${f}"]`,function(v){if(["A","AREA"].includes(this.tagName)&&v.preventDefault(),zi(this))return;const x=re.getElementFromSelector(this)||this.closest(`.${f}`);l.getOrCreateInstance(x)[n]()})},jy="alert",Qy="bs.alert",up=`.${Qy}`,Xy=`close${up}`,Jy=`closed${up}`,Zy="fade",e0="show";class La extends $n{static get NAME(){return jy}close(){if(q.trigger(this._element,Xy).defaultPrevented)return;this._element.classList.remove(e0);const s=this._element.classList.contains(Zy);this._queueCallback(()=>this._destroyElement(),this._element,s)}_destroyElement(){this._element.remove(),q.trigger(this._element,Jy),this.dispose()}static jQueryInterface(n){return this.each(function(){const s=La.getOrCreateInstance(this);if(typeof n=="string"){if(s[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);s[n](this)}})}}ka(La,"close");bn(La);const t0="button",n0="bs.button",i0=`.${n0}`,s0=".data-api",r0="active",ef='[data-bs-toggle="button"]',o0=`click${i0}${s0}`;class $a extends $n{static get NAME(){return t0}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(r0))}static jQueryInterface(n){return this.each(function(){const s=$a.getOrCreateInstance(this);n==="toggle"&&s[n]()})}}q.on(document,o0,ef,l=>{l.preventDefault();const n=l.target.closest(ef);$a.getOrCreateInstance(n).toggle()});bn($a);const a0="swipe",pr=".bs.swipe",l0=`touchstart${pr}`,u0=`touchmove${pr}`,c0=`touchend${pr}`,d0=`pointerdown${pr}`,f0=`pointerup${pr}`,p0="touch",h0="pen",_0="pointer-event",m0=40,v0={endCallback:null,leftCallback:null,rightCallback:null},g0={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Sa extends uo{constructor(n,s){super(),this._element=n,!(!n||!Sa.isSupported())&&(this._config=this._getConfig(s),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return v0}static get DefaultType(){return g0}static get NAME(){return a0}dispose(){q.off(this._element,pr)}_start(n){if(!this._supportPointerEvents){this._deltaX=n.touches[0].clientX;return}this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX)}_end(n){this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX-this._deltaX),this._handleSwipe(),Yt(this._config.endCallback)}_move(n){this._deltaX=n.touches&&n.touches.length>1?0:n.touches[0].clientX-this._deltaX}_handleSwipe(){const n=Math.abs(this._deltaX);if(n<=m0)return;const s=n/this._deltaX;this._deltaX=0,s&&Yt(s>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(q.on(this._element,d0,n=>this._start(n)),q.on(this._element,f0,n=>this._end(n)),this._element.classList.add(_0)):(q.on(this._element,l0,n=>this._start(n)),q.on(this._element,u0,n=>this._move(n)),q.on(this._element,c0,n=>this._end(n)))}_eventIsPointerPenTouch(n){return this._supportPointerEvents&&(n.pointerType===h0||n.pointerType===p0)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const b0="carousel",y0="bs.carousel",Gi=`.${y0}`,cp=".data-api",w0="ArrowLeft",E0="ArrowRight",x0=500,eo="next",Js="prev",tr="left",xa="right",A0=`slide${Gi}`,mu=`slid${Gi}`,T0=`keydown${Gi}`,C0=`mouseenter${Gi}`,S0=`mouseleave${Gi}`,O0=`dragstart${Gi}`,I0=`load${Gi}${cp}`,D0=`click${Gi}${cp}`,dp="carousel",ma="active",N0="slide",k0="carousel-item-end",L0="carousel-item-start",$0="carousel-item-next",R0="carousel-item-prev",fp=".active",pp=".carousel-item",P0=fp+pp,M0=".carousel-item img",F0=".carousel-indicators",B0="[data-bs-slide], [data-bs-slide-to]",q0='[data-bs-ride="carousel"]',U0={[w0]:xa,[E0]:tr},W0={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},V0={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class co extends $n{constructor(n,s){super(n,s),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=re.findOne(F0,this._element),this._addEventListeners(),this._config.ride===dp&&this.cycle()}static get Default(){return W0}static get DefaultType(){return V0}static get NAME(){return b0}next(){this._slide(eo)}nextWhenVisible(){!document.hidden&&fr(this._element)&&this.next()}prev(){this._slide(Js)}pause(){this._isSliding&&Zf(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){q.one(this._element,mu,()=>this.cycle());return}this.cycle()}}to(n){const s=this._getItems();if(n>s.length-1||n<0)return;if(this._isSliding){q.one(this._element,mu,()=>this.to(n));return}const f=this._getItemIndex(this._getActive());if(f===n)return;const v=n>f?eo:Js;this._slide(v,s[n])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(n){return n.defaultInterval=n.interval,n}_addEventListeners(){this._config.keyboard&&q.on(this._element,T0,n=>this._keydown(n)),this._config.pause==="hover"&&(q.on(this._element,C0,()=>this.pause()),q.on(this._element,S0,()=>this._maybeEnableCycle())),this._config.touch&&Sa.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const f of re.find(M0,this._element))q.on(f,O0,v=>v.preventDefault());const s={leftCallback:()=>this._slide(this._directionToOrder(tr)),rightCallback:()=>this._slide(this._directionToOrder(xa)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),x0+this._config.interval))}};this._swipeHelper=new Sa(this._element,s)}_keydown(n){if(/input|textarea/i.test(n.target.tagName))return;const s=U0[n.key];s&&(n.preventDefault(),this._slide(this._directionToOrder(s)))}_getItemIndex(n){return this._getItems().indexOf(n)}_setActiveIndicatorElement(n){if(!this._indicatorsElement)return;const s=re.findOne(fp,this._indicatorsElement);s.classList.remove(ma),s.removeAttribute("aria-current");const f=re.findOne(`[data-bs-slide-to="${n}"]`,this._indicatorsElement);f&&(f.classList.add(ma),f.setAttribute("aria-current","true"))}_updateInterval(){const n=this._activeElement||this._getActive();if(!n)return;const s=Number.parseInt(n.getAttribute("data-bs-interval"),10);this._config.interval=s||this._config.defaultInterval}_slide(n,s=null){if(this._isSliding)return;const f=this._getActive(),v=n===eo,x=s||Yu(this._getItems(),f,v,this._config.wrap);if(x===f)return;const E=this._getItemIndex(x),S=G=>q.trigger(this._element,G,{relatedTarget:x,direction:this._orderToDirection(n),from:this._getItemIndex(f),to:E});if(S(A0).defaultPrevented||!f||!x)return;const U=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(E),this._activeElement=x;const L=v?L0:k0,V=v?$0:R0;x.classList.add(V),lo(x),f.classList.add(L),x.classList.add(L);const ee=()=>{x.classList.remove(L,V),x.classList.add(ma),f.classList.remove(ma,V,L),this._isSliding=!1,S(mu)};this._queueCallback(ee,f,this._isAnimated()),U&&this.cycle()}_isAnimated(){return this._element.classList.contains(N0)}_getActive(){return re.findOne(P0,this._element)}_getItems(){return re.find(pp,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(n){return vn()?n===tr?Js:eo:n===tr?eo:Js}_orderToDirection(n){return vn()?n===Js?tr:xa:n===Js?xa:tr}static jQueryInterface(n){return this.each(function(){const s=co.getOrCreateInstance(this,n);if(typeof n=="number"){s.to(n);return}if(typeof n=="string"){if(s[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);s[n]()}})}}q.on(document,D0,B0,function(l){const n=re.getElementFromSelector(this);if(!n||!n.classList.contains(dp))return;l.preventDefault();const s=co.getOrCreateInstance(n),f=this.getAttribute("data-bs-slide-to");if(f){s.to(f),s._maybeEnableCycle();return}if(bi.getDataAttribute(this,"slide")==="next"){s.next(),s._maybeEnableCycle();return}s.prev(),s._maybeEnableCycle()});q.on(window,I0,()=>{const l=re.find(q0);for(const n of l)co.getOrCreateInstance(n)});bn(co);const H0="collapse",z0="bs.collapse",fo=`.${z0}`,K0=".data-api",Y0=`show${fo}`,G0=`shown${fo}`,j0=`hide${fo}`,Q0=`hidden${fo}`,X0=`click${fo}${K0}`,vu="show",ir="collapse",va="collapsing",J0="collapsed",Z0=`:scope .${ir} .${ir}`,e1="collapse-horizontal",t1="width",n1="height",i1=".collapse.show, .collapse.collapsing",ku='[data-bs-toggle="collapse"]',s1={parent:null,toggle:!0},r1={parent:"(null|element)",toggle:"boolean"};class oo extends $n{constructor(n,s){super(n,s),this._isTransitioning=!1,this._triggerArray=[];const f=re.find(ku);for(const v of f){const x=re.getSelectorFromElement(v),E=re.find(x).filter(S=>S===this._element);x!==null&&E.length&&this._triggerArray.push(v)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return s1}static get DefaultType(){return r1}static get NAME(){return H0}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let n=[];if(this._config.parent&&(n=this._getFirstLevelChildren(i1).filter(S=>S!==this._element).map(S=>oo.getOrCreateInstance(S,{toggle:!1}))),n.length&&n[0]._isTransitioning||q.trigger(this._element,Y0).defaultPrevented)return;for(const S of n)S.hide();const f=this._getDimension();this._element.classList.remove(ir),this._element.classList.add(va),this._element.style[f]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const v=()=>{this._isTransitioning=!1,this._element.classList.remove(va),this._element.classList.add(ir,vu),this._element.style[f]="",q.trigger(this._element,G0)},E=`scroll${f[0].toUpperCase()+f.slice(1)}`;this._queueCallback(v,this._element,!0),this._element.style[f]=`${this._element[E]}px`}hide(){if(this._isTransitioning||!this._isShown()||q.trigger(this._element,j0).defaultPrevented)return;const s=this._getDimension();this._element.style[s]=`${this._element.getBoundingClientRect()[s]}px`,lo(this._element),this._element.classList.add(va),this._element.classList.remove(ir,vu);for(const v of this._triggerArray){const x=re.getElementFromSelector(v);x&&!this._isShown(x)&&this._addAriaAndCollapsedClass([v],!1)}this._isTransitioning=!0;const f=()=>{this._isTransitioning=!1,this._element.classList.remove(va),this._element.classList.add(ir),q.trigger(this._element,Q0)};this._element.style[s]="",this._queueCallback(f,this._element,!0)}_isShown(n=this._element){return n.classList.contains(vu)}_configAfterMerge(n){return n.toggle=!!n.toggle,n.parent=Hi(n.parent),n}_getDimension(){return this._element.classList.contains(e1)?t1:n1}_initializeChildren(){if(!this._config.parent)return;const n=this._getFirstLevelChildren(ku);for(const s of n){const f=re.getElementFromSelector(s);f&&this._addAriaAndCollapsedClass([s],this._isShown(f))}}_getFirstLevelChildren(n){const s=re.find(Z0,this._config.parent);return re.find(n,this._config.parent).filter(f=>!s.includes(f))}_addAriaAndCollapsedClass(n,s){if(n.length)for(const f of n)f.classList.toggle(J0,!s),f.setAttribute("aria-expanded",s)}static jQueryInterface(n){const s={};return typeof n=="string"&&/show|hide/.test(n)&&(s.toggle=!1),this.each(function(){const f=oo.getOrCreateInstance(this,s);if(typeof n=="string"){if(typeof f[n]>"u")throw new TypeError(`No method named "${n}"`);f[n]()}})}}q.on(document,X0,ku,function(l){(l.target.tagName==="A"||l.delegateTarget&&l.delegateTarget.tagName==="A")&&l.preventDefault();for(const n of re.getMultipleElementsFromSelector(this))oo.getOrCreateInstance(n,{toggle:!1}).toggle()});bn(oo);const tf="dropdown",o1="bs.dropdown",ws=`.${o1}`,ju=".data-api",a1="Escape",nf="Tab",l1="ArrowUp",sf="ArrowDown",u1=2,c1=`hide${ws}`,d1=`hidden${ws}`,f1=`show${ws}`,p1=`shown${ws}`,hp=`click${ws}${ju}`,_p=`keydown${ws}${ju}`,h1=`keyup${ws}${ju}`,nr="show",_1="dropup",m1="dropend",v1="dropstart",g1="dropup-center",b1="dropdown-center",ms='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',y1=`${ms}.${nr}`,Aa=".dropdown-menu",w1=".navbar",E1=".navbar-nav",x1=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",A1=vn()?"top-end":"top-start",T1=vn()?"top-start":"top-end",C1=vn()?"bottom-end":"bottom-start",S1=vn()?"bottom-start":"bottom-end",O1=vn()?"left-start":"right-start",I1=vn()?"right-start":"left-start",D1="top",N1="bottom",k1={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},L1={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Qn extends $n{constructor(n,s){super(n,s),this._popper=null,this._parent=this._element.parentNode,this._menu=re.next(this._element,Aa)[0]||re.prev(this._element,Aa)[0]||re.findOne(Aa,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return k1}static get DefaultType(){return L1}static get NAME(){return tf}toggle(){return this._isShown()?this.hide():this.show()}show(){if(zi(this._element)||this._isShown())return;const n={relatedTarget:this._element};if(!q.trigger(this._element,f1,n).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(E1))for(const f of[].concat(...document.body.children))q.on(f,"mouseover",Ca);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(nr),this._element.classList.add(nr),q.trigger(this._element,p1,n)}}hide(){if(zi(this._element)||!this._isShown())return;const n={relatedTarget:this._element};this._completeHide(n)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(n){if(!q.trigger(this._element,c1,n).defaultPrevented){if("ontouchstart"in document.documentElement)for(const f of[].concat(...document.body.children))q.off(f,"mouseover",Ca);this._popper&&this._popper.destroy(),this._menu.classList.remove(nr),this._element.classList.remove(nr),this._element.setAttribute("aria-expanded","false"),bi.removeDataAttribute(this._menu,"popper"),q.trigger(this._element,d1,n)}}_getConfig(n){if(n=super._getConfig(n),typeof n.reference=="object"&&!gi(n.reference)&&typeof n.reference.getBoundingClientRect!="function")throw new TypeError(`${tf.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return n}_createPopper(){if(typeof Xf>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let n=this._element;this._config.reference==="parent"?n=this._parent:gi(this._config.reference)?n=Hi(this._config.reference):typeof this._config.reference=="object"&&(n=this._config.reference);const s=this._getPopperConfig();this._popper=Ku(n,this._menu,s)}_isShown(){return this._menu.classList.contains(nr)}_getPlacement(){const n=this._parent;if(n.classList.contains(m1))return O1;if(n.classList.contains(v1))return I1;if(n.classList.contains(g1))return D1;if(n.classList.contains(b1))return N1;const s=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return n.classList.contains(_1)?s?T1:A1:s?S1:C1}_detectNavbar(){return this._element.closest(w1)!==null}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(s=>Number.parseInt(s,10)):typeof n=="function"?s=>n(s,this._element):n}_getPopperConfig(){const n={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(bi.setDataAttribute(this._menu,"popper","static"),n.modifiers=[{name:"applyStyles",enabled:!1}]),{...n,...Yt(this._config.popperConfig,[void 0,n])}}_selectMenuItem({key:n,target:s}){const f=re.find(x1,this._menu).filter(v=>fr(v));f.length&&Yu(f,s,n===sf,!f.includes(s)).focus()}static jQueryInterface(n){return this.each(function(){const s=Qn.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof s[n]>"u")throw new TypeError(`No method named "${n}"`);s[n]()}})}static clearMenus(n){if(n.button===u1||n.type==="keyup"&&n.key!==nf)return;const s=re.find(y1);for(const f of s){const v=Qn.getInstance(f);if(!v||v._config.autoClose===!1)continue;const x=n.composedPath(),E=x.includes(v._menu);if(x.includes(v._element)||v._config.autoClose==="inside"&&!E||v._config.autoClose==="outside"&&E||v._menu.contains(n.target)&&(n.type==="keyup"&&n.key===nf||/input|select|option|textarea|form/i.test(n.target.tagName)))continue;const S={relatedTarget:v._element};n.type==="click"&&(S.clickEvent=n),v._completeHide(S)}}static dataApiKeydownHandler(n){const s=/input|textarea/i.test(n.target.tagName),f=n.key===a1,v=[l1,sf].includes(n.key);if(!v&&!f||s&&!f)return;n.preventDefault();const x=this.matches(ms)?this:re.prev(this,ms)[0]||re.next(this,ms)[0]||re.findOne(ms,n.delegateTarget.parentNode),E=Qn.getOrCreateInstance(x);if(v){n.stopPropagation(),E.show(),E._selectMenuItem(n);return}E._isShown()&&(n.stopPropagation(),E.hide(),x.focus())}}q.on(document,_p,ms,Qn.dataApiKeydownHandler);q.on(document,_p,Aa,Qn.dataApiKeydownHandler);q.on(document,hp,Qn.clearMenus);q.on(document,h1,Qn.clearMenus);q.on(document,hp,ms,function(l){l.preventDefault(),Qn.getOrCreateInstance(this).toggle()});bn(Qn);const mp="backdrop",$1="fade",rf="show",of=`mousedown.bs.${mp}`,R1={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},P1={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class vp extends uo{constructor(n){super(),this._config=this._getConfig(n),this._isAppended=!1,this._element=null}static get Default(){return R1}static get DefaultType(){return P1}static get NAME(){return mp}show(n){if(!this._config.isVisible){Yt(n);return}this._append();const s=this._getElement();this._config.isAnimated&&lo(s),s.classList.add(rf),this._emulateAnimation(()=>{Yt(n)})}hide(n){if(!this._config.isVisible){Yt(n);return}this._getElement().classList.remove(rf),this._emulateAnimation(()=>{this.dispose(),Yt(n)})}dispose(){this._isAppended&&(q.off(this._element,of),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const n=document.createElement("div");n.className=this._config.className,this._config.isAnimated&&n.classList.add($1),this._element=n}return this._element}_configAfterMerge(n){return n.rootElement=Hi(n.rootElement),n}_append(){if(this._isAppended)return;const n=this._getElement();this._config.rootElement.append(n),q.on(n,of,()=>{Yt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(n){np(n,this._getElement(),this._config.isAnimated)}}const M1="focustrap",F1="bs.focustrap",Oa=`.${F1}`,B1=`focusin${Oa}`,q1=`keydown.tab${Oa}`,U1="Tab",W1="forward",af="backward",V1={autofocus:!0,trapElement:null},H1={autofocus:"boolean",trapElement:"element"};class gp extends uo{constructor(n){super(),this._config=this._getConfig(n),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return V1}static get DefaultType(){return H1}static get NAME(){return M1}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),q.off(document,Oa),q.on(document,B1,n=>this._handleFocusin(n)),q.on(document,q1,n=>this._handleKeydown(n)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,q.off(document,Oa))}_handleFocusin(n){const{trapElement:s}=this._config;if(n.target===document||n.target===s||s.contains(n.target))return;const f=re.focusableChildren(s);f.length===0?s.focus():this._lastTabNavDirection===af?f[f.length-1].focus():f[0].focus()}_handleKeydown(n){n.key===U1&&(this._lastTabNavDirection=n.shiftKey?af:W1)}}const lf=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",uf=".sticky-top",ga="padding-right",cf="margin-right";class Lu{constructor(){this._element=document.body}getWidth(){const n=document.documentElement.clientWidth;return Math.abs(window.innerWidth-n)}hide(){const n=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ga,s=>s+n),this._setElementAttributes(lf,ga,s=>s+n),this._setElementAttributes(uf,cf,s=>s-n)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ga),this._resetElementAttributes(lf,ga),this._resetElementAttributes(uf,cf)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(n,s,f){const v=this.getWidth(),x=E=>{if(E!==this._element&&window.innerWidth>E.clientWidth+v)return;this._saveInitialAttribute(E,s);const S=window.getComputedStyle(E).getPropertyValue(s);E.style.setProperty(s,`${f(Number.parseFloat(S))}px`)};this._applyManipulationCallback(n,x)}_saveInitialAttribute(n,s){const f=n.style.getPropertyValue(s);f&&bi.setDataAttribute(n,s,f)}_resetElementAttributes(n,s){const f=v=>{const x=bi.getDataAttribute(v,s);if(x===null){v.style.removeProperty(s);return}bi.removeDataAttribute(v,s),v.style.setProperty(s,x)};this._applyManipulationCallback(n,f)}_applyManipulationCallback(n,s){if(gi(n)){s(n);return}for(const f of re.find(n,this._element))s(f)}}const z1="modal",K1="bs.modal",gn=`.${K1}`,Y1=".data-api",G1="Escape",j1=`hide${gn}`,Q1=`hidePrevented${gn}`,bp=`hidden${gn}`,yp=`show${gn}`,X1=`shown${gn}`,J1=`resize${gn}`,Z1=`click.dismiss${gn}`,ew=`mousedown.dismiss${gn}`,tw=`keydown.dismiss${gn}`,nw=`click${gn}${Y1}`,df="modal-open",iw="fade",ff="show",gu="modal-static",sw=".modal.show",rw=".modal-dialog",ow=".modal-body",aw='[data-bs-toggle="modal"]',lw={backdrop:!0,focus:!0,keyboard:!0},uw={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ur extends $n{constructor(n,s){super(n,s),this._dialog=re.findOne(rw,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Lu,this._addEventListeners()}static get Default(){return lw}static get DefaultType(){return uw}static get NAME(){return z1}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){this._isShown||this._isTransitioning||q.trigger(this._element,yp,{relatedTarget:n}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(df),this._adjustDialog(),this._backdrop.show(()=>this._showElement(n)))}hide(){!this._isShown||this._isTransitioning||q.trigger(this._element,j1).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ff),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){q.off(window,gn),q.off(this._dialog,gn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new vp({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new gp({trapElement:this._element})}_showElement(n){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const s=re.findOne(ow,this._dialog);s&&(s.scrollTop=0),lo(this._element),this._element.classList.add(ff);const f=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,q.trigger(this._element,X1,{relatedTarget:n})};this._queueCallback(f,this._dialog,this._isAnimated())}_addEventListeners(){q.on(this._element,tw,n=>{if(n.key===G1){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),q.on(window,J1,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),q.on(this._element,ew,n=>{q.one(this._element,Z1,s=>{if(!(this._element!==n.target||this._element!==s.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(df),this._resetAdjustments(),this._scrollBar.reset(),q.trigger(this._element,bp)})}_isAnimated(){return this._element.classList.contains(iw)}_triggerBackdropTransition(){if(q.trigger(this._element,Q1).defaultPrevented)return;const s=this._element.scrollHeight>document.documentElement.clientHeight,f=this._element.style.overflowY;f==="hidden"||this._element.classList.contains(gu)||(s||(this._element.style.overflowY="hidden"),this._element.classList.add(gu),this._queueCallback(()=>{this._element.classList.remove(gu),this._queueCallback(()=>{this._element.style.overflowY=f},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const n=this._element.scrollHeight>document.documentElement.clientHeight,s=this._scrollBar.getWidth(),f=s>0;if(f&&!n){const v=vn()?"paddingLeft":"paddingRight";this._element.style[v]=`${s}px`}if(!f&&n){const v=vn()?"paddingRight":"paddingLeft";this._element.style[v]=`${s}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(n,s){return this.each(function(){const f=ur.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof f[n]>"u")throw new TypeError(`No method named "${n}"`);f[n](s)}})}}q.on(document,nw,aw,function(l){const n=re.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&l.preventDefault(),q.one(n,yp,v=>{v.defaultPrevented||q.one(n,bp,()=>{fr(this)&&this.focus()})});const s=re.findOne(sw);s&&ur.getInstance(s).hide(),ur.getOrCreateInstance(n).toggle(this)});ka(ur);bn(ur);const cw="offcanvas",dw="bs.offcanvas",wi=`.${dw}`,wp=".data-api",fw=`load${wi}${wp}`,pw="Escape",pf="show",hf="showing",_f="hiding",hw="offcanvas-backdrop",Ep=".offcanvas.show",_w=`show${wi}`,mw=`shown${wi}`,vw=`hide${wi}`,mf=`hidePrevented${wi}`,xp=`hidden${wi}`,gw=`resize${wi}`,bw=`click${wi}${wp}`,yw=`keydown.dismiss${wi}`,ww='[data-bs-toggle="offcanvas"]',Ew={backdrop:!0,keyboard:!0,scroll:!1},xw={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ki extends $n{constructor(n,s){super(n,s),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ew}static get DefaultType(){return xw}static get NAME(){return cw}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){if(this._isShown||q.trigger(this._element,_w,{relatedTarget:n}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Lu().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(hf);const f=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(pf),this._element.classList.remove(hf),q.trigger(this._element,mw,{relatedTarget:n})};this._queueCallback(f,this._element,!0)}hide(){if(!this._isShown||q.trigger(this._element,vw).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(_f),this._backdrop.hide();const s=()=>{this._element.classList.remove(pf,_f),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Lu().reset(),q.trigger(this._element,xp)};this._queueCallback(s,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const n=()=>{if(this._config.backdrop==="static"){q.trigger(this._element,mf);return}this.hide()},s=!!this._config.backdrop;return new vp({className:hw,isVisible:s,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:s?n:null})}_initializeFocusTrap(){return new gp({trapElement:this._element})}_addEventListeners(){q.on(this._element,yw,n=>{if(n.key===pw){if(this._config.keyboard){this.hide();return}q.trigger(this._element,mf)}})}static jQueryInterface(n){return this.each(function(){const s=Ki.getOrCreateInstance(this,n);if(typeof n=="string"){if(s[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);s[n](this)}})}}q.on(document,bw,ww,function(l){const n=re.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&l.preventDefault(),zi(this))return;q.one(n,xp,()=>{fr(this)&&this.focus()});const s=re.findOne(Ep);s&&s!==n&&Ki.getInstance(s).hide(),Ki.getOrCreateInstance(n).toggle(this)});q.on(window,fw,()=>{for(const l of re.find(Ep))Ki.getOrCreateInstance(l).show()});q.on(window,gw,()=>{for(const l of re.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(l).position!=="fixed"&&Ki.getOrCreateInstance(l).hide()});ka(Ki);bn(Ki);const Aw=/^aria-[\w-]*$/i,Ap={"*":["class","dir","id","lang","role",Aw],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Tw=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Cw=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Sw=(l,n)=>{const s=l.nodeName.toLowerCase();return n.includes(s)?Tw.has(s)?!!Cw.test(l.nodeValue):!0:n.filter(f=>f instanceof RegExp).some(f=>f.test(s))};function Ow(l,n,s){if(!l.length)return l;if(s&&typeof s=="function")return s(l);const v=new window.DOMParser().parseFromString(l,"text/html"),x=[].concat(...v.body.querySelectorAll("*"));for(const E of x){const S=E.nodeName.toLowerCase();if(!Object.keys(n).includes(S)){E.remove();continue}const C=[].concat(...E.attributes),U=[].concat(n["*"]||[],n[S]||[]);for(const L of C)Sw(L,U)||E.removeAttribute(L.nodeName)}return v.body.innerHTML}const Iw="TemplateFactory",Dw={allowList:Ap,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Nw={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},kw={entry:"(string|element|function|null)",selector:"(string|element)"};class Lw extends uo{constructor(n){super(),this._config=this._getConfig(n)}static get Default(){return Dw}static get DefaultType(){return Nw}static get NAME(){return Iw}getContent(){return Object.values(this._config.content).map(n=>this._resolvePossibleFunction(n)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(n){return this._checkContent(n),this._config.content={...this._config.content,...n},this}toHtml(){const n=document.createElement("div");n.innerHTML=this._maybeSanitize(this._config.template);for(const[v,x]of Object.entries(this._config.content))this._setContent(n,x,v);const s=n.children[0],f=this._resolvePossibleFunction(this._config.extraClass);return f&&s.classList.add(...f.split(" ")),s}_typeCheckConfig(n){super._typeCheckConfig(n),this._checkContent(n.content)}_checkContent(n){for(const[s,f]of Object.entries(n))super._typeCheckConfig({selector:s,entry:f},kw)}_setContent(n,s,f){const v=re.findOne(f,n);if(v){if(s=this._resolvePossibleFunction(s),!s){v.remove();return}if(gi(s)){this._putElementInTemplate(Hi(s),v);return}if(this._config.html){v.innerHTML=this._maybeSanitize(s);return}v.textContent=s}}_maybeSanitize(n){return this._config.sanitize?Ow(n,this._config.allowList,this._config.sanitizeFn):n}_resolvePossibleFunction(n){return Yt(n,[void 0,this])}_putElementInTemplate(n,s){if(this._config.html){s.innerHTML="",s.append(n);return}s.textContent=n.textContent}}const $w="tooltip",Rw=new Set(["sanitize","allowList","sanitizeFn"]),bu="fade",Pw="modal",ba="show",Mw=".tooltip-inner",vf=`.${Pw}`,gf="hide.bs.modal",to="hover",yu="focus",wu="click",Fw="manual",Bw="hide",qw="hidden",Uw="show",Ww="shown",Vw="inserted",Hw="click",zw="focusin",Kw="focusout",Yw="mouseenter",Gw="mouseleave",jw={AUTO:"auto",TOP:"top",RIGHT:vn()?"left":"right",BOTTOM:"bottom",LEFT:vn()?"right":"left"},Qw={allowList:Ap,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Xw={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class hr extends $n{constructor(n,s){if(typeof Xf>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(n,s),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Qw}static get DefaultType(){return Xw}static get NAME(){return $w}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),q.off(this._element.closest(vf),gf,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const n=q.trigger(this._element,this.constructor.eventName(Uw)),f=(ep(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(n.defaultPrevented||!f)return;this._disposePopper();const v=this._getTipElement();this._element.setAttribute("aria-describedby",v.getAttribute("id"));const{container:x}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(x.append(v),q.trigger(this._element,this.constructor.eventName(Vw))),this._popper=this._createPopper(v),v.classList.add(ba),"ontouchstart"in document.documentElement)for(const S of[].concat(...document.body.children))q.on(S,"mouseover",Ca);const E=()=>{q.trigger(this._element,this.constructor.eventName(Ww)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(E,this.tip,this._isAnimated())}hide(){if(!this._isShown()||q.trigger(this._element,this.constructor.eventName(Bw)).defaultPrevented)return;if(this._getTipElement().classList.remove(ba),"ontouchstart"in document.documentElement)for(const v of[].concat(...document.body.children))q.off(v,"mouseover",Ca);this._activeTrigger[wu]=!1,this._activeTrigger[yu]=!1,this._activeTrigger[to]=!1,this._isHovered=null;const f=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),q.trigger(this._element,this.constructor.eventName(qw)))};this._queueCallback(f,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(n){const s=this._getTemplateFactory(n).toHtml();if(!s)return null;s.classList.remove(bu,ba),s.classList.add(`bs-${this.constructor.NAME}-auto`);const f=Fy(this.constructor.NAME).toString();return s.setAttribute("id",f),this._isAnimated()&&s.classList.add(bu),s}setContent(n){this._newContent=n,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(n){return this._templateFactory?this._templateFactory.changeContent(n):this._templateFactory=new Lw({...this._config,content:n,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Mw]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(n){return this.constructor.getOrCreateInstance(n.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(bu)}_isShown(){return this.tip&&this.tip.classList.contains(ba)}_createPopper(n){const s=Yt(this._config.placement,[this,n,this._element]),f=jw[s.toUpperCase()];return Ku(this._element,n,this._getPopperConfig(f))}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(s=>Number.parseInt(s,10)):typeof n=="function"?s=>n(s,this._element):n}_resolvePossibleFunction(n){return Yt(n,[this._element,this._element])}_getPopperConfig(n){const s={placement:n,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:f=>{this._getTipElement().setAttribute("data-popper-placement",f.state.placement)}}]};return{...s,...Yt(this._config.popperConfig,[void 0,s])}}_setListeners(){const n=this._config.trigger.split(" ");for(const s of n)if(s==="click")q.on(this._element,this.constructor.eventName(Hw),this._config.selector,f=>{const v=this._initializeOnDelegatedTarget(f);v._activeTrigger[wu]=!(v._isShown()&&v._activeTrigger[wu]),v.toggle()});else if(s!==Fw){const f=s===to?this.constructor.eventName(Yw):this.constructor.eventName(zw),v=s===to?this.constructor.eventName(Gw):this.constructor.eventName(Kw);q.on(this._element,f,this._config.selector,x=>{const E=this._initializeOnDelegatedTarget(x);E._activeTrigger[x.type==="focusin"?yu:to]=!0,E._enter()}),q.on(this._element,v,this._config.selector,x=>{const E=this._initializeOnDelegatedTarget(x);E._activeTrigger[x.type==="focusout"?yu:to]=E._element.contains(x.relatedTarget),E._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},q.on(this._element.closest(vf),gf,this._hideModalHandler)}_fixTitle(){const n=this._element.getAttribute("title");n&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",n),this._element.setAttribute("data-bs-original-title",n),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(n,s){clearTimeout(this._timeout),this._timeout=setTimeout(n,s)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(n){const s=bi.getDataAttributes(this._element);for(const f of Object.keys(s))Rw.has(f)&&delete s[f];return n={...s,...typeof n=="object"&&n?n:{}},n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n.container=n.container===!1?document.body:Hi(n.container),typeof n.delay=="number"&&(n.delay={show:n.delay,hide:n.delay}),typeof n.title=="number"&&(n.title=n.title.toString()),typeof n.content=="number"&&(n.content=n.content.toString()),n}_getDelegateConfig(){const n={};for(const[s,f]of Object.entries(this._config))this.constructor.Default[s]!==f&&(n[s]=f);return n.selector=!1,n.trigger="manual",n}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(n){return this.each(function(){const s=hr.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof s[n]>"u")throw new TypeError(`No method named "${n}"`);s[n]()}})}}bn(hr);const Jw="popover",Zw=".popover-header",eE=".popover-body",tE={...hr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},nE={...hr.DefaultType,content:"(null|string|element|function)"};class Ra extends hr{static get Default(){return tE}static get DefaultType(){return nE}static get NAME(){return Jw}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Zw]:this._getTitle(),[eE]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(n){return this.each(function(){const s=Ra.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof s[n]>"u")throw new TypeError(`No method named "${n}"`);s[n]()}})}}bn(Ra);const iE="scrollspy",sE="bs.scrollspy",Qu=`.${sE}`,rE=".data-api",oE=`activate${Qu}`,bf=`click${Qu}`,aE=`load${Qu}${rE}`,lE="dropdown-item",Zs="active",uE='[data-bs-spy="scroll"]',Eu="[href]",cE=".nav, .list-group",yf=".nav-link",dE=".nav-item",fE=".list-group-item",pE=`${yf}, ${dE} > ${yf}, ${fE}`,hE=".dropdown",_E=".dropdown-toggle",mE={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},vE={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Pa extends $n{constructor(n,s){super(n,s),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return mE}static get DefaultType(){return vE}static get NAME(){return iE}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const n of this._observableSections.values())this._observer.observe(n)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(n){return n.target=Hi(n.target)||document.body,n.rootMargin=n.offset?`${n.offset}px 0px -30%`:n.rootMargin,typeof n.threshold=="string"&&(n.threshold=n.threshold.split(",").map(s=>Number.parseFloat(s))),n}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(q.off(this._config.target,bf),q.on(this._config.target,bf,Eu,n=>{const s=this._observableSections.get(n.target.hash);if(s){n.preventDefault();const f=this._rootElement||window,v=s.offsetTop-this._element.offsetTop;if(f.scrollTo){f.scrollTo({top:v,behavior:"smooth"});return}f.scrollTop=v}}))}_getNewObserver(){const n={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(s=>this._observerCallback(s),n)}_observerCallback(n){const s=E=>this._targetLinks.get(`#${E.target.id}`),f=E=>{this._previousScrollData.visibleEntryTop=E.target.offsetTop,this._process(s(E))},v=(this._rootElement||document.documentElement).scrollTop,x=v>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=v;for(const E of n){if(!E.isIntersecting){this._activeTarget=null,this._clearActiveClass(s(E));continue}const S=E.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(x&&S){if(f(E),!v)return;continue}!x&&!S&&f(E)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const n=re.find(Eu,this._config.target);for(const s of n){if(!s.hash||zi(s))continue;const f=re.findOne(decodeURI(s.hash),this._element);fr(f)&&(this._targetLinks.set(decodeURI(s.hash),s),this._observableSections.set(s.hash,f))}}_process(n){this._activeTarget!==n&&(this._clearActiveClass(this._config.target),this._activeTarget=n,n.classList.add(Zs),this._activateParents(n),q.trigger(this._element,oE,{relatedTarget:n}))}_activateParents(n){if(n.classList.contains(lE)){re.findOne(_E,n.closest(hE)).classList.add(Zs);return}for(const s of re.parents(n,cE))for(const f of re.prev(s,pE))f.classList.add(Zs)}_clearActiveClass(n){n.classList.remove(Zs);const s=re.find(`${Eu}.${Zs}`,n);for(const f of s)f.classList.remove(Zs)}static jQueryInterface(n){return this.each(function(){const s=Pa.getOrCreateInstance(this,n);if(typeof n=="string"){if(s[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);s[n]()}})}}q.on(window,aE,()=>{for(const l of re.find(uE))Pa.getOrCreateInstance(l)});bn(Pa);const gE="tab",bE="bs.tab",Es=`.${bE}`,yE=`hide${Es}`,wE=`hidden${Es}`,EE=`show${Es}`,xE=`shown${Es}`,AE=`click${Es}`,TE=`keydown${Es}`,CE=`load${Es}`,SE="ArrowLeft",wf="ArrowRight",OE="ArrowUp",Ef="ArrowDown",xu="Home",xf="End",vs="active",Af="fade",Au="show",IE="dropdown",Tp=".dropdown-toggle",DE=".dropdown-menu",Tu=`:not(${Tp})`,NE='.list-group, .nav, [role="tablist"]',kE=".nav-item, .list-group-item",LE=`.nav-link${Tu}, .list-group-item${Tu}, [role="tab"]${Tu}`,Cp='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Cu=`${LE}, ${Cp}`,$E=`.${vs}[data-bs-toggle="tab"], .${vs}[data-bs-toggle="pill"], .${vs}[data-bs-toggle="list"]`;class cr extends $n{constructor(n){super(n),this._parent=this._element.closest(NE),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),q.on(this._element,TE,s=>this._keydown(s)))}static get NAME(){return gE}show(){const n=this._element;if(this._elemIsActive(n))return;const s=this._getActiveElem(),f=s?q.trigger(s,yE,{relatedTarget:n}):null;q.trigger(n,EE,{relatedTarget:s}).defaultPrevented||f&&f.defaultPrevented||(this._deactivate(s,n),this._activate(n,s))}_activate(n,s){if(!n)return;n.classList.add(vs),this._activate(re.getElementFromSelector(n));const f=()=>{if(n.getAttribute("role")!=="tab"){n.classList.add(Au);return}n.removeAttribute("tabindex"),n.setAttribute("aria-selected",!0),this._toggleDropDown(n,!0),q.trigger(n,xE,{relatedTarget:s})};this._queueCallback(f,n,n.classList.contains(Af))}_deactivate(n,s){if(!n)return;n.classList.remove(vs),n.blur(),this._deactivate(re.getElementFromSelector(n));const f=()=>{if(n.getAttribute("role")!=="tab"){n.classList.remove(Au);return}n.setAttribute("aria-selected",!1),n.setAttribute("tabindex","-1"),this._toggleDropDown(n,!1),q.trigger(n,wE,{relatedTarget:s})};this._queueCallback(f,n,n.classList.contains(Af))}_keydown(n){if(![SE,wf,OE,Ef,xu,xf].includes(n.key))return;n.stopPropagation(),n.preventDefault();const s=this._getChildren().filter(v=>!zi(v));let f;if([xu,xf].includes(n.key))f=s[n.key===xu?0:s.length-1];else{const v=[wf,Ef].includes(n.key);f=Yu(s,n.target,v,!0)}f&&(f.focus({preventScroll:!0}),cr.getOrCreateInstance(f).show())}_getChildren(){return re.find(Cu,this._parent)}_getActiveElem(){return this._getChildren().find(n=>this._elemIsActive(n))||null}_setInitialAttributes(n,s){this._setAttributeIfNotExists(n,"role","tablist");for(const f of s)this._setInitialAttributesOnChild(f)}_setInitialAttributesOnChild(n){n=this._getInnerElement(n);const s=this._elemIsActive(n),f=this._getOuterElement(n);n.setAttribute("aria-selected",s),f!==n&&this._setAttributeIfNotExists(f,"role","presentation"),s||n.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(n,"role","tab"),this._setInitialAttributesOnTargetPanel(n)}_setInitialAttributesOnTargetPanel(n){const s=re.getElementFromSelector(n);s&&(this._setAttributeIfNotExists(s,"role","tabpanel"),n.id&&this._setAttributeIfNotExists(s,"aria-labelledby",`${n.id}`))}_toggleDropDown(n,s){const f=this._getOuterElement(n);if(!f.classList.contains(IE))return;const v=(x,E)=>{const S=re.findOne(x,f);S&&S.classList.toggle(E,s)};v(Tp,vs),v(DE,Au),f.setAttribute("aria-expanded",s)}_setAttributeIfNotExists(n,s,f){n.hasAttribute(s)||n.setAttribute(s,f)}_elemIsActive(n){return n.classList.contains(vs)}_getInnerElement(n){return n.matches(Cu)?n:re.findOne(Cu,n)}_getOuterElement(n){return n.closest(kE)||n}static jQueryInterface(n){return this.each(function(){const s=cr.getOrCreateInstance(this);if(typeof n=="string"){if(s[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);s[n]()}})}}q.on(document,AE,Cp,function(l){["A","AREA"].includes(this.tagName)&&l.preventDefault(),!zi(this)&&cr.getOrCreateInstance(this).show()});q.on(window,CE,()=>{for(const l of re.find($E))cr.getOrCreateInstance(l)});bn(cr);const RE="toast",PE="bs.toast",ji=`.${PE}`,ME=`mouseover${ji}`,FE=`mouseout${ji}`,BE=`focusin${ji}`,qE=`focusout${ji}`,UE=`hide${ji}`,WE=`hidden${ji}`,VE=`show${ji}`,HE=`shown${ji}`,zE="fade",Tf="hide",ya="show",wa="showing",KE={animation:"boolean",autohide:"boolean",delay:"number"},YE={animation:!0,autohide:!0,delay:5e3};class Ma extends $n{constructor(n,s){super(n,s),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return YE}static get DefaultType(){return KE}static get NAME(){return RE}show(){if(q.trigger(this._element,VE).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(zE);const s=()=>{this._element.classList.remove(wa),q.trigger(this._element,HE),this._maybeScheduleHide()};this._element.classList.remove(Tf),lo(this._element),this._element.classList.add(ya,wa),this._queueCallback(s,this._element,this._config.animation)}hide(){if(!this.isShown()||q.trigger(this._element,UE).defaultPrevented)return;const s=()=>{this._element.classList.add(Tf),this._element.classList.remove(wa,ya),q.trigger(this._element,WE)};this._element.classList.add(wa),this._queueCallback(s,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ya),super.dispose()}isShown(){return this._element.classList.contains(ya)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(n,s){switch(n.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=s;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=s;break}}if(s){this._clearTimeout();return}const f=n.relatedTarget;this._element===f||this._element.contains(f)||this._maybeScheduleHide()}_setListeners(){q.on(this._element,ME,n=>this._onInteraction(n,!0)),q.on(this._element,FE,n=>this._onInteraction(n,!1)),q.on(this._element,BE,n=>this._onInteraction(n,!0)),q.on(this._element,qE,n=>this._onInteraction(n,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(n){return this.each(function(){const s=Ma.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof s[n]>"u")throw new TypeError(`No method named "${n}"`);s[n](this)}})}}ka(Ma);bn(Ma);var no={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var GE=no.exports,Cf;function jE(){return Cf||(Cf=1,(function(l,n){(function(){var s,f="4.17.21",v=200,x="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",E="Expected a function",S="Invalid `variable` option passed into `_.template`",C="__lodash_hash_undefined__",U=500,L="__lodash_placeholder__",V=1,ee=2,G=4,te=1,ne=2,J=1,N=2,H=4,ie=8,M=16,B=32,Q=64,ue=128,Oe=256,Ie=512,fe=30,Fe="...",st=800,We=16,ft=1,$t=2,lt=3,Ye=1/0,wt=9007199254740991,yn=17976931348623157e292,wn=NaN,pt=4294967295,Jn=pt-1,Ei=pt>>>1,En=[["ary",ue],["bind",J],["bindKey",N],["curry",ie],["curryRight",M],["flip",Ie],["partial",B],["partialRight",Q],["rearg",Oe]],ut="[object Arguments]",on="[object Array]",ht="[object AsyncFunction]",Et="[object Boolean]",Rt="[object Date]",_r="[object DOMException]",xn="[object Error]",Zn="[object Function]",Gt="[object GeneratorFunction]",Ae="[object Map]",rt="[object Number]",an="[object Null]",Qe="[object Object]",xs="[object Promise]",ei="[object Proxy]",xt="[object RegExp]",Be="[object Set]",Rn="[object String]",ti="[object Symbol]",Pn="[object Undefined]",At="[object WeakMap]",Pt="[object WeakSet]",Mn="[object ArrayBuffer]",An="[object DataView]",Xe="[object Float32Array]",As="[object Float64Array]",Qi="[object Int8Array]",mr="[object Int16Array]",Fn="[object Int32Array]",vr="[object Uint8Array]",gr="[object Uint8ClampedArray]",br="[object Uint16Array]",Xi="[object Uint32Array]",W=/\b__p \+= '';/g,Fa=/\b(__p \+=) '' \+/g,yr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,po=/&(?:amp|lt|gt|quot|#39);/g,ho=/[&<>"']/g,jt=RegExp(po.source),xi=RegExp(ho.source),Ai=/<%-([\s\S]+?)%>/g,_o=/<%([\s\S]+?)%>/g,_e=/<%=([\s\S]+?)%>/g,tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wr=/^\w*$/,Bn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tt=/[\\^$.*+?()[\]{}|]/g,Tn=RegExp(Tt.source),Er=/^\s+/,Ts=/\s/,Ba=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,qa=/\{\n\/\* \[wrapped with (.+)\] \*/,ct=/,? & /,mo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ti=/[()=,{}\[\]\/\s]/,ni=/\\(\\)?/g,xr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ci=/\w*$/,Cs=/^[-+]0x[0-9a-f]+$/i,Ar=/^0b[01]+$/i,Ua=/^\[object .+?Constructor\]$/,vo=/^0o[0-7]+$/i,go=/^(?:0|[1-9]\d*)$/,Wa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ss=/($^)/,Mt=/['\n\r\u2028\u2029\\]/g,Cn="\\ud800-\\udfff",bo="\\u0300-\\u036f",_t="\\ufe20-\\ufe2f",Ji="\\u20d0-\\u20ff",yo=bo+_t+Ji,wo="\\u2700-\\u27bf",Tr="a-z\\xdf-\\xf6\\xf8-\\xff",ii="\\xac\\xb1\\xd7\\xf7",Va="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Os="\\u2000-\\u206f",Cr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Eo="A-Z\\xc0-\\xd6\\xd8-\\xde",Sn="\\ufe0e\\ufe0f",Ft=ii+Va+Os+Cr,Bt="['’]",Is="["+Cn+"]",Zi="["+Ft+"]",si="["+yo+"]",xo="\\d+",Ha="["+wo+"]",Ao="["+Tr+"]",Qt="[^"+Cn+Ft+xo+wo+Tr+Eo+"]",Ds="\\ud83c[\\udffb-\\udfff]",za="(?:"+si+"|"+Ds+")",Sr="[^"+Cn+"]",Si="(?:\\ud83c[\\udde6-\\uddff]){2}",Or="[\\ud800-\\udbff][\\udc00-\\udfff]",On="["+Eo+"]",Ns="\\u200d",ks="(?:"+Ao+"|"+Qt+")",Ka="(?:"+On+"|"+Qt+")",es="(?:"+Bt+"(?:d|ll|m|re|s|t|ve))?",ts="(?:"+Bt+"(?:D|LL|M|RE|S|T|VE))?",Ls=za+"?",$s="["+Sn+"]?",Rs="(?:"+Ns+"(?:"+[Sr,Si,Or].join("|")+")"+$s+Ls+")*",Ps="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Me="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",To=$s+Ls+Rs,Ya="(?:"+[Ha,Si,Or].join("|")+")"+To,Ga="(?:"+[Sr+si+"?",si,Si,Or,Is].join("|")+")",ja=RegExp(Bt,"g"),Qa=RegExp(si,"g"),qn=RegExp(Ds+"(?="+Ds+")|"+Ga+To,"g"),Xa=RegExp([On+"?"+Ao+"+"+es+"(?="+[Zi,On,"$"].join("|")+")",Ka+"+"+ts+"(?="+[Zi,On+ks,"$"].join("|")+")",On+"?"+ks+"+"+es,On+"+"+ts,Me,Ps,xo,Ya].join("|"),"g"),Ja=RegExp("["+Ns+Cn+yo+Sn+"]"),Oi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ns=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],is=-1,Re={};Re[Xe]=Re[As]=Re[Qi]=Re[mr]=Re[Fn]=Re[vr]=Re[gr]=Re[br]=Re[Xi]=!0,Re[ut]=Re[on]=Re[Mn]=Re[Et]=Re[An]=Re[Rt]=Re[xn]=Re[Zn]=Re[Ae]=Re[rt]=Re[Qe]=Re[xt]=Re[Be]=Re[Rn]=Re[At]=!1;var $e={};$e[ut]=$e[on]=$e[Mn]=$e[An]=$e[Et]=$e[Rt]=$e[Xe]=$e[As]=$e[Qi]=$e[mr]=$e[Fn]=$e[Ae]=$e[rt]=$e[Qe]=$e[xt]=$e[Be]=$e[Rn]=$e[ti]=$e[vr]=$e[gr]=$e[br]=$e[Xi]=!0,$e[xn]=$e[Zn]=$e[At]=!1;var Co={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Za={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},el={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ri={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Je=parseFloat,Un=parseInt,oi=typeof ha=="object"&&ha&&ha.Object===Object&&ha,tl=typeof self=="object"&&self&&self.Object===Object&&self,nt=oi||tl||Function("return this")(),Ir=n&&!n.nodeType&&n,ai=Ir&&!0&&l&&!l.nodeType&&l,Dr=ai&&ai.exports===Ir,Nr=Dr&&oi.process,qt=(function(){try{var _=ai&&ai.require&&ai.require("util").types;return _||Nr&&Nr.binding&&Nr.binding("util")}catch{}})(),Ms=qt&&qt.isArrayBuffer,Ii=qt&&qt.isDate,kr=qt&&qt.isMap,Lr=qt&&qt.isRegExp,$r=qt&&qt.isSet,So=qt&&qt.isTypedArray;function Ct(_,g,y){switch(y.length){case 0:return _.call(g);case 1:return _.call(g,y[0]);case 2:return _.call(g,y[0],y[1]);case 3:return _.call(g,y[0],y[1],y[2])}return _.apply(g,y)}function nl(_,g,y,$){for(var D=-1,j=_==null?0:_.length;++D<j;){var de=_[D];g($,de,y(de),_)}return $}function Ut(_,g){for(var y=-1,$=_==null?0:_.length;++y<$&&g(_[y],y,_)!==!1;);return _}function il(_,g){for(var y=_==null?0:_.length;y--&&g(_[y],y,_)!==!1;);return _}function mt(_,g){for(var y=-1,$=_==null?0:_.length;++y<$;)if(!g(_[y],y,_))return!1;return!0}function vt(_,g){for(var y=-1,$=_==null?0:_.length,D=0,j=[];++y<$;){var de=_[y];g(de,y,_)&&(j[D++]=de)}return j}function ln(_,g){var y=_==null?0:_.length;return!!y&&li(_,g,0)>-1}function Rr(_,g,y){for(var $=-1,D=_==null?0:_.length;++$<D;)if(y(g,_[$]))return!0;return!1}function Se(_,g){for(var y=-1,$=_==null?0:_.length,D=Array($);++y<$;)D[y]=g(_[y],y,_);return D}function Wn(_,g){for(var y=-1,$=g.length,D=_.length;++y<$;)_[D+y]=g[y];return _}function Pr(_,g,y,$){var D=-1,j=_==null?0:_.length;for($&&j&&(y=_[++D]);++D<j;)y=g(y,_[D],D,_);return y}function ss(_,g,y,$){var D=_==null?0:_.length;for($&&D&&(y=_[--D]);D--;)y=g(y,_[D],D,_);return y}function Di(_,g){for(var y=-1,$=_==null?0:_.length;++y<$;)if(g(_[y],y,_))return!0;return!1}var Ni=ke("length");function sl(_){return _.split("")}function rl(_){return _.match(mo)||[]}function Oo(_,g,y){var $;return y(_,function(D,j,de){if(g(D,j,de))return $=j,!1}),$}function rs(_,g,y,$){for(var D=_.length,j=y+($?1:-1);$?j--:++j<D;)if(g(_[j],j,_))return j;return-1}function li(_,g,y){return g===g?pl(_,g,y):rs(_,Io,y)}function ol(_,g,y,$){for(var D=y-1,j=_.length;++D<j;)if($(_[D],g))return D;return-1}function Io(_){return _!==_}function Ne(_,g){var y=_==null?0:_.length;return y?Vn(_,g)/y:wn}function ke(_){return function(g){return g==null?s:g[_]}}function Ve(_){return function(g){return _==null?s:_[g]}}function un(_,g,y,$,D){return D(_,function(j,de,K){y=$?($=!1,j):g(y,j,de,K)}),y}function St(_,g){var y=_.length;for(_.sort(g);y--;)_[y]=_[y].value;return _}function Vn(_,g){for(var y,$=-1,D=_.length;++$<D;){var j=g(_[$]);j!==s&&(y=y===s?j:y+j)}return y}function cn(_,g){for(var y=-1,$=Array(_);++y<_;)$[y]=g(y);return $}function Fs(_,g){return Se(g,function(y){return[y,_[y]]})}function Ze(_){return _&&_.slice(0,Lo(_)+1).replace(Er,"")}function ot(_){return function(g){return _(g)}}function ki(_,g){return Se(g,function(y){return _[y]})}function In(_,g){return _.has(g)}function os(_,g){for(var y=-1,$=_.length;++y<$&&li(g,_[y],0)>-1;);return y}function Do(_,g){for(var y=_.length;y--&&li(g,_[y],0)>-1;);return y}function al(_,g){for(var y=_.length,$=0;y--;)_[y]===g&&++$;return $}var Bs=Ve(Co),Mr=Ve(Za);function ll(_){return"\\"+ri[_]}function ul(_,g){return _==null?s:_[g]}function Li(_){return Ja.test(_)}function cl(_){return Oi.test(_)}function dl(_){for(var g,y=[];!(g=_.next()).done;)y.push(g.value);return y}function qs(_){var g=-1,y=Array(_.size);return _.forEach(function($,D){y[++g]=[D,$]}),y}function No(_,g){return function(y){return _(g(y))}}function Hn(_,g){for(var y=-1,$=_.length,D=0,j=[];++y<$;){var de=_[y];(de===g||de===L)&&(_[y]=L,j[D++]=y)}return j}function Us(_){var g=-1,y=Array(_.size);return _.forEach(function($){y[++g]=$}),y}function fl(_){var g=-1,y=Array(_.size);return _.forEach(function($){y[++g]=[$,$]}),y}function pl(_,g,y){for(var $=y-1,D=_.length;++$<D;)if(_[$]===g)return $;return-1}function ko(_,g,y){for(var $=y+1;$--;)if(_[$]===g)return $;return $}function Dn(_){return Li(_)?a(_):Ni(_)}function gt(_){return Li(_)?r(_):sl(_)}function Lo(_){for(var g=_.length;g--&&Ts.test(_.charAt(g)););return g}var hl=Ve(el);function a(_){for(var g=qn.lastIndex=0;qn.test(_);)++g;return g}function r(_){return _.match(qn)||[]}function u(_){return _.match(Xa)||[]}var m=(function _(g){g=g==null?nt:T.defaults(nt.Object(),g,T.pick(nt,ns));var y=g.Array,$=g.Date,D=g.Error,j=g.Function,de=g.Math,K=g.Object,qe=g.RegExp,Pe=g.String,He=g.TypeError,Wt=y.prototype,Fr=j.prototype,$i=K.prototype,Ws=g["__core-js_shared__"],$o=Fr.toString,Le=$i.hasOwnProperty,Sp=0,Xu=(function(){var e=/[^.]+$/.exec(Ws&&Ws.keys&&Ws.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),Ro=$i.toString,Op=$o.call(K),Ip=nt._,Dp=qe("^"+$o.call(Le).replace(Tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Po=Dr?g.Buffer:s,Ri=g.Symbol,Mo=g.Uint8Array,Ju=Po?Po.allocUnsafe:s,Fo=No(K.getPrototypeOf,K),Zu=K.create,ec=$i.propertyIsEnumerable,Bo=Wt.splice,tc=Ri?Ri.isConcatSpreadable:s,Br=Ri?Ri.iterator:s,as=Ri?Ri.toStringTag:s,qo=(function(){try{var e=fs(K,"defineProperty");return e({},"",{}),e}catch{}})(),Np=g.clearTimeout!==nt.clearTimeout&&g.clearTimeout,kp=$&&$.now!==nt.Date.now&&$.now,Lp=g.setTimeout!==nt.setTimeout&&g.setTimeout,Uo=de.ceil,Wo=de.floor,_l=K.getOwnPropertySymbols,$p=Po?Po.isBuffer:s,nc=g.isFinite,Rp=Wt.join,Pp=No(K.keys,K),it=de.max,bt=de.min,Mp=$.now,Fp=g.parseInt,ic=de.random,Bp=Wt.reverse,ml=fs(g,"DataView"),qr=fs(g,"Map"),vl=fs(g,"Promise"),Vs=fs(g,"Set"),Ur=fs(g,"WeakMap"),Wr=fs(K,"create"),Vo=Ur&&new Ur,Hs={},qp=ps(ml),Up=ps(qr),Wp=ps(vl),Vp=ps(Vs),Hp=ps(Ur),Ho=Ri?Ri.prototype:s,Vr=Ho?Ho.valueOf:s,sc=Ho?Ho.toString:s;function p(e){if(ze(e)&&!pe(e)&&!(e instanceof we)){if(e instanceof dn)return e;if(Le.call(e,"__wrapped__"))return rd(e)}return new dn(e)}var zs=(function(){function e(){}return function(t){if(!Ue(t))return{};if(Zu)return Zu(t);e.prototype=t;var i=new e;return e.prototype=s,i}})();function zo(){}function dn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=s}p.templateSettings={escape:Ai,evaluate:_o,interpolate:_e,variable:"",imports:{_:p}},p.prototype=zo.prototype,p.prototype.constructor=p,dn.prototype=zs(zo.prototype),dn.prototype.constructor=dn;function we(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=pt,this.__views__=[]}function zp(){var e=new we(this.__wrapped__);return e.__actions__=Vt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Vt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Vt(this.__views__),e}function Kp(){if(this.__filtered__){var e=new we(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Yp(){var e=this.__wrapped__.value(),t=this.__dir__,i=pe(e),o=t<0,d=i?e.length:0,h=r_(0,d,this.__views__),b=h.start,w=h.end,A=w-b,R=o?w:b-1,P=this.__iteratees__,F=P.length,Y=0,Z=bt(A,this.__takeCount__);if(!i||!o&&d==A&&Z==A)return Oc(e,this.__actions__);var ae=[];e:for(;A--&&Y<Z;){R+=t;for(var ve=-1,le=e[R];++ve<F;){var ye=P[ve],xe=ye.iteratee,Zt=ye.type,Dt=xe(le);if(Zt==$t)le=Dt;else if(!Dt){if(Zt==ft)continue e;break e}}ae[Y++]=le}return ae}we.prototype=zs(zo.prototype),we.prototype.constructor=we;function ls(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function Gp(){this.__data__=Wr?Wr(null):{},this.size=0}function jp(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Qp(e){var t=this.__data__;if(Wr){var i=t[e];return i===C?s:i}return Le.call(t,e)?t[e]:s}function Xp(e){var t=this.__data__;return Wr?t[e]!==s:Le.call(t,e)}function Jp(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Wr&&t===s?C:t,this}ls.prototype.clear=Gp,ls.prototype.delete=jp,ls.prototype.get=Qp,ls.prototype.has=Xp,ls.prototype.set=Jp;function ui(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function Zp(){this.__data__=[],this.size=0}function eh(e){var t=this.__data__,i=Ko(t,e);if(i<0)return!1;var o=t.length-1;return i==o?t.pop():Bo.call(t,i,1),--this.size,!0}function th(e){var t=this.__data__,i=Ko(t,e);return i<0?s:t[i][1]}function nh(e){return Ko(this.__data__,e)>-1}function ih(e,t){var i=this.__data__,o=Ko(i,e);return o<0?(++this.size,i.push([e,t])):i[o][1]=t,this}ui.prototype.clear=Zp,ui.prototype.delete=eh,ui.prototype.get=th,ui.prototype.has=nh,ui.prototype.set=ih;function ci(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function sh(){this.size=0,this.__data__={hash:new ls,map:new(qr||ui),string:new ls}}function rh(e){var t=sa(this,e).delete(e);return this.size-=t?1:0,t}function oh(e){return sa(this,e).get(e)}function ah(e){return sa(this,e).has(e)}function lh(e,t){var i=sa(this,e),o=i.size;return i.set(e,t),this.size+=i.size==o?0:1,this}ci.prototype.clear=sh,ci.prototype.delete=rh,ci.prototype.get=oh,ci.prototype.has=ah,ci.prototype.set=lh;function us(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new ci;++t<i;)this.add(e[t])}function uh(e){return this.__data__.set(e,C),this}function ch(e){return this.__data__.has(e)}us.prototype.add=us.prototype.push=uh,us.prototype.has=ch;function Nn(e){var t=this.__data__=new ui(e);this.size=t.size}function dh(){this.__data__=new ui,this.size=0}function fh(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function ph(e){return this.__data__.get(e)}function hh(e){return this.__data__.has(e)}function _h(e,t){var i=this.__data__;if(i instanceof ui){var o=i.__data__;if(!qr||o.length<v-1)return o.push([e,t]),this.size=++i.size,this;i=this.__data__=new ci(o)}return i.set(e,t),this.size=i.size,this}Nn.prototype.clear=dh,Nn.prototype.delete=fh,Nn.prototype.get=ph,Nn.prototype.has=hh,Nn.prototype.set=_h;function rc(e,t){var i=pe(e),o=!i&&hs(e),d=!i&&!o&&qi(e),h=!i&&!o&&!d&&js(e),b=i||o||d||h,w=b?cn(e.length,Pe):[],A=w.length;for(var R in e)(t||Le.call(e,R))&&!(b&&(R=="length"||d&&(R=="offset"||R=="parent")||h&&(R=="buffer"||R=="byteLength"||R=="byteOffset")||hi(R,A)))&&w.push(R);return w}function oc(e){var t=e.length;return t?e[Ol(0,t-1)]:s}function mh(e,t){return ra(Vt(e),cs(t,0,e.length))}function vh(e){return ra(Vt(e))}function gl(e,t,i){(i!==s&&!kn(e[t],i)||i===s&&!(t in e))&&di(e,t,i)}function Hr(e,t,i){var o=e[t];(!(Le.call(e,t)&&kn(o,i))||i===s&&!(t in e))&&di(e,t,i)}function Ko(e,t){for(var i=e.length;i--;)if(kn(e[i][0],t))return i;return-1}function gh(e,t,i,o){return Pi(e,function(d,h,b){t(o,d,i(d),b)}),o}function ac(e,t){return e&&Kn(t,at(t),e)}function bh(e,t){return e&&Kn(t,zt(t),e)}function di(e,t,i){t=="__proto__"&&qo?qo(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function bl(e,t){for(var i=-1,o=t.length,d=y(o),h=e==null;++i<o;)d[i]=h?s:Zl(e,t[i]);return d}function cs(e,t,i){return e===e&&(i!==s&&(e=e<=i?e:i),t!==s&&(e=e>=t?e:t)),e}function fn(e,t,i,o,d,h){var b,w=t&V,A=t&ee,R=t&G;if(i&&(b=d?i(e,o,d,h):i(e)),b!==s)return b;if(!Ue(e))return e;var P=pe(e);if(P){if(b=a_(e),!w)return Vt(e,b)}else{var F=yt(e),Y=F==Zn||F==Gt;if(qi(e))return Nc(e,w);if(F==Qe||F==ut||Y&&!d){if(b=A||Y?{}:Qc(e),!w)return A?Qh(e,bh(b,e)):jh(e,ac(b,e))}else{if(!$e[F])return d?e:{};b=l_(e,F,w)}}h||(h=new Nn);var Z=h.get(e);if(Z)return Z;h.set(e,b),Td(e)?e.forEach(function(le){b.add(fn(le,t,i,le,e,h))}):xd(e)&&e.forEach(function(le,ye){b.set(ye,fn(le,t,i,ye,e,h))});var ae=R?A?Bl:Fl:A?zt:at,ve=P?s:ae(e);return Ut(ve||e,function(le,ye){ve&&(ye=le,le=e[ye]),Hr(b,ye,fn(le,t,i,ye,e,h))}),b}function yh(e){var t=at(e);return function(i){return lc(i,e,t)}}function lc(e,t,i){var o=i.length;if(e==null)return!o;for(e=K(e);o--;){var d=i[o],h=t[d],b=e[d];if(b===s&&!(d in e)||!h(b))return!1}return!0}function uc(e,t,i){if(typeof e!="function")throw new He(E);return Xr(function(){e.apply(s,i)},t)}function zr(e,t,i,o){var d=-1,h=ln,b=!0,w=e.length,A=[],R=t.length;if(!w)return A;i&&(t=Se(t,ot(i))),o?(h=Rr,b=!1):t.length>=v&&(h=In,b=!1,t=new us(t));e:for(;++d<w;){var P=e[d],F=i==null?P:i(P);if(P=o||P!==0?P:0,b&&F===F){for(var Y=R;Y--;)if(t[Y]===F)continue e;A.push(P)}else h(t,F,o)||A.push(P)}return A}var Pi=Pc(zn),cc=Pc(wl,!0);function wh(e,t){var i=!0;return Pi(e,function(o,d,h){return i=!!t(o,d,h),i}),i}function Yo(e,t,i){for(var o=-1,d=e.length;++o<d;){var h=e[o],b=t(h);if(b!=null&&(w===s?b===b&&!Jt(b):i(b,w)))var w=b,A=h}return A}function Eh(e,t,i,o){var d=e.length;for(i=me(i),i<0&&(i=-i>d?0:d+i),o=o===s||o>d?d:me(o),o<0&&(o+=d),o=i>o?0:Sd(o);i<o;)e[i++]=t;return e}function dc(e,t){var i=[];return Pi(e,function(o,d,h){t(o,d,h)&&i.push(o)}),i}function dt(e,t,i,o,d){var h=-1,b=e.length;for(i||(i=c_),d||(d=[]);++h<b;){var w=e[h];t>0&&i(w)?t>1?dt(w,t-1,i,o,d):Wn(d,w):o||(d[d.length]=w)}return d}var yl=Mc(),fc=Mc(!0);function zn(e,t){return e&&yl(e,t,at)}function wl(e,t){return e&&fc(e,t,at)}function Go(e,t){return vt(t,function(i){return _i(e[i])})}function ds(e,t){t=Fi(t,e);for(var i=0,o=t.length;e!=null&&i<o;)e=e[Yn(t[i++])];return i&&i==o?e:s}function pc(e,t,i){var o=t(e);return pe(e)?o:Wn(o,i(e))}function Ot(e){return e==null?e===s?Pn:an:as&&as in K(e)?s_(e):v_(e)}function El(e,t){return e>t}function xh(e,t){return e!=null&&Le.call(e,t)}function Ah(e,t){return e!=null&&t in K(e)}function Th(e,t,i){return e>=bt(t,i)&&e<it(t,i)}function xl(e,t,i){for(var o=i?Rr:ln,d=e[0].length,h=e.length,b=h,w=y(h),A=1/0,R=[];b--;){var P=e[b];b&&t&&(P=Se(P,ot(t))),A=bt(P.length,A),w[b]=!i&&(t||d>=120&&P.length>=120)?new us(b&&P):s}P=e[0];var F=-1,Y=w[0];e:for(;++F<d&&R.length<A;){var Z=P[F],ae=t?t(Z):Z;if(Z=i||Z!==0?Z:0,!(Y?In(Y,ae):o(R,ae,i))){for(b=h;--b;){var ve=w[b];if(!(ve?In(ve,ae):o(e[b],ae,i)))continue e}Y&&Y.push(ae),R.push(Z)}}return R}function Ch(e,t,i,o){return zn(e,function(d,h,b){t(o,i(d),h,b)}),o}function Kr(e,t,i){t=Fi(t,e),e=ed(e,t);var o=e==null?e:e[Yn(hn(t))];return o==null?s:Ct(o,e,i)}function hc(e){return ze(e)&&Ot(e)==ut}function Sh(e){return ze(e)&&Ot(e)==Mn}function Oh(e){return ze(e)&&Ot(e)==Rt}function Yr(e,t,i,o,d){return e===t?!0:e==null||t==null||!ze(e)&&!ze(t)?e!==e&&t!==t:Ih(e,t,i,o,Yr,d)}function Ih(e,t,i,o,d,h){var b=pe(e),w=pe(t),A=b?on:yt(e),R=w?on:yt(t);A=A==ut?Qe:A,R=R==ut?Qe:R;var P=A==Qe,F=R==Qe,Y=A==R;if(Y&&qi(e)){if(!qi(t))return!1;b=!0,P=!1}if(Y&&!P)return h||(h=new Nn),b||js(e)?Yc(e,t,i,o,d,h):n_(e,t,A,i,o,d,h);if(!(i&te)){var Z=P&&Le.call(e,"__wrapped__"),ae=F&&Le.call(t,"__wrapped__");if(Z||ae){var ve=Z?e.value():e,le=ae?t.value():t;return h||(h=new Nn),d(ve,le,i,o,h)}}return Y?(h||(h=new Nn),i_(e,t,i,o,d,h)):!1}function Dh(e){return ze(e)&&yt(e)==Ae}function Al(e,t,i,o){var d=i.length,h=d,b=!o;if(e==null)return!h;for(e=K(e);d--;){var w=i[d];if(b&&w[2]?w[1]!==e[w[0]]:!(w[0]in e))return!1}for(;++d<h;){w=i[d];var A=w[0],R=e[A],P=w[1];if(b&&w[2]){if(R===s&&!(A in e))return!1}else{var F=new Nn;if(o)var Y=o(R,P,A,e,t,F);if(!(Y===s?Yr(P,R,te|ne,o,F):Y))return!1}}return!0}function _c(e){if(!Ue(e)||f_(e))return!1;var t=_i(e)?Dp:Ua;return t.test(ps(e))}function Nh(e){return ze(e)&&Ot(e)==xt}function kh(e){return ze(e)&&yt(e)==Be}function Lh(e){return ze(e)&&da(e.length)&&!!Re[Ot(e)]}function mc(e){return typeof e=="function"?e:e==null?Kt:typeof e=="object"?pe(e)?bc(e[0],e[1]):gc(e):Fd(e)}function Tl(e){if(!Qr(e))return Pp(e);var t=[];for(var i in K(e))Le.call(e,i)&&i!="constructor"&&t.push(i);return t}function $h(e){if(!Ue(e))return m_(e);var t=Qr(e),i=[];for(var o in e)o=="constructor"&&(t||!Le.call(e,o))||i.push(o);return i}function Cl(e,t){return e<t}function vc(e,t){var i=-1,o=Ht(e)?y(e.length):[];return Pi(e,function(d,h,b){o[++i]=t(d,h,b)}),o}function gc(e){var t=Ul(e);return t.length==1&&t[0][2]?Jc(t[0][0],t[0][1]):function(i){return i===e||Al(i,e,t)}}function bc(e,t){return Vl(e)&&Xc(t)?Jc(Yn(e),t):function(i){var o=Zl(i,e);return o===s&&o===t?eu(i,e):Yr(t,o,te|ne)}}function jo(e,t,i,o,d){e!==t&&yl(t,function(h,b){if(d||(d=new Nn),Ue(h))Rh(e,t,b,i,jo,o,d);else{var w=o?o(zl(e,b),h,b+"",e,t,d):s;w===s&&(w=h),gl(e,b,w)}},zt)}function Rh(e,t,i,o,d,h,b){var w=zl(e,i),A=zl(t,i),R=b.get(A);if(R){gl(e,i,R);return}var P=h?h(w,A,i+"",e,t,b):s,F=P===s;if(F){var Y=pe(A),Z=!Y&&qi(A),ae=!Y&&!Z&&js(A);P=A,Y||Z||ae?pe(w)?P=w:Ge(w)?P=Vt(w):Z?(F=!1,P=Nc(A,!0)):ae?(F=!1,P=kc(A,!0)):P=[]:Jr(A)||hs(A)?(P=w,hs(w)?P=Od(w):(!Ue(w)||_i(w))&&(P=Qc(A))):F=!1}F&&(b.set(A,P),d(P,A,o,h,b),b.delete(A)),gl(e,i,P)}function yc(e,t){var i=e.length;if(i)return t+=t<0?i:0,hi(t,i)?e[t]:s}function wc(e,t,i){t.length?t=Se(t,function(h){return pe(h)?function(b){return ds(b,h.length===1?h[0]:h)}:h}):t=[Kt];var o=-1;t=Se(t,ot(oe()));var d=vc(e,function(h,b,w){var A=Se(t,function(R){return R(h)});return{criteria:A,index:++o,value:h}});return St(d,function(h,b){return Gh(h,b,i)})}function Ph(e,t){return Ec(e,t,function(i,o){return eu(e,o)})}function Ec(e,t,i){for(var o=-1,d=t.length,h={};++o<d;){var b=t[o],w=ds(e,b);i(w,b)&&Gr(h,Fi(b,e),w)}return h}function Mh(e){return function(t){return ds(t,e)}}function Sl(e,t,i,o){var d=o?ol:li,h=-1,b=t.length,w=e;for(e===t&&(t=Vt(t)),i&&(w=Se(e,ot(i)));++h<b;)for(var A=0,R=t[h],P=i?i(R):R;(A=d(w,P,A,o))>-1;)w!==e&&Bo.call(w,A,1),Bo.call(e,A,1);return e}function xc(e,t){for(var i=e?t.length:0,o=i-1;i--;){var d=t[i];if(i==o||d!==h){var h=d;hi(d)?Bo.call(e,d,1):Nl(e,d)}}return e}function Ol(e,t){return e+Wo(ic()*(t-e+1))}function Fh(e,t,i,o){for(var d=-1,h=it(Uo((t-e)/(i||1)),0),b=y(h);h--;)b[o?h:++d]=e,e+=i;return b}function Il(e,t){var i="";if(!e||t<1||t>wt)return i;do t%2&&(i+=e),t=Wo(t/2),t&&(e+=e);while(t);return i}function ge(e,t){return Kl(Zc(e,t,Kt),e+"")}function Bh(e){return oc(Qs(e))}function qh(e,t){var i=Qs(e);return ra(i,cs(t,0,i.length))}function Gr(e,t,i,o){if(!Ue(e))return e;t=Fi(t,e);for(var d=-1,h=t.length,b=h-1,w=e;w!=null&&++d<h;){var A=Yn(t[d]),R=i;if(A==="__proto__"||A==="constructor"||A==="prototype")return e;if(d!=b){var P=w[A];R=o?o(P,A,w):s,R===s&&(R=Ue(P)?P:hi(t[d+1])?[]:{})}Hr(w,A,R),w=w[A]}return e}var Ac=Vo?function(e,t){return Vo.set(e,t),e}:Kt,Uh=qo?function(e,t){return qo(e,"toString",{configurable:!0,enumerable:!1,value:nu(t),writable:!0})}:Kt;function Wh(e){return ra(Qs(e))}function pn(e,t,i){var o=-1,d=e.length;t<0&&(t=-t>d?0:d+t),i=i>d?d:i,i<0&&(i+=d),d=t>i?0:i-t>>>0,t>>>=0;for(var h=y(d);++o<d;)h[o]=e[o+t];return h}function Vh(e,t){var i;return Pi(e,function(o,d,h){return i=t(o,d,h),!i}),!!i}function Qo(e,t,i){var o=0,d=e==null?o:e.length;if(typeof t=="number"&&t===t&&d<=Ei){for(;o<d;){var h=o+d>>>1,b=e[h];b!==null&&!Jt(b)&&(i?b<=t:b<t)?o=h+1:d=h}return d}return Dl(e,t,Kt,i)}function Dl(e,t,i,o){var d=0,h=e==null?0:e.length;if(h===0)return 0;t=i(t);for(var b=t!==t,w=t===null,A=Jt(t),R=t===s;d<h;){var P=Wo((d+h)/2),F=i(e[P]),Y=F!==s,Z=F===null,ae=F===F,ve=Jt(F);if(b)var le=o||ae;else R?le=ae&&(o||Y):w?le=ae&&Y&&(o||!Z):A?le=ae&&Y&&!Z&&(o||!ve):Z||ve?le=!1:le=o?F<=t:F<t;le?d=P+1:h=P}return bt(h,Jn)}function Tc(e,t){for(var i=-1,o=e.length,d=0,h=[];++i<o;){var b=e[i],w=t?t(b):b;if(!i||!kn(w,A)){var A=w;h[d++]=b===0?0:b}}return h}function Cc(e){return typeof e=="number"?e:Jt(e)?wn:+e}function Xt(e){if(typeof e=="string")return e;if(pe(e))return Se(e,Xt)+"";if(Jt(e))return sc?sc.call(e):"";var t=e+"";return t=="0"&&1/e==-Ye?"-0":t}function Mi(e,t,i){var o=-1,d=ln,h=e.length,b=!0,w=[],A=w;if(i)b=!1,d=Rr;else if(h>=v){var R=t?null:e_(e);if(R)return Us(R);b=!1,d=In,A=new us}else A=t?[]:w;e:for(;++o<h;){var P=e[o],F=t?t(P):P;if(P=i||P!==0?P:0,b&&F===F){for(var Y=A.length;Y--;)if(A[Y]===F)continue e;t&&A.push(F),w.push(P)}else d(A,F,i)||(A!==w&&A.push(F),w.push(P))}return w}function Nl(e,t){return t=Fi(t,e),e=ed(e,t),e==null||delete e[Yn(hn(t))]}function Sc(e,t,i,o){return Gr(e,t,i(ds(e,t)),o)}function Xo(e,t,i,o){for(var d=e.length,h=o?d:-1;(o?h--:++h<d)&&t(e[h],h,e););return i?pn(e,o?0:h,o?h+1:d):pn(e,o?h+1:0,o?d:h)}function Oc(e,t){var i=e;return i instanceof we&&(i=i.value()),Pr(t,function(o,d){return d.func.apply(d.thisArg,Wn([o],d.args))},i)}function kl(e,t,i){var o=e.length;if(o<2)return o?Mi(e[0]):[];for(var d=-1,h=y(o);++d<o;)for(var b=e[d],w=-1;++w<o;)w!=d&&(h[d]=zr(h[d]||b,e[w],t,i));return Mi(dt(h,1),t,i)}function Ic(e,t,i){for(var o=-1,d=e.length,h=t.length,b={};++o<d;){var w=o<h?t[o]:s;i(b,e[o],w)}return b}function Ll(e){return Ge(e)?e:[]}function $l(e){return typeof e=="function"?e:Kt}function Fi(e,t){return pe(e)?e:Vl(e,t)?[e]:sd(De(e))}var Hh=ge;function Bi(e,t,i){var o=e.length;return i=i===s?o:i,!t&&i>=o?e:pn(e,t,i)}var Dc=Np||function(e){return nt.clearTimeout(e)};function Nc(e,t){if(t)return e.slice();var i=e.length,o=Ju?Ju(i):new e.constructor(i);return e.copy(o),o}function Rl(e){var t=new e.constructor(e.byteLength);return new Mo(t).set(new Mo(e)),t}function zh(e,t){var i=t?Rl(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function Kh(e){var t=new e.constructor(e.source,Ci.exec(e));return t.lastIndex=e.lastIndex,t}function Yh(e){return Vr?K(Vr.call(e)):{}}function kc(e,t){var i=t?Rl(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function Lc(e,t){if(e!==t){var i=e!==s,o=e===null,d=e===e,h=Jt(e),b=t!==s,w=t===null,A=t===t,R=Jt(t);if(!w&&!R&&!h&&e>t||h&&b&&A&&!w&&!R||o&&b&&A||!i&&A||!d)return 1;if(!o&&!h&&!R&&e<t||R&&i&&d&&!o&&!h||w&&i&&d||!b&&d||!A)return-1}return 0}function Gh(e,t,i){for(var o=-1,d=e.criteria,h=t.criteria,b=d.length,w=i.length;++o<b;){var A=Lc(d[o],h[o]);if(A){if(o>=w)return A;var R=i[o];return A*(R=="desc"?-1:1)}}return e.index-t.index}function $c(e,t,i,o){for(var d=-1,h=e.length,b=i.length,w=-1,A=t.length,R=it(h-b,0),P=y(A+R),F=!o;++w<A;)P[w]=t[w];for(;++d<b;)(F||d<h)&&(P[i[d]]=e[d]);for(;R--;)P[w++]=e[d++];return P}function Rc(e,t,i,o){for(var d=-1,h=e.length,b=-1,w=i.length,A=-1,R=t.length,P=it(h-w,0),F=y(P+R),Y=!o;++d<P;)F[d]=e[d];for(var Z=d;++A<R;)F[Z+A]=t[A];for(;++b<w;)(Y||d<h)&&(F[Z+i[b]]=e[d++]);return F}function Vt(e,t){var i=-1,o=e.length;for(t||(t=y(o));++i<o;)t[i]=e[i];return t}function Kn(e,t,i,o){var d=!i;i||(i={});for(var h=-1,b=t.length;++h<b;){var w=t[h],A=o?o(i[w],e[w],w,i,e):s;A===s&&(A=e[w]),d?di(i,w,A):Hr(i,w,A)}return i}function jh(e,t){return Kn(e,Wl(e),t)}function Qh(e,t){return Kn(e,Gc(e),t)}function Jo(e,t){return function(i,o){var d=pe(i)?nl:gh,h=t?t():{};return d(i,e,oe(o,2),h)}}function Ks(e){return ge(function(t,i){var o=-1,d=i.length,h=d>1?i[d-1]:s,b=d>2?i[2]:s;for(h=e.length>3&&typeof h=="function"?(d--,h):s,b&&It(i[0],i[1],b)&&(h=d<3?s:h,d=1),t=K(t);++o<d;){var w=i[o];w&&e(t,w,o,h)}return t})}function Pc(e,t){return function(i,o){if(i==null)return i;if(!Ht(i))return e(i,o);for(var d=i.length,h=t?d:-1,b=K(i);(t?h--:++h<d)&&o(b[h],h,b)!==!1;);return i}}function Mc(e){return function(t,i,o){for(var d=-1,h=K(t),b=o(t),w=b.length;w--;){var A=b[e?w:++d];if(i(h[A],A,h)===!1)break}return t}}function Xh(e,t,i){var o=t&J,d=jr(e);function h(){var b=this&&this!==nt&&this instanceof h?d:e;return b.apply(o?i:this,arguments)}return h}function Fc(e){return function(t){t=De(t);var i=Li(t)?gt(t):s,o=i?i[0]:t.charAt(0),d=i?Bi(i,1).join(""):t.slice(1);return o[e]()+d}}function Ys(e){return function(t){return Pr(Pd(Rd(t).replace(ja,"")),e,"")}}function jr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=zs(e.prototype),o=e.apply(i,t);return Ue(o)?o:i}}function Jh(e,t,i){var o=jr(e);function d(){for(var h=arguments.length,b=y(h),w=h,A=Gs(d);w--;)b[w]=arguments[w];var R=h<3&&b[0]!==A&&b[h-1]!==A?[]:Hn(b,A);if(h-=R.length,h<i)return Vc(e,t,Zo,d.placeholder,s,b,R,s,s,i-h);var P=this&&this!==nt&&this instanceof d?o:e;return Ct(P,this,b)}return d}function Bc(e){return function(t,i,o){var d=K(t);if(!Ht(t)){var h=oe(i,3);t=at(t),i=function(w){return h(d[w],w,d)}}var b=e(t,i,o);return b>-1?d[h?t[b]:b]:s}}function qc(e){return pi(function(t){var i=t.length,o=i,d=dn.prototype.thru;for(e&&t.reverse();o--;){var h=t[o];if(typeof h!="function")throw new He(E);if(d&&!b&&ia(h)=="wrapper")var b=new dn([],!0)}for(o=b?o:i;++o<i;){h=t[o];var w=ia(h),A=w=="wrapper"?ql(h):s;A&&Hl(A[0])&&A[1]==(ue|ie|B|Oe)&&!A[4].length&&A[9]==1?b=b[ia(A[0])].apply(b,A[3]):b=h.length==1&&Hl(h)?b[w]():b.thru(h)}return function(){var R=arguments,P=R[0];if(b&&R.length==1&&pe(P))return b.plant(P).value();for(var F=0,Y=i?t[F].apply(this,R):P;++F<i;)Y=t[F].call(this,Y);return Y}})}function Zo(e,t,i,o,d,h,b,w,A,R){var P=t&ue,F=t&J,Y=t&N,Z=t&(ie|M),ae=t&Ie,ve=Y?s:jr(e);function le(){for(var ye=arguments.length,xe=y(ye),Zt=ye;Zt--;)xe[Zt]=arguments[Zt];if(Z)var Dt=Gs(le),en=al(xe,Dt);if(o&&(xe=$c(xe,o,d,Z)),h&&(xe=Rc(xe,h,b,Z)),ye-=en,Z&&ye<R){var je=Hn(xe,Dt);return Vc(e,t,Zo,le.placeholder,i,xe,je,w,A,R-ye)}var Ln=F?i:this,vi=Y?Ln[e]:e;return ye=xe.length,w?xe=g_(xe,w):ae&&ye>1&&xe.reverse(),P&&A<ye&&(xe.length=A),this&&this!==nt&&this instanceof le&&(vi=ve||jr(vi)),vi.apply(Ln,xe)}return le}function Uc(e,t){return function(i,o){return Ch(i,e,t(o),{})}}function ea(e,t){return function(i,o){var d;if(i===s&&o===s)return t;if(i!==s&&(d=i),o!==s){if(d===s)return o;typeof i=="string"||typeof o=="string"?(i=Xt(i),o=Xt(o)):(i=Cc(i),o=Cc(o)),d=e(i,o)}return d}}function Pl(e){return pi(function(t){return t=Se(t,ot(oe())),ge(function(i){var o=this;return e(t,function(d){return Ct(d,o,i)})})})}function ta(e,t){t=t===s?" ":Xt(t);var i=t.length;if(i<2)return i?Il(t,e):t;var o=Il(t,Uo(e/Dn(t)));return Li(t)?Bi(gt(o),0,e).join(""):o.slice(0,e)}function Zh(e,t,i,o){var d=t&J,h=jr(e);function b(){for(var w=-1,A=arguments.length,R=-1,P=o.length,F=y(P+A),Y=this&&this!==nt&&this instanceof b?h:e;++R<P;)F[R]=o[R];for(;A--;)F[R++]=arguments[++w];return Ct(Y,d?i:this,F)}return b}function Wc(e){return function(t,i,o){return o&&typeof o!="number"&&It(t,i,o)&&(i=o=s),t=mi(t),i===s?(i=t,t=0):i=mi(i),o=o===s?t<i?1:-1:mi(o),Fh(t,i,o,e)}}function na(e){return function(t,i){return typeof t=="string"&&typeof i=="string"||(t=_n(t),i=_n(i)),e(t,i)}}function Vc(e,t,i,o,d,h,b,w,A,R){var P=t&ie,F=P?b:s,Y=P?s:b,Z=P?h:s,ae=P?s:h;t|=P?B:Q,t&=~(P?Q:B),t&H||(t&=-4);var ve=[e,t,d,Z,F,ae,Y,w,A,R],le=i.apply(s,ve);return Hl(e)&&td(le,ve),le.placeholder=o,nd(le,e,t)}function Ml(e){var t=de[e];return function(i,o){if(i=_n(i),o=o==null?0:bt(me(o),292),o&&nc(i)){var d=(De(i)+"e").split("e"),h=t(d[0]+"e"+(+d[1]+o));return d=(De(h)+"e").split("e"),+(d[0]+"e"+(+d[1]-o))}return t(i)}}var e_=Vs&&1/Us(new Vs([,-0]))[1]==Ye?function(e){return new Vs(e)}:ru;function Hc(e){return function(t){var i=yt(t);return i==Ae?qs(t):i==Be?fl(t):Fs(t,e(t))}}function fi(e,t,i,o,d,h,b,w){var A=t&N;if(!A&&typeof e!="function")throw new He(E);var R=o?o.length:0;if(R||(t&=-97,o=d=s),b=b===s?b:it(me(b),0),w=w===s?w:me(w),R-=d?d.length:0,t&Q){var P=o,F=d;o=d=s}var Y=A?s:ql(e),Z=[e,t,i,o,d,P,F,h,b,w];if(Y&&__(Z,Y),e=Z[0],t=Z[1],i=Z[2],o=Z[3],d=Z[4],w=Z[9]=Z[9]===s?A?0:e.length:it(Z[9]-R,0),!w&&t&(ie|M)&&(t&=-25),!t||t==J)var ae=Xh(e,t,i);else t==ie||t==M?ae=Jh(e,t,w):(t==B||t==(J|B))&&!d.length?ae=Zh(e,t,i,o):ae=Zo.apply(s,Z);var ve=Y?Ac:td;return nd(ve(ae,Z),e,t)}function zc(e,t,i,o){return e===s||kn(e,$i[i])&&!Le.call(o,i)?t:e}function Kc(e,t,i,o,d,h){return Ue(e)&&Ue(t)&&(h.set(t,e),jo(e,t,s,Kc,h),h.delete(t)),e}function t_(e){return Jr(e)?s:e}function Yc(e,t,i,o,d,h){var b=i&te,w=e.length,A=t.length;if(w!=A&&!(b&&A>w))return!1;var R=h.get(e),P=h.get(t);if(R&&P)return R==t&&P==e;var F=-1,Y=!0,Z=i&ne?new us:s;for(h.set(e,t),h.set(t,e);++F<w;){var ae=e[F],ve=t[F];if(o)var le=b?o(ve,ae,F,t,e,h):o(ae,ve,F,e,t,h);if(le!==s){if(le)continue;Y=!1;break}if(Z){if(!Di(t,function(ye,xe){if(!In(Z,xe)&&(ae===ye||d(ae,ye,i,o,h)))return Z.push(xe)})){Y=!1;break}}else if(!(ae===ve||d(ae,ve,i,o,h))){Y=!1;break}}return h.delete(e),h.delete(t),Y}function n_(e,t,i,o,d,h,b){switch(i){case An:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Mn:return!(e.byteLength!=t.byteLength||!h(new Mo(e),new Mo(t)));case Et:case Rt:case rt:return kn(+e,+t);case xn:return e.name==t.name&&e.message==t.message;case xt:case Rn:return e==t+"";case Ae:var w=qs;case Be:var A=o&te;if(w||(w=Us),e.size!=t.size&&!A)return!1;var R=b.get(e);if(R)return R==t;o|=ne,b.set(e,t);var P=Yc(w(e),w(t),o,d,h,b);return b.delete(e),P;case ti:if(Vr)return Vr.call(e)==Vr.call(t)}return!1}function i_(e,t,i,o,d,h){var b=i&te,w=Fl(e),A=w.length,R=Fl(t),P=R.length;if(A!=P&&!b)return!1;for(var F=A;F--;){var Y=w[F];if(!(b?Y in t:Le.call(t,Y)))return!1}var Z=h.get(e),ae=h.get(t);if(Z&&ae)return Z==t&&ae==e;var ve=!0;h.set(e,t),h.set(t,e);for(var le=b;++F<A;){Y=w[F];var ye=e[Y],xe=t[Y];if(o)var Zt=b?o(xe,ye,Y,t,e,h):o(ye,xe,Y,e,t,h);if(!(Zt===s?ye===xe||d(ye,xe,i,o,h):Zt)){ve=!1;break}le||(le=Y=="constructor")}if(ve&&!le){var Dt=e.constructor,en=t.constructor;Dt!=en&&"constructor"in e&&"constructor"in t&&!(typeof Dt=="function"&&Dt instanceof Dt&&typeof en=="function"&&en instanceof en)&&(ve=!1)}return h.delete(e),h.delete(t),ve}function pi(e){return Kl(Zc(e,s,ld),e+"")}function Fl(e){return pc(e,at,Wl)}function Bl(e){return pc(e,zt,Gc)}var ql=Vo?function(e){return Vo.get(e)}:ru;function ia(e){for(var t=e.name+"",i=Hs[t],o=Le.call(Hs,t)?i.length:0;o--;){var d=i[o],h=d.func;if(h==null||h==e)return d.name}return t}function Gs(e){var t=Le.call(p,"placeholder")?p:e;return t.placeholder}function oe(){var e=p.iteratee||iu;return e=e===iu?mc:e,arguments.length?e(arguments[0],arguments[1]):e}function sa(e,t){var i=e.__data__;return d_(t)?i[typeof t=="string"?"string":"hash"]:i.map}function Ul(e){for(var t=at(e),i=t.length;i--;){var o=t[i],d=e[o];t[i]=[o,d,Xc(d)]}return t}function fs(e,t){var i=ul(e,t);return _c(i)?i:s}function s_(e){var t=Le.call(e,as),i=e[as];try{e[as]=s;var o=!0}catch{}var d=Ro.call(e);return o&&(t?e[as]=i:delete e[as]),d}var Wl=_l?function(e){return e==null?[]:(e=K(e),vt(_l(e),function(t){return ec.call(e,t)}))}:ou,Gc=_l?function(e){for(var t=[];e;)Wn(t,Wl(e)),e=Fo(e);return t}:ou,yt=Ot;(ml&&yt(new ml(new ArrayBuffer(1)))!=An||qr&&yt(new qr)!=Ae||vl&&yt(vl.resolve())!=xs||Vs&&yt(new Vs)!=Be||Ur&&yt(new Ur)!=At)&&(yt=function(e){var t=Ot(e),i=t==Qe?e.constructor:s,o=i?ps(i):"";if(o)switch(o){case qp:return An;case Up:return Ae;case Wp:return xs;case Vp:return Be;case Hp:return At}return t});function r_(e,t,i){for(var o=-1,d=i.length;++o<d;){var h=i[o],b=h.size;switch(h.type){case"drop":e+=b;break;case"dropRight":t-=b;break;case"take":t=bt(t,e+b);break;case"takeRight":e=it(e,t-b);break}}return{start:e,end:t}}function o_(e){var t=e.match(qa);return t?t[1].split(ct):[]}function jc(e,t,i){t=Fi(t,e);for(var o=-1,d=t.length,h=!1;++o<d;){var b=Yn(t[o]);if(!(h=e!=null&&i(e,b)))break;e=e[b]}return h||++o!=d?h:(d=e==null?0:e.length,!!d&&da(d)&&hi(b,d)&&(pe(e)||hs(e)))}function a_(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&Le.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function Qc(e){return typeof e.constructor=="function"&&!Qr(e)?zs(Fo(e)):{}}function l_(e,t,i){var o=e.constructor;switch(t){case Mn:return Rl(e);case Et:case Rt:return new o(+e);case An:return zh(e,i);case Xe:case As:case Qi:case mr:case Fn:case vr:case gr:case br:case Xi:return kc(e,i);case Ae:return new o;case rt:case Rn:return new o(e);case xt:return Kh(e);case Be:return new o;case ti:return Yh(e)}}function u_(e,t){var i=t.length;if(!i)return e;var o=i-1;return t[o]=(i>1?"& ":"")+t[o],t=t.join(i>2?", ":" "),e.replace(Ba,`{
/* [wrapped with `+t+`] */
`)}function c_(e){return pe(e)||hs(e)||!!(tc&&e&&e[tc])}function hi(e,t){var i=typeof e;return t=t??wt,!!t&&(i=="number"||i!="symbol"&&go.test(e))&&e>-1&&e%1==0&&e<t}function It(e,t,i){if(!Ue(i))return!1;var o=typeof t;return(o=="number"?Ht(i)&&hi(t,i.length):o=="string"&&t in i)?kn(i[t],e):!1}function Vl(e,t){if(pe(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||Jt(e)?!0:wr.test(e)||!tt.test(e)||t!=null&&e in K(t)}function d_(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Hl(e){var t=ia(e),i=p[t];if(typeof i!="function"||!(t in we.prototype))return!1;if(e===i)return!0;var o=ql(i);return!!o&&e===o[0]}function f_(e){return!!Xu&&Xu in e}var p_=Ws?_i:au;function Qr(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||$i;return e===i}function Xc(e){return e===e&&!Ue(e)}function Jc(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==s||e in K(i))}}function h_(e){var t=ua(e,function(o){return i.size===U&&i.clear(),o}),i=t.cache;return t}function __(e,t){var i=e[1],o=t[1],d=i|o,h=d<(J|N|ue),b=o==ue&&i==ie||o==ue&&i==Oe&&e[7].length<=t[8]||o==(ue|Oe)&&t[7].length<=t[8]&&i==ie;if(!(h||b))return e;o&J&&(e[2]=t[2],d|=i&J?0:H);var w=t[3];if(w){var A=e[3];e[3]=A?$c(A,w,t[4]):w,e[4]=A?Hn(e[3],L):t[4]}return w=t[5],w&&(A=e[5],e[5]=A?Rc(A,w,t[6]):w,e[6]=A?Hn(e[5],L):t[6]),w=t[7],w&&(e[7]=w),o&ue&&(e[8]=e[8]==null?t[8]:bt(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=d,e}function m_(e){var t=[];if(e!=null)for(var i in K(e))t.push(i);return t}function v_(e){return Ro.call(e)}function Zc(e,t,i){return t=it(t===s?e.length-1:t,0),function(){for(var o=arguments,d=-1,h=it(o.length-t,0),b=y(h);++d<h;)b[d]=o[t+d];d=-1;for(var w=y(t+1);++d<t;)w[d]=o[d];return w[t]=i(b),Ct(e,this,w)}}function ed(e,t){return t.length<2?e:ds(e,pn(t,0,-1))}function g_(e,t){for(var i=e.length,o=bt(t.length,i),d=Vt(e);o--;){var h=t[o];e[o]=hi(h,i)?d[h]:s}return e}function zl(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var td=id(Ac),Xr=Lp||function(e,t){return nt.setTimeout(e,t)},Kl=id(Uh);function nd(e,t,i){var o=t+"";return Kl(e,u_(o,b_(o_(o),i)))}function id(e){var t=0,i=0;return function(){var o=Mp(),d=We-(o-i);if(i=o,d>0){if(++t>=st)return arguments[0]}else t=0;return e.apply(s,arguments)}}function ra(e,t){var i=-1,o=e.length,d=o-1;for(t=t===s?o:t;++i<t;){var h=Ol(i,d),b=e[h];e[h]=e[i],e[i]=b}return e.length=t,e}var sd=h_(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Bn,function(i,o,d,h){t.push(d?h.replace(ni,"$1"):o||i)}),t});function Yn(e){if(typeof e=="string"||Jt(e))return e;var t=e+"";return t=="0"&&1/e==-Ye?"-0":t}function ps(e){if(e!=null){try{return $o.call(e)}catch{}try{return e+""}catch{}}return""}function b_(e,t){return Ut(En,function(i){var o="_."+i[0];t&i[1]&&!ln(e,o)&&e.push(o)}),e.sort()}function rd(e){if(e instanceof we)return e.clone();var t=new dn(e.__wrapped__,e.__chain__);return t.__actions__=Vt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function y_(e,t,i){(i?It(e,t,i):t===s)?t=1:t=it(me(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var d=0,h=0,b=y(Uo(o/t));d<o;)b[h++]=pn(e,d,d+=t);return b}function w_(e){for(var t=-1,i=e==null?0:e.length,o=0,d=[];++t<i;){var h=e[t];h&&(d[o++]=h)}return d}function E_(){var e=arguments.length;if(!e)return[];for(var t=y(e-1),i=arguments[0],o=e;o--;)t[o-1]=arguments[o];return Wn(pe(i)?Vt(i):[i],dt(t,1))}var x_=ge(function(e,t){return Ge(e)?zr(e,dt(t,1,Ge,!0)):[]}),A_=ge(function(e,t){var i=hn(t);return Ge(i)&&(i=s),Ge(e)?zr(e,dt(t,1,Ge,!0),oe(i,2)):[]}),T_=ge(function(e,t){var i=hn(t);return Ge(i)&&(i=s),Ge(e)?zr(e,dt(t,1,Ge,!0),s,i):[]});function C_(e,t,i){var o=e==null?0:e.length;return o?(t=i||t===s?1:me(t),pn(e,t<0?0:t,o)):[]}function S_(e,t,i){var o=e==null?0:e.length;return o?(t=i||t===s?1:me(t),t=o-t,pn(e,0,t<0?0:t)):[]}function O_(e,t){return e&&e.length?Xo(e,oe(t,3),!0,!0):[]}function I_(e,t){return e&&e.length?Xo(e,oe(t,3),!0):[]}function D_(e,t,i,o){var d=e==null?0:e.length;return d?(i&&typeof i!="number"&&It(e,t,i)&&(i=0,o=d),Eh(e,t,i,o)):[]}function od(e,t,i){var o=e==null?0:e.length;if(!o)return-1;var d=i==null?0:me(i);return d<0&&(d=it(o+d,0)),rs(e,oe(t,3),d)}function ad(e,t,i){var o=e==null?0:e.length;if(!o)return-1;var d=o-1;return i!==s&&(d=me(i),d=i<0?it(o+d,0):bt(d,o-1)),rs(e,oe(t,3),d,!0)}function ld(e){var t=e==null?0:e.length;return t?dt(e,1):[]}function N_(e){var t=e==null?0:e.length;return t?dt(e,Ye):[]}function k_(e,t){var i=e==null?0:e.length;return i?(t=t===s?1:me(t),dt(e,t)):[]}function L_(e){for(var t=-1,i=e==null?0:e.length,o={};++t<i;){var d=e[t];o[d[0]]=d[1]}return o}function ud(e){return e&&e.length?e[0]:s}function $_(e,t,i){var o=e==null?0:e.length;if(!o)return-1;var d=i==null?0:me(i);return d<0&&(d=it(o+d,0)),li(e,t,d)}function R_(e){var t=e==null?0:e.length;return t?pn(e,0,-1):[]}var P_=ge(function(e){var t=Se(e,Ll);return t.length&&t[0]===e[0]?xl(t):[]}),M_=ge(function(e){var t=hn(e),i=Se(e,Ll);return t===hn(i)?t=s:i.pop(),i.length&&i[0]===e[0]?xl(i,oe(t,2)):[]}),F_=ge(function(e){var t=hn(e),i=Se(e,Ll);return t=typeof t=="function"?t:s,t&&i.pop(),i.length&&i[0]===e[0]?xl(i,s,t):[]});function B_(e,t){return e==null?"":Rp.call(e,t)}function hn(e){var t=e==null?0:e.length;return t?e[t-1]:s}function q_(e,t,i){var o=e==null?0:e.length;if(!o)return-1;var d=o;return i!==s&&(d=me(i),d=d<0?it(o+d,0):bt(d,o-1)),t===t?ko(e,t,d):rs(e,Io,d,!0)}function U_(e,t){return e&&e.length?yc(e,me(t)):s}var W_=ge(cd);function cd(e,t){return e&&e.length&&t&&t.length?Sl(e,t):e}function V_(e,t,i){return e&&e.length&&t&&t.length?Sl(e,t,oe(i,2)):e}function H_(e,t,i){return e&&e.length&&t&&t.length?Sl(e,t,s,i):e}var z_=pi(function(e,t){var i=e==null?0:e.length,o=bl(e,t);return xc(e,Se(t,function(d){return hi(d,i)?+d:d}).sort(Lc)),o});function K_(e,t){var i=[];if(!(e&&e.length))return i;var o=-1,d=[],h=e.length;for(t=oe(t,3);++o<h;){var b=e[o];t(b,o,e)&&(i.push(b),d.push(o))}return xc(e,d),i}function Yl(e){return e==null?e:Bp.call(e)}function Y_(e,t,i){var o=e==null?0:e.length;return o?(i&&typeof i!="number"&&It(e,t,i)?(t=0,i=o):(t=t==null?0:me(t),i=i===s?o:me(i)),pn(e,t,i)):[]}function G_(e,t){return Qo(e,t)}function j_(e,t,i){return Dl(e,t,oe(i,2))}function Q_(e,t){var i=e==null?0:e.length;if(i){var o=Qo(e,t);if(o<i&&kn(e[o],t))return o}return-1}function X_(e,t){return Qo(e,t,!0)}function J_(e,t,i){return Dl(e,t,oe(i,2),!0)}function Z_(e,t){var i=e==null?0:e.length;if(i){var o=Qo(e,t,!0)-1;if(kn(e[o],t))return o}return-1}function em(e){return e&&e.length?Tc(e):[]}function tm(e,t){return e&&e.length?Tc(e,oe(t,2)):[]}function nm(e){var t=e==null?0:e.length;return t?pn(e,1,t):[]}function im(e,t,i){return e&&e.length?(t=i||t===s?1:me(t),pn(e,0,t<0?0:t)):[]}function sm(e,t,i){var o=e==null?0:e.length;return o?(t=i||t===s?1:me(t),t=o-t,pn(e,t<0?0:t,o)):[]}function rm(e,t){return e&&e.length?Xo(e,oe(t,3),!1,!0):[]}function om(e,t){return e&&e.length?Xo(e,oe(t,3)):[]}var am=ge(function(e){return Mi(dt(e,1,Ge,!0))}),lm=ge(function(e){var t=hn(e);return Ge(t)&&(t=s),Mi(dt(e,1,Ge,!0),oe(t,2))}),um=ge(function(e){var t=hn(e);return t=typeof t=="function"?t:s,Mi(dt(e,1,Ge,!0),s,t)});function cm(e){return e&&e.length?Mi(e):[]}function dm(e,t){return e&&e.length?Mi(e,oe(t,2)):[]}function fm(e,t){return t=typeof t=="function"?t:s,e&&e.length?Mi(e,s,t):[]}function Gl(e){if(!(e&&e.length))return[];var t=0;return e=vt(e,function(i){if(Ge(i))return t=it(i.length,t),!0}),cn(t,function(i){return Se(e,ke(i))})}function dd(e,t){if(!(e&&e.length))return[];var i=Gl(e);return t==null?i:Se(i,function(o){return Ct(t,s,o)})}var pm=ge(function(e,t){return Ge(e)?zr(e,t):[]}),hm=ge(function(e){return kl(vt(e,Ge))}),_m=ge(function(e){var t=hn(e);return Ge(t)&&(t=s),kl(vt(e,Ge),oe(t,2))}),mm=ge(function(e){var t=hn(e);return t=typeof t=="function"?t:s,kl(vt(e,Ge),s,t)}),vm=ge(Gl);function gm(e,t){return Ic(e||[],t||[],Hr)}function bm(e,t){return Ic(e||[],t||[],Gr)}var ym=ge(function(e){var t=e.length,i=t>1?e[t-1]:s;return i=typeof i=="function"?(e.pop(),i):s,dd(e,i)});function fd(e){var t=p(e);return t.__chain__=!0,t}function wm(e,t){return t(e),e}function oa(e,t){return t(e)}var Em=pi(function(e){var t=e.length,i=t?e[0]:0,o=this.__wrapped__,d=function(h){return bl(h,e)};return t>1||this.__actions__.length||!(o instanceof we)||!hi(i)?this.thru(d):(o=o.slice(i,+i+(t?1:0)),o.__actions__.push({func:oa,args:[d],thisArg:s}),new dn(o,this.__chain__).thru(function(h){return t&&!h.length&&h.push(s),h}))});function xm(){return fd(this)}function Am(){return new dn(this.value(),this.__chain__)}function Tm(){this.__values__===s&&(this.__values__=Cd(this.value()));var e=this.__index__>=this.__values__.length,t=e?s:this.__values__[this.__index__++];return{done:e,value:t}}function Cm(){return this}function Sm(e){for(var t,i=this;i instanceof zo;){var o=rd(i);o.__index__=0,o.__values__=s,t?d.__wrapped__=o:t=o;var d=o;i=i.__wrapped__}return d.__wrapped__=e,t}function Om(){var e=this.__wrapped__;if(e instanceof we){var t=e;return this.__actions__.length&&(t=new we(this)),t=t.reverse(),t.__actions__.push({func:oa,args:[Yl],thisArg:s}),new dn(t,this.__chain__)}return this.thru(Yl)}function Im(){return Oc(this.__wrapped__,this.__actions__)}var Dm=Jo(function(e,t,i){Le.call(e,i)?++e[i]:di(e,i,1)});function Nm(e,t,i){var o=pe(e)?mt:wh;return i&&It(e,t,i)&&(t=s),o(e,oe(t,3))}function km(e,t){var i=pe(e)?vt:dc;return i(e,oe(t,3))}var Lm=Bc(od),$m=Bc(ad);function Rm(e,t){return dt(aa(e,t),1)}function Pm(e,t){return dt(aa(e,t),Ye)}function Mm(e,t,i){return i=i===s?1:me(i),dt(aa(e,t),i)}function pd(e,t){var i=pe(e)?Ut:Pi;return i(e,oe(t,3))}function hd(e,t){var i=pe(e)?il:cc;return i(e,oe(t,3))}var Fm=Jo(function(e,t,i){Le.call(e,i)?e[i].push(t):di(e,i,[t])});function Bm(e,t,i,o){e=Ht(e)?e:Qs(e),i=i&&!o?me(i):0;var d=e.length;return i<0&&(i=it(d+i,0)),fa(e)?i<=d&&e.indexOf(t,i)>-1:!!d&&li(e,t,i)>-1}var qm=ge(function(e,t,i){var o=-1,d=typeof t=="function",h=Ht(e)?y(e.length):[];return Pi(e,function(b){h[++o]=d?Ct(t,b,i):Kr(b,t,i)}),h}),Um=Jo(function(e,t,i){di(e,i,t)});function aa(e,t){var i=pe(e)?Se:vc;return i(e,oe(t,3))}function Wm(e,t,i,o){return e==null?[]:(pe(t)||(t=t==null?[]:[t]),i=o?s:i,pe(i)||(i=i==null?[]:[i]),wc(e,t,i))}var Vm=Jo(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});function Hm(e,t,i){var o=pe(e)?Pr:un,d=arguments.length<3;return o(e,oe(t,4),i,d,Pi)}function zm(e,t,i){var o=pe(e)?ss:un,d=arguments.length<3;return o(e,oe(t,4),i,d,cc)}function Km(e,t){var i=pe(e)?vt:dc;return i(e,ca(oe(t,3)))}function Ym(e){var t=pe(e)?oc:Bh;return t(e)}function Gm(e,t,i){(i?It(e,t,i):t===s)?t=1:t=me(t);var o=pe(e)?mh:qh;return o(e,t)}function jm(e){var t=pe(e)?vh:Wh;return t(e)}function Qm(e){if(e==null)return 0;if(Ht(e))return fa(e)?Dn(e):e.length;var t=yt(e);return t==Ae||t==Be?e.size:Tl(e).length}function Xm(e,t,i){var o=pe(e)?Di:Vh;return i&&It(e,t,i)&&(t=s),o(e,oe(t,3))}var Jm=ge(function(e,t){if(e==null)return[];var i=t.length;return i>1&&It(e,t[0],t[1])?t=[]:i>2&&It(t[0],t[1],t[2])&&(t=[t[0]]),wc(e,dt(t,1),[])}),la=kp||function(){return nt.Date.now()};function Zm(e,t){if(typeof t!="function")throw new He(E);return e=me(e),function(){if(--e<1)return t.apply(this,arguments)}}function _d(e,t,i){return t=i?s:t,t=e&&t==null?e.length:t,fi(e,ue,s,s,s,s,t)}function md(e,t){var i;if(typeof t!="function")throw new He(E);return e=me(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=s),i}}var jl=ge(function(e,t,i){var o=J;if(i.length){var d=Hn(i,Gs(jl));o|=B}return fi(e,o,t,i,d)}),vd=ge(function(e,t,i){var o=J|N;if(i.length){var d=Hn(i,Gs(vd));o|=B}return fi(t,o,e,i,d)});function gd(e,t,i){t=i?s:t;var o=fi(e,ie,s,s,s,s,s,t);return o.placeholder=gd.placeholder,o}function bd(e,t,i){t=i?s:t;var o=fi(e,M,s,s,s,s,s,t);return o.placeholder=bd.placeholder,o}function yd(e,t,i){var o,d,h,b,w,A,R=0,P=!1,F=!1,Y=!0;if(typeof e!="function")throw new He(E);t=_n(t)||0,Ue(i)&&(P=!!i.leading,F="maxWait"in i,h=F?it(_n(i.maxWait)||0,t):h,Y="trailing"in i?!!i.trailing:Y);function Z(je){var Ln=o,vi=d;return o=d=s,R=je,b=e.apply(vi,Ln),b}function ae(je){return R=je,w=Xr(ye,t),P?Z(je):b}function ve(je){var Ln=je-A,vi=je-R,Bd=t-Ln;return F?bt(Bd,h-vi):Bd}function le(je){var Ln=je-A,vi=je-R;return A===s||Ln>=t||Ln<0||F&&vi>=h}function ye(){var je=la();if(le(je))return xe(je);w=Xr(ye,ve(je))}function xe(je){return w=s,Y&&o?Z(je):(o=d=s,b)}function Zt(){w!==s&&Dc(w),R=0,o=A=d=w=s}function Dt(){return w===s?b:xe(la())}function en(){var je=la(),Ln=le(je);if(o=arguments,d=this,A=je,Ln){if(w===s)return ae(A);if(F)return Dc(w),w=Xr(ye,t),Z(A)}return w===s&&(w=Xr(ye,t)),b}return en.cancel=Zt,en.flush=Dt,en}var ev=ge(function(e,t){return uc(e,1,t)}),tv=ge(function(e,t,i){return uc(e,_n(t)||0,i)});function nv(e){return fi(e,Ie)}function ua(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new He(E);var i=function(){var o=arguments,d=t?t.apply(this,o):o[0],h=i.cache;if(h.has(d))return h.get(d);var b=e.apply(this,o);return i.cache=h.set(d,b)||h,b};return i.cache=new(ua.Cache||ci),i}ua.Cache=ci;function ca(e){if(typeof e!="function")throw new He(E);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function iv(e){return md(2,e)}var sv=Hh(function(e,t){t=t.length==1&&pe(t[0])?Se(t[0],ot(oe())):Se(dt(t,1),ot(oe()));var i=t.length;return ge(function(o){for(var d=-1,h=bt(o.length,i);++d<h;)o[d]=t[d].call(this,o[d]);return Ct(e,this,o)})}),Ql=ge(function(e,t){var i=Hn(t,Gs(Ql));return fi(e,B,s,t,i)}),wd=ge(function(e,t){var i=Hn(t,Gs(wd));return fi(e,Q,s,t,i)}),rv=pi(function(e,t){return fi(e,Oe,s,s,s,t)});function ov(e,t){if(typeof e!="function")throw new He(E);return t=t===s?t:me(t),ge(e,t)}function av(e,t){if(typeof e!="function")throw new He(E);return t=t==null?0:it(me(t),0),ge(function(i){var o=i[t],d=Bi(i,0,t);return o&&Wn(d,o),Ct(e,this,d)})}function lv(e,t,i){var o=!0,d=!0;if(typeof e!="function")throw new He(E);return Ue(i)&&(o="leading"in i?!!i.leading:o,d="trailing"in i?!!i.trailing:d),yd(e,t,{leading:o,maxWait:t,trailing:d})}function uv(e){return _d(e,1)}function cv(e,t){return Ql($l(t),e)}function dv(){if(!arguments.length)return[];var e=arguments[0];return pe(e)?e:[e]}function fv(e){return fn(e,G)}function pv(e,t){return t=typeof t=="function"?t:s,fn(e,G,t)}function hv(e){return fn(e,V|G)}function _v(e,t){return t=typeof t=="function"?t:s,fn(e,V|G,t)}function mv(e,t){return t==null||lc(e,t,at(t))}function kn(e,t){return e===t||e!==e&&t!==t}var vv=na(El),gv=na(function(e,t){return e>=t}),hs=hc((function(){return arguments})())?hc:function(e){return ze(e)&&Le.call(e,"callee")&&!ec.call(e,"callee")},pe=y.isArray,bv=Ms?ot(Ms):Sh;function Ht(e){return e!=null&&da(e.length)&&!_i(e)}function Ge(e){return ze(e)&&Ht(e)}function yv(e){return e===!0||e===!1||ze(e)&&Ot(e)==Et}var qi=$p||au,wv=Ii?ot(Ii):Oh;function Ev(e){return ze(e)&&e.nodeType===1&&!Jr(e)}function xv(e){if(e==null)return!0;if(Ht(e)&&(pe(e)||typeof e=="string"||typeof e.splice=="function"||qi(e)||js(e)||hs(e)))return!e.length;var t=yt(e);if(t==Ae||t==Be)return!e.size;if(Qr(e))return!Tl(e).length;for(var i in e)if(Le.call(e,i))return!1;return!0}function Av(e,t){return Yr(e,t)}function Tv(e,t,i){i=typeof i=="function"?i:s;var o=i?i(e,t):s;return o===s?Yr(e,t,s,i):!!o}function Xl(e){if(!ze(e))return!1;var t=Ot(e);return t==xn||t==_r||typeof e.message=="string"&&typeof e.name=="string"&&!Jr(e)}function Cv(e){return typeof e=="number"&&nc(e)}function _i(e){if(!Ue(e))return!1;var t=Ot(e);return t==Zn||t==Gt||t==ht||t==ei}function Ed(e){return typeof e=="number"&&e==me(e)}function da(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=wt}function Ue(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function ze(e){return e!=null&&typeof e=="object"}var xd=kr?ot(kr):Dh;function Sv(e,t){return e===t||Al(e,t,Ul(t))}function Ov(e,t,i){return i=typeof i=="function"?i:s,Al(e,t,Ul(t),i)}function Iv(e){return Ad(e)&&e!=+e}function Dv(e){if(p_(e))throw new D(x);return _c(e)}function Nv(e){return e===null}function kv(e){return e==null}function Ad(e){return typeof e=="number"||ze(e)&&Ot(e)==rt}function Jr(e){if(!ze(e)||Ot(e)!=Qe)return!1;var t=Fo(e);if(t===null)return!0;var i=Le.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&$o.call(i)==Op}var Jl=Lr?ot(Lr):Nh;function Lv(e){return Ed(e)&&e>=-wt&&e<=wt}var Td=$r?ot($r):kh;function fa(e){return typeof e=="string"||!pe(e)&&ze(e)&&Ot(e)==Rn}function Jt(e){return typeof e=="symbol"||ze(e)&&Ot(e)==ti}var js=So?ot(So):Lh;function $v(e){return e===s}function Rv(e){return ze(e)&&yt(e)==At}function Pv(e){return ze(e)&&Ot(e)==Pt}var Mv=na(Cl),Fv=na(function(e,t){return e<=t});function Cd(e){if(!e)return[];if(Ht(e))return fa(e)?gt(e):Vt(e);if(Br&&e[Br])return dl(e[Br]());var t=yt(e),i=t==Ae?qs:t==Be?Us:Qs;return i(e)}function mi(e){if(!e)return e===0?e:0;if(e=_n(e),e===Ye||e===-Ye){var t=e<0?-1:1;return t*yn}return e===e?e:0}function me(e){var t=mi(e),i=t%1;return t===t?i?t-i:t:0}function Sd(e){return e?cs(me(e),0,pt):0}function _n(e){if(typeof e=="number")return e;if(Jt(e))return wn;if(Ue(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ue(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Ze(e);var i=Ar.test(e);return i||vo.test(e)?Un(e.slice(2),i?2:8):Cs.test(e)?wn:+e}function Od(e){return Kn(e,zt(e))}function Bv(e){return e?cs(me(e),-wt,wt):e===0?e:0}function De(e){return e==null?"":Xt(e)}var qv=Ks(function(e,t){if(Qr(t)||Ht(t)){Kn(t,at(t),e);return}for(var i in t)Le.call(t,i)&&Hr(e,i,t[i])}),Id=Ks(function(e,t){Kn(t,zt(t),e)}),pa=Ks(function(e,t,i,o){Kn(t,zt(t),e,o)}),Uv=Ks(function(e,t,i,o){Kn(t,at(t),e,o)}),Wv=pi(bl);function Vv(e,t){var i=zs(e);return t==null?i:ac(i,t)}var Hv=ge(function(e,t){e=K(e);var i=-1,o=t.length,d=o>2?t[2]:s;for(d&&It(t[0],t[1],d)&&(o=1);++i<o;)for(var h=t[i],b=zt(h),w=-1,A=b.length;++w<A;){var R=b[w],P=e[R];(P===s||kn(P,$i[R])&&!Le.call(e,R))&&(e[R]=h[R])}return e}),zv=ge(function(e){return e.push(s,Kc),Ct(Dd,s,e)});function Kv(e,t){return Oo(e,oe(t,3),zn)}function Yv(e,t){return Oo(e,oe(t,3),wl)}function Gv(e,t){return e==null?e:yl(e,oe(t,3),zt)}function jv(e,t){return e==null?e:fc(e,oe(t,3),zt)}function Qv(e,t){return e&&zn(e,oe(t,3))}function Xv(e,t){return e&&wl(e,oe(t,3))}function Jv(e){return e==null?[]:Go(e,at(e))}function Zv(e){return e==null?[]:Go(e,zt(e))}function Zl(e,t,i){var o=e==null?s:ds(e,t);return o===s?i:o}function eg(e,t){return e!=null&&jc(e,t,xh)}function eu(e,t){return e!=null&&jc(e,t,Ah)}var tg=Uc(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=Ro.call(t)),e[t]=i},nu(Kt)),ng=Uc(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=Ro.call(t)),Le.call(e,t)?e[t].push(i):e[t]=[i]},oe),ig=ge(Kr);function at(e){return Ht(e)?rc(e):Tl(e)}function zt(e){return Ht(e)?rc(e,!0):$h(e)}function sg(e,t){var i={};return t=oe(t,3),zn(e,function(o,d,h){di(i,t(o,d,h),o)}),i}function rg(e,t){var i={};return t=oe(t,3),zn(e,function(o,d,h){di(i,d,t(o,d,h))}),i}var og=Ks(function(e,t,i){jo(e,t,i)}),Dd=Ks(function(e,t,i,o){jo(e,t,i,o)}),ag=pi(function(e,t){var i={};if(e==null)return i;var o=!1;t=Se(t,function(h){return h=Fi(h,e),o||(o=h.length>1),h}),Kn(e,Bl(e),i),o&&(i=fn(i,V|ee|G,t_));for(var d=t.length;d--;)Nl(i,t[d]);return i});function lg(e,t){return Nd(e,ca(oe(t)))}var ug=pi(function(e,t){return e==null?{}:Ph(e,t)});function Nd(e,t){if(e==null)return{};var i=Se(Bl(e),function(o){return[o]});return t=oe(t),Ec(e,i,function(o,d){return t(o,d[0])})}function cg(e,t,i){t=Fi(t,e);var o=-1,d=t.length;for(d||(d=1,e=s);++o<d;){var h=e==null?s:e[Yn(t[o])];h===s&&(o=d,h=i),e=_i(h)?h.call(e):h}return e}function dg(e,t,i){return e==null?e:Gr(e,t,i)}function fg(e,t,i,o){return o=typeof o=="function"?o:s,e==null?e:Gr(e,t,i,o)}var kd=Hc(at),Ld=Hc(zt);function pg(e,t,i){var o=pe(e),d=o||qi(e)||js(e);if(t=oe(t,4),i==null){var h=e&&e.constructor;d?i=o?new h:[]:Ue(e)?i=_i(h)?zs(Fo(e)):{}:i={}}return(d?Ut:zn)(e,function(b,w,A){return t(i,b,w,A)}),i}function hg(e,t){return e==null?!0:Nl(e,t)}function _g(e,t,i){return e==null?e:Sc(e,t,$l(i))}function mg(e,t,i,o){return o=typeof o=="function"?o:s,e==null?e:Sc(e,t,$l(i),o)}function Qs(e){return e==null?[]:ki(e,at(e))}function vg(e){return e==null?[]:ki(e,zt(e))}function gg(e,t,i){return i===s&&(i=t,t=s),i!==s&&(i=_n(i),i=i===i?i:0),t!==s&&(t=_n(t),t=t===t?t:0),cs(_n(e),t,i)}function bg(e,t,i){return t=mi(t),i===s?(i=t,t=0):i=mi(i),e=_n(e),Th(e,t,i)}function yg(e,t,i){if(i&&typeof i!="boolean"&&It(e,t,i)&&(t=i=s),i===s&&(typeof t=="boolean"?(i=t,t=s):typeof e=="boolean"&&(i=e,e=s)),e===s&&t===s?(e=0,t=1):(e=mi(e),t===s?(t=e,e=0):t=mi(t)),e>t){var o=e;e=t,t=o}if(i||e%1||t%1){var d=ic();return bt(e+d*(t-e+Je("1e-"+((d+"").length-1))),t)}return Ol(e,t)}var wg=Ys(function(e,t,i){return t=t.toLowerCase(),e+(i?$d(t):t)});function $d(e){return tu(De(e).toLowerCase())}function Rd(e){return e=De(e),e&&e.replace(Wa,Bs).replace(Qa,"")}function Eg(e,t,i){e=De(e),t=Xt(t);var o=e.length;i=i===s?o:cs(me(i),0,o);var d=i;return i-=t.length,i>=0&&e.slice(i,d)==t}function xg(e){return e=De(e),e&&xi.test(e)?e.replace(ho,Mr):e}function Ag(e){return e=De(e),e&&Tn.test(e)?e.replace(Tt,"\\$&"):e}var Tg=Ys(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),Cg=Ys(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),Sg=Fc("toLowerCase");function Og(e,t,i){e=De(e),t=me(t);var o=t?Dn(e):0;if(!t||o>=t)return e;var d=(t-o)/2;return ta(Wo(d),i)+e+ta(Uo(d),i)}function Ig(e,t,i){e=De(e),t=me(t);var o=t?Dn(e):0;return t&&o<t?e+ta(t-o,i):e}function Dg(e,t,i){e=De(e),t=me(t);var o=t?Dn(e):0;return t&&o<t?ta(t-o,i)+e:e}function Ng(e,t,i){return i||t==null?t=0:t&&(t=+t),Fp(De(e).replace(Er,""),t||0)}function kg(e,t,i){return(i?It(e,t,i):t===s)?t=1:t=me(t),Il(De(e),t)}function Lg(){var e=arguments,t=De(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var $g=Ys(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});function Rg(e,t,i){return i&&typeof i!="number"&&It(e,t,i)&&(t=i=s),i=i===s?pt:i>>>0,i?(e=De(e),e&&(typeof t=="string"||t!=null&&!Jl(t))&&(t=Xt(t),!t&&Li(e))?Bi(gt(e),0,i):e.split(t,i)):[]}var Pg=Ys(function(e,t,i){return e+(i?" ":"")+tu(t)});function Mg(e,t,i){return e=De(e),i=i==null?0:cs(me(i),0,e.length),t=Xt(t),e.slice(i,i+t.length)==t}function Fg(e,t,i){var o=p.templateSettings;i&&It(e,t,i)&&(t=s),e=De(e),t=pa({},t,o,zc);var d=pa({},t.imports,o.imports,zc),h=at(d),b=ki(d,h),w,A,R=0,P=t.interpolate||Ss,F="__p += '",Y=qe((t.escape||Ss).source+"|"+P.source+"|"+(P===_e?xr:Ss).source+"|"+(t.evaluate||Ss).source+"|$","g"),Z="//# sourceURL="+(Le.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++is+"]")+`
`;e.replace(Y,function(le,ye,xe,Zt,Dt,en){return xe||(xe=Zt),F+=e.slice(R,en).replace(Mt,ll),ye&&(w=!0,F+=`' +
__e(`+ye+`) +
'`),Dt&&(A=!0,F+=`';
`+Dt+`;
__p += '`),xe&&(F+=`' +
((__t = (`+xe+`)) == null ? '' : __t) +
'`),R=en+le.length,le}),F+=`';
`;var ae=Le.call(t,"variable")&&t.variable;if(!ae)F=`with (obj) {
`+F+`
}
`;else if(Ti.test(ae))throw new D(S);F=(A?F.replace(W,""):F).replace(Fa,"$1").replace(yr,"$1;"),F="function("+(ae||"obj")+`) {
`+(ae?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(w?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+F+`return __p
}`;var ve=Md(function(){return j(h,Z+"return "+F).apply(s,b)});if(ve.source=F,Xl(ve))throw ve;return ve}function Bg(e){return De(e).toLowerCase()}function qg(e){return De(e).toUpperCase()}function Ug(e,t,i){if(e=De(e),e&&(i||t===s))return Ze(e);if(!e||!(t=Xt(t)))return e;var o=gt(e),d=gt(t),h=os(o,d),b=Do(o,d)+1;return Bi(o,h,b).join("")}function Wg(e,t,i){if(e=De(e),e&&(i||t===s))return e.slice(0,Lo(e)+1);if(!e||!(t=Xt(t)))return e;var o=gt(e),d=Do(o,gt(t))+1;return Bi(o,0,d).join("")}function Vg(e,t,i){if(e=De(e),e&&(i||t===s))return e.replace(Er,"");if(!e||!(t=Xt(t)))return e;var o=gt(e),d=os(o,gt(t));return Bi(o,d).join("")}function Hg(e,t){var i=fe,o=Fe;if(Ue(t)){var d="separator"in t?t.separator:d;i="length"in t?me(t.length):i,o="omission"in t?Xt(t.omission):o}e=De(e);var h=e.length;if(Li(e)){var b=gt(e);h=b.length}if(i>=h)return e;var w=i-Dn(o);if(w<1)return o;var A=b?Bi(b,0,w).join(""):e.slice(0,w);if(d===s)return A+o;if(b&&(w+=A.length-w),Jl(d)){if(e.slice(w).search(d)){var R,P=A;for(d.global||(d=qe(d.source,De(Ci.exec(d))+"g")),d.lastIndex=0;R=d.exec(P);)var F=R.index;A=A.slice(0,F===s?w:F)}}else if(e.indexOf(Xt(d),w)!=w){var Y=A.lastIndexOf(d);Y>-1&&(A=A.slice(0,Y))}return A+o}function zg(e){return e=De(e),e&&jt.test(e)?e.replace(po,hl):e}var Kg=Ys(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),tu=Fc("toUpperCase");function Pd(e,t,i){return e=De(e),t=i?s:t,t===s?cl(e)?u(e):rl(e):e.match(t)||[]}var Md=ge(function(e,t){try{return Ct(e,s,t)}catch(i){return Xl(i)?i:new D(i)}}),Yg=pi(function(e,t){return Ut(t,function(i){i=Yn(i),di(e,i,jl(e[i],e))}),e});function Gg(e){var t=e==null?0:e.length,i=oe();return e=t?Se(e,function(o){if(typeof o[1]!="function")throw new He(E);return[i(o[0]),o[1]]}):[],ge(function(o){for(var d=-1;++d<t;){var h=e[d];if(Ct(h[0],this,o))return Ct(h[1],this,o)}})}function jg(e){return yh(fn(e,V))}function nu(e){return function(){return e}}function Qg(e,t){return e==null||e!==e?t:e}var Xg=qc(),Jg=qc(!0);function Kt(e){return e}function iu(e){return mc(typeof e=="function"?e:fn(e,V))}function Zg(e){return gc(fn(e,V))}function eb(e,t){return bc(e,fn(t,V))}var tb=ge(function(e,t){return function(i){return Kr(i,e,t)}}),nb=ge(function(e,t){return function(i){return Kr(e,i,t)}});function su(e,t,i){var o=at(t),d=Go(t,o);i==null&&!(Ue(t)&&(d.length||!o.length))&&(i=t,t=e,e=this,d=Go(t,at(t)));var h=!(Ue(i)&&"chain"in i)||!!i.chain,b=_i(e);return Ut(d,function(w){var A=t[w];e[w]=A,b&&(e.prototype[w]=function(){var R=this.__chain__;if(h||R){var P=e(this.__wrapped__),F=P.__actions__=Vt(this.__actions__);return F.push({func:A,args:arguments,thisArg:e}),P.__chain__=R,P}return A.apply(e,Wn([this.value()],arguments))})}),e}function ib(){return nt._===this&&(nt._=Ip),this}function ru(){}function sb(e){return e=me(e),ge(function(t){return yc(t,e)})}var rb=Pl(Se),ob=Pl(mt),ab=Pl(Di);function Fd(e){return Vl(e)?ke(Yn(e)):Mh(e)}function lb(e){return function(t){return e==null?s:ds(e,t)}}var ub=Wc(),cb=Wc(!0);function ou(){return[]}function au(){return!1}function db(){return{}}function fb(){return""}function pb(){return!0}function hb(e,t){if(e=me(e),e<1||e>wt)return[];var i=pt,o=bt(e,pt);t=oe(t),e-=pt;for(var d=cn(o,t);++i<e;)t(i);return d}function _b(e){return pe(e)?Se(e,Yn):Jt(e)?[e]:Vt(sd(De(e)))}function mb(e){var t=++Sp;return De(e)+t}var vb=ea(function(e,t){return e+t},0),gb=Ml("ceil"),bb=ea(function(e,t){return e/t},1),yb=Ml("floor");function wb(e){return e&&e.length?Yo(e,Kt,El):s}function Eb(e,t){return e&&e.length?Yo(e,oe(t,2),El):s}function xb(e){return Ne(e,Kt)}function Ab(e,t){return Ne(e,oe(t,2))}function Tb(e){return e&&e.length?Yo(e,Kt,Cl):s}function Cb(e,t){return e&&e.length?Yo(e,oe(t,2),Cl):s}var Sb=ea(function(e,t){return e*t},1),Ob=Ml("round"),Ib=ea(function(e,t){return e-t},0);function Db(e){return e&&e.length?Vn(e,Kt):0}function Nb(e,t){return e&&e.length?Vn(e,oe(t,2)):0}return p.after=Zm,p.ary=_d,p.assign=qv,p.assignIn=Id,p.assignInWith=pa,p.assignWith=Uv,p.at=Wv,p.before=md,p.bind=jl,p.bindAll=Yg,p.bindKey=vd,p.castArray=dv,p.chain=fd,p.chunk=y_,p.compact=w_,p.concat=E_,p.cond=Gg,p.conforms=jg,p.constant=nu,p.countBy=Dm,p.create=Vv,p.curry=gd,p.curryRight=bd,p.debounce=yd,p.defaults=Hv,p.defaultsDeep=zv,p.defer=ev,p.delay=tv,p.difference=x_,p.differenceBy=A_,p.differenceWith=T_,p.drop=C_,p.dropRight=S_,p.dropRightWhile=O_,p.dropWhile=I_,p.fill=D_,p.filter=km,p.flatMap=Rm,p.flatMapDeep=Pm,p.flatMapDepth=Mm,p.flatten=ld,p.flattenDeep=N_,p.flattenDepth=k_,p.flip=nv,p.flow=Xg,p.flowRight=Jg,p.fromPairs=L_,p.functions=Jv,p.functionsIn=Zv,p.groupBy=Fm,p.initial=R_,p.intersection=P_,p.intersectionBy=M_,p.intersectionWith=F_,p.invert=tg,p.invertBy=ng,p.invokeMap=qm,p.iteratee=iu,p.keyBy=Um,p.keys=at,p.keysIn=zt,p.map=aa,p.mapKeys=sg,p.mapValues=rg,p.matches=Zg,p.matchesProperty=eb,p.memoize=ua,p.merge=og,p.mergeWith=Dd,p.method=tb,p.methodOf=nb,p.mixin=su,p.negate=ca,p.nthArg=sb,p.omit=ag,p.omitBy=lg,p.once=iv,p.orderBy=Wm,p.over=rb,p.overArgs=sv,p.overEvery=ob,p.overSome=ab,p.partial=Ql,p.partialRight=wd,p.partition=Vm,p.pick=ug,p.pickBy=Nd,p.property=Fd,p.propertyOf=lb,p.pull=W_,p.pullAll=cd,p.pullAllBy=V_,p.pullAllWith=H_,p.pullAt=z_,p.range=ub,p.rangeRight=cb,p.rearg=rv,p.reject=Km,p.remove=K_,p.rest=ov,p.reverse=Yl,p.sampleSize=Gm,p.set=dg,p.setWith=fg,p.shuffle=jm,p.slice=Y_,p.sortBy=Jm,p.sortedUniq=em,p.sortedUniqBy=tm,p.split=Rg,p.spread=av,p.tail=nm,p.take=im,p.takeRight=sm,p.takeRightWhile=rm,p.takeWhile=om,p.tap=wm,p.throttle=lv,p.thru=oa,p.toArray=Cd,p.toPairs=kd,p.toPairsIn=Ld,p.toPath=_b,p.toPlainObject=Od,p.transform=pg,p.unary=uv,p.union=am,p.unionBy=lm,p.unionWith=um,p.uniq=cm,p.uniqBy=dm,p.uniqWith=fm,p.unset=hg,p.unzip=Gl,p.unzipWith=dd,p.update=_g,p.updateWith=mg,p.values=Qs,p.valuesIn=vg,p.without=pm,p.words=Pd,p.wrap=cv,p.xor=hm,p.xorBy=_m,p.xorWith=mm,p.zip=vm,p.zipObject=gm,p.zipObjectDeep=bm,p.zipWith=ym,p.entries=kd,p.entriesIn=Ld,p.extend=Id,p.extendWith=pa,su(p,p),p.add=vb,p.attempt=Md,p.camelCase=wg,p.capitalize=$d,p.ceil=gb,p.clamp=gg,p.clone=fv,p.cloneDeep=hv,p.cloneDeepWith=_v,p.cloneWith=pv,p.conformsTo=mv,p.deburr=Rd,p.defaultTo=Qg,p.divide=bb,p.endsWith=Eg,p.eq=kn,p.escape=xg,p.escapeRegExp=Ag,p.every=Nm,p.find=Lm,p.findIndex=od,p.findKey=Kv,p.findLast=$m,p.findLastIndex=ad,p.findLastKey=Yv,p.floor=yb,p.forEach=pd,p.forEachRight=hd,p.forIn=Gv,p.forInRight=jv,p.forOwn=Qv,p.forOwnRight=Xv,p.get=Zl,p.gt=vv,p.gte=gv,p.has=eg,p.hasIn=eu,p.head=ud,p.identity=Kt,p.includes=Bm,p.indexOf=$_,p.inRange=bg,p.invoke=ig,p.isArguments=hs,p.isArray=pe,p.isArrayBuffer=bv,p.isArrayLike=Ht,p.isArrayLikeObject=Ge,p.isBoolean=yv,p.isBuffer=qi,p.isDate=wv,p.isElement=Ev,p.isEmpty=xv,p.isEqual=Av,p.isEqualWith=Tv,p.isError=Xl,p.isFinite=Cv,p.isFunction=_i,p.isInteger=Ed,p.isLength=da,p.isMap=xd,p.isMatch=Sv,p.isMatchWith=Ov,p.isNaN=Iv,p.isNative=Dv,p.isNil=kv,p.isNull=Nv,p.isNumber=Ad,p.isObject=Ue,p.isObjectLike=ze,p.isPlainObject=Jr,p.isRegExp=Jl,p.isSafeInteger=Lv,p.isSet=Td,p.isString=fa,p.isSymbol=Jt,p.isTypedArray=js,p.isUndefined=$v,p.isWeakMap=Rv,p.isWeakSet=Pv,p.join=B_,p.kebabCase=Tg,p.last=hn,p.lastIndexOf=q_,p.lowerCase=Cg,p.lowerFirst=Sg,p.lt=Mv,p.lte=Fv,p.max=wb,p.maxBy=Eb,p.mean=xb,p.meanBy=Ab,p.min=Tb,p.minBy=Cb,p.stubArray=ou,p.stubFalse=au,p.stubObject=db,p.stubString=fb,p.stubTrue=pb,p.multiply=Sb,p.nth=U_,p.noConflict=ib,p.noop=ru,p.now=la,p.pad=Og,p.padEnd=Ig,p.padStart=Dg,p.parseInt=Ng,p.random=yg,p.reduce=Hm,p.reduceRight=zm,p.repeat=kg,p.replace=Lg,p.result=cg,p.round=Ob,p.runInContext=_,p.sample=Ym,p.size=Qm,p.snakeCase=$g,p.some=Xm,p.sortedIndex=G_,p.sortedIndexBy=j_,p.sortedIndexOf=Q_,p.sortedLastIndex=X_,p.sortedLastIndexBy=J_,p.sortedLastIndexOf=Z_,p.startCase=Pg,p.startsWith=Mg,p.subtract=Ib,p.sum=Db,p.sumBy=Nb,p.template=Fg,p.times=hb,p.toFinite=mi,p.toInteger=me,p.toLength=Sd,p.toLower=Bg,p.toNumber=_n,p.toSafeInteger=Bv,p.toString=De,p.toUpper=qg,p.trim=Ug,p.trimEnd=Wg,p.trimStart=Vg,p.truncate=Hg,p.unescape=zg,p.uniqueId=mb,p.upperCase=Kg,p.upperFirst=tu,p.each=pd,p.eachRight=hd,p.first=ud,su(p,(function(){var e={};return zn(p,function(t,i){Le.call(p.prototype,i)||(e[i]=t)}),e})(),{chain:!1}),p.VERSION=f,Ut(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),Ut(["drop","take"],function(e,t){we.prototype[e]=function(i){i=i===s?1:it(me(i),0);var o=this.__filtered__&&!t?new we(this):this.clone();return o.__filtered__?o.__takeCount__=bt(i,o.__takeCount__):o.__views__.push({size:bt(i,pt),type:e+(o.__dir__<0?"Right":"")}),o},we.prototype[e+"Right"]=function(i){return this.reverse()[e](i).reverse()}}),Ut(["filter","map","takeWhile"],function(e,t){var i=t+1,o=i==ft||i==lt;we.prototype[e]=function(d){var h=this.clone();return h.__iteratees__.push({iteratee:oe(d,3),type:i}),h.__filtered__=h.__filtered__||o,h}}),Ut(["head","last"],function(e,t){var i="take"+(t?"Right":"");we.prototype[e]=function(){return this[i](1).value()[0]}}),Ut(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");we.prototype[e]=function(){return this.__filtered__?new we(this):this[i](1)}}),we.prototype.compact=function(){return this.filter(Kt)},we.prototype.find=function(e){return this.filter(e).head()},we.prototype.findLast=function(e){return this.reverse().find(e)},we.prototype.invokeMap=ge(function(e,t){return typeof e=="function"?new we(this):this.map(function(i){return Kr(i,e,t)})}),we.prototype.reject=function(e){return this.filter(ca(oe(e)))},we.prototype.slice=function(e,t){e=me(e);var i=this;return i.__filtered__&&(e>0||t<0)?new we(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==s&&(t=me(t),i=t<0?i.dropRight(-t):i.take(t-e)),i)},we.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},we.prototype.toArray=function(){return this.take(pt)},zn(we.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),d=p[o?"take"+(t=="last"?"Right":""):t],h=o||/^find/.test(t);d&&(p.prototype[t]=function(){var b=this.__wrapped__,w=o?[1]:arguments,A=b instanceof we,R=w[0],P=A||pe(b),F=function(ye){var xe=d.apply(p,Wn([ye],w));return o&&Y?xe[0]:xe};P&&i&&typeof R=="function"&&R.length!=1&&(A=P=!1);var Y=this.__chain__,Z=!!this.__actions__.length,ae=h&&!Y,ve=A&&!Z;if(!h&&P){b=ve?b:new we(this);var le=e.apply(b,w);return le.__actions__.push({func:oa,args:[F],thisArg:s}),new dn(le,Y)}return ae&&ve?e.apply(this,w):(le=this.thru(F),ae?o?le.value()[0]:le.value():le)})}),Ut(["pop","push","shift","sort","splice","unshift"],function(e){var t=Wt[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var d=arguments;if(o&&!this.__chain__){var h=this.value();return t.apply(pe(h)?h:[],d)}return this[i](function(b){return t.apply(pe(b)?b:[],d)})}}),zn(we.prototype,function(e,t){var i=p[t];if(i){var o=i.name+"";Le.call(Hs,o)||(Hs[o]=[]),Hs[o].push({name:t,func:i})}}),Hs[Zo(s,N).name]=[{name:"wrapper",func:s}],we.prototype.clone=zp,we.prototype.reverse=Kp,we.prototype.value=Yp,p.prototype.at=Em,p.prototype.chain=xm,p.prototype.commit=Am,p.prototype.next=Tm,p.prototype.plant=Sm,p.prototype.reverse=Om,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=Im,p.prototype.first=p.prototype.head,Br&&(p.prototype[Br]=Cm),p}),T=m();ai?((ai.exports=T)._=T,Ir._=T):nt._=T}).call(GE)})(no,no.exports)),no.exports}var ro=jE();function QE(l){let n=null,s=null,f=new Map;const v=V=>JSON.stringify(V),x=async(V,ee,G,te)=>{if(te===(G==="cart"?n:s))return{success:!0,skipped:!0};if(f.has(G))return console.log(`⏳ Skipping duplicate ${G} request`),{success:!1,skipped:!0};const ne=new AbortController,J=setTimeout(()=>ne.abort(),5e3);f.set(G,!0);try{const N=await fetch(V,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify(ee),signal:ne.signal});if(clearTimeout(J),!N.ok)throw new Error(`HTTP ${N.status}`);const H=await N.json();return G==="cart"?n=te:s=te,console.log(`✅ ${G} updated - v${H.version}`),{success:!0,data:H}}catch(N){return N.name==="AbortError"?console.warn(`⚠️ ${G} update timeout`):console.error(`❌ Failed to update ${G}:`,N.message),{success:!1,error:N}}finally{f.delete(G)}},E=ro.debounce(async V=>{const ee=v(V);await x("/api/pos/terminal/update-cart",{terminal_id:l,cart:V},"cart",ee)},800),S=ro.debounce(async V=>{const ee=v(V);await x("/api/pos/terminal/update-ui",{terminal_id:l,ui:V},"ui",ee)},300),C=async V=>{const ee=v(V);return await x("/api/pos/terminal/update-cart",{terminal_id:l,cart:V},"cart",ee)},U=ro.debounce(async(V,ee)=>{const G=v(V),te=v(ee);if(G===n&&te===s)return{success:!0,skipped:!0};const ne=new AbortController,J=setTimeout(()=>ne.abort(),5e3);try{const N=await fetch("/api/pos/terminal/update-both",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify({terminal_id:l,cart:V,ui:ee}),signal:ne.signal});if(clearTimeout(J),!N.ok)throw new Error(`HTTP ${N.status}`);const H=await N.json();return n=G,s=te,console.log(`✅ Batch update successful - v${H.version}`),{success:!0,data:H}}catch(N){return console.error("❌ Batch update failed:",N.message),{success:!1,error:N}}},500);return{broadcastCartUpdate:E,broadcastUIUpdate:S,broadcastImmediateCartUpdate:C,broadcastBatchUpdate:U,clearBroadcastCache:()=>{n=null,s=null,f.clear(),console.log("🧹 Broadcast cache cleared")}}}const XE={key:0,class:"modal fade show d-block",tabindex:"-1",style:{background:"rgba(0,0,0,0.5)","z-index":"9999"}},JE={class:"modal-dialog modal-lg modal-dialog-centered"},ZE={class:"modal-content"},ex={class:"modal-header bg-warning text-dark"},tx={class:"modal-body"},nx={key:0,class:"alert alert-info mb-3"},ix={class:"mb-0"},sx={key:1,class:"alert alert-danger"},rx={class:"text-muted"},ox={key:2},ax={class:"fw-bold"},lx={key:0,class:"badge bg-secondary ms-2"},ux={class:"table table-sm table-bordered"},cx={class:"text-end"},dx={class:"text-end"},fx={class:"text-end text-danger fw-bold"},px={class:"modal-footer"},hx={__name:"ConfirmMissingIngredientsModal",props:{show:Boolean,missingIngredients:{type:Array,default:()=>[]}},emits:["close","confirm"],setup(l,{emit:n}){const s=l,f=n;_s(()=>s.show,S=>{console.log("📺 Modal show changed:",S),S&&console.log("📦 Missing ingredients:",s.missingIngredients)},{immediate:!0}),_s(()=>s.missingIngredients,S=>{console.log("📊 Missing ingredients changed:",S),console.log("📊 Array length:",S?.length),console.log("📊 Is array?:",Array.isArray(S))},{immediate:!0,deep:!0});const v=Ee(()=>{if(console.log("🔄 Computing groupedByItem"),console.log("🔄 Input missingIngredients:",s.missingIngredients),!Array.isArray(s.missingIngredients)||s.missingIngredients.length===0)return console.log("⚠️ No ingredients to group (not array or empty)"),{};const S={};return s.missingIngredients.forEach((C,U)=>{console.log(`📝 Processing ingredient ${U}:`,C);const L=`${C.item_id}-${C.variant_id||"default"}`;S[L]||(S[L]={item_title:C.item_title,variant_name:C.variant_name,ingredients:[]}),S[L].ingredients.push(C)}),console.log("✅ Final grouped data:",S),S}),x=Ee(()=>s.missingIngredients&&s.missingIngredients.length>0),E=Ee(()=>Object.keys(v.value).length);return(S,C)=>l.show?et((O(),I("div",XE,[c("div",JE,[c("div",ZE,[c("div",ex,[C[4]||(C[4]=c("h5",{class:"modal-title"},[c("i",{class:"bi bi-exclamation-triangle-fill me-2"}),be(" Ingredient Shortage Warning ")],-1)),c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:C[0]||(C[0]=U=>f("close"))},[...C[3]||(C[3]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),c("div",tx,[x.value?se("",!0):(O(),I("div",nx,[C[5]||(C[5]=c("strong",null,"Debug Info:",-1)),c("ul",ix,[c("li",null,"Has data: "+k(x.value),1),c("li",null,"Array length: "+k(l.missingIngredients?.length||0),1),c("li",null,"Is array: "+k(Array.isArray(l.missingIngredients)),1),c("li",null,"Group count: "+k(E.value),1)])])),C[10]||(C[10]=c("div",{class:"alert alert-warning"},[c("strong",null,"Warning:"),be(" The following items have ingredient shortages. The order can still be placed, but pending ingredient deductions will be recorded and automatically deducted when stock arrives. ")],-1)),x.value?(O(),I("div",ox,[(O(!0),I(Ce,null,Ke(v.value,(U,L)=>(O(),I("div",{key:L,class:"mb-4"},[c("h6",ax,[be(k(U.item_title)+" ",1),U.variant_name?(O(),I("span",lx,k(U.variant_name),1)):se("",!0)]),c("table",ux,[C[9]||(C[9]=c("thead",{class:"table-light"},[c("tr",null,[c("th",null,"Ingredient"),c("th",{class:"text-end"},"Required"),c("th",{class:"text-end"},"Available"),c("th",{class:"text-end"},"Short")])],-1)),c("tbody",null,[(O(!0),I(Ce,null,Ke(U.ingredients,V=>(O(),I("tr",{key:V.inventory_item_id},[c("td",null,k(V.inventory_item_name),1),c("td",cx,k(V.required_quantity)+" "+k(V.unit),1),c("td",dx,k(V.available_quantity)+" "+k(V.unit),1),c("td",fx,k(V.shortage_quantity)+" "+k(V.unit),1)]))),128))])])]))),128))])):(O(),I("div",sx,[C[6]||(C[6]=c("i",{class:"bi bi-exclamation-circle me-2"},null,-1)),C[7]||(C[7]=be(" No missing ingredient data available. ",-1)),C[8]||(C[8]=c("br",null,null,-1)),c("small",rx," Received "+k(l.missingIngredients?.length||0)+" ingredient(s) ",1)]))]),c("div",px,[c("button",{type:"button",class:"btn btn-secondary px-2 py-2",onClick:C[1]||(C[1]=U=>f("close"))}," Cancel Order "),c("button",{type:"button",class:"btn btn-primary px-4 py-2",onClick:C[2]||(C[2]=U=>f("confirm"))}," Proceed Anyway ")])])])],512)),[[Vi,l.show]]):se("",!0)}},_x={class:"page-wrapper"},mx={class:"container-fluid px-3 py-3"},vx={class:"row gx-3 gy-3"},gx={key:0,class:"row g-3 tablet-screen"},bx={class:"d-flex justify-content-between justify align-items-center mb-3"},yx={style:{width:"250px",position:"relative"}},wx={key:1,type:"text",class:"form-control form-control-sm",placeholder:"Search categories...",disabled:"",style:{"border-radius":"8px",padding:"8px 12px"}},Ex={key:0,class:"col-12 text-center py-5"},xx={class:"col-6 col-md-4 col-lg-4 category-cards"},Ax={class:"cat-pill"},Tx=["onClick"],Cx={class:"cat-icon-wrap"},Sx={class:"cat-icon"},Ox=["src"],Ix={key:1},Dx={class:"cat-name"},Nx={class:"cat-pill"},kx={key:0,class:"col-12"},Lx={key:1},$x={class:"d-flex flex-wrap gap-2 align-items-center mb-4"},Rx={class:"fw-bold mb-0"},Px={key:0,class:"d-flex gap-2 ms-auto align-items-center"},Mx={class:"search-wrap position-relative"},Fx={key:0,class:"col-12"},Bx={class:"alert alert-warning border-0 rounded-4 text-center py-5"},qx={class:"text-muted mb-3"},Ux={key:1,class:"row g-3"},Wx={key:0,class:"col-12 text-center py-5"},Vx={class:"card rounded-4 shadow-sm overflow-hidden border-3 w-100 d-flex flex-row align-items-stretch",style:{"border-color":"#dc3545"}},Hx={class:"position-relative",style:{flex:"0 0 40%","max-width":"40%"}},zx=["src"],Kx={class:"position-absolute top-0 start-0 m-1 px-2 py-1 rounded-pill text-white fw-semibold bg-danger",style:{"font-size":"0.58rem","letter-spacing":"0.3px"}},Yx={class:"p-3 d-flex flex-column justify-content-between",style:{flex:"1 1 60%","min-width":"0",position:"relative"}},Gx={class:"h5 fw-bold mb-2 menu-name text-danger"},jx={class:"mb-3"},Qx={class:"d-flex flex-wrap gap-1"},Xx={class:"mt-2"},Jx=["onClick"],Zx=["onClick","disabled"],eA={class:"qty-box border rounded-pill px-2 py-2 text-center fw-semibold left-card-cntrl-btn",style:{"min-width":"55px"}},tA=["onClick"],nA={key:0,class:"col-12"},iA={key:2,class:"row g-3"},sA={class:"position-relative",style:{flex:"0 0 40%","max-width":"40%"}},rA=["src"],oA={key:0,class:"position-absolute bottom-0 start-0 end-0 text-center bg-light bg-opacity-75 fw-semibold",style:{"font-size":"0.6rem !important",padding:"2px 4px"}},aA={key:0,class:"text-muted text-decoration-line-through me-1"},lA={class:"fw-bold text-success me-2"},uA={key:1,class:"text-muted text-decoration-line-through me-1"},cA={class:"fw-bold text-success"},dA={class:"text-decoration-line-through opacity-75 me-1"},fA={class:"fw-bold text-white"},pA={key:1,class:"position-absolute bottom-0 start-0 end-0 m-2 badge bg-danger py-2"},hA={class:"p-3 d-flex flex-column justify-content-between",style:{flex:"1 1 60%","min-width":"0",position:"relative"}},_A={key:0,class:"position-absolute px-2 py-1 rounded-pill bg-success text-white small fw-bold",style:{fontSize:"0.7rem",top:"7px",right:"7px"}},mA={key:0,class:"mb-3"},vA=["onUpdate:modelValue","onChange"],gA=["value"],bA={key:1},yA={class:"form-label small fw-semibold mb-2"},wA={key:0,class:"text-muted",style:{"font-size":"0.75rem"}},EA={key:0,class:"d-flex flex-wrap gap-1"},xA={key:1},AA={class:"d-flex justify-content-between align-items-center w-100"},TA={class:"fw-semibold text-success"},CA=["onClick"],SA=["onClick","disabled"],OA={class:"qty-box border rounded-pill px-2 py-2 text-center fw-semibold left-card-cntrl-btn",style:{"min-width":"55px"}},IA=["onClick"],DA={key:0,class:"col-lg-4 right-cart"},NA={class:"cart card border-0 shadow-lg rounded-4"},kA={class:"cart-header"},LA={class:"order-type"},$A=["onClick"],RA={class:"cart-body"},PA={class:"mb-3"},MA={key:0,class:"row g-2"},FA={class:"col-6 table-dropdown"},BA=["value"],qA={key:0,class:"invalid-feedback d-block"},UA={class:"col-6 table-dropdown"},WA={key:1},VA={key:0,class:"invalid-feedback d-block"},HA={key:2,class:"mt-2"},zA={key:0,class:"invalid-feedback d-block"},KA={key:1,class:"invalid-feedback d-block"},YA={class:"cart-lines"},GA={key:0,class:"empty"},jA={class:"line-left"},QA=["src"],XA={class:"meta"},JA=["title"],ZA={key:0},eT={class:"badge bg-success",style:{"font-size":"0.65rem"}},tT={key:1,class:"addon-icons mt-1"},nT=["onClick","title"],iT={class:"text-muted small"},sT={key:2,class:"badge bg-success mt-1 ms-1",style:{"font-size":"0.65rem"}},rT={key:3,class:"mt-1"},oT={class:"badge",style:{"font-size":"0.65rem",background:"#1B1670",color:"white"}},aT={key:4,class:"note"},lT={class:"line-right"},uT={class:"qty-controls"},cT=["onClick"],dT={class:"qty"},fT=["onClick"],pT={class:"price-delete"},hT={class:"price"},_T=["onClick"],mT={class:"totals"},vT={class:"trow"},gT={class:"sub-total"},bT={key:0,class:"trow"},yT={class:"text-info"},wT={key:1,class:"trow"},ET={class:"fw-semibold"},xT={key:2,class:"trow"},AT={class:"fw-semibold"},TT={key:3,class:"trow"},CT={class:"text-danger"},ST={key:4,class:"promos-section mb-3"},OT={class:"promo-total mt-2 rounded-3 bg-success-subtle"},IT={class:"d-flex justify-content-between align-items-center"},DT={class:"text-success fs-6"},NT={key:5,class:"pending-discounts-section mb-3"},kT={class:"d-flex align-items-center gap-2 text-warning"},LT={class:"text-warning"},$T={key:6,class:"approved-discounts-section mb-3"},RT={class:"trow border-top pt-2 mt-2"},PT={class:"text-success"},MT={class:"trow total"},FT={class:"mb-3"},BT={class:"mb-3"},qT={class:"cart-footer"},UT={class:"modal fade",id:"chooseItem",tabindex:"-1","aria-hidden":"true"},WT={class:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"},VT={class:"modal-content rounded-3 shadow border-0",style:{"max-height":"90vh"}},HT={class:"modal-header border-0 bg-light py-2 px-3 rounded-top"},zT={class:"fw-bold mb-0"},KT={class:"px-3 pt-2 progress-bar"},YT={class:"stepper-container position-relative",style:{"min-height":"60px"}},GT={key:0,class:"bi bi-check-lg",style:{"font-size":"0.7rem"}},jT={key:1,style:{"font-size":"0.75rem"}},QT={class:"modal-body px-3 py-2"},XT={class:"row g-3 mb-3"},JT={class:"col-lg-5"},ZT={class:"position-relative mb-3"},eC=["src"],tC={key:0,class:"badge bg-danger px-2 py-1 position-absolute top-0 end-0 rounded-end-0 rounded-bottom-0 shadow-sm",style:{"font-size":"0.7rem"}},nC={class:"rounded-3 border shadow-sm p-3 bg-white"},iC={class:"d-flex justify-content-between mb-1",style:{"font-size":"0.85rem"}},sC={key:0,class:"d-flex justify-content-between mb-1",style:{"font-size":"0.85rem"}},rC={class:"text-success"},oC={class:"d-flex justify-content-between",style:{"font-size":"1rem"}},aC={class:"fw-bold text-primary"},lC={class:"col-lg-7"},uC={class:"px-1"},cC={class:"step-content"},dC={class:"row g-2"},fC=["onClick"],pC={class:"d-flex justify-content-between align-items-center"},hC={class:"fw-bold mb-0",style:{"font-size":"0.85rem"}},_C={class:"d-flex justify-content-between align-items-center gap-2"},mC={key:0,class:"text-primary"},vC={style:{"font-size":"0.9rem"}},gC={class:"step-content"},bC={class:"row g-2"},yC=["id","checked","disabled","onChange"],wC=["for"],EC={class:"step-content"},xC={class:"fw-semibold mb-1 d-flex justify-content-between",style:{"font-size":"0.85rem"}},AC={key:0,class:"badge rounded-pill bg-primary",style:{"font-size":"0.7rem"}},TC={class:"step-content"},CC={class:"summary-card p-3 rounded-3 shadow-sm mb-3"},SC={key:0,class:"summary-item"},OC={class:"summary-value"},IC={key:1,class:"summary-item"},DC={class:"summary-value"},NC={key:2,class:"summary-item"},kC={class:"summary-value"},LC={class:"d-flex align-items-center mb-3"},$C={class:"qty-group gap-1"},RC=["disabled"],PC={class:"qty-box rounded-pill"},MC={class:"mb-2"},FC={class:"text-end small text-muted mt-1",style:{"font-size":"0.7rem"}},BC={class:"modal-footer border-0 px-3 py-2 d-flex justify-content-end gap-2"},qC={class:"modal fade",id:"customizeDealModal",tabindex:"-1","aria-hidden":"true"},UC={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},WC={class:"modal-content rounded-3 shadow border-0",style:{"max-height":"90vh"}},VC={class:"modal-header border-0 bg-light py-2 px-3 rounded-top"},HC={class:"fw-bold mb-0"},zC={class:"text-muted small mb-0",style:{"font-size":"0.8rem"}},KC={class:"px-3 pt-2 progress-bar"},YC={class:"stepper-container position-relative",style:{"min-height":"60px"}},GC={key:0,class:"bi bi-check-lg",style:{"font-size":"0.7rem"}},jC={key:1,style:{"font-size":"0.75rem"}},QC={class:"modal-body px-3 py-2"},XC={class:"row g-3 mb-3"},JC={class:"col-lg-4"},ZC={class:"position-relative mb-3"},eS=["src"],tS={class:"badge bg-danger position-absolute top-0 end-0 m-2"},nS={key:0},iS={key:1},sS={class:"rounded-3 border shadow-sm p-3 bg-white mb-3"},rS={class:"fw-bold mb-2 d-flex align-content-center",style:{"font-size":"0.9rem"}},oS={class:"d-flex align-items-center"},aS={class:"flex-grow-1"},lS={class:"text-muted small"},uS={key:0,class:"text-success small fw-semibold"},cS={class:"fw-bold text-primary"},dS={class:"rounded-3 border shadow-sm p-3 bg-white"},fS={class:"list-group list-group-flush"},pS={class:"d-flex align-items-center"},hS={key:0,class:"bi bi-check-circle-fill text-success me-2"},_S={key:2,class:"bi bi-circle text-muted me-2"},mS={class:"col-lg-8"},vS={class:"px-1"},gS={class:"step-content"},bS={class:"d-flex align-items-start mb-2"},yS={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},wS={class:"row g-2"},ES=["id","checked","disabled","onChange"],xS=["for"],AS={class:"step-content"},TS={class:"d-flex align-items-start mb-2"},CS={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},SS={class:"fw-semibold mb-1 d-flex justify-content-between",style:{"font-size":"0.85rem"}},OS={key:0,class:"badge rounded-pill bg-primary",style:{"font-size":"0.7rem"}},IS={class:"step-content"},DS={class:"d-flex align-items-start mb-2"},NS={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},kS={class:"summary-card p-3 rounded-3 shadow-sm mb-3"},LS={class:"summary-item"},$S={class:"summary-value"},RS={class:"summary-item"},PS={class:"summary-value"},MS={key:0,class:"summary-item"},FS={class:"summary-value text-danger"},BS={key:1,class:"summary-item"},qS={class:"summary-value text-success"},US={key:2,class:"summary-item"},WS={class:"summary-value text-success fw-bold"},VS={class:"summary-item border-top pt-2 mt-2"},HS={class:"summary-value fw-bold text-primary"},zS={class:"mb-2"},KS={class:"fw-semibold mb-1",style:{"font-size":"0.85rem"}},YS={class:"text-end small text-muted mt-1",style:{"font-size":"0.7rem"}},GS={class:"modal-footer border-0 px-3 py-2 d-flex justify-content-end"},jS={class:"d-flex gap-2"},QS={class:"modal fade",id:"addonManagementModal",tabindex:"-1","aria-hidden":"true"},XS={class:"modal-dialog modal-lg modal-dialog-centered"},JS={class:"modal-content rounded-4 border-0 shadow-lg"},ZS={key:0,class:"modal-body pt-2"},eO={class:"alert alert-light border rounded-3 mb-3"},tO={class:"d-flex align-items-center gap-3"},nO=["src"],iO={class:"flex-grow-1"},sO={class:"fw-bold fs-6"},rO={class:"d-flex gap-3 mt-1"},oO={class:"text-muted"},aO={class:"fw-semibold"},lO={class:"text-muted"},uO={class:"fw-semibold"},cO={key:0,class:"table-responsive"},dO={class:"table table-hover align-middle mb-0"},fO={class:"text-center"},pO={class:"form-check d-flex justify-content-center"},hO=["checked","onChange"],_O={class:"d-flex align-items-center gap-2"},mO={class:"fw-semibold"},vO={key:0,class:"text-muted"},gO={class:"text-center"},bO={class:"badge bg-success-subtle text-success px-3 py-2 fs-6"},yO={class:"d-flex align-items-center justify-content-center gap-2"},wO=["onClick","disabled"],EO={class:"fw-bold fs-5 px-3",style:{"min-width":"50px","text-align":"center"}},xO=["onClick","disabled"],AO={key:1,class:"text-center text-muted py-5"},TO={class:"mt-3 p-3 rounded-3"},CO={key:0,class:"mt-3 p-3 rounded-3 border border-success bg-light"},SO={class:"text-success fw-semibold"},OO={__name:"Index",props:["client_secret","order_code"],setup(l){Gb();const{formatCurrencySymbol:n}=Vb();Xs(()=>{lu(()=>{document.querySelectorAll('[data-bs-toggle="popover"]').forEach(a=>{new Ra(a)})})});const s=z([]),f=z(!0),v=z(""),x=z(Date.now()),E=`category-search-${Math.random().toString(36).substr(2,9)}`,S=z(!1),C=Ee(()=>{const a=v.value.trim().toLowerCase();return a?kr.value.filter(r=>r.name.toLowerCase().includes(a)):kr.value}),U=async()=>{f.value=!0;try{const a=await axios.get("/api/pos/fetch-menu-categories");s.value=a.data,s.value.length>0&&(ei.value=s.value[0].id)}catch(a){console.error("Error fetching categories:",a)}finally{f.value=!1}},L=z([]),V=async()=>{try{const a=await axios.get("/api/pos/fetch-menu-items");L.value=a.data.data}catch(a){console.error("Error fetching inventory:",a)}},ee=Ee(()=>{const a={};return L.value.forEach(r=>{const u=r.category?.id||"uncategorized",m=r.category?.name||"Uncategorized";a[u]||(a[u]=[]);const T={id:r.id,title:r.name,img:r.image_url||"/assets/img/default.png",stock:0,price:Number(r.price),label_color:r.label_color||"#1B1670",family:m,description:r.description,nutrition:r.nutrition,tags:r.tags,allergies:r.allergies,ingredients:r.ingredients??[],variants:r.variants??[],addon_groups:r.addon_groups??[],is_saleable:r.is_saleable,resale_type:r.resale_type,resale_value:r.resale_value};a[u].push(T)}),a}),G=z({});_s(()=>L.value,a=>{a&&a.length>0&&a.forEach(r=>{r.variants&&r.variants.length>0&&(G.value[r.id]||(G.value[r.id]=r.variants[0].id))})},{immediate:!0,deep:!0});const te=a=>{if(!a.variants||a.variants.length===0)return null;const r=G.value[a.id];return r&&a.variants.find(u=>u.id===r)||a.variants[0]},ne=(a,r)=>{const u=parseInt(r.target.value);G.value[a.id]=u;const m=a.variants.find(T=>T.id===u);m&&console.log(`Selected ${m.name} for ${a.title} - ${n(m.price)}`)},J=z({}),N=(a,r,u)=>{const m=a.id;J.value[m]||(J.value[m]={});const T=a.addon_groups.find(_=>_.group_id===r);if(T&&T.max_select>0&&u.length>T.max_select){X.warning(`You can only select up to ${T.max_select} ${T.group_name}`);const _=J.value[m][r]||[];J.value[m][r]=_.slice(0,T.max_select);return}J.value[m][r]=u},H=a=>{const r=a.id;if(!J.value[r])return 0;let u=0;return Object.values(J.value[r]).forEach(m=>{m.forEach(T=>{u+=parseFloat(T.price||0)})}),u},ie=a=>{const r=a.id;if(!J.value[r])return[];const u=[];return Object.values(J.value[r]).forEach(m=>{m.forEach(T=>{u.push({id:T.id,name:T.name,price:parseFloat(T.price),group_id:T.group_id||T.pivot?.addon_group_id})})}),u},M=z([]),B=()=>{if(!_e.value)return[];const a=ht();return a&&a.ingredients&&a.ingredients.length>0?a.ingredients:_e.value.ingredients||[]},Q=a=>M.value.includes(a),ue=a=>{const r=M.value.indexOf(a);r>-1?(M.value.splice(r,1),X.info("Ingredient added back")):(M.value.push(a),X.info("Ingredient removed"))},Oe=()=>B().filter(a=>!M.value.includes(a.id||a.inventory_item_id)).length,Ie=()=>{if(M.value.length===0)return null;const a=B(),r=M.value.map(u=>{const m=a.find(T=>T.id===u||T.inventory_item_id===u);return m?m.product_name||m.name:null}).filter(Boolean);return r.length===0?null:`No ${r.join(", ")}`},fe=z(1),Fe=Ee(()=>_e.value?.variants&&_e.value.variants.length>0),st=Ee(()=>B().length>0),We=Ee(()=>_e.value?.addon_groups&&_e.value.addon_groups.length>0),ft=Ee(()=>{const a=[];return Fe.value&&a.push({id:"variants",name:"Variant"}),st.value&&a.push({id:"ingredients",name:"Ingredients"}),We.value&&a.push({id:"addons",name:"Add-ons"}),a.push({id:"review",name:"Review"}),a}),$t=Ee(()=>ft.value.length),lt=Ee(()=>{if(fe.value===1)return"0%";const a=ft.value.length,r=(fe.value-1)/(a-1);return`calc(${r*100}% - ${14-r*28}px)`}),Ye=a=>a<fe.value?"bg-success text-white":a===fe.value?"bg-primary text-white":"bg-light text-muted border",wt=()=>{let a=fe.value+1;for(;a<=$t.value;){const r=ft.value[a-1];if(r.id==="variants"&&!Fe.value){a++;continue}if(r.id==="ingredients"&&!st.value){a++;continue}if(r.id==="addons"&&!We.value){a++;continue}break}a<=$t.value&&(fe.value=a)},yn=()=>{let a=fe.value-1;for(;a>=1;){const r=ft.value[a-1];if(r.id==="variants"&&!Fe.value){a--;continue}if(r.id==="ingredients"&&!st.value){a--;continue}if(r.id==="addons"&&!We.value){a--;continue}break}a>=1&&(fe.value=a)},wn=a=>{Bn.value=a,ut()},pt=()=>Fe.value&&_e.value?.variants?.find(r=>r.id===Bn.value)?.name||"",Jn=()=>{const a=[];return Object.values(Tt.value).forEach(r=>{r.forEach(u=>{a.push(`${u.name} (+${n(u.price)})`)})}),a.join(", ")},Ei=async a=>{_e.value=a,wr.value="",Tn.value="",Bn.value=null,Tt.value={},M.value=[],fe.value=1,a.variants&&a.variants.length>0&&(Bn.value=a.variants[0].id);const r=a.variants&&a.variants.length>0?a.variants[0]:null,u=r?r.id:null,m=ri(a,u),T=En(a,u,m);tt.value=T>0?1:0,M.value=[];const _=document.getElementById("chooseItem"),g=new bootstrap.Modal(_);_.addEventListener("shown.bs.modal",async()=>{await lu()},{once:!0}),g.show()},En=(a,r,u)=>{const m=u.filter(g=>!M.value.includes(g.id||g.inventory_item_id));if(!m||m.length===0)return 999999;const T={};for(const g of W.value)ri(g,g.variant_id).filter(D=>!g.removed_ingredients||g.removed_ingredients.length===0?!0:!g.removed_ingredients.includes(D.id||D.inventory_item_id)).forEach(D=>{const j=D.inventory_item_id,de=Number(D.inventory_stock??D.inventory_item?.stock??0);T[j]||(T[j]={totalStock:de,used:0});const K=Number(D.quantity??D.qty??1)*g.qty;T[j].used+=K});let _=999999;for(const g of m){const y=g.inventory_item_id,$=Number(g.inventory_stock??g.inventory_item?.stock??0),D=Number(g.quantity??g.qty??1);if(T[y]){const j=T[y].totalStock-T[y].used,de=Math.floor(j/D);_=Math.min(_,de)}else{const j=Math.floor($/D);_=Math.min(_,j)}}return _},ut=()=>{const a=ht(),r=a?a.id:null,u=ri(_e.value,r),m=En(_e.value,r,u);if(m<=0){X.error("No stock available for this variant. Please remove items from cart first."),tt.value=0;return}tt.value=Math.min(1,m)},on=(a,r)=>{if(!_e.value)return;const u=_e.value.addon_groups.find(m=>m.group_id===a);if(u&&u.max_select>0&&r.length>u.max_select){X.warning(`You can only select up to ${u.max_select} ${u.group_name}`),Tt.value[a]=r.slice(0,u.max_select);return}Tt.value[a]=r},ht=()=>{if(!_e.value||!_e.value.variants||_e.value.variants.length===0)return null;const a=Bn.value;return a&&_e.value.variants.find(r=>r.id===a)||_e.value.variants[0]},Et=()=>{if(!_e.value)return 0;const a=ht();return parseFloat(a?a.price:_e.value.price||0)},Rt=()=>{let a=0;return Object.values(Tt.value).forEach(r=>{r.forEach(u=>{a+=parseFloat(u.price||0)})}),a},_r=()=>{const a=[];return Object.values(Tt.value).forEach(r=>{r.forEach(u=>{a.push({id:u.id,name:u.name,price:parseFloat(u.price),group_id:u.group_id||u.pivot?.addon_group_id})})}),a},xn=a=>{if(!a)return 0;const r=te(a),u=r?r.id:null,m=ri(a,u);if(!m.length)return 999999;let T=1/0;return m.forEach(_=>{const g=Number(_.quantity??_.qty??1),y=Number(_.inventory_stock??_.inventory_item?.stock??0);if(g<=0)return;const $=Math.floor(y/g);T=Math.min(T,$)}),T===1/0?0:T},Zn=a=>xn(a),Gt=z(""),Ae=z("dine"),rt=z("Walk In"),an=z(" "),Qe=z(" "),xs=z(10),ei=z(null),xt=a=>ei.value=a,Be=z(!0),Rn=a=>{xt(a.id),Be.value=!1},ti=()=>Be.value=!0,Pn=z({}),At=z([]),Pt=z(null),Mn=async()=>{try{const a=await axios.get("/api/pos/fetch-profile-tables");if(Pn.value=a.data,Pn.value.order_types){At.value=Pn.value.order_types.map(u=>u.charAt(0).toUpperCase()+u.slice(1));const r=localStorage.getItem("quickOrderType");if(r){const u=At.value.find(m=>m.toLowerCase().replace(/_/g," ")===r.toLowerCase().replace(/_/g," "));u?Ae.value=u:Ae.value=At.value[0]}else Ae.value=At.value[0]}}catch(a){console.error("Error fetching profile tables:",a)}},An=Ee(()=>ee.value[ei.value]??[]),Xe=z({sortBy:"",priceMin:null,priceMax:null}),As=Ee(()=>{let a=An.value;const r=Gt.value.trim().toLowerCase();if(r&&(a=a.filter(u=>u.title.toLowerCase().includes(r)||(u.family||"").toLowerCase().includes(r)||(u.description||"").toLowerCase().includes(r)||(u.tags?.map(m=>m.name.toLowerCase()).join(", ")||"").includes(r))),Xe.value.priceMin!==null&&Xe.value.priceMin!==""&&(a=a.filter(u=>u.price>=Xe.value.priceMin)),Xe.value.priceMax!==null&&Xe.value.priceMax!==""&&(a=a.filter(u=>u.price<=Xe.value.priceMax)),Xe.value.sortBy)switch(a=[...a],Xe.value.sortBy){case"name_asc":a.sort((u,m)=>u.title.localeCompare(m.title));break;case"name_desc":a.sort((u,m)=>m.title.localeCompare(u.title));break;case"price_asc":a.sort((u,m)=>u.price-m.price);break;case"price_desc":a.sort((u,m)=>m.price-u.price);break;case"stock_asc":a.sort((u,m)=>(u.stock??0)-(m.stock??0));break;case"stock_desc":a.sort((u,m)=>(m.stock??0)-(u.stock??0));break}return a}),Qi=z(!1),mr=a=>{Xe.value={...a},Qi.value=!0},Fn=z(""),vr=()=>{const a=localStorage.getItem("pos_walkin_counter");a?Fn.value=parseInt(a):(Fn.value=1,localStorage.setItem("pos_walkin_counter","1"))},gr=()=>`Walk In-${String(Fn.value).padStart(3,"0")}`,br=()=>{Fn.value++,localStorage.setItem("pos_walkin_counter",Fn.value.toString())},Xi=()=>{Xe.value={sortBy:"",priceMin:null,priceMax:null}},W=z([]),Fa=async a=>{const r=W.value[a];if(!r)return;if(r.isDeal){const m=li({id:r.dealId,title:r.title,menu_items:r.menu_items},r.qty+1);if(!m.canAdd){console.log("🚨 Missing ingredients for deal (cart increment)"),Bt.value={itemIndex:a,item:r,newQty:r.qty+1,isDeal:!0},Ft.value=m.missing,Sn.value=!0,X.warning("Some ingredients are missing. Confirm to proceed.");return}r.qty++,r.price=r.unit_price*r.qty,X.success("Deal quantity updated");return}const u=yr(r,r.qty+1);if(!u.canAdd){console.log("🚨 Missing ingredients detected (client-side)"),Bt.value={itemIndex:a,item:r,newQty:r.qty+1,isDeal:!1},Ft.value=u.missing,Sn.value=!0,X.warning("Some ingredients are missing. Confirm to proceed.");return}r.outOfStock=!1,r.qty++,r.price=r.unit_price*r.qty,r.resale_discount_per_item&&(r.total_resale_discount=r.resale_discount_per_item*r.qty)},yr=(a,r)=>{const u=a.ingredients||[];if(u.length===0)return{canAdd:!0,missing:[]};const m=[],T={};return W.value.forEach(g=>{(g.ingredients||[]).filter(D=>!g.removed_ingredients||g.removed_ingredients.length===0?!0:!g.removed_ingredients.includes(D.id||D.inventory_item_id)).forEach(D=>{const j=D.inventory_item_id,de=Number(D.inventory_stock??D.inventory_item?.stock??0);T[j]||(T[j]={totalStock:de,used:0,name:D.product_name||D.name,unit:D.unit||"unit"});const K=Number(D.quantity??D.qty??1)*g.qty;T[j].used+=K})}),u.filter(g=>!a.removed_ingredients||a.removed_ingredients.length===0?!0:!a.removed_ingredients.includes(g.id||g.inventory_item_id)).forEach(g=>{const y=g.inventory_item_id,$=Number(g.quantity??g.qty??1)*r,D=Number(g.inventory_stock??g.inventory_item?.stock??0);if(!T[y])D<$&&m.push({item_id:a.id,item_title:a.title,variant_id:a.variant_id||null,variant_name:a.variant_name||null,inventory_item_id:y,inventory_item_name:g.product_name||g.name,required_quantity:$,available_quantity:D,shortage_quantity:$-D,unit:g.unit||"unit",order_quantity:r});else{const j=T[y].totalStock-T[y].used,de=W.value.find(K=>K.id===a.id&&K.variant_id===a.variant_id&&JSON.stringify(K.addons?.map(qe=>qe.id).sort())===JSON.stringify(a.addons?.map(qe=>qe.id).sort()));if(de){const K=Number(g.quantity??g.qty??1)*de.qty,qe=j+K;qe<$&&m.push({item_id:a.id,item_title:a.title,variant_id:a.variant_id||null,variant_name:a.variant_name||null,inventory_item_id:y,inventory_item_name:g.product_name||g.name,required_quantity:$,available_quantity:qe,shortage_quantity:$-qe,unit:g.unit||"unit",order_quantity:r})}else j<$&&m.push({item_id:a.id,item_title:a.title,variant_id:a.variant_id||null,variant_name:a.variant_name||null,inventory_item_id:y,inventory_item_name:g.product_name||g.name,required_quantity:$,available_quantity:j,shortage_quantity:$-j,unit:g.unit||"unit",order_quantity:r})}}),{canAdd:m.length===0,missing:m}},po=async a=>{const r=W.value[a];if(!r||r.qty<=1){X.error("Cannot reduce below 1.");return}r.qty--,r.price=r.unit_price*r.qty,r.resale_discount_per_item&&(r.total_resale_discount=r.resale_discount_per_item*r.qty),r.outOfStock=!1},ho=a=>{if(W.value[a],W.value.splice(a,1),W.value.length===0){_t.value=[],Me.value=[],Mt.value=[],ii();return}Me.value.length>0&&(Me.value=Me.value.filter(u=>{if(!u.menu_items||u.menu_items.length===0)return!0;const m=u.menu_items.map(_=>_.id);return W.value.some(_=>m.includes(_.id))}));const r=[];_t.value.forEach(u=>{u.min_purchase&&jt.value<u.min_purchase?X.info(`Discount "${u.name}" removed — subtotal is lower than minimum required (${n(u.min_purchase)}).`):r.push(u)}),_t.value=r},jt=Ee(()=>W.value.reduce((a,r)=>a+r.price,0)),xi=Ee(()=>{if(Ae.value!=="Delivery")return 0;const a=Qt.props.onboarding.tax_and_vat;return a.has_delivery_charges?a.delivery_charge_flat?parseFloat(a.delivery_charge_flat):a.delivery_charge_percentage?jt.value*parseFloat(a.delivery_charge_percentage)/100:0:0}),Ai=Ee(()=>{if(W.value.length===0)return 0;const a=Qt.props.onboarding.tax_and_vat;return a.has_service_charges?a.service_charge_flat?parseFloat(a.service_charge_flat):a.service_charge_percentage?jt.value*parseFloat(a.service_charge_percentage)/100:0:0}),_o=a=>`£${(Math.round(a*100)/100).toFixed(2)}`,_e=z(null),tt=z(0),wr=z(""),Bn=z(null),Tt=z({}),Tn=z(""),Er=async()=>{if(!_e.value)return;if(tt.value<=0){X.error("Please select at least 1 item to add to cart");return}const a=ht(),r=a?a.id:null;a&&`${a.name}`;const u=a?a.name:null,m=parseFloat(a?a.price:_e.value.price),T=_r(),_=Rt(),g=m+_,y=a?mt(a,!0):mt(_e.value,!1),$=ri(_e.value,r),D=Ie();try{const j=T.map(Pe=>Pe.id).sort((Pe,He)=>Pe-He).join("-"),de=$.length>0?Ts($):999999,K=W.value.findIndex(Pe=>{if(Pe.variant_id!==r)return!1;const He=(Pe.addons||[]).map(Wt=>Wt.id).sort((Wt,Fr)=>Wt-Fr).join("-");return Pe.id===_e.value.id&&He===j});if(K>=0){if(W.value[K].qty+=tt.value,W.value[K].price=W.value[K].unit_price*W.value[K].qty,W.value[K].total_resale_discount=y*W.value[K].qty,Tn.value&&Tn.value.trim()){const Pe=W.value[K].item_kitchen_note||"",He=Tn.value.trim(),Wt=[Pe,He,D].filter(Boolean).filter((Fr,$i,Ws)=>Ws.indexOf(Fr)===$i);W.value[K].item_kitchen_note=Wt.join("; ")}else if(D){const Pe=W.value[K].item_kitchen_note||"";W.value[K].item_kitchen_note=[Pe,D].filter(Boolean).join("; ")}M.value.length>0&&(W.value[K].removed_ingredients=[...M.value]),X.success(`Quantity updated to ${W.value[K].qty}`)}else{const Pe=[Tn.value.trim(),D].filter(Boolean).join(". ");W.value.push({id:_e.value.id,title:_e.value.title,img:_e.value.img,price:g*tt.value,unit_price:Number(g),qty:tt.value,note:wr.value||"",item_kitchen_note:Pe,stock:de,ingredients:$,variant_id:r,variant_name:u,addons:T,removed_ingredients:[...M.value],resale_discount_per_item:y,total_resale_discount:y*tt.value}),X.success(`${_e.value.title} added to cart`)}bootstrap.Modal.getInstance(document.getElementById("chooseItem")).hide(),tt.value=0,wr.value="",Tn.value="",Bn.value=null,Tt.value={},M.value=[]}catch(j){X.error("Failed to add item: "+(j.response?.data?.message||j.message))}},Ts=a=>{if(!a||a.length===0)return 999999;let r=1/0;return a.forEach(u=>{const m=Number(u.quantity??u.qty??1),T=Number(u.inventory_stock??u.inventory_item?.stock??0);if(m<=0)return;const _=Math.floor(T/m);r=Math.min(r,_)}),r===1/0?0:r},Ba=async()=>{if(!_e.value)return;const a=ht(),r=a?a.id:null,u=B(),m=yr({id:_e.value.id,title:_e.value.title,variant_id:r,variant_name:a?a.name:null,ingredients:u,removed_ingredients:M.value||[]},tt.value+1);if(!m.canAdd){console.log("🚨 Missing ingredients for modal increment (client-side)"),Zi.value={currentQty:tt.value},Ft.value=m.missing,Sn.value=!0,X.warning("Some ingredients are missing. Confirm to proceed.");return}tt.value++},qa=()=>{tt.value>1&&tt.value--},ct=z({}),mo=()=>{W.value=[],rt.value=gr(),Qe.value="",an.value="",Pt.value=null,Ae.value=At.value[0]||"eat_in",Ti.value="",ni.value="",xs.value=0,Me.value=[],_t.value=[],Mt.value=[],Ji.value=[],ii()};_s(Ae,()=>ct.value={});const Ti=z(""),ni=z(""),xr=z(!1),Ci=z(null),Cs=z(!1),Ar=z(0),Ua=()=>{if(W.value.length===0){X.error("Please add at least one item to the cart.");return}if(Ae.value==="Eat_in"&&!Pt.value){ct.value.table_number=["Table number is required for dine-in orders."],X.error("Please select a table number for Dine In orders.");return}if((Ae.value==="Delivery"||Ae.value==="Takeaway")&&!rt.value){ct.value.customer=["Customer name is required."],X.error("Customer name is required.");return}if(Ae.value==="Delivery"&&!an.value){ct.value.phoneNumber=["Phone number is required for delivery."],X.error("Phone number is required for delivery.");return}if(Ae.value==="Delivery"&&!Qe.value){ct.value.deliveryLocation=["Delivery location is required."],X.error("Delivery location is required.");return}Ar.value=parseFloat(is.value).toFixed(2),Cs.value=!0},vo=async a=>{try{const r=await axios.post("http://localhost:8085/print",{order:a,type:"customer"},{headers:{"Content-Type":"application/json"},timeout:5e3});console.info("✅ Customer print OK"),console.info("Status:",r.status),console.info("Data  :",r.data),console.info("✅ Server is up! Response: "+JSON.stringify(r.data))}catch(r){console.error("❌ Print request failed"),r.response?console.error("❌ Server responded with error: "+r.response.status):r.request?console.error("❌ No response from server (server is DOWN or unreachable)"):console.error("❌ Error: "+r.message)}console.info("The Customer request send back: "+res.data)},go=async a=>{try{const r=await axios.post("http://localhost:8085/print",{order:a,type:"KOT"},{headers:{"Content-Type":"application/json"},timeout:5e3});console.info("✅ Customer print OK"),console.info("Status:",r.status),console.info("Data  :",r.data)}catch(r){console.error("❌ Print request failed"),r.response?(console.error("Status:",r.response.status),console.error("Data  :",r.response.data)):r.request?(console.error("No response from server"),console.error("Request object:",r.request)):console.error("Error message:",r.message)}console.info("The KOT request send back: "+res.data)},Wa=z("cash"),Ss=z(0),Mt=z([]),Cn=z(null),bo=z(!1),_t=z([]),Ji=z([]),yo=async a=>{if(!a||a.length===0){X.warning("No discounts selected.");return}const r=Ji.value.map(m=>m.id),u=a.filter(m=>!r.includes(m.id));if(u.length===0){X.error("All selected discounts have been rejected for this order.");return}if(u.length<a.length){const m=a.length-u.length;X.warning(`${m} discount(s) were previously rejected and cannot be requested again.`)}try{const m=await axios.post("/api/discount-approvals/request",{discounts:a.map(T=>({discount_id:T.id,discount_percentage:parseFloat(T.discount_amount),discount_name:T.name})),order_items:W.value.map(T=>({id:T.id,title:T.title,qty:T.qty,unit_price:T.unit_price,price:T.price})),order_subtotal:jt.value,request_note:`Discount approval request from ${Ii.value?.name||"Cashier"}`});m.data.success&&(Mt.value=m.data.data.map(T=>({...T,discountData:a.find(_=>_.id===T.discount_id),percentage:parseFloat(T.discount_percentage),status:"pending"})),ts.value=!1,bo.value=!0,X.info("Discount approval request sent to Super Admin. Waiting for approval..."),wo())}catch(m){console.error("Error requesting discount approval:",m),X.error(m.response?.data?.message||"Failed to request discount approval")}},wo=()=>{Cn.value&&clearInterval(Cn.value),Cn.value=setInterval(async()=>{await Tr()},3e3)},Tr=async()=>{if(Mt.value.length===0){ii();return}try{const a=Mt.value.map(u=>u.id),r=await axios.post("/api/discount-approvals/check-status",{approval_ids:a});r.data.success&&(r.data.data.forEach(m=>{if(m.status!=="pending"){const T=Mt.value.findIndex(_=>_.id===m.id);if(T>=0){if(m.status==="approved"){const _={id:m.discount_id,name:m.discount_name||m.discount?.name,percentage:parseFloat(m.discount_percentage),approval_id:m.id};Va(_),X.success(`Discount "${_.name}" (${_.percentage}%) approved!`)}else m.status==="rejected"&&(Ji.value.push({id:m.discount_id,name:m.discount_name,percentage:parseFloat(m.discount_percentage),rejection_reason:m.approval_note}),X.error(`Discount "${m.discount_name}" rejected.`+(m.approval_note?` Reason: ${m.approval_note}`:"")));Mt.value.splice(T,1)}}}),Mt.value.length===0&&(bo.value=!1,ii()))}catch(a){console.error("Error checking approval status:",a)}},ii=()=>{Cn.value&&(clearInterval(Cn.value),Cn.value=null)},Va=a=>{_t.value.push(a)};Rb(()=>{ii()}),Xs(()=>{window.Echo&&window.Echo.channel("discount-approvals").listen(".approval.responded",a=>{Tr()})});const Os=Ee(()=>!_t.value||_t.value.length===0?0:_t.value.reduce((a,r)=>{const u=parseFloat(r.percentage||0),m=jt.value*u/100;return a+m},0)),Cr=a=>jt.value*a/100,Eo=()=>{_t.value=[],Mt.value=[],Ji.value=[],ii()},Sn=z(!1),Ft=z([]),Bt=z(null),Is=z(null),Zi=z(null),si=z(null),xo=z(null),Ha=async({paymentMethod:a,cashReceived:r,cardAmount:u,changeAmount:m,items:T,autoPrintKot:_,done:g})=>{ct.value={};try{const y={customer_name:rt.value,phone_number:an.value,delivery_location:Qe.value,sub_total:jt.value,tax:Oi.value,service_charges:Ai.value,delivery_charges:xi.value,sales_discount:ns.value,approved_discounts:Os.value,approved_discount_details:_t.value.map(D=>({discount_id:D.id,discount_name:D.name,discount_percentage:D.percentage,discount_amount:Cr(D.percentage),approval_id:D.approval_id})),promo_discount:qn.value,applied_promos:Me.value.map(D=>({promo_id:D.id,promo_name:D.name,promo_type:D.type,discount_amount:D.applied_discount||0,applied_to_items:D.applied_to_items||[]})),total_amount:is.value,note:Ti.value,kitchen_note:ni.value,order_date:new Date().toISOString().split("T")[0],order_time:new Date().toTimeString().split(" ")[0],order_type:Ae.value==="Eat_in"?"Eat In":Ae.value==="Delivery"?"Delivery":Ae.value==="Takeaway"?"Takeaway":"Collection",table_number:Pt.value?.name||null,payment_method:a,auto_print_kot:_,cash_received:r,change:m,...a==="Split"&&{payment_type:"split",cash_amount:r,card_amount:u},items:(W.value??[]).map(D=>{if(D.isDeal)return{product_id:D.dealId,title:D.title,quantity:D.qty,price:D.price,note:D.note??"",kitchen_note:ni.value??"",unit_price:D.unit_price,item_kitchen_note:D.item_kitchen_note??"",tax_percentage:0,tax_amount:0,variant_id:null,variant_name:null,addons:[],sale_discount_per_item:0,removed_ingredients:[],is_deal:!0,deal_id:D.dealId,menu_items:D.menu_items||[]};const j=L.value.find(qe=>qe.id===D.id);let de=j;if(D.variant_id&&j?.variants){const qe=j.variants.find(Pe=>Pe.id===D.variant_id);qe&&(de=qe)}const K=de?mt(de,!!D.variant_id):0;return{product_id:D.id,title:D.title,quantity:D.qty,price:D.price,note:D.note??"",kitchen_note:ni.value??"",unit_price:D.unit_price,item_kitchen_note:D.item_kitchen_note??"",tax_percentage:$e(D),tax_amount:Re(D),variant_id:D.variant_id||null,variant_name:D.variant_name||null,addons:D.addons||[],sale_discount_per_item:K,removed_ingredients:D.removed_ingredients||[],is_deal:!1}}),confirm_missing_ingredients:!0};console.log("📤 Sending order");const $=await axios.post("/pos/order",y);if(console.log("✅ Order created successfully:",$.data),$.data.logout===!0){X.success($.data.message||"Order created successfully. Logging out..."),setTimeout(()=>{window.location.href=$.data.redirect||"/login"},1e3),g&&g();return}br(),mo(),Cs.value=!1,X.success($.data.message||"Order placed successfully!"),Ci.value={...$.data.order,...y,items:y.items,payment_type:a==="Split"?"split":a.toLowerCase(),cash_amount:a==="Split"?r:null,card_amount:a==="Split"?u:null},_&&(Si.value=await Ka(),go(JSON.parse(JSON.stringify(Ci.value)))),vo(JSON.parse(JSON.stringify(Ci.value))),Me.value=[],_t.value=[],Mt.value=[],ii()}catch(y){console.error("❌ Order submission error:",y),X.error(y.response?.data?.message||"Failed to place order")}finally{g&&g()}},Ao=async()=>{if(console.log("✅ User confirmed missing ingredients"),Sn.value=!1,Bt.value&&!Bt.value.isDeal){const{itemIndex:a,newQty:r}=Bt.value,u=W.value[a];u&&(u.outOfStock=!1,u.qty=r,u.price=u.unit_price*u.qty,u.resale_discount_per_item&&(u.total_resale_discount=u.resale_discount_per_item*u.qty),X.success("Quantity updated")),Bt.value=null,Ft.value=[];return}if(Bt.value&&Bt.value.isDeal){const{itemIndex:a,newQty:r}=Bt.value,u=W.value[a];u&&u.isDeal&&(u.qty=r,u.price=u.unit_price*u.qty,X.success("Deal quantity updated")),Bt.value=null,Ft.value=[];return}if(si.value){const{deal:a,existingIndex:r,newQty:u}=si.value;if(r>=0)W.value[r].qty=u,W.value[r].price=W.value[r].unit_price*u,X.success("Deal quantity updated");else{const T=[];a.menu_items.forEach(g=>{g.ingredients&&g.ingredients.length>0&&T.push(...g.ingredients.map(y=>({...y,menu_item_id:g.id,menu_item_name:g.name})))});const _={id:`deal-${a.id}`,title:a.title,price:Dn.value,unit_price:parseFloat(a.price),img:a.img,qty:1,stock:999999,ingredients:T,isDeal:!0,dealId:a.id,menu_items:a.menu_items.map(g=>({id:g.id,name:g.name,price:g.price,ingredients:(g.ingredients||[]).map(y=>({inventory_item_id:y.id,inventory_item_id:y.inventory_item_id,product_name:y.product_name||y.name,quantity:y.quantity||y.qty||"1.00",inventory_stock:y.inventory_stock||y.stock||0,unit:y.unit||"unit",category_id:y.category_id,supplier_id:y.supplier_id})),stock:Ts(g.ingredients||[])})),resale_discount_per_item:0,total_resale_discount:0};W.value.push(_),X.success(`${a.title} added to cart!`)}si.value=null,Ft.value=[];return}if(Is.value){const{product:a,variantId:r,variantName:u,variantPrice:m,selectedAddons:T,addonsPrice:_,resaleDiscountPerItem:g,existingIndex:y,newQty:$}=Is.value,D=m+_;if(y>=0)W.value[y].qty=$,W.value[y].price=W.value[y].unit_price*$,W.value[y].total_resale_discount=g*$,W.value[y].outOfStock=!1,X.success("Quantity updated");else{const j=ri(a,r),de=Zn(a);W.value.push({id:a.id,title:a.title,img:a.img,price:D,unit_price:Number(D),qty:1,note:"",stock:de,ingredients:j,variant_id:r,variant_name:u,addons:T,outOfStock:!1,resale_discount_per_item:g,total_resale_discount:g}),X.success("Item added to cart")}Is.value=null,Ft.value=[];return}if(Zi.value){tt.value=Zi.value.currentQty+1,X.success("Quantity increased"),Zi.value=null,Ft.value=[];return}};Xs(async()=>{vr();const a=String(Fn.value).padStart(3,"0");if(rt.value=`Walk In-${a}`,window.bootstrap){document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(m=>new window.bootstrap.Tooltip(m));const u=document.getElementById("chooseItem");u&&new window.bootstrap.Modal(u,{backdrop:"static"})}v.value="",x.value=Date.now(),await lu(),setTimeout(()=>{S.value=!0;const u=document.getElementById(E);u&&(u.value="",v.value="")},100),U(),V(),Mn();const r=document.getElementById("menuFilterModal");r&&r.addEventListener("hidden.bs.modal",()=>{Qi.value||Xi(),Qi.value=!1})});const Qt=$b();function Ds(){const a=Qt.props.flash?.success,r=Qt.props.flash?.error;a&&X.success(a,{autoClose:4e3}),r&&X.error(r,{autoClose:6e3})}Xs(()=>Ds()),Xs(()=>{Qt.props.flash?.success;const a=Qt.props.flash?.error;a&&X.error(a);const r=Qt.props.flash?.print_payload;r&&setTimeout(()=>vo(r),250),r&&setTimeout(()=>go(r),250)}),_s(()=>Qt.props.flash,()=>Ds(),{deep:!0});const za=({id:a,status:r,message:u})=>{Si.value=Si.value.map(m=>m.id===a?{...m,status:r}:m)},Sr=z(!1),Si=z([]),Or=z(!1),On=z(!1),Ns=z([]),ks=z(!1),Ka=async()=>{On.value=!0,Ns.value=[],ks.value=!0;try{const a=await axios.get("/api/pos/orders/today");Ns.value=a.data.orders}catch(a){console.error("Failed to fetch POS orders:",a),X.error(a.response?.data?.message||"Failed to fetch POS orders")}finally{ks.value=!1}},es=z(!1),ts=z(!1),Ls=z(!0),$s=z(!0),Rs=z([]),Ps=z([]),Me=z([]),To=a=>{if(Me.value=a,!a||a.length===0){X.warning("No promos selected.");return}const r=a.reduce((m,T)=>m+parseFloat(T.applied_discount||0),0);if(r<=0){X.warning("Selected promos don't provide any discount for current cart items."),Me.value=[];return}const u=new Set(a.flatMap(m=>m.applied_to_items||[])).size;X.success(`${a.length} promo(s) applied! Applied to ${u} item(s). You saved ${n(r)}`),es.value=!1},Ya=async()=>{Ls.value=!0,es.value=!0;try{const a=await axios.get("/api/promos/current");a.data?.success?Rs.value=a.data.data||[]:(console.warn("Failed to fetch promos:",a.data),Rs.value=[],X.warning("No promos available at the moment"))}catch(a){console.error("Error fetching current meal promos:",a),Rs.value=[],X.error("Failed to load promotions")}finally{Ls.value=!1}},Ga=async()=>{$s.value=!0,ts.value=!0;try{const a=await axios.get("/api/discounts/all");a.data?.success?Ps.value=a.data.data||[]:(console.warn("Failed to fetch discounts:",a.data),Ps.value=[],X.warning("No discounts available at the moment"))}catch(a){console.error("Error fetching current meal discounts:",a),Ps.value=[],X.error("Failed to load discounts")}finally{$s.value=!1}},ja=a=>!Me.value||Me.value.length===0?!1:Me.value.some(r=>!r.menu_items||r.menu_items.length===0?!0:r.menu_items.map(m=>m.id).includes(a.id)),Qa=a=>{Ci.value=a,xr.value=!0,On.value=!1},qn=Ee(()=>!Me.value||Me.value.length===0?0:Me.value.reduce((a,r)=>{const u=parseFloat(r.discount_amount??0)||0;if(r.applied_discount!==void 0)return a+parseFloat(r.applied_discount);const m=Xa(r);if(r.min_purchase&&m<parseFloat(r.min_purchase))return a;if(r.type==="flat")return a+u;if(r.type==="percent"){const T=m*u/100,_=parseFloat(r.max_discount??0)||0;return _>0&&T>_?a+_:a+T}return a},0)),Xa=a=>{if(!a.menu_items||a.menu_items.length===0)return W.value.reduce((u,m)=>u+m.unit_price*m.qty,0);const r=a.menu_items.map(u=>u.id);return W.value.filter(u=>r.includes(u.id)).reduce((u,m)=>u+m.unit_price*m.qty,0)},Ja=Ee(()=>!Me.value||Me.value.length===0?[]:Me.value.map(a=>({promo_id:a.id,promo_name:a.name,promo_type:a.type,discount_amount:a.applied_discount||0,applied_to_items:a.applied_to_items||[]}))),Oi=Ee(()=>{let a=0;const r=parseFloat(Qt.props.onboarding.tax_and_vat.tax_rate)||0;return W.value.forEach(u=>{const m=L.value.find(T=>T.id===u.id);if(m&&m.is_taxable){const _=u.unit_price*u.qty*r/100;a+=_}}),a}),ns=Ee(()=>W.value.reduce((a,r)=>a+(r.total_resale_discount||0),0)),is=Ee(()=>{const a=jt.value+Oi.value+xi.value+Ai.value-ns.value-qn.value-Os.value;return Math.max(0,a)}),Re=a=>{const r=L.value.find(u=>u.id===a.id);return r&&r.is_taxable&&r.tax_percentage?a.unit_price*a.qty*parseFloat(r.tax_percentage)/100:0},$e=a=>{const r=L.value.find(u=>u.id===a.id);return r&&r.is_taxable&&r.tax_percentage?parseFloat(r.tax_percentage):0},Co=a=>{const r=te(a),u=r?r.id:null,T=ie(a).map(g=>g.id).sort().join("-"),_=W.value.find(g=>{const y=(g.addons||[]).map($=>$.id).sort().join("-");return g.id===a.id&&g.variant_id===u&&y===T});return _?_.qty:0},Za=async a=>{const r=te(a),u=r?r.id:null,m=ie(a),T=m.map(Pe=>Pe.id).sort().join("-"),_=W.value.findIndex(Pe=>{const He=(Pe.addons||[]).map(Wt=>Wt.id).sort().join("-");return Pe.id===a.id&&Pe.variant_id===u&&He===T});let g=1,y=null;const $=ri(a,u);_>=0&&(y=W.value[_],g=y.qty+1);const D=yr({id:a.id,title:a.title,variant_id:u,variant_name:r?r.name:null,ingredients:$,removed_ingredients:y?.removed_ingredients||[],addons:m},g);if(!D.canAdd){console.log("🚨 Missing ingredients for card increment (client-side)");const Pe=parseFloat(r?r.price:a.price),He=H(a),Wt=r?mt(r,!0):mt(a,!1);Is.value={product:a,variant:r,variantId:u,variantName:r?r.name:null,variantPrice:Pe,selectedAddons:m,addonsPrice:He,resaleDiscountPerItem:Wt,existingIndex:_,newQty:g},Ft.value=D.missing,Sn.value=!0,X.warning("Some ingredients are missing. Confirm to proceed.");return}const j=parseFloat(r?r.price:a.price),de=H(a),K=j+de,qe=r?mt(r,!0):mt(a,!1);if(_>=0)W.value[_].qty++,W.value[_].price=W.value[_].unit_price*W.value[_].qty,W.value[_].total_resale_discount=qe*W.value[_].qty,W.value[_].outOfStock=!1;else{const Pe=Zn(a);W.value.push({id:a.id,title:a.title,img:a.img,price:K,unit_price:Number(K),qty:1,note:"",stock:Pe,ingredients:$,variant_id:u,variant_name:r?r.name:null,addons:m,outOfStock:!1,resale_discount_per_item:qe,total_resale_discount:qe})}},el=a=>{const r=te(a),u=r?r.id:null,T=ie(a).map(y=>y.id).sort().join("-"),_=W.value.findIndex(y=>{const $=(y.addons||[]).map(D=>D.id).sort().join("-");return y.id===a.id&&y.variant_id===u&&$===T});if(_<0)return;const g=W.value[_];g.qty<=1?W.value.splice(_,1):(g.qty--,g.price=g.unit_price*g.qty,g.outOfStock=!1)},ri=(a,r)=>!r||!a.variants?.length?a.ingredients??[]:a.variants.find(m=>m.id===r)?.ingredients??a.ingredients??[],Je=z(null),Un=z(null);let oi=null;const tl=(a,r)=>{Je.value=JSON.parse(JSON.stringify(a)),Un.value=r;const u=L.value.find(m=>m.id===a.id);if(u&&u.addon_groups&&u.addon_groups.length>0){const m=new Map;a.addons&&a.addons.forEach(_=>{m.set(_.id,{quantity:_.quantity||1,selected:!0})});const T=[];u.addon_groups.forEach(_=>{_.addons&&_.addons.length>0&&_.addons.forEach(g=>{const y=m.get(g.id);T.push({id:g.id,name:g.name,price:parseFloat(g.price||0),group_id:_.group_id,group_name:_.group_name,quantity:y?.quantity||1,selected:y?.selected||!1})})}),Je.value.addons=T}else Je.value.addons=[];if(!oi){const m=document.getElementById("addonManagementModal");m&&(oi=new bootstrap.Modal(m))}oi&&oi.show()},nt=a=>{a.selected=!a.selected,a.selected||(a.quantity=1)},Ir=a=>{a.selected&&(a.quantity=(a.quantity||1)+1)},ai=a=>{a.selected&&(a.quantity||1)>1&&(a.quantity-=1)},Dr=a=>a.addons?a.addons.reduce((r,u)=>u.selected!==!1?r+parseFloat(u.price)*(u.quantity||1):r,0):0,Nr=()=>{if(Un.value===null)return;const a=Je.value.addons.filter(_=>_.selected!==!1),r=Je.value.variant_id?L.value.find(_=>_.id===Je.value.id)?.variants?.find(_=>_.id===Je.value.variant_id):null,u=parseFloat(r?r.price:Je.value.unit_price),m=a.reduce((_,g)=>_+parseFloat(g.price)*(g.quantity||1),0),T=u+m;W.value[Un.value].addons=a,W.value[Un.value].unit_price=T,W.value[Un.value].price=T*W.value[Un.value].qty,X.success("Addons updated successfully!"),oi&&oi.hide(),Je.value=null,Un.value=null},qt=a=>!a.addons||a.addons.length===0?"":a.addons.map(r=>r.name).join(", "),Ms=()=>{let a=0;return Tt.value&&typeof Tt.value=="object"&&Object.values(Tt.value).forEach(r=>{Array.isArray(r)&&(a+=r.length)}),a},Ii=Ee(()=>Qt.props.current_user),kr=Ee(()=>s.value.filter(a=>a.menu_items_count&&a.menu_items_count>0)),Lr=Ee(()=>Ii.value?.roles?.includes("Cashier")||Ii.value?.roles?.includes("Admin")||Ii.value?.roles?.includes("Manager")),$r=z(`terminal-${Ii.value?.id}`),{broadcastCartUpdate:So,broadcastUIUpdate:Ct}=QE($r.value),nl=ro.debounce(a=>{console.log("📤 Broadcasting cart:",a.items.length,"items"),So(a)},300),Ut=ro.debounce(a=>{console.log("📤 Broadcasting UI"),Ct(a)},100);_s(()=>({items:W.value.map(a=>({id:a.id,title:a.name||a.title,img:a.image_url||a.img||"/assets/img/default.png",price:parseFloat(a.total||a.price||0),qty:parseInt(a.qty||1),variant_name:a.variant?.name||null,addons:(a.addons||[]).map(r=>({id:r.id,name:r.name,price:parseFloat(r.price||0)})),resale_discount_per_item:parseFloat(a.resale_discount_per_item||0)})),customer:rt.value||"Walk In",phone_number:an.value||"",delivery_location:Qe.value||"",orderType:Ae.value||"Dine In",table:Pt.value?{id:Pt.value.id,name:Pt.value.name}:null,subtotal:parseFloat(jt.value||0),tax:parseFloat(Oi.value||0),serviceCharges:parseFloat(Ai.value||0),deliveryCharges:parseFloat(xi.value||0),saleDiscount:parseFloat(ns.value||0),promoDiscount:parseFloat(qn.value||0),total:parseFloat(is.value||0),note:Ti.value||"",appliedPromos:(Me.value||[]).map(a=>({id:a.id,name:a.name,discount:parseFloat(a.discount||0),applied_to_items:a.applied_to_items||[]}))}),a=>{console.log("🔔 Cart changed:",a.items.length,"items, Total:",a.total),nl(a)},{deep:!0,immediate:!0}),_s(()=>({showCategories:Be.value??!0,activeCat:ei.value||null,menuCategories:(s.value||[]).map(a=>({id:a.id,name:a.name,menu_items_count:a.menu_items_count||0})),menuItems:(L.value||[]).map(a=>({id:a.id,name:a.name,price:parseFloat(a.price||0),image_url:a.image_url||null,description:a.description||"",label_color:a.label_color||"#1B1670",category:a.category?{id:a.category.id,name:a.category.name}:null,variants:(a.variants||[]).map(r=>({id:r.id,name:r.name,price:parseFloat(r.price||0),is_saleable:r.is_saleable??!1,resale_type:r.resale_type||null,resale_value:parseFloat(r.resale_value||0)})),addon_groups:(a.addon_groups||[]).map(r=>({id:r.id,name:r.name,addons:(r.addons||[]).map(u=>({id:u.id,name:u.name,price:parseFloat(u.price||0)}))})),is_saleable:a.is_saleable??!1,resale_type:a.resale_type||null,resale_value:parseFloat(a.resale_value||0)})),searchQuery:Gt.value||"",selectedCardVariant:G.value||{},selectedCardAddons:J.value||{}}),a=>{console.log("🔔 UI changed - Categories:",a.menuCategories.length,"Items:",a.menuItems.length),Ut(a)},{deep:!0,immediate:!0});const il=()=>{if(!Lr.value){X.error("Only cashiers can access customer display");return}const a=route("customer-display.index",{terminal:$r.value});window.open(a,"_blank","width=1920,height=1080")},mt=(a,r=!1)=>{if(!a)return 0;const u=a.is_saleable??a?.menu_item?.is_saleable,m=a.resale_type??a?.menu_item?.resale_type,T=a.resale_value??a?.menu_item?.resale_value,_=parseFloat(a.price||0);return!u||!m||!T?0:m==="flat"?parseFloat(T):m==="percentage"?_*parseFloat(T)/100:0},vt=(a,r=!1)=>{const u=parseFloat(a.price||0),m=mt(a,r);return Math.max(0,u-m)},ln=(a,r=!1)=>{if(!a)return null;const u=a.is_saleable??a?.menu_item?.is_saleable,m=a.resale_type??a?.menu_item?.resale_type,T=a.resale_value??a?.menu_item?.resale_value,_=mt(a,r);return!u||!m||!T||_<=0?null:{type:m,value:T,amount:_,display:m==="flat"?`Sale ${n(_)}`:`${T}% OFF`}},Rr=a=>{const r=te(a);let u;r?u=vt(r,!0):u=vt(a,!1);const m=H(a);return u+m},Se=a=>{if(!a.variants||a.variants.length===0){const T=mt(a,!1)>0;return{min:vt(a,!1),max:vt(a,!1),minOriginal:T?parseFloat(a.price||0):null,maxOriginal:T?parseFloat(a.price||0):null}}const r=a.variants.map(T=>vt(T,!0)),u=a.variants.map(T=>parseFloat(T.price||0)),m=a.variants.some(T=>mt(T,!0)>0);return{min:Math.min(...r),max:Math.max(...r),minOriginal:m?Math.min(...u):null,maxOriginal:m?Math.max(...u):null}},Wn=()=>{if(!_e.value)return 0;const a=ht();return a?vt(a,!0):vt(_e.value,!1)},Pr=()=>Wn()+Rt(),ss=z([]),Di=z(!1),Ni=z(!1),sl=async()=>{Di.value=!0;try{const a=await axios.get("/api/deals",{params:{status:1,per_page:100}});console.log("Fetched deals:",a.data.data),ss.value=a.data.data.map(r=>({id:r.id,title:r.name,price:r.price,img:r.image_url||"/assets/img/product/product29.jpg",description:r.description,menu_items:r.menu_items||[],status:r.status}))}catch(a){console.error("Error fetching deals:",a),X.error("Failed to load deals")}finally{Di.value=!1}},rl=()=>{Ni.value=!0,Be.value=!1},Oo=()=>{Ni.value=!1,Be.value=!0},rs=a=>{const r=W.value.find(u=>u.isDeal&&u.dealId===a.id);return r?r.qty:0},li=(a,r)=>{const u=[],m={};return W.value.forEach(T=>{let _=[];T.isDeal?T.menu_items?.forEach(g=>{_.push(...g.ingredients||[])}):_=T.ingredients||[],_.forEach(g=>{const y=g.inventory_item_id||g.id,$=Number(g.inventory_stock??g.stock??0),D=Number(g.quantity??g.qty??1)*T.qty;m[y]||(m[y]={totalStock:$,used:0,name:g.product_name||g.name,unit:g.unit||"unit"}),m[y].used+=D})}),a.menu_items.forEach(T=>{const _=T.ingredients||[];_.length!==0&&_.forEach(g=>{const y=g.inventory_item_id||g.id,$=Number(g.quantity??g.qty??1)*r;let j=Number(g.inventory_stock??g.stock??0);m[y]&&(j=m[y].totalStock-m[y].used);const de=W.value.find(K=>K.isDeal&&K.dealId===a.id);if(de){const K=Number(g.quantity??g.qty??1)*de.qty;j+=K}j<$&&u.push({deal_id:a.id,deal_title:a.title,menu_item_id:T.id,menu_item_name:T.name,inventory_item_id:y,inventory_item_name:g.product_name||g.name,required_quantity:$,available_quantity:Math.max(0,j),shortage_quantity:$-j,unit:g.unit||"unit",order_quantity:r})})}),{canAdd:u.length===0,missing:u}},ol=async a=>{const r=W.value.findIndex(T=>T.isDeal&&T.dealId===a.id),u=r>=0?W.value[r].qty+1:1,m=li(a,u);if(!m.canAdd){console.log("🚨 Missing ingredients for deal (client-side)"),si.value={deal:a,existingIndex:r,newQty:u},Ft.value=m.missing,Sn.value=!0,X.warning("Some ingredients are missing. Confirm to proceed.");return}if(r>=0)W.value[r].qty++,W.value[r].price=W.value[r].unit_price*W.value[r].qty,X.success("Deal quantity updated");else{const _=[];a.menu_items.forEach(y=>{y.ingredients&&y.ingredients.length>0&&_.push(...y.ingredients.map($=>({...$,menu_item_id:y.id,menu_item_name:y.name})))});const g={id:`deal-${a.id}`,title:a.title,price:parseFloat(a.price),unit_price:parseFloat(a.price),img:a.img,qty:1,stock:999999,ingredients:_,isDeal:!0,dealId:a.id,menu_items:a.menu_items.map(y=>({id:y.id,name:y.name,price:y.price,ingredients:y.ingredients||[],stock:Ts(y.ingredients||[])})),resale_discount_per_item:0,total_resale_discount:0};W.value.push(g),X.success(`${a.title} added to cart!`)}},Io=a=>{const r=W.value.findIndex(m=>m.isDeal&&m.dealId===a.id);if(r<0)return;const u=W.value[r];u.qty<=1?(W.value.splice(r,1),X.info("Deal removed from cart")):(u.qty--,u.price=u.unit_price*u.qty,X.success("Deal quantity decreased"))};Xs(()=>{sl()});const Ne=z(null),ke=z(0),Ve=z(1),un=z({}),St=z({}),Vn=z({}),cn=z([]);let Fs=null;const Ze=Ee(()=>!Ne.value||!Ne.value.menu_items?null:Ne.value.menu_items[ke.value]),ot=Ee(()=>Bs().length>0),ki=Ee(()=>Ze.value?.addon_groups&&Ze.value.addon_groups.length>0),In=Ee(()=>{const a=[];return ot.value&&a.push({id:"ingredients",name:"Ingredients"}),ki.value&&a.push({id:"addons",name:"Add-ons"}),a.push({id:"review",name:"Review"}),a}),os=Ee(()=>In.value.length),Do=Ee(()=>{if(Ve.value===1)return"0%";const a=In.value.length,r=(Ve.value-1)/(a-1);return`calc(${r*100}% - ${14-r*28}px)`}),al=Ee(()=>ke.value===Ne.value?.menu_items?.length-1);Ee(()=>Ne.value?.menu_items?.length?cn.value.length/Ne.value.menu_items.length*100:0);const Bs=()=>Ze.value?Ze.value.ingredients||[]:[],Mr=a=>(un.value[ke.value]||[]).includes(a),ll=a=>{const r=ke.value;un.value[r]||(un.value[r]=[]);const u=un.value[r],m=u.indexOf(a);m>-1?(u.splice(m,1),X.info("Ingredient added back")):(u.push(a),X.info("Ingredient removed"))},ul=()=>{const a=Bs(),r=un.value[ke.value]||[];return a.filter(u=>!r.includes(u.id)).length},Li=(a,r)=>{const u=ke.value;St.value[u]||(St.value[u]={});const T=Ze.value?.addon_groups?.find(_=>_.group_id===a);if(T&&T.max_select>0&&r.length>T.max_select){X.warning(`You can only select up to ${T.max_select} ${T.group_name}`),St.value[u][a]=r.slice(0,T.max_select);return}St.value[u][a]=r},cl=()=>{const a=ke.value,r=St.value[a];if(!r)return 0;let u=0;return Object.values(r).forEach(m=>{u+=m.length}),u},dl=()=>{const a=ke.value,r=St.value[a];if(!r)return"";const u=[];return Object.values(r).forEach(m=>{m.forEach(T=>{u.push(`${T.name} (+${n(T.price)})`)})}),u.join(", ")},qs=()=>{const a=ke.value,r=un.value[a]||[];if(r.length===0)return"";const u=Bs(),m=r.map(T=>{const _=u.find(g=>g.id===T);return _?_.product_name||_.name:null}).filter(Boolean);return m.length===0?"":`No ${m.join(", ")}`},No=a=>a<Ve.value?"bg-success text-white":a===Ve.value?"bg-primary text-white":"bg-light text-muted border",Hn=()=>{let a=Ve.value+1;for(;a<=os.value;){const r=In.value[a-1];if(r.id==="ingredients"&&!ot.value){a++;continue}if(r.id==="addons"&&!ki.value){a++;continue}break}a<=os.value&&(Ve.value=a)},Us=()=>{let a=Ve.value-1;for(;a>=1;){const r=In.value[a-1];if(r.id==="ingredients"&&!ot.value){a--;continue}if(r.id==="addons"&&!ki.value){a--;continue}break}a>=1&&(Ve.value=a)},fl=()=>{cn.value.includes(ke.value)||cn.value.push(ke.value),ke.value++,Ve.value=1,X.success("Item customized! Configure next item.")},pl=async()=>{if(!Ne.value)return;cn.value.includes(ke.value)||cn.value.push(ke.value);const a=Ne.value.menu_items.map((_,g)=>{const y=un.value[g]||[],$=St.value[g]||{},D=Vn.value[g]||"",j=[];Object.values($).forEach(K=>{K.forEach(qe=>{j.push({id:qe.id,name:qe.name,price:parseFloat(qe.price||0)})})});const de=(_.ingredients||[]).filter(K=>!y.includes(K.id)).map(K=>({id:K.id,inventory_item_id:K.inventory_item_id||K.id,product_name:K.product_name||K.name,quantity:K.quantity||K.qty||"1.00",stock:K.stock||0,unit:K.unit||"unit"}));return{id:_.id,name:_.name,price:_.price,ingredients:de,addons:j,kitchen_note:D,removed_ingredients:y,stock:Ts(de)}}),r=W.value.findIndex(_=>_.isDeal&&_.dealId===Ne.value.id),u=999999,m=[];if(a.forEach(_=>{_.ingredients&&_.ingredients.length>0&&m.push(..._.ingredients.map(g=>({...g,menu_item_id:_.id,menu_item_name:_.name})))}),r>=0)W.value[r].qty++,W.value[r].price=W.value[r].unit_price*W.value[r].qty,X.success("Deal quantity updated!");else{const _={id:`deal-${Ne.value.id}`,title:Ne.value.title,price:Dn.value,unit_price:parseFloat(Ne.value.price),img:Ne.value.img,qty:1,stock:u,ingredients:m,isDeal:!0,dealId:Ne.value.id,menu_items:a,resale_discount_per_item:0,total_resale_discount:0};W.value.push(_),X.success(`${Ne.value.title} added to cart!`)}const T=bootstrap.Modal.getInstance(document.getElementById("customizeDealModal"));T&&T.hide(),hl()},ko=Ee(()=>{if(!Ze.value)return 0;const a=parseFloat(Ze.value.price||0),r=ke.value,u=St.value[r];if(!u)return a;let m=0;return Object.values(u).forEach(T=>{T.forEach(_=>{m+=parseFloat(_.price||0)})}),a+m}),Dn=Ee(()=>{if(!Ne.value)return 0;const a=parseFloat(Ne.value.price||0);let r=0;return Object.values(St.value).forEach(u=>{Object.values(u).forEach(m=>{m.forEach(T=>{r+=parseFloat(T.price||0)})})}),a+r}),gt=Ee(()=>{const a=ke.value,r=St.value[a];if(!r)return 0;let u=0;return Object.values(r).forEach(m=>{m.forEach(T=>{u+=parseFloat(T.price||0)})}),u}),Lo=a=>{if(Ne.value=a,ke.value=0,Ve.value=1,un.value={},St.value={},Vn.value={},cn.value=[],!Fs){const r=document.getElementById("customizeDealModal");r&&(Fs=new bootstrap.Modal(r,{backdrop:"static"}))}Fs&&Fs.show()},hl=()=>{Ne.value=null,ke.value=0,Ve.value=1,un.value={},St.value={},Vn.value={},cn.value=[]};return(a,r)=>(O(),I(Ce,null,[Nt(ce(Pb),{title:"Sale"}),Nt(Fb,null,{default:uu(()=>[c("div",_x,[c("div",mx,[c("div",vx,[c("div",{class:tn(Be.value?"col-md-12":"col-lg-8")},[Be.value?(O(),I("div",gx,[c("div",bx,[r[27]||(r[27]=c("h4",{class:"mb-0"},"Menu Categories",-1)),Lr.value?(O(),I("button",{key:0,onClick:il,class:"btn btn-primary d-flex align-items-center gap-2",type:"button"},[...r[25]||(r[25]=[c("i",{class:"bi bi-tv"},null,-1),c("span",null,"Customer View",-1)])])):se("",!0),c("div",yx,[r[26]||(r[26]=c("input",{type:"email",name:"email",autocomplete:"email",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px"},tabindex:"-1","aria-hidden":"true"},null,-1)),S.value?et((O(),I("input",{id:E,"onUpdate:modelValue":r[0]||(r[0]=u=>v.value=u),key:x.value,type:"search",class:"form-control form-control-sm",placeholder:"Search categories...",autocomplete:"new-password",name:E,role:"presentation",style:{"border-radius":"8px",padding:"8px 12px"}})),[[Gn,v.value]]):(O(),I("input",wx))])]),r[32]||(r[32]=c("hr",null,null,-1)),f.value?(O(),I("div",Ex,[...r[28]||(r[28]=[c("div",{class:"spinner-border",role:"status",style:{color:"#1B1670",width:"3rem",height:"3rem","border-width":"0.3em"}},null,-1),c("div",{class:"mt-2 fw-semibold text-muted"},"Loading...",-1)])])):(O(),I(Ce,{key:1},[c("div",xx,[c("div",{class:"cat-card",onClick:rl,style:{cursor:"pointer"}},[r[29]||(r[29]=c("div",{class:"cat-icon-wrap"},[c("span",{class:"cat-icon"},[c("i",{class:"bi bi-gift-fill text-danger",style:{"font-size":"2rem"}})])],-1)),r[30]||(r[30]=c("div",{class:"cat-name"},"Deals",-1)),c("div",Ax,k(ss.value.length)+" Deal"+k(ss.value.length!==1?"s":""),1)])]),(O(!0),I(Ce,null,Ke(C.value,u=>(O(),I("div",{key:u.id,class:"col-6 col-md-4 col-lg-4 category-cards"},[c("div",{class:"cat-card",onClick:m=>Rn(u)},[c("div",Cx,[c("span",Sx,[u.image_url?(O(),I("img",{key:0,src:u.image_url,alt:"Category Image",class:"cat-image"},null,8,Ox)):(O(),I("span",Ix,"🍵"))])]),c("div",Dx,k(u.name),1),c("div",Nx,k(u.menu_items_count)+" Menu ",1)],8,Tx)]))),128)),!f.value&&C.value.length===0?(O(),I("div",kx,[...r[31]||(r[31]=[c("div",{class:"alert alert-light border text-center rounded-4"}," No categories found ",-1)])])):se("",!0)],64))])):(O(),I("div",Lx,[c("div",$x,[c("button",{class:"btn btn-primary rounded-pill shadow-sm px-3",onClick:r[1]||(r[1]=u=>Ni.value?Oo():ti())},[...r[33]||(r[33]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),be(" Back ",-1)])]),c("h5",Rx,k(Ni.value?"Deals":s.value.find(u=>u.id===ei.value)?.name||"Items"),1),Ni.value?se("",!0):(O(),I("div",Px,[Nt(zb,{modelValue:Xe.value,"onUpdate:modelValue":r[2]||(r[2]=u=>Xe.value=u),title:"Menu Items","modal-id":"menuFilterModal","sort-options":[{value:"name_asc",label:"Name: A to Z"},{value:"name_desc",label:"Name: Z to A"},{value:"price_asc",label:"Price: Low to High"},{value:"price_desc",label:"Price: High to Low"}],"show-price-range":!0,"show-category":!1,"show-stock-status":!1,"show-date-range":!1,categories:[],suppliers:[],onApply:mr,onClear:Xi},null,8,["modelValue"]),c("div",Mx,[r[34]||(r[34]=c("i",{class:"bi bi-search position-absolute",style:{left:"12px",top:"50%",transform:"translateY(-50%)","z-index":"10"}},null,-1)),et(c("input",{"onUpdate:modelValue":r[3]||(r[3]=u=>Gt.value=u),class:"form-control search-input ps-5",type:"text",placeholder:"Search items...",style:{"min-width":"250px"}},null,512),[[Gn,Gt.value]])])]))]),As.value.length===0?(O(),I("div",Fx,[c("div",Bx,[r[38]||(r[38]=c("i",{class:"bi bi-search me-2",style:{"font-size":"2rem",opacity:"0.5"}},null,-1)),r[39]||(r[39]=c("h5",{class:"mt-2 mb-2 text-dark fw-semibold"},"No Menu Found",-1)),c("p",qx,[Gt.value&&Xe.value.priceRange&&Xe.value.priceRange.length>0?(O(),I(Ce,{key:0},[be(" No items match your search and filter criteria. ")],64)):Gt.value?(O(),I(Ce,{key:1},[r[35]||(r[35]=be(' No items found matching "',-1)),c("strong",null,k(Gt.value),1),r[36]||(r[36]=be('" ',-1))],64)):Xe.value.priceRange&&Xe.value.priceRange.length>0?(O(),I(Ce,{key:2},[be(" No items match the selected price range. ")],64)):(O(),I(Ce,{key:3},[be(" No Menu available in this category. ")],64))]),c("button",{class:"btn btn-sm btn-outline-secondary rounded-pill",onClick:Xi},[...r[37]||(r[37]=[c("i",{class:"bi bi-arrow-clockwise me-1"},null,-1),be("Clear Filters ",-1)])])])])):se("",!0),Ni.value?(O(),I("div",Ux,[Di.value?(O(),I("div",Wx,[...r[40]||(r[40]=[c("div",{class:"spinner-border",role:"status",style:{color:"#1B1670",width:"3rem",height:"3rem","border-width":"0.3em"}},null,-1),c("div",{class:"mt-2 fw-semibold text-muted"},"Loading deals...",-1)])])):(O(),I(Ce,{key:1},[(O(!0),I(Ce,null,Ke(ss.value,u=>(O(),I("div",{class:"col-12 col-md-6 left-card cat-cards col-xl-6 d-flex",key:u.id},[c("div",Vx,[c("div",Hx,[c("img",{src:u.img,alt:"",class:"w-100 h-100",style:{"object-fit":"cover"}},null,8,zx),c("span",Kx,[r[41]||(r[41]=c("i",{class:"bi bi-gift-fill me-1"},null,-1)),be(" "+k(ce(n)(u.price)),1)])]),c("div",Yx,[c("div",null,[c("div",Gx,k(u.title),1),c("div",jx,[r[42]||(r[42]=c("small",{class:"text-muted fw-semibold d-block mb-1",style:{"font-size":"0.75rem"}},[c("i",{class:"bi bi-box-seam me-1"}),be("Includes: ")],-1)),c("div",Qx,[(O(!0),I(Ce,null,Ke(u.menu_items,m=>(O(),I("span",{key:m.id,class:"badge bg-light text-dark border",style:{"font-size":"1rem !important","font-weight":"500"}},k(m.name),1))),128))])])]),c("div",Xx,[c("button",{class:"btn btn-primary btn-sm w-75 mb-2",onClick:Ui(m=>Lo(u),["stop"])},[...r[43]||(r[43]=[c("i",{class:"bi bi-sliders me-1"},null,-1),be(" Customize Deal ",-1)])],8,Jx),c("div",{class:"d-flex align-items-center justify-content-start gap-2",onClick:r[4]||(r[4]=Ui(()=>{},["stop"]))},[c("button",{class:"qty-btn btn btn-outline-danger rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Ui(m=>Io(u),["stop"]),disabled:rs(u)<=0},[...r[44]||(r[44]=[c("strong",null,"−",-1)])],8,Zx),c("div",eA,k(rs(u)),1),c("button",{class:"qty-btn btn btn-outline-danger rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Ui(m=>ol(u),["stop"])},[...r[45]||(r[45]=[c("strong",null,"+",-1)])],8,tA)])])])])]))),128)),!Di.value&&ss.value.length===0?(O(),I("div",nA,[...r[46]||(r[46]=[c("div",{class:"alert alert-light border text-center rounded-4 py-5"},[c("i",{class:"bi bi-gift",style:{"font-size":"3rem",opacity:"0.3",color:"#dc3545"}}),c("h6",{class:"mt-3 mb-1 fw-bold"},"No Deals Available"),c("p",{class:"text-muted mb-0 small"},"Check back later for exciting deals!")],-1)])])):se("",!0)],64))])):(O(),I("div",iA,[(O(!0),I(Ce,null,Ke(As.value,u=>(O(),I("div",{class:"col-12 col-md-6 left-card cat-cards col-xl-6 d-flex",key:u.id},[c("div",{class:"card rounded-4 shadow-sm overflow-hidden border-3 w-100 d-flex flex-row align-items-stretch",style:Zr({borderColor:u.label_color||"#1B1670"})},[c("div",sA,[c("img",{src:u.img,alt:"",class:"w-100 h-100",style:{"object-fit":"cover"}},null,8,rA),u.variants&&u.variants.length>0?(O(),I("div",oA,[Se(u).minOriginal!==null?(O(),I("span",aA,k(ce(n)(Se(u).minOriginal)),1)):se("",!0),c("span",lA,k(ce(n)(Se(u).min))+" - ",1),Se(u).maxOriginal!==null?(O(),I("span",uA,k(ce(n)(Se(u).maxOriginal)),1)):se("",!0),c("span",cA,k(ce(n)(Se(u).max)),1)])):se("",!0),c("span",{class:"position-absolute top-0 start-0 m-1 px-2 py-1 rounded-pill text-white fw-semibold",style:Zr({background:u.label_color||"#1B1670",fontSize:"0.58rem",letterSpacing:"0.3px"})},[ln(te(u)||u,!!u.variants?.length)?(O(),I(Ce,{key:0},[c("span",dA,k(ce(n)(te(u)?.price||u.price)),1),c("span",fA,k(ce(n)(Rr(u))),1)],64)):(O(),I(Ce,{key:1},[be(k(ce(n)(te(u)?.price||u.price)),1)],64))],4),xn(u)<=0?(O(),I("span",pA," OUT OF STOCK ")):se("",!0)]),c("div",hA,[u.variants&&u.variants.length>0&&ln(te(u),!0)||(!u.variants||u.variants.length===0)&&ln(u,!1)?(O(),I("span",_A,k(u.variants&&u.variants.length>0?ln(te(u),!0).display:ln(u,!1).display),1)):se("",!0),c("div",null,[c("div",{class:"h5 fw-bold mb-2 menu-name",style:Zr({color:u.label_color||"#1B1670"})},k(u.title),5),u.variants&&u.variants.length>0?(O(),I("div",mA,[r[47]||(r[47]=c("label",{class:"form-label small fw-semibold mb-1"}," Variants: ",-1)),et(c("select",{"onUpdate:modelValue":m=>G.value[u.id]=m,class:"form-select form-select-sm variant-select",onChange:m=>ne(u,m),onClick:r[5]||(r[5]=Ui(()=>{},["stop"]))},[(O(!0),I(Ce,null,Ke(u.variants,m=>(O(),I("option",{key:m.id,value:m.id},[be(k(m.name)+" - "+k(ce(n)(m.price))+" ",1),m.is_saleable&&mt(m,!0)>0?(O(),I(Ce,{key:0},[be(" (Sale: "+k(ce(n)(mt(m,!0)))+") ",1)],64)):se("",!0)],8,gA))),128))],40,vA),[[qd,G.value[u.id]]])])):se("",!0),u.addon_groups&&u.addon_groups.length>0?(O(),I("div",bA,[(O(!0),I(Ce,null,Ke(u.addon_groups,m=>(O(),I("div",{key:m.group_id,class:"mb-3"},[c("label",yA,[be(k(m.group_name)+" ",1),m.max_select>0?(O(),I("span",wA," (Max "+k(m.max_select)+") ",1)):se("",!0)]),Nt(ce(cu),{modelValue:J.value[u.id]?.[m.group_id]||[],"onUpdate:modelValue":T=>N(u,m.group_id,T),options:m.addons,optionLabel:"name",dataKey:"id",placeholder:"Select addons",maxSelectedLabels:3,class:"w-100 addon-multiselect"},{value:uu(T=>[T.value&&T.value.length>0?(O(),I("div",EA,[(O(!0),I(Ce,null,Ke(T.value,_=>(O(),I("span",{key:_.id,class:"badge bg-primary"},k(_.name)+" +"+k(ce(n)(_.price)),1))),128))])):(O(),I("span",xA,k(T.placeholder),1))]),option:uu(T=>[c("div",AA,[c("span",null,k(T.option.name),1),c("span",TA," +"+k(ce(n)(T.option.price)),1)])]),_:1},8,["modelValue","onUpdate:modelValue","options"])]))),128))])):se("",!0),c("button",{class:"btn btn-primary btn-sm mb-2 view-details-btn",onClick:m=>Ei(u)}," Customization ",8,CA)]),c("div",{class:"mt-2 d-flex align-items-center justify-content-start gap-2",onClick:r[6]||(r[6]=Ui(()=>{},["stop"]))},[c("button",{class:"qty-btn btn btn-outline-secondary rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Ui(m=>el(u),["stop"]),disabled:Co(u)<=0},[...r[48]||(r[48]=[c("strong",null,"−",-1)])],8,SA),c("div",OA,k(Co(u)),1),c("button",{class:"qty-btn btn btn-outline-secondary rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Ui(m=>Za(u),["stop"])},[...r[49]||(r[49]=[c("strong",null,"+",-1)])],8,IA)])])],4)]))),128))]))]))],2),Be.value?se("",!0):(O(),I("div",DA,[c("div",{class:"col-12 d-flex align-items-center justify-content-end gap-2 mb-2"},[c("button",{class:"btn btn-warning px-3 py-2 promos-btn",onClick:Ya}," Promos "),c("button",{class:"btn btn-warning px-3 py-2 discount-btn",onClick:Ga}," Discounts ")]),c("div",NA,[c("div",kA,[c("div",LA,[(O(!0),I(Ce,null,Ke(At.value,(u,m)=>(O(),I("button",{key:m,class:tn(["ot-pill btn cart-header-buttons",{active:Ae.value===u}]),onClick:T=>Ae.value=u},k(u.replace(/_/g," ")),11,$A))),128)),r[50]||(r[50]=c("div",{class:"d-flex justify-content-between mb-3"},null,-1))])]),c("div",RA,[c("div",PA,[Ae.value==="Eat_in"?(O(),I("div",MA,[c("div",FA,[r[52]||(r[52]=c("label",{class:"form-label small"},"Table",-1)),et(c("select",{"onUpdate:modelValue":r[7]||(r[7]=u=>Pt.value=u),class:"form-select form-select-sm"},[r[51]||(r[51]=c("option",{value:null},"Select Table",-1)),(O(!0),I(Ce,null,Ke(Pn.value.table_details,(u,m)=>(O(),I("option",{key:m,value:u},k(u.name),9,BA))),128))],512),[[qd,Pt.value]]),ct.value.table_number?(O(),I("div",qA,k(ct.value.table_number[0]),1)):se("",!0)]),c("div",UA,[r[53]||(r[53]=c("label",{class:"form-label small"},"Customer",-1)),et(c("input",{"onUpdate:modelValue":r[8]||(r[8]=u=>rt.value=u),class:"form-control form-control-sm",placeholder:"Walk In"},null,512),[[Gn,rt.value]])])])):(O(),I("div",WA,[r[54]||(r[54]=c("label",{class:"form-label small"},"Customer",-1)),et(c("input",{"onUpdate:modelValue":r[9]||(r[9]=u=>rt.value=u),class:tn(["form-control form-control-sm",{"is-invalid":ct.value.customer}]),placeholder:"Walk In"},null,2),[[Gn,rt.value]]),ct.value.customer?(O(),I("div",VA,k(ct.value.customer[0]),1)):se("",!0)])),Ae.value==="Delivery"?(O(),I("div",HA,[r[55]||(r[55]=c("label",{class:"form-label small"},"Delivery Location",-1)),et(c("input",{"onUpdate:modelValue":r[10]||(r[10]=u=>Qe.value=u),class:"form-control form-control-sm",placeholder:"Enter delivery location"},null,512),[[Gn,Qe.value]]),ct.value.delivery_location?(O(),I("div",zA,k(ct.value.delivery_location[0]),1)):se("",!0),r[56]||(r[56]=c("label",{class:"form-label small mt-2"},"Phone Number",-1)),et(c("input",{"onUpdate:modelValue":r[11]||(r[11]=u=>an.value=u),class:"form-control form-control-sm",placeholder:"Enter phone number"},null,512),[[Gn,an.value]]),ct.value.phone_number?(O(),I("div",KA,k(ct.value.phone_number[0]),1)):se("",!0)])):se("",!0)]),c("div",YA,[W.value.length===0?(O(),I("div",GA," Add items from the left ")):se("",!0),(O(!0),I(Ce,null,Ke(W.value,(u,m)=>(O(),I("div",{key:u.title,class:"line"},[c("div",jA,[c("img",{src:u.img,alt:""},null,8,QA),c("div",XA,[c("div",{class:"name",title:u.title},k(u.title),9,JA),u.resale_discount_per_item>0?(O(),I("div",ZA,[c("span",eT,[r[57]||(r[57]=c("i",{class:"bi bi-tag-fill"},null,-1)),be(" Save "+k(ce(n)(u.resale_discount_per_item)),1)])])):se("",!0),u.addons&&u.addons.length>0?(O(),I("div",tT,[c("button",{class:"btn-link p-0 py-0 text-decoration-none",onClick:T=>tl(u,m),title:qt(u)},[r[58]||(r[58]=c("i",{class:"bi bi-plus-circle-fill text-primary me-1",style:{"font-size":"0.9rem"}},null,-1)),c("span",iT,k(u.addons.length)+" addon(s)",1)],8,nT)])):se("",!0),ja(u)?(O(),I("span",sT,[...r[59]||(r[59]=[c("i",{class:"bi bi-tag-fill"},null,-1)])])):se("",!0),u.variant_name?(O(),I("div",rT,[c("span",oT,k(u.variant_name),1)])):se("",!0),u.note?(O(),I("div",aT,k(u.note),1)):se("",!0)])]),c("div",lT,[c("div",uT,[c("button",{class:"qty-btn",onClick:T=>po(m)},"−",8,cT),c("div",dT,k(u.qty),1),c("button",{class:"qty-btn",onClick:T=>Fa(m)},"+",8,fT)]),c("div",pT,[c("div",hT,k(ce(n)(u.price)),1),c("button",{class:"del",onClick:T=>ho(m)},[...r[60]||(r[60]=[c("i",{class:"bi bi-trash"},null,-1)])],8,_T)])])]))),128))]),c("div",mT,[c("div",vT,[r[61]||(r[61]=c("span",null,"Sub Total",-1)),c("b",gT,k(ce(n)(jt.value)),1)]),Oi.value>0?(O(),I("div",bT,[r[62]||(r[62]=c("span",{class:"d-flex align-items-center gap-2"},[c("i",{class:"bi bi-receipt text-info"}),be(" Tax ")],-1)),c("b",yT,k(ce(n)(Oi.value)),1)])):se("",!0),Ai.value>0?(O(),I("div",wT,[r[63]||(r[63]=c("span",{class:"text-muted"},"Service Charges:",-1)),c("span",ET,k(ce(n)(Ai.value)),1)])):se("",!0),xi.value>0?(O(),I("div",xT,[r[64]||(r[64]=c("span",{class:"text-muted"},"Delivery Charges:",-1)),c("span",AT,k(ce(n)(xi.value)),1)])):se("",!0),ns.value>0?(O(),I("div",TT,[r[65]||(r[65]=c("span",{class:"d-flex align-items-center gap-2"},[c("span",{class:"text-danger"},"Sale Discount:")],-1)),c("b",CT,"-"+k(ce(n)(ns.value)),1)])):se("",!0),Me.value&&Me.value.length>0?(O(),I("div",ST,[c("div",OT,[c("div",IT,[r[66]||(r[66]=c("span",{class:"text-success"},"Promo Discount:",-1)),c("b",DT,"-"+k(ce(n)(qn.value)),1)])])])):se("",!0),Mt.value.length>0?(O(),I("div",NT,[r[68]||(r[68]=c("div",{class:"alert alert-warning py-2 px-3 mb-2"},[c("div",{class:"d-flex align-items-center gap-2"},[c("i",{class:"bi bi-clock-history"}),c("small",{class:"fw-semibold"},"Pending Approval")])],-1)),(O(!0),I(Ce,null,Ke(Mt.value,u=>(O(),I("div",{key:u.id,class:"trow"},[c("span",kT,[r[67]||(r[67]=c("i",{class:"bi bi-hourglass-split"},null,-1)),c("span",null,k(u.discountData?.name||"Discount")+" ("+k(u.percentage)+"%)",1)]),c("span",LT," -"+k(ce(n)(Cr(u.percentage))),1)]))),128)),r[69]||(r[69]=c("small",{class:"text-muted d-block mt-1 ms-4"},[c("i",{class:"bi bi-info-circle me-1"}),be(" Will apply after Super Admin approval ")],-1))])):se("",!0),_t.value.length>0?(O(),I("div",$T,[c("div",RT,[r[70]||(r[70]=c("div",{class:"d-flex align-items-center text-success gap-2"},[c("i",{class:"bi bi-check-circle"}),c("small",{class:"fw-semibold"},"Approved Discounts"),c("i",{class:"bi bi-info-circle text-muted",tabindex:"0",role:"button","data-bs-toggle":"popover","data-bs-trigger":"click","data-bs-html":"true","data-bs-placement":"top","data-bs-container":"body","data-bs-content":"Auto-updates with cart changes<br>Approved Discounts"})],-1)),c("b",PT,"-"+k(ce(n)(Os.value)),1)])])):se("",!0),c("div",MT,[r[71]||(r[71]=c("span",null,"Total",-1)),c("b",null,k(ce(n)(is.value)),1)])]),c("div",FT,[r[72]||(r[72]=c("label",{for:"frontNote",class:"form-label small fw-semibold"},"Front Note",-1)),et(c("textarea",{id:"frontNote","onUpdate:modelValue":r[12]||(r[12]=u=>Ti.value=u),rows:"3",class:"form-control form-control-sm rounded-3",placeholder:"Enter front note..."},null,512),[[Gn,Ti.value]])]),c("div",BT,[r[73]||(r[73]=c("label",{for:"kitchenNote",class:"form-label small fw-semibold"},"Kitchen Note",-1)),et(c("textarea",{id:"kitchenNote","onUpdate:modelValue":r[13]||(r[13]=u=>ni.value=u),rows:"3",class:"form-control form-control-sm rounded-3",placeholder:"Enter kitchen note..."},null,512),[[Gn,ni.value]])])]),c("div",qT,[c("button",{class:"btn btn-secondary btn-clear",onClick:r[14]||(r[14]=u=>mo())}," Clear "),c("button",{class:"btn btn-primary btn-place",onClick:Ua}," Place Order ")])])]))])]),c("div",UT,[c("div",WT,[c("div",VT,[c("div",HT,[c("div",null,[c("h5",zT,k(_e.value?.title||"Choose Item"),1),r[74]||(r[74]=c("p",{class:"text-muted small mb-0",style:{"font-size":"0.8rem"}},"Customize your order",-1))]),r[75]||(r[75]=c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])],-1))]),c("div",KT,[c("div",YT,[r[76]||(r[76]=c("div",{class:"stepper-progress-bg"},null,-1)),c("div",{class:"stepper-progress-fill",style:Zr({width:lt.value})},null,4),(O(!0),I(Ce,null,Ke(ft.value,(u,m)=>(O(),I("div",{key:u.id,class:"stepper-step text-center"},[c("div",{class:tn(["stepper-circle stepper-circle-sm",Ye(m+1)])},[m+1<fe.value?(O(),I("i",GT)):(O(),I("span",jT,k(m+1),1))],2),c("small",{class:tn(["stepper-label",{"stepper-label-active":m+1===fe.value}]),style:{"font-size":"0.7rem","margin-top":"4px",display:"block"}},k(u.name),3)]))),128))])]),c("div",QT,[c("div",XT,[c("div",JT,[c("div",ZT,[c("img",{src:_e.value?.image_url||_e.value?.img||"/assets/img/product/product29.jpg",class:"img-fluid rounded-3 w-100 object-fit-cover",style:{height:"200px","object-fit":"cover"},alt:"Product"},null,8,eC),ht()&&ln(ht(),!0)?(O(),I("span",tC,[r[77]||(r[77]=c("i",{class:"bi bi-tag-fill me-1"},null,-1)),be(" "+k(ln(ht(),!0).display),1)])):se("",!0)]),c("div",nC,[r[81]||(r[81]=c("div",{class:"d-flex align-items-center mb-2"},[c("i",{class:"bi bi-receipt me-2 text-primary",style:{"font-size":"1rem"}}),c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Price Breakdown")],-1)),c("div",iC,[r[78]||(r[78]=c("span",{class:"text-muted"},"Base Price",-1)),c("strong",null,k(ce(n)(Et())),1)]),Rt()>0?(O(),I("div",sC,[r[79]||(r[79]=c("span",{class:"text-muted"},"Add-ons",-1)),c("strong",rC,"+ "+k(ce(n)(Rt())),1)])):se("",!0),r[82]||(r[82]=c("hr",{class:"my-2"},null,-1)),c("div",oC,[r[80]||(r[80]=c("span",{class:"fw-bold"},"Total",-1)),c("span",aC,k(ce(n)(Pr())),1)])])]),c("div",lC,[c("div",uC,[et(c("div",cC,[r[84]||(r[84]=c("div",{class:"d-flex align-items-start mb-2"},[c("i",{class:"bi bi-grid-3x3-gap me-2 text-primary",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Choose Variant ")])],-1)),c("div",dC,[(O(!0),I(Ce,null,Ke(_e.value?.variants,u=>(O(),I("div",{key:u.id,class:"col-12"},[c("div",{class:tn(["border rounded-3 p-2 shadow-sm variant-card",Bn.value===u.id?"border-primary bg-light":""]),onClick:m=>wn(u.id),style:{cursor:"pointer"}},[c("div",pC,[c("div",null,[c("h6",hC,k(u.name),1)]),c("div",_C,[Bn.value===u.id?(O(),I("div",mC,[...r[83]||(r[83]=[c("i",{class:"bi bi-check-circle-fill",style:{"font-size":"1rem"}},null,-1)])])):se("",!0),c("strong",vC,k(ce(n)(u.price)),1)])])],10,fC)]))),128))])],512),[[Vi,fe.value===1&&Fe.value]]),et(c("div",gC,[r[85]||(r[85]=c("div",{class:"d-flex align-items-start mb-2"},[c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Remove Ingredients")])],-1)),c("div",bC,[(O(!0),I(Ce,null,Ke(B(),u=>(O(),I("div",{key:u.id||u.inventory_item_id,class:"col-md-6"},[c("div",{class:tn(["d-flex align-items-center p-2 border rounded-2 shadow-sm",{"bg-light text-muted":Q(u.id||u.inventory_item_id)}])},[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"16px",height:"16px"},id:"ingredient-"+(u.id||u.inventory_item_id),checked:!Q(u.id||u.inventory_item_id),disabled:!Q(u.id||u.inventory_item_id)&&Oe()===1,onChange:m=>ue(u.id||u.inventory_item_id)},null,40,yC),c("label",{for:"ingredient-"+(u.id||u.inventory_item_id),class:"form-check-label",style:{"font-size":"0.8rem"}},k(u.product_name||u.name),9,wC)],2)]))),128))])],512),[[Vi,fe.value===2&&st.value]]),et(c("div",EC,[r[86]||(r[86]=c("div",{class:"d-flex align-items-start mb-2"},[c("i",{class:"bi bi-plus-circle me-2 text-success",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Add Add-ons "),c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}},"Enhance your meal")])],-1)),(O(!0),I(Ce,null,Ke(_e.value?.addon_groups,u=>(O(),I("div",{key:u.group_id,class:"mb-3"},[c("label",xC,[c("span",null,k(u.group_name),1),u.max_select>0?(O(),I("span",AC," Max "+k(u.max_select),1)):se("",!0)]),Nt(ce(cu),{modelValue:Tt.value[u.group_id]||[],"onUpdate:modelValue":m=>on(u.group_id,m),options:u.addons,optionLabel:"name",dataKey:"id",placeholder:"Select add-ons",maxSelectedLabels:2,class:"w-100",appendTo:"self"},null,8,["modelValue","onUpdate:modelValue","options"])]))),128))],512),[[Vi,fe.value===3&&We.value]]),et(c("div",TC,[r[93]||(r[93]=c("div",{class:"d-flex align-items-start mb-2"},[c("i",{class:"bi bi-cart-check me-2 text-success",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Review Your Order"),c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}},"Confirm selections")])],-1)),c("div",CC,[r[90]||(r[90]=c("h6",{class:"fw-bold mb-2 text-secondary"},"Order Summary",-1)),Fe.value?(O(),I("div",SC,[r[87]||(r[87]=c("span",{class:"summary-label"},"Variant:",-1)),c("span",OC,k(pt()),1)])):se("",!0),M.value.length>0?(O(),I("div",IC,[r[88]||(r[88]=c("span",{class:"summary-label"},"Removed:",-1)),c("span",DC,k(Ie()),1)])):se("",!0),Ms()>0?(O(),I("div",NC,[r[89]||(r[89]=c("span",{class:"summary-label"},"Add-ons:",-1)),c("span",kC,k(Jn()),1)])):se("",!0)]),c("div",LC,[r[91]||(r[91]=c("label",{class:"me-3 fw-semibold",style:{"font-size":"0.85rem"}},"Quantity:",-1)),c("div",$C,[c("button",{class:"qty-btn",onClick:qa,disabled:tt.value<=1},"−",8,RC),c("div",PC,k(tt.value),1),c("button",{class:"qty-btn",onClick:Ba},"+")])]),c("div",MC,[r[92]||(r[92]=c("label",{class:"fw-semibold mb-1",style:{"font-size":"0.85rem"}},[c("i",{class:"bi bi-chat-left-text me-1"}),be(" Kitchen Note (Optional) ")],-1)),et(c("textarea",{"onUpdate:modelValue":r[15]||(r[15]=u=>Tn.value=u),class:"form-control form-control-sm rounded-2 shadow-sm",rows:"2",maxlength:"200",placeholder:"Special instructions...",style:{"font-size":"0.8rem"}},null,512),[[Gn,Tn.value]]),c("div",FC,k(Tn.value?.length||0)+"/200 ",1)])],512),[[Vi,fe.value===$t.value]])])])])]),c("div",BC,[fe.value>1?(O(),I("button",{key:0,class:"btn btn-light btn-sm px-4 py-2 shadow-sm",onClick:yn},[...r[94]||(r[94]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),be("Back ",-1)])])):se("",!0),fe.value<$t.value?(O(),I("button",{key:1,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:wt},[...r[95]||(r[95]=[be(" Next ",-1),c("i",{class:"bi bi-arrow-right ms-1"},null,-1)])])):(O(),I("button",{key:2,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:Er},[...r[96]||(r[96]=[c("i",{class:"bi bi-cart-plus me-1"},null,-1),be("Add to Cart ",-1)])]))])])])]),c("div",qC,[c("div",UC,[c("div",WC,[c("div",VC,[c("div",null,[c("h5",HC,k(Ne.value?.title||"Customize Deal"),1),c("p",zC," Customizing "+k(Ze.value?.name||"item")+" ("+k(ke.value+1)+" of "+k(Ne.value?.menu_items?.length||0)+") ",1)]),r[97]||(r[97]=c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])],-1))]),c("div",KC,[c("div",YC,[r[98]||(r[98]=c("div",{class:"stepper-progress-bg"},null,-1)),c("div",{class:"stepper-progress-fill",style:Zr({width:Do.value})},null,4),(O(!0),I(Ce,null,Ke(In.value,(u,m)=>(O(),I("div",{key:u.id,class:"stepper-step text-center"},[c("div",{class:tn(["stepper-circle stepper-circle-sm",No(m+1)])},[m+1<Ve.value?(O(),I("i",GC)):(O(),I("span",jC,k(m+1),1))],2),c("small",{class:tn(["stepper-label",{"stepper-label-active":m+1===Ve.value}]),style:{"font-size":"0.7rem","margin-top":"4px",display:"block"}},k(u.name),3)]))),128))])]),c("div",QC,[c("div",XC,[c("div",JC,[c("div",ZC,[c("img",{src:Ne.value?.img||"/assets/img/product/product29.jpg",class:"img-fluid rounded-3 w-100 object-fit-cover",style:{height:"200px","object-fit":"cover"},alt:"Deal"},null,8,eS),c("span",tS,[Dn.value>parseFloat(Ne.value?.price||0)?(O(),I("span",nS,[r[99]||(r[99]=be(" Deal: ",-1)),c("del",null,k(ce(n)(Ne.value?.price||0)),1),be(" "+k(ce(n)(Dn.value)),1)])):(O(),I("span",iS," Deal: "+k(ce(n)(Ne.value?.price||0)),1))])]),c("div",sS,[c("h6",rS,[Nt(ce(Ud),{class:"me-2 text-primary w-4"}),r[100]||(r[100]=be(" Currently Customizing ",-1))]),c("div",oS,[c("div",aS,[c("strong",null,k(Ze.value?.name),1),c("div",lS," Base Price: "+k(ce(n)(Ze.value?.price||0)),1),gt.value>0?(O(),I("div",uS," + "+k(ce(n)(gt.value))+" (Add-ons) ",1)):se("",!0),c("div",cS," Total: "+k(ce(n)(ko.value)),1)])])]),c("div",dS,[r[101]||(r[101]=c("h6",{class:"fw-bold mb-2",style:{"font-size":"0.9rem"}},[c("i",{class:"bi bi-list-check me-2 text-success"}),be(" Items in Deal ")],-1)),c("div",fS,[(O(!0),I(Ce,null,Ke(Ne.value?.menu_items,(u,m)=>(O(),I("div",{key:m,class:"list-group-item px-0 py-2 border-0"},[c("div",pS,[cn.value.includes(m)?(O(),I("i",hS)):m===ke.value?(O(),Mb(ce(Ud),{key:1,class:"text-primary me-2 w-4"})):(O(),I("i",_S)),c("small",{class:tn({"fw-bold":m===ke.value})},k(u.name),3)])]))),128))])])]),c("div",mS,[c("div",vS,[et(c("div",gS,[c("div",bS,[r[103]||(r[103]=c("i",{class:"bi bi-dash-circle me-2 text-warning",style:{"font-size":"1.1rem"}},null,-1)),c("div",null,[c("h6",yS," Remove Ingredients from "+k(Ze.value?.name),1),r[102]||(r[102]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Uncheck ingredients you don't want ",-1))])]),c("div",wS,[(O(!0),I(Ce,null,Ke(Bs(),u=>(O(),I("div",{key:u.id,class:"col-md-6"},[c("div",{class:tn(["d-flex align-items-center p-2 border rounded-2 shadow-sm",{"bg-light text-muted":Mr(u.id)}])},[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"16px",height:"16px"},id:"deal-ingredient-"+u.id,checked:!Mr(u.id),disabled:!Mr(u.id)&&ul()===1,onChange:m=>ll(u.id)},null,40,ES),c("label",{for:"deal-ingredient-"+u.id,class:"form-check-label",style:{"font-size":"0.8rem"}},k(u.product_name||u.name),9,xS)],2)]))),128))])],512),[[Vi,Ve.value===1&&ot.value]]),et(c("div",AS,[c("div",TS,[r[105]||(r[105]=c("i",{class:"bi bi-plus-circle me-2 text-success",style:{"font-size":"1.1rem"}},null,-1)),c("div",null,[c("h6",CS," Add Add-ons to "+k(Ze.value?.name),1),r[104]||(r[104]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Enhance this item (charges may apply) ",-1))])]),(O(!0),I(Ce,null,Ke(Ze.value?.addon_groups,u=>(O(),I("div",{key:u.group_id,class:"mb-3"},[c("label",SS,[c("span",null,k(u.group_name),1),u.max_select>0?(O(),I("span",OS," Max "+k(u.max_select),1)):se("",!0)]),Nt(ce(cu),{modelValue:St.value[ke.value]?.[u.group_id]||[],"onUpdate:modelValue":m=>Li(u.group_id,m),options:u.addons,optionLabel:"name",dataKey:"id",placeholder:"Select add-ons",maxSelectedLabels:2,class:"w-100",appendTo:"self"},null,8,["modelValue","onUpdate:modelValue","options"])]))),128))],512),[[Vi,Ve.value===2&&ki.value]]),et(c("div",IS,[c("div",DS,[Nt(ce(Yb),{class:"me-2 text-primary w-5",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",NS," Review "+k(Ze.value?.name),1),r[106]||(r[106]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Confirm your customizations ",-1))])]),c("div",kS,[r[113]||(r[113]=c("h6",{class:"fw-bold mb-2 text-secondary"},"Customization Summary",-1)),c("div",LS,[r[107]||(r[107]=c("span",{class:"summary-label"},"Item:",-1)),c("span",$S,k(Ze.value?.name),1)]),c("div",RS,[r[108]||(r[108]=c("span",{class:"summary-label"},"Base Price:",-1)),c("span",PS,k(ce(n)(Ze.value?.price||0)),1)]),qs()?(O(),I("div",MS,[r[109]||(r[109]=c("span",{class:"summary-label"},"Removed:",-1)),c("span",FS,k(qs()),1)])):se("",!0),cl()>0?(O(),I("div",BS,[r[110]||(r[110]=c("span",{class:"summary-label"},"Add-ons:",-1)),c("span",qS,k(dl()),1)])):se("",!0),gt.value>0?(O(),I("div",US,[r[111]||(r[111]=c("span",{class:"summary-label"},"Add-ons Cost:",-1)),c("span",WS," + "+k(ce(n)(gt.value)),1)])):se("",!0),c("div",VS,[r[112]||(r[112]=c("span",{class:"summary-label fw-bold"},"Item Total:",-1)),c("span",HS,k(ce(n)(ko.value)),1)])]),c("div",zS,[c("label",KS,[r[114]||(r[114]=c("i",{class:"bi bi-chat-left-text me-1"},null,-1)),be(" Kitchen Note for "+k(Ze.value?.name)+" (Optional) ",1)]),et(c("textarea",{"onUpdate:modelValue":r[16]||(r[16]=u=>Vn.value[ke.value]=u),class:"form-control form-control-sm rounded-2 shadow-sm",rows:"2",maxlength:"200",placeholder:"Special instructions for this item...",style:{"font-size":"0.8rem"}},"                                    ",512),[[Gn,Vn.value[ke.value]]]),c("div",YS,k((Vn.value[ke.value]||"").length)+"/200 ",1)])],512),[[Vi,Ve.value===os.value]])])])])]),c("div",GS,[c("div",jS,[Ve.value>1?(O(),I("button",{key:0,class:"btn btn-secondary btn-sm px-4 py-2 shadow-sm",onClick:Us},[...r[115]||(r[115]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),be("Back ",-1)])])):se("",!0),Ve.value<os.value?(O(),I("button",{key:1,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:Hn},[...r[116]||(r[116]=[be(" Next ",-1),c("i",{class:"bi bi-arrow-right ms-1"},null,-1)])])):al.value?(O(),I("button",{key:3,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:pl},[...r[118]||(r[118]=[c("i",{class:"bi bi-cart-plus me-1"},null,-1),be("Add Deal to Cart ",-1)])])):(O(),I("button",{key:2,class:"btn btn-success btn-sm px-4 py-2 shadow-sm",onClick:fl},[...r[117]||(r[117]=[c("i",{class:"bi bi-check2 me-1"},null,-1),be("Next Item ",-1)])]))])])])])]),c("div",QS,[c("div",XS,[c("div",JS,[r[129]||(r[129]=c("div",{class:"modal-header border-0 pb-2"},[c("h5",{class:"modal-title fw-bold"},[c("i",{class:"bi bi-puzzle-fill text-primary me-2"}),be(" Manage Add-ons ")]),c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])])],-1)),Je.value?(O(),I("div",ZS,[c("div",eO,[c("div",tO,[c("img",{src:Je.value.img,alt:"",class:"rounded",style:{width:"60px",height:"60px","object-fit":"cover"}},null,8,nO),c("div",iO,[c("div",sO,k(Je.value.title),1),c("div",rO,[c("small",oO,[r[119]||(r[119]=c("i",{class:"bi bi-tag me-1"},null,-1)),r[120]||(r[120]=be(" Base Price: ",-1)),c("span",aO,k(ce(n)(Je.value?.unit_price-Dr(W.value[Un.value]||{addons:[]}))),1)]),c("small",lO,[r[121]||(r[121]=c("i",{class:"bi bi-box me-1"},null,-1)),r[122]||(r[122]=be(" Quantity: ",-1)),c("span",uO,k(Je.value.qty),1)])])])])]),Je.value.addons&&Je.value.addons.length>0?(O(),I("div",cO,[c("table",dO,[r[125]||(r[125]=c("thead",{class:"table-light"},[c("tr",null,[c("th",{style:{width:"60px"},class:"text-center"},"Select"),c("th",null,"Items"),c("th",{style:{width:"120px"},class:"text-center"},"Price"),c("th",{style:{width:"200px"},class:"text-center"},"Quantity")])],-1)),c("tbody",null,[(O(!0),I(Ce,null,Ke(Je.value.addons,u=>(O(),I("tr",{key:u.id,class:tn({"table-active":u.selected!==!1})},[c("td",fO,[c("div",pO,[c("input",{type:"checkbox",class:"form-check-input",checked:u.selected!==!1,onChange:m=>nt(u),style:{width:"22px",height:"22px",cursor:"pointer"}},null,40,hO)])]),c("td",null,[c("div",_O,[c("div",{class:tn(["addon-status-indicator",u.selected!==!1?"bg-success":"bg-secondary"])},null,2),c("div",null,[c("div",mO,k(u.name),1),u.group_name?(O(),I("small",vO,k(u.group_name),1)):se("",!0)])])]),c("td",gO,[c("span",bO," +"+k(ce(n)(u.price)),1)]),c("td",null,[c("div",yO,[c("button",{class:"btn btn-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px"},onClick:m=>ai(u),disabled:!u.selected||(u.quantity||1)<=1},[...r[123]||(r[123]=[c("i",{class:"bi bi-dash-lg"},null,-1)])],8,wO),c("span",EO,k(u.quantity||1),1),c("button",{class:"btn btn-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px"},onClick:m=>Ir(u),disabled:!u.selected},[...r[124]||(r[124]=[c("i",{class:"bi bi-plus-lg"},null,-1)])],8,xO)])])],2))),128))])])])):(O(),I("div",AO,[...r[126]||(r[126]=[c("i",{class:"bi bi-inbox",style:{"font-size":"3rem",opacity:"0.3"}},null,-1),c("p",{class:"mb-0 mt-3 fw-semibold"},"No add-ons available for this item",-1)])])),c("div",TO,[Ms()>0?(O(),I("div",CO,[c("small",SO,[r[127]||(r[127]=c("i",{class:"bi bi-check-circle-fill me-1"},null,-1)),be(" "+k(Ms())+" add-on(s) selected • Add-ons Total: "+k(ce(n)(Dr(Je.value))),1)])])):se("",!0)])])):se("",!0),c("div",{class:"modal-footer border-0 pt-0 bg-light"},[r[128]||(r[128]=c("button",{type:"button",class:"btn btn-secondary px-2 py-2","data-bs-dismiss":"modal"}," Cancel ",-1)),c("button",{type:"button",class:"btn btn-primary px-2 py-2",onClick:Nr}," Save ")])])])]),Nt(Wb,{show:Sr.value,kot:Si.value,loading:Or.value,onClose:r[17]||(r[17]=u=>Sr.value=!1),onStatusUpdated:za},null,8,["show","kot","loading"]),Nt(qb,{show:xr.value,order:Ci.value,money:_o,onClose:r[18]||(r[18]=u=>xr.value=!1)},null,8,["show","order"]),Nt(Bb,{show:Cs.value,customer:rt.value,"delivery-location":Qe.value,phone:an.value,"order-type":Ae.value,"selected-table":Pt.value,"order-items":W.value,"grand-total":is.value,money:_o,cashReceived:Ar.value,"onUpdate:cashReceived":r[19]||(r[19]=u=>Ar.value=u),client_secret:l.client_secret,order_code:l.order_code,"sub-total":jt.value,tax:Oi.value,"service-charges":Ai.value,"delivery-charges":xi.value,"promo-discount":qn.value,"promo-id":Me.value?.id,"promo-name":Me.value?.name,"promo-type":Me.value?.type,"promo-discount-amount":qn.value,note:Ti.value,"kitchen-note":ni.value,"order-date":new Date().toISOString().split("T")[0],"order-time":new Date().toTimeString().split(" ")[0],"payment-method":Wa.value,change:Ss.value,onClose:r[20]||(r[20]=u=>Cs.value=!1),onConfirm:Ha,appliedPromos:Ja.value,"approved-discounts":Os.value,"approved-discount-details":_t.value.map(u=>({discount_id:u.id,discount_name:u.name,discount_percentage:u.percentage,discount_amount:Cr(u.percentage),approval_id:u.approval_id}))},null,8,["show","customer","delivery-location","phone","order-type","selected-table","order-items","grand-total","cashReceived","client_secret","order_code","sub-total","tax","service-charges","delivery-charges","promo-discount","promo-id","promo-name","promo-type","promo-discount-amount","note","kitchen-note","order-date","order-time","payment-method","change","appliedPromos","approved-discounts","approved-discount-details"]),Nt(Hb,{show:On.value,orders:Ns.value,onClose:r[21]||(r[21]=u=>On.value=!1),onViewDetails:Qa,loading:ks.value},null,8,["show","orders","loading"]),Nt(Ub,{show:es.value,loading:Ls.value,promos:Rs.value,"order-items":W.value,onApplyPromo:To,onClose:r[22]||(r[22]=u=>es.value=!1)},null,8,["show","loading","promos","order-items"]),Nt(Kb,{show:ts.value,discounts:Ps.value,"order-items":W.value,loading:$s.value,"applied-discounts":_t.value,"rejected-discounts":Ji.value,onClose:r[23]||(r[23]=u=>ts.value=!1),onApplyDiscount:yo,onClearDiscount:Eo},null,8,["show","discounts","order-items","loading","applied-discounts","rejected-discounts"]),Nt(hx,{show:Sn.value,"missing-ingredients":Ft.value,onClose:r[24]||(r[24]=u=>{Sn.value=!1,xo.value=null}),onConfirm:Ao},null,8,["show","missing-ingredients"])])]),_:1})],64))}},iI=Lb(OO,[["__scopeId","data-v-4c178ad7"]]);export{iI as default};
