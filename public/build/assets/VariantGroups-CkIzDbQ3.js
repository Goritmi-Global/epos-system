import{_ as q,r as u,o as z,n as R,c as T,a as A,b as o,d as E,e as g,f as e,u as _,h as Z,g as n,F as x,i as F,j as p,k as K,t as i,m as k,v as V,p as G,l as y,C as X,q as C,s as d}from"./app-V2s1lVwu.js";import{_ as Y}from"./Master-WElJ1C4A.js";import{s as H}from"./index-MBvvLjiN.js";import{L as J,C as Q}from"./layers-Dg8Qiie-.js";import{C as W}from"./circle-check-big-aK5XXc8q.js";import{C as ee}from"./circle-x-IjGY2f6Z.js";import{P as te}from"./plus-BKVyIOGe.js";import{P as se}from"./pencil-Wnn9pGcO.js";import"./index-DoagSzzV.js";import"./createLucideIcon-Coq8DOvK.js";import"./index-Cak9KJ6C.js";import"./index-DzFuXtkm.js";import"./sun-DZ5FTXo1.js";import"./index-BkYT2TiQ.js";import"./index-BF4Ii756.js";const ae={class:"page-wrapper"},oe={class:"row g-3 mb-4"},le={class:"card border-0 shadow-sm rounded-4"},ne={class:"card-body d-flex align-items-center"},re={class:"mb-0 fw-bold"},ie={class:"text-muted mb-0 small"},de={class:"card border-0 shadow-lg rounded-4"},ue={class:"card-body"},ce={class:"d-flex flex-wrap gap-2 justify-content-between align-items-center mb-3"},pe={class:"d-flex flex-wrap gap-2 align-items-center"},me={class:"search-wrap"},ve={key:1,class:"form-control search-input rounded-pill",placeholder:"Search groups...",disabled:"",type:"text"},ge={class:"table-responsive"},be={class:"table table-striped"},fe={key:0},he={class:"fw-semibold"},_e={class:"badge bg-secondary px-3 py-2 rounded-pill"},xe={class:"text-center"},ye={class:"text-center"},Ce={class:"d-inline-flex align-items-center gap-3"},we=["onClick"],ke=["title"],Ve={key:2},Ge={class:"modal fade",id:"variantGroupModal",tabindex:"-1","aria-hidden":"true"},Me={class:"modal-dialog modal-lg modal-dialog-centered"},Se={class:"modal-content rounded-4"},Be={class:"modal-header"},Ie={class:"modal-title fw-semibold"},Te={class:"modal-body"},Ae={class:"row g-3"},Ee={class:"col-12"},Fe={key:0,class:"text-danger"},$e={class:"col-12"},Le={key:0,class:"text-danger"},Ne={class:"col-12"},je={key:0,class:"text-danger"},De={class:"mt-4"},Pe=["disabled"],Ue={__name:"VariantGroups",setup(Oe){const c=u([]),l=u({name:"",min_select:1,max_select:1,description:"",status:"active",sort_order:0}),m=u(null),b=u(!1),f=u(!1),r=u({}),$=[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],M=async()=>{f.value=!0;try{const s=await C.get("/api/variant-groups/all");c.value=s.data.data}catch(s){console.error("Failed to fetch variant groups:",s),d.error("Failed to load variant groups")}finally{f.value=!1}};z(async()=>{v.value="",S.value=Date.now(),await R(),setTimeout(()=>{B.value=!0;const s=document.getElementById(w);s&&(s.value="",v.value="")},100),M()});const L=T(()=>[{label:"Total Groups",value:c.value.length,icon:J,iconBg:"bg-light-primary",iconColor:"text-primary"},{label:"Active Groups",value:c.value.filter(s=>s.status==="active").length,icon:W,iconBg:"bg-light-success",iconColor:"text-success"},{label:"Inactive Groups",value:c.value.filter(s=>s.status==="inactive").length,icon:ee,iconBg:"bg-light-danger",iconColor:"text-danger"},{label:"Total Variants",value:c.value.reduce((s,t)=>s+(t.variants_count||0),0),icon:Q,iconBg:"bg-light-warning",iconColor:"text-warning"}]),v=u(""),S=u(Date.now()),w=`search-${Math.random().toString(36).substr(2,9)}`,B=u(!1),I=T(()=>{const s=v.value.trim().toLowerCase();return s?c.value.filter(t=>t.name.toLowerCase().includes(s)):c.value}),N=s=>{s.target.setAttribute("autocomplete","off")},h=()=>{l.value={name:"",min_select:1,max_select:1,description:"",status:"active",sort_order:0},m.value=null,r.value={}},j=s=>{m.value=s,l.value={name:s.name,min_select:s.min_select,max_select:s.max_select,description:s.description||"",status:s.status,sort_order:s.sort_order||0};const t=document.getElementById("variantGroupModal");new bootstrap.Modal(t).show()},D=async()=>{if(l.value.min_select>l.value.max_select){d.error("Minimum select cannot be greater than maximum select");return}if(l.value.min_select<0){d.error("Minimum select cannot be negative");return}if(l.value.max_select<1){d.error("Maximum select must be at least 1");return}b.value=!0,r.value={};try{m.value?(await C.post(`/api/variant-groups/${m.value.id}`,l.value),d.success("Variant group updated successfully")):(await C.post("/api/variant-groups",l.value),d.success("Variant group created successfully")),bootstrap.Modal.getInstance(document.getElementById("variantGroupModal"))?.hide(),h(),await M()}catch(s){if(console.error("âŒ Error:",s.response?.data||s.message),s.response?.status===422&&s.response?.data?.errors){r.value=s.response.data.errors;const t=Object.values(s.response.data.errors).flat();d.error(t.join(`
`))}else{const t=s.response?.data?.message||"Failed to save variant group";d.error(t)}}finally{b.value=!1}},P=async s=>{const t=s.status==="active"?"inactive":"active";try{await C.patch(`/api/variant-groups/${s.id}/toggle-status`,{status:t}),s.status=t,d.success(`Status changed to ${t}`)}catch(a){console.error("Failed to update status:",a),d.error("Failed to update status")}};return(s,t)=>(o(),A(Y,null,{default:E(()=>[g(_(Z),{title:"Variant Groups"}),e("div",ae,[t[17]||(t[17]=e("h4",{class:"fw-semibold mb-3"},"Variant Groups Management",-1)),e("div",oe,[(o(!0),n(x,null,F(L.value,a=>(o(),n("div",{key:a.label,class:"col-md-6 col-xl-3"},[e("div",le,[e("div",ne,[e("div",{class:p([[a.iconBg,a.iconColor],"rounded-circle p-3 d-flex align-items-center justify-content-center me-3"]),style:{width:"56px",height:"56px"}},[(o(),A(K(a.icon),{class:"w-6 h-6"}))],2),e("div",null,[e("h3",re,i(a.value),1),e("p",ie,i(a.label),1)])])])]))),128))]),e("div",de,[e("div",ue,[e("div",ce,[t[7]||(t[7]=e("h5",{class:"mb-0 fw-semibold"},"Variant Groups",-1)),e("div",pe,[e("div",me,[t[4]||(t[4]=e("i",{class:"bi bi-search"},null,-1)),t[5]||(t[5]=e("input",{type:"email",name:"email",autocomplete:"email",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px"},tabindex:"-1","aria-hidden":"true"},null,-1)),B.value?k((o(),n("input",{id:w,"onUpdate:modelValue":t[0]||(t[0]=a=>v.value=a),key:S.value,class:"form-control search-input rounded-pill",placeholder:"Search groups...",type:"search",autocomplete:"new-password",name:w,role:"presentation",onFocus:N},null,32)),[[V,v.value]]):(o(),n("input",ve))]),e("button",{"data-bs-toggle":"modal","data-bs-target":"#variantGroupModal",onClick:h,class:"d-flex align-items-center gap-1 px-4 py-2 rounded-pill btn btn-primary text-white"},[g(_(te),{class:"w-4 h-4"}),t[6]||(t[6]=G(" Add Group ",-1))])])]),e("div",ge,[e("table",be,[t[10]||(t[10]=e("thead",{class:"border-top small text-muted"},[e("tr",null,[e("th",null,"S.#"),e("th",null,"Name"),e("th",null,"Variants Count"),e("th",{class:"text-center"},"Status"),e("th",{class:"text-center"},"Action")])],-1)),e("tbody",null,[f.value?(o(),n("tr",fe,[...t[8]||(t[8]=[e("td",{colspan:"7",class:"text-center py-4"},[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")])],-1)])])):(o(!0),n(x,{key:1},F(I.value,(a,U)=>(o(),n("tr",{key:a.id},[e("td",null,i(U+1),1),e("td",he,i(a.name),1),e("td",null,[e("span",_e,i(a.variants_count||0)+" variants ",1)]),e("td",xe,[e("span",{class:p(a.status==="active"?"badge bg-success px-4 py-2 rounded-pill":"badge bg-danger px-4 py-2 rounded-pill")},i(a.status==="active"?"Active":"Inactive"),3)]),e("td",ye,[e("div",Ce,[e("button",{onClick:O=>j(a),title:"Edit",class:"p-2 rounded-full text-blue-600 hover:bg-blue-100"},[g(_(se),{class:"w-4 h-4"})],8,we),g(X,{title:"Confirm Status Change",message:`Are you sure you want to set ${a.name} to ${a.status==="active"?"Inactive":"Active"}?`,showStatusButton:!0,confirmText:"Yes, Change",cancelText:"Cancel",status:a.status,onConfirm:O=>P(a)},{trigger:E(()=>[e("button",{class:p(["relative inline-flex items-center w-8 h-4 rounded-full transition-colors duration-300 focus:outline-none",a.status==="active"?"bg-green-500 hover:bg-green-600":"bg-red-400 hover:bg-red-500"]),title:a.status==="active"?"Set Inactive":"Set Active"},[e("span",{class:p(["absolute left-0.5 top-0.5 w-3 h-3 bg-white rounded-full shadow transform transition-transform duration-300",a.status==="active"?"translate-x-4":"translate-x-0"])},null,2)],10,ke)]),_:2},1032,["message","status","onConfirm"])])])]))),128)),!f.value&&I.value.length===0?(o(),n("tr",Ve,[...t[9]||(t[9]=[e("td",{colspan:"7",class:"text-center text-muted py-4"}," No variant groups found. ",-1)])])):y("",!0)])])])])]),e("div",Ge,[e("div",Me,[e("div",Se,[e("div",Be,[e("h5",Ie,i(m.value?"Edit Variant Group":"Add New Variant Group"),1),e("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110",onClick:h,"data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[...t[11]||(t[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Te,[e("div",Ae,[e("div",Ee,[t[12]||(t[12]=e("label",{class:"form-label"},"Group Name",-1)),k(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>l.value.name=a),type:"text",class:p(["form-control",{"is-invalid":r.value.name}]),placeholder:"e.g., Size, Temperature, Crust Type"},null,2),[[V,l.value.name]]),r.value.name?(o(),n("small",Fe,i(r.value.name[0]),1)):y("",!0)]),e("div",$e,[t[13]||(t[13]=e("label",{class:"form-label"},"Status",-1)),g(_(H),{modelValue:l.value.status,"onUpdate:modelValue":t[2]||(t[2]=a=>l.value.status=a),options:$,optionLabel:"label",optionValue:"value",class:p(["form-select",{"is-invalid":r.value.status}]),appendTo:"self",autoZIndex:!0,baseZIndex:2e3},null,8,["modelValue","class"]),r.value.status?(o(),n("small",Le,i(r.value.status[0]),1)):y("",!0)]),e("div",Ne,[t[14]||(t[14]=e("label",{class:"form-label"},"Description (Optional)",-1)),k(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=a=>l.value.description=a),class:p(["form-control",{"is-invalid":r.value.description}]),rows:"3",placeholder:"Enter group description..."},null,2),[[V,l.value.description]]),r.value.description?(o(),n("small",je,i(r.value.description[0]),1)):y("",!0)])]),e("div",De,[e("button",{class:"btn btn-primary rounded-pill px-4",disabled:b.value,onClick:D},[b.value?(o(),n(x,{key:0},[t[15]||(t[15]=e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),t[16]||(t[16]=G(" Saving... ",-1))],64)):(o(),n(x,{key:1},[G(i((m.value,"Save")),1)],64))],8,Pe),e("button",{class:"btn btn-secondary rounded-pill px-4 ms-2","data-bs-dismiss":"modal",onClick:h}," Cancel ")])])])])])])]),_:1}))}},ot=q(Ue,[["__scopeId","data-v-6dd8689b"]]);export{ot as default};
