import{_ as k,r as p,C as g,g as u,o as l,b as e,f as m,F as j,v as B,e as O,n as b,t as _,c as A,B as E,A as F,m as h}from"./app-CYEkE9GK.js";import L from"./Step1-DOxAgzbO.js";import M from"./Step2-CHareAJu.js";import T from"./Step3-C5OeNC_h.js";import z from"./Step4-XdLNFn_r.js";import P from"./Step5-Bzzkfwzn.js";import V from"./Step6-OZlVyZRK.js";import $ from"./Step7-CvQs1l5f.js";import I from"./Step8-Ct3S8zLv.js";import N from"./Step9-C-EX29Hn.js";import"./index-CxspGS8A.js";import"./index-CFvNnlhZ.js";import"./isValidPhoneNumber-2-_3nWfh.js";import"./useFormatters-BBfJnlDF.js";const R={class:"settings-wrapper"},H={class:"row g-4"},U={class:"col-lg-3"},q={class:"settings-sidebar"},G={class:"settings-nav shadow-sm rounded-4 p-3"},J={class:"nav nav-pills flex-column gap-1"},K=["onClick"],Q={class:"flex-grow-1"},W={class:"fw-semibold small"},X={class:"col-lg-9"},Y={class:"card shadow-sm border-0 rounded-4"},Z={class:"card-header border-0 p-4"},ee={class:"d-flex align-items-start gap-3"},te={class:"icon-wrapper"},se={class:"flex-grow-1"},oe={class:"mb-1 fw-bold"},ie={class:"text-muted small mb-0"},ae={class:"card-body p-4 settings-content"},ne={class:"card-footer bg-light border-0 p-4"},re={class:"d-flex justify-content-between align-items-center"},le=["disabled"],ce={key:0},de={key:1},pe={__name:"SoftwareSetting",props:{profile:Object,profileData:Object},setup(y){const a=y,o=p(1),c=p({}),d=p(!1),i=p({...a.profileData.step1,...a.profileData.step2,...a.profileData.step3,...a.profileData.step4,...a.profileData.step5,...a.profileData.step6,...a.profileData.step7,...a.profileData.step8,...a.profileData.step9});console.log("Merged profile on init:",i.value);const f=[{id:1,title:"Language & Location",icon:"bi-globe",description:"Set your timezone, language, and regional preferences"},{id:2,title:"Business Information",icon:"bi-building",description:"Update restaurant name, contact details, and address"},{id:3,title:"Currency & Locale",icon:"bi-currency-dollar",description:"Configure currency, number and date formats"},{id:4,title:"Tax & VAT",icon:"bi-receipt",description:"Manage tax registration and rates"},{id:5,title:"Service Options",icon:"bi-cart-check",description:"Configure order types and table management"},{id:6,title:"Receipt & Printers",icon:"bi-printer",description:"Customize receipts and printer settings"},{id:7,title:"Payment Methods",icon:"bi-credit-card",description:"Enable and configure payment options"},{id:8,title:"Business Hours",icon:"bi-clock",description:"Set your operating hours"},{id:9,title:"Optional Features",icon:"bi-gear",description:"Additional features and settings"}],S={1:L,2:M,3:T,4:z,5:P,6:V,7:$,8:I,9:N},x=g(()=>(console.log("Current section:",o.value),console.log("Component name:",S[o.value]?.__name),S[o.value])),v=g(()=>f.find(t=>t.id===o.value));g(()=>o.value/f.length*100);const w=t=>{Object.assign(i.value,t?.data||{})};async function C(){c.value={},d.value=!0;try{let t,s={};o.value===2&&i.value.logo_file||o.value===6&&i.value.receipt_logo_file?(t=new FormData,Object.keys(i.value).forEach(r=>{i.value[r]!==null&&i.value[r]!==void 0&&t.append(r,i.value[r])}),s.headers={"Content-Type":"multipart/form-data"}):t=i.value;const{data:n}=await F.post(`/settings/update/${o.value}`,t,s);Object.assign(i.value,n.data||{}),h.success("Settings updated successfully!")}catch(t){t?.response?.status===422&&t.response.data?.errors?(c.value=t.response.data.errors,h.error("Please fix the validation errors.")):(h.error(t.response?.data?.message||"An unexpected error occurred."),console.error(t))}finally{d.value=!1}}function D(t){console.log("Changing to section:",t),c.value={},o.value=t,console.log("Current section after change:",o.value)}return(t,s)=>(l(),u("div",R,[s[5]||(s[5]=e("div",{class:"settings-header mb-4 px-2"},[e("div",{class:"d-flex justify-content-between align-items-center"},[e("div",null,[e("h3",{class:"fw-bold mb-1"},"Restaurant Settings")])])],-1)),e("div",H,[e("div",U,[e("div",q,[e("div",G,[s[1]||(s[1]=e("div",{class:"d-flex align-items-center justify-content-between mb-3 pb-2 border-bottom"},[e("h6",{class:"text-muted text-uppercase small fw-bold mb-0"},[e("i",{class:"bi bi-gear-fill me-2"}),m(" Settings ")])],-1)),e("ul",J,[(l(),u(j,null,B(f,n=>e("li",{key:n.id,class:"nav-item"},[e("a",{class:b(["nav-link d-flex align-items-center gap-2 py-2 px-3",{active:o.value===n.id}]),onClick:O(r=>D(n.id),["prevent"]),href:"#",role:"button"},[e("i",{class:b(n.icon)},null,2),e("div",Q,[e("div",W,_(n.title),1)]),s[0]||(s[0]=e("i",{class:"bi bi-chevron-right small opacity-50"},null,-1))],10,K)])),64))])])])]),e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[e("i",{class:b([v.value?.icon,"fs-3"])},null,2)]),e("div",se,[e("h5",oe,_(v.value?.title),1),e("p",ie,_(v.value?.description),1)])])]),e("div",ae,[(l(),A(E(x.value),{key:o.value,model:i.value,"form-errors":c.value,onSave:w},null,40,["model","form-errors"]))]),e("div",ne,[e("div",re,[s[4]||(s[4]=e("small",{class:"text-muted"},[e("i",{class:"bi bi-info-circle me-1"}),m(" Changes will be saved immediately ")],-1)),e("button",{class:"btn btn-primary px-4 rounded-pill",onClick:C,disabled:d.value},[d.value?(l(),u("span",ce,[...s[2]||(s[2]=[e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),m(" Saving... ",-1)])])):(l(),u("span",de,[...s[3]||(s[3]=[e("i",{class:"bi bi-check-circle me-2"},null,-1),m(" Save Changes ",-1)])]))],8,le)])])])])])]))}},ke=k(pe,[["__scopeId","data-v-6972e274"]]);export{ke as default};
