import{b5 as Fa,w as Fr,c as me,m as ct,l as Q,ae as pr,g as N,b as I,f as c,p as ge,t as D,F as Ve,i as ht,_ as Iy,o as bs,n as Tu,r as B,A as Oy,z as Ny,s as W,e as sn,u as be,h as ky,d as Dy,a as jd,j as yt,v as Yn,y as Mr,K as To,T as Ly}from"./app-DFa9wJfT.js";import{_ as $y}from"./Master-Blz5Sgk_.js";import Qd from"./ConfirmOrderModal-BMMXuScO.js";import Py from"./ReceiptModal-BvdlKtB5.js";import Ry from"./PromoModal-COmufQ7x.js";import My from"./KotModal-D8IT8I7X.js";import{u as Fy}from"./useFormatters-B_Oq-Qyw.js";import qy from"./PosOrdersModal-Cow_HvSo.js";import{F as By}from"./FilterModal-DH26WM9s.js";import Wy from"./DiscountModal-BMA7keiZ.js";import Uy from"./PendingOrdersModal-BAxTPHt5.js";import Hy from"./UnpaidOrdersModal-Dz3uH9EB.js";import{P as Xd}from"./pencil-BrP7vlBH.js";import{E as Vy}from"./eye-DHewRv6H.js";import"./index-DKTP6ctL.js";import"./createLucideIcon-4LHIASzF.js";import"./PasswordVerificationModal-CIm5aGet.js";import"./index-V7bpXnBA.js";import"./index-obOPNEdp.js";import"./sun-GYtCXPyF.js";import"./StripePayment-Bqp5oTAI.js";import"./SplitPayment-W22hl5BL.js";import"./Receipt-ClEJraxV.js";import"./clock-CFT_VIpI.js";import"./circle-check-big-Y4OsE84b.js";import"./circle-x-trXv7DOv.js";import"./printer-Bkdp49Hr.js";var Ut="top",yn="bottom",bn="right",Ht="left",Za="auto",$s=[Ut,yn,bn,Ht],Ur="start",Ss="end",Rf="clippingParents",Qu="viewport",xs="popper",Mf="reference",Hu=$s.reduce(function(u,n){return u.concat([n+"-"+Ur,n+"-"+Ss])},[]),Xu=[].concat($s,[Za]).reduce(function(u,n){return u.concat([n,n+"-"+Ur,n+"-"+Ss])},[]),Ff="beforeRead",qf="read",Bf="afterRead",Wf="beforeMain",Uf="main",Hf="afterMain",Vf="beforeWrite",zf="write",Kf="afterWrite",Gf=[Ff,qf,Bf,Wf,Uf,Hf,Vf,zf,Kf];function gi(u){return u?(u.nodeName||"").toLowerCase():null}function wn(u){if(u==null)return window;if(u.toString()!=="[object Window]"){var n=u.ownerDocument;return n&&n.defaultView||window}return u}function Hr(u){var n=wn(u).Element;return u instanceof n||u instanceof Element}function kn(u){var n=wn(u).HTMLElement;return u instanceof n||u instanceof HTMLElement}function Ju(u){if(typeof ShadowRoot>"u")return!1;var n=wn(u).ShadowRoot;return u instanceof n||u instanceof ShadowRoot}function zy(u){var n=u.state;Object.keys(n.elements).forEach(function(r){var f=n.styles[r]||{},v=n.attributes[r]||{},b=n.elements[r];!kn(b)||!gi(b)||(Object.assign(b.style,f),Object.keys(v).forEach(function(E){var S=v[E];S===!1?b.removeAttribute(E):b.setAttribute(E,S===!0?"":S)}))})}function Ky(u){var n=u.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow),function(){Object.keys(n.elements).forEach(function(f){var v=n.elements[f],b=n.attributes[f]||{},E=Object.keys(n.styles.hasOwnProperty(f)?n.styles[f]:r[f]),S=E.reduce(function(C,U){return C[U]="",C},{});!kn(v)||!gi(v)||(Object.assign(v.style,S),Object.keys(b).forEach(function(C){v.removeAttribute(C)}))})}}const Zu={name:"applyStyles",enabled:!0,phase:"write",fn:zy,effect:Ky,requires:["computeStyles"]};function vi(u){return u.split("-")[0]}var Wr=Math.max,ja=Math.min,Is=Math.round;function Vu(){var u=navigator.userAgentData;return u!=null&&u.brands&&Array.isArray(u.brands)?u.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function Yf(){return!/^((?!chrome|android).)*safari/i.test(Vu())}function Os(u,n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var f=u.getBoundingClientRect(),v=1,b=1;n&&kn(u)&&(v=u.offsetWidth>0&&Is(f.width)/u.offsetWidth||1,b=u.offsetHeight>0&&Is(f.height)/u.offsetHeight||1);var E=Hr(u)?wn(u):window,S=E.visualViewport,C=!Yf()&&r,U=(f.left+(C&&S?S.offsetLeft:0))/v,L=(f.top+(C&&S?S.offsetTop:0))/b,H=f.width/v,J=f.height/b;return{width:H,height:J,top:L,right:U+H,bottom:L+J,left:U,x:U,y:L}}function ec(u){var n=Os(u),r=u.offsetWidth,f=u.offsetHeight;return Math.abs(n.width-r)<=1&&(r=n.width),Math.abs(n.height-f)<=1&&(f=n.height),{x:u.offsetLeft,y:u.offsetTop,width:r,height:f}}function jf(u,n){var r=n.getRootNode&&n.getRootNode();if(u.contains(n))return!0;if(r&&Ju(r)){var f=n;do{if(f&&u.isSameNode(f))return!0;f=f.parentNode||f.host}while(f)}return!1}function Wi(u){return wn(u).getComputedStyle(u)}function Gy(u){return["table","td","th"].indexOf(gi(u))>=0}function mr(u){return((Hr(u)?u.ownerDocument:u.document)||window.document).documentElement}function el(u){return gi(u)==="html"?u:u.assignedSlot||u.parentNode||(Ju(u)?u.host:null)||mr(u)}function Jd(u){return!kn(u)||Wi(u).position==="fixed"?null:u.offsetParent}function Yy(u){var n=/firefox/i.test(Vu()),r=/Trident/i.test(Vu());if(r&&kn(u)){var f=Wi(u);if(f.position==="fixed")return null}var v=el(u);for(Ju(v)&&(v=v.host);kn(v)&&["html","body"].indexOf(gi(v))<0;){var b=Wi(v);if(b.transform!=="none"||b.perspective!=="none"||b.contain==="paint"||["transform","perspective"].indexOf(b.willChange)!==-1||n&&b.willChange==="filter"||n&&b.filter&&b.filter!=="none")return v;v=v.parentNode}return null}function $o(u){for(var n=wn(u),r=Jd(u);r&&Gy(r)&&Wi(r).position==="static";)r=Jd(r);return r&&(gi(r)==="html"||gi(r)==="body"&&Wi(r).position==="static")?n:r||Yy(u)||n}function tc(u){return["top","bottom"].indexOf(u)>=0?"x":"y"}function No(u,n,r){return Wr(u,ja(n,r))}function jy(u,n,r){var f=No(u,n,r);return f>r?r:f}function Qf(){return{top:0,right:0,bottom:0,left:0}}function Xf(u){return Object.assign({},Qf(),u)}function Jf(u,n){return n.reduce(function(r,f){return r[f]=u,r},{})}var Qy=function(n,r){return n=typeof n=="function"?n(Object.assign({},r.rects,{placement:r.placement})):n,Xf(typeof n!="number"?n:Jf(n,$s))};function Xy(u){var n,r=u.state,f=u.name,v=u.options,b=r.elements.arrow,E=r.modifiersData.popperOffsets,S=vi(r.placement),C=tc(S),U=[Ht,bn].indexOf(S)>=0,L=U?"height":"width";if(!(!b||!E)){var H=Qy(v.padding,r),J=ec(b),K=C==="y"?Ut:Ht,te=C==="y"?yn:bn,G=r.rects.reference[L]+r.rects.reference[C]-E[C]-r.rects.popper[L],ie=E[C]-r.rects.reference[C],oe=$o(b),$e=oe?C==="y"?oe.clientHeight||0:oe.clientWidth||0:0,Ie=G/2-ie/2,fe=H[K],ae=$e-J[L]-H[te],xe=$e/2-J[L]/2+Ie,Oe=No(fe,xe,ae),Be=C;r.modifiersData[f]=(n={},n[Be]=Oe,n.centerOffset=Oe-xe,n)}}function Jy(u){var n=u.state,r=u.options,f=r.element,v=f===void 0?"[data-popper-arrow]":f;v!=null&&(typeof v=="string"&&(v=n.elements.popper.querySelector(v),!v)||jf(n.elements.popper,v)&&(n.elements.arrow=v))}const Zf={name:"arrow",enabled:!0,phase:"main",fn:Xy,effect:Jy,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ns(u){return u.split("-")[1]}var Zy={top:"auto",right:"auto",bottom:"auto",left:"auto"};function eb(u,n){var r=u.x,f=u.y,v=n.devicePixelRatio||1;return{x:Is(r*v)/v||0,y:Is(f*v)/v||0}}function Zd(u){var n,r=u.popper,f=u.popperRect,v=u.placement,b=u.variation,E=u.offsets,S=u.position,C=u.gpuAcceleration,U=u.adaptive,L=u.roundOffsets,H=u.isFixed,J=E.x,K=J===void 0?0:J,te=E.y,G=te===void 0?0:te,ie=typeof L=="function"?L({x:K,y:G}):{x:K,y:G};K=ie.x,G=ie.y;var oe=E.hasOwnProperty("x"),$e=E.hasOwnProperty("y"),Ie=Ht,fe=Ut,ae=window;if(U){var xe=$o(r),Oe="clientHeight",Be="clientWidth";if(xe===wn(r)&&(xe=mr(r),Wi(xe).position!=="static"&&S==="absolute"&&(Oe="scrollHeight",Be="scrollWidth")),xe=xe,v===Ut||(v===Ht||v===bn)&&b===Ss){fe=yn;var ke=H&&xe===ae&&ae.visualViewport?ae.visualViewport.height:xe[Oe];G-=ke-f.height,G*=C?1:-1}if(v===Ht||(v===Ut||v===yn)&&b===Ss){Ie=bn;var He=H&&xe===ae&&ae.visualViewport?ae.visualViewport.width:xe[Be];K-=He-f.width,K*=C?1:-1}}var Ze=Object.assign({position:S},U&&Zy),bt=L===!0?eb({x:K,y:G},wn(r)):{x:K,y:G};if(K=bt.x,G=bt.y,C){var Ne;return Object.assign({},Ze,(Ne={},Ne[fe]=$e?"0":"",Ne[Ie]=oe?"0":"",Ne.transform=(ae.devicePixelRatio||1)<=1?"translate("+K+"px, "+G+"px)":"translate3d("+K+"px, "+G+"px, 0)",Ne))}return Object.assign({},Ze,(n={},n[fe]=$e?G+"px":"",n[Ie]=oe?K+"px":"",n.transform="",n))}function tb(u){var n=u.state,r=u.options,f=r.gpuAcceleration,v=f===void 0?!0:f,b=r.adaptive,E=b===void 0?!0:b,S=r.roundOffsets,C=S===void 0?!0:S,U={placement:vi(n.placement),variation:Ns(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:v,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,Zd(Object.assign({},U,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:E,roundOffsets:C})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,Zd(Object.assign({},U,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:C})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}const nc={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:tb,data:{}};var qa={passive:!0};function nb(u){var n=u.state,r=u.instance,f=u.options,v=f.scroll,b=v===void 0?!0:v,E=f.resize,S=E===void 0?!0:E,C=wn(n.elements.popper),U=[].concat(n.scrollParents.reference,n.scrollParents.popper);return b&&U.forEach(function(L){L.addEventListener("scroll",r.update,qa)}),S&&C.addEventListener("resize",r.update,qa),function(){b&&U.forEach(function(L){L.removeEventListener("scroll",r.update,qa)}),S&&C.removeEventListener("resize",r.update,qa)}}const ic={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:nb,data:{}};var ib={left:"right",right:"left",bottom:"top",top:"bottom"};function Ka(u){return u.replace(/left|right|bottom|top/g,function(n){return ib[n]})}var rb={start:"end",end:"start"};function ef(u){return u.replace(/start|end/g,function(n){return rb[n]})}function rc(u){var n=wn(u),r=n.pageXOffset,f=n.pageYOffset;return{scrollLeft:r,scrollTop:f}}function sc(u){return Os(mr(u)).left+rc(u).scrollLeft}function sb(u,n){var r=wn(u),f=mr(u),v=r.visualViewport,b=f.clientWidth,E=f.clientHeight,S=0,C=0;if(v){b=v.width,E=v.height;var U=Yf();(U||!U&&n==="fixed")&&(S=v.offsetLeft,C=v.offsetTop)}return{width:b,height:E,x:S+sc(u),y:C}}function ob(u){var n,r=mr(u),f=rc(u),v=(n=u.ownerDocument)==null?void 0:n.body,b=Wr(r.scrollWidth,r.clientWidth,v?v.scrollWidth:0,v?v.clientWidth:0),E=Wr(r.scrollHeight,r.clientHeight,v?v.scrollHeight:0,v?v.clientHeight:0),S=-f.scrollLeft+sc(u),C=-f.scrollTop;return Wi(v||r).direction==="rtl"&&(S+=Wr(r.clientWidth,v?v.clientWidth:0)-b),{width:b,height:E,x:S,y:C}}function oc(u){var n=Wi(u),r=n.overflow,f=n.overflowX,v=n.overflowY;return/auto|scroll|overlay|hidden/.test(r+v+f)}function ep(u){return["html","body","#document"].indexOf(gi(u))>=0?u.ownerDocument.body:kn(u)&&oc(u)?u:ep(el(u))}function ko(u,n){var r;n===void 0&&(n=[]);var f=ep(u),v=f===((r=u.ownerDocument)==null?void 0:r.body),b=wn(f),E=v?[b].concat(b.visualViewport||[],oc(f)?f:[]):f,S=n.concat(E);return v?S:S.concat(ko(el(E)))}function zu(u){return Object.assign({},u,{left:u.x,top:u.y,right:u.x+u.width,bottom:u.y+u.height})}function ab(u,n){var r=Os(u,!1,n==="fixed");return r.top=r.top+u.clientTop,r.left=r.left+u.clientLeft,r.bottom=r.top+u.clientHeight,r.right=r.left+u.clientWidth,r.width=u.clientWidth,r.height=u.clientHeight,r.x=r.left,r.y=r.top,r}function tf(u,n,r){return n===Qu?zu(sb(u,r)):Hr(n)?ab(n,r):zu(ob(mr(u)))}function lb(u){var n=ko(el(u)),r=["absolute","fixed"].indexOf(Wi(u).position)>=0,f=r&&kn(u)?$o(u):u;return Hr(f)?n.filter(function(v){return Hr(v)&&jf(v,f)&&gi(v)!=="body"}):[]}function ub(u,n,r,f){var v=n==="clippingParents"?lb(u):[].concat(n),b=[].concat(v,[r]),E=b[0],S=b.reduce(function(C,U){var L=tf(u,U,f);return C.top=Wr(L.top,C.top),C.right=ja(L.right,C.right),C.bottom=ja(L.bottom,C.bottom),C.left=Wr(L.left,C.left),C},tf(u,E,f));return S.width=S.right-S.left,S.height=S.bottom-S.top,S.x=S.left,S.y=S.top,S}function tp(u){var n=u.reference,r=u.element,f=u.placement,v=f?vi(f):null,b=f?Ns(f):null,E=n.x+n.width/2-r.width/2,S=n.y+n.height/2-r.height/2,C;switch(v){case Ut:C={x:E,y:n.y-r.height};break;case yn:C={x:E,y:n.y+n.height};break;case bn:C={x:n.x+n.width,y:S};break;case Ht:C={x:n.x-r.width,y:S};break;default:C={x:n.x,y:n.y}}var U=v?tc(v):null;if(U!=null){var L=U==="y"?"height":"width";switch(b){case Ur:C[U]=C[U]-(n[L]/2-r[L]/2);break;case Ss:C[U]=C[U]+(n[L]/2-r[L]/2);break}}return C}function ks(u,n){n===void 0&&(n={});var r=n,f=r.placement,v=f===void 0?u.placement:f,b=r.strategy,E=b===void 0?u.strategy:b,S=r.boundary,C=S===void 0?Rf:S,U=r.rootBoundary,L=U===void 0?Qu:U,H=r.elementContext,J=H===void 0?xs:H,K=r.altBoundary,te=K===void 0?!1:K,G=r.padding,ie=G===void 0?0:G,oe=Xf(typeof ie!="number"?ie:Jf(ie,$s)),$e=J===xs?Mf:xs,Ie=u.rects.popper,fe=u.elements[te?$e:J],ae=ub(Hr(fe)?fe:fe.contextElement||mr(u.elements.popper),C,L,E),xe=Os(u.elements.reference),Oe=tp({reference:xe,element:Ie,placement:v}),Be=zu(Object.assign({},Ie,Oe)),ke=J===xs?Be:xe,He={top:ae.top-ke.top+oe.top,bottom:ke.bottom-ae.bottom+oe.bottom,left:ae.left-ke.left+oe.left,right:ke.right-ae.right+oe.right},Ze=u.modifiersData.offset;if(J===xs&&Ze){var bt=Ze[v];Object.keys(He).forEach(function(Ne){var Ct=[bn,yn].indexOf(Ne)>=0?1:-1,an=[Ut,yn].indexOf(Ne)>=0?"y":"x";He[Ne]+=bt[an]*Ct})}return He}function cb(u,n){n===void 0&&(n={});var r=n,f=r.placement,v=r.boundary,b=r.rootBoundary,E=r.padding,S=r.flipVariations,C=r.allowedAutoPlacements,U=C===void 0?Xu:C,L=Ns(f),H=L?S?Hu:Hu.filter(function(te){return Ns(te)===L}):$s,J=H.filter(function(te){return U.indexOf(te)>=0});J.length===0&&(J=H);var K=J.reduce(function(te,G){return te[G]=ks(u,{placement:G,boundary:v,rootBoundary:b,padding:E})[vi(G)],te},{});return Object.keys(K).sort(function(te,G){return K[te]-K[G]})}function db(u){if(vi(u)===Za)return[];var n=Ka(u);return[ef(u),n,ef(n)]}function fb(u){var n=u.state,r=u.options,f=u.name;if(!n.modifiersData[f]._skip){for(var v=r.mainAxis,b=v===void 0?!0:v,E=r.altAxis,S=E===void 0?!0:E,C=r.fallbackPlacements,U=r.padding,L=r.boundary,H=r.rootBoundary,J=r.altBoundary,K=r.flipVariations,te=K===void 0?!0:K,G=r.allowedAutoPlacements,ie=n.options.placement,oe=vi(ie),$e=oe===ie,Ie=C||($e||!te?[Ka(ie)]:db(ie)),fe=[ie].concat(Ie).reduce(function(Pn,Et){return Pn.concat(vi(Et)===Za?cb(n,{placement:Et,boundary:L,rootBoundary:H,padding:U,flipVariations:te,allowedAutoPlacements:G}):Et)},[]),ae=n.rects.reference,xe=n.rects.popper,Oe=new Map,Be=!0,ke=fe[0],He=0;He<fe.length;He++){var Ze=fe[He],bt=vi(Ze),Ne=Ns(Ze)===Ur,Ct=[Ut,yn].indexOf(bt)>=0,an=Ct?"width":"height",wt=ks(n,{placement:Ze,boundary:L,rootBoundary:H,altBoundary:J,padding:U}),et=Ct?Ne?bn:Ht:Ne?yn:Ut;ae[an]>xe[an]&&(et=Ka(et));var Te=Ka(et),En=[];if(b&&En.push(wt[bt]<=0),S&&En.push(wt[et]<=0,wt[Te]<=0),En.every(function(Pn){return Pn})){ke=Ze,Be=!1;break}Oe.set(Ze,En)}if(Be)for(var Vt=te?3:1,Tt=function(Et){var xn=fe.find(function(Hi){var Dt=Oe.get(Hi);if(Dt)return Dt.slice(0,Et).every(function(Rn){return Rn})});if(xn)return ke=xn,"break"},yi=Vt;yi>0;yi--){var dt=Tt(yi);if(dt==="break")break}n.placement!==ke&&(n.modifiersData[f]._skip=!0,n.placement=ke,n.reset=!0)}}const np={name:"flip",enabled:!0,phase:"main",fn:fb,requiresIfExists:["offset"],data:{_skip:!1}};function nf(u,n,r){return r===void 0&&(r={x:0,y:0}),{top:u.top-n.height-r.y,right:u.right-n.width+r.x,bottom:u.bottom-n.height+r.y,left:u.left-n.width-r.x}}function rf(u){return[Ut,bn,yn,Ht].some(function(n){return u[n]>=0})}function pb(u){var n=u.state,r=u.name,f=n.rects.reference,v=n.rects.popper,b=n.modifiersData.preventOverflow,E=ks(n,{elementContext:"reference"}),S=ks(n,{altBoundary:!0}),C=nf(E,f),U=nf(S,v,b),L=rf(C),H=rf(U);n.modifiersData[r]={referenceClippingOffsets:C,popperEscapeOffsets:U,isReferenceHidden:L,hasPopperEscaped:H},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":L,"data-popper-escaped":H})}const ip={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:pb};function hb(u,n,r){var f=vi(u),v=[Ht,Ut].indexOf(f)>=0?-1:1,b=typeof r=="function"?r(Object.assign({},n,{placement:u})):r,E=b[0],S=b[1];return E=E||0,S=(S||0)*v,[Ht,bn].indexOf(f)>=0?{x:S,y:E}:{x:E,y:S}}function _b(u){var n=u.state,r=u.options,f=u.name,v=r.offset,b=v===void 0?[0,0]:v,E=Xu.reduce(function(L,H){return L[H]=hb(H,n.rects,b),L},{}),S=E[n.placement],C=S.x,U=S.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=C,n.modifiersData.popperOffsets.y+=U),n.modifiersData[f]=E}const rp={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:_b};function vb(u){var n=u.state,r=u.name;n.modifiersData[r]=tp({reference:n.rects.reference,element:n.rects.popper,placement:n.placement})}const ac={name:"popperOffsets",enabled:!0,phase:"read",fn:vb,data:{}};function mb(u){return u==="x"?"y":"x"}function gb(u){var n=u.state,r=u.options,f=u.name,v=r.mainAxis,b=v===void 0?!0:v,E=r.altAxis,S=E===void 0?!1:E,C=r.boundary,U=r.rootBoundary,L=r.altBoundary,H=r.padding,J=r.tether,K=J===void 0?!0:J,te=r.tetherOffset,G=te===void 0?0:te,ie=ks(n,{boundary:C,rootBoundary:U,padding:H,altBoundary:L}),oe=vi(n.placement),$e=Ns(n.placement),Ie=!$e,fe=tc(oe),ae=mb(fe),xe=n.modifiersData.popperOffsets,Oe=n.rects.reference,Be=n.rects.popper,ke=typeof G=="function"?G(Object.assign({},n.rects,{placement:n.placement})):G,He=typeof ke=="number"?{mainAxis:ke,altAxis:ke}:Object.assign({mainAxis:0,altAxis:0},ke),Ze=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,bt={x:0,y:0};if(xe){if(b){var Ne,Ct=fe==="y"?Ut:Ht,an=fe==="y"?yn:bn,wt=fe==="y"?"height":"width",et=xe[fe],Te=et+ie[Ct],En=et-ie[an],Vt=K?-Be[wt]/2:0,Tt=$e===Ur?Oe[wt]:Be[wt],yi=$e===Ur?-Be[wt]:-Oe[wt],dt=n.elements.arrow,Pn=K&&dt?ec(dt):{width:0,height:0},Et=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:Qf(),xn=Et[Ct],Hi=Et[an],Dt=No(0,Oe[wt],Pn[wt]),Rn=Ie?Oe[wt]/2-Vt-Dt-xn-He.mainAxis:Tt-Dt-xn-He.mainAxis,Fs=Ie?-Oe[wt]/2+Vt+Dt+Hi+He.mainAxis:yi+Dt+Hi+He.mainAxis,Qn=n.elements.arrow&&$o(n.elements.arrow),Vi=Qn?fe==="y"?Qn.clientTop||0:Qn.clientLeft||0:0,br=(Ne=Ze?.[fe])!=null?Ne:0,St=et+Rn-br-Vi,bi=et+Fs-br,Mn=No(K?ja(Te,St):Te,et,K?Wr(En,bi):En);xe[fe]=Mn,bt[fe]=Mn-et}if(S){var zt,wi=fe==="x"?Ut:Ht,qs=fe==="x"?yn:bn,It=xe[ae],ft=ae==="y"?"height":"width",Ot=It+ie[wi],_e=It-ie[qs],Ye=[Ut,Ht].indexOf(oe)!==-1,nt=(zt=Ze?.[ae])!=null?zt:0,xt=Ye?Ot:It-Oe[ft]-Be[ft]-nt+He.altAxis,Xn=Ye?It+Oe[ft]+Be[ft]-nt-He.altAxis:_e,Lt=K&&Ye?jy(xt,It,Xn):No(K?xt:Ot,It,K?Xn:_e);xe[ae]=Lt,bt[ae]=Lt-It}n.modifiersData[f]=bt}}const sp={name:"preventOverflow",enabled:!0,phase:"main",fn:gb,requiresIfExists:["offset"]};function yb(u){return{scrollLeft:u.scrollLeft,scrollTop:u.scrollTop}}function bb(u){return u===wn(u)||!kn(u)?rc(u):yb(u)}function wb(u){var n=u.getBoundingClientRect(),r=Is(n.width)/u.offsetWidth||1,f=Is(n.height)/u.offsetHeight||1;return r!==1||f!==1}function Eb(u,n,r){r===void 0&&(r=!1);var f=kn(n),v=kn(n)&&wb(n),b=mr(n),E=Os(u,v,r),S={scrollLeft:0,scrollTop:0},C={x:0,y:0};return(f||!f&&!r)&&((gi(n)!=="body"||oc(b))&&(S=bb(n)),kn(n)?(C=Os(n,!0),C.x+=n.clientLeft,C.y+=n.clientTop):b&&(C.x=sc(b))),{x:E.left+S.scrollLeft-C.x,y:E.top+S.scrollTop-C.y,width:E.width,height:E.height}}function xb(u){var n=new Map,r=new Set,f=[];u.forEach(function(b){n.set(b.name,b)});function v(b){r.add(b.name);var E=[].concat(b.requires||[],b.requiresIfExists||[]);E.forEach(function(S){if(!r.has(S)){var C=n.get(S);C&&v(C)}}),f.push(b)}return u.forEach(function(b){r.has(b.name)||v(b)}),f}function Ab(u){var n=xb(u);return Gf.reduce(function(r,f){return r.concat(n.filter(function(v){return v.phase===f}))},[])}function Cb(u){var n;return function(){return n||(n=new Promise(function(r){Promise.resolve().then(function(){n=void 0,r(u())})})),n}}function Tb(u){var n=u.reduce(function(r,f){var v=r[f.name];return r[f.name]=v?Object.assign({},v,f,{options:Object.assign({},v.options,f.options),data:Object.assign({},v.data,f.data)}):f,r},{});return Object.keys(n).map(function(r){return n[r]})}var sf={placement:"bottom",modifiers:[],strategy:"absolute"};function of(){for(var u=arguments.length,n=new Array(u),r=0;r<u;r++)n[r]=arguments[r];return!n.some(function(f){return!(f&&typeof f.getBoundingClientRect=="function")})}function tl(u){u===void 0&&(u={});var n=u,r=n.defaultModifiers,f=r===void 0?[]:r,v=n.defaultOptions,b=v===void 0?sf:v;return function(S,C,U){U===void 0&&(U=b);var L={placement:"bottom",orderedModifiers:[],options:Object.assign({},sf,b),modifiersData:{},elements:{reference:S,popper:C},attributes:{},styles:{}},H=[],J=!1,K={state:L,setOptions:function(oe){var $e=typeof oe=="function"?oe(L.options):oe;G(),L.options=Object.assign({},b,L.options,$e),L.scrollParents={reference:Hr(S)?ko(S):S.contextElement?ko(S.contextElement):[],popper:ko(C)};var Ie=Ab(Tb([].concat(f,L.options.modifiers)));return L.orderedModifiers=Ie.filter(function(fe){return fe.enabled}),te(),K.update()},forceUpdate:function(){if(!J){var oe=L.elements,$e=oe.reference,Ie=oe.popper;if(of($e,Ie)){L.rects={reference:Eb($e,$o(Ie),L.options.strategy==="fixed"),popper:ec(Ie)},L.reset=!1,L.placement=L.options.placement,L.orderedModifiers.forEach(function(He){return L.modifiersData[He.name]=Object.assign({},He.data)});for(var fe=0;fe<L.orderedModifiers.length;fe++){if(L.reset===!0){L.reset=!1,fe=-1;continue}var ae=L.orderedModifiers[fe],xe=ae.fn,Oe=ae.options,Be=Oe===void 0?{}:Oe,ke=ae.name;typeof xe=="function"&&(L=xe({state:L,options:Be,name:ke,instance:K})||L)}}}},update:Cb(function(){return new Promise(function(ie){K.forceUpdate(),ie(L)})}),destroy:function(){G(),J=!0}};if(!of(S,C))return K;K.setOptions(U).then(function(ie){!J&&U.onFirstUpdate&&U.onFirstUpdate(ie)});function te(){L.orderedModifiers.forEach(function(ie){var oe=ie.name,$e=ie.options,Ie=$e===void 0?{}:$e,fe=ie.effect;if(typeof fe=="function"){var ae=fe({state:L,name:oe,instance:K,options:Ie}),xe=function(){};H.push(ae||xe)}})}function G(){H.forEach(function(ie){return ie()}),H=[]}return K}}var Sb=tl(),Ib=[ic,ac,nc,Zu],Ob=tl({defaultModifiers:Ib}),Nb=[ic,ac,nc,Zu,rp,np,sp,Zf,ip],lc=tl({defaultModifiers:Nb});const op=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Hf,afterRead:Bf,afterWrite:Kf,applyStyles:Zu,arrow:Zf,auto:Za,basePlacements:$s,beforeMain:Wf,beforeRead:Ff,beforeWrite:Vf,bottom:yn,clippingParents:Rf,computeStyles:nc,createPopper:lc,createPopperBase:Sb,createPopperLite:Ob,detectOverflow:ks,end:Ss,eventListeners:ic,flip:np,hide:ip,left:Ht,main:Uf,modifierPhases:Gf,offset:rp,placements:Xu,popper:xs,popperGenerator:tl,popperOffsets:ac,preventOverflow:sp,read:qf,reference:Mf,right:bn,start:Ur,top:Ut,variationPlacements:Hu,viewport:Qu,write:zf},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const fr=new Map,Su={set(u,n,r){fr.has(u)||fr.set(u,new Map);const f=fr.get(u);if(!f.has(n)&&f.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(f.keys())[0]}.`);return}f.set(n,r)},get(u,n){return fr.has(u)&&fr.get(u).get(n)||null},remove(u,n){if(!fr.has(u))return;const r=fr.get(u);r.delete(n),r.size===0&&fr.delete(u)}},kb=1e6,Db=1e3,Ku="transitionend",ap=u=>(u&&window.CSS&&window.CSS.escape&&(u=u.replace(/#([^\s"#']+)/g,(n,r)=>`#${CSS.escape(r)}`)),u),Lb=u=>u==null?`${u}`:Object.prototype.toString.call(u).match(/\s([a-z]+)/i)[1].toLowerCase(),$b=u=>{do u+=Math.floor(Math.random()*kb);while(document.getElementById(u));return u},Pb=u=>{if(!u)return 0;let{transitionDuration:n,transitionDelay:r}=window.getComputedStyle(u);const f=Number.parseFloat(n),v=Number.parseFloat(r);return!f&&!v?0:(n=n.split(",")[0],r=r.split(",")[0],(Number.parseFloat(n)+Number.parseFloat(r))*Db)},lp=u=>{u.dispatchEvent(new Event(Ku))},qi=u=>!u||typeof u!="object"?!1:(typeof u.jquery<"u"&&(u=u[0]),typeof u.nodeType<"u"),hr=u=>qi(u)?u.jquery?u[0]:u:typeof u=="string"&&u.length>0?document.querySelector(ap(u)):null,Ps=u=>{if(!qi(u)||u.getClientRects().length===0)return!1;const n=getComputedStyle(u).getPropertyValue("visibility")==="visible",r=u.closest("details:not([open])");if(!r)return n;if(r!==u){const f=u.closest("summary");if(f&&f.parentNode!==r||f===null)return!1}return n},_r=u=>!u||u.nodeType!==Node.ELEMENT_NODE||u.classList.contains("disabled")?!0:typeof u.disabled<"u"?u.disabled:u.hasAttribute("disabled")&&u.getAttribute("disabled")!=="false",up=u=>{if(!document.documentElement.attachShadow)return null;if(typeof u.getRootNode=="function"){const n=u.getRootNode();return n instanceof ShadowRoot?n:null}return u instanceof ShadowRoot?u:u.parentNode?up(u.parentNode):null},Qa=()=>{},Po=u=>{u.offsetHeight},cp=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Iu=[],Rb=u=>{document.readyState==="loading"?(Iu.length||document.addEventListener("DOMContentLoaded",()=>{for(const n of Iu)n()}),Iu.push(u)):u()},Dn=()=>document.documentElement.dir==="rtl",$n=u=>{Rb(()=>{const n=cp();if(n){const r=u.NAME,f=n.fn[r];n.fn[r]=u.jQueryInterface,n.fn[r].Constructor=u,n.fn[r].noConflict=()=>(n.fn[r]=f,u.jQueryInterface)}})},on=(u,n=[],r=u)=>typeof u=="function"?u.call(...n):r,dp=(u,n,r=!0)=>{if(!r){on(u);return}const v=Pb(n)+5;let b=!1;const E=({target:S})=>{S===n&&(b=!0,n.removeEventListener(Ku,E),on(u))};n.addEventListener(Ku,E),setTimeout(()=>{b||lp(n)},v)},uc=(u,n,r,f)=>{const v=u.length;let b=u.indexOf(n);return b===-1?!r&&f?u[v-1]:u[0]:(b+=r?1:-1,f&&(b=(b+v)%v),u[Math.max(0,Math.min(b,v-1))])},Mb=/[^.]*(?=\..*)\.|.*/,Fb=/\..*/,qb=/::\d+$/,Ou={};let af=1;const fp={mouseenter:"mouseover",mouseleave:"mouseout"},Bb=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function pp(u,n){return n&&`${n}::${af++}`||u.uidEvent||af++}function hp(u){const n=pp(u);return u.uidEvent=n,Ou[n]=Ou[n]||{},Ou[n]}function Wb(u,n){return function r(f){return cc(f,{delegateTarget:u}),r.oneOff&&M.off(u,f.type,n),n.apply(u,[f])}}function Ub(u,n,r){return function f(v){const b=u.querySelectorAll(n);for(let{target:E}=v;E&&E!==this;E=E.parentNode)for(const S of b)if(S===E)return cc(v,{delegateTarget:E}),f.oneOff&&M.off(u,v.type,n,r),r.apply(E,[v])}}function _p(u,n,r=null){return Object.values(u).find(f=>f.callable===n&&f.delegationSelector===r)}function vp(u,n,r){const f=typeof n=="string",v=f?r:n||r;let b=mp(u);return Bb.has(b)||(b=u),[f,v,b]}function lf(u,n,r,f,v){if(typeof n!="string"||!u)return;let[b,E,S]=vp(n,r,f);n in fp&&(E=(te=>function(G){if(!G.relatedTarget||G.relatedTarget!==G.delegateTarget&&!G.delegateTarget.contains(G.relatedTarget))return te.call(this,G)})(E));const C=hp(u),U=C[S]||(C[S]={}),L=_p(U,E,b?r:null);if(L){L.oneOff=L.oneOff&&v;return}const H=pp(E,n.replace(Mb,"")),J=b?Ub(u,r,E):Wb(u,E);J.delegationSelector=b?r:null,J.callable=E,J.oneOff=v,J.uidEvent=H,U[H]=J,u.addEventListener(S,J,b)}function Gu(u,n,r,f,v){const b=_p(n[r],f,v);b&&(u.removeEventListener(r,b,!!v),delete n[r][b.uidEvent])}function Hb(u,n,r,f){const v=n[r]||{};for(const[b,E]of Object.entries(v))b.includes(f)&&Gu(u,n,r,E.callable,E.delegationSelector)}function mp(u){return u=u.replace(Fb,""),fp[u]||u}const M={on(u,n,r,f){lf(u,n,r,f,!1)},one(u,n,r,f){lf(u,n,r,f,!0)},off(u,n,r,f){if(typeof n!="string"||!u)return;const[v,b,E]=vp(n,r,f),S=E!==n,C=hp(u),U=C[E]||{},L=n.startsWith(".");if(typeof b<"u"){if(!Object.keys(U).length)return;Gu(u,C,E,b,v?r:null);return}if(L)for(const H of Object.keys(C))Hb(u,C,H,n.slice(1));for(const[H,J]of Object.entries(U)){const K=H.replace(qb,"");(!S||n.includes(K))&&Gu(u,C,E,J.callable,J.delegationSelector)}},trigger(u,n,r){if(typeof n!="string"||!u)return null;const f=cp(),v=mp(n),b=n!==v;let E=null,S=!0,C=!0,U=!1;b&&f&&(E=f.Event(n,r),f(u).trigger(E),S=!E.isPropagationStopped(),C=!E.isImmediatePropagationStopped(),U=E.isDefaultPrevented());const L=cc(new Event(n,{bubbles:S,cancelable:!0}),r);return U&&L.preventDefault(),C&&u.dispatchEvent(L),L.defaultPrevented&&E&&E.preventDefault(),L}};function cc(u,n={}){for(const[r,f]of Object.entries(n))try{u[r]=f}catch{Object.defineProperty(u,r,{configurable:!0,get(){return f}})}return u}function uf(u){if(u==="true")return!0;if(u==="false")return!1;if(u===Number(u).toString())return Number(u);if(u===""||u==="null")return null;if(typeof u!="string")return u;try{return JSON.parse(decodeURIComponent(u))}catch{return u}}function Nu(u){return u.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}const Bi={setDataAttribute(u,n,r){u.setAttribute(`data-bs-${Nu(n)}`,r)},removeDataAttribute(u,n){u.removeAttribute(`data-bs-${Nu(n)}`)},getDataAttributes(u){if(!u)return{};const n={},r=Object.keys(u.dataset).filter(f=>f.startsWith("bs")&&!f.startsWith("bsConfig"));for(const f of r){let v=f.replace(/^bs/,"");v=v.charAt(0).toLowerCase()+v.slice(1),n[v]=uf(u.dataset[f])}return n},getDataAttribute(u,n){return uf(u.getAttribute(`data-bs-${Nu(n)}`))}};class Ro{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(n){return n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n}_mergeConfigObj(n,r){const f=qi(r)?Bi.getDataAttribute(r,"config"):{};return{...this.constructor.Default,...typeof f=="object"?f:{},...qi(r)?Bi.getDataAttributes(r):{},...typeof n=="object"?n:{}}}_typeCheckConfig(n,r=this.constructor.DefaultType){for(const[f,v]of Object.entries(r)){const b=n[f],E=qi(b)?"element":Lb(b);if(!new RegExp(v).test(E))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${f}" provided type "${E}" but expected type "${v}".`)}}}const Vb="5.3.8";class jn extends Ro{constructor(n,r){super(),n=hr(n),n&&(this._element=n,this._config=this._getConfig(r),Su.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Su.remove(this._element,this.constructor.DATA_KEY),M.off(this._element,this.constructor.EVENT_KEY);for(const n of Object.getOwnPropertyNames(this))this[n]=null}_queueCallback(n,r,f=!0){dp(n,r,f)}_getConfig(n){return n=this._mergeConfigObj(n,this._element),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}static getInstance(n){return Su.get(hr(n),this.DATA_KEY)}static getOrCreateInstance(n,r={}){return this.getInstance(n)||new this(n,typeof r=="object"?r:null)}static get VERSION(){return Vb}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(n){return`${n}${this.EVENT_KEY}`}}const ku=u=>{let n=u.getAttribute("data-bs-target");if(!n||n==="#"){let r=u.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),n=r&&r!=="#"?r.trim():null}return n?n.split(",").map(r=>ap(r)).join(","):null},ee={find(u,n=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(n,u))},findOne(u,n=document.documentElement){return Element.prototype.querySelector.call(n,u)},children(u,n){return[].concat(...u.children).filter(r=>r.matches(n))},parents(u,n){const r=[];let f=u.parentNode.closest(n);for(;f;)r.push(f),f=f.parentNode.closest(n);return r},prev(u,n){let r=u.previousElementSibling;for(;r;){if(r.matches(n))return[r];r=r.previousElementSibling}return[]},next(u,n){let r=u.nextElementSibling;for(;r;){if(r.matches(n))return[r];r=r.nextElementSibling}return[]},focusableChildren(u){const n=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(r=>`${r}:not([tabindex^="-"])`).join(",");return this.find(n,u).filter(r=>!_r(r)&&Ps(r))},getSelectorFromElement(u){const n=ku(u);return n&&ee.findOne(n)?n:null},getElementFromSelector(u){const n=ku(u);return n?ee.findOne(n):null},getMultipleElementsFromSelector(u){const n=ku(u);return n?ee.find(n):[]}},nl=(u,n="hide")=>{const r=`click.dismiss${u.EVENT_KEY}`,f=u.NAME;M.on(document,r,`[data-bs-dismiss="${f}"]`,function(v){if(["A","AREA"].includes(this.tagName)&&v.preventDefault(),_r(this))return;const b=ee.getElementFromSelector(this)||this.closest(`.${f}`);u.getOrCreateInstance(b)[n]()})},zb="alert",Kb="bs.alert",gp=`.${Kb}`,Gb=`close${gp}`,Yb=`closed${gp}`,jb="fade",Qb="show";class il extends jn{static get NAME(){return zb}close(){if(M.trigger(this._element,Gb).defaultPrevented)return;this._element.classList.remove(Qb);const r=this._element.classList.contains(jb);this._queueCallback(()=>this._destroyElement(),this._element,r)}_destroyElement(){this._element.remove(),M.trigger(this._element,Yb),this.dispose()}static jQueryInterface(n){return this.each(function(){const r=il.getOrCreateInstance(this);if(typeof n=="string"){if(r[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);r[n](this)}})}}nl(il,"close");$n(il);const Xb="button",Jb="bs.button",Zb=`.${Jb}`,e0=".data-api",t0="active",cf='[data-bs-toggle="button"]',n0=`click${Zb}${e0}`;class rl extends jn{static get NAME(){return Xb}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(t0))}static jQueryInterface(n){return this.each(function(){const r=rl.getOrCreateInstance(this);n==="toggle"&&r[n]()})}}M.on(document,n0,cf,u=>{u.preventDefault();const n=u.target.closest(cf);rl.getOrCreateInstance(n).toggle()});$n(rl);const i0="swipe",Rs=".bs.swipe",r0=`touchstart${Rs}`,s0=`touchmove${Rs}`,o0=`touchend${Rs}`,a0=`pointerdown${Rs}`,l0=`pointerup${Rs}`,u0="touch",c0="pen",d0="pointer-event",f0=40,p0={endCallback:null,leftCallback:null,rightCallback:null},h0={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Xa extends Ro{constructor(n,r){super(),this._element=n,!(!n||!Xa.isSupported())&&(this._config=this._getConfig(r),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return p0}static get DefaultType(){return h0}static get NAME(){return i0}dispose(){M.off(this._element,Rs)}_start(n){if(!this._supportPointerEvents){this._deltaX=n.touches[0].clientX;return}this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX)}_end(n){this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX-this._deltaX),this._handleSwipe(),on(this._config.endCallback)}_move(n){this._deltaX=n.touches&&n.touches.length>1?0:n.touches[0].clientX-this._deltaX}_handleSwipe(){const n=Math.abs(this._deltaX);if(n<=f0)return;const r=n/this._deltaX;this._deltaX=0,r&&on(r>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(M.on(this._element,a0,n=>this._start(n)),M.on(this._element,l0,n=>this._end(n)),this._element.classList.add(d0)):(M.on(this._element,r0,n=>this._start(n)),M.on(this._element,s0,n=>this._move(n)),M.on(this._element,o0,n=>this._end(n)))}_eventIsPointerPenTouch(n){return this._supportPointerEvents&&(n.pointerType===c0||n.pointerType===u0)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const _0="carousel",v0="bs.carousel",gr=`.${v0}`,yp=".data-api",m0="ArrowLeft",g0="ArrowRight",y0=500,So="next",ws="prev",As="left",Ga="right",b0=`slide${gr}`,Du=`slid${gr}`,w0=`keydown${gr}`,E0=`mouseenter${gr}`,x0=`mouseleave${gr}`,A0=`dragstart${gr}`,C0=`load${gr}${yp}`,T0=`click${gr}${yp}`,bp="carousel",Ba="active",S0="slide",I0="carousel-item-end",O0="carousel-item-start",N0="carousel-item-next",k0="carousel-item-prev",wp=".active",Ep=".carousel-item",D0=wp+Ep,L0=".carousel-item img",$0=".carousel-indicators",P0="[data-bs-slide], [data-bs-slide-to]",R0='[data-bs-ride="carousel"]',M0={[m0]:Ga,[g0]:As},F0={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},q0={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Mo extends jn{constructor(n,r){super(n,r),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ee.findOne($0,this._element),this._addEventListeners(),this._config.ride===bp&&this.cycle()}static get Default(){return F0}static get DefaultType(){return q0}static get NAME(){return _0}next(){this._slide(So)}nextWhenVisible(){!document.hidden&&Ps(this._element)&&this.next()}prev(){this._slide(ws)}pause(){this._isSliding&&lp(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){M.one(this._element,Du,()=>this.cycle());return}this.cycle()}}to(n){const r=this._getItems();if(n>r.length-1||n<0)return;if(this._isSliding){M.one(this._element,Du,()=>this.to(n));return}const f=this._getItemIndex(this._getActive());if(f===n)return;const v=n>f?So:ws;this._slide(v,r[n])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(n){return n.defaultInterval=n.interval,n}_addEventListeners(){this._config.keyboard&&M.on(this._element,w0,n=>this._keydown(n)),this._config.pause==="hover"&&(M.on(this._element,E0,()=>this.pause()),M.on(this._element,x0,()=>this._maybeEnableCycle())),this._config.touch&&Xa.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const f of ee.find(L0,this._element))M.on(f,A0,v=>v.preventDefault());const r={leftCallback:()=>this._slide(this._directionToOrder(As)),rightCallback:()=>this._slide(this._directionToOrder(Ga)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),y0+this._config.interval))}};this._swipeHelper=new Xa(this._element,r)}_keydown(n){if(/input|textarea/i.test(n.target.tagName))return;const r=M0[n.key];r&&(n.preventDefault(),this._slide(this._directionToOrder(r)))}_getItemIndex(n){return this._getItems().indexOf(n)}_setActiveIndicatorElement(n){if(!this._indicatorsElement)return;const r=ee.findOne(wp,this._indicatorsElement);r.classList.remove(Ba),r.removeAttribute("aria-current");const f=ee.findOne(`[data-bs-slide-to="${n}"]`,this._indicatorsElement);f&&(f.classList.add(Ba),f.setAttribute("aria-current","true"))}_updateInterval(){const n=this._activeElement||this._getActive();if(!n)return;const r=Number.parseInt(n.getAttribute("data-bs-interval"),10);this._config.interval=r||this._config.defaultInterval}_slide(n,r=null){if(this._isSliding)return;const f=this._getActive(),v=n===So,b=r||uc(this._getItems(),f,v,this._config.wrap);if(b===f)return;const E=this._getItemIndex(b),S=K=>M.trigger(this._element,K,{relatedTarget:b,direction:this._orderToDirection(n),from:this._getItemIndex(f),to:E});if(S(b0).defaultPrevented||!f||!b)return;const U=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(E),this._activeElement=b;const L=v?O0:I0,H=v?N0:k0;b.classList.add(H),Po(b),f.classList.add(L),b.classList.add(L);const J=()=>{b.classList.remove(L,H),b.classList.add(Ba),f.classList.remove(Ba,H,L),this._isSliding=!1,S(Du)};this._queueCallback(J,f,this._isAnimated()),U&&this.cycle()}_isAnimated(){return this._element.classList.contains(S0)}_getActive(){return ee.findOne(D0,this._element)}_getItems(){return ee.find(Ep,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(n){return Dn()?n===As?ws:So:n===As?So:ws}_orderToDirection(n){return Dn()?n===ws?As:Ga:n===ws?Ga:As}static jQueryInterface(n){return this.each(function(){const r=Mo.getOrCreateInstance(this,n);if(typeof n=="number"){r.to(n);return}if(typeof n=="string"){if(r[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);r[n]()}})}}M.on(document,T0,P0,function(u){const n=ee.getElementFromSelector(this);if(!n||!n.classList.contains(bp))return;u.preventDefault();const r=Mo.getOrCreateInstance(n),f=this.getAttribute("data-bs-slide-to");if(f){r.to(f),r._maybeEnableCycle();return}if(Bi.getDataAttribute(this,"slide")==="next"){r.next(),r._maybeEnableCycle();return}r.prev(),r._maybeEnableCycle()});M.on(window,C0,()=>{const u=ee.find(R0);for(const n of u)Mo.getOrCreateInstance(n)});$n(Mo);const B0="collapse",W0="bs.collapse",Fo=`.${W0}`,U0=".data-api",H0=`show${Fo}`,V0=`shown${Fo}`,z0=`hide${Fo}`,K0=`hidden${Fo}`,G0=`click${Fo}${U0}`,Lu="show",Ts="collapse",Wa="collapsing",Y0="collapsed",j0=`:scope .${Ts} .${Ts}`,Q0="collapse-horizontal",X0="width",J0="height",Z0=".collapse.show, .collapse.collapsing",Yu='[data-bs-toggle="collapse"]',e1={parent:null,toggle:!0},t1={parent:"(null|element)",toggle:"boolean"};class Lo extends jn{constructor(n,r){super(n,r),this._isTransitioning=!1,this._triggerArray=[];const f=ee.find(Yu);for(const v of f){const b=ee.getSelectorFromElement(v),E=ee.find(b).filter(S=>S===this._element);b!==null&&E.length&&this._triggerArray.push(v)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return e1}static get DefaultType(){return t1}static get NAME(){return B0}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let n=[];if(this._config.parent&&(n=this._getFirstLevelChildren(Z0).filter(S=>S!==this._element).map(S=>Lo.getOrCreateInstance(S,{toggle:!1}))),n.length&&n[0]._isTransitioning||M.trigger(this._element,H0).defaultPrevented)return;for(const S of n)S.hide();const f=this._getDimension();this._element.classList.remove(Ts),this._element.classList.add(Wa),this._element.style[f]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const v=()=>{this._isTransitioning=!1,this._element.classList.remove(Wa),this._element.classList.add(Ts,Lu),this._element.style[f]="",M.trigger(this._element,V0)},E=`scroll${f[0].toUpperCase()+f.slice(1)}`;this._queueCallback(v,this._element,!0),this._element.style[f]=`${this._element[E]}px`}hide(){if(this._isTransitioning||!this._isShown()||M.trigger(this._element,z0).defaultPrevented)return;const r=this._getDimension();this._element.style[r]=`${this._element.getBoundingClientRect()[r]}px`,Po(this._element),this._element.classList.add(Wa),this._element.classList.remove(Ts,Lu);for(const v of this._triggerArray){const b=ee.getElementFromSelector(v);b&&!this._isShown(b)&&this._addAriaAndCollapsedClass([v],!1)}this._isTransitioning=!0;const f=()=>{this._isTransitioning=!1,this._element.classList.remove(Wa),this._element.classList.add(Ts),M.trigger(this._element,K0)};this._element.style[r]="",this._queueCallback(f,this._element,!0)}_isShown(n=this._element){return n.classList.contains(Lu)}_configAfterMerge(n){return n.toggle=!!n.toggle,n.parent=hr(n.parent),n}_getDimension(){return this._element.classList.contains(Q0)?X0:J0}_initializeChildren(){if(!this._config.parent)return;const n=this._getFirstLevelChildren(Yu);for(const r of n){const f=ee.getElementFromSelector(r);f&&this._addAriaAndCollapsedClass([r],this._isShown(f))}}_getFirstLevelChildren(n){const r=ee.find(j0,this._config.parent);return ee.find(n,this._config.parent).filter(f=>!r.includes(f))}_addAriaAndCollapsedClass(n,r){if(n.length)for(const f of n)f.classList.toggle(Y0,!r),f.setAttribute("aria-expanded",r)}static jQueryInterface(n){const r={};return typeof n=="string"&&/show|hide/.test(n)&&(r.toggle=!1),this.each(function(){const f=Lo.getOrCreateInstance(this,r);if(typeof n=="string"){if(typeof f[n]>"u")throw new TypeError(`No method named "${n}"`);f[n]()}})}}M.on(document,G0,Yu,function(u){(u.target.tagName==="A"||u.delegateTarget&&u.delegateTarget.tagName==="A")&&u.preventDefault();for(const n of ee.getMultipleElementsFromSelector(this))Lo.getOrCreateInstance(n,{toggle:!1}).toggle()});$n(Lo);const df="dropdown",n1="bs.dropdown",Vr=`.${n1}`,dc=".data-api",i1="Escape",ff="Tab",r1="ArrowUp",pf="ArrowDown",s1=2,o1=`hide${Vr}`,a1=`hidden${Vr}`,l1=`show${Vr}`,u1=`shown${Vr}`,xp=`click${Vr}${dc}`,Ap=`keydown${Vr}${dc}`,c1=`keyup${Vr}${dc}`,Cs="show",d1="dropup",f1="dropend",p1="dropstart",h1="dropup-center",_1="dropdown-center",qr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',v1=`${qr}.${Cs}`,Ya=".dropdown-menu",m1=".navbar",g1=".navbar-nav",y1=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",b1=Dn()?"top-end":"top-start",w1=Dn()?"top-start":"top-end",E1=Dn()?"bottom-end":"bottom-start",x1=Dn()?"bottom-start":"bottom-end",A1=Dn()?"left-start":"right-start",C1=Dn()?"right-start":"left-start",T1="top",S1="bottom",I1={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},O1={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class mi extends jn{constructor(n,r){super(n,r),this._popper=null,this._parent=this._element.parentNode,this._menu=ee.next(this._element,Ya)[0]||ee.prev(this._element,Ya)[0]||ee.findOne(Ya,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return I1}static get DefaultType(){return O1}static get NAME(){return df}toggle(){return this._isShown()?this.hide():this.show()}show(){if(_r(this._element)||this._isShown())return;const n={relatedTarget:this._element};if(!M.trigger(this._element,l1,n).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(g1))for(const f of[].concat(...document.body.children))M.on(f,"mouseover",Qa);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Cs),this._element.classList.add(Cs),M.trigger(this._element,u1,n)}}hide(){if(_r(this._element)||!this._isShown())return;const n={relatedTarget:this._element};this._completeHide(n)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(n){if(!M.trigger(this._element,o1,n).defaultPrevented){if("ontouchstart"in document.documentElement)for(const f of[].concat(...document.body.children))M.off(f,"mouseover",Qa);this._popper&&this._popper.destroy(),this._menu.classList.remove(Cs),this._element.classList.remove(Cs),this._element.setAttribute("aria-expanded","false"),Bi.removeDataAttribute(this._menu,"popper"),M.trigger(this._element,a1,n)}}_getConfig(n){if(n=super._getConfig(n),typeof n.reference=="object"&&!qi(n.reference)&&typeof n.reference.getBoundingClientRect!="function")throw new TypeError(`${df.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return n}_createPopper(){if(typeof op>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let n=this._element;this._config.reference==="parent"?n=this._parent:qi(this._config.reference)?n=hr(this._config.reference):typeof this._config.reference=="object"&&(n=this._config.reference);const r=this._getPopperConfig();this._popper=lc(n,this._menu,r)}_isShown(){return this._menu.classList.contains(Cs)}_getPlacement(){const n=this._parent;if(n.classList.contains(f1))return A1;if(n.classList.contains(p1))return C1;if(n.classList.contains(h1))return T1;if(n.classList.contains(_1))return S1;const r=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return n.classList.contains(d1)?r?w1:b1:r?x1:E1}_detectNavbar(){return this._element.closest(m1)!==null}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(r=>Number.parseInt(r,10)):typeof n=="function"?r=>n(r,this._element):n}_getPopperConfig(){const n={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Bi.setDataAttribute(this._menu,"popper","static"),n.modifiers=[{name:"applyStyles",enabled:!1}]),{...n,...on(this._config.popperConfig,[void 0,n])}}_selectMenuItem({key:n,target:r}){const f=ee.find(y1,this._menu).filter(v=>Ps(v));f.length&&uc(f,r,n===pf,!f.includes(r)).focus()}static jQueryInterface(n){return this.each(function(){const r=mi.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof r[n]>"u")throw new TypeError(`No method named "${n}"`);r[n]()}})}static clearMenus(n){if(n.button===s1||n.type==="keyup"&&n.key!==ff)return;const r=ee.find(v1);for(const f of r){const v=mi.getInstance(f);if(!v||v._config.autoClose===!1)continue;const b=n.composedPath(),E=b.includes(v._menu);if(b.includes(v._element)||v._config.autoClose==="inside"&&!E||v._config.autoClose==="outside"&&E||v._menu.contains(n.target)&&(n.type==="keyup"&&n.key===ff||/input|select|option|textarea|form/i.test(n.target.tagName)))continue;const S={relatedTarget:v._element};n.type==="click"&&(S.clickEvent=n),v._completeHide(S)}}static dataApiKeydownHandler(n){const r=/input|textarea/i.test(n.target.tagName),f=n.key===i1,v=[r1,pf].includes(n.key);if(!v&&!f||r&&!f)return;n.preventDefault();const b=this.matches(qr)?this:ee.prev(this,qr)[0]||ee.next(this,qr)[0]||ee.findOne(qr,n.delegateTarget.parentNode),E=mi.getOrCreateInstance(b);if(v){n.stopPropagation(),E.show(),E._selectMenuItem(n);return}E._isShown()&&(n.stopPropagation(),E.hide(),b.focus())}}M.on(document,Ap,qr,mi.dataApiKeydownHandler);M.on(document,Ap,Ya,mi.dataApiKeydownHandler);M.on(document,xp,mi.clearMenus);M.on(document,c1,mi.clearMenus);M.on(document,xp,qr,function(u){u.preventDefault(),mi.getOrCreateInstance(this).toggle()});$n(mi);const Cp="backdrop",N1="fade",hf="show",_f=`mousedown.bs.${Cp}`,k1={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},D1={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Tp extends Ro{constructor(n){super(),this._config=this._getConfig(n),this._isAppended=!1,this._element=null}static get Default(){return k1}static get DefaultType(){return D1}static get NAME(){return Cp}show(n){if(!this._config.isVisible){on(n);return}this._append();const r=this._getElement();this._config.isAnimated&&Po(r),r.classList.add(hf),this._emulateAnimation(()=>{on(n)})}hide(n){if(!this._config.isVisible){on(n);return}this._getElement().classList.remove(hf),this._emulateAnimation(()=>{this.dispose(),on(n)})}dispose(){this._isAppended&&(M.off(this._element,_f),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const n=document.createElement("div");n.className=this._config.className,this._config.isAnimated&&n.classList.add(N1),this._element=n}return this._element}_configAfterMerge(n){return n.rootElement=hr(n.rootElement),n}_append(){if(this._isAppended)return;const n=this._getElement();this._config.rootElement.append(n),M.on(n,_f,()=>{on(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(n){dp(n,this._getElement(),this._config.isAnimated)}}const L1="focustrap",$1="bs.focustrap",Ja=`.${$1}`,P1=`focusin${Ja}`,R1=`keydown.tab${Ja}`,M1="Tab",F1="forward",vf="backward",q1={autofocus:!0,trapElement:null},B1={autofocus:"boolean",trapElement:"element"};class Sp extends Ro{constructor(n){super(),this._config=this._getConfig(n),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return q1}static get DefaultType(){return B1}static get NAME(){return L1}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),M.off(document,Ja),M.on(document,P1,n=>this._handleFocusin(n)),M.on(document,R1,n=>this._handleKeydown(n)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,M.off(document,Ja))}_handleFocusin(n){const{trapElement:r}=this._config;if(n.target===document||n.target===r||r.contains(n.target))return;const f=ee.focusableChildren(r);f.length===0?r.focus():this._lastTabNavDirection===vf?f[f.length-1].focus():f[0].focus()}_handleKeydown(n){n.key===M1&&(this._lastTabNavDirection=n.shiftKey?vf:F1)}}const mf=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",gf=".sticky-top",Ua="padding-right",yf="margin-right";class ju{constructor(){this._element=document.body}getWidth(){const n=document.documentElement.clientWidth;return Math.abs(window.innerWidth-n)}hide(){const n=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ua,r=>r+n),this._setElementAttributes(mf,Ua,r=>r+n),this._setElementAttributes(gf,yf,r=>r-n)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ua),this._resetElementAttributes(mf,Ua),this._resetElementAttributes(gf,yf)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(n,r,f){const v=this.getWidth(),b=E=>{if(E!==this._element&&window.innerWidth>E.clientWidth+v)return;this._saveInitialAttribute(E,r);const S=window.getComputedStyle(E).getPropertyValue(r);E.style.setProperty(r,`${f(Number.parseFloat(S))}px`)};this._applyManipulationCallback(n,b)}_saveInitialAttribute(n,r){const f=n.style.getPropertyValue(r);f&&Bi.setDataAttribute(n,r,f)}_resetElementAttributes(n,r){const f=v=>{const b=Bi.getDataAttribute(v,r);if(b===null){v.style.removeProperty(r);return}Bi.removeDataAttribute(v,r),v.style.setProperty(r,b)};this._applyManipulationCallback(n,f)}_applyManipulationCallback(n,r){if(qi(n)){r(n);return}for(const f of ee.find(n,this._element))r(f)}}const W1="modal",U1="bs.modal",Ln=`.${U1}`,H1=".data-api",V1="Escape",z1=`hide${Ln}`,K1=`hidePrevented${Ln}`,Ip=`hidden${Ln}`,Op=`show${Ln}`,G1=`shown${Ln}`,Y1=`resize${Ln}`,j1=`click.dismiss${Ln}`,Q1=`mousedown.dismiss${Ln}`,X1=`keydown.dismiss${Ln}`,J1=`click${Ln}${H1}`,bf="modal-open",Z1="fade",wf="show",$u="modal-static",ew=".modal.show",tw=".modal-dialog",nw=".modal-body",iw='[data-bs-toggle="modal"]',rw={backdrop:!0,focus:!0,keyboard:!0},sw={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ds extends jn{constructor(n,r){super(n,r),this._dialog=ee.findOne(tw,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ju,this._addEventListeners()}static get Default(){return rw}static get DefaultType(){return sw}static get NAME(){return W1}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){this._isShown||this._isTransitioning||M.trigger(this._element,Op,{relatedTarget:n}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(bf),this._adjustDialog(),this._backdrop.show(()=>this._showElement(n)))}hide(){!this._isShown||this._isTransitioning||M.trigger(this._element,z1).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(wf),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){M.off(window,Ln),M.off(this._dialog,Ln),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Tp({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Sp({trapElement:this._element})}_showElement(n){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const r=ee.findOne(nw,this._dialog);r&&(r.scrollTop=0),Po(this._element),this._element.classList.add(wf);const f=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,M.trigger(this._element,G1,{relatedTarget:n})};this._queueCallback(f,this._dialog,this._isAnimated())}_addEventListeners(){M.on(this._element,X1,n=>{if(n.key===V1){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),M.on(window,Y1,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),M.on(this._element,Q1,n=>{M.one(this._element,j1,r=>{if(!(this._element!==n.target||this._element!==r.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(bf),this._resetAdjustments(),this._scrollBar.reset(),M.trigger(this._element,Ip)})}_isAnimated(){return this._element.classList.contains(Z1)}_triggerBackdropTransition(){if(M.trigger(this._element,K1).defaultPrevented)return;const r=this._element.scrollHeight>document.documentElement.clientHeight,f=this._element.style.overflowY;f==="hidden"||this._element.classList.contains($u)||(r||(this._element.style.overflowY="hidden"),this._element.classList.add($u),this._queueCallback(()=>{this._element.classList.remove($u),this._queueCallback(()=>{this._element.style.overflowY=f},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const n=this._element.scrollHeight>document.documentElement.clientHeight,r=this._scrollBar.getWidth(),f=r>0;if(f&&!n){const v=Dn()?"paddingLeft":"paddingRight";this._element.style[v]=`${r}px`}if(!f&&n){const v=Dn()?"paddingRight":"paddingLeft";this._element.style[v]=`${r}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(n,r){return this.each(function(){const f=Ds.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof f[n]>"u")throw new TypeError(`No method named "${n}"`);f[n](r)}})}}M.on(document,J1,iw,function(u){const n=ee.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&u.preventDefault(),M.one(n,Op,v=>{v.defaultPrevented||M.one(n,Ip,()=>{Ps(this)&&this.focus()})});const r=ee.findOne(ew);r&&Ds.getInstance(r).hide(),Ds.getOrCreateInstance(n).toggle(this)});nl(Ds);$n(Ds);const ow="offcanvas",aw="bs.offcanvas",Ui=`.${aw}`,Np=".data-api",lw=`load${Ui}${Np}`,uw="Escape",Ef="show",xf="showing",Af="hiding",cw="offcanvas-backdrop",kp=".offcanvas.show",dw=`show${Ui}`,fw=`shown${Ui}`,pw=`hide${Ui}`,Cf=`hidePrevented${Ui}`,Dp=`hidden${Ui}`,hw=`resize${Ui}`,_w=`click${Ui}${Np}`,vw=`keydown.dismiss${Ui}`,mw='[data-bs-toggle="offcanvas"]',gw={backdrop:!0,keyboard:!0,scroll:!1},yw={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class vr extends jn{constructor(n,r){super(n,r),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return gw}static get DefaultType(){return yw}static get NAME(){return ow}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){if(this._isShown||M.trigger(this._element,dw,{relatedTarget:n}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ju().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(xf);const f=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Ef),this._element.classList.remove(xf),M.trigger(this._element,fw,{relatedTarget:n})};this._queueCallback(f,this._element,!0)}hide(){if(!this._isShown||M.trigger(this._element,pw).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Af),this._backdrop.hide();const r=()=>{this._element.classList.remove(Ef,Af),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ju().reset(),M.trigger(this._element,Dp)};this._queueCallback(r,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const n=()=>{if(this._config.backdrop==="static"){M.trigger(this._element,Cf);return}this.hide()},r=!!this._config.backdrop;return new Tp({className:cw,isVisible:r,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:r?n:null})}_initializeFocusTrap(){return new Sp({trapElement:this._element})}_addEventListeners(){M.on(this._element,vw,n=>{if(n.key===uw){if(this._config.keyboard){this.hide();return}M.trigger(this._element,Cf)}})}static jQueryInterface(n){return this.each(function(){const r=vr.getOrCreateInstance(this,n);if(typeof n=="string"){if(r[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);r[n](this)}})}}M.on(document,_w,mw,function(u){const n=ee.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&u.preventDefault(),_r(this))return;M.one(n,Dp,()=>{Ps(this)&&this.focus()});const r=ee.findOne(kp);r&&r!==n&&vr.getInstance(r).hide(),vr.getOrCreateInstance(n).toggle(this)});M.on(window,lw,()=>{for(const u of ee.find(kp))vr.getOrCreateInstance(u).show()});M.on(window,hw,()=>{for(const u of ee.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(u).position!=="fixed"&&vr.getOrCreateInstance(u).hide()});nl(vr);$n(vr);const bw=/^aria-[\w-]*$/i,Lp={"*":["class","dir","id","lang","role",bw],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ww=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ew=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,xw=(u,n)=>{const r=u.nodeName.toLowerCase();return n.includes(r)?ww.has(r)?!!Ew.test(u.nodeValue):!0:n.filter(f=>f instanceof RegExp).some(f=>f.test(r))};function Aw(u,n,r){if(!u.length)return u;if(r&&typeof r=="function")return r(u);const v=new window.DOMParser().parseFromString(u,"text/html"),b=[].concat(...v.body.querySelectorAll("*"));for(const E of b){const S=E.nodeName.toLowerCase();if(!Object.keys(n).includes(S)){E.remove();continue}const C=[].concat(...E.attributes),U=[].concat(n["*"]||[],n[S]||[]);for(const L of C)xw(L,U)||E.removeAttribute(L.nodeName)}return v.body.innerHTML}const Cw="TemplateFactory",Tw={allowList:Lp,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Sw={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Iw={entry:"(string|element|function|null)",selector:"(string|element)"};class Ow extends Ro{constructor(n){super(),this._config=this._getConfig(n)}static get Default(){return Tw}static get DefaultType(){return Sw}static get NAME(){return Cw}getContent(){return Object.values(this._config.content).map(n=>this._resolvePossibleFunction(n)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(n){return this._checkContent(n),this._config.content={...this._config.content,...n},this}toHtml(){const n=document.createElement("div");n.innerHTML=this._maybeSanitize(this._config.template);for(const[v,b]of Object.entries(this._config.content))this._setContent(n,b,v);const r=n.children[0],f=this._resolvePossibleFunction(this._config.extraClass);return f&&r.classList.add(...f.split(" ")),r}_typeCheckConfig(n){super._typeCheckConfig(n),this._checkContent(n.content)}_checkContent(n){for(const[r,f]of Object.entries(n))super._typeCheckConfig({selector:r,entry:f},Iw)}_setContent(n,r,f){const v=ee.findOne(f,n);if(v){if(r=this._resolvePossibleFunction(r),!r){v.remove();return}if(qi(r)){this._putElementInTemplate(hr(r),v);return}if(this._config.html){v.innerHTML=this._maybeSanitize(r);return}v.textContent=r}}_maybeSanitize(n){return this._config.sanitize?Aw(n,this._config.allowList,this._config.sanitizeFn):n}_resolvePossibleFunction(n){return on(n,[void 0,this])}_putElementInTemplate(n,r){if(this._config.html){r.innerHTML="",r.append(n);return}r.textContent=n.textContent}}const Nw="tooltip",kw=new Set(["sanitize","allowList","sanitizeFn"]),Pu="fade",Dw="modal",Ha="show",Lw=".tooltip-inner",Tf=`.${Dw}`,Sf="hide.bs.modal",Io="hover",Ru="focus",Mu="click",$w="manual",Pw="hide",Rw="hidden",Mw="show",Fw="shown",qw="inserted",Bw="click",Ww="focusin",Uw="focusout",Hw="mouseenter",Vw="mouseleave",zw={AUTO:"auto",TOP:"top",RIGHT:Dn()?"left":"right",BOTTOM:"bottom",LEFT:Dn()?"right":"left"},Kw={allowList:Lp,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Gw={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ms extends jn{constructor(n,r){if(typeof op>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(n,r),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Kw}static get DefaultType(){return Gw}static get NAME(){return Nw}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),M.off(this._element.closest(Tf),Sf,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const n=M.trigger(this._element,this.constructor.eventName(Mw)),f=(up(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(n.defaultPrevented||!f)return;this._disposePopper();const v=this._getTipElement();this._element.setAttribute("aria-describedby",v.getAttribute("id"));const{container:b}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(b.append(v),M.trigger(this._element,this.constructor.eventName(qw))),this._popper=this._createPopper(v),v.classList.add(Ha),"ontouchstart"in document.documentElement)for(const S of[].concat(...document.body.children))M.on(S,"mouseover",Qa);const E=()=>{M.trigger(this._element,this.constructor.eventName(Fw)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(E,this.tip,this._isAnimated())}hide(){if(!this._isShown()||M.trigger(this._element,this.constructor.eventName(Pw)).defaultPrevented)return;if(this._getTipElement().classList.remove(Ha),"ontouchstart"in document.documentElement)for(const v of[].concat(...document.body.children))M.off(v,"mouseover",Qa);this._activeTrigger[Mu]=!1,this._activeTrigger[Ru]=!1,this._activeTrigger[Io]=!1,this._isHovered=null;const f=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),M.trigger(this._element,this.constructor.eventName(Rw)))};this._queueCallback(f,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(n){const r=this._getTemplateFactory(n).toHtml();if(!r)return null;r.classList.remove(Pu,Ha),r.classList.add(`bs-${this.constructor.NAME}-auto`);const f=$b(this.constructor.NAME).toString();return r.setAttribute("id",f),this._isAnimated()&&r.classList.add(Pu),r}setContent(n){this._newContent=n,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(n){return this._templateFactory?this._templateFactory.changeContent(n):this._templateFactory=new Ow({...this._config,content:n,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Lw]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(n){return this.constructor.getOrCreateInstance(n.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Pu)}_isShown(){return this.tip&&this.tip.classList.contains(Ha)}_createPopper(n){const r=on(this._config.placement,[this,n,this._element]),f=zw[r.toUpperCase()];return lc(this._element,n,this._getPopperConfig(f))}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(r=>Number.parseInt(r,10)):typeof n=="function"?r=>n(r,this._element):n}_resolvePossibleFunction(n){return on(n,[this._element,this._element])}_getPopperConfig(n){const r={placement:n,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:f=>{this._getTipElement().setAttribute("data-popper-placement",f.state.placement)}}]};return{...r,...on(this._config.popperConfig,[void 0,r])}}_setListeners(){const n=this._config.trigger.split(" ");for(const r of n)if(r==="click")M.on(this._element,this.constructor.eventName(Bw),this._config.selector,f=>{const v=this._initializeOnDelegatedTarget(f);v._activeTrigger[Mu]=!(v._isShown()&&v._activeTrigger[Mu]),v.toggle()});else if(r!==$w){const f=r===Io?this.constructor.eventName(Hw):this.constructor.eventName(Ww),v=r===Io?this.constructor.eventName(Vw):this.constructor.eventName(Uw);M.on(this._element,f,this._config.selector,b=>{const E=this._initializeOnDelegatedTarget(b);E._activeTrigger[b.type==="focusin"?Ru:Io]=!0,E._enter()}),M.on(this._element,v,this._config.selector,b=>{const E=this._initializeOnDelegatedTarget(b);E._activeTrigger[b.type==="focusout"?Ru:Io]=E._element.contains(b.relatedTarget),E._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},M.on(this._element.closest(Tf),Sf,this._hideModalHandler)}_fixTitle(){const n=this._element.getAttribute("title");n&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",n),this._element.setAttribute("data-bs-original-title",n),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(n,r){clearTimeout(this._timeout),this._timeout=setTimeout(n,r)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(n){const r=Bi.getDataAttributes(this._element);for(const f of Object.keys(r))kw.has(f)&&delete r[f];return n={...r,...typeof n=="object"&&n?n:{}},n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n.container=n.container===!1?document.body:hr(n.container),typeof n.delay=="number"&&(n.delay={show:n.delay,hide:n.delay}),typeof n.title=="number"&&(n.title=n.title.toString()),typeof n.content=="number"&&(n.content=n.content.toString()),n}_getDelegateConfig(){const n={};for(const[r,f]of Object.entries(this._config))this.constructor.Default[r]!==f&&(n[r]=f);return n.selector=!1,n.trigger="manual",n}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(n){return this.each(function(){const r=Ms.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof r[n]>"u")throw new TypeError(`No method named "${n}"`);r[n]()}})}}$n(Ms);const Yw="popover",jw=".popover-header",Qw=".popover-body",Xw={...Ms.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Jw={...Ms.DefaultType,content:"(null|string|element|function)"};class sl extends Ms{static get Default(){return Xw}static get DefaultType(){return Jw}static get NAME(){return Yw}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[jw]:this._getTitle(),[Qw]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(n){return this.each(function(){const r=sl.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof r[n]>"u")throw new TypeError(`No method named "${n}"`);r[n]()}})}}$n(sl);const Zw="scrollspy",eE="bs.scrollspy",fc=`.${eE}`,tE=".data-api",nE=`activate${fc}`,If=`click${fc}`,iE=`load${fc}${tE}`,rE="dropdown-item",Es="active",sE='[data-bs-spy="scroll"]',Fu="[href]",oE=".nav, .list-group",Of=".nav-link",aE=".nav-item",lE=".list-group-item",uE=`${Of}, ${aE} > ${Of}, ${lE}`,cE=".dropdown",dE=".dropdown-toggle",fE={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},pE={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ol extends jn{constructor(n,r){super(n,r),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return fE}static get DefaultType(){return pE}static get NAME(){return Zw}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const n of this._observableSections.values())this._observer.observe(n)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(n){return n.target=hr(n.target)||document.body,n.rootMargin=n.offset?`${n.offset}px 0px -30%`:n.rootMargin,typeof n.threshold=="string"&&(n.threshold=n.threshold.split(",").map(r=>Number.parseFloat(r))),n}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(M.off(this._config.target,If),M.on(this._config.target,If,Fu,n=>{const r=this._observableSections.get(n.target.hash);if(r){n.preventDefault();const f=this._rootElement||window,v=r.offsetTop-this._element.offsetTop;if(f.scrollTo){f.scrollTo({top:v,behavior:"smooth"});return}f.scrollTop=v}}))}_getNewObserver(){const n={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(r=>this._observerCallback(r),n)}_observerCallback(n){const r=E=>this._targetLinks.get(`#${E.target.id}`),f=E=>{this._previousScrollData.visibleEntryTop=E.target.offsetTop,this._process(r(E))},v=(this._rootElement||document.documentElement).scrollTop,b=v>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=v;for(const E of n){if(!E.isIntersecting){this._activeTarget=null,this._clearActiveClass(r(E));continue}const S=E.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(b&&S){if(f(E),!v)return;continue}!b&&!S&&f(E)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const n=ee.find(Fu,this._config.target);for(const r of n){if(!r.hash||_r(r))continue;const f=ee.findOne(decodeURI(r.hash),this._element);Ps(f)&&(this._targetLinks.set(decodeURI(r.hash),r),this._observableSections.set(r.hash,f))}}_process(n){this._activeTarget!==n&&(this._clearActiveClass(this._config.target),this._activeTarget=n,n.classList.add(Es),this._activateParents(n),M.trigger(this._element,nE,{relatedTarget:n}))}_activateParents(n){if(n.classList.contains(rE)){ee.findOne(dE,n.closest(cE)).classList.add(Es);return}for(const r of ee.parents(n,oE))for(const f of ee.prev(r,uE))f.classList.add(Es)}_clearActiveClass(n){n.classList.remove(Es);const r=ee.find(`${Fu}.${Es}`,n);for(const f of r)f.classList.remove(Es)}static jQueryInterface(n){return this.each(function(){const r=ol.getOrCreateInstance(this,n);if(typeof n=="string"){if(r[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);r[n]()}})}}M.on(window,iE,()=>{for(const u of ee.find(sE))ol.getOrCreateInstance(u)});$n(ol);const hE="tab",_E="bs.tab",zr=`.${_E}`,vE=`hide${zr}`,mE=`hidden${zr}`,gE=`show${zr}`,yE=`shown${zr}`,bE=`click${zr}`,wE=`keydown${zr}`,EE=`load${zr}`,xE="ArrowLeft",Nf="ArrowRight",AE="ArrowUp",kf="ArrowDown",qu="Home",Df="End",Br="active",Lf="fade",Bu="show",CE="dropdown",$p=".dropdown-toggle",TE=".dropdown-menu",Wu=`:not(${$p})`,SE='.list-group, .nav, [role="tablist"]',IE=".nav-item, .list-group-item",OE=`.nav-link${Wu}, .list-group-item${Wu}, [role="tab"]${Wu}`,Pp='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Uu=`${OE}, ${Pp}`,NE=`.${Br}[data-bs-toggle="tab"], .${Br}[data-bs-toggle="pill"], .${Br}[data-bs-toggle="list"]`;class Ls extends jn{constructor(n){super(n),this._parent=this._element.closest(SE),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),M.on(this._element,wE,r=>this._keydown(r)))}static get NAME(){return hE}show(){const n=this._element;if(this._elemIsActive(n))return;const r=this._getActiveElem(),f=r?M.trigger(r,vE,{relatedTarget:n}):null;M.trigger(n,gE,{relatedTarget:r}).defaultPrevented||f&&f.defaultPrevented||(this._deactivate(r,n),this._activate(n,r))}_activate(n,r){if(!n)return;n.classList.add(Br),this._activate(ee.getElementFromSelector(n));const f=()=>{if(n.getAttribute("role")!=="tab"){n.classList.add(Bu);return}n.removeAttribute("tabindex"),n.setAttribute("aria-selected",!0),this._toggleDropDown(n,!0),M.trigger(n,yE,{relatedTarget:r})};this._queueCallback(f,n,n.classList.contains(Lf))}_deactivate(n,r){if(!n)return;n.classList.remove(Br),n.blur(),this._deactivate(ee.getElementFromSelector(n));const f=()=>{if(n.getAttribute("role")!=="tab"){n.classList.remove(Bu);return}n.setAttribute("aria-selected",!1),n.setAttribute("tabindex","-1"),this._toggleDropDown(n,!1),M.trigger(n,mE,{relatedTarget:r})};this._queueCallback(f,n,n.classList.contains(Lf))}_keydown(n){if(![xE,Nf,AE,kf,qu,Df].includes(n.key))return;n.stopPropagation(),n.preventDefault();const r=this._getChildren().filter(v=>!_r(v));let f;if([qu,Df].includes(n.key))f=r[n.key===qu?0:r.length-1];else{const v=[Nf,kf].includes(n.key);f=uc(r,n.target,v,!0)}f&&(f.focus({preventScroll:!0}),Ls.getOrCreateInstance(f).show())}_getChildren(){return ee.find(Uu,this._parent)}_getActiveElem(){return this._getChildren().find(n=>this._elemIsActive(n))||null}_setInitialAttributes(n,r){this._setAttributeIfNotExists(n,"role","tablist");for(const f of r)this._setInitialAttributesOnChild(f)}_setInitialAttributesOnChild(n){n=this._getInnerElement(n);const r=this._elemIsActive(n),f=this._getOuterElement(n);n.setAttribute("aria-selected",r),f!==n&&this._setAttributeIfNotExists(f,"role","presentation"),r||n.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(n,"role","tab"),this._setInitialAttributesOnTargetPanel(n)}_setInitialAttributesOnTargetPanel(n){const r=ee.getElementFromSelector(n);r&&(this._setAttributeIfNotExists(r,"role","tabpanel"),n.id&&this._setAttributeIfNotExists(r,"aria-labelledby",`${n.id}`))}_toggleDropDown(n,r){const f=this._getOuterElement(n);if(!f.classList.contains(CE))return;const v=(b,E)=>{const S=ee.findOne(b,f);S&&S.classList.toggle(E,r)};v($p,Br),v(TE,Bu),f.setAttribute("aria-expanded",r)}_setAttributeIfNotExists(n,r,f){n.hasAttribute(r)||n.setAttribute(r,f)}_elemIsActive(n){return n.classList.contains(Br)}_getInnerElement(n){return n.matches(Uu)?n:ee.findOne(Uu,n)}_getOuterElement(n){return n.closest(IE)||n}static jQueryInterface(n){return this.each(function(){const r=Ls.getOrCreateInstance(this);if(typeof n=="string"){if(r[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);r[n]()}})}}M.on(document,bE,Pp,function(u){["A","AREA"].includes(this.tagName)&&u.preventDefault(),!_r(this)&&Ls.getOrCreateInstance(this).show()});M.on(window,EE,()=>{for(const u of ee.find(NE))Ls.getOrCreateInstance(u)});$n(Ls);const kE="toast",DE="bs.toast",yr=`.${DE}`,LE=`mouseover${yr}`,$E=`mouseout${yr}`,PE=`focusin${yr}`,RE=`focusout${yr}`,ME=`hide${yr}`,FE=`hidden${yr}`,qE=`show${yr}`,BE=`shown${yr}`,WE="fade",$f="hide",Va="show",za="showing",UE={animation:"boolean",autohide:"boolean",delay:"number"},HE={animation:!0,autohide:!0,delay:5e3};class al extends jn{constructor(n,r){super(n,r),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return HE}static get DefaultType(){return UE}static get NAME(){return kE}show(){if(M.trigger(this._element,qE).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(WE);const r=()=>{this._element.classList.remove(za),M.trigger(this._element,BE),this._maybeScheduleHide()};this._element.classList.remove($f),Po(this._element),this._element.classList.add(Va,za),this._queueCallback(r,this._element,this._config.animation)}hide(){if(!this.isShown()||M.trigger(this._element,ME).defaultPrevented)return;const r=()=>{this._element.classList.add($f),this._element.classList.remove(za,Va),M.trigger(this._element,FE)};this._element.classList.add(za),this._queueCallback(r,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Va),super.dispose()}isShown(){return this._element.classList.contains(Va)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(n,r){switch(n.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=r;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=r;break}}if(r){this._clearTimeout();return}const f=n.relatedTarget;this._element===f||this._element.contains(f)||this._maybeScheduleHide()}_setListeners(){M.on(this._element,LE,n=>this._onInteraction(n,!0)),M.on(this._element,$E,n=>this._onInteraction(n,!1)),M.on(this._element,PE,n=>this._onInteraction(n,!0)),M.on(this._element,RE,n=>this._onInteraction(n,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(n){return this.each(function(){const r=al.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof r[n]>"u")throw new TypeError(`No method named "${n}"`);r[n](this)}})}}nl(al);$n(al);var Oo={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var VE=Oo.exports,Pf;function zE(){return Pf||(Pf=1,(function(u,n){(function(){var r,f="4.17.21",v=200,b="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",E="Expected a function",S="Invalid `variable` option passed into `_.template`",C="__lodash_hash_undefined__",U=500,L="__lodash_placeholder__",H=1,J=2,K=4,te=1,G=2,ie=1,oe=2,$e=4,Ie=8,fe=16,ae=32,xe=64,Oe=128,Be=256,ke=512,He=30,Ze="...",bt=800,Ne=16,Ct=1,an=2,wt=3,et=1/0,Te=9007199254740991,En=17976931348623157e292,Vt=NaN,Tt=4294967295,yi=Tt-1,dt=Tt>>>1,Pn=[["ary",Oe],["bind",ie],["bindKey",oe],["curry",Ie],["curryRight",fe],["flip",ke],["partial",ae],["partialRight",xe],["rearg",Be]],Et="[object Arguments]",xn="[object Array]",Hi="[object AsyncFunction]",Dt="[object Boolean]",Rn="[object Date]",Fs="[object DOMException]",Qn="[object Error]",Vi="[object Function]",br="[object GeneratorFunction]",St="[object Map]",bi="[object Number]",Mn="[object Null]",zt="[object Object]",wi="[object Promise]",qs="[object Proxy]",It="[object RegExp]",ft="[object Set]",Ot="[object String]",_e="[object Symbol]",Ye="[object Undefined]",nt="[object WeakMap]",xt="[object WeakSet]",Xn="[object ArrayBuffer]",Lt="[object DataView]",Bs="[object Float32Array]",Jn="[object Float64Array]",Ws="[object Int8Array]",Us="[object Int16Array]",Ei="[object Int32Array]",Zn="[object Uint8Array]",_t="[object Uint8ClampedArray]",Hs="[object Uint16Array]",Vs="[object Uint32Array]",vt=/\b__p \+= '';/g,qo=/\b(__p \+=) '' \+/g,zs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Bo=/&(?:amp|lt|gt|quot|#39);/g,wr=/[&<>"']/g,Ks=RegExp(Bo.source),Gs=RegExp(wr.source),F=/<%-([\s\S]+?)%>/g,ll=/<%([\s\S]+?)%>/g,Kr=/<%=([\s\S]+?)%>/g,ul=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cl=/^\w*$/,$t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Er=/[\\^$.*+?()[\]{}|]/g,Fn=RegExp(Er.source),ln=/^\s+/,Ys=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,pt=/\{\n\/\* \[wrapped with (.+)\] \*/,js=/,? & /,ei=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,at=/[()=,{}\[\]\/\s]/,qn=/\\(\\)?/g,dl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xr=/\w*$/,fl=/^[-+]0x[0-9a-f]+$/i,pl=/^0b[01]+$/i,mt=/^\[object .+?Constructor\]$/,Ar=/^0o[0-7]+$/i,Bn=/^(?:0|[1-9]\d*)$/,Kt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,zi=/($^)/,Qs=/['\n\r\u2028\u2029\\]/g,un="\\ud800-\\udfff",Ki="\\u0300-\\u036f",hl="\\ufe20-\\ufe2f",Xs="\\u20d0-\\u20ff",Gr=Ki+hl+Xs,Wo="\\u2700-\\u27bf",Uo="a-z\\xdf-\\xf6\\xf8-\\xff",Pt="\\xac\\xb1\\xd7\\xf7",Gi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ho="\\u2000-\\u206f",it=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yi="A-Z\\xc0-\\xd6\\xd8-\\xde",Vo="\\ufe0e\\ufe0f",zo=Pt+Gi+Ho+it,Yr="[']",xi="["+un+"]",Ko="["+zo+"]",Wn="["+Gr+"]",ji="\\d+",_l="["+Wo+"]",Un="["+Uo+"]",Gt="[^"+un+zo+ji+Wo+Uo+Yi+"]",Yt="\\ud83c[\\udffb-\\udfff]",jr="(?:"+Wn+"|"+Yt+")",Cr="[^"+un+"]",Qi="(?:\\ud83c[\\udde6-\\uddff]){2}",Js="[\\ud800-\\udbff][\\udc00-\\udfff]",cn="["+Yi+"]",Zs="\\u200d",eo="(?:"+Un+"|"+Gt+")",Go="(?:"+cn+"|"+Gt+")",Yo="(?:"+Yr+"(?:d|ll|m|re|s|t|ve))?",jt="(?:"+Yr+"(?:D|LL|M|RE|S|T|VE))?",to=jr+"?",Tr="["+Vo+"]?",vl="(?:"+Zs+"(?:"+[Cr,Qi,Js].join("|")+")"+Tr+to+")*",jo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qr="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qo=Tr+to+vl,Xr="(?:"+[_l,Qi,Js].join("|")+")"+Qo,no="(?:"+[Cr+Wn+"?",Wn,Qi,Js,xi].join("|")+")",io=RegExp(Yr,"g"),ml=RegExp(Wn,"g"),Xi=RegExp(Yt+"(?="+Yt+")|"+no+Qo,"g"),Jr=RegExp([cn+"?"+Un+"+"+Yo+"(?="+[Ko,cn,"$"].join("|")+")",Go+"+"+jt+"(?="+[Ko,cn+eo,"$"].join("|")+")",cn+"?"+eo+"+"+Yo,cn+"+"+jt,Qr,jo,ji,Xr].join("|"),"g"),ro=RegExp("["+Zs+un+Gr+Vo+"]"),so=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],es=-1,Z={};Z[Bs]=Z[Jn]=Z[Ws]=Z[Us]=Z[Ei]=Z[Zn]=Z[_t]=Z[Hs]=Z[Vs]=!0,Z[Et]=Z[xn]=Z[Xn]=Z[Dt]=Z[Lt]=Z[Rn]=Z[Qn]=Z[Vi]=Z[St]=Z[bi]=Z[zt]=Z[It]=Z[ft]=Z[Ot]=Z[nt]=!1;var We={};We[Et]=We[xn]=We[Xn]=We[Lt]=We[Dt]=We[Rn]=We[Bs]=We[Jn]=We[Ws]=We[Us]=We[Ei]=We[St]=We[bi]=We[zt]=We[It]=We[ft]=We[Ot]=We[_e]=We[Zn]=We[_t]=We[Hs]=We[Vs]=!0,We[Qn]=We[Vi]=We[nt]=!1;var gl={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},yl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},wl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ti=parseFloat,El=parseInt,Xo=typeof Fa=="object"&&Fa&&Fa.Object===Object&&Fa,ni=typeof self=="object"&&self&&self.Object===Object&&self,je=Xo||ni||Function("return this")(),Hn=n&&!n.nodeType&&n,dn=Hn&&!0&&u&&!u.nodeType&&u,ts=dn&&dn.exports===Hn,ns=ts&&Xo.process,Qt=(function(){try{var y=dn&&dn.require&&dn.require("util").types;return y||ns&&ns.binding&&ns.binding("util")}catch{}})(),Jo=Qt&&Qt.isArrayBuffer,ii=Qt&&Qt.isDate,rt=Qt&&Qt.isMap,Vn=Qt&&Qt.isRegExp,Ai=Qt&&Qt.isSet,Zo=Qt&&Qt.isTypedArray;function Rt(y,k,A){switch(A.length){case 0:return y.call(k);case 1:return y.call(k,A[0]);case 2:return y.call(k,A[0],A[1]);case 3:return y.call(k,A[0],A[1],A[2])}return y.apply(k,A)}function xl(y,k,A,z){for(var de=-1,De=y==null?0:y.length;++de<De;){var Ge=y[de];k(z,Ge,A(Ge),y)}return z}function Xt(y,k){for(var A=-1,z=y==null?0:y.length;++A<z&&k(y[A],A,y)!==!1;);return y}function ea(y,k){for(var A=y==null?0:y.length;A--&&k(y[A],A,y)!==!1;);return y}function ta(y,k){for(var A=-1,z=y==null?0:y.length;++A<z;)if(!k(y[A],A,y))return!1;return!0}function An(y,k){for(var A=-1,z=y==null?0:y.length,de=0,De=[];++A<z;){var Ge=y[A];k(Ge,A,y)&&(De[de++]=Ge)}return De}function ri(y,k){var A=y==null?0:y.length;return!!A&&Ji(y,k,0)>-1}function is(y,k,A){for(var z=-1,de=y==null?0:y.length;++z<de;)if(A(k,y[z]))return!0;return!1}function Ue(y,k){for(var A=-1,z=y==null?0:y.length,de=Array(z);++A<z;)de[A]=k(y[A],A,y);return de}function si(y,k){for(var A=-1,z=k.length,de=y.length;++A<z;)y[de+A]=k[A];return y}function oo(y,k,A,z){var de=-1,De=y==null?0:y.length;for(z&&De&&(A=y[++de]);++de<De;)A=k(A,y[de],de,y);return A}function Al(y,k,A,z){var de=y==null?0:y.length;for(z&&de&&(A=y[--de]);de--;)A=k(A,y[de],de,y);return A}function ao(y,k){for(var A=-1,z=y==null?0:y.length;++A<z;)if(k(y[A],A,y))return!0;return!1}var Cl=Ci("length");function Tl(y){return y.split("")}function fn(y){return y.match(ei)||[]}function oi(y,k,A){var z;return A(y,function(de,De,Ge){if(k(de,De,Ge))return z=De,!1}),z}function ai(y,k,A,z){for(var de=y.length,De=A+(z?1:-1);z?De--:++De<de;)if(k(y[De],De,y))return De;return-1}function Ji(y,k,A){return k===k?Il(y,k,A):ai(y,na,A)}function Zi(y,k,A,z){for(var de=A-1,De=y.length;++de<De;)if(z(y[de],k))return de;return-1}function na(y){return y!==y}function ia(y,k){var A=y==null?0:y.length;return A?lo(y,k)/A:Vt}function Ci(y){return function(k){return k==null?r:k[y]}}function rs(y){return function(k){return y==null?r:y[k]}}function ra(y,k,A,z,de){return de(y,function(De,Ge,Pe){A=z?(z=!1,De):k(A,De,Ge,Pe)}),A}function sa(y,k){var A=y.length;for(y.sort(k);A--;)y[A]=y[A].value;return y}function lo(y,k){for(var A,z=-1,de=y.length;++z<de;){var De=k(y[z]);De!==r&&(A=A===r?De:A+De)}return A}function er(y,k){for(var A=-1,z=Array(y);++A<y;)z[A]=k(A);return z}function oa(y,k){return Ue(k,function(A){return[A,y[A]]})}function aa(y){return y&&y.slice(0,co(y)+1).replace(ln,"")}function Mt(y){return function(k){return y(k)}}function ze(y,k){return Ue(k,function(A){return y[A]})}function qe(y,k){return y.has(k)}function Qe(y,k){for(var A=-1,z=y.length;++A<z&&Ji(k,y[A],0)>-1;);return A}function Cn(y,k){for(var A=y.length;A--&&Ji(k,y[A],0)>-1;);return A}function li(y,k){for(var A=y.length,z=0;A--;)y[A]===k&&++z;return z}var tr=rs(gl),ui=rs(yl);function ss(y){return"\\"+wl[y]}function Ke(y,k){return y==null?r:y[k]}function nr(y){return ro.test(y)}function Sl(y){return so.test(y)}function Jt(y){for(var k,A=[];!(k=y.next()).done;)A.push(k.value);return A}function os(y){var k=-1,A=Array(y.size);return y.forEach(function(z,de){A[++k]=[de,z]}),A}function la(y,k){return function(A){return y(k(A))}}function ci(y,k){for(var A=-1,z=y.length,de=0,De=[];++A<z;){var Ge=y[A];(Ge===k||Ge===L)&&(y[A]=L,De[de++]=A)}return De}function Ti(y){var k=-1,A=Array(y.size);return y.forEach(function(z){A[++k]=z}),A}function uo(y){var k=-1,A=Array(y.size);return y.forEach(function(z){A[++k]=[z,z]}),A}function Il(y,k,A){for(var z=A-1,de=y.length;++z<de;)if(y[z]===k)return z;return-1}function Ol(y,k,A){for(var z=A+1;z--;)if(y[z]===k)return z;return z}function ir(y){return nr(y)?ua(y):Cl(y)}function pn(y){return nr(y)?ca(y):Tl(y)}function co(y){for(var k=y.length;k--&&Ys.test(y.charAt(k)););return k}var Nl=rs(bl);function ua(y){for(var k=Xi.lastIndex=0;Xi.test(y);)++k;return k}function ca(y){return y.match(Xi)||[]}function kl(y){return y.match(Jr)||[]}var Dl=(function y(k){k=k==null?je:rr.defaults(je.Object(),k,rr.pick(je,Zr));var A=k.Array,z=k.Date,de=k.Error,De=k.Function,Ge=k.Math,Pe=k.Object,hn=k.RegExp,as=k.String,Zt=k.TypeError,Nt=A.prototype,Ll=De.prototype,sr=Pe.prototype,ls=k["__core-js_shared__"],Sr=Ll.toString,Ae=sr.hasOwnProperty,us=0,fo=(function(){var e=/[^.]+$/.exec(ls&&ls.keys&&ls.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),Ir=sr.toString,da=Sr.call(Pe),Si=je._,Re=hn("^"+Sr.call(Ae).replace(Er,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cs=ts?k.Buffer:r,di=k.Symbol,ds=k.Uint8Array,o=cs?cs.allocUnsafe:r,s=la(Pe.getPrototypeOf,Pe),l=Pe.create,_=sr.propertyIsEnumerable,x=Nt.splice,O=di?di.isConcatSpreadable:r,T=di?di.iterator:r,q=di?di.toStringTag:r,ue=(function(){try{var e=$r(Pe,"defineProperty");return e({},"",{}),e}catch{}})(),le=k.clearTimeout!==je.clearTimeout&&k.clearTimeout,we=z&&z.now!==je.Date.now&&z.now,Xe=k.setTimeout!==je.setTimeout&&k.setTimeout,X=Ge.ceil,Le=Ge.floor,Me=Pe.getOwnPropertySymbols,lt=cs?cs.isBuffer:r,Ft=k.isFinite,Or=Nt.join,Ii=la(Pe.keys,Pe),Y=Ge.max,ut=Ge.min,po=z.now,$l=k.parseInt,fa=Ge.random,fi=Nt.reverse,Oi=$r(k,"DataView"),or=$r(k,"Map"),Pl=$r(k,"Promise"),fs=$r(k,"Set"),ho=$r(k,"WeakMap"),_o=$r(Pe,"create"),pa=ho&&new ho,ps={},Rp=Pr(Oi),Mp=Pr(or),Fp=Pr(Pl),qp=Pr(fs),Bp=Pr(ho),ha=di?di.prototype:r,vo=ha?ha.valueOf:r,pc=ha?ha.toString:r;function p(e){if(tt(e)&&!pe(e)&&!(e instanceof Ce)){if(e instanceof Tn)return e;if(Ae.call(e,"__wrapped__"))return hd(e)}return new Tn(e)}var hs=(function(){function e(){}return function(t){if(!Je(t))return{};if(l)return l(t);e.prototype=t;var i=new e;return e.prototype=r,i}})();function _a(){}function Tn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}p.templateSettings={escape:F,evaluate:ll,interpolate:Kr,variable:"",imports:{_:p}},p.prototype=_a.prototype,p.prototype.constructor=p,Tn.prototype=hs(_a.prototype),Tn.prototype.constructor=Tn;function Ce(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Tt,this.__views__=[]}function Wp(){var e=new Ce(this.__wrapped__);return e.__actions__=en(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=en(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=en(this.__views__),e}function Up(){if(this.__filtered__){var e=new Ce(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Hp(){var e=this.__wrapped__.value(),t=this.__dir__,i=pe(e),a=t<0,d=i?e.length:0,h=t_(0,d,this.__views__),m=h.start,g=h.end,w=g-m,$=a?g:m-1,P=this.__iteratees__,R=P.length,V=0,j=ut(w,this.__takeCount__);if(!i||!a&&d==w&&j==w)return Mc(e,this.__actions__);var re=[];e:for(;w--&&V<j;){$+=t;for(var ve=-1,se=e[$];++ve<R;){var Ee=P[ve],Se=Ee.iteratee,mn=Ee.type,Wt=Se(se);if(mn==an)se=Wt;else if(!Wt){if(mn==Ct)continue e;break e}}re[V++]=se}return re}Ce.prototype=hs(_a.prototype),Ce.prototype.constructor=Ce;function Nr(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}function Vp(){this.__data__=_o?_o(null):{},this.size=0}function zp(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Kp(e){var t=this.__data__;if(_o){var i=t[e];return i===C?r:i}return Ae.call(t,e)?t[e]:r}function Gp(e){var t=this.__data__;return _o?t[e]!==r:Ae.call(t,e)}function Yp(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=_o&&t===r?C:t,this}Nr.prototype.clear=Vp,Nr.prototype.delete=zp,Nr.prototype.get=Kp,Nr.prototype.has=Gp,Nr.prototype.set=Yp;function Ni(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}function jp(){this.__data__=[],this.size=0}function Qp(e){var t=this.__data__,i=va(t,e);if(i<0)return!1;var a=t.length-1;return i==a?t.pop():x.call(t,i,1),--this.size,!0}function Xp(e){var t=this.__data__,i=va(t,e);return i<0?r:t[i][1]}function Jp(e){return va(this.__data__,e)>-1}function Zp(e,t){var i=this.__data__,a=va(i,e);return a<0?(++this.size,i.push([e,t])):i[a][1]=t,this}Ni.prototype.clear=jp,Ni.prototype.delete=Qp,Ni.prototype.get=Xp,Ni.prototype.has=Jp,Ni.prototype.set=Zp;function ki(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}function eh(){this.size=0,this.__data__={hash:new Nr,map:new(or||Ni),string:new Nr}}function th(e){var t=Ia(this,e).delete(e);return this.size-=t?1:0,t}function nh(e){return Ia(this,e).get(e)}function ih(e){return Ia(this,e).has(e)}function rh(e,t){var i=Ia(this,e),a=i.size;return i.set(e,t),this.size+=i.size==a?0:1,this}ki.prototype.clear=eh,ki.prototype.delete=th,ki.prototype.get=nh,ki.prototype.has=ih,ki.prototype.set=rh;function kr(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new ki;++t<i;)this.add(e[t])}function sh(e){return this.__data__.set(e,C),this}function oh(e){return this.__data__.has(e)}kr.prototype.add=kr.prototype.push=sh,kr.prototype.has=oh;function zn(e){var t=this.__data__=new Ni(e);this.size=t.size}function ah(){this.__data__=new Ni,this.size=0}function lh(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function uh(e){return this.__data__.get(e)}function ch(e){return this.__data__.has(e)}function dh(e,t){var i=this.__data__;if(i instanceof Ni){var a=i.__data__;if(!or||a.length<v-1)return a.push([e,t]),this.size=++i.size,this;i=this.__data__=new ki(a)}return i.set(e,t),this.size=i.size,this}zn.prototype.clear=ah,zn.prototype.delete=lh,zn.prototype.get=uh,zn.prototype.has=ch,zn.prototype.set=dh;function hc(e,t){var i=pe(e),a=!i&&Rr(e),d=!i&&!a&&dr(e),h=!i&&!a&&!d&&gs(e),m=i||a||d||h,g=m?er(e.length,as):[],w=g.length;for(var $ in e)(t||Ae.call(e,$))&&!(m&&($=="length"||d&&($=="offset"||$=="parent")||h&&($=="buffer"||$=="byteLength"||$=="byteOffset")||Pi($,w)))&&g.push($);return g}function _c(e){var t=e.length;return t?e[Kl(0,t-1)]:r}function fh(e,t){return Oa(en(e),Dr(t,0,e.length))}function ph(e){return Oa(en(e))}function Rl(e,t,i){(i!==r&&!Kn(e[t],i)||i===r&&!(t in e))&&Di(e,t,i)}function mo(e,t,i){var a=e[t];(!(Ae.call(e,t)&&Kn(a,i))||i===r&&!(t in e))&&Di(e,t,i)}function va(e,t){for(var i=e.length;i--;)if(Kn(e[i][0],t))return i;return-1}function hh(e,t,i,a){return ar(e,function(d,h,m){t(a,d,i(d),m)}),a}function vc(e,t){return e&&hi(t,gt(t),e)}function _h(e,t){return e&&hi(t,nn(t),e)}function Di(e,t,i){t=="__proto__"&&ue?ue(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function Ml(e,t){for(var i=-1,a=t.length,d=A(a),h=e==null;++i<a;)d[i]=h?r:mu(e,t[i]);return d}function Dr(e,t,i){return e===e&&(i!==r&&(e=e<=i?e:i),t!==r&&(e=e>=t?e:t)),e}function Sn(e,t,i,a,d,h){var m,g=t&H,w=t&J,$=t&K;if(i&&(m=d?i(e,a,d,h):i(e)),m!==r)return m;if(!Je(e))return e;var P=pe(e);if(P){if(m=i_(e),!g)return en(e,m)}else{var R=kt(e),V=R==Vi||R==br;if(dr(e))return Bc(e,g);if(R==zt||R==Et||V&&!d){if(m=w||V?{}:sd(e),!g)return w?Kh(e,_h(m,e)):zh(e,vc(m,e))}else{if(!We[R])return d?e:{};m=r_(e,R,g)}}h||(h=new zn);var j=h.get(e);if(j)return j;h.set(e,m),$d(e)?e.forEach(function(se){m.add(Sn(se,t,i,se,e,h))}):Dd(e)&&e.forEach(function(se,Ee){m.set(Ee,Sn(se,t,i,Ee,e,h))});var re=$?w?iu:nu:w?nn:gt,ve=P?r:re(e);return Xt(ve||e,function(se,Ee){ve&&(Ee=se,se=e[Ee]),mo(m,Ee,Sn(se,t,i,Ee,e,h))}),m}function vh(e){var t=gt(e);return function(i){return mc(i,e,t)}}function mc(e,t,i){var a=i.length;if(e==null)return!a;for(e=Pe(e);a--;){var d=i[a],h=t[d],m=e[d];if(m===r&&!(d in e)||!h(m))return!1}return!0}function gc(e,t,i){if(typeof e!="function")throw new Zt(E);return Ao(function(){e.apply(r,i)},t)}function go(e,t,i,a){var d=-1,h=ri,m=!0,g=e.length,w=[],$=t.length;if(!g)return w;i&&(t=Ue(t,Mt(i))),a?(h=is,m=!1):t.length>=v&&(h=qe,m=!1,t=new kr(t));e:for(;++d<g;){var P=e[d],R=i==null?P:i(P);if(P=a||P!==0?P:0,m&&R===R){for(var V=$;V--;)if(t[V]===R)continue e;w.push(P)}else h(t,R,a)||w.push(P)}return w}var ar=zc(pi),yc=zc(ql,!0);function mh(e,t){var i=!0;return ar(e,function(a,d,h){return i=!!t(a,d,h),i}),i}function ma(e,t,i){for(var a=-1,d=e.length;++a<d;){var h=e[a],m=t(h);if(m!=null&&(g===r?m===m&&!vn(m):i(m,g)))var g=m,w=h}return w}function gh(e,t,i,a){var d=e.length;for(i=he(i),i<0&&(i=-i>d?0:d+i),a=a===r||a>d?d:he(a),a<0&&(a+=d),a=i>a?0:Rd(a);i<a;)e[i++]=t;return e}function bc(e,t){var i=[];return ar(e,function(a,d,h){t(a,d,h)&&i.push(a)}),i}function At(e,t,i,a,d){var h=-1,m=e.length;for(i||(i=o_),d||(d=[]);++h<m;){var g=e[h];t>0&&i(g)?t>1?At(g,t-1,i,a,d):si(d,g):a||(d[d.length]=g)}return d}var Fl=Kc(),wc=Kc(!0);function pi(e,t){return e&&Fl(e,t,gt)}function ql(e,t){return e&&wc(e,t,gt)}function ga(e,t){return An(t,function(i){return Ri(e[i])})}function Lr(e,t){t=ur(t,e);for(var i=0,a=t.length;e!=null&&i<a;)e=e[_i(t[i++])];return i&&i==a?e:r}function Ec(e,t,i){var a=t(e);return pe(e)?a:si(a,i(e))}function qt(e){return e==null?e===r?Ye:Mn:q&&q in Pe(e)?e_(e):p_(e)}function Bl(e,t){return e>t}function yh(e,t){return e!=null&&Ae.call(e,t)}function bh(e,t){return e!=null&&t in Pe(e)}function wh(e,t,i){return e>=ut(t,i)&&e<Y(t,i)}function Wl(e,t,i){for(var a=i?is:ri,d=e[0].length,h=e.length,m=h,g=A(h),w=1/0,$=[];m--;){var P=e[m];m&&t&&(P=Ue(P,Mt(t))),w=ut(P.length,w),g[m]=!i&&(t||d>=120&&P.length>=120)?new kr(m&&P):r}P=e[0];var R=-1,V=g[0];e:for(;++R<d&&$.length<w;){var j=P[R],re=t?t(j):j;if(j=i||j!==0?j:0,!(V?qe(V,re):a($,re,i))){for(m=h;--m;){var ve=g[m];if(!(ve?qe(ve,re):a(e[m],re,i)))continue e}V&&V.push(re),$.push(j)}}return $}function Eh(e,t,i,a){return pi(e,function(d,h,m){t(a,i(d),h,m)}),a}function yo(e,t,i){t=ur(t,e),e=ud(e,t);var a=e==null?e:e[_i(On(t))];return a==null?r:Rt(a,e,i)}function xc(e){return tt(e)&&qt(e)==Et}function xh(e){return tt(e)&&qt(e)==Xn}function Ah(e){return tt(e)&&qt(e)==Rn}function bo(e,t,i,a,d){return e===t?!0:e==null||t==null||!tt(e)&&!tt(t)?e!==e&&t!==t:Ch(e,t,i,a,bo,d)}function Ch(e,t,i,a,d,h){var m=pe(e),g=pe(t),w=m?xn:kt(e),$=g?xn:kt(t);w=w==Et?zt:w,$=$==Et?zt:$;var P=w==zt,R=$==zt,V=w==$;if(V&&dr(e)){if(!dr(t))return!1;m=!0,P=!1}if(V&&!P)return h||(h=new zn),m||gs(e)?nd(e,t,i,a,d,h):Jh(e,t,w,i,a,d,h);if(!(i&te)){var j=P&&Ae.call(e,"__wrapped__"),re=R&&Ae.call(t,"__wrapped__");if(j||re){var ve=j?e.value():e,se=re?t.value():t;return h||(h=new zn),d(ve,se,i,a,h)}}return V?(h||(h=new zn),Zh(e,t,i,a,d,h)):!1}function Th(e){return tt(e)&&kt(e)==St}function Ul(e,t,i,a){var d=i.length,h=d,m=!a;if(e==null)return!h;for(e=Pe(e);d--;){var g=i[d];if(m&&g[2]?g[1]!==e[g[0]]:!(g[0]in e))return!1}for(;++d<h;){g=i[d];var w=g[0],$=e[w],P=g[1];if(m&&g[2]){if($===r&&!(w in e))return!1}else{var R=new zn;if(a)var V=a($,P,w,e,t,R);if(!(V===r?bo(P,$,te|G,a,R):V))return!1}}return!0}function Ac(e){if(!Je(e)||l_(e))return!1;var t=Ri(e)?Re:mt;return t.test(Pr(e))}function Sh(e){return tt(e)&&qt(e)==It}function Ih(e){return tt(e)&&kt(e)==ft}function Oh(e){return tt(e)&&Pa(e.length)&&!!Z[qt(e)]}function Cc(e){return typeof e=="function"?e:e==null?rn:typeof e=="object"?pe(e)?Ic(e[0],e[1]):Sc(e):Gd(e)}function Hl(e){if(!xo(e))return Ii(e);var t=[];for(var i in Pe(e))Ae.call(e,i)&&i!="constructor"&&t.push(i);return t}function Nh(e){if(!Je(e))return f_(e);var t=xo(e),i=[];for(var a in e)a=="constructor"&&(t||!Ae.call(e,a))||i.push(a);return i}function Vl(e,t){return e<t}function Tc(e,t){var i=-1,a=tn(e)?A(e.length):[];return ar(e,function(d,h,m){a[++i]=t(d,h,m)}),a}function Sc(e){var t=su(e);return t.length==1&&t[0][2]?ad(t[0][0],t[0][1]):function(i){return i===e||Ul(i,e,t)}}function Ic(e,t){return au(e)&&od(t)?ad(_i(e),t):function(i){var a=mu(i,e);return a===r&&a===t?gu(i,e):bo(t,a,te|G)}}function ya(e,t,i,a,d){e!==t&&Fl(t,function(h,m){if(d||(d=new zn),Je(h))kh(e,t,m,i,ya,a,d);else{var g=a?a(uu(e,m),h,m+"",e,t,d):r;g===r&&(g=h),Rl(e,m,g)}},nn)}function kh(e,t,i,a,d,h,m){var g=uu(e,i),w=uu(t,i),$=m.get(w);if($){Rl(e,i,$);return}var P=h?h(g,w,i+"",e,t,m):r,R=P===r;if(R){var V=pe(w),j=!V&&dr(w),re=!V&&!j&&gs(w);P=w,V||j||re?pe(g)?P=g:st(g)?P=en(g):j?(R=!1,P=Bc(w,!0)):re?(R=!1,P=Wc(w,!0)):P=[]:Co(w)||Rr(w)?(P=g,Rr(g)?P=Md(g):(!Je(g)||Ri(g))&&(P=sd(w))):R=!1}R&&(m.set(w,P),d(P,w,a,h,m),m.delete(w)),Rl(e,i,P)}function Oc(e,t){var i=e.length;if(i)return t+=t<0?i:0,Pi(t,i)?e[t]:r}function Nc(e,t,i){t.length?t=Ue(t,function(h){return pe(h)?function(m){return Lr(m,h.length===1?h[0]:h)}:h}):t=[rn];var a=-1;t=Ue(t,Mt(ne()));var d=Tc(e,function(h,m,g){var w=Ue(t,function($){return $(h)});return{criteria:w,index:++a,value:h}});return sa(d,function(h,m){return Vh(h,m,i)})}function Dh(e,t){return kc(e,t,function(i,a){return gu(e,a)})}function kc(e,t,i){for(var a=-1,d=t.length,h={};++a<d;){var m=t[a],g=Lr(e,m);i(g,m)&&wo(h,ur(m,e),g)}return h}function Lh(e){return function(t){return Lr(t,e)}}function zl(e,t,i,a){var d=a?Zi:Ji,h=-1,m=t.length,g=e;for(e===t&&(t=en(t)),i&&(g=Ue(e,Mt(i)));++h<m;)for(var w=0,$=t[h],P=i?i($):$;(w=d(g,P,w,a))>-1;)g!==e&&x.call(g,w,1),x.call(e,w,1);return e}function Dc(e,t){for(var i=e?t.length:0,a=i-1;i--;){var d=t[i];if(i==a||d!==h){var h=d;Pi(d)?x.call(e,d,1):jl(e,d)}}return e}function Kl(e,t){return e+Le(fa()*(t-e+1))}function $h(e,t,i,a){for(var d=-1,h=Y(X((t-e)/(i||1)),0),m=A(h);h--;)m[a?h:++d]=e,e+=i;return m}function Gl(e,t){var i="";if(!e||t<1||t>Te)return i;do t%2&&(i+=e),t=Le(t/2),t&&(e+=e);while(t);return i}function ye(e,t){return cu(ld(e,t,rn),e+"")}function Ph(e){return _c(ys(e))}function Rh(e,t){var i=ys(e);return Oa(i,Dr(t,0,i.length))}function wo(e,t,i,a){if(!Je(e))return e;t=ur(t,e);for(var d=-1,h=t.length,m=h-1,g=e;g!=null&&++d<h;){var w=_i(t[d]),$=i;if(w==="__proto__"||w==="constructor"||w==="prototype")return e;if(d!=m){var P=g[w];$=a?a(P,w,g):r,$===r&&($=Je(P)?P:Pi(t[d+1])?[]:{})}mo(g,w,$),g=g[w]}return e}var Lc=pa?function(e,t){return pa.set(e,t),e}:rn,Mh=ue?function(e,t){return ue(e,"toString",{configurable:!0,enumerable:!1,value:bu(t),writable:!0})}:rn;function Fh(e){return Oa(ys(e))}function In(e,t,i){var a=-1,d=e.length;t<0&&(t=-t>d?0:d+t),i=i>d?d:i,i<0&&(i+=d),d=t>i?0:i-t>>>0,t>>>=0;for(var h=A(d);++a<d;)h[a]=e[a+t];return h}function qh(e,t){var i;return ar(e,function(a,d,h){return i=t(a,d,h),!i}),!!i}function ba(e,t,i){var a=0,d=e==null?a:e.length;if(typeof t=="number"&&t===t&&d<=dt){for(;a<d;){var h=a+d>>>1,m=e[h];m!==null&&!vn(m)&&(i?m<=t:m<t)?a=h+1:d=h}return d}return Yl(e,t,rn,i)}function Yl(e,t,i,a){var d=0,h=e==null?0:e.length;if(h===0)return 0;t=i(t);for(var m=t!==t,g=t===null,w=vn(t),$=t===r;d<h;){var P=Le((d+h)/2),R=i(e[P]),V=R!==r,j=R===null,re=R===R,ve=vn(R);if(m)var se=a||re;else $?se=re&&(a||V):g?se=re&&V&&(a||!j):w?se=re&&V&&!j&&(a||!ve):j||ve?se=!1:se=a?R<=t:R<t;se?d=P+1:h=P}return ut(h,yi)}function $c(e,t){for(var i=-1,a=e.length,d=0,h=[];++i<a;){var m=e[i],g=t?t(m):m;if(!i||!Kn(g,w)){var w=g;h[d++]=m===0?0:m}}return h}function Pc(e){return typeof e=="number"?e:vn(e)?Vt:+e}function _n(e){if(typeof e=="string")return e;if(pe(e))return Ue(e,_n)+"";if(vn(e))return pc?pc.call(e):"";var t=e+"";return t=="0"&&1/e==-et?"-0":t}function lr(e,t,i){var a=-1,d=ri,h=e.length,m=!0,g=[],w=g;if(i)m=!1,d=is;else if(h>=v){var $=t?null:Qh(e);if($)return Ti($);m=!1,d=qe,w=new kr}else w=t?[]:g;e:for(;++a<h;){var P=e[a],R=t?t(P):P;if(P=i||P!==0?P:0,m&&R===R){for(var V=w.length;V--;)if(w[V]===R)continue e;t&&w.push(R),g.push(P)}else d(w,R,i)||(w!==g&&w.push(R),g.push(P))}return g}function jl(e,t){return t=ur(t,e),e=ud(e,t),e==null||delete e[_i(On(t))]}function Rc(e,t,i,a){return wo(e,t,i(Lr(e,t)),a)}function wa(e,t,i,a){for(var d=e.length,h=a?d:-1;(a?h--:++h<d)&&t(e[h],h,e););return i?In(e,a?0:h,a?h+1:d):In(e,a?h+1:0,a?d:h)}function Mc(e,t){var i=e;return i instanceof Ce&&(i=i.value()),oo(t,function(a,d){return d.func.apply(d.thisArg,si([a],d.args))},i)}function Ql(e,t,i){var a=e.length;if(a<2)return a?lr(e[0]):[];for(var d=-1,h=A(a);++d<a;)for(var m=e[d],g=-1;++g<a;)g!=d&&(h[d]=go(h[d]||m,e[g],t,i));return lr(At(h,1),t,i)}function Fc(e,t,i){for(var a=-1,d=e.length,h=t.length,m={};++a<d;){var g=a<h?t[a]:r;i(m,e[a],g)}return m}function Xl(e){return st(e)?e:[]}function Jl(e){return typeof e=="function"?e:rn}function ur(e,t){return pe(e)?e:au(e,t)?[e]:pd(Fe(e))}var Bh=ye;function cr(e,t,i){var a=e.length;return i=i===r?a:i,!t&&i>=a?e:In(e,t,i)}var qc=le||function(e){return je.clearTimeout(e)};function Bc(e,t){if(t)return e.slice();var i=e.length,a=o?o(i):new e.constructor(i);return e.copy(a),a}function Zl(e){var t=new e.constructor(e.byteLength);return new ds(t).set(new ds(e)),t}function Wh(e,t){var i=t?Zl(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function Uh(e){var t=new e.constructor(e.source,xr.exec(e));return t.lastIndex=e.lastIndex,t}function Hh(e){return vo?Pe(vo.call(e)):{}}function Wc(e,t){var i=t?Zl(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function Uc(e,t){if(e!==t){var i=e!==r,a=e===null,d=e===e,h=vn(e),m=t!==r,g=t===null,w=t===t,$=vn(t);if(!g&&!$&&!h&&e>t||h&&m&&w&&!g&&!$||a&&m&&w||!i&&w||!d)return 1;if(!a&&!h&&!$&&e<t||$&&i&&d&&!a&&!h||g&&i&&d||!m&&d||!w)return-1}return 0}function Vh(e,t,i){for(var a=-1,d=e.criteria,h=t.criteria,m=d.length,g=i.length;++a<m;){var w=Uc(d[a],h[a]);if(w){if(a>=g)return w;var $=i[a];return w*($=="desc"?-1:1)}}return e.index-t.index}function Hc(e,t,i,a){for(var d=-1,h=e.length,m=i.length,g=-1,w=t.length,$=Y(h-m,0),P=A(w+$),R=!a;++g<w;)P[g]=t[g];for(;++d<m;)(R||d<h)&&(P[i[d]]=e[d]);for(;$--;)P[g++]=e[d++];return P}function Vc(e,t,i,a){for(var d=-1,h=e.length,m=-1,g=i.length,w=-1,$=t.length,P=Y(h-g,0),R=A(P+$),V=!a;++d<P;)R[d]=e[d];for(var j=d;++w<$;)R[j+w]=t[w];for(;++m<g;)(V||d<h)&&(R[j+i[m]]=e[d++]);return R}function en(e,t){var i=-1,a=e.length;for(t||(t=A(a));++i<a;)t[i]=e[i];return t}function hi(e,t,i,a){var d=!i;i||(i={});for(var h=-1,m=t.length;++h<m;){var g=t[h],w=a?a(i[g],e[g],g,i,e):r;w===r&&(w=e[g]),d?Di(i,g,w):mo(i,g,w)}return i}function zh(e,t){return hi(e,ou(e),t)}function Kh(e,t){return hi(e,id(e),t)}function Ea(e,t){return function(i,a){var d=pe(i)?xl:hh,h=t?t():{};return d(i,e,ne(a,2),h)}}function _s(e){return ye(function(t,i){var a=-1,d=i.length,h=d>1?i[d-1]:r,m=d>2?i[2]:r;for(h=e.length>3&&typeof h=="function"?(d--,h):r,m&&Bt(i[0],i[1],m)&&(h=d<3?r:h,d=1),t=Pe(t);++a<d;){var g=i[a];g&&e(t,g,a,h)}return t})}function zc(e,t){return function(i,a){if(i==null)return i;if(!tn(i))return e(i,a);for(var d=i.length,h=t?d:-1,m=Pe(i);(t?h--:++h<d)&&a(m[h],h,m)!==!1;);return i}}function Kc(e){return function(t,i,a){for(var d=-1,h=Pe(t),m=a(t),g=m.length;g--;){var w=m[e?g:++d];if(i(h[w],w,h)===!1)break}return t}}function Gh(e,t,i){var a=t&ie,d=Eo(e);function h(){var m=this&&this!==je&&this instanceof h?d:e;return m.apply(a?i:this,arguments)}return h}function Gc(e){return function(t){t=Fe(t);var i=nr(t)?pn(t):r,a=i?i[0]:t.charAt(0),d=i?cr(i,1).join(""):t.slice(1);return a[e]()+d}}function vs(e){return function(t){return oo(zd(Vd(t).replace(io,"")),e,"")}}function Eo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=hs(e.prototype),a=e.apply(i,t);return Je(a)?a:i}}function Yh(e,t,i){var a=Eo(e);function d(){for(var h=arguments.length,m=A(h),g=h,w=ms(d);g--;)m[g]=arguments[g];var $=h<3&&m[0]!==w&&m[h-1]!==w?[]:ci(m,w);if(h-=$.length,h<i)return Jc(e,t,xa,d.placeholder,r,m,$,r,r,i-h);var P=this&&this!==je&&this instanceof d?a:e;return Rt(P,this,m)}return d}function Yc(e){return function(t,i,a){var d=Pe(t);if(!tn(t)){var h=ne(i,3);t=gt(t),i=function(g){return h(d[g],g,d)}}var m=e(t,i,a);return m>-1?d[h?t[m]:m]:r}}function jc(e){return $i(function(t){var i=t.length,a=i,d=Tn.prototype.thru;for(e&&t.reverse();a--;){var h=t[a];if(typeof h!="function")throw new Zt(E);if(d&&!m&&Sa(h)=="wrapper")var m=new Tn([],!0)}for(a=m?a:i;++a<i;){h=t[a];var g=Sa(h),w=g=="wrapper"?ru(h):r;w&&lu(w[0])&&w[1]==(Oe|Ie|ae|Be)&&!w[4].length&&w[9]==1?m=m[Sa(w[0])].apply(m,w[3]):m=h.length==1&&lu(h)?m[g]():m.thru(h)}return function(){var $=arguments,P=$[0];if(m&&$.length==1&&pe(P))return m.plant(P).value();for(var R=0,V=i?t[R].apply(this,$):P;++R<i;)V=t[R].call(this,V);return V}})}function xa(e,t,i,a,d,h,m,g,w,$){var P=t&Oe,R=t&ie,V=t&oe,j=t&(Ie|fe),re=t&ke,ve=V?r:Eo(e);function se(){for(var Ee=arguments.length,Se=A(Ee),mn=Ee;mn--;)Se[mn]=arguments[mn];if(j)var Wt=ms(se),gn=li(Se,Wt);if(a&&(Se=Hc(Se,a,d,j)),h&&(Se=Vc(Se,h,m,j)),Ee-=gn,j&&Ee<$){var ot=ci(Se,Wt);return Jc(e,t,xa,se.placeholder,i,Se,ot,g,w,$-Ee)}var Gn=R?i:this,Fi=V?Gn[e]:e;return Ee=Se.length,g?Se=h_(Se,g):re&&Ee>1&&Se.reverse(),P&&w<Ee&&(Se.length=w),this&&this!==je&&this instanceof se&&(Fi=ve||Eo(Fi)),Fi.apply(Gn,Se)}return se}function Qc(e,t){return function(i,a){return Eh(i,e,t(a),{})}}function Aa(e,t){return function(i,a){var d;if(i===r&&a===r)return t;if(i!==r&&(d=i),a!==r){if(d===r)return a;typeof i=="string"||typeof a=="string"?(i=_n(i),a=_n(a)):(i=Pc(i),a=Pc(a)),d=e(i,a)}return d}}function eu(e){return $i(function(t){return t=Ue(t,Mt(ne())),ye(function(i){var a=this;return e(t,function(d){return Rt(d,a,i)})})})}function Ca(e,t){t=t===r?" ":_n(t);var i=t.length;if(i<2)return i?Gl(t,e):t;var a=Gl(t,X(e/ir(t)));return nr(t)?cr(pn(a),0,e).join(""):a.slice(0,e)}function jh(e,t,i,a){var d=t&ie,h=Eo(e);function m(){for(var g=-1,w=arguments.length,$=-1,P=a.length,R=A(P+w),V=this&&this!==je&&this instanceof m?h:e;++$<P;)R[$]=a[$];for(;w--;)R[$++]=arguments[++g];return Rt(V,d?i:this,R)}return m}function Xc(e){return function(t,i,a){return a&&typeof a!="number"&&Bt(t,i,a)&&(i=a=r),t=Mi(t),i===r?(i=t,t=0):i=Mi(i),a=a===r?t<i?1:-1:Mi(a),$h(t,i,a,e)}}function Ta(e){return function(t,i){return typeof t=="string"&&typeof i=="string"||(t=Nn(t),i=Nn(i)),e(t,i)}}function Jc(e,t,i,a,d,h,m,g,w,$){var P=t&Ie,R=P?m:r,V=P?r:m,j=P?h:r,re=P?r:h;t|=P?ae:xe,t&=~(P?xe:ae),t&$e||(t&=-4);var ve=[e,t,d,j,R,re,V,g,w,$],se=i.apply(r,ve);return lu(e)&&cd(se,ve),se.placeholder=a,dd(se,e,t)}function tu(e){var t=Ge[e];return function(i,a){if(i=Nn(i),a=a==null?0:ut(he(a),292),a&&Ft(i)){var d=(Fe(i)+"e").split("e"),h=t(d[0]+"e"+(+d[1]+a));return d=(Fe(h)+"e").split("e"),+(d[0]+"e"+(+d[1]-a))}return t(i)}}var Qh=fs&&1/Ti(new fs([,-0]))[1]==et?function(e){return new fs(e)}:xu;function Zc(e){return function(t){var i=kt(t);return i==St?os(t):i==ft?uo(t):oa(t,e(t))}}function Li(e,t,i,a,d,h,m,g){var w=t&oe;if(!w&&typeof e!="function")throw new Zt(E);var $=a?a.length:0;if($||(t&=-97,a=d=r),m=m===r?m:Y(he(m),0),g=g===r?g:he(g),$-=d?d.length:0,t&xe){var P=a,R=d;a=d=r}var V=w?r:ru(e),j=[e,t,i,a,d,P,R,h,m,g];if(V&&d_(j,V),e=j[0],t=j[1],i=j[2],a=j[3],d=j[4],g=j[9]=j[9]===r?w?0:e.length:Y(j[9]-$,0),!g&&t&(Ie|fe)&&(t&=-25),!t||t==ie)var re=Gh(e,t,i);else t==Ie||t==fe?re=Yh(e,t,g):(t==ae||t==(ie|ae))&&!d.length?re=jh(e,t,i,a):re=xa.apply(r,j);var ve=V?Lc:cd;return dd(ve(re,j),e,t)}function ed(e,t,i,a){return e===r||Kn(e,sr[i])&&!Ae.call(a,i)?t:e}function td(e,t,i,a,d,h){return Je(e)&&Je(t)&&(h.set(t,e),ya(e,t,r,td,h),h.delete(t)),e}function Xh(e){return Co(e)?r:e}function nd(e,t,i,a,d,h){var m=i&te,g=e.length,w=t.length;if(g!=w&&!(m&&w>g))return!1;var $=h.get(e),P=h.get(t);if($&&P)return $==t&&P==e;var R=-1,V=!0,j=i&G?new kr:r;for(h.set(e,t),h.set(t,e);++R<g;){var re=e[R],ve=t[R];if(a)var se=m?a(ve,re,R,t,e,h):a(re,ve,R,e,t,h);if(se!==r){if(se)continue;V=!1;break}if(j){if(!ao(t,function(Ee,Se){if(!qe(j,Se)&&(re===Ee||d(re,Ee,i,a,h)))return j.push(Se)})){V=!1;break}}else if(!(re===ve||d(re,ve,i,a,h))){V=!1;break}}return h.delete(e),h.delete(t),V}function Jh(e,t,i,a,d,h,m){switch(i){case Lt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Xn:return!(e.byteLength!=t.byteLength||!h(new ds(e),new ds(t)));case Dt:case Rn:case bi:return Kn(+e,+t);case Qn:return e.name==t.name&&e.message==t.message;case It:case Ot:return e==t+"";case St:var g=os;case ft:var w=a&te;if(g||(g=Ti),e.size!=t.size&&!w)return!1;var $=m.get(e);if($)return $==t;a|=G,m.set(e,t);var P=nd(g(e),g(t),a,d,h,m);return m.delete(e),P;case _e:if(vo)return vo.call(e)==vo.call(t)}return!1}function Zh(e,t,i,a,d,h){var m=i&te,g=nu(e),w=g.length,$=nu(t),P=$.length;if(w!=P&&!m)return!1;for(var R=w;R--;){var V=g[R];if(!(m?V in t:Ae.call(t,V)))return!1}var j=h.get(e),re=h.get(t);if(j&&re)return j==t&&re==e;var ve=!0;h.set(e,t),h.set(t,e);for(var se=m;++R<w;){V=g[R];var Ee=e[V],Se=t[V];if(a)var mn=m?a(Se,Ee,V,t,e,h):a(Ee,Se,V,e,t,h);if(!(mn===r?Ee===Se||d(Ee,Se,i,a,h):mn)){ve=!1;break}se||(se=V=="constructor")}if(ve&&!se){var Wt=e.constructor,gn=t.constructor;Wt!=gn&&"constructor"in e&&"constructor"in t&&!(typeof Wt=="function"&&Wt instanceof Wt&&typeof gn=="function"&&gn instanceof gn)&&(ve=!1)}return h.delete(e),h.delete(t),ve}function $i(e){return cu(ld(e,r,md),e+"")}function nu(e){return Ec(e,gt,ou)}function iu(e){return Ec(e,nn,id)}var ru=pa?function(e){return pa.get(e)}:xu;function Sa(e){for(var t=e.name+"",i=ps[t],a=Ae.call(ps,t)?i.length:0;a--;){var d=i[a],h=d.func;if(h==null||h==e)return d.name}return t}function ms(e){var t=Ae.call(p,"placeholder")?p:e;return t.placeholder}function ne(){var e=p.iteratee||wu;return e=e===wu?Cc:e,arguments.length?e(arguments[0],arguments[1]):e}function Ia(e,t){var i=e.__data__;return a_(t)?i[typeof t=="string"?"string":"hash"]:i.map}function su(e){for(var t=gt(e),i=t.length;i--;){var a=t[i],d=e[a];t[i]=[a,d,od(d)]}return t}function $r(e,t){var i=Ke(e,t);return Ac(i)?i:r}function e_(e){var t=Ae.call(e,q),i=e[q];try{e[q]=r;var a=!0}catch{}var d=Ir.call(e);return a&&(t?e[q]=i:delete e[q]),d}var ou=Me?function(e){return e==null?[]:(e=Pe(e),An(Me(e),function(t){return _.call(e,t)}))}:Au,id=Me?function(e){for(var t=[];e;)si(t,ou(e)),e=s(e);return t}:Au,kt=qt;(Oi&&kt(new Oi(new ArrayBuffer(1)))!=Lt||or&&kt(new or)!=St||Pl&&kt(Pl.resolve())!=wi||fs&&kt(new fs)!=ft||ho&&kt(new ho)!=nt)&&(kt=function(e){var t=qt(e),i=t==zt?e.constructor:r,a=i?Pr(i):"";if(a)switch(a){case Rp:return Lt;case Mp:return St;case Fp:return wi;case qp:return ft;case Bp:return nt}return t});function t_(e,t,i){for(var a=-1,d=i.length;++a<d;){var h=i[a],m=h.size;switch(h.type){case"drop":e+=m;break;case"dropRight":t-=m;break;case"take":t=ut(t,e+m);break;case"takeRight":e=Y(e,t-m);break}}return{start:e,end:t}}function n_(e){var t=e.match(pt);return t?t[1].split(js):[]}function rd(e,t,i){t=ur(t,e);for(var a=-1,d=t.length,h=!1;++a<d;){var m=_i(t[a]);if(!(h=e!=null&&i(e,m)))break;e=e[m]}return h||++a!=d?h:(d=e==null?0:e.length,!!d&&Pa(d)&&Pi(m,d)&&(pe(e)||Rr(e)))}function i_(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&Ae.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function sd(e){return typeof e.constructor=="function"&&!xo(e)?hs(s(e)):{}}function r_(e,t,i){var a=e.constructor;switch(t){case Xn:return Zl(e);case Dt:case Rn:return new a(+e);case Lt:return Wh(e,i);case Bs:case Jn:case Ws:case Us:case Ei:case Zn:case _t:case Hs:case Vs:return Wc(e,i);case St:return new a;case bi:case Ot:return new a(e);case It:return Uh(e);case ft:return new a;case _e:return Hh(e)}}function s_(e,t){var i=t.length;if(!i)return e;var a=i-1;return t[a]=(i>1?"& ":"")+t[a],t=t.join(i>2?", ":" "),e.replace(ce,`{
/* [wrapped with `+t+`] */
`)}function o_(e){return pe(e)||Rr(e)||!!(O&&e&&e[O])}function Pi(e,t){var i=typeof e;return t=t??Te,!!t&&(i=="number"||i!="symbol"&&Bn.test(e))&&e>-1&&e%1==0&&e<t}function Bt(e,t,i){if(!Je(i))return!1;var a=typeof t;return(a=="number"?tn(i)&&Pi(t,i.length):a=="string"&&t in i)?Kn(i[t],e):!1}function au(e,t){if(pe(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||vn(e)?!0:cl.test(e)||!ul.test(e)||t!=null&&e in Pe(t)}function a_(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function lu(e){var t=Sa(e),i=p[t];if(typeof i!="function"||!(t in Ce.prototype))return!1;if(e===i)return!0;var a=ru(i);return!!a&&e===a[0]}function l_(e){return!!fo&&fo in e}var u_=ls?Ri:Cu;function xo(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||sr;return e===i}function od(e){return e===e&&!Je(e)}function ad(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==r||e in Pe(i))}}function c_(e){var t=La(e,function(a){return i.size===U&&i.clear(),a}),i=t.cache;return t}function d_(e,t){var i=e[1],a=t[1],d=i|a,h=d<(ie|oe|Oe),m=a==Oe&&i==Ie||a==Oe&&i==Be&&e[7].length<=t[8]||a==(Oe|Be)&&t[7].length<=t[8]&&i==Ie;if(!(h||m))return e;a&ie&&(e[2]=t[2],d|=i&ie?0:$e);var g=t[3];if(g){var w=e[3];e[3]=w?Hc(w,g,t[4]):g,e[4]=w?ci(e[3],L):t[4]}return g=t[5],g&&(w=e[5],e[5]=w?Vc(w,g,t[6]):g,e[6]=w?ci(e[5],L):t[6]),g=t[7],g&&(e[7]=g),a&Oe&&(e[8]=e[8]==null?t[8]:ut(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=d,e}function f_(e){var t=[];if(e!=null)for(var i in Pe(e))t.push(i);return t}function p_(e){return Ir.call(e)}function ld(e,t,i){return t=Y(t===r?e.length-1:t,0),function(){for(var a=arguments,d=-1,h=Y(a.length-t,0),m=A(h);++d<h;)m[d]=a[t+d];d=-1;for(var g=A(t+1);++d<t;)g[d]=a[d];return g[t]=i(m),Rt(e,this,g)}}function ud(e,t){return t.length<2?e:Lr(e,In(t,0,-1))}function h_(e,t){for(var i=e.length,a=ut(t.length,i),d=en(e);a--;){var h=t[a];e[a]=Pi(h,i)?d[h]:r}return e}function uu(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var cd=fd(Lc),Ao=Xe||function(e,t){return je.setTimeout(e,t)},cu=fd(Mh);function dd(e,t,i){var a=t+"";return cu(e,s_(a,__(n_(a),i)))}function fd(e){var t=0,i=0;return function(){var a=po(),d=Ne-(a-i);if(i=a,d>0){if(++t>=bt)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Oa(e,t){var i=-1,a=e.length,d=a-1;for(t=t===r?a:t;++i<t;){var h=Kl(i,d),m=e[h];e[h]=e[i],e[i]=m}return e.length=t,e}var pd=c_(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace($t,function(i,a,d,h){t.push(d?h.replace(qn,"$1"):a||i)}),t});function _i(e){if(typeof e=="string"||vn(e))return e;var t=e+"";return t=="0"&&1/e==-et?"-0":t}function Pr(e){if(e!=null){try{return Sr.call(e)}catch{}try{return e+""}catch{}}return""}function __(e,t){return Xt(Pn,function(i){var a="_."+i[0];t&i[1]&&!ri(e,a)&&e.push(a)}),e.sort()}function hd(e){if(e instanceof Ce)return e.clone();var t=new Tn(e.__wrapped__,e.__chain__);return t.__actions__=en(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function v_(e,t,i){(i?Bt(e,t,i):t===r)?t=1:t=Y(he(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var d=0,h=0,m=A(X(a/t));d<a;)m[h++]=In(e,d,d+=t);return m}function m_(e){for(var t=-1,i=e==null?0:e.length,a=0,d=[];++t<i;){var h=e[t];h&&(d[a++]=h)}return d}function g_(){var e=arguments.length;if(!e)return[];for(var t=A(e-1),i=arguments[0],a=e;a--;)t[a-1]=arguments[a];return si(pe(i)?en(i):[i],At(t,1))}var y_=ye(function(e,t){return st(e)?go(e,At(t,1,st,!0)):[]}),b_=ye(function(e,t){var i=On(t);return st(i)&&(i=r),st(e)?go(e,At(t,1,st,!0),ne(i,2)):[]}),w_=ye(function(e,t){var i=On(t);return st(i)&&(i=r),st(e)?go(e,At(t,1,st,!0),r,i):[]});function E_(e,t,i){var a=e==null?0:e.length;return a?(t=i||t===r?1:he(t),In(e,t<0?0:t,a)):[]}function x_(e,t,i){var a=e==null?0:e.length;return a?(t=i||t===r?1:he(t),t=a-t,In(e,0,t<0?0:t)):[]}function A_(e,t){return e&&e.length?wa(e,ne(t,3),!0,!0):[]}function C_(e,t){return e&&e.length?wa(e,ne(t,3),!0):[]}function T_(e,t,i,a){var d=e==null?0:e.length;return d?(i&&typeof i!="number"&&Bt(e,t,i)&&(i=0,a=d),gh(e,t,i,a)):[]}function _d(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var d=i==null?0:he(i);return d<0&&(d=Y(a+d,0)),ai(e,ne(t,3),d)}function vd(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var d=a-1;return i!==r&&(d=he(i),d=i<0?Y(a+d,0):ut(d,a-1)),ai(e,ne(t,3),d,!0)}function md(e){var t=e==null?0:e.length;return t?At(e,1):[]}function S_(e){var t=e==null?0:e.length;return t?At(e,et):[]}function I_(e,t){var i=e==null?0:e.length;return i?(t=t===r?1:he(t),At(e,t)):[]}function O_(e){for(var t=-1,i=e==null?0:e.length,a={};++t<i;){var d=e[t];a[d[0]]=d[1]}return a}function gd(e){return e&&e.length?e[0]:r}function N_(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var d=i==null?0:he(i);return d<0&&(d=Y(a+d,0)),Ji(e,t,d)}function k_(e){var t=e==null?0:e.length;return t?In(e,0,-1):[]}var D_=ye(function(e){var t=Ue(e,Xl);return t.length&&t[0]===e[0]?Wl(t):[]}),L_=ye(function(e){var t=On(e),i=Ue(e,Xl);return t===On(i)?t=r:i.pop(),i.length&&i[0]===e[0]?Wl(i,ne(t,2)):[]}),$_=ye(function(e){var t=On(e),i=Ue(e,Xl);return t=typeof t=="function"?t:r,t&&i.pop(),i.length&&i[0]===e[0]?Wl(i,r,t):[]});function P_(e,t){return e==null?"":Or.call(e,t)}function On(e){var t=e==null?0:e.length;return t?e[t-1]:r}function R_(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var d=a;return i!==r&&(d=he(i),d=d<0?Y(a+d,0):ut(d,a-1)),t===t?Ol(e,t,d):ai(e,na,d,!0)}function M_(e,t){return e&&e.length?Oc(e,he(t)):r}var F_=ye(yd);function yd(e,t){return e&&e.length&&t&&t.length?zl(e,t):e}function q_(e,t,i){return e&&e.length&&t&&t.length?zl(e,t,ne(i,2)):e}function B_(e,t,i){return e&&e.length&&t&&t.length?zl(e,t,r,i):e}var W_=$i(function(e,t){var i=e==null?0:e.length,a=Ml(e,t);return Dc(e,Ue(t,function(d){return Pi(d,i)?+d:d}).sort(Uc)),a});function U_(e,t){var i=[];if(!(e&&e.length))return i;var a=-1,d=[],h=e.length;for(t=ne(t,3);++a<h;){var m=e[a];t(m,a,e)&&(i.push(m),d.push(a))}return Dc(e,d),i}function du(e){return e==null?e:fi.call(e)}function H_(e,t,i){var a=e==null?0:e.length;return a?(i&&typeof i!="number"&&Bt(e,t,i)?(t=0,i=a):(t=t==null?0:he(t),i=i===r?a:he(i)),In(e,t,i)):[]}function V_(e,t){return ba(e,t)}function z_(e,t,i){return Yl(e,t,ne(i,2))}function K_(e,t){var i=e==null?0:e.length;if(i){var a=ba(e,t);if(a<i&&Kn(e[a],t))return a}return-1}function G_(e,t){return ba(e,t,!0)}function Y_(e,t,i){return Yl(e,t,ne(i,2),!0)}function j_(e,t){var i=e==null?0:e.length;if(i){var a=ba(e,t,!0)-1;if(Kn(e[a],t))return a}return-1}function Q_(e){return e&&e.length?$c(e):[]}function X_(e,t){return e&&e.length?$c(e,ne(t,2)):[]}function J_(e){var t=e==null?0:e.length;return t?In(e,1,t):[]}function Z_(e,t,i){return e&&e.length?(t=i||t===r?1:he(t),In(e,0,t<0?0:t)):[]}function ev(e,t,i){var a=e==null?0:e.length;return a?(t=i||t===r?1:he(t),t=a-t,In(e,t<0?0:t,a)):[]}function tv(e,t){return e&&e.length?wa(e,ne(t,3),!1,!0):[]}function nv(e,t){return e&&e.length?wa(e,ne(t,3)):[]}var iv=ye(function(e){return lr(At(e,1,st,!0))}),rv=ye(function(e){var t=On(e);return st(t)&&(t=r),lr(At(e,1,st,!0),ne(t,2))}),sv=ye(function(e){var t=On(e);return t=typeof t=="function"?t:r,lr(At(e,1,st,!0),r,t)});function ov(e){return e&&e.length?lr(e):[]}function av(e,t){return e&&e.length?lr(e,ne(t,2)):[]}function lv(e,t){return t=typeof t=="function"?t:r,e&&e.length?lr(e,r,t):[]}function fu(e){if(!(e&&e.length))return[];var t=0;return e=An(e,function(i){if(st(i))return t=Y(i.length,t),!0}),er(t,function(i){return Ue(e,Ci(i))})}function bd(e,t){if(!(e&&e.length))return[];var i=fu(e);return t==null?i:Ue(i,function(a){return Rt(t,r,a)})}var uv=ye(function(e,t){return st(e)?go(e,t):[]}),cv=ye(function(e){return Ql(An(e,st))}),dv=ye(function(e){var t=On(e);return st(t)&&(t=r),Ql(An(e,st),ne(t,2))}),fv=ye(function(e){var t=On(e);return t=typeof t=="function"?t:r,Ql(An(e,st),r,t)}),pv=ye(fu);function hv(e,t){return Fc(e||[],t||[],mo)}function _v(e,t){return Fc(e||[],t||[],wo)}var vv=ye(function(e){var t=e.length,i=t>1?e[t-1]:r;return i=typeof i=="function"?(e.pop(),i):r,bd(e,i)});function wd(e){var t=p(e);return t.__chain__=!0,t}function mv(e,t){return t(e),e}function Na(e,t){return t(e)}var gv=$i(function(e){var t=e.length,i=t?e[0]:0,a=this.__wrapped__,d=function(h){return Ml(h,e)};return t>1||this.__actions__.length||!(a instanceof Ce)||!Pi(i)?this.thru(d):(a=a.slice(i,+i+(t?1:0)),a.__actions__.push({func:Na,args:[d],thisArg:r}),new Tn(a,this.__chain__).thru(function(h){return t&&!h.length&&h.push(r),h}))});function yv(){return wd(this)}function bv(){return new Tn(this.value(),this.__chain__)}function wv(){this.__values__===r&&(this.__values__=Pd(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}}function Ev(){return this}function xv(e){for(var t,i=this;i instanceof _a;){var a=hd(i);a.__index__=0,a.__values__=r,t?d.__wrapped__=a:t=a;var d=a;i=i.__wrapped__}return d.__wrapped__=e,t}function Av(){var e=this.__wrapped__;if(e instanceof Ce){var t=e;return this.__actions__.length&&(t=new Ce(this)),t=t.reverse(),t.__actions__.push({func:Na,args:[du],thisArg:r}),new Tn(t,this.__chain__)}return this.thru(du)}function Cv(){return Mc(this.__wrapped__,this.__actions__)}var Tv=Ea(function(e,t,i){Ae.call(e,i)?++e[i]:Di(e,i,1)});function Sv(e,t,i){var a=pe(e)?ta:mh;return i&&Bt(e,t,i)&&(t=r),a(e,ne(t,3))}function Iv(e,t){var i=pe(e)?An:bc;return i(e,ne(t,3))}var Ov=Yc(_d),Nv=Yc(vd);function kv(e,t){return At(ka(e,t),1)}function Dv(e,t){return At(ka(e,t),et)}function Lv(e,t,i){return i=i===r?1:he(i),At(ka(e,t),i)}function Ed(e,t){var i=pe(e)?Xt:ar;return i(e,ne(t,3))}function xd(e,t){var i=pe(e)?ea:yc;return i(e,ne(t,3))}var $v=Ea(function(e,t,i){Ae.call(e,i)?e[i].push(t):Di(e,i,[t])});function Pv(e,t,i,a){e=tn(e)?e:ys(e),i=i&&!a?he(i):0;var d=e.length;return i<0&&(i=Y(d+i,0)),Ra(e)?i<=d&&e.indexOf(t,i)>-1:!!d&&Ji(e,t,i)>-1}var Rv=ye(function(e,t,i){var a=-1,d=typeof t=="function",h=tn(e)?A(e.length):[];return ar(e,function(m){h[++a]=d?Rt(t,m,i):yo(m,t,i)}),h}),Mv=Ea(function(e,t,i){Di(e,i,t)});function ka(e,t){var i=pe(e)?Ue:Tc;return i(e,ne(t,3))}function Fv(e,t,i,a){return e==null?[]:(pe(t)||(t=t==null?[]:[t]),i=a?r:i,pe(i)||(i=i==null?[]:[i]),Nc(e,t,i))}var qv=Ea(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});function Bv(e,t,i){var a=pe(e)?oo:ra,d=arguments.length<3;return a(e,ne(t,4),i,d,ar)}function Wv(e,t,i){var a=pe(e)?Al:ra,d=arguments.length<3;return a(e,ne(t,4),i,d,yc)}function Uv(e,t){var i=pe(e)?An:bc;return i(e,$a(ne(t,3)))}function Hv(e){var t=pe(e)?_c:Ph;return t(e)}function Vv(e,t,i){(i?Bt(e,t,i):t===r)?t=1:t=he(t);var a=pe(e)?fh:Rh;return a(e,t)}function zv(e){var t=pe(e)?ph:Fh;return t(e)}function Kv(e){if(e==null)return 0;if(tn(e))return Ra(e)?ir(e):e.length;var t=kt(e);return t==St||t==ft?e.size:Hl(e).length}function Gv(e,t,i){var a=pe(e)?ao:qh;return i&&Bt(e,t,i)&&(t=r),a(e,ne(t,3))}var Yv=ye(function(e,t){if(e==null)return[];var i=t.length;return i>1&&Bt(e,t[0],t[1])?t=[]:i>2&&Bt(t[0],t[1],t[2])&&(t=[t[0]]),Nc(e,At(t,1),[])}),Da=we||function(){return je.Date.now()};function jv(e,t){if(typeof t!="function")throw new Zt(E);return e=he(e),function(){if(--e<1)return t.apply(this,arguments)}}function Ad(e,t,i){return t=i?r:t,t=e&&t==null?e.length:t,Li(e,Oe,r,r,r,r,t)}function Cd(e,t){var i;if(typeof t!="function")throw new Zt(E);return e=he(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=r),i}}var pu=ye(function(e,t,i){var a=ie;if(i.length){var d=ci(i,ms(pu));a|=ae}return Li(e,a,t,i,d)}),Td=ye(function(e,t,i){var a=ie|oe;if(i.length){var d=ci(i,ms(Td));a|=ae}return Li(t,a,e,i,d)});function Sd(e,t,i){t=i?r:t;var a=Li(e,Ie,r,r,r,r,r,t);return a.placeholder=Sd.placeholder,a}function Id(e,t,i){t=i?r:t;var a=Li(e,fe,r,r,r,r,r,t);return a.placeholder=Id.placeholder,a}function Od(e,t,i){var a,d,h,m,g,w,$=0,P=!1,R=!1,V=!0;if(typeof e!="function")throw new Zt(E);t=Nn(t)||0,Je(i)&&(P=!!i.leading,R="maxWait"in i,h=R?Y(Nn(i.maxWait)||0,t):h,V="trailing"in i?!!i.trailing:V);function j(ot){var Gn=a,Fi=d;return a=d=r,$=ot,m=e.apply(Fi,Gn),m}function re(ot){return $=ot,g=Ao(Ee,t),P?j(ot):m}function ve(ot){var Gn=ot-w,Fi=ot-$,Yd=t-Gn;return R?ut(Yd,h-Fi):Yd}function se(ot){var Gn=ot-w,Fi=ot-$;return w===r||Gn>=t||Gn<0||R&&Fi>=h}function Ee(){var ot=Da();if(se(ot))return Se(ot);g=Ao(Ee,ve(ot))}function Se(ot){return g=r,V&&a?j(ot):(a=d=r,m)}function mn(){g!==r&&qc(g),$=0,a=w=d=g=r}function Wt(){return g===r?m:Se(Da())}function gn(){var ot=Da(),Gn=se(ot);if(a=arguments,d=this,w=ot,Gn){if(g===r)return re(w);if(R)return qc(g),g=Ao(Ee,t),j(w)}return g===r&&(g=Ao(Ee,t)),m}return gn.cancel=mn,gn.flush=Wt,gn}var Qv=ye(function(e,t){return gc(e,1,t)}),Xv=ye(function(e,t,i){return gc(e,Nn(t)||0,i)});function Jv(e){return Li(e,ke)}function La(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Zt(E);var i=function(){var a=arguments,d=t?t.apply(this,a):a[0],h=i.cache;if(h.has(d))return h.get(d);var m=e.apply(this,a);return i.cache=h.set(d,m)||h,m};return i.cache=new(La.Cache||ki),i}La.Cache=ki;function $a(e){if(typeof e!="function")throw new Zt(E);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Zv(e){return Cd(2,e)}var em=Bh(function(e,t){t=t.length==1&&pe(t[0])?Ue(t[0],Mt(ne())):Ue(At(t,1),Mt(ne()));var i=t.length;return ye(function(a){for(var d=-1,h=ut(a.length,i);++d<h;)a[d]=t[d].call(this,a[d]);return Rt(e,this,a)})}),hu=ye(function(e,t){var i=ci(t,ms(hu));return Li(e,ae,r,t,i)}),Nd=ye(function(e,t){var i=ci(t,ms(Nd));return Li(e,xe,r,t,i)}),tm=$i(function(e,t){return Li(e,Be,r,r,r,t)});function nm(e,t){if(typeof e!="function")throw new Zt(E);return t=t===r?t:he(t),ye(e,t)}function im(e,t){if(typeof e!="function")throw new Zt(E);return t=t==null?0:Y(he(t),0),ye(function(i){var a=i[t],d=cr(i,0,t);return a&&si(d,a),Rt(e,this,d)})}function rm(e,t,i){var a=!0,d=!0;if(typeof e!="function")throw new Zt(E);return Je(i)&&(a="leading"in i?!!i.leading:a,d="trailing"in i?!!i.trailing:d),Od(e,t,{leading:a,maxWait:t,trailing:d})}function sm(e){return Ad(e,1)}function om(e,t){return hu(Jl(t),e)}function am(){if(!arguments.length)return[];var e=arguments[0];return pe(e)?e:[e]}function lm(e){return Sn(e,K)}function um(e,t){return t=typeof t=="function"?t:r,Sn(e,K,t)}function cm(e){return Sn(e,H|K)}function dm(e,t){return t=typeof t=="function"?t:r,Sn(e,H|K,t)}function fm(e,t){return t==null||mc(e,t,gt(t))}function Kn(e,t){return e===t||e!==e&&t!==t}var pm=Ta(Bl),hm=Ta(function(e,t){return e>=t}),Rr=xc((function(){return arguments})())?xc:function(e){return tt(e)&&Ae.call(e,"callee")&&!_.call(e,"callee")},pe=A.isArray,_m=Jo?Mt(Jo):xh;function tn(e){return e!=null&&Pa(e.length)&&!Ri(e)}function st(e){return tt(e)&&tn(e)}function vm(e){return e===!0||e===!1||tt(e)&&qt(e)==Dt}var dr=lt||Cu,mm=ii?Mt(ii):Ah;function gm(e){return tt(e)&&e.nodeType===1&&!Co(e)}function ym(e){if(e==null)return!0;if(tn(e)&&(pe(e)||typeof e=="string"||typeof e.splice=="function"||dr(e)||gs(e)||Rr(e)))return!e.length;var t=kt(e);if(t==St||t==ft)return!e.size;if(xo(e))return!Hl(e).length;for(var i in e)if(Ae.call(e,i))return!1;return!0}function bm(e,t){return bo(e,t)}function wm(e,t,i){i=typeof i=="function"?i:r;var a=i?i(e,t):r;return a===r?bo(e,t,r,i):!!a}function _u(e){if(!tt(e))return!1;var t=qt(e);return t==Qn||t==Fs||typeof e.message=="string"&&typeof e.name=="string"&&!Co(e)}function Em(e){return typeof e=="number"&&Ft(e)}function Ri(e){if(!Je(e))return!1;var t=qt(e);return t==Vi||t==br||t==Hi||t==qs}function kd(e){return typeof e=="number"&&e==he(e)}function Pa(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Te}function Je(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function tt(e){return e!=null&&typeof e=="object"}var Dd=rt?Mt(rt):Th;function xm(e,t){return e===t||Ul(e,t,su(t))}function Am(e,t,i){return i=typeof i=="function"?i:r,Ul(e,t,su(t),i)}function Cm(e){return Ld(e)&&e!=+e}function Tm(e){if(u_(e))throw new de(b);return Ac(e)}function Sm(e){return e===null}function Im(e){return e==null}function Ld(e){return typeof e=="number"||tt(e)&&qt(e)==bi}function Co(e){if(!tt(e)||qt(e)!=zt)return!1;var t=s(e);if(t===null)return!0;var i=Ae.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&Sr.call(i)==da}var vu=Vn?Mt(Vn):Sh;function Om(e){return kd(e)&&e>=-Te&&e<=Te}var $d=Ai?Mt(Ai):Ih;function Ra(e){return typeof e=="string"||!pe(e)&&tt(e)&&qt(e)==Ot}function vn(e){return typeof e=="symbol"||tt(e)&&qt(e)==_e}var gs=Zo?Mt(Zo):Oh;function Nm(e){return e===r}function km(e){return tt(e)&&kt(e)==nt}function Dm(e){return tt(e)&&qt(e)==xt}var Lm=Ta(Vl),$m=Ta(function(e,t){return e<=t});function Pd(e){if(!e)return[];if(tn(e))return Ra(e)?pn(e):en(e);if(T&&e[T])return Jt(e[T]());var t=kt(e),i=t==St?os:t==ft?Ti:ys;return i(e)}function Mi(e){if(!e)return e===0?e:0;if(e=Nn(e),e===et||e===-et){var t=e<0?-1:1;return t*En}return e===e?e:0}function he(e){var t=Mi(e),i=t%1;return t===t?i?t-i:t:0}function Rd(e){return e?Dr(he(e),0,Tt):0}function Nn(e){if(typeof e=="number")return e;if(vn(e))return Vt;if(Je(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Je(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=aa(e);var i=pl.test(e);return i||Ar.test(e)?El(e.slice(2),i?2:8):fl.test(e)?Vt:+e}function Md(e){return hi(e,nn(e))}function Pm(e){return e?Dr(he(e),-Te,Te):e===0?e:0}function Fe(e){return e==null?"":_n(e)}var Rm=_s(function(e,t){if(xo(t)||tn(t)){hi(t,gt(t),e);return}for(var i in t)Ae.call(t,i)&&mo(e,i,t[i])}),Fd=_s(function(e,t){hi(t,nn(t),e)}),Ma=_s(function(e,t,i,a){hi(t,nn(t),e,a)}),Mm=_s(function(e,t,i,a){hi(t,gt(t),e,a)}),Fm=$i(Ml);function qm(e,t){var i=hs(e);return t==null?i:vc(i,t)}var Bm=ye(function(e,t){e=Pe(e);var i=-1,a=t.length,d=a>2?t[2]:r;for(d&&Bt(t[0],t[1],d)&&(a=1);++i<a;)for(var h=t[i],m=nn(h),g=-1,w=m.length;++g<w;){var $=m[g],P=e[$];(P===r||Kn(P,sr[$])&&!Ae.call(e,$))&&(e[$]=h[$])}return e}),Wm=ye(function(e){return e.push(r,td),Rt(qd,r,e)});function Um(e,t){return oi(e,ne(t,3),pi)}function Hm(e,t){return oi(e,ne(t,3),ql)}function Vm(e,t){return e==null?e:Fl(e,ne(t,3),nn)}function zm(e,t){return e==null?e:wc(e,ne(t,3),nn)}function Km(e,t){return e&&pi(e,ne(t,3))}function Gm(e,t){return e&&ql(e,ne(t,3))}function Ym(e){return e==null?[]:ga(e,gt(e))}function jm(e){return e==null?[]:ga(e,nn(e))}function mu(e,t,i){var a=e==null?r:Lr(e,t);return a===r?i:a}function Qm(e,t){return e!=null&&rd(e,t,yh)}function gu(e,t){return e!=null&&rd(e,t,bh)}var Xm=Qc(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=Ir.call(t)),e[t]=i},bu(rn)),Jm=Qc(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=Ir.call(t)),Ae.call(e,t)?e[t].push(i):e[t]=[i]},ne),Zm=ye(yo);function gt(e){return tn(e)?hc(e):Hl(e)}function nn(e){return tn(e)?hc(e,!0):Nh(e)}function eg(e,t){var i={};return t=ne(t,3),pi(e,function(a,d,h){Di(i,t(a,d,h),a)}),i}function tg(e,t){var i={};return t=ne(t,3),pi(e,function(a,d,h){Di(i,d,t(a,d,h))}),i}var ng=_s(function(e,t,i){ya(e,t,i)}),qd=_s(function(e,t,i,a){ya(e,t,i,a)}),ig=$i(function(e,t){var i={};if(e==null)return i;var a=!1;t=Ue(t,function(h){return h=ur(h,e),a||(a=h.length>1),h}),hi(e,iu(e),i),a&&(i=Sn(i,H|J|K,Xh));for(var d=t.length;d--;)jl(i,t[d]);return i});function rg(e,t){return Bd(e,$a(ne(t)))}var sg=$i(function(e,t){return e==null?{}:Dh(e,t)});function Bd(e,t){if(e==null)return{};var i=Ue(iu(e),function(a){return[a]});return t=ne(t),kc(e,i,function(a,d){return t(a,d[0])})}function og(e,t,i){t=ur(t,e);var a=-1,d=t.length;for(d||(d=1,e=r);++a<d;){var h=e==null?r:e[_i(t[a])];h===r&&(a=d,h=i),e=Ri(h)?h.call(e):h}return e}function ag(e,t,i){return e==null?e:wo(e,t,i)}function lg(e,t,i,a){return a=typeof a=="function"?a:r,e==null?e:wo(e,t,i,a)}var Wd=Zc(gt),Ud=Zc(nn);function ug(e,t,i){var a=pe(e),d=a||dr(e)||gs(e);if(t=ne(t,4),i==null){var h=e&&e.constructor;d?i=a?new h:[]:Je(e)?i=Ri(h)?hs(s(e)):{}:i={}}return(d?Xt:pi)(e,function(m,g,w){return t(i,m,g,w)}),i}function cg(e,t){return e==null?!0:jl(e,t)}function dg(e,t,i){return e==null?e:Rc(e,t,Jl(i))}function fg(e,t,i,a){return a=typeof a=="function"?a:r,e==null?e:Rc(e,t,Jl(i),a)}function ys(e){return e==null?[]:ze(e,gt(e))}function pg(e){return e==null?[]:ze(e,nn(e))}function hg(e,t,i){return i===r&&(i=t,t=r),i!==r&&(i=Nn(i),i=i===i?i:0),t!==r&&(t=Nn(t),t=t===t?t:0),Dr(Nn(e),t,i)}function _g(e,t,i){return t=Mi(t),i===r?(i=t,t=0):i=Mi(i),e=Nn(e),wh(e,t,i)}function vg(e,t,i){if(i&&typeof i!="boolean"&&Bt(e,t,i)&&(t=i=r),i===r&&(typeof t=="boolean"?(i=t,t=r):typeof e=="boolean"&&(i=e,e=r)),e===r&&t===r?(e=0,t=1):(e=Mi(e),t===r?(t=e,e=0):t=Mi(t)),e>t){var a=e;e=t,t=a}if(i||e%1||t%1){var d=fa();return ut(e+d*(t-e+ti("1e-"+((d+"").length-1))),t)}return Kl(e,t)}var mg=vs(function(e,t,i){return t=t.toLowerCase(),e+(i?Hd(t):t)});function Hd(e){return yu(Fe(e).toLowerCase())}function Vd(e){return e=Fe(e),e&&e.replace(Kt,tr).replace(ml,"")}function gg(e,t,i){e=Fe(e),t=_n(t);var a=e.length;i=i===r?a:Dr(he(i),0,a);var d=i;return i-=t.length,i>=0&&e.slice(i,d)==t}function yg(e){return e=Fe(e),e&&Gs.test(e)?e.replace(wr,ui):e}function bg(e){return e=Fe(e),e&&Fn.test(e)?e.replace(Er,"\\$&"):e}var wg=vs(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),Eg=vs(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),xg=Gc("toLowerCase");function Ag(e,t,i){e=Fe(e),t=he(t);var a=t?ir(e):0;if(!t||a>=t)return e;var d=(t-a)/2;return Ca(Le(d),i)+e+Ca(X(d),i)}function Cg(e,t,i){e=Fe(e),t=he(t);var a=t?ir(e):0;return t&&a<t?e+Ca(t-a,i):e}function Tg(e,t,i){e=Fe(e),t=he(t);var a=t?ir(e):0;return t&&a<t?Ca(t-a,i)+e:e}function Sg(e,t,i){return i||t==null?t=0:t&&(t=+t),$l(Fe(e).replace(ln,""),t||0)}function Ig(e,t,i){return(i?Bt(e,t,i):t===r)?t=1:t=he(t),Gl(Fe(e),t)}function Og(){var e=arguments,t=Fe(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Ng=vs(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});function kg(e,t,i){return i&&typeof i!="number"&&Bt(e,t,i)&&(t=i=r),i=i===r?Tt:i>>>0,i?(e=Fe(e),e&&(typeof t=="string"||t!=null&&!vu(t))&&(t=_n(t),!t&&nr(e))?cr(pn(e),0,i):e.split(t,i)):[]}var Dg=vs(function(e,t,i){return e+(i?" ":"")+yu(t)});function Lg(e,t,i){return e=Fe(e),i=i==null?0:Dr(he(i),0,e.length),t=_n(t),e.slice(i,i+t.length)==t}function $g(e,t,i){var a=p.templateSettings;i&&Bt(e,t,i)&&(t=r),e=Fe(e),t=Ma({},t,a,ed);var d=Ma({},t.imports,a.imports,ed),h=gt(d),m=ze(d,h),g,w,$=0,P=t.interpolate||zi,R="__p += '",V=hn((t.escape||zi).source+"|"+P.source+"|"+(P===Kr?dl:zi).source+"|"+(t.evaluate||zi).source+"|$","g"),j="//# sourceURL="+(Ae.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++es+"]")+`
`;e.replace(V,function(se,Ee,Se,mn,Wt,gn){return Se||(Se=mn),R+=e.slice($,gn).replace(Qs,ss),Ee&&(g=!0,R+=`' +
__e(`+Ee+`) +
'`),Wt&&(w=!0,R+=`';
`+Wt+`;
__p += '`),Se&&(R+=`' +
((__t = (`+Se+`)) == null ? '' : __t) +
'`),$=gn+se.length,se}),R+=`';
`;var re=Ae.call(t,"variable")&&t.variable;if(!re)R=`with (obj) {
`+R+`
}
`;else if(at.test(re))throw new de(S);R=(w?R.replace(vt,""):R).replace(qo,"$1").replace(zs,"$1;"),R="function("+(re||"obj")+`) {
`+(re?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(g?", __e = _.escape":"")+(w?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+R+`return __p
}`;var ve=Kd(function(){return De(h,j+"return "+R).apply(r,m)});if(ve.source=R,_u(ve))throw ve;return ve}function Pg(e){return Fe(e).toLowerCase()}function Rg(e){return Fe(e).toUpperCase()}function Mg(e,t,i){if(e=Fe(e),e&&(i||t===r))return aa(e);if(!e||!(t=_n(t)))return e;var a=pn(e),d=pn(t),h=Qe(a,d),m=Cn(a,d)+1;return cr(a,h,m).join("")}function Fg(e,t,i){if(e=Fe(e),e&&(i||t===r))return e.slice(0,co(e)+1);if(!e||!(t=_n(t)))return e;var a=pn(e),d=Cn(a,pn(t))+1;return cr(a,0,d).join("")}function qg(e,t,i){if(e=Fe(e),e&&(i||t===r))return e.replace(ln,"");if(!e||!(t=_n(t)))return e;var a=pn(e),d=Qe(a,pn(t));return cr(a,d).join("")}function Bg(e,t){var i=He,a=Ze;if(Je(t)){var d="separator"in t?t.separator:d;i="length"in t?he(t.length):i,a="omission"in t?_n(t.omission):a}e=Fe(e);var h=e.length;if(nr(e)){var m=pn(e);h=m.length}if(i>=h)return e;var g=i-ir(a);if(g<1)return a;var w=m?cr(m,0,g).join(""):e.slice(0,g);if(d===r)return w+a;if(m&&(g+=w.length-g),vu(d)){if(e.slice(g).search(d)){var $,P=w;for(d.global||(d=hn(d.source,Fe(xr.exec(d))+"g")),d.lastIndex=0;$=d.exec(P);)var R=$.index;w=w.slice(0,R===r?g:R)}}else if(e.indexOf(_n(d),g)!=g){var V=w.lastIndexOf(d);V>-1&&(w=w.slice(0,V))}return w+a}function Wg(e){return e=Fe(e),e&&Ks.test(e)?e.replace(Bo,Nl):e}var Ug=vs(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),yu=Gc("toUpperCase");function zd(e,t,i){return e=Fe(e),t=i?r:t,t===r?Sl(e)?kl(e):fn(e):e.match(t)||[]}var Kd=ye(function(e,t){try{return Rt(e,r,t)}catch(i){return _u(i)?i:new de(i)}}),Hg=$i(function(e,t){return Xt(t,function(i){i=_i(i),Di(e,i,pu(e[i],e))}),e});function Vg(e){var t=e==null?0:e.length,i=ne();return e=t?Ue(e,function(a){if(typeof a[1]!="function")throw new Zt(E);return[i(a[0]),a[1]]}):[],ye(function(a){for(var d=-1;++d<t;){var h=e[d];if(Rt(h[0],this,a))return Rt(h[1],this,a)}})}function zg(e){return vh(Sn(e,H))}function bu(e){return function(){return e}}function Kg(e,t){return e==null||e!==e?t:e}var Gg=jc(),Yg=jc(!0);function rn(e){return e}function wu(e){return Cc(typeof e=="function"?e:Sn(e,H))}function jg(e){return Sc(Sn(e,H))}function Qg(e,t){return Ic(e,Sn(t,H))}var Xg=ye(function(e,t){return function(i){return yo(i,e,t)}}),Jg=ye(function(e,t){return function(i){return yo(e,i,t)}});function Eu(e,t,i){var a=gt(t),d=ga(t,a);i==null&&!(Je(t)&&(d.length||!a.length))&&(i=t,t=e,e=this,d=ga(t,gt(t)));var h=!(Je(i)&&"chain"in i)||!!i.chain,m=Ri(e);return Xt(d,function(g){var w=t[g];e[g]=w,m&&(e.prototype[g]=function(){var $=this.__chain__;if(h||$){var P=e(this.__wrapped__),R=P.__actions__=en(this.__actions__);return R.push({func:w,args:arguments,thisArg:e}),P.__chain__=$,P}return w.apply(e,si([this.value()],arguments))})}),e}function Zg(){return je._===this&&(je._=Si),this}function xu(){}function ey(e){return e=he(e),ye(function(t){return Oc(t,e)})}var ty=eu(Ue),ny=eu(ta),iy=eu(ao);function Gd(e){return au(e)?Ci(_i(e)):Lh(e)}function ry(e){return function(t){return e==null?r:Lr(e,t)}}var sy=Xc(),oy=Xc(!0);function Au(){return[]}function Cu(){return!1}function ay(){return{}}function ly(){return""}function uy(){return!0}function cy(e,t){if(e=he(e),e<1||e>Te)return[];var i=Tt,a=ut(e,Tt);t=ne(t),e-=Tt;for(var d=er(a,t);++i<e;)t(i);return d}function dy(e){return pe(e)?Ue(e,_i):vn(e)?[e]:en(pd(Fe(e)))}function fy(e){var t=++us;return Fe(e)+t}var py=Aa(function(e,t){return e+t},0),hy=tu("ceil"),_y=Aa(function(e,t){return e/t},1),vy=tu("floor");function my(e){return e&&e.length?ma(e,rn,Bl):r}function gy(e,t){return e&&e.length?ma(e,ne(t,2),Bl):r}function yy(e){return ia(e,rn)}function by(e,t){return ia(e,ne(t,2))}function wy(e){return e&&e.length?ma(e,rn,Vl):r}function Ey(e,t){return e&&e.length?ma(e,ne(t,2),Vl):r}var xy=Aa(function(e,t){return e*t},1),Ay=tu("round"),Cy=Aa(function(e,t){return e-t},0);function Ty(e){return e&&e.length?lo(e,rn):0}function Sy(e,t){return e&&e.length?lo(e,ne(t,2)):0}return p.after=jv,p.ary=Ad,p.assign=Rm,p.assignIn=Fd,p.assignInWith=Ma,p.assignWith=Mm,p.at=Fm,p.before=Cd,p.bind=pu,p.bindAll=Hg,p.bindKey=Td,p.castArray=am,p.chain=wd,p.chunk=v_,p.compact=m_,p.concat=g_,p.cond=Vg,p.conforms=zg,p.constant=bu,p.countBy=Tv,p.create=qm,p.curry=Sd,p.curryRight=Id,p.debounce=Od,p.defaults=Bm,p.defaultsDeep=Wm,p.defer=Qv,p.delay=Xv,p.difference=y_,p.differenceBy=b_,p.differenceWith=w_,p.drop=E_,p.dropRight=x_,p.dropRightWhile=A_,p.dropWhile=C_,p.fill=T_,p.filter=Iv,p.flatMap=kv,p.flatMapDeep=Dv,p.flatMapDepth=Lv,p.flatten=md,p.flattenDeep=S_,p.flattenDepth=I_,p.flip=Jv,p.flow=Gg,p.flowRight=Yg,p.fromPairs=O_,p.functions=Ym,p.functionsIn=jm,p.groupBy=$v,p.initial=k_,p.intersection=D_,p.intersectionBy=L_,p.intersectionWith=$_,p.invert=Xm,p.invertBy=Jm,p.invokeMap=Rv,p.iteratee=wu,p.keyBy=Mv,p.keys=gt,p.keysIn=nn,p.map=ka,p.mapKeys=eg,p.mapValues=tg,p.matches=jg,p.matchesProperty=Qg,p.memoize=La,p.merge=ng,p.mergeWith=qd,p.method=Xg,p.methodOf=Jg,p.mixin=Eu,p.negate=$a,p.nthArg=ey,p.omit=ig,p.omitBy=rg,p.once=Zv,p.orderBy=Fv,p.over=ty,p.overArgs=em,p.overEvery=ny,p.overSome=iy,p.partial=hu,p.partialRight=Nd,p.partition=qv,p.pick=sg,p.pickBy=Bd,p.property=Gd,p.propertyOf=ry,p.pull=F_,p.pullAll=yd,p.pullAllBy=q_,p.pullAllWith=B_,p.pullAt=W_,p.range=sy,p.rangeRight=oy,p.rearg=tm,p.reject=Uv,p.remove=U_,p.rest=nm,p.reverse=du,p.sampleSize=Vv,p.set=ag,p.setWith=lg,p.shuffle=zv,p.slice=H_,p.sortBy=Yv,p.sortedUniq=Q_,p.sortedUniqBy=X_,p.split=kg,p.spread=im,p.tail=J_,p.take=Z_,p.takeRight=ev,p.takeRightWhile=tv,p.takeWhile=nv,p.tap=mv,p.throttle=rm,p.thru=Na,p.toArray=Pd,p.toPairs=Wd,p.toPairsIn=Ud,p.toPath=dy,p.toPlainObject=Md,p.transform=ug,p.unary=sm,p.union=iv,p.unionBy=rv,p.unionWith=sv,p.uniq=ov,p.uniqBy=av,p.uniqWith=lv,p.unset=cg,p.unzip=fu,p.unzipWith=bd,p.update=dg,p.updateWith=fg,p.values=ys,p.valuesIn=pg,p.without=uv,p.words=zd,p.wrap=om,p.xor=cv,p.xorBy=dv,p.xorWith=fv,p.zip=pv,p.zipObject=hv,p.zipObjectDeep=_v,p.zipWith=vv,p.entries=Wd,p.entriesIn=Ud,p.extend=Fd,p.extendWith=Ma,Eu(p,p),p.add=py,p.attempt=Kd,p.camelCase=mg,p.capitalize=Hd,p.ceil=hy,p.clamp=hg,p.clone=lm,p.cloneDeep=cm,p.cloneDeepWith=dm,p.cloneWith=um,p.conformsTo=fm,p.deburr=Vd,p.defaultTo=Kg,p.divide=_y,p.endsWith=gg,p.eq=Kn,p.escape=yg,p.escapeRegExp=bg,p.every=Sv,p.find=Ov,p.findIndex=_d,p.findKey=Um,p.findLast=Nv,p.findLastIndex=vd,p.findLastKey=Hm,p.floor=vy,p.forEach=Ed,p.forEachRight=xd,p.forIn=Vm,p.forInRight=zm,p.forOwn=Km,p.forOwnRight=Gm,p.get=mu,p.gt=pm,p.gte=hm,p.has=Qm,p.hasIn=gu,p.head=gd,p.identity=rn,p.includes=Pv,p.indexOf=N_,p.inRange=_g,p.invoke=Zm,p.isArguments=Rr,p.isArray=pe,p.isArrayBuffer=_m,p.isArrayLike=tn,p.isArrayLikeObject=st,p.isBoolean=vm,p.isBuffer=dr,p.isDate=mm,p.isElement=gm,p.isEmpty=ym,p.isEqual=bm,p.isEqualWith=wm,p.isError=_u,p.isFinite=Em,p.isFunction=Ri,p.isInteger=kd,p.isLength=Pa,p.isMap=Dd,p.isMatch=xm,p.isMatchWith=Am,p.isNaN=Cm,p.isNative=Tm,p.isNil=Im,p.isNull=Sm,p.isNumber=Ld,p.isObject=Je,p.isObjectLike=tt,p.isPlainObject=Co,p.isRegExp=vu,p.isSafeInteger=Om,p.isSet=$d,p.isString=Ra,p.isSymbol=vn,p.isTypedArray=gs,p.isUndefined=Nm,p.isWeakMap=km,p.isWeakSet=Dm,p.join=P_,p.kebabCase=wg,p.last=On,p.lastIndexOf=R_,p.lowerCase=Eg,p.lowerFirst=xg,p.lt=Lm,p.lte=$m,p.max=my,p.maxBy=gy,p.mean=yy,p.meanBy=by,p.min=wy,p.minBy=Ey,p.stubArray=Au,p.stubFalse=Cu,p.stubObject=ay,p.stubString=ly,p.stubTrue=uy,p.multiply=xy,p.nth=M_,p.noConflict=Zg,p.noop=xu,p.now=Da,p.pad=Ag,p.padEnd=Cg,p.padStart=Tg,p.parseInt=Sg,p.random=vg,p.reduce=Bv,p.reduceRight=Wv,p.repeat=Ig,p.replace=Og,p.result=og,p.round=Ay,p.runInContext=y,p.sample=Hv,p.size=Kv,p.snakeCase=Ng,p.some=Gv,p.sortedIndex=V_,p.sortedIndexBy=z_,p.sortedIndexOf=K_,p.sortedLastIndex=G_,p.sortedLastIndexBy=Y_,p.sortedLastIndexOf=j_,p.startCase=Dg,p.startsWith=Lg,p.subtract=Cy,p.sum=Ty,p.sumBy=Sy,p.template=$g,p.times=cy,p.toFinite=Mi,p.toInteger=he,p.toLength=Rd,p.toLower=Pg,p.toNumber=Nn,p.toSafeInteger=Pm,p.toString=Fe,p.toUpper=Rg,p.trim=Mg,p.trimEnd=Fg,p.trimStart=qg,p.truncate=Bg,p.unescape=Wg,p.uniqueId=fy,p.upperCase=Ug,p.upperFirst=yu,p.each=Ed,p.eachRight=xd,p.first=gd,Eu(p,(function(){var e={};return pi(p,function(t,i){Ae.call(p.prototype,i)||(e[i]=t)}),e})(),{chain:!1}),p.VERSION=f,Xt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),Xt(["drop","take"],function(e,t){Ce.prototype[e]=function(i){i=i===r?1:Y(he(i),0);var a=this.__filtered__&&!t?new Ce(this):this.clone();return a.__filtered__?a.__takeCount__=ut(i,a.__takeCount__):a.__views__.push({size:ut(i,Tt),type:e+(a.__dir__<0?"Right":"")}),a},Ce.prototype[e+"Right"]=function(i){return this.reverse()[e](i).reverse()}}),Xt(["filter","map","takeWhile"],function(e,t){var i=t+1,a=i==Ct||i==wt;Ce.prototype[e]=function(d){var h=this.clone();return h.__iteratees__.push({iteratee:ne(d,3),type:i}),h.__filtered__=h.__filtered__||a,h}}),Xt(["head","last"],function(e,t){var i="take"+(t?"Right":"");Ce.prototype[e]=function(){return this[i](1).value()[0]}}),Xt(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");Ce.prototype[e]=function(){return this.__filtered__?new Ce(this):this[i](1)}}),Ce.prototype.compact=function(){return this.filter(rn)},Ce.prototype.find=function(e){return this.filter(e).head()},Ce.prototype.findLast=function(e){return this.reverse().find(e)},Ce.prototype.invokeMap=ye(function(e,t){return typeof e=="function"?new Ce(this):this.map(function(i){return yo(i,e,t)})}),Ce.prototype.reject=function(e){return this.filter($a(ne(e)))},Ce.prototype.slice=function(e,t){e=he(e);var i=this;return i.__filtered__&&(e>0||t<0)?new Ce(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==r&&(t=he(t),i=t<0?i.dropRight(-t):i.take(t-e)),i)},Ce.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ce.prototype.toArray=function(){return this.take(Tt)},pi(Ce.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),d=p[a?"take"+(t=="last"?"Right":""):t],h=a||/^find/.test(t);d&&(p.prototype[t]=function(){var m=this.__wrapped__,g=a?[1]:arguments,w=m instanceof Ce,$=g[0],P=w||pe(m),R=function(Ee){var Se=d.apply(p,si([Ee],g));return a&&V?Se[0]:Se};P&&i&&typeof $=="function"&&$.length!=1&&(w=P=!1);var V=this.__chain__,j=!!this.__actions__.length,re=h&&!V,ve=w&&!j;if(!h&&P){m=ve?m:new Ce(this);var se=e.apply(m,g);return se.__actions__.push({func:Na,args:[R],thisArg:r}),new Tn(se,V)}return re&&ve?e.apply(this,g):(se=this.thru(R),re?a?se.value()[0]:se.value():se)})}),Xt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Nt[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var d=arguments;if(a&&!this.__chain__){var h=this.value();return t.apply(pe(h)?h:[],d)}return this[i](function(m){return t.apply(pe(m)?m:[],d)})}}),pi(Ce.prototype,function(e,t){var i=p[t];if(i){var a=i.name+"";Ae.call(ps,a)||(ps[a]=[]),ps[a].push({name:t,func:i})}}),ps[xa(r,oe).name]=[{name:"wrapper",func:r}],Ce.prototype.clone=Wp,Ce.prototype.reverse=Up,Ce.prototype.value=Hp,p.prototype.at=gv,p.prototype.chain=yv,p.prototype.commit=bv,p.prototype.next=wv,p.prototype.plant=xv,p.prototype.reverse=Av,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=Cv,p.prototype.first=p.prototype.head,T&&(p.prototype[T]=Ev),p}),rr=Dl();dn?((dn.exports=rr)._=rr,Hn._=rr):je._=rr}).call(VE)})(Oo,Oo.exports)),Oo.exports}var Do=zE();function KE(u){let n=null,r=null,f=new Map;const v=H=>JSON.stringify(H),b=async(H,J,K,te)=>{if(te===(K==="cart"?n:r))return{success:!0,skipped:!0};if(f.has(K))return console.log(` Skipping duplicate ${K} request`),{success:!1,skipped:!0};const G=new AbortController,ie=setTimeout(()=>G.abort(),5e3);f.set(K,!0);try{const oe=await fetch(H,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify(J),signal:G.signal});if(clearTimeout(ie),!oe.ok)throw new Error(`HTTP ${oe.status}`);const $e=await oe.json();return K==="cart"?n=te:r=te,console.log(` ${K} updated - v${$e.version}`),{success:!0,data:$e}}catch(oe){return oe.name==="AbortError"?console.warn(` ${K} update timeout`):console.error(` Failed to update ${K}:`,oe.message),{success:!1,error:oe}}finally{f.delete(K)}},E=Do.debounce(async H=>{const J=v(H);await b("/api/pos/terminal/update-cart",{terminal_id:u,cart:H},"cart",J)},800),S=Do.debounce(async H=>{const J=v(H);await b("/api/pos/terminal/update-ui",{terminal_id:u,ui:H},"ui",J)},300),C=async H=>{const J=v(H);return await b("/api/pos/terminal/update-cart",{terminal_id:u,cart:H},"cart",J)},U=Do.debounce(async(H,J)=>{const K=v(H),te=v(J);if(K===n&&te===r)return{success:!0,skipped:!0};const G=new AbortController,ie=setTimeout(()=>G.abort(),5e3);try{const oe=await fetch("/api/pos/terminal/update-both",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify({terminal_id:u,cart:H,ui:J}),signal:G.signal});if(clearTimeout(ie),!oe.ok)throw new Error(`HTTP ${oe.status}`);const $e=await oe.json();return n=K,r=te,console.log(` Batch update successful - v${$e.version}`),{success:!0,data:$e}}catch(oe){return console.error(" Batch update failed:",oe.message),{success:!1,error:oe}}},500);return{broadcastCartUpdate:E,broadcastUIUpdate:S,broadcastImmediateCartUpdate:C,broadcastBatchUpdate:U,clearBroadcastCache:()=>{n=null,r=null,f.clear(),console.log(" Broadcast cache cleared")}}}const GE={key:0,class:"modal fade show d-block",tabindex:"-1",style:{background:"rgba(0,0,0,0.5)","z-index":"9999"}},YE={class:"modal-dialog modal-lg modal-dialog-centered"},jE={class:"modal-content"},QE={class:"modal-header bg-warning text-dark"},XE={class:"modal-body"},JE={key:0,class:"alert alert-info mb-3"},ZE={class:"mb-0"},ex={key:1,class:"alert alert-danger"},tx={class:"text-muted"},nx={key:2},ix={class:"fw-bold"},rx={key:0,class:"badge bg-secondary ms-2"},sx={class:"table table-sm table-bordered"},ox={class:"text-end"},ax={class:"text-end"},lx={class:"text-end text-danger fw-bold"},ux={class:"modal-footer"},cx={__name:"ConfirmMissingIngredientsModal",props:{show:Boolean,missingIngredients:{type:Array,default:()=>[]}},emits:["close","confirm"],setup(u,{emit:n}){const r=u,f=n;Fr(()=>r.show,S=>{console.log(" Modal show changed:",S),S&&console.log(" Missing ingredients:",r.missingIngredients)},{immediate:!0}),Fr(()=>r.missingIngredients,S=>{console.log(" Missing ingredients changed:",S),console.log(" Array length:",S?.length),console.log(" Is array?:",Array.isArray(S))},{immediate:!0,deep:!0});const v=me(()=>{if(console.log(" Computing groupedByItem"),console.log(" Input missingIngredients:",r.missingIngredients),!Array.isArray(r.missingIngredients)||r.missingIngredients.length===0)return console.log(" No ingredients to group (not array or empty)"),{};const S={};return r.missingIngredients.forEach((C,U)=>{console.log(` Processing ingredient ${U}:`,C);const L=`${C.item_id}-${C.variant_id||"default"}`;S[L]||(S[L]={item_title:C.item_title,variant_name:C.variant_name,ingredients:[]}),S[L].ingredients.push(C)}),console.log(" Final grouped data:",S),S}),b=me(()=>r.missingIngredients&&r.missingIngredients.length>0),E=me(()=>Object.keys(v.value).length);return(S,C)=>u.show?ct((I(),N("div",GE,[c("div",YE,[c("div",jE,[c("div",QE,[C[4]||(C[4]=c("h5",{class:"modal-title"},[c("i",{class:"bi bi-exclamation-triangle-fill me-2"}),ge(" Ingredient Shortage Warning ")],-1)),c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:C[0]||(C[0]=U=>f("close"))},[...C[3]||(C[3]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),c("div",XE,[b.value?Q("",!0):(I(),N("div",JE,[C[5]||(C[5]=c("strong",null,"Debug Info:",-1)),c("ul",ZE,[c("li",null,"Has data: "+D(b.value),1),c("li",null,"Array length: "+D(u.missingIngredients?.length||0),1),c("li",null,"Is array: "+D(Array.isArray(u.missingIngredients)),1),c("li",null,"Group count: "+D(E.value),1)])])),C[10]||(C[10]=c("div",{class:"alert alert-warning"},[c("strong",null,"Warning:"),ge(" The following items have ingredient shortages. The order can still be placed, but pending ingredient deductions will be recorded and automatically deducted when stock arrives. ")],-1)),b.value?(I(),N("div",nx,[(I(!0),N(Ve,null,ht(v.value,(U,L)=>(I(),N("div",{key:L,class:"mb-4"},[c("h6",ix,[ge(D(U.item_title)+" ",1),U.variant_name?(I(),N("span",rx,D(U.variant_name),1)):Q("",!0)]),c("table",sx,[C[9]||(C[9]=c("thead",{class:"table-light"},[c("tr",null,[c("th",null,"Ingredient"),c("th",{class:"text-end"},"Required"),c("th",{class:"text-end"},"Available"),c("th",{class:"text-end"},"Short")])],-1)),c("tbody",null,[(I(!0),N(Ve,null,ht(U.ingredients,H=>(I(),N("tr",{key:H.inventory_item_id},[c("td",null,D(H.inventory_item_name),1),c("td",ox,D(H.required_quantity)+" "+D(H.unit),1),c("td",ax,D(H.available_quantity)+" "+D(H.unit),1),c("td",lx,D(H.shortage_quantity)+" "+D(H.unit),1)]))),128))])])]))),128))])):(I(),N("div",ex,[C[6]||(C[6]=c("i",{class:"bi bi-exclamation-circle me-2"},null,-1)),C[7]||(C[7]=ge(" No missing ingredient data available. ",-1)),C[8]||(C[8]=c("br",null,null,-1)),c("small",tx," Received "+D(u.missingIngredients?.length||0)+" ingredient(s) ",1)]))]),c("div",ux,[c("button",{type:"button",class:"btn btn-secondary px-2 py-2",onClick:C[1]||(C[1]=U=>f("close"))}," Cancel Order "),c("button",{type:"button",class:"btn btn-primary px-4 py-2",onClick:C[2]||(C[2]=U=>f("confirm"))}," Proceed Anyway ")])])])],512)),[[pr,u.show]]):Q("",!0)}},dx={class:"page-wrapper"},fx={class:"container-fluid px-3 py-3"},px={class:"row gx-3 gy-3"},hx={key:0,class:"row g-3 tablet-screen"},_x={class:"d-flex justify-content-between justify align-items-center mb-3"},vx={style:{width:"250px",position:"relative"}},mx={key:1,type:"text",class:"form-control form-control-sm",placeholder:"Search categories...",disabled:"",style:{"border-radius":"8px",padding:"8px 12px"}},gx={key:0,class:"col-12 text-center py-5"},yx=["onClick"],bx={class:"cat-icon-wrap"},wx={class:"cat-icon"},Ex=["src"],xx={key:1},Ax={class:"cat-name"},Cx={class:"cat-pill"},Tx={key:0,class:"text-danger ms-1"},Sx={key:0,class:"col-12"},Ix={key:1},Ox={class:"d-flex flex-wrap gap-2 align-items-center mb-4"},Nx={class:"fw-bold mb-0"},kx={class:"d-flex gap-2 ms-auto align-items-center"},Dx={class:"search-wrap position-relative"},Lx={key:0,class:"col-12"},$x={class:"alert alert-warning border-0 rounded-4 text-center py-5"},Px={class:"text-muted mb-3"},Rx={class:"row g-3"},Mx={key:0,class:"card rounded-4 shadow-sm overflow-hidden border-3 w-100 d-flex flex-row align-items-stretch",style:{"border-color":"#dc3545"}},Fx={class:"position-relative",style:{flex:"0 0 40%","max-width":"40%"}},qx=["src"],Bx={class:"position-absolute top-0 start-0 m-1 px-2 py-1 rounded-pill text-white fw-semibold bg-danger",style:{"font-size":"0.58rem","letter-spacing":"0.3px"}},Wx={class:"p-3 d-flex flex-column justify-content-between",style:{flex:"1 1 60%","min-width":"0",position:"relative"}},Ux={class:"h5 fw-bold mb-2 menu-name text-danger"},Hx={class:"mt-2"},Vx=["onClick"],zx=["onClick","disabled"],Kx={class:"qty-box border rounded-pill px-2 py-2 text-center fw-semibold left-card-cntrl-btn",style:{"min-width":"55px"}},Gx=["onClick"],Yx={class:"position-relative",style:{flex:"0 0 40%","max-width":"40%"}},jx=["src"],Qx={key:0,class:"position-absolute bottom-0 start-0 end-0 text-center bg-light bg-opacity-75 fw-semibold",style:{"font-size":"0.6rem !important",padding:"2px 4px"}},Xx={key:0,class:"text-muted text-decoration-line-through me-1"},Jx={class:"fw-bold text-success me-2"},Zx={key:1,class:"text-muted text-decoration-line-through me-1"},eA={class:"fw-bold text-success"},tA={key:1,class:"position-absolute bottom-0 start-0 end-0 m-2 badge bg-danger py-2"},nA={class:"p-3 d-flex flex-column justify-content-between",style:{flex:"1 1 60%","min-width":"0",position:"relative"}},iA={key:0,class:"position-absolute px-2 py-1 rounded-pill bg-success text-white small fw-bold",style:{fontSize:"0.7rem",top:"7px",right:"7px"}},rA={class:"text-decoration-line-through opacity-75 me-1"},sA={class:"fw-bold text-white"},oA=["onClick"],aA=["onClick","disabled"],lA={class:"qty-box border rounded-pill px-2 py-2 text-center fw-semibold left-card-cntrl-btn",style:{"min-width":"55px"}},uA=["onClick"],cA={key:0,class:"col-lg-4 right-cart"},dA={class:"action-buttons-compact mb-2"},fA={key:0,class:"badge-count"},pA={key:0,class:"badge-count"},hA={class:"cart card border-0 shadow-sm"},_A={class:"cart-header-compact"},vA={class:"order-type-pills"},mA=["onClick"],gA={class:"cart-body-compact"},yA={class:"customer-section"},bA={key:0,class:"row g-2"},wA={class:"col-6"},EA=["value"],xA={key:0,class:"error-text"},AA={class:"col-6"},CA={key:1},TA={key:0,class:"error-text"},SA={key:2,class:"delivery-grid"},IA={key:0,class:"error-text"},OA={key:1,class:"error-text"},NA={class:"cart-items-compact"},kA={key:0,class:"empty-cart"},DA={class:"item-info"},LA=["src"],$A={class:"item-details"},PA=["title"],RA={class:"item-badges"},MA={key:0,class:"badge-sale"},FA={key:1,class:"badge-variant"},qA={key:2,class:"badge-promo"},BA=["onClick"],WA={key:0,class:"item-note"},UA={class:"item-controls"},HA={class:"qty-row"},VA=["onClick"],zA={class:"qty-display"},KA=["onClick"],GA={class:"price-row"},YA={class:"item-price"},jA=["onClick"],QA={class:"totals-compact"},XA={class:"total-row"},JA={key:0,class:"total-row text-success"},ZA={key:1,class:"total-row"},eC={key:2,class:"total-row"},tC={key:3,class:"total-row"},nC={key:4,class:"total-row text-danger"},iC={key:5,class:"total-row discount-row"},rC={class:"text-success"},sC={key:6,class:"pending-section"},oC={key:7,class:"total-row discount-row"},aC={class:"text-success"},lC={class:"total-row grand-total"},uC={class:"notes-section"},cC={class:"note-details"},dC={class:"note-details"},fC={class:"cart-footer-compact"},pC={class:"modal fade",id:"chooseItem",tabindex:"-1","aria-hidden":"true"},hC={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},_C={class:"modal-content rounded-3 shadow border-0",style:{"max-height":"90vh"}},vC={class:"modal-header border-0 bg-light py-2 px-3 rounded-top"},mC={class:"fw-bold mb-0"},gC={class:"px-1 pt-3 progress-bar"},yC={class:"stepper-container position-relative",style:{"min-height":"60px"}},bC=["onClick"],wC={key:0,class:"bi bi-check-lg",style:{"font-size":"0.7rem"}},EC={key:1,style:{"font-size":"0.75rem"}},xC=["onClick"],AC={class:"modal-body px-3 py-2"},CC={class:"row g-3 mb-3"},TC={class:"col-lg-5"},SC={class:"rounded-3 border shadow-sm p-3 bg-white"},IC={class:"d-flex justify-content-between mb-1",style:{"font-size":"0.85rem"}},OC={key:0,class:"d-flex justify-content-between mb-1",style:{"font-size":"0.85rem"}},NC={class:"text-success"},kC={class:"d-flex justify-content-between",style:{"font-size":"1rem"}},DC={class:"fw-bold text-primary"},LC={class:"col-lg-7"},$C={class:"px-1"},PC={class:"step-content"},RC={class:"row g-2"},MC=["onClick"],FC={class:"d-flex justify-content-between align-items-center"},qC={class:"fw-bold mb-0",style:{"font-size":"0.85rem"}},BC={class:"d-flex justify-content-between align-items-center gap-2"},WC={key:0,class:"text-primary"},UC={style:{"font-size":"0.9rem"}},HC={class:"step-content"},VC={class:"row g-2"},zC=["id","checked","disabled","onChange"],KC=["for"],GC={class:"step-content"},YC={key:0,class:"mb-3"},jC={class:"d-flex justify-content-between align-items-center mb-2"},QC={class:"text-muted",style:{"font-size":"0.75rem"}},XC={class:"d-flex gap-1"},JC={key:1,class:"mb-3"},ZC={class:"bg-light rounded-3 p-1 mb-3"},eT={class:"d-flex justify-content-between align-items-center mb-0"},tT={class:"fw-bold mb-0",style:{"font-size":"0.95rem"}},nT={key:0,class:"badge rounded-pill bg-primary",style:{"font-size":"0.7rem"}},iT={key:0,class:"text-muted small mb-0",style:{"font-size":"0.75rem"}},rT={class:"row g-2"},sT={class:"d-flex align-items-center flex-grow-1"},oT=["id","checked","onChange"],aT=["for"],lT={class:"text-success fw-semibold ms-1"},uT={key:0,class:"d-flex align-items-center gap-1"},cT=["onClick","disabled"],dT={class:"fw-bold",style:{"min-width":"20px","text-align":"center","font-size":"0.75rem"}},fT=["onClick"],pT={key:2,class:"d-flex justify-content-between gap-2 mt-3"},hT=["disabled"],_T=["disabled"],vT={class:"step-content"},mT={class:"summary-card p-3 rounded-3 shadow-sm mb-3"},gT={key:0,class:"summary-item"},yT={class:"summary-value"},bT={key:1,class:"summary-item"},wT={class:"summary-value"},ET={key:2,class:"summary-item"},xT={class:"summary-value"},AT={class:"d-flex align-items-center mb-3"},CT={class:"qty-group gap-1"},TT=["disabled"],ST={class:"qty-box rounded-pill"},IT={class:"mb-2"},OT={class:"text-end small text-muted mt-1",style:{"font-size":"0.7rem"}},NT={class:"modal-footer border-0 px-3 py-2 d-flex justify-content-end gap-2"},kT={class:"modal fade",id:"customizeDealModal",tabindex:"-1","aria-hidden":"true"},DT={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},LT={class:"modal-content rounded-3 shadow border-0",style:{"max-height":"90vh"}},$T={class:"modal-header border-0 bg-light py-2 px-3 rounded-top"},PT={class:"fw-bold mb-0"},RT={class:"text-muted small mb-0",style:{"font-size":"0.8rem"}},MT={class:"px-3 pt-3 progress-bar"},FT={class:"stepper-container position-relative",style:{"min-height":"60px"}},qT=["onClick"],BT={key:0,class:"bi bi-check-lg",style:{"font-size":"0.7rem"}},WT={key:1,style:{"font-size":"0.75rem"}},UT=["onClick"],HT={class:"modal-body px-3 py-2"},VT={class:"row g-3 mb-3"},zT={class:"col-lg-4"},KT={class:"rounded-3 border shadow-sm p-3 bg-white mb-3"},GT={class:"fw-bold mb-2 d-flex align-content-center",style:{"font-size":"0.9rem"}},YT={class:"d-flex align-items-center"},jT={class:"flex-grow-1"},QT={class:"text-muted small"},XT={key:0,class:"text-success small fw-semibold"},JT={class:"fw-bold text-primary"},ZT={class:"rounded-3 border shadow-sm p-3 bg-white"},eS={class:"list-group list-group-flush"},tS={class:"d-flex align-items-center"},nS={key:0,class:"bi bi-check-circle-fill text-success me-2"},iS={key:2,class:"bi bi-circle text-muted me-2"},rS={class:"col-lg-8"},sS={class:"px-1"},oS={class:"step-content"},aS={class:"d-flex align-items-start mb-2"},lS={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},uS={class:"row g-2"},cS=["id","checked","disabled","onChange"],dS=["for"],fS={class:"step-content"},pS={class:"d-flex align-items-start mb-3"},hS={class:"flex-grow-1"},_S={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},vS={key:0,class:"mb-3"},mS={class:"d-flex justify-content-between align-items-center mb-2"},gS={class:"text-muted",style:{"font-size":"0.75rem"}},yS={class:"d-flex gap-1"},bS={key:1,class:"mb-3"},wS={class:"bg-light rounded-3 p-1 mb-3"},ES={class:"d-flex justify-content-between align-items-center mb-0"},xS={class:"fw-bold mb-0",style:{"font-size":"0.95rem"}},AS={key:0,class:"badge rounded-pill bg-primary",style:{"font-size":"0.7rem"}},CS={key:0,class:"text-muted small mb-0",style:{"font-size":"0.75rem"}},TS={class:"row g-2"},SS={class:"d-flex align-items-center flex-grow-1"},IS=["id","checked","onChange"],OS=["for"],NS={class:"text-success fw-semibold ms-1"},kS={key:0,class:"d-flex align-items-center gap-1"},DS=["onClick","disabled"],LS={class:"fw-bold",style:{"min-width":"20px","text-align":"center","font-size":"0.75rem"}},$S=["onClick"],PS={key:2,class:"d-flex justify-content-between gap-2 mt-3"},RS=["disabled"],MS=["disabled"],FS={class:"step-content"},qS={class:"d-flex align-items-start mb-2"},BS={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},WS={class:"summary-card p-3 rounded-3 shadow-sm mb-3"},US={class:"summary-item"},HS={class:"summary-value"},VS={class:"summary-item"},zS={class:"summary-value"},KS={key:0,class:"summary-item"},GS={class:"summary-value text-danger"},YS={key:1,class:"summary-item"},jS={class:"summary-value text-success"},QS={key:2,class:"summary-item"},XS={class:"summary-value text-success fw-bold"},JS={class:"summary-item border-top pt-2 mt-2"},ZS={class:"summary-value fw-bold text-primary"},eI={class:"mb-2"},tI={class:"fw-semibold mb-1",style:{"font-size":"0.85rem"}},nI={class:"text-end small text-muted mt-1",style:{"font-size":"0.7rem"}},iI={class:"modal-footer border-0 px-3 py-2 d-flex justify-content-end"},rI={class:"d-flex gap-2"},sI={class:"modal fade",id:"addonManagementModal",tabindex:"-1","aria-hidden":"true"},oI={class:"modal-dialog modal-lg modal-dialog-centered"},aI={class:"modal-content rounded-4 border-0 shadow-lg"},lI={key:0,class:"modal-body pt-2"},uI={class:"alert alert-light border rounded-3 mb-3"},cI={class:"d-flex align-items-center gap-3"},dI=["src"],fI={class:"flex-grow-1"},pI={class:"fw-bold fs-6"},hI={class:"d-flex gap-3 mt-1"},_I={class:"text-muted"},vI={class:"fw-semibold"},mI={class:"text-muted"},gI={class:"fw-semibold"},yI={key:0,class:"table-responsive"},bI={class:"table table-hover align-middle mb-0"},wI={class:"text-center"},EI={class:"form-check d-flex justify-content-center"},xI=["checked","onChange"],AI={class:"d-flex align-items-center gap-2"},CI={class:"fw-semibold"},TI={key:0,class:"text-muted"},SI={class:"text-center"},II={class:"badge bg-success-subtle text-success px-3 py-2 fs-6"},OI={class:"d-flex align-items-center justify-content-center gap-2"},NI=["onClick","disabled"],kI={class:"fw-bold fs-5 px-3",style:{"min-width":"50px","text-align":"center"}},DI=["onClick","disabled"],LI={key:1,class:"text-center text-muted py-5"},$I={class:"mt-3 p-3 rounded-3"},PI={key:0,class:"mt-3 p-3 rounded-3 border border-success bg-light"},RI={class:"text-success fw-semibold"},MI={__name:"Index",props:["client_secret","order_code"],setup(u){const{formatCurrencySymbol:n}=Fy();bs(()=>{Tu(()=>{document.querySelectorAll('[data-bs-toggle="popover"]').forEach(o=>{new sl(o)})})});const r=B([]),f=B(!0),v=B(""),b=B(Date.now()),E=`category-search-${Math.random().toString(36).substr(2,9)}`,S=B(!1),C=B(0),U=B(0),L=me(()=>!ce.value?.addon_groups||ce.value.addon_groups.length===0?null:ce.value.addon_groups[C.value]),H=()=>{C.value<ce.value?.addon_groups?.length-1&&C.value++},J=()=>{C.value>0&&C.value--},K=()=>{Te.value=Pn.value},te=B(0),G=me(()=>!Ke.value?.addon_groups||Ke.value.addon_groups.length===0?null:Ke.value.addon_groups[te.value]),ie=()=>{te.value<Ke.value?.addon_groups?.length-1&&te.value++},oe=()=>{te.value>0&&te.value--},$e=()=>{Qe.value=os.value},Ie=me(()=>{const o=v.value.trim().toLowerCase();return o?is.value.filter(s=>s.name.toLowerCase().includes(o)):is.value}),fe=async()=>{f.value=!0;try{const o=await axios.get("/api/pos/fetch-menu-categories");r.value=o.data,r.value.length>0&&(Lt.value=r.value[0].id)}catch(o){console.error("Error fetching categories:",o)}finally{f.value=!1}},ae=B([]),xe=async()=>{try{const o=await axios.get("/api/pos/fetch-menu-items");ae.value=o.data.data}catch(o){console.error("Error fetching inventory:",o)}},Oe=me(()=>{const o={};return ae.value.forEach(s=>{const l=s.category?.id||"uncategorized",_=s.category?.name||"Uncategorized";o[l]||(o[l]=[]);const x={id:s.id,title:s.name,img:s.image_url||"/assets/img/default.png",stock:0,price:Number(s.price),label_color:s.label_color||"#1B1670",family:_,description:s.description,nutrition:s.nutrition,tags:s.tags,allergies:s.allergies,ingredients:s.ingredients??[],variants:s.variants??[],addon_groups:s.addon_groups??[],is_saleable:s.is_saleable,resale_type:s.resale_type,resale_value:s.resale_value,isDeal:!1};o[l].push(x)}),Ci.value.forEach(s=>{const l=s.category_id||"uncategorized";o[l]||(o[l]=[]);const _={id:s.id,dealId:s.id,title:s.title,img:s.img,stock:999999,price:Number(s.price),label_color:"#dc3545",family:"Deal",description:s.description,nutrition:{},tags:[],allergies:[],ingredients:[],variants:[],addon_groups:[],is_saleable:!1,resale_type:null,resale_value:null,isDeal:!0,category_id:s.category_id,menu_items:s.menu_items||[]};o[l].push(_)}),o}),Be=B({});Fr(()=>ae.value,o=>{o&&o.length>0&&o.forEach(s=>{s.variants&&s.variants.length>0&&(Be.value[s.id]||(Be.value[s.id]=s.variants[0].id))})},{immediate:!0,deep:!0});const ke=o=>{if(!o.variants||o.variants.length===0)return null;const s=Be.value[o.id];return s&&o.variants.find(l=>l.id===s)||o.variants[0]},He=B({}),Ze=o=>{const s=o.id;if(!He.value[s])return 0;let l=0;return Object.values(He.value[s]).forEach(_=>{_.forEach(x=>{l+=parseFloat(x.price||0)})}),l},bt=o=>{const s=o.id;if(!He.value[s])return[];const l=[];return Object.values(He.value[s]).forEach(_=>{_.forEach(x=>{l.push({id:x.id,name:x.name,price:parseFloat(x.price),group_id:x.group_id||x.pivot?.addon_group_id})})}),l},Ne=B([]),Ct=()=>{if(!ce.value)return[];const o=Mn();return o&&o.ingredients&&o.ingredients.length>0?o.ingredients:ce.value.ingredients||[]},an=o=>Ne.value.includes(o),wt=o=>{const s=Ne.value.indexOf(o);s>-1?(Ne.value.splice(s,1),W.info("Ingredient added back")):(Ne.value.push(o),W.info("Ingredient removed"))},et=()=>{if(Ne.value.length===0)return null;const o=Ct(),s=Ne.value.map(l=>{const _=o.find(x=>x.id===l||x.inventory_item_id===l);return _?_.product_name||_.name:null}).filter(Boolean);return s.length===0?null:`No ${s.join(", ")}`},Te=B(1),En=o=>{(o<=Te.value||o===Te.value+1)&&(Te.value=o)},Vt=me(()=>ce.value?.variants&&ce.value.variants.length>0),Tt=me(()=>Ct().length>0),yi=me(()=>ce.value?.addon_groups&&ce.value.addon_groups.length>0),dt=me(()=>{let o=[],s=1;return Vt.value&&(o.push({id:"variants",name:"Variant",stepNumber:s,actualStep:1}),s++),Tt.value&&(o.push({id:"ingredients",name:"Ingredients",stepNumber:s,actualStep:2}),s++),yi.value&&(o.push({id:"addons",name:"Add-ons",stepNumber:s,actualStep:3}),s++),o.push({id:"review",name:"Review",stepNumber:s,actualStep:4}),o}),Pn=me(()=>dt.value[dt.value.length-1]?.stepNumber||1),Et=me(()=>{if(Te.value===1)return"0%";const o=dt.value.length,s=(Te.value-1)/(o-1);return`calc(${s*100}% - ${14-s*28}px)`}),xn=o=>o<Te.value?"stepper-circle-completed":o===Te.value?"stepper-circle-active":"stepper-circle-inactive",Hi=()=>{const o=Ct(),s=Ne.value||[];return o.filter(l=>!s.includes(l.id||l.inventory_item_id)).length},Dt=()=>{const o=dt.value.findIndex(s=>s.stepNumber===Te.value);o<dt.value.length-1&&(Te.value=dt.value[o+1].stepNumber)},Rn=()=>{const o=dt.value.findIndex(s=>s.stepNumber===Te.value);o>0&&(Te.value=dt.value[o-1].stepNumber)},Fs=o=>{ei.value=o,bi()},Qn=()=>Vt.value&&ce.value?.variants?.find(s=>s.id===ei.value)?.name||"",Vi=()=>{const o=[];return Object.values(at.value).forEach(s=>{s.forEach(l=>{const _=l.quantity>1?` x${l.quantity}`:"";o.push(`${l.name}${_} (+${n(l.price*(l.quantity||1))})`)})}),o.join(", ")},br=async o=>{ce.value=o,js.value="",qn.value="",ei.value=null,at.value={},C.value=0,Ne.value=[],Te.value=1,o.variants&&o.variants.length>0&&(ei.value=o.variants[0].id);const s=o.variants&&o.variants.length>0?o.variants[0]:null,l=s?s.id:null,_=ii(o,l),x=St(o,l,_);pt.value=x>0?1:0,Ne.value=[];const O=document.getElementById("chooseItem"),T=new bootstrap.Modal(O);O.addEventListener("shown.bs.modal",async()=>{await Tu()},{once:!0}),T.show()},St=(o,s,l)=>{if(!Tr.value)return 999999;const _=l.filter(T=>!Ne.value.includes(T.id||T.inventory_item_id));if(!_||_.length===0)return 999999;const x={};for(const T of F.value)ii(T,T.variant_id).filter(le=>!T.removed_ingredients||T.removed_ingredients.length===0?!0:!T.removed_ingredients.includes(le.id||le.inventory_item_id)).forEach(le=>{const we=le.inventory_item_id,Xe=Number(le.inventory_stock??le.inventory_item?.stock??0);x[we]||(x[we]={totalStock:Xe,used:0});const X=Number(le.quantity??le.qty??1)*T.qty;x[we].used+=X});let O=999999;for(const T of _){const q=T.inventory_item_id,ue=Number(T.inventory_stock??T.inventory_item?.stock??0),le=Number(T.quantity??T.qty??1);if(x[q]){const we=x[q].totalStock-x[q].used,Xe=Math.floor(we/le);O=Math.min(O,Xe)}else{const we=Math.floor(ue/le);O=Math.min(O,we)}}return O},bi=()=>{const o=Mn(),s=o?o.id:null,l=ii(ce.value,s),_=St(ce.value,s,l);if(_<=0){W.error("No stock available for this variant. Please remove items from cart first."),pt.value=0;return}pt.value=Math.min(1,_)},Mn=()=>{if(!ce.value||!ce.value.variants||ce.value.variants.length===0)return null;const o=ei.value;return o&&ce.value.variants.find(s=>s.id===o)||ce.value.variants[0]},zt=()=>{if(!ce.value)return 0;const o=Mn();return parseFloat(o?o.price:ce.value.price||0)},wi=()=>{let o=0;return Object.values(at.value).forEach(s=>{s.forEach(l=>{o+=parseFloat(l.price||0)*(l.quantity||1)})}),o},qs=()=>{const o=[];return Object.values(at.value).forEach(s=>{s.forEach(l=>{o.push({id:l.id,name:l.name,price:parseFloat(l.price),group_id:l.group_id||l.pivot?.addon_group_id})})}),o},It=o=>{if(!o)return 0;if(!Tr.value)return 999999;const s=ke(o),l=s?s.id:null,_=ii(o,l);if(!_.length)return 999999;let x=1/0;return _.forEach(O=>{const T=Number(O.quantity??O.qty??1),q=Number(O.inventory_stock??O.inventory_item?.stock??0);if(T<=0)return;const ue=Math.floor(q/T);x=Math.min(x,ue)}),x===1/0?0:x},ft=o=>It(o),Ot=B(""),_e=B("dine"),Ye=B("Walk In"),nt=B(" "),xt=B(" "),Xn=B(10),Lt=B(null),Bs=o=>Lt.value=o,Jn=B(!0),Ws=o=>{Bs(o.id),Jn.value=!1},Us=()=>Jn.value=!0,Ei=B({}),Zn=B([]),_t=B(null),Hs=async()=>{try{const o=await axios.get("/api/pos/fetch-profile-tables");if(Ei.value=o.data,Ei.value.order_types){Zn.value=Ei.value.order_types.map(l=>l.charAt(0).toUpperCase()+l.slice(1));const s=localStorage.getItem("quickOrderType");if(s){const l=Zn.value.find(_=>_.toLowerCase().replace(/_/g," ")===s.toLowerCase().replace(/_/g," "));l?_e.value=l:_e.value=Zn.value[0]}else _e.value=Zn.value[0]}}catch(o){console.error("Error fetching profile tables:",o)}},Vs=me(()=>Oe.value[Lt.value]??[]),vt=B({sortBy:"",priceMin:null,priceMax:null}),qo=me(()=>{let o=Vs.value;const s=Ot.value.trim().toLowerCase();if(s&&(o=o.filter(l=>l.title.toLowerCase().includes(s)||(l.family||"").toLowerCase().includes(s)||(l.description||"").toLowerCase().includes(s)||(l.tags?.map(_=>_.name.toLowerCase()).join(", ")||"").includes(s))),vt.value.priceMin!==null&&vt.value.priceMin!==""&&(o=o.filter(l=>l.price>=vt.value.priceMin)),vt.value.priceMax!==null&&vt.value.priceMax!==""&&(o=o.filter(l=>l.price<=vt.value.priceMax)),vt.value.sortBy)switch(o=[...o],vt.value.sortBy){case"name_asc":o.sort((l,_)=>l.title.localeCompare(_.title));break;case"name_desc":o.sort((l,_)=>_.title.localeCompare(l.title));break;case"price_asc":o.sort((l,_)=>l.price-_.price);break;case"price_desc":o.sort((l,_)=>_.price-l.price);break;case"stock_asc":o.sort((l,_)=>(l.stock??0)-(_.stock??0));break;case"stock_desc":o.sort((l,_)=>(_.stock??0)-(l.stock??0));break}return o}),zs=B(!1),Bo=o=>{vt.value={...o},zs.value=!0},wr=async()=>{try{const o=await axios.get("/pos/walk-in/current");if(o.data.success)if(U.value=o.data.number,U.value===0){const s=await axios.get("/pos/walk-in/next");s.data.success&&(U.value=s.data.number,Ye.value=s.data.formatted)}else Ye.value=Ks()}catch(o){console.error("Failed to initialize walk-in counter:",o),U.value=1,Ye.value="Walk In-001"}},Ks=()=>`Walk In-${String(U.value).padStart(3,"0")}`,Gs=()=>{vt.value={sortBy:"",priceMin:null,priceMax:null}},F=B([]),ll=async o=>{const s=F.value[o];if(!s)return;if(s.isDeal){const _=oa({id:s.dealId,title:s.title,menu_items:s.menu_items},s.qty+1);if(!_.canAdd){console.log(" Missing ingredients for deal (cart increment)"),Yt.value={itemIndex:o,item:s,newQty:s.qty+1,isDeal:!0},Gt.value=_.missing,Un.value=!0,W.warning("Some ingredients are missing. Confirm to proceed.");return}s.qty++,s.price=s.unit_price*s.qty,W.success("Deal quantity updated");return}const l=Kr(s,s.qty+1);if(!l.canAdd){console.log(" Missing ingredients detected (client-side)"),Yt.value={itemIndex:o,item:s,newQty:s.qty+1,isDeal:!1},Gt.value=l.missing,Un.value=!0,W.warning("Some ingredients are missing. Confirm to proceed.");return}s.outOfStock=!1,s.qty++,s.price=s.unit_price*s.qty,s.resale_discount_per_item&&(s.total_resale_discount=s.resale_discount_per_item*s.qty)},Kr=(o,s)=>{if(!Tr.value)return{canAdd:!0,missing:[]};const l=o.ingredients||[];if(l.length===0)return{canAdd:!0,missing:[]};const _=[],x={};return F.value.forEach(T=>{(T.ingredients||[]).filter(le=>!T.removed_ingredients||T.removed_ingredients.length===0?!0:!T.removed_ingredients.includes(le.id||le.inventory_item_id)).forEach(le=>{const we=le.inventory_item_id,Xe=Number(le.inventory_stock??le.inventory_item?.stock??0);x[we]||(x[we]={totalStock:Xe,used:0,name:le.product_name||le.name,unit:le.unit||"unit"});const X=Number(le.quantity??le.qty??1)*T.qty;x[we].used+=X})}),l.filter(T=>!o.removed_ingredients||o.removed_ingredients.length===0?!0:!o.removed_ingredients.includes(T.id||T.inventory_item_id)).forEach(T=>{const q=T.inventory_item_id,ue=Number(T.quantity??T.qty??1)*s,le=Number(T.inventory_stock??T.inventory_item?.stock??0);if(!x[q])le<ue&&_.push({item_id:o.id,item_title:o.title,variant_id:o.variant_id||null,variant_name:o.variant_name||null,inventory_item_id:q,inventory_item_name:T.product_name||T.name,required_quantity:ue,available_quantity:le,shortage_quantity:ue-le,unit:T.unit||"unit",order_quantity:s});else{const we=x[q].totalStock-x[q].used,Xe=F.value.find(X=>X.id===o.id&&X.variant_id===o.variant_id&&JSON.stringify(X.addons?.map(Le=>Le.id).sort())===JSON.stringify(o.addons?.map(Le=>Le.id).sort()));if(Xe){const X=Number(T.quantity??T.qty??1)*Xe.qty,Le=we+X;Le<ue&&_.push({item_id:o.id,item_title:o.title,variant_id:o.variant_id||null,variant_name:o.variant_name||null,inventory_item_id:q,inventory_item_name:T.product_name||T.name,required_quantity:ue,available_quantity:Le,shortage_quantity:ue-Le,unit:T.unit||"unit",order_quantity:s})}else we<ue&&_.push({item_id:o.id,item_title:o.title,variant_id:o.variant_id||null,variant_name:o.variant_name||null,inventory_item_id:q,inventory_item_name:T.product_name||T.name,required_quantity:ue,available_quantity:we,shortage_quantity:ue-we,unit:T.unit||"unit",order_quantity:s})}}),{canAdd:_.length===0,missing:_}},ul=async o=>{const s=F.value[o];if(!s||s.qty<=1){W.error("Cannot reduce below 1.");return}s.qty--,s.price=s.unit_price*s.qty,s.resale_discount_per_item&&(s.total_resale_discount=s.resale_discount_per_item*s.qty),s.outOfStock=!1},cl=o=>{if(F.value[o],F.value.splice(o,1),F.value.length===0){it.value=[],Z.value=[],Pt.value=[],xi();return}Z.value.length>0&&(Z.value=Z.value.filter(l=>{if(!l.menu_items||l.menu_items.length===0)return!0;const _=l.menu_items.map(O=>O.id);return F.value.some(O=>_.includes(O.id))}));const s=[];it.value.forEach(l=>{l.min_purchase&&$t.value<l.min_purchase?W.info(`Discount "${l.name}" removed  subtotal is lower than minimum required (${n(l.min_purchase)}).`):s.push(l)}),it.value=s},$t=me(()=>F.value.reduce((o,s)=>o+s.price,0)),Er=me(()=>F.value.reduce((o,s)=>{if(!s.addons||s.addons.length===0)return o;const l=s.addons.reduce((_,x)=>{const O=parseFloat(x.price||0),T=x.quantity||1;return _+O*T},0);return o+l*s.qty},0)),Fn=me(()=>{if(_e.value!=="Delivery")return 0;const o=jt.props.onboarding.tax_and_vat;return o.has_delivery_charges?o.delivery_charge_flat?parseFloat(o.delivery_charge_flat):o.delivery_charge_percentage?$t.value*parseFloat(o.delivery_charge_percentage)/100:0:0}),ln=me(()=>{if(F.value.length===0)return 0;const o=jt.props.onboarding.tax_and_vat;return o.has_service_charges?o.service_charge_flat?parseFloat(o.service_charge_flat):o.service_charge_percentage?$t.value*parseFloat(o.service_charge_percentage)/100:0:0}),Ys=o=>`${(Math.round(o*100)/100).toFixed(2)}`,ce=B(null),pt=B(0),js=B(""),ei=B(null),at=B({}),qn=B(""),dl=async()=>{if(!ce.value)return;if(pt.value<=0){W.error("Please select at least 1 item to add to cart");return}const o=Mn(),s=o?o.id:null;o&&`${o.name}`;const l=o?o.name:null,_=parseFloat(o?o.price:ce.value.price),x=qs(),O=wi(),T=_+O,q=o?fn(o,!0):fn(ce.value,!1),ue=ii(ce.value,s),le=et();try{const we=x.map(Me=>Me.id).sort((Me,lt)=>Me-lt).join("-"),Xe=ue.length>0?xr(ue):999999,X=F.value.findIndex(Me=>{if(Me.variant_id!==s)return!1;const lt=(Me.addons||[]).map(Ft=>Ft.id).sort((Ft,Or)=>Ft-Or).join("-");return Me.id===ce.value.id&&lt===we});if(X>=0){if(F.value[X].qty+=pt.value,F.value[X].price=F.value[X].unit_price*F.value[X].qty,F.value[X].total_resale_discount=q*F.value[X].qty,qn.value&&qn.value.trim()){const Me=F.value[X].item_kitchen_note||"",lt=qn.value.trim(),Ft=[Me,lt,le].filter(Boolean).filter((Or,Ii,Y)=>Y.indexOf(Or)===Ii);F.value[X].item_kitchen_note=Ft.join("; ")}else if(le){const Me=F.value[X].item_kitchen_note||"";F.value[X].item_kitchen_note=[Me,le].filter(Boolean).join("; ")}Ne.value.length>0&&(F.value[X].removed_ingredients=[...Ne.value]),W.success(`Quantity updated to ${F.value[X].qty}`)}else{const Me=[qn.value.trim(),le].filter(Boolean).join(". ");F.value.push({id:ce.value.id,title:ce.value.title,img:ce.value.img,price:T*pt.value,unit_price:Number(T),qty:pt.value,note:js.value||"",item_kitchen_note:Me,stock:Xe,ingredients:ue,variant_id:s,variant_name:l,addons:x,removed_ingredients:[...Ne.value],resale_discount_per_item:q,total_resale_discount:q*pt.value}),W.success(`${ce.value.title} added to cart`)}bootstrap.Modal.getInstance(document.getElementById("chooseItem")).hide(),pt.value=0,js.value="",qn.value="",ei.value=null,at.value={},Ne.value=[]}catch(we){W.error("Failed to add item: "+(we.response?.data?.message||we.message))}},xr=o=>{if(!o||o.length===0)return 999999;let s=1/0;return o.forEach(l=>{const _=Number(l.quantity??l.qty??1),x=Number(l.inventory_stock??l.inventory_item?.stock??0);if(_<=0)return;const O=Math.floor(x/_);s=Math.min(s,O)}),s===1/0?0:s},fl=async()=>{if(!ce.value)return;const o=Mn(),s=o?o.id:null,l=Ct(),_=Kr({id:ce.value.id,title:ce.value.title,variant_id:s,variant_name:o?o.name:null,ingredients:l,removed_ingredients:Ne.value||[]},pt.value+1);if(!_.canAdd){console.log(" Missing ingredients for modal increment (client-side)"),Cr.value={currentQty:pt.value},Gt.value=_.missing,Un.value=!0,W.warning("Some ingredients are missing. Confirm to proceed.");return}pt.value++},pl=()=>{pt.value>1&&pt.value--},mt=B({}),Ar=()=>{F.value=[],Ye.value=Ks(),xt.value="",nt.value="",_t.value=null,_e.value=Zn.value[0]||"eat_in",Bn.value="",Kt.value="",Xn.value=0,Z.value=[],it.value=[],Pt.value=[],Yi.value=[],xi()};Fr(_e,()=>mt.value={});const Bn=B(""),Kt=B(""),zi=B(!1),Qs=B(null),un=B(!1),Ki=B(0),hl=()=>{if(F.value.length===0){W.error("Please add at least one item to the cart.");return}if(_e.value==="Eat_in"&&!_t.value){mt.value.table_number=["Table number is required for dine-in orders."],W.error("Please select a table number for Dine In orders.");return}if((_e.value==="Delivery"||_e.value==="Takeaway")&&!Ye.value){mt.value.customer=["Customer name is required."],W.error("Customer name is required.");return}if(_e.value==="Delivery"&&!nt.value){mt.value.phoneNumber=["Phone number is required for delivery."],W.error("Phone number is required for delivery.");return}if(_e.value==="Delivery"&&!xt.value){mt.value.deliveryLocation=["Delivery location is required."],W.error("Delivery location is required.");return}Ki.value=parseFloat(Hn.value).toFixed(2),un.value=!0};async function Xs(o,s){const l=s?"yes":"no";console.log(" printReceiptN called"),console.log(" shouldPrint (boolean):",s),console.log(" print value sent to printer:",l);try{const _=await axios.post("http://localhost:8085/print",{order:o,type:"customer",print:l},{headers:{"Content-Type":"application/json"},timeout:5e3})}catch(_){console.error("Print failed:",_),W.error("Unable to connect to the customer printer. Please ensure it is properly connected.")}}async function Gr(o){try{const s=await axios.post("http://localhost:8085/print",{order:o,type:"KOT",print:"yes"},{headers:{"Content-Type":"application/json"},timeout:5e3})}catch(s){console.error("Print failed:",s),W.error("Unable to connect to the kitchen printer. Please ensure it is properly connected.")}}const Wo=B("cash"),Uo=B(0),Pt=B([]),Gi=B(null),Ho=B(!1),it=B([]),Yi=B([]),Vo=async o=>{if(!o||o.length===0){W.warning("No discounts selected.");return}const s=Yi.value.map(_=>_.id),l=o.filter(_=>!s.includes(_.id));if(l.length===0){W.error("All selected discounts have been rejected for this order.");return}if(l.length<o.length){const _=o.length-l.length;W.warning(`${_} discount(s) were previously rejected and cannot be requested again.`)}try{const _=await axios.post("/api/discount-approvals/request",{discounts:o.map(x=>({discount_id:x.id,discount_percentage:parseFloat(x.discount_amount),discount_name:x.name})),order_items:F.value.map(x=>({id:x.id,title:x.title,qty:x.qty,unit_price:x.unit_price,price:x.price})),order_subtotal:$t.value,request_note:`Discount approval request from ${ri.value?.name||"Cashier"}`});_.data.success&&(Pt.value=_.data.data.map(x=>({...x,discountData:o.find(O=>O.id===x.discount_id),percentage:parseFloat(x.discount_percentage),status:"pending"})),Jr.value=!1,Ho.value=!0,W.info("Discount approval request sent to Super Admin. Waiting for approval..."),zo())}catch(_){console.error("Error requesting discount approval:",_),W.error(_.response?.data?.message||"Failed to request discount approval")}},zo=()=>{Gi.value&&clearInterval(Gi.value),Gi.value=setInterval(async()=>{await Yr()},3e3)},Yr=async()=>{if(Pt.value.length===0){xi();return}try{const o=Pt.value.map(l=>l.id),s=await axios.post("/api/discount-approvals/check-status",{approval_ids:o});s.data.success&&(s.data.data.forEach(_=>{if(_.status!=="pending"){const x=Pt.value.findIndex(O=>O.id===_.id);if(x>=0){if(_.status==="approved"){const O={id:_.discount_id,name:_.discount_name||_.discount?.name,percentage:parseFloat(_.discount_percentage),approval_id:_.id};Ko(O),W.success(`Discount "${O.name}" (${O.percentage}%) approved!`)}else _.status==="rejected"&&(Yi.value.push({id:_.discount_id,name:_.discount_name,percentage:parseFloat(_.discount_percentage),rejection_reason:_.approval_note}),W.error(`Discount "${_.discount_name}" rejected.`+(_.approval_note?` Reason: ${_.approval_note}`:"")));Pt.value.splice(x,1)}}}),Pt.value.length===0&&(Ho.value=!1,xi()))}catch(o){console.error("Error checking approval status:",o)}},xi=()=>{Gi.value&&(clearInterval(Gi.value),Gi.value=null)},Ko=o=>{it.value.push(o)};Ny(()=>{xi()}),bs(()=>{window.Echo&&window.Echo.channel("discount-approvals").listen(".approval.responded",o=>{Yr()})});const Wn=me(()=>!it.value||it.value.length===0?0:it.value.reduce((o,s)=>{const l=parseFloat(s.percentage||0),_=$t.value*l/100;return o+_},0)),ji=o=>$t.value*o/100,_l=()=>{it.value=[],Pt.value=[],Yi.value=[],xi()},Un=B(!1),Gt=B([]),Yt=B(null),jr=B(null),Cr=B(null),Qi=B(null),Js=B(null),cn=B(null),Zs=async o=>{try{const s=await axios.get(`/pos/orders/${o}`);if(s.data.success&&s.data.order){const l=s.data.order.items;if(F.value=F.value.map(_=>{const x=l.find(O=>O.menu_item_id===_.id||O.deal_id===_.dealId);return x?{..._,payment_status:x.payment_status,amount_paid:x.amount_paid,server_item_id:x.id}:_}),Re.value&&Re.value.order_items){const _=Re.value.order_items.map(x=>{const O=l.find(T=>T.id===x.server_item_id);return O?{...x,payment_status:O.payment_status,amount_paid:O.amount_paid}:x});Re.value={...Re.value,order_items:_}}}}catch(s){console.error("Failed to refresh order items:",s)}},eo=async({paymentMethod:o,cashReceived:s,cardAmount:l,changeAmount:_,items:x,autoPrintKot:O,isPartialPayment:T,selectedItemIds:q,paidItemIds:ue,paidProductIds:le,paidDealIds:we,existingOrderId:Xe,done:X})=>{mt.value={};try{let Le=Xe;if(Le)console.log(" Using existing order ID:",Le);else{console.log(" Creating new order...");const Or={customer_name:Ye.value,phone_number:nt.value,delivery_location:xt.value,sub_total:$t.value,tax:ni.value,service_charges:ln.value,delivery_charges:Fn.value,sales_discount:je.value,approved_discounts:Wn.value,approved_discount_details:it.value.map(Y=>({discount_id:Y.id,discount_name:Y.name,discount_percentage:Y.percentage,discount_amount:ji(Y.percentage),approval_id:Y.approval_id})),promo_discount:ti.value,applied_promos:Z.value.map(Y=>({promo_id:Y.id,promo_name:Y.name,promo_type:Y.type,discount_amount:Y.applied_discount||0,applied_to_items:Y.applied_to_items||[]})),total_amount:Hn.value,note:Bn.value,kitchen_note:Kt.value,order_date:new Date().toISOString().split("T")[0],order_time:new Date().toTimeString().split(" ")[0],order_type:_e.value==="Eat_in"?"Eat In":_e.value==="Delivery"?"Delivery":_e.value==="Takeaway"?"Takeaway":"Collection",table_number:_t.value?.name||null,items:(F.value??[]).map(Y=>{if(Y.isDeal)return{product_id:Y.dealId,title:Y.title,quantity:Y.qty,price:Y.price,note:Y.note??"",kitchen_note:Kt.value??"",unit_price:Y.unit_price,item_kitchen_note:Y.item_kitchen_note??"",tax_percentage:0,tax_amount:0,variant_id:null,variant_name:null,addons:[],sale_discount_per_item:0,removed_ingredients:[],is_deal:!0,deal_id:Y.dealId,menu_items:Y.menu_items||[]};const ut=ae.value.find(fi=>fi.id===Y.id);let po=ut;if(Y.variant_id&&ut?.variants){const fi=ut.variants.find(Oi=>Oi.id===Y.variant_id);fi&&(po=fi)}const $l=po?fn(po,!!Y.variant_id):0,fa=(Y.removed_ingredients||[]).map(fi=>{const Oi=(Y.ingredients||[]).find(or=>or.id===fi||or.inventory_item_id===fi);return{id:fi,name:Oi?Oi.product_name||Oi.name:"Unknown Ingredient"}});return{product_id:Y.id,title:Y.title,quantity:Y.qty,price:Y.price,note:Y.note??"",kitchen_note:Kt.value??"",unit_price:Y.unit_price,item_kitchen_note:Y.item_kitchen_note??"",tax_percentage:ts(Y),tax_amount:dn(Y),variant_id:Y.variant_id||null,variant_name:Y.variant_name||null,addons:Y.addons||[],sale_discount_per_item:$l,removed_ingredients:fa||[],is_deal:!1}}),confirm_missing_ingredients:!0},Ii=await axios.post("/pos/order",Or);if(console.log(" Order created:",Ii.data),Ii.data.logout===!0){W.success(Ii.data.message||"Order created successfully. Logging out..."),setTimeout(()=>{window.location.href=Ii.data.redirect||"/login"},1e3),X&&X();return}Le=Ii.data.order.id}const Me={full_payment:!T,paid_item_ids:T?ue||[]:[],paid_product_ids:T?le||[]:[],paid_deal_ids:T?we||[]:[],payment_method:o,cash_received:s,payment_type:o==="Split"?"split":o.toLowerCase(),...o==="Split"&&{cash_amount:s,card_amount:l}};console.log(" Processing payment for order:",Le,Me);const lt=await axios.post(`/pos/orders/${Le}/payment`,Me);console.log(" Payment processed:",lt.data);const Ft=lt.data.is_final_payment===!0||lt.data.is_final_payment===1;console.log(" is_final_payment:",Ft),Ft?(W.success("Order fully paid! Generating final receipt..."),Ar(),un.value=!1,Si.value=!1,Ge.value=!1,Pe.value=!1,Re.value=null,cn.value=null,Nt(),Qs.value={id:Le,payment:lt.data.payment,payment_type:o==="Split"?"split":o.toLowerCase(),cash_amount:o==="Split"?s:null,card_amount:o==="Split"?l:null},Xs(JSON.parse(JSON.stringify(lt.data.order)),O===!0),Qr.value=await ml(),Gr(JSON.parse(JSON.stringify(lt.data.order)))):(console.log(" Partial payment received. Keeping modal open."),W.info(`Partial payment received (${lt.data.paid_items?.length||0} items). 
                Remaining: ${(lt.data.remaining_balance||0).toFixed(2)}`),cn.value=Le,await Zs(Le),await Nt(),Re.value?Si.value=!0:un.value=!0),wr(),Z.value=[],it.value=[],Pt.value=[],xi()}catch(Le){console.error(" Order/Payment error:",Le),W.error(Le.response?.data?.message||"Failed to process order/payment")}finally{X&&X()}},Go=async o=>{console.log(" onStripeSuccess called:",o);const{order:s,is_final_payment:l,print_payload:_}=o,x=l===!0||l===1;if(console.log(" is_final_payment:",x),x)W.success(o.message||"Order fully paid!"),Ar(),un.value=!1,Si.value=!1,Ge.value=!1,Re.value=null,cn.value=null,Nt(),Z.value=[],it.value=[],Pt.value=[],_&&Xs(JSON.parse(JSON.stringify(_)),!0),setTimeout(()=>{window.location.reload()},1e3);else{if(W.info(o.message||"Partial payment processed!"),s&&s.id){if(cn.value=s.id,Re.value&&s.items){const O=s.items.map(T=>({...T,server_item_id:T.id}));Re.value={...Re.value,order_items:O,total_amount:s.total_amount,sub_total:s.sub_total,payment_status:s.payment_status}}Nt()}Re.value?Si.value=!0:un.value=!0}wr()},Yo=async()=>{if(console.log(" User confirmed missing ingredients"),Un.value=!1,Yt.value&&!Yt.value.isDeal){const{itemIndex:o,newQty:s}=Yt.value,l=F.value[o];l&&(l.outOfStock=!1,l.qty=s,l.price=l.unit_price*l.qty,l.resale_discount_per_item&&(l.total_resale_discount=l.resale_discount_per_item*l.qty),W.success("Quantity updated")),Yt.value=null,Gt.value=[];return}if(Yt.value&&Yt.value.isDeal){const{itemIndex:o,newQty:s}=Yt.value,l=F.value[o];l&&l.isDeal&&(l.qty=s,l.price=l.unit_price*l.qty,W.success("Deal quantity updated")),Yt.value=null,Gt.value=[];return}if(Qi.value){const{deal:o,existingIndex:s,newQty:l}=Qi.value;if(s>=0)F.value[s].qty=l,F.value[s].price=F.value[s].unit_price*l,W.success("Deal quantity updated");else{const x=[];o.menu_items.forEach(T=>{T.ingredients&&T.ingredients.length>0&&x.push(...T.ingredients.map(q=>({...q,menu_item_id:T.id,menu_item_name:T.name})))});const O={id:o.id,title:o.title,price:A.value,unit_price:parseFloat(o.price),img:o.img,qty:1,stock:999999,ingredients:x,isDeal:!0,dealId:o.id,menu_items:o.menu_items.map(T=>({id:T.id,name:T.name,price:T.price,ingredients:(T.ingredients||[]).map(q=>({inventory_item_id:q.id,inventory_item_id:q.inventory_item_id,product_name:q.product_name||q.name,quantity:q.quantity||q.qty||"1.00",inventory_stock:q.inventory_stock||q.stock||0,unit:q.unit||"unit",category_id:q.category_id,supplier_id:q.supplier_id})),stock:xr(T.ingredients||[])})),resale_discount_per_item:0,total_resale_discount:0};F.value.push(O),W.success(`${o.title} added to cart!`)}Qi.value=null,Gt.value=[];return}if(jr.value){const{product:o,variantId:s,variantName:l,variantPrice:_,selectedAddons:x,addonsPrice:O,resaleDiscountPerItem:T,existingIndex:q,newQty:ue}=jr.value,le=_+O;if(q>=0)F.value[q].qty=ue,F.value[q].price=F.value[q].unit_price*ue,F.value[q].total_resale_discount=T*ue,F.value[q].outOfStock=!1,W.success("Quantity updated");else{const we=ii(o,s),Xe=ft(o);F.value.push({id:o.id,title:o.title,img:o.img,price:le,unit_price:Number(le),qty:1,note:"",stock:Xe,ingredients:we,variant_id:s,variant_name:l,addons:x,outOfStock:!1,resale_discount_per_item:T,total_resale_discount:T}),W.success("Item added to cart")}jr.value=null,Gt.value=[];return}if(Cr.value){pt.value=Cr.value.currentQty+1,W.success("Quantity increased"),Cr.value=null,Gt.value=[];return}};bs(async()=>{if(wr(),window.bootstrap){document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(O=>new window.bootstrap.Tooltip(O));const x=document.getElementById("chooseItem");x&&new window.bootstrap.Modal(x,{backdrop:"static"})}v.value="",b.value=Date.now(),await Tu(),setTimeout(()=>{S.value=!0;const x=document.getElementById(E);x&&(x.value="",v.value="")},100),fe(),xe(),Hs();const o=new URLSearchParams(window.location.search),s=o.get("order_id"),l=o.get("redirect_status");s&&l==="succeeded"&&(cn.value=s,await Zs(s),un.value=!0,window.history.replaceState({},document.title,window.location.pathname),W.success("Payment succeeded! Restoring modal context."));const _=document.getElementById("menuFilterModal");_&&_.addEventListener("hidden.bs.modal",()=>{zs.value||Gs(),zs.value=!1})});const jt=Oy();function to(){const o=jt.props.flash?.success,s=jt.props.flash?.error;o&&W.success(o,{autoClose:4e3}),s&&W.error(s,{autoClose:6e3})}bs(()=>to()),bs(()=>{jt.props.flash?.success;const o=jt.props.flash?.error;o&&W.error(o);const s=jt.props.flash?.print_payload;s&&setTimeout(()=>Xs(s),250),s&&setTimeout(()=>Gr(s),250)}),Fr(()=>jt.props.flash,()=>to(),{deep:!0});const Tr=me(()=>jt.props.onboarding?.optional_features?.enable_inventory_tracking??!0),vl=({id:o,status:s,message:l})=>{Qr.value=Qr.value.map(_=>_.id===o?{..._,status:s}:_)},jo=B(!1),Qr=B([]),Qo=B(!1),Xr=B(!1),no=B([]),io=B(!1),ml=async()=>{Xr.value=!1,no.value=[],io.value=!0;try{const o=await axios.get("/api/pos/orders/today");no.value=o.data.orders}catch(o){console.error("Failed to fetch POS orders:",o),W.error(o.response?.data?.message||"Failed to fetch POS orders")}finally{io.value=!1}},Xi=B(!1),Jr=B(!1),ro=B(!0),so=B(!0),Zr=B([]),es=B([]),Z=B([]),We=o=>{if(Z.value=o,!o||o.length===0){W.warning("No promos selected.");return}const s=o.reduce((_,x)=>_+parseFloat(x.applied_discount||0),0);if(s<=0){W.warning("Selected promos don't provide any discount for current cart items."),Z.value=[];return}const l=new Set(o.flatMap(_=>_.applied_to_items||[])).size;W.success(`${o.length} promo(s) applied! Applied to ${l} item(s). You saved ${n(s)}`),Xi.value=!1},gl=async()=>{ro.value=!0,Xi.value=!0;try{const o=await axios.get("/api/promos/current");o.data?.success?Zr.value=o.data.data||[]:(console.warn("Failed to fetch promos:",o.data),Zr.value=[],W.warning("No promos available at the moment"))}catch(o){console.error("Error fetching current meal promos:",o),Zr.value=[],W.error("Failed to load promotions")}finally{ro.value=!1}},yl=async()=>{so.value=!0,Jr.value=!0;try{const o=await axios.get("/api/discounts/all");o.data?.success?es.value=o.data.data||[]:(console.warn("Failed to fetch discounts:",o.data),es.value=[],W.warning("No discounts available at the moment"))}catch(o){console.error("Error fetching current meal discounts:",o),es.value=[],W.error("Failed to load discounts")}finally{so.value=!1}},bl=o=>!Z.value||Z.value.length===0?!1:Z.value.some(s=>!s.menu_items||s.menu_items.length===0?!0:s.menu_items.map(_=>_.id).includes(o.id)),wl=o=>{Qs.value=o,zi.value=!0,Xr.value=!1},ti=me(()=>!Z.value||Z.value.length===0?0:Z.value.reduce((o,s)=>{const l=parseFloat(s.discount_amount??0)||0;if(s.applied_discount!==void 0)return o+parseFloat(s.applied_discount);const _=El(s);if(s.min_purchase&&_<parseFloat(s.min_purchase))return o;if(s.type==="flat")return o+l;if(s.type==="percent"){const x=_*l/100,O=parseFloat(s.max_discount??0)||0;return O>0&&x>O?o+O:o+x}return o},0)),El=o=>{if(!o.menu_items||o.menu_items.length===0)return F.value.reduce((l,_)=>l+_.unit_price*_.qty,0);const s=o.menu_items.map(l=>l.id);return F.value.filter(l=>s.includes(l.id)).reduce((l,_)=>l+_.unit_price*_.qty,0)},Xo=me(()=>!Z.value||Z.value.length===0?[]:Z.value.map(o=>({promo_id:o.id,promo_name:o.name,promo_type:o.type,discount_amount:o.applied_discount||0,applied_to_items:o.applied_to_items||[]}))),ni=me(()=>{let o=0;const s=parseFloat(jt.props.onboarding.tax_and_vat.tax_rate)||0;return F.value.forEach(l=>{const _=ae.value.find(x=>x.id===l.id);if(_&&_.is_taxable){const O=l.unit_price*l.qty*s/100;o+=O}}),o}),je=me(()=>F.value.reduce((o,s)=>o+(s.total_resale_discount||0),0)),Hn=me(()=>{const o=$t.value+Er.value+ni.value+Fn.value+ln.value-je.value-ti.value-Wn.value;return Math.round(Math.max(0,o)*100)/100}),dn=o=>{const s=ae.value.find(l=>l.id===o.id);return s&&s.is_taxable&&s.tax_percentage?o.unit_price*o.qty*parseFloat(s.tax_percentage)/100:0},ts=o=>{const s=ae.value.find(l=>l.id===o.id);return s&&s.is_taxable&&s.tax_percentage?parseFloat(s.tax_percentage):0},ns=o=>{const s=ke(o),l=s?s.id:null,x=bt(o).map(T=>T.id).sort().join("-"),O=F.value.find(T=>{const q=(T.addons||[]).map(ue=>ue.id).sort().join("-");return T.id===o.id&&T.variant_id===l&&q===x});return O?O.qty:0},Qt=async o=>{const s=ke(o),l=s?s.id:null,_=bt(o),x=_.map(Me=>Me.id).sort().join("-"),O=F.value.findIndex(Me=>{const lt=(Me.addons||[]).map(Ft=>Ft.id).sort().join("-");return Me.id===o.id&&Me.variant_id===l&&lt===x});let T=1,q=null;const ue=ii(o,l);O>=0&&(q=F.value[O],T=q.qty+1);const le=Kr({id:o.id,title:o.title,variant_id:l,variant_name:s?s.name:null,ingredients:ue,removed_ingredients:q?.removed_ingredients||[],addons:_},T);if(!le.canAdd){console.log(" Missing ingredients for card increment (client-side)");const Me=parseFloat(s?s.price:o.price),lt=Ze(o),Ft=s?fn(s,!0):fn(o,!1);jr.value={product:o,variant:s,variantId:l,variantName:s?s.name:null,variantPrice:Me,selectedAddons:_,addonsPrice:lt,resaleDiscountPerItem:Ft,existingIndex:O,newQty:T},Gt.value=le.missing,Un.value=!0,W.warning("Some ingredients are missing. Confirm to proceed.");return}const we=parseFloat(s?s.price:o.price),Xe=Ze(o),X=we+Xe,Le=s?fn(s,!0):fn(o,!1);if(O>=0)F.value[O].qty++,F.value[O].price=F.value[O].unit_price*F.value[O].qty,F.value[O].total_resale_discount=Le*F.value[O].qty,F.value[O].outOfStock=!1;else{const Me=ft(o);F.value.push({id:o.id,title:o.title,img:o.img,price:X,unit_price:Number(X),qty:1,note:"",stock:Me,ingredients:ue,variant_id:l,variant_name:s?s.name:null,addons:_,outOfStock:!1,resale_discount_per_item:Le,total_resale_discount:Le})}},Jo=o=>{const s=ke(o),l=s?s.id:null,x=bt(o).map(q=>q.id).sort().join("-"),O=F.value.findIndex(q=>{const ue=(q.addons||[]).map(le=>le.id).sort().join("-");return q.id===o.id&&q.variant_id===l&&ue===x});if(O<0)return;const T=F.value[O];T.qty<=1?F.value.splice(O,1):(T.qty--,T.price=T.unit_price*T.qty,T.outOfStock=!1)},ii=(o,s)=>!s||!o.variants?.length?o.ingredients??[]:o.variants.find(_=>_.id===s)?.ingredients??o.ingredients??[],rt=B(null),Vn=B(null);let Ai=null;const Zo=(o,s)=>{rt.value=JSON.parse(JSON.stringify(o)),Vn.value=s;const l=ae.value.find(_=>_.id===o.id);if(l&&l.addon_groups&&l.addon_groups.length>0){const _=new Map;o.addons&&o.addons.forEach(O=>{_.set(O.id,{quantity:O.quantity||1,selected:!0})});const x=[];l.addon_groups.forEach(O=>{O.addons&&O.addons.length>0&&O.addons.forEach(T=>{const q=_.get(T.id);x.push({id:T.id,name:T.name,price:parseFloat(T.price||0),group_id:O.group_id,group_name:O.group_name,quantity:q?.quantity||1,selected:q?.selected||!1})})}),rt.value.addons=x}else rt.value.addons=[];if(!Ai){const _=document.getElementById("addonManagementModal");_&&(Ai=new bootstrap.Modal(_))}Ai&&Ai.show()},Rt=o=>{o.selected=!o.selected,o.selected||(o.quantity=1)},xl=o=>{o.selected&&(o.quantity=(o.quantity||1)+1)},Xt=o=>{o.selected&&(o.quantity||1)>1&&(o.quantity-=1)},ea=o=>o.addons?o.addons.reduce((s,l)=>l.selected!==!1?s+parseFloat(l.price)*(l.quantity||1):s,0):0,ta=()=>{if(Vn.value===null)return;const o=rt.value.addons.filter(O=>O.selected!==!1),s=rt.value.variant_id?ae.value.find(O=>O.id===rt.value.id)?.variants?.find(O=>O.id===rt.value.variant_id):null,l=parseFloat(s?s.price:rt.value.unit_price),_=o.reduce((O,T)=>O+parseFloat(T.price)*(T.quantity||1),0),x=l+_;F.value[Vn.value].addons=o,F.value[Vn.value].unit_price=x,F.value[Vn.value].price=x*F.value[Vn.value].qty,W.success("Addons updated successfully!"),Ai&&Ai.hide(),rt.value=null,Vn.value=null},An=()=>{let o=0;return at.value&&typeof at.value=="object"&&Object.values(at.value).forEach(s=>{Array.isArray(s)&&(o+=s.length)}),o},ri=me(()=>jt.props.current_user),is=me(()=>r.value.filter(o=>{const s=o.menu_items_count&&o.menu_items_count>0,l=o.deals_count&&o.deals_count>0;return s||l}));me(()=>ri.value?.roles?.includes("Cashier")||ri.value?.roles?.includes("Admin")||ri.value?.roles?.includes("Manager"));const Ue=B(`terminal-${ri.value?.id}`),{broadcastCartUpdate:si,broadcastUIUpdate:oo}=KE(Ue.value),Al=Do.debounce(o=>{console.log(" Broadcasting cart:",o.items.length,"items"),si(o)},300);async function ao(o){console.log(" Customer View (Cart Data):",o);try{const s=await axios.post(customer_view_url.value,{cartData:o},{headers:{"Content-Type":"application/json"},timeout:1e4});console.log(" Data sent successfully")}catch(s){s.code==="ECONNABORTED"?console.error("Timeout: Customer view didn't respond"):s.code==="ERR_NETWORK"?console.error("Network error: Cannot reach customer view"):console.error("Customer View failed:",s)}}const Cl=Do.debounce(o=>{console.log(" Broadcasting UI"),oo(o)},100);Fr(()=>({items:F.value.map(o=>({id:o.id,title:o.name||o.title,img:o.image_url||o.img||"/assets/img/default.png",price:parseFloat(o.total||o.price||0),qty:parseInt(o.qty||1),variant_name:o.variant?.name||null,addons:(o.addons||[]).map(s=>({id:s.id,name:s.name,price:parseFloat(s.price||0)})),resale_discount_per_item:parseFloat(o.resale_discount_per_item||0)})),customer:Ye.value||"Walk In",phone_number:nt.value||"",delivery_location:xt.value||"",orderType:_e.value||"Dine In",table:_t.value?{id:_t.value.id,name:_t.value.name}:null,subtotal:parseFloat($t.value||0),tax:parseFloat(ni.value||0),serviceCharges:parseFloat(ln.value||0),deliveryCharges:parseFloat(Fn.value||0),saleDiscount:parseFloat(je.value||0),promoDiscount:parseFloat(ti.value||0),total:parseFloat(Hn.value||0),note:Bn.value||"",appliedPromos:(Z.value||[]).map(o=>({id:o.id,name:o.name,discount:parseFloat(o.discount||0),applied_to_items:o.applied_to_items||[]}))}),o=>{console.log(" Cart changed:",o.items.length,"items, Total:",o.total),Al(o),ao(o)},{deep:!0,immediate:!0}),Fr(()=>({showCategories:Jn.value??!0,activeCat:Lt.value||null,menuCategories:(r.value||[]).map(o=>({id:o.id,name:o.name,menu_items_count:o.menu_items_count||0})),menuItems:(ae.value||[]).map(o=>({id:o.id,name:o.name,price:parseFloat(o.price||0),image_url:o.image_url||null,description:o.description||"",label_color:o.label_color||"#1B1670",category:o.category?{id:o.category.id,name:o.category.name}:null,variants:(o.variants||[]).map(s=>({id:s.id,name:s.name,price:parseFloat(s.price||0),is_saleable:s.is_saleable??!1,resale_type:s.resale_type||null,resale_value:parseFloat(s.resale_value||0)})),addon_groups:(o.addon_groups||[]).map(s=>({id:s.id,name:s.name,addons:(s.addons||[]).map(l=>({id:l.id,name:l.name,price:parseFloat(l.price||0)}))})),is_saleable:o.is_saleable??!1,resale_type:o.resale_type||null,resale_value:parseFloat(o.resale_value||0)})),searchQuery:Ot.value||"",selectedCardVariant:Be.value||{},selectedCardAddons:He.value||{}}),o=>{console.log(" UI changed - Categories:",o.menuCategories.length,"Items:",o.menuItems.length),Cl(o)},{deep:!0,immediate:!0});const Tl=()=>{const o=route("customer-display.index",{terminal:Ue.value});window.open(o,"_blank","width=1920,height=1080")},fn=(o,s=!1)=>{if(!o)return 0;const l=o.is_saleable??o?.menu_item?.is_saleable,_=o.resale_type??o?.menu_item?.resale_type,x=o.resale_value??o?.menu_item?.resale_value,O=parseFloat(o.price||0);return!l||!_||!x?0:_==="flat"?parseFloat(x):_==="percentage"?O*parseFloat(x)/100:0},oi=(o,s=!1)=>{const l=parseFloat(o.price||0),_=fn(o,s);return Math.max(0,l-_)},ai=(o,s=!1)=>{if(!o)return null;const l=o.is_saleable??o?.menu_item?.is_saleable,_=o.resale_type??o?.menu_item?.resale_type,x=o.resale_value??o?.menu_item?.resale_value,O=fn(o,s);return!l||!_||!x||O<=0?null:{type:_,value:x,amount:O,display:_==="flat"?`Sale ${n(O)}`:`${x}% OFF`}},Ji=o=>{const s=ke(o);let l;s?l=oi(s,!0):l=oi(o,!1);const _=Ze(o);return l+_},Zi=o=>{if(!o.variants||o.variants.length===0){const x=fn(o,!1)>0;return{min:oi(o,!1),max:oi(o,!1),minOriginal:x?parseFloat(o.price||0):null,maxOriginal:x?parseFloat(o.price||0):null}}const s=o.variants.map(x=>oi(x,!0)),l=o.variants.map(x=>parseFloat(x.price||0)),_=o.variants.some(x=>fn(x,!0)>0);return{min:Math.min(...s),max:Math.max(...s),minOriginal:_?Math.min(...l):null,maxOriginal:_?Math.max(...l):null}},na=()=>{if(!ce.value)return 0;const o=Mn();return o?oi(o,!0):oi(ce.value,!1)},ia=()=>na()+wi(),Ci=B([]),rs=B(!1),ra=async()=>{rs.value=!0;try{const o=await axios.get("/api/deals",{params:{status:1,per_page:100}});console.log("Fetched deals:",o.data.data),Ci.value=o.data.data.map(s=>({id:s.id,title:s.name,price:s.price,img:s.image_url||"/assets/img/product/product29.jpg",description:s.description,menu_items:s.menu_items||[],status:s.status,category_id:s.category_id,category:s.category}))}catch(o){console.error("Error fetching deals:",o),W.error("Failed to load deals")}finally{rs.value=!1}},sa=o=>{const s=F.value.find(l=>l.isDeal&&l.dealId===(o.dealId||o.id));return s?s.qty:0},lo=o=>{const s=r.value.find(x=>x.id===o);if(s?.total_items_count!==void 0)return s.total_items_count;const l=s?.menu_items_count||0,_=er(o);return l+_},er=o=>!Ci.value||Ci.value.length===0?0:Ci.value.filter(s=>s.category_id===o).length,oa=(o,s)=>{if(!Tr.value)return{canAdd:!0,missing:[]};const l=[],_={};return F.value.forEach(x=>{let O=[];x.isDeal?x.menu_items?.forEach(T=>{O.push(...T.ingredients||[])}):O=x.ingredients||[],O.forEach(T=>{const q=T.inventory_item_id||T.id,ue=Number(T.inventory_stock??T.stock??0),le=Number(T.quantity??T.qty??1)*x.qty;_[q]||(_[q]={totalStock:ue,used:0,name:T.product_name||T.name,unit:T.unit||"unit"}),_[q].used+=le})}),o.menu_items.forEach(x=>{const O=x.ingredients||[];O.length!==0&&O.forEach(T=>{const q=T.inventory_item_id||T.id,ue=Number(T.quantity??T.qty??1)*s;let we=Number(T.inventory_stock??T.stock??0);_[q]&&(we=_[q].totalStock-_[q].used);const Xe=F.value.find(X=>X.isDeal&&X.dealId===o.id);if(Xe){const X=Number(T.quantity??T.qty??1)*Xe.qty;we+=X}we<ue&&l.push({deal_id:o.id,deal_title:o.title,menu_item_id:x.id,menu_item_name:x.name,inventory_item_id:q,inventory_item_name:T.product_name||T.name,required_quantity:ue,available_quantity:Math.max(0,we),shortage_quantity:ue-we,unit:T.unit||"unit",order_quantity:s})})}),{canAdd:l.length===0,missing:l}},aa=async o=>{const s=F.value.findIndex(x=>x.isDeal&&x.dealId===o.id),l=s>=0?F.value[s].qty+1:1,_=oa(o,l);if(!_.canAdd){console.log(" Missing ingredients for deal (client-side)"),Qi.value={deal:o,existingIndex:s,newQty:l},Gt.value=_.missing,Un.value=!0,W.warning("Some ingredients are missing. Confirm to proceed.");return}if(s>=0)F.value[s].qty++,F.value[s].price=F.value[s].unit_price*F.value[s].qty,W.success("Deal quantity updated");else{const O=[];o.menu_items.forEach(q=>{q.ingredients&&q.ingredients.length>0&&O.push(...q.ingredients.map(ue=>({...ue,menu_item_id:q.id,menu_item_name:q.name})))});const T={id:o.id,title:o.title,price:parseFloat(o.price),unit_price:parseFloat(o.price),img:o.img,qty:1,stock:999999,ingredients:O,isDeal:!0,dealId:o.id,menu_items:o.menu_items.map(q=>({id:q.id,name:q.name,price:q.price,ingredients:q.ingredients||[],stock:xr(q.ingredients||[])})),resale_discount_per_item:0,total_resale_discount:0};F.value.push(T),W.success(`${o.title} added to cart!`)}},Mt=o=>{const s=F.value.findIndex(_=>_.isDeal&&_.dealId===o.id);if(s<0)return;const l=F.value[s];l.qty<=1?(F.value.splice(s,1),W.info("Deal removed from cart")):(l.qty--,l.price=l.unit_price*l.qty,W.success("Deal quantity decreased"))};bs(()=>{ra(),Nt()});const ze=B(null),qe=B(0),Qe=B(1),Cn=B({}),li=B({}),tr=B({}),ui=B([]);let ss=null;const Ke=me(()=>!ze.value||!ze.value.menu_items?null:ze.value.menu_items[qe.value]),nr=me(()=>Ti().length>0),Sl=me(()=>Ke.value?.addon_groups&&Ke.value.addon_groups.length>0),Jt=me(()=>{let o=[],s=1;return nr.value&&(o.push({id:"ingredients",name:"Ingredients",stepNumber:s,actualStep:1}),s++),Sl.value&&(o.push({id:"addons",name:"Add-ons",stepNumber:s,actualStep:2}),s++),o.push({id:"review",name:"Review",stepNumber:s,actualStep:3}),o}),os=me(()=>Jt.value.length),la=me(()=>{if(Qe.value===1)return"0%";const o=Jt.value.length,s=(Qe.value-1)/(o-1);return`calc(${s*100}% - ${14-s*28}px)`}),ci=me(()=>qe.value===ze.value?.menu_items?.length-1);me(()=>ze.value?.menu_items?.length?ui.value.length/ze.value.menu_items.length*100:0);const Ti=()=>Ke.value?Ke.value.ingredients||[]:[],uo=o=>(Cn.value[qe.value]||[]).includes(o),Il=o=>{const s=qe.value;Cn.value[s]||(Cn.value[s]=[]);const l=Cn.value[s],_=l.indexOf(o);_>-1?(l.splice(_,1),W.info("Ingredient added back")):(l.push(o),W.info("Ingredient removed"))},Ol=()=>{const o=Ti(),s=Cn.value[qe.value]||[];return o.filter(l=>!s.includes(l.id)).length},ir=()=>{const o=qe.value,s=li.value[o];if(!s)return 0;let l=0;return Object.values(s).forEach(_=>{l+=_.length}),l},pn=()=>{const o=qe.value,s=li.value[o];if(!s)return"";const l=[];return Object.values(s).forEach(_=>{_.forEach(x=>{l.push(`${x.name} (+${n(x.price)})`)})}),l.join(", ")},co=()=>{const o=qe.value,s=Cn.value[o]||[];if(s.length===0)return"";const l=Ti(),_=s.map(x=>{const O=l.find(T=>T.id===x);return O?O.product_name||O.name:null}).filter(Boolean);return _.length===0?"":`No ${_.join(", ")}`},Nl=o=>o<Qe.value?"stepper-circle-completed":o===Qe.value?"stepper-circle-active":"stepper-circle-inactive",ua=o=>{(o<=Qe.value||o===Qe.value+1)&&(Qe.value=o)},ca=()=>{Qe.value=Jt.value[0]?.stepNumber||1},kl=()=>{const o=Jt.value.findIndex(s=>s.stepNumber===Qe.value);o<Jt.value.length-1&&(Qe.value=Jt.value[o+1].stepNumber)},Dl=()=>{const o=Jt.value.findIndex(s=>s.stepNumber===Qe.value);o>0&&(Qe.value=Jt.value[o-1].stepNumber)},rr=()=>{ui.value.includes(qe.value)||ui.value.push(qe.value),qe.value++,te.value=0,ca(),W.success("Item customized! Configure next item.")},y=async()=>{if(!ze.value)return;ui.value.includes(qe.value)||ui.value.push(qe.value);const o=ze.value.menu_items.map((O,T)=>{const q=Cn.value[T]||[],ue=li.value[T]||{},le=tr.value[T]||"",we=[];Object.values(ue).forEach(X=>{X.forEach(Le=>{we.push({id:Le.id,name:Le.name,price:parseFloat(Le.price||0)})})});const Xe=(O.ingredients||[]).filter(X=>!q.includes(X.id)).map(X=>({id:X.id,inventory_item_id:X.inventory_item_id||X.id,product_name:X.product_name||X.name,quantity:X.quantity||X.qty||"1.00",stock:X.stock||0,unit:X.unit||"unit"}));return{id:O.id,name:O.name,price:O.price,ingredients:Xe,addons:we,kitchen_note:le,removed_ingredients:q,stock:xr(Xe)}}),s=F.value.findIndex(O=>O.isDeal&&O.dealId===ze.value.id),l=999999,_=[];if(o.forEach(O=>{O.ingredients&&O.ingredients.length>0&&_.push(...O.ingredients.map(T=>({...T,menu_item_id:O.id,menu_item_name:O.name})))}),s>=0)F.value[s].qty++,F.value[s].price=F.value[s].unit_price*F.value[s].qty,W.success("Deal quantity updated!");else{const O={id:ze.value.id,title:ze.value.title,price:A.value,unit_price:parseFloat(ze.value.price),img:ze.value.img,qty:1,stock:l,ingredients:_,isDeal:!0,dealId:ze.value.id,menu_items:o,resale_discount_per_item:0,total_resale_discount:0};F.value.push(O),W.success(`${ze.value.title} added to cart!`)}const x=bootstrap.Modal.getInstance(document.getElementById("customizeDealModal"));x&&x.hide(),De()},k=me(()=>{if(!Ke.value)return 0;const o=parseFloat(Ke.value.price||0),s=qe.value,l=li.value[s];if(!l)return o;let _=0;return Object.values(l).forEach(x=>{x.forEach(O=>{_+=parseFloat(O.price||0)})}),o+_}),A=me(()=>{if(!ze.value)return 0;const o=parseFloat(ze.value.price||0);let s=0;return Object.values(li.value).forEach(l=>{Object.values(l).forEach(_=>{_.forEach(x=>{s+=parseFloat(x.price||0)})})}),o+s}),z=me(()=>{const o=qe.value,s=li.value[o];if(!s)return 0;let l=0;return Object.values(s).forEach(_=>{_.forEach(x=>{l+=parseFloat(x.price||0)})}),l}),de=o=>{if(ze.value=o,qe.value=0,Cn.value={},li.value={},tr.value={},ui.value=[],ca(),!ss){const s=document.getElementById("customizeDealModal");s&&(ss=new bootstrap.Modal(s,{backdrop:"static"}))}ss&&ss.show()},De=()=>{ze.value=null,qe.value=0,Qe.value=1,Cn.value={},li.value={},tr.value={},ui.value=[],te.value=0},Ge=B(!1),Pe=B(!1),hn=B([]),as=B(!1),Zt=async()=>{if(F.value.length===0){W.error("No items in cart to hold");return}try{const o={customer_name:Ye.value,phone_number:nt.value,delivery_location:xt.value,order_type:_e.value,table_number:_t.value?.name||null,sub_total:$t.value,tax:ni.value,service_charges:ln.value,delivery_charges:Fn.value,sale_discount:je.value,promo_discount:ti.value,approved_discounts:Wn.value,total_amount:Hn.value,note:Bn.value,kitchen_note:Kt.value,order_items:F.value.map(l=>({product_id:l.id,title:l.title,quantity:l.qty,price:l.price,unit_price:l.unit_price,note:l.note||"",item_kitchen_note:l.item_kitchen_note||"",variant_id:l.variant_id||null,variant_name:l.variant_name||null,addons:l.addons||[],ingredients:l.ingredients||[],removed_ingredients:l.removed_ingredients||[],sale_discount_per_item:l.resale_discount_per_item||0,total_resale_discount:l.total_resale_discount||0,isDeal:l.isDeal||!1,dealId:l.dealId||null,menu_items:l.menu_items||[]})),applied_promos:Z.value.map(l=>({promo_id:l.id,promo_name:l.name,promo_type:l.type,discount_amount:l.applied_discount||0,applied_to_items:l.applied_to_items||[]})),approved_discount_details:it.value.map(l=>({discount_id:l.id,discount_name:l.name,discount_percentage:l.percentage,discount_amount:ji(l.percentage),approval_id:l.approval_id})),selected_discounts:it.value,terminal_id:Ue.value};(await axios.post("/pending-orders",o)).data.success&&(W.success("Order held successfully!"),Ar(),await Nt())}catch(o){W.error(o.response?.data?.message||"Failed to hold order")}},Nt=async()=>{as.value=!0;try{const o=await axios.get("/pending-orders");o.data.success?hn.value=o.data.data:hn.value=[]}catch(o){console.error("Error fetching pending orders:",o),W.error("Failed to load pending orders"),hn.value=[]}finally{as.value=!1}},Ll=async()=>{Ge.value=!0,await Nt()},sr=async()=>{Pe.value=!0,await Nt()},ls=async o=>{try{if(Ye.value=o.customer_name||Ks(),nt.value=o.phone_number||"",xt.value=o.delivery_location||"",_e.value=o.order_type,Bn.value=o.note||"",Kt.value=o.kitchen_note||"",o.table_number){const s=Ei.value.table_details?.find(l=>l.name===o.table_number);_t.value=s||null}F.value=o.order_items.map(s=>({id:s.id||s.product_id,product_id:s.product_id,server_item_id:s.id,title:s.title,qty:s.quantity,price:s.price,unit_price:s.unit_price,note:s.note||"",item_kitchen_note:s.item_kitchen_note||"",img:s.img||"/assets/img/default.png",variant_id:s.variant_id||null,variant_name:s.variant_name||null,addons:s.addons||[],ingredients:s.ingredients||[],removed_ingredients:s.removed_ingredients||[],resale_discount_per_item:s.sale_discount_per_item||0,total_resale_discount:s.total_resale_discount||0,stock:s.stock||999999,isDeal:s.isDeal||!1,dealId:s.dealId||null,menu_items:s.menu_items||[]})),Z.value=o.applied_promos||[],it.value=o.selected_discounts||[],await axios.delete(`/pending-orders/${o.id}`),W.success("Order resumed successfully!"),Ge.value=!1,await Nt()}catch{W.error("Failed to resume order")}},Sr=async o=>{try{let s="",l={};o.type==="unpaid"?(s=`/pending-orders/${o.id}`,l={order_type:"unpaid"}):(s=`/pending-orders/${o.id}`,l={order_type:"held"}),await axios.delete(s,{data:l}),W.success("Order rejected successfully"),await Nt()}catch(s){console.error("Error rejecting order:",s),W.error("Failed to reject order")}},Ae=(o,s)=>at.value[o]?.some(l=>l.id===s),us=(o,s)=>at.value[o]?.find(_=>_.id===s)?.quantity||1,fo=(o,s)=>{at.value[o]||(at.value[o]=[]);const l=at.value[o].findIndex(_=>_.id===s.id);if(l>-1)at.value[o].splice(l,1);else{const _=ce.value.addon_groups.find(x=>x.group_id===o);if(_&&_.max_select>0&&at.value[o].length>=_.max_select){W.warning(`You can only select up to ${_.max_select} ${_.group_name}`);return}at.value[o].push({id:s.id,name:s.name,price:parseFloat(s.price),group_id:o,quantity:1})}},Ir=(o,s)=>{const l=at.value[o]?.find(_=>_.id===s);l&&l.quantity++},da=(o,s)=>{const l=at.value[o]?.find(_=>_.id===s);l&&l.quantity>1&&l.quantity--},Si=B(!1),Re=B(null),cs=async()=>{if(F.value.length===0){W.error("Please add at least one item to the cart.");return}if(_e.value==="Eat_in"&&!_t.value){W.error("Please select a table number for Dine In orders.");return}if((_e.value==="Delivery"||_e.value==="Takeaway")&&!Ye.value){W.error("Customer name is required.");return}if(_e.value==="Delivery"&&!nt.value){W.error("Phone number is required for delivery.");return}if(_e.value==="Delivery"&&!xt.value){W.error("Delivery location is required.");return}try{const o={customer_name:Ye.value,phone_number:nt.value,delivery_location:xt.value,sub_total:$t.value,tax:ni.value,service_charges:ln.value,delivery_charges:Fn.value,sales_discount:je.value,approved_discounts:Wn.value,approved_discount_details:it.value.map(l=>({discount_id:l.id,discount_name:l.name,discount_percentage:l.percentage,discount_amount:ji(l.percentage),approval_id:l.approval_id})),promo_discount:ti.value,applied_promos:Z.value.map(l=>({promo_id:l.id,promo_name:l.name,promo_type:l.type,discount_amount:l.applied_discount||0,applied_to_items:l.applied_to_items||[]})),total_amount:Hn.value,note:Bn.value,kitchen_note:Kt.value,order_date:new Date().toISOString().split("T")[0],order_time:new Date().toTimeString().split(" ")[0],order_type:_e.value==="Eat_in"?"Eat In":_e.value,table_number:_t.value?.name||null,items:F.value.map(l=>({product_id:l.id,title:l.title,quantity:l.qty,price:l.price,note:l.note??"",kitchen_note:Kt.value??"",unit_price:l.unit_price,item_kitchen_note:l.item_kitchen_note??"",tax_percentage:ts(l),tax_amount:dn(l),variant_id:l.variant_id||null,variant_name:l.variant_name||null,addons:l.addons||[],sale_discount_per_item:l.resale_discount_per_item||0,removed_ingredients:l.removed_ingredients||[],is_deal:l.isDeal||!1,deal_id:l.dealId||null,menu_items:l.menu_items||[]})),confirm_missing_ingredients:!0},s=await axios.post("/pos/order-without-payment",o);s.data.success&&(W.success("Order placed successfully! Payment pending."),Gr(JSON.parse(JSON.stringify(s.data.order))),Ar(),await Nt())}catch(o){console.error("Error placing order:",o),W.error(o.response?.data?.message||"Failed to place order")}},di=o=>{const s=(o.order_items||[]).map(_=>({..._,server_item_id:_.id}));Re.value={...o,order_items:s};const l=o.remaining_balance!==void 0?o.remaining_balance:o.total_amount;Ki.value=parseFloat(parseFloat(l).toFixed(2)),Si.value=!0},ds=async o=>{try{const s={customer_name:Ye.value,phone_number:nt.value,delivery_location:xt.value,sub_total:(Number(o.unit_price)||0)*(Number(o.qty)||0),tax:dn(o),service_charges:ln.value,delivery_charges:Fn.value,sales_discount:0,approved_discounts:0,approved_discount_details:[],promo_discount:0,applied_promos:[],total_amount:(Number(o.unit_price)||0)*(Number(o.qty)||0)+dn(o),note:o.note??"",kitchen_note:Kt.value??"",order_date:new Date().toISOString().split("T")[0],order_time:new Date().toTimeString().split(" ")[0],order_type:_e.value==="Eat_in"?"Eat In":_e.value==="Delivery"?"Delivery":_e.value==="Takeaway"?"Takeaway":"Collection",table_number:_t.value?.name||null,is_paid:!0,payment_method:"Cash",auto_print_kot:!0,cash_received:(Number(o.unit_price)||0)*(Number(o.qty)||0),change:0,items:[{product_id:o.id,title:o.title,quantity:o.qty,price:o.price,note:o.note??"",kitchen_note:o.kitchen_note??"",unit_price:o.unit_price,item_kitchen_note:o.item_kitchen_note??"",tax_percentage:ts(o),tax_amount:dn(o),variant_id:o.variant_id||null,variant_name:o.variant_name||null,addons:o.addons||[],sale_discount_per_item:0,removed_ingredients:o.removed_ingredients||[],is_deal:o.isDeal||!1}],confirm_missing_ingredients:!0};console.log(" Sending single item order:",s);const l=await axios.post("/pos/order",s);W.success(l.data.message||"Item order placed successfully!"),o.isPaid=!0,wr()}catch(s){console.error(" Single item order error:",s),W.error(s.response?.data?.message||"Failed to place item order")}};return(o,s)=>(I(),N(Ve,null,[sn(be(ky),{title:"Sale"}),sn($y,null,{default:Dy(()=>[c("div",dx,[c("div",fx,[c("div",px,[c("div",{class:yt(Jn.value?"col-md-12":"col-lg-8")},[Jn.value?(I(),N("div",hx,[c("div",_x,[s[31]||(s[31]=c("h4",{class:"mb-0"},"Categories",-1)),c("button",{onClick:Tl,class:"btn btn-primary d-flex align-items-center gap-2",type:"button"},[...s[29]||(s[29]=[c("i",{class:"bi bi-tv"},null,-1),c("span",null,"Customer View",-1)])]),c("div",vx,[s[30]||(s[30]=c("input",{type:"email",name:"email",autocomplete:"email",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px"},tabindex:"-1","aria-hidden":"true"},null,-1)),S.value?ct((I(),N("input",{id:E,"onUpdate:modelValue":s[0]||(s[0]=l=>v.value=l),key:b.value,type:"search",class:"form-control form-control-sm",placeholder:"Search categories...",autocomplete:"new-password",name:E,role:"presentation",style:{"border-radius":"8px",padding:"8px 12px"}})),[[Yn,v.value]]):(I(),N("input",mx))])]),s[34]||(s[34]=c("hr",null,null,-1)),f.value?(I(),N("div",gx,[...s[32]||(s[32]=[c("div",{class:"spinner-border",role:"status",style:{color:"#1B1670",width:"3rem",height:"3rem","border-width":"0.3em"}},null,-1),c("div",{class:"mt-2 fw-semibold text-muted"},"Loading...",-1)])])):(I(),N(Ve,{key:1},[(I(!0),N(Ve,null,ht(Ie.value,l=>(I(),N("div",{key:l.id,class:"col-6 col-md-4 col-lg-4 category-cards"},[c("div",{class:"cat-card",onClick:_=>Ws(l)},[c("div",bx,[c("span",wx,[l.image_url?(I(),N("img",{key:0,src:l.image_url,alt:"Category Image",class:"cat-image"},null,8,Ex)):(I(),N("span",xx,""))])]),c("div",Ax,D(l.name),1),c("div",Cx,[ge(D(lo(l.id))+" Items ",1),er(l.id)>0?(I(),N("span",Tx," ("+D(er(l.id))+" Deal"+D(er(l.id)>1?"s":"")+") ",1)):Q("",!0)])],8,yx)]))),128)),!f.value&&Ie.value.length===0?(I(),N("div",Sx,[...s[33]||(s[33]=[c("div",{class:"alert alert-light border text-center rounded-4"}," No categories found ",-1)])])):Q("",!0)],64))])):(I(),N("div",Ix,[c("div",Ox,[c("button",{class:"btn btn-primary rounded-pill shadow-sm px-3",onClick:s[1]||(s[1]=l=>Us())},[...s[35]||(s[35]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),ge(" Back ",-1)])]),c("h5",Nx,D(r.value.find(l=>l.id===Lt.value)?.name||"Items"),1),c("div",kx,[sn(By,{modelValue:vt.value,"onUpdate:modelValue":s[2]||(s[2]=l=>vt.value=l),title:"Menu Items","modal-id":"menuFilterModal","sort-options":[{value:"name_asc",label:"Name: A to Z"},{value:"name_desc",label:"Name: Z to A"},{value:"price_asc",label:"Price: Low to High"},{value:"price_desc",label:"Price: High to Low"}],"show-price-range":!0,"show-category":!1,"show-stock-status":!1,"show-date-range":!1,categories:[],suppliers:[],onApply:Bo,onClear:Gs},null,8,["modelValue"]),c("div",Dx,[s[36]||(s[36]=c("i",{class:"bi bi-search position-absolute",style:{left:"12px",top:"50%",transform:"translateY(-50%)","z-index":"10"}},null,-1)),ct(c("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>Ot.value=l),class:"form-control search-input ps-5",type:"text",placeholder:"Search items...",style:{"min-width":"250px"}},null,512),[[Yn,Ot.value]])])])]),qo.value.length===0?(I(),N("div",Lx,[c("div",$x,[s[40]||(s[40]=c("i",{class:"bi bi-search me-2",style:{"font-size":"2rem",opacity:"0.5"}},null,-1)),s[41]||(s[41]=c("h5",{class:"mt-2 mb-2 text-dark fw-semibold"},"No Menu Found",-1)),c("p",Px,[Ot.value&&vt.value.priceRange&&vt.value.priceRange.length>0?(I(),N(Ve,{key:0},[ge(" No items match your search and filter criteria. ")],64)):Ot.value?(I(),N(Ve,{key:1},[s[37]||(s[37]=ge(' No items found matching "',-1)),c("strong",null,D(Ot.value),1),s[38]||(s[38]=ge('" ',-1))],64)):vt.value.priceRange&&vt.value.priceRange.length>0?(I(),N(Ve,{key:2},[ge(" No items match the selected price range. ")],64)):(I(),N(Ve,{key:3},[ge(" No Menu available in this category. ")],64))]),c("button",{class:"btn btn-sm btn-outline-secondary rounded-pill",onClick:Gs},[...s[39]||(s[39]=[c("i",{class:"bi bi-arrow-clockwise me-1"},null,-1),ge("Clear Filters ",-1)])])])])):Q("",!0),c("div",Rx,[(I(!0),N(Ve,null,ht(qo.value,l=>(I(),N("div",{class:"col-12 col-md-6 left-card cat-cards col-xl-6 d-flex",key:l.id},[l.isDeal?(I(),N("div",Mx,[c("div",Fx,[c("img",{src:l.img,alt:"",class:"w-100 h-100",style:{"object-fit":"cover"}},null,8,qx),c("span",Bx,[s[42]||(s[42]=c("i",{class:"bi bi-gift-fill me-1"},null,-1)),ge(" "+D(be(n)(l.price)),1)])]),c("div",Wx,[c("div",null,[c("div",Ux,D(l.title),1)]),c("div",Hx,[c("button",{class:"btn btn-primary customize-deal btn-sm w-75 mb-2",onClick:Mr(_=>de(l),["stop"])}," Customize Deal ",8,Vx),c("div",{class:"d-flex align-items-center justify-content-start gap-2",onClick:s[4]||(s[4]=Mr(()=>{},["stop"]))},[c("button",{class:"qty-btn btn btn-outline-danger rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Mr(_=>Mt(l),["stop"]),disabled:sa(l)<=0},[...s[43]||(s[43]=[c("strong",null,"",-1)])],8,zx),c("div",Kx,D(sa(l)),1),c("button",{class:"qty-btn btn btn-outline-danger rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Mr(_=>aa(l),["stop"])},[...s[44]||(s[44]=[c("strong",null,"+",-1)])],8,Gx)])])])])):(I(),N("div",{key:1,class:"card rounded-4 shadow-sm overflow-hidden border-3 w-100 d-flex flex-row align-items-stretch",style:To({borderColor:l.label_color||"#1B1670"})},[c("div",Yx,[c("img",{src:l.img,alt:"",class:"w-100 h-100",style:{"object-fit":"cover"}},null,8,jx),l.variants&&l.variants.length>0?(I(),N("div",Qx,[Zi(l).minOriginal!==null?(I(),N("span",Xx,D(be(n)(Zi(l).minOriginal)),1)):Q("",!0),c("span",Jx,D(be(n)(Zi(l).min))+" - ",1),Zi(l).maxOriginal!==null?(I(),N("span",Zx,D(be(n)(Zi(l).maxOriginal)),1)):Q("",!0),c("span",eA,D(be(n)(Zi(l).max)),1)])):Q("",!0),It(l)<=0?(I(),N("span",tA," OUT OF STOCK ")):Q("",!0)]),c("div",nA,[l.variants&&l.variants.length>0&&ai(ke(l),!0)||(!l.variants||l.variants.length===0)&&ai(l,!1)?(I(),N("span",iA,D(l.variants&&l.variants.length>0?ai(ke(l),!0).display:ai(l,!1).display),1)):Q("",!0),c("span",{class:"m-1 px-2 py-1 rounded-pill text-white fw-semibold",style:To({background:l.label_color||"#1B1670",fontSize:"0.58rem",letterSpacing:"0.3px"})},[ai(ke(l)||l,!!l.variants?.length)?(I(),N(Ve,{key:0},[c("span",rA,D(be(n)(ke(l)?.price||l.price)),1),c("span",sA,D(be(n)(Ji(l))),1)],64)):(I(),N(Ve,{key:1},[ge(D(be(n)(ke(l)?.price||l.price)),1)],64))],4),c("div",null,[c("div",{class:"h5 fw-bold mb-2 menu-name",style:To({color:l.label_color||"#1B1670"})},D(l.title),5),c("button",{class:"btn btn-primary btn-sm mb-2 view-details-btn",onClick:_=>br(l)}," Customization ",8,oA)]),c("div",{class:"mt-2 d-flex align-items-center justify-content-start gap-2",onClick:s[5]||(s[5]=Mr(()=>{},["stop"]))},[c("button",{class:"qty-btn btn btn-outline-secondary rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Mr(_=>Jo(l),["stop"]),disabled:ns(l)<=0},[...s[45]||(s[45]=[c("strong",null,"",-1)])],8,aA),c("div",lA,D(ns(l)),1),c("button",{class:"qty-btn btn btn-outline-secondary rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Mr(_=>Qt(l),["stop"])},[...s[46]||(s[46]=[c("strong",null,"+",-1)])],8,uA)])])],4))]))),128))])]))],2),Jn.value?Q("",!0):(I(),N("div",cA,[c("div",dA,[c("button",{class:"btn-compact btn-pending",onClick:Ll},[s[47]||(s[47]=c("i",{class:"bi bi-hourglass-split"},null,-1)),s[48]||(s[48]=c("span",{class:"btn-label"},"Pending",-1)),hn.value.filter(l=>l.type==="held").length>0?(I(),N("span",fA,D(hn.value.filter(l=>l.type==="held").length),1)):Q("",!0)]),c("button",{class:"btn-compact btn-unpaid",onClick:sr},[s[49]||(s[49]=c("i",{class:"bi bi-cash-stack"},null,-1)),s[50]||(s[50]=c("span",{class:"btn-label"},"Unpaid",-1)),hn.value.filter(l=>l.type==="unpaid").length>0?(I(),N("span",pA,D(hn.value.filter(l=>l.type==="unpaid").length),1)):Q("",!0)]),c("button",{class:"btn-compact btn-promo",onClick:gl},[...s[51]||(s[51]=[c("i",{class:"bi bi-gift"},null,-1),c("span",{class:"btn-label"},"Promos",-1)])]),c("button",{class:"btn-compact btn-discount",onClick:yl},[...s[52]||(s[52]=[c("i",{class:"bi bi-percent"},null,-1),c("span",{class:"btn-label"},"Discounts",-1)])])]),c("div",hA,[c("div",_A,[c("div",vA,[(I(!0),N(Ve,null,ht(Zn.value,(l,_)=>(I(),N("button",{key:_,class:yt(["type-pill",{active:_e.value===l}]),onClick:x=>_e.value=l},D(l.replace(/_/g," ")),11,mA))),128))])]),c("div",gA,[c("div",yA,[_e.value==="Eat_in"?(I(),N("div",bA,[c("div",wA,[ct(c("select",{"onUpdate:modelValue":s[6]||(s[6]=l=>_t.value=l),class:"form-select-compact"},[s[53]||(s[53]=c("option",{value:null},"Table",-1)),(I(!0),N(Ve,null,ht(Ei.value.table_details,(l,_)=>(I(),N("option",{key:_,value:l},D(l.name),9,EA))),128))],512),[[Ly,_t.value]]),mt.value.table_number?(I(),N("div",xA,D(mt.value.table_number[0]),1)):Q("",!0)]),c("div",AA,[ct(c("input",{"onUpdate:modelValue":s[7]||(s[7]=l=>Ye.value=l),class:"form-control-compact",placeholder:"Customer"},null,512),[[Yn,Ye.value]])])])):_e.value!=="Delivery"?(I(),N("div",CA,[ct(c("input",{"onUpdate:modelValue":s[8]||(s[8]=l=>Ye.value=l),class:yt(["form-control-compact",{"is-invalid":mt.value.customer}]),placeholder:"Customer Name"},null,2),[[Yn,Ye.value]]),mt.value.customer?(I(),N("div",TA,D(mt.value.customer[0]),1)):Q("",!0)])):(I(),N("div",SA,[ct(c("input",{"onUpdate:modelValue":s[9]||(s[9]=l=>Ye.value=l),class:yt(["form-control-compact",{"is-invalid":mt.value.customer}]),placeholder:"Customer Name"},null,2),[[Yn,Ye.value]]),ct(c("input",{"onUpdate:modelValue":s[10]||(s[10]=l=>nt.value=l),class:"form-control-compact",placeholder:"Phone Number"},null,512),[[Yn,nt.value]]),mt.value.phone_number?(I(),N("div",IA,D(mt.value.phone_number[0]),1)):Q("",!0),ct(c("input",{"onUpdate:modelValue":s[11]||(s[11]=l=>xt.value=l),class:"form-control-compact",placeholder:"Delivery Address"},null,512),[[Yn,xt.value]]),mt.value.delivery_location?(I(),N("div",OA,D(mt.value.delivery_location[0]),1)):Q("",!0)]))]),c("div",NA,[F.value.length===0?(I(),N("div",kA,[...s[54]||(s[54]=[c("i",{class:"bi bi-cart3"},null,-1),c("p",null,"Tap items to add",-1)])])):Q("",!0),(I(!0),N(Ve,null,ht(F.value,(l,_)=>(I(),N("div",{key:"item-"+_,class:"cart-item"},[c("div",DA,[c("img",{src:l.img,alt:"",class:"item-thumb"},null,8,LA),c("div",$A,[c("div",{class:"item-name",title:l.title},D(l.title),9,PA),c("div",RA,[l.resale_discount_per_item>0?(I(),N("span",MA," Save "+D(be(n)(l.resale_discount_per_item)),1)):Q("",!0),l.variant_name?(I(),N("span",FA,D(l.variant_name),1)):Q("",!0),bl(l)?(I(),N("span",qA,[...s[55]||(s[55]=[c("i",{class:"bi bi-tag-fill"},null,-1)])])):Q("",!0),l.addons&&l.addons.length>0?(I(),N("button",{key:3,class:"badge-addon",onClick:x=>Zo(l,_)},[s[56]||(s[56]=c("i",{class:"bi bi-plus-circle-fill"},null,-1)),ge(" "+D(l.addons.length),1)],8,BA)):Q("",!0)]),l.note?(I(),N("div",WA,D(l.note),1)):Q("",!0)])]),c("div",UA,[c("div",HA,[c("button",{class:"qty-btn",onClick:x=>ul(_)},"",8,VA),c("span",zA,D(l.qty),1),c("button",{class:"qty-btn",onClick:x=>ll(_)},"+",8,KA)]),c("div",GA,[c("span",YA,D(be(n)(l.price)),1),c("button",{class:"btn-delete",onClick:x=>cl(_)},[...s[57]||(s[57]=[c("i",{class:"bi bi-trash3"},null,-1)])],8,jA)])])]))),128))]),c("div",QA,[c("div",XA,[s[58]||(s[58]=c("span",null,"Subtotal",-1)),c("strong",null,D(be(n)($t.value)),1)]),Er.value>0?(I(),N("div",JA,[s[59]||(s[59]=c("span",null,"Add-ons",-1)),c("span",null,"+"+D(be(n)(Er.value)),1)])):Q("",!0),ni.value>0?(I(),N("div",ZA,[s[60]||(s[60]=c("span",null,"Tax",-1)),c("span",null,D(be(n)(ni.value)),1)])):Q("",!0),ln.value>0?(I(),N("div",eC,[s[61]||(s[61]=c("span",null,"Service",-1)),c("span",null,D(be(n)(ln.value)),1)])):Q("",!0),Fn.value>0?(I(),N("div",tC,[s[62]||(s[62]=c("span",null,"Delivery",-1)),c("span",null,D(be(n)(Fn.value)),1)])):Q("",!0),je.value>0?(I(),N("div",nC,[s[63]||(s[63]=c("span",null,"Sale Discount",-1)),c("strong",null,"-"+D(be(n)(je.value)),1)])):Q("",!0),Z.value&&Z.value.length>0?(I(),N("div",iC,[s[64]||(s[64]=c("span",{class:"text-success"},[c("i",{class:"bi bi-gift me-1"}),ge("Promo ")],-1)),c("strong",rC,"-"+D(be(n)(ti.value)),1)])):Q("",!0),Pt.value.length>0?(I(),N("div",sC,[s[65]||(s[65]=c("div",{class:"pending-header"},[c("i",{class:"bi bi-clock-history"}),c("small",null,"Pending Approval")],-1)),(I(!0),N(Ve,null,ht(Pt.value,l=>(I(),N("div",{key:l.id,class:"total-row text-warning"},[c("span",null,D(l.discountData?.name||"Discount")+" ("+D(l.percentage)+"%)",1),c("span",null,"-"+D(be(n)(ji(l.percentage))),1)]))),128))])):Q("",!0),it.value.length>0?(I(),N("div",oC,[s[66]||(s[66]=c("span",{class:"text-success"},[c("i",{class:"bi bi-check-circle me-1"}),ge("Discounts "),c("i",{class:"bi bi-info-circle ms-1","data-bs-toggle":"tooltip",title:"Auto-updates with cart"})],-1)),c("strong",aC,"-"+D(be(n)(Wn.value)),1)])):Q("",!0),c("div",lC,[s[67]||(s[67]=c("span",null,"TOTAL",-1)),c("strong",null,D(be(n)(Hn.value)),1)])]),c("div",uC,[c("details",cC,[s[68]||(s[68]=c("summary",null,[c("i",{class:"bi bi-chat-left-text me-2"}),ge("Front Note "),c("i",{class:"bi bi-chevron-down ms-auto"})],-1)),ct(c("textarea",{"onUpdate:modelValue":s[12]||(s[12]=l=>Bn.value=l),rows:"2",class:"form-control-compact",placeholder:"Add front note..."},null,512),[[Yn,Bn.value]])]),c("details",dC,[s[69]||(s[69]=c("summary",null,[c("i",{class:"bi bi-egg-fried me-2"}),ge("Kitchen Note "),c("i",{class:"bi bi-chevron-down ms-auto"})],-1)),ct(c("textarea",{"onUpdate:modelValue":s[13]||(s[13]=l=>Kt.value=l),rows:"2",class:"form-control-compact",placeholder:"Add kitchen note..."},null,512),[[Yn,Kt.value]])])])]),c("div",fC,[c("button",{class:"btn-action btn-clear",onClick:s[14]||(s[14]=l=>Ar())},[...s[70]||(s[70]=[c("i",{class:"bi bi-x-circle"},null,-1),c("span",null,"Clear",-1)])]),c("button",{class:"btn-action btn-hold",onClick:Zt},[...s[71]||(s[71]=[c("i",{class:"bi bi-pause-circle"},null,-1),c("span",null,"Hold",-1)])]),c("button",{class:"btn-action btn-later",onClick:cs},[...s[72]||(s[72]=[c("i",{class:"bi bi-clock"},null,-1),c("span",null,"Pay Later",-1)])]),c("button",{class:"btn-action btn-place",onClick:hl},[...s[73]||(s[73]=[c("i",{class:"bi bi-check-circle"},null,-1),c("span",null,"Place Order",-1)])])])])]))])]),c("div",pC,[c("div",hC,[c("div",_C,[c("div",vC,[c("div",null,[c("h5",mC,D(ce.value?.title||"Choose Item"),1),s[74]||(s[74]=c("p",{class:"text-muted small mb-0",style:{"font-size":"0.8rem"}},"Customize your order",-1))]),s[75]||(s[75]=c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])],-1))]),c("div",gC,[c("div",yC,[s[76]||(s[76]=c("div",{class:"stepper-progress-bg"},null,-1)),c("div",{class:"stepper-progress-fill",style:To({width:Et.value})},null,4),(I(!0),N(Ve,null,ht(dt.value,(l,_)=>(I(),N("div",{key:l.id,class:"stepper-step text-center"},[c("div",{class:yt(["stepper-circle stepper-circle-sm",xn(l.stepNumber)]),onClick:x=>En(l.stepNumber),style:{cursor:"pointer"}},[l.stepNumber<Te.value?(I(),N("i",wC)):(I(),N("span",EC,D(l.stepNumber),1))],10,bC),c("small",{class:yt(["stepper-label",{"stepper-label-active":l.stepNumber===Te.value}]),style:{"font-size":"0.7rem","margin-top":"4px",display:"block",cursor:"pointer"},onClick:x=>En(l.stepNumber)},D(l.name),11,xC)]))),128))])]),c("div",AC,[c("div",CC,[c("div",TC,[c("div",SC,[s[80]||(s[80]=c("div",{class:"d-flex align-items-center mb-2"},[c("i",{class:"bi bi-receipt me-2 text-primary",style:{"font-size":"1rem"}}),c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Price Breakdown")],-1)),c("div",IC,[s[77]||(s[77]=c("span",{class:"text-muted"},"Base Price",-1)),c("strong",null,D(be(n)(zt())),1)]),wi()>0?(I(),N("div",OC,[s[78]||(s[78]=c("span",{class:"text-muted"},"Add-ons",-1)),c("strong",NC,"+ "+D(be(n)(wi())),1)])):Q("",!0),s[81]||(s[81]=c("hr",{class:"my-2"},null,-1)),c("div",kC,[s[79]||(s[79]=c("span",{class:"fw-bold"},"Total",-1)),c("span",DC,D(be(n)(ia())),1)])])]),c("div",LC,[c("div",$C,[ct(c("div",PC,[s[83]||(s[83]=c("div",{class:"d-flex align-items-start mb-2"},[c("i",{class:"bi bi-grid-3x3-gap me-2 text-primary",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Choose Variant ")])],-1)),c("div",RC,[(I(!0),N(Ve,null,ht(ce.value?.variants,l=>(I(),N("div",{key:l.id,class:"col-12"},[c("div",{class:yt(["border rounded-3 p-2 shadow-sm variant-card",ei.value===l.id?"border-primary bg-light":""]),onClick:_=>Fs(l.id),style:{cursor:"pointer"}},[c("div",FC,[c("div",null,[c("h6",qC,D(l.name),1)]),c("div",BC,[ei.value===l.id?(I(),N("div",WC,[...s[82]||(s[82]=[c("i",{class:"bi bi-check-circle-fill",style:{"font-size":"1rem"}},null,-1)])])):Q("",!0),c("strong",UC,D(be(n)(l.price)),1)])])],10,MC)]))),128))])],512),[[pr,Te.value===1&&Vt.value]]),ct(c("div",HC,[s[84]||(s[84]=c("div",{class:"d-flex align-items-start mb-2"},[c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Remove Ingredients")])],-1)),c("div",VC,[(I(!0),N(Ve,null,ht(Ct(),l=>(I(),N("div",{key:l.id||l.inventory_item_id,class:"col-md-6"},[c("div",{class:yt(["d-flex align-items-center p-2 border rounded-2 shadow-sm",{"bg-light text-muted":an(l.id||l.inventory_item_id)}])},[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"16px",height:"16px"},id:"ingredient-"+(l.id||l.inventory_item_id),checked:!an(l.id||l.inventory_item_id),disabled:!an(l.id||l.inventory_item_id)&&Hi()===1,onChange:_=>wt(l.id||l.inventory_item_id)},null,40,zC),c("label",{for:"ingredient-"+(l.id||l.inventory_item_id),class:"form-check-label",style:{"font-size":"0.8rem"}},D(l.product_name||l.name),9,KC)],2)]))),128))])],512),[[pr,dt.value[Te.value-1]?.id==="ingredients"]]),ct(c("div",GC,[s[90]||(s[90]=c("div",{class:"d-flex align-items-start mb-3"},[c("i",{class:"bi bi-plus-circle me-2 text-success",style:{"font-size":"1.1rem"}}),c("div",{class:"flex-grow-1"},[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Add Add-ons"),c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}},"Enhance your meal")])],-1)),ce.value?.addon_groups?.length>1?(I(),N("div",YC,[c("div",jC,[c("small",QC," Group "+D(C.value+1)+" of "+D(ce.value?.addon_groups?.length),1),c("div",XC,[(I(!0),N(Ve,null,ht(ce.value?.addon_groups,(l,_)=>(I(),N("span",{key:_,class:yt(["rounded-circle",_===C.value?"bg-primary":"bg-secondary"]),style:{width:"8px",height:"8px",display:"inline-block",opacity:"0.6"}},null,2))),128))])])])):Q("",!0),L.value?(I(),N("div",JC,[c("div",ZC,[c("div",eT,[c("h6",tT,D(L.value.group_name),1),L.value.max_select>0?(I(),N("span",nT," Max "+D(L.value.max_select),1)):Q("",!0)]),L.value.description?(I(),N("p",iT,D(L.value.description),1)):Q("",!0)]),c("div",rT,[(I(!0),N(Ve,null,ht(L.value.addons,l=>(I(),N("div",{key:l.id,class:"col-12"},[c("div",{class:yt(["border rounded-2 p-2 shadow-sm d-flex align-items-center justify-content-between",{"bg-light border-success":Ae(L.value.group_id,l.id)}])},[c("div",sT,[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"18px",height:"18px",cursor:"pointer"},id:"addon-"+l.id,checked:Ae(L.value.group_id,l.id),onChange:_=>fo(L.value.group_id,l)},null,40,oT),c("label",{for:"addon-"+l.id,class:"form-check-label mb-0",style:{"font-size":"0.85rem",cursor:"pointer"}},[ge(D(l.name)+" ",1),c("span",lT," +"+D(be(n)(l.price)),1)],8,aT)]),Ae(L.value.group_id,l.id)?(I(),N("div",uT,[c("button",{class:"btn btn-primary rounded-circle p-0",style:{width:"35px",height:"10px"},onClick:_=>da(L.value.group_id,l.id),disabled:us(L.value.group_id,l.id)<=1},[...s[85]||(s[85]=[c("i",{class:"bi bi-dash",style:{"font-size":"0.9rem"}},null,-1)])],8,cT),c("span",dT,D(us(L.value.group_id,l.id)),1),c("button",{class:"btn btn-primary rounded-circle p-0",style:{width:"35px",height:"10px"},onClick:_=>Ir(L.value.group_id,l.id)},[...s[86]||(s[86]=[c("i",{class:"bi bi-plus",style:{"font-size":"0.9rem"}},null,-1)])],8,fT)])):Q("",!0)],2)]))),128))])])):Q("",!0),ce.value?.addon_groups?.length>1?(I(),N("div",pT,[c("button",{class:"btn btn-primary btn-sm px-3",onClick:J,disabled:C.value===0},[...s[87]||(s[87]=[c("i",{class:"bi bi-chevron-left me-1"},null,-1),ge(" Previous ",-1)])],8,hT),c("button",{class:"btn btn-primary btn-sm px-3",onClick:H,disabled:C.value>=ce.value?.addon_groups?.length-1},[...s[88]||(s[88]=[ge(" Next ",-1),c("i",{class:"bi bi-chevron-right ms-1"},null,-1)])],8,_T)])):Q("",!0),c("div",{class:"text-center mt-3"},[c("button",{class:"btn btn-link btn-sm text-muted",onClick:K},[...s[89]||(s[89]=[c("small",null,"Skip add-ons",-1)])])])],512),[[pr,dt.value[Te.value-1]?.id==="addons"]]),ct(c("div",vT,[s[97]||(s[97]=c("div",{class:"d-flex align-items-start mb-2"},[c("i",{class:"bi bi-cart-check me-2 text-success",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Review Your Order"),c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}},"Confirm selections")])],-1)),c("div",mT,[s[94]||(s[94]=c("h6",{class:"fw-bold mb-2 text-secondary"},"Order Summary",-1)),Vt.value?(I(),N("div",gT,[s[91]||(s[91]=c("span",{class:"summary-label"},"Variant:",-1)),c("span",yT,D(Qn()),1)])):Q("",!0),Ne.value.length>0?(I(),N("div",bT,[s[92]||(s[92]=c("span",{class:"summary-label"},"Removed:",-1)),c("span",wT,D(et()),1)])):Q("",!0),An()>0?(I(),N("div",ET,[s[93]||(s[93]=c("span",{class:"summary-label"},"Add-ons:",-1)),c("span",xT,D(Vi()),1)])):Q("",!0)]),c("div",AT,[s[95]||(s[95]=c("label",{class:"me-3 fw-semibold",style:{"font-size":"0.85rem"}},"Quantity:",-1)),c("div",CT,[c("button",{class:"qty-btn",onClick:pl,disabled:pt.value<=1},"",8,TT),c("div",ST,D(pt.value),1),c("button",{class:"qty-btn",onClick:fl},"+")])]),c("div",IT,[s[96]||(s[96]=c("label",{class:"fw-semibold mb-1",style:{"font-size":"0.85rem"}},[c("i",{class:"bi bi-chat-left-text me-1"}),ge(" Kitchen Note (Optional) ")],-1)),ct(c("textarea",{"onUpdate:modelValue":s[15]||(s[15]=l=>qn.value=l),class:"form-control form-control-sm rounded-2 shadow-sm",rows:"2",maxlength:"200",placeholder:"Special instructions...",style:{"font-size":"0.8rem"}},null,512),[[Yn,qn.value]]),c("div",OT,D(qn.value?.length||0)+"/200 ",1)])],512),[[pr,dt.value[Te.value-1]?.id==="review"]])])])])]),c("div",NT,[Te.value>1?(I(),N("button",{key:0,class:"btn btn-light btn-sm px-4 py-2 shadow-sm",onClick:Rn},[...s[98]||(s[98]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),ge("Back ",-1)])])):Q("",!0),Te.value<Pn.value?(I(),N("button",{key:1,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:Dt},[...s[99]||(s[99]=[ge(" Next ",-1),c("i",{class:"bi bi-arrow-right ms-1"},null,-1)])])):(I(),N("button",{key:2,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:dl},[...s[100]||(s[100]=[c("i",{class:"bi bi-cart-plus me-1"},null,-1),ge("Add to Cart ",-1)])]))])])])]),c("div",kT,[c("div",DT,[c("div",LT,[c("div",$T,[c("div",null,[c("h5",PT,D(ze.value?.title||"Customize Deal"),1),c("p",RT," Customizing "+D(Ke.value?.name||"item")+" ("+D(qe.value+1)+" of "+D(ze.value?.menu_items?.length||0)+") ",1)]),s[101]||(s[101]=c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])],-1))]),c("div",MT,[c("div",FT,[s[102]||(s[102]=c("div",{class:"stepper-progress-bg"},null,-1)),c("div",{class:"stepper-progress-fill",style:To({width:la.value})},null,4),(I(!0),N(Ve,null,ht(Jt.value,(l,_)=>(I(),N("div",{key:l.id,class:"stepper-step text-center"},[c("div",{class:yt(["stepper-circle stepper-circle-sm",Nl(l.stepNumber)]),onClick:x=>ua(l.stepNumber),style:{cursor:"pointer"}},[l.stepNumber<Qe.value?(I(),N("i",BT)):(I(),N("span",WT,D(l.stepNumber),1))],10,qT),c("small",{class:yt(["stepper-label",{"stepper-label-active":l.stepNumber===Qe.value}]),style:{"font-size":"0.7rem","margin-top":"4px",display:"block",cursor:"pointer"},onClick:x=>ua(l.stepNumber)},D(l.name),11,UT)]))),128))])]),c("div",HT,[c("div",VT,[c("div",zT,[c("div",KT,[c("h6",GT,[sn(be(Xd),{class:"me-2 text-primary w-4"}),s[103]||(s[103]=ge(" Currently Customizing ",-1))]),c("div",YT,[c("div",jT,[c("strong",null,D(Ke.value?.name),1),c("div",QT," Base Price: "+D(be(n)(Ke.value?.price||0)),1),z.value>0?(I(),N("div",XT," + "+D(be(n)(z.value))+" (Add-ons) ",1)):Q("",!0),c("div",JT," Total: "+D(be(n)(k.value)),1)])])]),c("div",ZT,[s[104]||(s[104]=c("h6",{class:"fw-bold mb-2",style:{"font-size":"0.9rem"}},[c("i",{class:"bi bi-list-check me-2 text-success"}),ge(" Items in Deal ")],-1)),c("div",eS,[(I(!0),N(Ve,null,ht(ze.value?.menu_items,(l,_)=>(I(),N("div",{key:_,class:"list-group-item px-0 py-2 border-0"},[c("div",tS,[ui.value.includes(_)?(I(),N("i",nS)):_===qe.value?(I(),jd(be(Xd),{key:1,class:"text-primary me-2 w-4"})):(I(),N("i",iS)),c("small",{class:yt({"fw-bold":_===qe.value})},D(l.name),3)])]))),128))])])]),c("div",rS,[c("div",sS,[ct(c("div",oS,[c("div",aS,[s[106]||(s[106]=c("i",{class:"bi bi-dash-circle me-2 text-warning",style:{"font-size":"1.1rem"}},null,-1)),c("div",null,[c("h6",lS," Remove Ingredients from "+D(Ke.value?.name),1),s[105]||(s[105]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Uncheck ingredients you don't want ",-1))])]),c("div",uS,[(I(!0),N(Ve,null,ht(Ti(),l=>(I(),N("div",{key:l.id,class:"col-md-6"},[c("div",{class:yt(["d-flex align-items-center p-2 border rounded-2 shadow-sm",{"bg-light text-muted":uo(l.id)}])},[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"16px",height:"16px"},id:"deal-ingredient-"+l.id,checked:!uo(l.id),disabled:!uo(l.id)&&Ol()===1,onChange:_=>Il(l.id)},null,40,cS),c("label",{for:"deal-ingredient-"+l.id,class:"form-check-label",style:{"font-size":"0.8rem"}},D(l.product_name||l.name),9,dS)],2)]))),128))])],512),[[pr,Jt.value[Qe.value-1]?.id==="ingredients"]]),ct(c("div",fS,[c("div",pS,[s[108]||(s[108]=c("i",{class:"bi bi-plus-circle me-2 text-success",style:{"font-size":"1.1rem"}},null,-1)),c("div",hS,[c("h6",_S," Add Add-ons to "+D(Ke.value?.name),1),s[107]||(s[107]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Enhance this item (charges may apply) ",-1))])]),Ke.value?.addon_groups?.length>1?(I(),N("div",vS,[c("div",mS,[c("small",gS," Group "+D(te.value+1)+" of "+D(Ke.value?.addon_groups?.length),1),c("div",yS,[(I(!0),N(Ve,null,ht(Ke.value?.addon_groups,(l,_)=>(I(),N("span",{key:_,class:yt(["rounded-circle",_===te.value?"bg-primary":"bg-secondary"]),style:{width:"8px",height:"8px",display:"inline-block",opacity:"0.6"}},null,2))),128))])])])):Q("",!0),G.value?(I(),N("div",bS,[c("div",wS,[c("div",ES,[c("h6",xS,D(G.value.group_name),1),G.value.max_select>0?(I(),N("span",AS," Max "+D(G.value.max_select),1)):Q("",!0)]),G.value.description?(I(),N("p",CS,D(G.value.description),1)):Q("",!0)]),c("div",TS,[(I(!0),N(Ve,null,ht(G.value.addons,l=>(I(),N("div",{key:l.id,class:"col-12"},[c("div",{class:yt(["border rounded-2 p-2 shadow-sm d-flex align-items-center justify-content-between",{"bg-light border-success":Ae(G.value.group_id,l.id)}])},[c("div",SS,[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"18px",height:"18px",cursor:"pointer"},id:"deal-addon-"+l.id,checked:Ae(G.value.group_id,l.id),onChange:_=>fo(G.value.group_id,l)},null,40,IS),c("label",{for:"deal-addon-"+l.id,class:"form-check-label mb-0",style:{"font-size":"0.85rem",cursor:"pointer"}},[ge(D(l.name)+" ",1),c("span",NS," +"+D(be(n)(l.price)),1)],8,OS)]),Ae(G.value.group_id,l.id)?(I(),N("div",kS,[c("button",{class:"btn btn-primary rounded-circle p-0",style:{width:"35px",height:"10px"},onClick:_=>da(G.value.group_id,l.id),disabled:us(G.value.group_id,l.id)<=1},[...s[109]||(s[109]=[c("i",{class:"bi bi-dash",style:{"font-size":"0.9rem"}},null,-1)])],8,DS),c("span",LS,D(us(G.value.group_id,l.id)),1),c("button",{class:"btn btn-primary rounded-circle p-0",style:{width:"35px",height:"10px"},onClick:_=>Ir(G.value.group_id,l.id)},[...s[110]||(s[110]=[c("i",{class:"bi bi-plus",style:{"font-size":"0.9rem"}},null,-1)])],8,$S)])):Q("",!0)],2)]))),128))])])):Q("",!0),Ke.value?.addon_groups?.length>1?(I(),N("div",PS,[c("button",{class:"btn btn-primary btn-sm px-3",onClick:oe,disabled:te.value===0},[...s[111]||(s[111]=[c("i",{class:"bi bi-chevron-left me-1"},null,-1),ge(" Previous ",-1)])],8,RS),c("button",{class:"btn btn-primary btn-sm px-3",onClick:ie,disabled:te.value>=Ke.value?.addon_groups?.length-1},[...s[112]||(s[112]=[ge(" Next ",-1),c("i",{class:"bi bi-chevron-right ms-1"},null,-1)])],8,MS)])):Q("",!0),c("div",{class:"text-center mt-3"},[c("button",{class:"btn btn-link btn-sm text-muted",onClick:$e},[...s[113]||(s[113]=[c("small",null,"Skip add-ons",-1)])])])],512),[[pr,Jt.value[Qe.value-1]?.id==="addons"]]),ct(c("div",FS,[c("div",qS,[sn(be(Vy),{class:"me-2 text-primary w-5",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",BS," Review "+D(Ke.value?.name),1),s[114]||(s[114]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Confirm your customizations ",-1))])]),c("div",WS,[s[121]||(s[121]=c("h6",{class:"fw-bold mb-2 text-secondary"},"Customization Summary",-1)),c("div",US,[s[115]||(s[115]=c("span",{class:"summary-label"},"Item:",-1)),c("span",HS,D(Ke.value?.name),1)]),c("div",VS,[s[116]||(s[116]=c("span",{class:"summary-label"},"Base Price:",-1)),c("span",zS,D(be(n)(Ke.value?.price||0)),1)]),co()?(I(),N("div",KS,[s[117]||(s[117]=c("span",{class:"summary-label"},"Removed:",-1)),c("span",GS,D(co()),1)])):Q("",!0),ir()>0?(I(),N("div",YS,[s[118]||(s[118]=c("span",{class:"summary-label"},"Add-ons:",-1)),c("span",jS,D(pn()),1)])):Q("",!0),z.value>0?(I(),N("div",QS,[s[119]||(s[119]=c("span",{class:"summary-label"},"Add-ons Cost:",-1)),c("span",XS," + "+D(be(n)(z.value)),1)])):Q("",!0),c("div",JS,[s[120]||(s[120]=c("span",{class:"summary-label fw-bold"},"Item Total:",-1)),c("span",ZS,D(be(n)(k.value)),1)])]),c("div",eI,[c("label",tI,[s[122]||(s[122]=c("i",{class:"bi bi-chat-left-text me-1"},null,-1)),ge(" Kitchen Note for "+D(Ke.value?.name)+" (Optional) ",1)]),ct(c("textarea",{"onUpdate:modelValue":s[16]||(s[16]=l=>tr.value[qe.value]=l),class:"form-control form-control-sm rounded-2 shadow-sm",rows:"2",maxlength:"200",placeholder:"Special instructions for this item...",style:{"font-size":"0.8rem"}},"                                    ",512),[[Yn,tr.value[qe.value]]]),c("div",nI,D((tr.value[qe.value]||"").length)+"/200 ",1)])],512),[[pr,Jt.value[Qe.value-1]?.id==="review"]])])])])]),c("div",iI,[c("div",rI,[Qe.value>1?(I(),N("button",{key:0,class:"btn btn-secondary btn-sm px-4 py-2 shadow-sm",onClick:Dl},[...s[123]||(s[123]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),ge("Back ",-1)])])):Q("",!0),Qe.value<os.value?(I(),N("button",{key:1,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:kl},[...s[124]||(s[124]=[ge(" Next ",-1),c("i",{class:"bi bi-arrow-right ms-1"},null,-1)])])):ci.value?(I(),N("button",{key:3,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:y},[...s[126]||(s[126]=[c("i",{class:"bi bi-cart-plus me-1"},null,-1),ge("Add Deal to Cart ",-1)])])):(I(),N("button",{key:2,class:"btn btn-success btn-sm px-4 py-2 shadow-sm",onClick:rr},[...s[125]||(s[125]=[c("i",{class:"bi bi-check2 me-1"},null,-1),ge("Next Item ",-1)])]))])])])])]),c("div",sI,[c("div",oI,[c("div",aI,[s[137]||(s[137]=c("div",{class:"modal-header border-0 pb-2"},[c("h5",{class:"modal-title fw-bold"},[c("i",{class:"bi bi-puzzle-fill text-primary me-2"}),ge(" Manage Add-ons ")]),c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])])],-1)),rt.value?(I(),N("div",lI,[c("div",uI,[c("div",cI,[c("img",{src:rt.value.img,alt:"",class:"rounded",style:{width:"60px",height:"60px","object-fit":"cover"}},null,8,dI),c("div",fI,[c("div",pI,D(rt.value.title),1),c("div",hI,[c("small",_I,[s[127]||(s[127]=c("i",{class:"bi bi-tag me-1"},null,-1)),s[128]||(s[128]=ge(" Base Price: ",-1)),c("span",vI,D(be(n)(rt.value?.unit_price-ea(F.value[Vn.value]||{addons:[]}))),1)]),c("small",mI,[s[129]||(s[129]=c("i",{class:"bi bi-box me-1"},null,-1)),s[130]||(s[130]=ge(" Quantity: ",-1)),c("span",gI,D(rt.value.qty),1)])])])])]),rt.value.addons&&rt.value.addons.length>0?(I(),N("div",yI,[c("table",bI,[s[133]||(s[133]=c("thead",{class:"table-light"},[c("tr",null,[c("th",{style:{width:"60px"},class:"text-center"},"Select"),c("th",null,"Items"),c("th",{style:{width:"120px"},class:"text-center"},"Price"),c("th",{style:{width:"200px"},class:"text-center"},"Quantity")])],-1)),c("tbody",null,[(I(!0),N(Ve,null,ht(rt.value.addons,l=>(I(),N("tr",{key:l.id,class:yt({"table-active":l.selected!==!1})},[c("td",wI,[c("div",EI,[c("input",{type:"checkbox",class:"form-check-input",checked:l.selected!==!1,onChange:_=>Rt(l),style:{width:"22px",height:"22px",cursor:"pointer"}},null,40,xI)])]),c("td",null,[c("div",AI,[c("div",{class:yt(["addon-status-indicator",l.selected!==!1?"bg-success":"bg-secondary"])},null,2),c("div",null,[c("div",CI,D(l.name),1),l.group_name?(I(),N("small",TI,D(l.group_name),1)):Q("",!0)])])]),c("td",SI,[c("span",II," +"+D(be(n)(l.price)),1)]),c("td",null,[c("div",OI,[c("button",{class:"btn btn-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px"},onClick:_=>Xt(l),disabled:!l.selected||(l.quantity||1)<=1},[...s[131]||(s[131]=[c("i",{class:"bi bi-dash-lg"},null,-1)])],8,NI),c("span",kI,D(l.quantity||1),1),c("button",{class:"btn btn-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px"},onClick:_=>xl(l),disabled:!l.selected},[...s[132]||(s[132]=[c("i",{class:"bi bi-plus-lg"},null,-1)])],8,DI)])])],2))),128))])])])):(I(),N("div",LI,[...s[134]||(s[134]=[c("i",{class:"bi bi-inbox",style:{"font-size":"3rem",opacity:"0.3"}},null,-1),c("p",{class:"mb-0 mt-3 fw-semibold"},"No add-ons available for this item",-1)])])),c("div",$I,[An()>0?(I(),N("div",PI,[c("small",RI,[s[135]||(s[135]=c("i",{class:"bi bi-check-circle-fill me-1"},null,-1)),ge(" "+D(An())+" add-on(s) selected  Add-ons Total: "+D(be(n)(ea(rt.value))),1)])])):Q("",!0)])])):Q("",!0),c("div",{class:"modal-footer border-0 pt-0 bg-light"},[s[136]||(s[136]=c("button",{type:"button",class:"btn btn-secondary px-2 py-2","data-bs-dismiss":"modal"}," Cancel ",-1)),c("button",{type:"button",class:"btn btn-primary px-2 py-2",onClick:ta}," Save ")])])])]),sn(My,{show:jo.value,kot:Qr.value,loading:Qo.value,onClose:s[17]||(s[17]=l=>jo.value=!1),onStatusUpdated:vl},null,8,["show","kot","loading"]),sn(Py,{show:zi.value,order:Qs.value,money:Ys,onClose:s[18]||(s[18]=l=>zi.value=!1)},null,8,["show","order"]),sn(Qd,{show:un.value,customer:Ye.value,"delivery-location":xt.value,phone:nt.value,"order-type":_e.value,"selected-table":_t.value,"order-items":F.value,"grand-total":Hn.value,money:Ys,cashReceived:Ki.value,"onUpdate:cashReceived":s[19]||(s[19]=l=>Ki.value=l),client_secret:u.client_secret,order_code:u.order_code,"sub-total":$t.value,tax:ni.value,"service-charges":ln.value,"delivery-charges":Fn.value,"promo-discount":ti.value,"promo-id":Z.value?.id,"promo-name":Z.value?.name,"promo-type":Z.value?.type,"promo-discount-amount":ti.value,note:Bn.value,"kitchen-note":Kt.value,"order-date":new Date().toISOString().split("T")[0],"order-time":new Date().toTimeString().split(" ")[0],"payment-method":Wo.value,change:Uo.value,"current-order-id":cn.value,onClose:s[20]||(s[20]=l=>un.value=!1),onConfirm:eo,onPayItem:ds,onPaymentSuccess:Go,appliedPromos:Xo.value,"approved-discounts":Wn.value,"approved-discount-details":it.value.map(l=>({discount_id:l.id,discount_name:l.name,discount_percentage:l.percentage,discount_amount:ji(l.percentage),approval_id:l.approval_id}))},null,8,["show","customer","delivery-location","phone","order-type","selected-table","order-items","grand-total","cashReceived","client_secret","order_code","sub-total","tax","service-charges","delivery-charges","promo-discount","promo-id","promo-name","promo-type","promo-discount-amount","note","kitchen-note","order-date","order-time","payment-method","change","current-order-id","appliedPromos","approved-discounts","approved-discount-details"]),sn(qy,{show:Xr.value,orders:no.value,onClose:s[21]||(s[21]=l=>Xr.value=!1),onViewDetails:wl,loading:io.value},null,8,["show","orders","loading"]),sn(Ry,{show:Xi.value,loading:ro.value,promos:Zr.value,"order-items":F.value,onApplyPromo:We,onClose:s[22]||(s[22]=l=>Xi.value=!1)},null,8,["show","loading","promos","order-items"]),sn(Wy,{show:Jr.value,discounts:es.value,"order-items":F.value,loading:so.value,"applied-discounts":it.value,"rejected-discounts":Yi.value,onClose:s[23]||(s[23]=l=>Jr.value=!1),onApplyDiscount:Vo,onClearDiscount:_l},null,8,["show","discounts","order-items","loading","applied-discounts","rejected-discounts"]),sn(cx,{show:Un.value,"missing-ingredients":Gt.value,onClose:s[24]||(s[24]=l=>{Un.value=!1,Js.value=null}),onConfirm:Yo},null,8,["show","missing-ingredients"]),sn(Uy,{show:Ge.value,"pending-orders":hn.value,loading:as.value,onClose:s[25]||(s[25]=l=>Ge.value=!1),onResume:ls,onReject:Sr},null,8,["show","pending-orders","loading"]),sn(Hy,{show:Pe.value,"pending-orders":hn.value,loading:as.value,onClose:s[26]||(s[26]=l=>Pe.value=!1),onPayNow:di,onReject:Sr},null,8,["show","pending-orders","loading"]),Re.value?(I(),jd(Qd,{key:0,show:Si.value,customer:Re.value.customer_name,"delivery-location":Re.value.delivery_location,phone:Re.value.phone_number,"order-type":Re.value.order_type,"selected-table":{name:Re.value.table_number},"order-items":Re.value.order_items,"grand-total":Re.value.total_amount,"sub-total":Re.value.sub_total,tax:Re.value.tax,"service-charges":Re.value.service_charges,"delivery-charges":Re.value.delivery_charges,"promo-discount":Re.value.promo_discount,note:Re.value.note,"kitchen-note":Re.value.kitchen_note,cashReceived:Ki.value,"onUpdate:cashReceived":s[27]||(s[27]=l=>Ki.value=l),money:Ys,onClose:s[28]||(s[28]=l=>{Si.value=!1,Re.value=null}),onConfirm:eo,onPaymentSuccess:Go,"is-payment-only":!0,"current-order-id":Re.value.pos_order_id},null,8,["show","customer","delivery-location","phone","order-type","selected-table","order-items","grand-total","sub-total","tax","service-charges","delivery-charges","promo-discount","note","kitchen-note","cashReceived","current-order-id"])):Q("",!0)])]),_:1})],64))}},dO=Iy(MI,[["__scopeId","data-v-125ec159"]]);export{dO as default};
