import{r as Z,R as Nb,b6 as Mo,_ as Db,o as vs,n as Dl,c as bt,y as Ai,A as Lb,z as kb,q as ce,f as R,b as P,d as En,u as Ae,h as $b,w as gs,e as _,m as pe,i as Jn,k as on,v as er,F as Ke,g as yt,t as W,l as Mt,K as Ll,x as Fo,T as kl}from"./app-CbaALDFq.js";import{_ as Rb}from"./Master-DgOeezfe.js";import Pb from"./ConfirmOrderModal-Ctmy-5Kq.js";import Mb from"./ReceiptModal-uyTBGfa7.js";import Fb from"./PromoModal-CEBd8gRl.js";import Bb from"./KotModal-3K9a_etL.js";import{u as Ub}from"./useFormatters-CIpT4SD6.js";import Wb from"./PosOrdersModal-CPSyhAcz.js";import{F as qb}from"./FilterModal-BL4Z7k-q.js";import{s as md}from"./index-D1h5S729.js";import Vb from"./DiscountModal-z6JK3i6y.js";import"./index-Cmd-R4V0.js";import"./createLucideIcon-DEQDBvBF.js";import"./index-CCKTLXrc.js";import"./index-B2pb8CAK.js";import"./sun-CXQc7xiF.js";import"./StripePayment-B75P460X.js";import"./SplitPayment-DU09meiB.js";import"./Receipt-C24T-wAI.js";import"./clock-Bka8EtBk.js";import"./circle-check-big-RKo7-CmR.js";import"./circle-x-BAhpQ_Zu.js";import"./printer-DsaDR4yM.js";import"./index-DgfMEiQA.js";import"./index-CrFzrr1y.js";import"./index-cE9UEHOp.js";const he=Nb({device:null,connected:!1,printerName:null,webUSBSupported:!1,lastError:null}),Te={INIT:[27,64],CUT:[29,86,0],PARTIAL_CUT:[29,86,1],FEED:[27,100],ALIGN_LEFT:[27,97,0],ALIGN_CENTER:[27,97,1],ALIGN_RIGHT:[27,97,2],BOLD_ON:[27,69,1],BOLD_OFF:[27,69,0],DOUBLE_ON:[29,33,17],DOUBLE_OFF:[29,33,0]},bd=[1155,1046,1049,1208,1317,1659,5380,6790,3540,4070,8401,5455];function Hb(){const n=Z(!1),i=()=>(he.webUSBSupported="usb"in navigator,he.webUSBSupported),d=async()=>{if(!he.webUSBSupported)return[];try{return(await navigator.usb.getDevices()).filter(U=>bd.includes(U.vendorId)||U.productName?.toLowerCase().includes("printer")||U.productName?.toLowerCase().includes("pos")||U.productName?.toLowerCase().includes("thermal"))}catch(N){return console.error("Error getting USB devices:",N),[]}},p=async()=>{if(!he.webUSBSupported)return he.lastError="WebUSB not supported. Use Chrome or Edge.",!1;try{n.value=!0,he.lastError=null;const N=bd.map(ie=>({vendorId:ie}));he.device=await navigator.usb.requestDevice({filters:N}),await he.device.open(),he.device.configuration===null&&await he.device.selectConfiguration(1);const U=he.device.configuration.interfaces[0].interfaceNumber;return await he.device.claimInterface(U),he.connected=!0,he.printerName=he.device.productName||"USB Printer",localStorage.setItem("usb_printer_connected","true"),!0}catch(N){return he.lastError=N.message,he.connected=!1,!1}finally{n.value=!1}},w=async()=>{if(he.device&&he.connected){try{await he.device.close()}catch{}he.device=null,he.connected=!1,he.printerName=null,localStorage.removeItem("usb_printer_connected")}},b=async N=>{if(!he.connected||!he.device)throw new Error("Printer not connected");const U=he.device.configuration.interfaces[0].alternate.endpoints.find(F=>F.direction==="out");if(!U)throw new Error("No output endpoint found");const ie=N instanceof Uint8Array?N:new Uint8Array(N);await he.device.transferOut(U.endpointNumber,ie)},x=N=>new TextEncoder().encode(N+`
`),S=async N=>{await b(x(N))},B=async(N,U)=>{const ie=48-N.length-U.length,F=N+" ".repeat(Math.max(1,ie))+U;await S(F)},D=(N,U="£")=>U+parseFloat(N).toFixed(2),z=async(N="-")=>{await S(N.repeat(48))},te=async(N,U)=>{if((JSON.parse(localStorage.getItem("pos_printer_config")||"{}").customer_printer||"browser")==="browser"||!he.connected)return ge(N,U);try{n.value=!0,await b(new Uint8Array(Te.INIT)),await b(new Uint8Array(Te.ALIGN_CENTER)),await b(new Uint8Array(Te.BOLD_ON)),await b(new Uint8Array(Te.DOUBLE_ON)),await S((U.name||"Business").toUpperCase()),await b(new Uint8Array(Te.DOUBLE_OFF)),await b(new Uint8Array(Te.BOLD_OFF)),U.phone&&await S(U.phone),U.address&&await S(U.address),await z("="),await b(new Uint8Array(Te.BOLD_ON)),await S("CUSTOMER RECEIPT"),await b(new Uint8Array(Te.BOLD_OFF)),await z("="),await b(new Uint8Array(Te.ALIGN_LEFT)),await B("Date:",N.order_date||new Date().toLocaleDateString()),await B("Time:",N.order_time||new Date().toLocaleTimeString()),await B("Customer:",N.customer_name||"Walk In"),await B("Order Type:",N.order_type||"Collection"),N.note&&await B("Note:",N.note),await z("-"),await b(new Uint8Array(Te.BOLD_ON)),await S("Item                     Qty    Price    Total"),await b(new Uint8Array(Te.BOLD_OFF)),await z("-");const k=U.currency||"£";for(const H of N.items||[]){const ue=(H.title||"Item").substring(0,24).padEnd(24),xe=(H.quantity||H.qty||1).toString().padStart(4),Ne=D(H.unit_price||H.price||0,k).padStart(8),Me=D((H.unit_price||H.price||0)*(H.quantity||H.qty||1),k).padStart(8);await S(ue+xe+Ne+Me)}if(await z("-"),await B("Subtotal:",D(N.sub_total||0,k)),await b(new Uint8Array(Te.BOLD_ON)),await B("Total:",D(N.total_amount||N.sub_total||0,k)),await b(new Uint8Array(Te.BOLD_OFF)),N.payment_type&&(await b(new Uint8Array([...Te.FEED,1])),await B("Payment:",N.payment_type.toUpperCase()),N.payment_type==="cash"&&N.cash_received>0)){await B("Cash Received:",D(N.cash_received,k));const H=N.cash_received-(N.total_amount||N.sub_total||0);H>0&&await B("Change:",D(H,k))}return await b(new Uint8Array([...Te.FEED,2])),await b(new Uint8Array(Te.ALIGN_CENTER)),await S((U.footer||"Thank you!").toUpperCase()),await b(new Uint8Array([...Te.FEED,3])),await b(new Uint8Array(Te.CUT)),{success:!0,method:"usb"}}catch(k){return console.error("USB print error:",k),ge(N,U)}finally{n.value=!1}},ne=async(N,U)=>{if((JSON.parse(localStorage.getItem("pos_printer_config")||"{}").kot_printer||"browser")==="browser"||!he.connected)return J(N,U);try{n.value=!0,await b(new Uint8Array(Te.INIT)),await b(new Uint8Array(Te.ALIGN_CENTER)),await b(new Uint8Array(Te.BOLD_ON)),await b(new Uint8Array(Te.DOUBLE_ON)),await S((U.name||"KITCHEN").toUpperCase()),await b(new Uint8Array(Te.DOUBLE_OFF)),await b(new Uint8Array(Te.BOLD_OFF)),await z("="),await b(new Uint8Array(Te.BOLD_ON)),await S("KITCHEN ORDER TICKET"),await b(new Uint8Array(Te.BOLD_OFF)),await z("="),await b(new Uint8Array(Te.ALIGN_LEFT)),await B("Date:",N.order_date||new Date().toLocaleDateString()),await B("Time:",N.order_time||new Date().toLocaleTimeString()),await B("Customer:",N.customer_name||"Walk In"),await B("Order Type:",N.order_type||"Dine In"),N.kitchen_note&&await B("Note:",N.kitchen_note),await z("-"),await b(new Uint8Array(Te.BOLD_ON)),await B("Item","Qty"),await b(new Uint8Array(Te.BOLD_OFF)),await z("-");for(const k of N.items||[]){const H=(k.title||"Item").substring(0,40),ue=(k.quantity||k.qty||1).toString();await B(H,ue),k.item_kitchen_note&&await S("  Note: "+k.item_kitchen_note)}return await z("-"),await b(new Uint8Array([...Te.FEED,2])),await b(new Uint8Array(Te.ALIGN_CENTER)),await S((U.footer||"KITCHEN COPY").toUpperCase()),await b(new Uint8Array([...Te.FEED,3])),await b(new Uint8Array(Te.CUT)),{success:!0,method:"usb"}}catch(k){return console.error("USB KOT print error:",k),J(N,U)}finally{n.value=!1}},ge=(N,U)=>{const ie=U.currency||"£";let F="";for(const ue of N.items||[]){const xe=ue.quantity||ue.qty||1,Ne=ue.unit_price||ue.price||0,Me=Ne*xe;F+="<tr>",F+="<td>"+(ue.title||"Item")+"</td>",F+='<td style="text-align:center">'+xe+"</td>",F+='<td style="text-align:right">'+D(Ne,ie)+"</td>",F+='<td style="text-align:right">'+D(Me,ie)+"</td>",F+="</tr>"}let k='<!DOCTYPE html><html><head><meta charset="UTF-8">';k+="<title>Receipt</title>",k+="<style>",k+="@page { size: 80mm auto; margin: 0; }",k+='body { font-family: "Courier New", monospace; font-size: 12px; width: 80mm; margin: 0 auto; padding: 5mm; }',k+=".header { text-align: center; margin-bottom: 10px; }",k+=".business-name { font-size: 16px; font-weight: bold; }",k+=".divider { border-top: 1px dashed #000; margin: 8px 0; }",k+=".info-row { display: flex; justify-content: space-between; }",k+="table { width: 100%; border-collapse: collapse; }",k+="th, td { padding: 3px 0; }",k+=".footer { text-align: center; margin-top: 15px; font-weight: bold; }",k+="</style></head><body>",k+='<div class="header">',U.logo_url&&(k+='<img src="'+U.logo_url+'" style="max-width:100px;max-height:60px;margin-bottom:5px">'),k+='<div class="business-name">'+(U.name||"Business").toUpperCase()+"</div>",k+="<div>"+(U.phone||"")+"</div>",k+="<div>"+(U.address||"")+"</div>",k+="</div>",k+='<div class="divider"></div>',k+='<div style="text-align:center;font-weight:bold">CUSTOMER RECEIPT</div>',k+='<div class="divider"></div>',k+='<div class="info-row"><span>Date:</span><span>'+(N.order_date||new Date().toLocaleDateString())+"</span></div>",k+='<div class="info-row"><span>Time:</span><span>'+(N.order_time||new Date().toLocaleTimeString())+"</span></div>",k+='<div class="info-row"><span>Customer:</span><span>'+(N.customer_name||"Walk In")+"</span></div>",k+='<div class="info-row"><span>Order Type:</span><span>'+(N.order_type||"Collection")+"</span></div>",k+='<div class="divider"></div>',k+="<table><thead><tr><th>Item</th><th>Qty</th><th>Price</th><th>Total</th></tr></thead>",k+="<tbody>"+F+"</tbody></table>",k+='<div class="divider"></div>',k+='<div class="info-row"><span>Subtotal:</span><span>'+D(N.sub_total||0,ie)+"</span></div>",k+='<div class="info-row" style="font-weight:bold"><span>Total:</span><span>'+D(N.total_amount||N.sub_total||0,ie)+"</span></div>",k+='<div class="divider"></div>',k+='<div class="footer">'+(U.footer||"Thank you!").toUpperCase()+"</div>",k+="</body></html>";const H=window.open("","_blank","width=400,height=600");return H.document.write(k),H.document.close(),setTimeout(function(){H.focus(),H.print()},500),{success:!0,method:"browser"}},J=(N,U)=>{let ie="";for(const H of N.items||[]){const ue=H.quantity||H.qty||1;ie+="<tr>",ie+="<td>"+(H.title||"Item")+"</td>",ie+='<td style="text-align:right">'+ue+"</td>",ie+="</tr>",H.item_kitchen_note&&(ie+='<tr><td colspan="2" style="padding-left:15px;font-style:italic">Note: '+H.item_kitchen_note+"</td></tr>")}let F='<!DOCTYPE html><html><head><meta charset="UTF-8">';F+="<title>Kitchen Order</title>",F+="<style>",F+="@page { size: 80mm auto; margin: 0; }",F+='body { font-family: "Courier New", monospace; font-size: 12px; width: 80mm; margin: 0 auto; padding: 5mm; }',F+=".header { text-align: center; margin-bottom: 10px; }",F+=".business-name { font-size: 16px; font-weight: bold; }",F+=".divider { border-top: 1px dashed #000; margin: 8px 0; }",F+=".info-row { display: flex; justify-content: space-between; }",F+="table { width: 100%; border-collapse: collapse; }",F+="th, td { padding: 3px 0; }",F+=".footer { text-align: center; margin-top: 15px; font-weight: bold; }",F+="</style></head><body>",F+='<div class="header">',F+='<div class="business-name">'+(U.name||"KITCHEN").toUpperCase()+"</div>",F+="</div>",F+='<div class="divider"></div>',F+='<div style="text-align:center;font-weight:bold;font-size:14px">KITCHEN ORDER TICKET</div>',F+='<div class="divider"></div>',F+='<div class="info-row"><span>Date:</span><span>'+(N.order_date||new Date().toLocaleDateString())+"</span></div>",F+='<div class="info-row"><span>Time:</span><span>'+(N.order_time||new Date().toLocaleTimeString())+"</span></div>",F+='<div class="info-row"><span>Customer:</span><span>'+(N.customer_name||"Walk In")+"</span></div>",F+='<div class="info-row"><span>Order Type:</span><span>'+(N.order_type||"Dine In")+"</span></div>",N.kitchen_note&&(F+='<div class="info-row"><span>Note:</span><span>'+N.kitchen_note+"</span></div>"),F+='<div class="divider"></div>',F+='<table><thead><tr><th>Item</th><th style="text-align:right">Qty</th></tr></thead>',F+="<tbody>"+ie+"</tbody></table>",F+='<div class="divider"></div>',F+='<div class="footer">KITCHEN COPY</div>',F+="</body></html>";const k=window.open("","_blank","width=400,height=600");return k.document.write(F),k.document.close(),setTimeout(function(){k.focus(),k.print()},500),{success:!0,method:"browser"}};return{isConnected:()=>he.connected,printerName:()=>he.printerName,isWebUSBSupported:()=>he.webUSBSupported,lastError:()=>he.lastError,loading:n,checkSupport:i,connectPrinter:p,disconnectPrinter:w,autoReconnect:async()=>{if(i(),he.webUSBSupported&&localStorage.getItem("usb_printer_connected")){const N=await d();if(N.length>0)try{he.device=N[0],await he.device.open(),he.device.configuration===null&&await he.device.selectConfiguration(1);const U=he.device.configuration.interfaces[0].interfaceNumber;await he.device.claimInterface(U),he.connected=!0,he.printerName=he.device.productName||"USB Printer"}catch(U){console.log("Auto-reconnect failed:",U.message)}}},getPairedDevices:d,printReceipt:te,printKOT:ne,browserPrintReceipt:ge,browserPrintKOT:J}}var xt="top",Yt="bottom",Gt="right",Ct="left",Jo="auto",Mi=[xt,Yt,Gt,Ct],zr="start",Ni="end",sf="clippingParents",ru="viewport",Ci="popper",of="reference",Xl=Mi.reduce(function(o,n){return o.concat([n+"-"+zr,n+"-"+Ni])},[]),iu=[].concat(Mi,[Jo]).reduce(function(o,n){return o.concat([n,n+"-"+zr,n+"-"+Ni])},[]),af="beforeRead",lf="read",uf="afterRead",cf="beforeMain",df="main",ff="afterMain",hf="beforeWrite",pf="write",_f="afterWrite",vf=[af,lf,uf,cf,df,ff,hf,pf,_f];function Mn(o){return o?(o.nodeName||"").toLowerCase():null}function zt(o){if(o==null)return window;if(o.toString()!=="[object Window]"){var n=o.ownerDocument;return n&&n.defaultView||window}return o}function Qr(o){var n=zt(o).Element;return o instanceof n||o instanceof Element}function an(o){var n=zt(o).HTMLElement;return o instanceof n||o instanceof HTMLElement}function su(o){if(typeof ShadowRoot>"u")return!1;var n=zt(o).ShadowRoot;return o instanceof n||o instanceof ShadowRoot}function Kb(o){var n=o.state;Object.keys(n.elements).forEach(function(i){var d=n.styles[i]||{},p=n.attributes[i]||{},w=n.elements[i];!an(w)||!Mn(w)||(Object.assign(w.style,d),Object.keys(p).forEach(function(b){var x=p[b];x===!1?w.removeAttribute(b):w.setAttribute(b,x===!0?"":x)}))})}function Yb(o){var n=o.state,i={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,i.popper),n.styles=i,n.elements.arrow&&Object.assign(n.elements.arrow.style,i.arrow),function(){Object.keys(n.elements).forEach(function(d){var p=n.elements[d],w=n.attributes[d]||{},b=Object.keys(n.styles.hasOwnProperty(d)?n.styles[d]:i[d]),x=b.reduce(function(S,B){return S[B]="",S},{});!an(p)||!Mn(p)||(Object.assign(p.style,x),Object.keys(w).forEach(function(S){p.removeAttribute(S)}))})}}const ou={name:"applyStyles",enabled:!0,phase:"write",fn:Kb,effect:Yb,requires:["computeStyles"]};function Rn(o){return o.split("-")[0]}var Gr=Math.max,Qo=Math.min,Di=Math.round;function jl(){var o=navigator.userAgentData;return o!=null&&o.brands&&Array.isArray(o.brands)?o.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function gf(){return!/^((?!chrome|android).)*safari/i.test(jl())}function Li(o,n,i){n===void 0&&(n=!1),i===void 0&&(i=!1);var d=o.getBoundingClientRect(),p=1,w=1;n&&an(o)&&(p=o.offsetWidth>0&&Di(d.width)/o.offsetWidth||1,w=o.offsetHeight>0&&Di(d.height)/o.offsetHeight||1);var b=Qr(o)?zt(o):window,x=b.visualViewport,S=!gf()&&i,B=(d.left+(S&&x?x.offsetLeft:0))/p,D=(d.top+(S&&x?x.offsetTop:0))/w,z=d.width/p,te=d.height/w;return{width:z,height:te,top:D,right:B+z,bottom:D+te,left:B,x:B,y:D}}function au(o){var n=Li(o),i=o.offsetWidth,d=o.offsetHeight;return Math.abs(n.width-i)<=1&&(i=n.width),Math.abs(n.height-d)<=1&&(d=n.height),{x:o.offsetLeft,y:o.offsetTop,width:i,height:d}}function mf(o,n){var i=n.getRootNode&&n.getRootNode();if(o.contains(n))return!0;if(i&&su(i)){var d=n;do{if(d&&o.isSameNode(d))return!0;d=d.parentNode||d.host}while(d)}return!1}function rr(o){return zt(o).getComputedStyle(o)}function Gb(o){return["table","td","th"].indexOf(Mn(o))>=0}function Tr(o){return((Qr(o)?o.ownerDocument:o.document)||window.document).documentElement}function ea(o){return Mn(o)==="html"?o:o.assignedSlot||o.parentNode||(su(o)?o.host:null)||Tr(o)}function yd(o){return!an(o)||rr(o).position==="fixed"?null:o.offsetParent}function zb(o){var n=/firefox/i.test(jl()),i=/Trident/i.test(jl());if(i&&an(o)){var d=rr(o);if(d.position==="fixed")return null}var p=ea(o);for(su(p)&&(p=p.host);an(p)&&["html","body"].indexOf(Mn(p))<0;){var w=rr(p);if(w.transform!=="none"||w.perspective!=="none"||w.contain==="paint"||["transform","perspective"].indexOf(w.willChange)!==-1||n&&w.willChange==="filter"||n&&w.filter&&w.filter!=="none")return p;p=p.parentNode}return null}function Ts(o){for(var n=zt(o),i=yd(o);i&&Gb(i)&&rr(i).position==="static";)i=yd(i);return i&&(Mn(i)==="html"||Mn(i)==="body"&&rr(i).position==="static")?n:i||zb(o)||n}function lu(o){return["top","bottom"].indexOf(o)>=0?"x":"y"}function Es(o,n,i){return Gr(o,Qo(n,i))}function Qb(o,n,i){var d=Es(o,n,i);return d>i?i:d}function bf(){return{top:0,right:0,bottom:0,left:0}}function yf(o){return Object.assign({},bf(),o)}function Ef(o,n){return n.reduce(function(i,d){return i[d]=o,i},{})}var Xb=function(n,i){return n=typeof n=="function"?n(Object.assign({},i.rects,{placement:i.placement})):n,yf(typeof n!="number"?n:Ef(n,Mi))};function jb(o){var n,i=o.state,d=o.name,p=o.options,w=i.elements.arrow,b=i.modifiersData.popperOffsets,x=Rn(i.placement),S=lu(x),B=[Ct,Gt].indexOf(x)>=0,D=B?"height":"width";if(!(!w||!b)){var z=Xb(p.padding,i),te=au(w),ne=S==="y"?xt:Ct,ge=S==="y"?Yt:Gt,J=i.rects.reference[D]+i.rects.reference[S]-b[S]-i.rects.popper[D],ee=b[S]-i.rects.reference[S],N=Ts(w),U=N?S==="y"?N.clientHeight||0:N.clientWidth||0:0,ie=J/2-ee/2,F=z[ne],k=U-te[D]-z[ge],H=U/2-te[D]/2+ie,ue=Es(F,H,k),xe=S;i.modifiersData[d]=(n={},n[xe]=ue,n.centerOffset=ue-H,n)}}function Zb(o){var n=o.state,i=o.options,d=i.element,p=d===void 0?"[data-popper-arrow]":d;p!=null&&(typeof p=="string"&&(p=n.elements.popper.querySelector(p),!p)||mf(n.elements.popper,p)&&(n.elements.arrow=p))}const wf={name:"arrow",enabled:!0,phase:"main",fn:jb,effect:Zb,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ki(o){return o.split("-")[1]}var Jb={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ey(o,n){var i=o.x,d=o.y,p=n.devicePixelRatio||1;return{x:Di(i*p)/p||0,y:Di(d*p)/p||0}}function Ed(o){var n,i=o.popper,d=o.popperRect,p=o.placement,w=o.variation,b=o.offsets,x=o.position,S=o.gpuAcceleration,B=o.adaptive,D=o.roundOffsets,z=o.isFixed,te=b.x,ne=te===void 0?0:te,ge=b.y,J=ge===void 0?0:ge,ee=typeof D=="function"?D({x:ne,y:J}):{x:ne,y:J};ne=ee.x,J=ee.y;var N=b.hasOwnProperty("x"),U=b.hasOwnProperty("y"),ie=Ct,F=xt,k=window;if(B){var H=Ts(i),ue="clientHeight",xe="clientWidth";if(H===zt(i)&&(H=Tr(i),rr(H).position!=="static"&&x==="absolute"&&(ue="scrollHeight",xe="scrollWidth")),H=H,p===xt||(p===Ct||p===Gt)&&w===Ni){F=Yt;var Ne=z&&H===k&&k.visualViewport?k.visualViewport.height:H[ue];J-=Ne-d.height,J*=S?1:-1}if(p===Ct||(p===xt||p===Yt)&&w===Ni){ie=Gt;var Me=z&&H===k&&k.visualViewport?k.visualViewport.width:H[xe];ne-=Me-d.width,ne*=S?1:-1}}var et=Object.assign({position:x},B&&Jb),rt=D===!0?ey({x:ne,y:J},zt(i)):{x:ne,y:J};if(ne=rt.x,J=rt.y,S){var it;return Object.assign({},et,(it={},it[F]=U?"0":"",it[ie]=N?"0":"",it.transform=(k.devicePixelRatio||1)<=1?"translate("+ne+"px, "+J+"px)":"translate3d("+ne+"px, "+J+"px, 0)",it))}return Object.assign({},et,(n={},n[F]=U?J+"px":"",n[ie]=N?ne+"px":"",n.transform="",n))}function ty(o){var n=o.state,i=o.options,d=i.gpuAcceleration,p=d===void 0?!0:d,w=i.adaptive,b=w===void 0?!0:w,x=i.roundOffsets,S=x===void 0?!0:x,B={placement:Rn(n.placement),variation:ki(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:p,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,Ed(Object.assign({},B,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:b,roundOffsets:S})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,Ed(Object.assign({},B,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:S})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}const uu={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ty,data:{}};var Bo={passive:!0};function ny(o){var n=o.state,i=o.instance,d=o.options,p=d.scroll,w=p===void 0?!0:p,b=d.resize,x=b===void 0?!0:b,S=zt(n.elements.popper),B=[].concat(n.scrollParents.reference,n.scrollParents.popper);return w&&B.forEach(function(D){D.addEventListener("scroll",i.update,Bo)}),x&&S.addEventListener("resize",i.update,Bo),function(){w&&B.forEach(function(D){D.removeEventListener("scroll",i.update,Bo)}),x&&S.removeEventListener("resize",i.update,Bo)}}const cu={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ny,data:{}};var ry={left:"right",right:"left",bottom:"top",top:"bottom"};function Yo(o){return o.replace(/left|right|bottom|top/g,function(n){return ry[n]})}var iy={start:"end",end:"start"};function wd(o){return o.replace(/start|end/g,function(n){return iy[n]})}function du(o){var n=zt(o),i=n.pageXOffset,d=n.pageYOffset;return{scrollLeft:i,scrollTop:d}}function fu(o){return Li(Tr(o)).left+du(o).scrollLeft}function sy(o,n){var i=zt(o),d=Tr(o),p=i.visualViewport,w=d.clientWidth,b=d.clientHeight,x=0,S=0;if(p){w=p.width,b=p.height;var B=gf();(B||!B&&n==="fixed")&&(x=p.offsetLeft,S=p.offsetTop)}return{width:w,height:b,x:x+fu(o),y:S}}function oy(o){var n,i=Tr(o),d=du(o),p=(n=o.ownerDocument)==null?void 0:n.body,w=Gr(i.scrollWidth,i.clientWidth,p?p.scrollWidth:0,p?p.clientWidth:0),b=Gr(i.scrollHeight,i.clientHeight,p?p.scrollHeight:0,p?p.clientHeight:0),x=-d.scrollLeft+fu(o),S=-d.scrollTop;return rr(p||i).direction==="rtl"&&(x+=Gr(i.clientWidth,p?p.clientWidth:0)-w),{width:w,height:b,x,y:S}}function hu(o){var n=rr(o),i=n.overflow,d=n.overflowX,p=n.overflowY;return/auto|scroll|overlay|hidden/.test(i+p+d)}function Af(o){return["html","body","#document"].indexOf(Mn(o))>=0?o.ownerDocument.body:an(o)&&hu(o)?o:Af(ea(o))}function ws(o,n){var i;n===void 0&&(n=[]);var d=Af(o),p=d===((i=o.ownerDocument)==null?void 0:i.body),w=zt(d),b=p?[w].concat(w.visualViewport||[],hu(d)?d:[]):d,x=n.concat(b);return p?x:x.concat(ws(ea(b)))}function Zl(o){return Object.assign({},o,{left:o.x,top:o.y,right:o.x+o.width,bottom:o.y+o.height})}function ay(o,n){var i=Li(o,!1,n==="fixed");return i.top=i.top+o.clientTop,i.left=i.left+o.clientLeft,i.bottom=i.top+o.clientHeight,i.right=i.left+o.clientWidth,i.width=o.clientWidth,i.height=o.clientHeight,i.x=i.left,i.y=i.top,i}function Ad(o,n,i){return n===ru?Zl(sy(o,i)):Qr(n)?ay(n,i):Zl(oy(Tr(o)))}function ly(o){var n=ws(ea(o)),i=["absolute","fixed"].indexOf(rr(o).position)>=0,d=i&&an(o)?Ts(o):o;return Qr(d)?n.filter(function(p){return Qr(p)&&mf(p,d)&&Mn(p)!=="body"}):[]}function uy(o,n,i,d){var p=n==="clippingParents"?ly(o):[].concat(n),w=[].concat(p,[i]),b=w[0],x=w.reduce(function(S,B){var D=Ad(o,B,d);return S.top=Gr(D.top,S.top),S.right=Qo(D.right,S.right),S.bottom=Qo(D.bottom,S.bottom),S.left=Gr(D.left,S.left),S},Ad(o,b,d));return x.width=x.right-x.left,x.height=x.bottom-x.top,x.x=x.left,x.y=x.top,x}function Tf(o){var n=o.reference,i=o.element,d=o.placement,p=d?Rn(d):null,w=d?ki(d):null,b=n.x+n.width/2-i.width/2,x=n.y+n.height/2-i.height/2,S;switch(p){case xt:S={x:b,y:n.y-i.height};break;case Yt:S={x:b,y:n.y+n.height};break;case Gt:S={x:n.x+n.width,y:x};break;case Ct:S={x:n.x-i.width,y:x};break;default:S={x:n.x,y:n.y}}var B=p?lu(p):null;if(B!=null){var D=B==="y"?"height":"width";switch(w){case zr:S[B]=S[B]-(n[D]/2-i[D]/2);break;case Ni:S[B]=S[B]+(n[D]/2-i[D]/2);break}}return S}function $i(o,n){n===void 0&&(n={});var i=n,d=i.placement,p=d===void 0?o.placement:d,w=i.strategy,b=w===void 0?o.strategy:w,x=i.boundary,S=x===void 0?sf:x,B=i.rootBoundary,D=B===void 0?ru:B,z=i.elementContext,te=z===void 0?Ci:z,ne=i.altBoundary,ge=ne===void 0?!1:ne,J=i.padding,ee=J===void 0?0:J,N=yf(typeof ee!="number"?ee:Ef(ee,Mi)),U=te===Ci?of:Ci,ie=o.rects.popper,F=o.elements[ge?U:te],k=uy(Qr(F)?F:F.contextElement||Tr(o.elements.popper),S,D,b),H=Li(o.elements.reference),ue=Tf({reference:H,element:ie,placement:p}),xe=Zl(Object.assign({},ie,ue)),Ne=te===Ci?xe:H,Me={top:k.top-Ne.top+N.top,bottom:Ne.bottom-k.bottom+N.bottom,left:k.left-Ne.left+N.left,right:Ne.right-k.right+N.right},et=o.modifiersData.offset;if(te===Ci&&et){var rt=et[p];Object.keys(Me).forEach(function(it){var Qt=[Gt,Yt].indexOf(it)>=0?1:-1,qe=[xt,Yt].indexOf(it)>=0?"y":"x";Me[it]+=rt[qe]*Qt})}return Me}function cy(o,n){n===void 0&&(n={});var i=n,d=i.placement,p=i.boundary,w=i.rootBoundary,b=i.padding,x=i.flipVariations,S=i.allowedAutoPlacements,B=S===void 0?iu:S,D=ki(d),z=D?x?Xl:Xl.filter(function(ge){return ki(ge)===D}):Mi,te=z.filter(function(ge){return B.indexOf(ge)>=0});te.length===0&&(te=z);var ne=te.reduce(function(ge,J){return ge[J]=$i(o,{placement:J,boundary:p,rootBoundary:w,padding:b})[Rn(J)],ge},{});return Object.keys(ne).sort(function(ge,J){return ne[ge]-ne[J]})}function dy(o){if(Rn(o)===Jo)return[];var n=Yo(o);return[wd(o),n,wd(n)]}function fy(o){var n=o.state,i=o.options,d=o.name;if(!n.modifiersData[d]._skip){for(var p=i.mainAxis,w=p===void 0?!0:p,b=i.altAxis,x=b===void 0?!0:b,S=i.fallbackPlacements,B=i.padding,D=i.boundary,z=i.rootBoundary,te=i.altBoundary,ne=i.flipVariations,ge=ne===void 0?!0:ne,J=i.allowedAutoPlacements,ee=n.options.placement,N=Rn(ee),U=N===ee,ie=S||(U||!ge?[Yo(ee)]:dy(ee)),F=[ee].concat(ie).reduce(function(St,we){return St.concat(Rn(we)===Jo?cy(n,{placement:we,boundary:D,rootBoundary:z,padding:B,flipVariations:ge,allowedAutoPlacements:J}):we)},[]),k=n.rects.reference,H=n.rects.popper,ue=new Map,xe=!0,Ne=F[0],Me=0;Me<F.length;Me++){var et=F[Me],rt=Rn(et),it=ki(et)===zr,Qt=[xt,Yt].indexOf(rt)>=0,qe=Qt?"width":"height",lt=$i(n,{placement:et,boundary:D,rootBoundary:z,altBoundary:te,padding:B}),We=Qt?it?Gt:Ct:it?Yt:xt;k[qe]>H[qe]&&(We=Yo(We));var Ye=Yo(We),dn=[];if(w&&dn.push(lt[rt]<=0),x&&dn.push(lt[We]<=0,lt[Ye]<=0),dn.every(function(St){return St})){Ne=et,xe=!1;break}ue.set(et,dn)}if(xe)for(var fn=ge?3:1,_t=function(we){var tt=F.find(function(Ot){var Qe=ue.get(Ot);if(Qe)return Qe.slice(0,we).every(function(hn){return hn})});if(tt)return Ne=tt,"break"},Bt=fn;Bt>0;Bt--){var Fn=_t(Bt);if(Fn==="break")break}n.placement!==Ne&&(n.modifiersData[d]._skip=!0,n.placement=Ne,n.reset=!0)}}const xf={name:"flip",enabled:!0,phase:"main",fn:fy,requiresIfExists:["offset"],data:{_skip:!1}};function Td(o,n,i){return i===void 0&&(i={x:0,y:0}),{top:o.top-n.height-i.y,right:o.right-n.width+i.x,bottom:o.bottom-n.height+i.y,left:o.left-n.width-i.x}}function xd(o){return[xt,Gt,Yt,Ct].some(function(n){return o[n]>=0})}function hy(o){var n=o.state,i=o.name,d=n.rects.reference,p=n.rects.popper,w=n.modifiersData.preventOverflow,b=$i(n,{elementContext:"reference"}),x=$i(n,{altBoundary:!0}),S=Td(b,d),B=Td(x,p,w),D=xd(S),z=xd(B);n.modifiersData[i]={referenceClippingOffsets:S,popperEscapeOffsets:B,isReferenceHidden:D,hasPopperEscaped:z},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":D,"data-popper-escaped":z})}const Cf={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hy};function py(o,n,i){var d=Rn(o),p=[Ct,xt].indexOf(d)>=0?-1:1,w=typeof i=="function"?i(Object.assign({},n,{placement:o})):i,b=w[0],x=w[1];return b=b||0,x=(x||0)*p,[Ct,Gt].indexOf(d)>=0?{x,y:b}:{x:b,y:x}}function _y(o){var n=o.state,i=o.options,d=o.name,p=i.offset,w=p===void 0?[0,0]:p,b=iu.reduce(function(D,z){return D[z]=py(z,n.rects,w),D},{}),x=b[n.placement],S=x.x,B=x.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=S,n.modifiersData.popperOffsets.y+=B),n.modifiersData[d]=b}const Sf={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:_y};function vy(o){var n=o.state,i=o.name;n.modifiersData[i]=Tf({reference:n.rects.reference,element:n.rects.popper,placement:n.placement})}const pu={name:"popperOffsets",enabled:!0,phase:"read",fn:vy,data:{}};function gy(o){return o==="x"?"y":"x"}function my(o){var n=o.state,i=o.options,d=o.name,p=i.mainAxis,w=p===void 0?!0:p,b=i.altAxis,x=b===void 0?!1:b,S=i.boundary,B=i.rootBoundary,D=i.altBoundary,z=i.padding,te=i.tether,ne=te===void 0?!0:te,ge=i.tetherOffset,J=ge===void 0?0:ge,ee=$i(n,{boundary:S,rootBoundary:B,padding:z,altBoundary:D}),N=Rn(n.placement),U=ki(n.placement),ie=!U,F=lu(N),k=gy(F),H=n.modifiersData.popperOffsets,ue=n.rects.reference,xe=n.rects.popper,Ne=typeof J=="function"?J(Object.assign({},n.rects,{placement:n.placement})):J,Me=typeof Ne=="number"?{mainAxis:Ne,altAxis:Ne}:Object.assign({mainAxis:0,altAxis:0},Ne),et=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,rt={x:0,y:0};if(H){if(w){var it,Qt=F==="y"?xt:Ct,qe=F==="y"?Yt:Gt,lt=F==="y"?"height":"width",We=H[F],Ye=We+ee[Qt],dn=We-ee[qe],fn=ne?-xe[lt]/2:0,_t=U===zr?ue[lt]:xe[lt],Bt=U===zr?-xe[lt]:-ue[lt],Fn=n.elements.arrow,St=ne&&Fn?au(Fn):{width:0,height:0},we=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:bf(),tt=we[Qt],Ot=we[qe],Qe=Es(0,ue[lt],St[lt]),hn=ie?ue[lt]/2-fn-Qe-tt-Me.mainAxis:_t-Qe-tt-Me.mainAxis,An=ie?-ue[lt]/2+fn+Qe+Ot+Me.mainAxis:Bt+Qe+Ot+Me.mainAxis,Tn=n.elements.arrow&&Ts(n.elements.arrow),It=Tn?F==="y"?Tn.clientTop||0:Tn.clientLeft||0:0,Sr=(it=et?.[F])!=null?it:0,Et=We+hn-Sr-It,Xt=We+An-Sr,Bn=Es(ne?Qo(Ye,Et):Ye,We,ne?Gr(dn,Xt):dn);H[F]=Bn,rt[F]=Bn-We}if(x){var nt,Zr=F==="x"?xt:Ct,Wi=F==="x"?Yt:Gt,Ue=H[k],ut=k==="y"?"height":"width",xn=Ue+ee[Zr],Un=Ue-ee[Wi],G=[xt,Ct].indexOf(N)!==-1,Cn=(nt=et?.[k])!=null?nt:0,Jr=G?xn:Ue-ue[ut]-xe[ut]-Cn+Me.altAxis,Sn=G?Ue+ue[ut]+xe[ut]-Cn-Me.altAxis:Un,Xe=ne&&G?Qb(Jr,Ue,Sn):Es(ne?Jr:xn,Ue,ne?Sn:Un);H[k]=Xe,rt[k]=Xe-Ue}n.modifiersData[d]=rt}}const Of={name:"preventOverflow",enabled:!0,phase:"main",fn:my,requiresIfExists:["offset"]};function by(o){return{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}}function yy(o){return o===zt(o)||!an(o)?du(o):by(o)}function Ey(o){var n=o.getBoundingClientRect(),i=Di(n.width)/o.offsetWidth||1,d=Di(n.height)/o.offsetHeight||1;return i!==1||d!==1}function wy(o,n,i){i===void 0&&(i=!1);var d=an(n),p=an(n)&&Ey(n),w=Tr(n),b=Li(o,p,i),x={scrollLeft:0,scrollTop:0},S={x:0,y:0};return(d||!d&&!i)&&((Mn(n)!=="body"||hu(w))&&(x=yy(n)),an(n)?(S=Li(n,!0),S.x+=n.clientLeft,S.y+=n.clientTop):w&&(S.x=fu(w))),{x:b.left+x.scrollLeft-S.x,y:b.top+x.scrollTop-S.y,width:b.width,height:b.height}}function Ay(o){var n=new Map,i=new Set,d=[];o.forEach(function(w){n.set(w.name,w)});function p(w){i.add(w.name);var b=[].concat(w.requires||[],w.requiresIfExists||[]);b.forEach(function(x){if(!i.has(x)){var S=n.get(x);S&&p(S)}}),d.push(w)}return o.forEach(function(w){i.has(w.name)||p(w)}),d}function Ty(o){var n=Ay(o);return vf.reduce(function(i,d){return i.concat(n.filter(function(p){return p.phase===d}))},[])}function xy(o){var n;return function(){return n||(n=new Promise(function(i){Promise.resolve().then(function(){n=void 0,i(o())})})),n}}function Cy(o){var n=o.reduce(function(i,d){var p=i[d.name];return i[d.name]=p?Object.assign({},p,d,{options:Object.assign({},p.options,d.options),data:Object.assign({},p.data,d.data)}):d,i},{});return Object.keys(n).map(function(i){return n[i]})}var Cd={placement:"bottom",modifiers:[],strategy:"absolute"};function Sd(){for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return!n.some(function(d){return!(d&&typeof d.getBoundingClientRect=="function")})}function ta(o){o===void 0&&(o={});var n=o,i=n.defaultModifiers,d=i===void 0?[]:i,p=n.defaultOptions,w=p===void 0?Cd:p;return function(x,S,B){B===void 0&&(B=w);var D={placement:"bottom",orderedModifiers:[],options:Object.assign({},Cd,w),modifiersData:{},elements:{reference:x,popper:S},attributes:{},styles:{}},z=[],te=!1,ne={state:D,setOptions:function(N){var U=typeof N=="function"?N(D.options):N;J(),D.options=Object.assign({},w,D.options,U),D.scrollParents={reference:Qr(x)?ws(x):x.contextElement?ws(x.contextElement):[],popper:ws(S)};var ie=Ty(Cy([].concat(d,D.options.modifiers)));return D.orderedModifiers=ie.filter(function(F){return F.enabled}),ge(),ne.update()},forceUpdate:function(){if(!te){var N=D.elements,U=N.reference,ie=N.popper;if(Sd(U,ie)){D.rects={reference:wy(U,Ts(ie),D.options.strategy==="fixed"),popper:au(ie)},D.reset=!1,D.placement=D.options.placement,D.orderedModifiers.forEach(function(Me){return D.modifiersData[Me.name]=Object.assign({},Me.data)});for(var F=0;F<D.orderedModifiers.length;F++){if(D.reset===!0){D.reset=!1,F=-1;continue}var k=D.orderedModifiers[F],H=k.fn,ue=k.options,xe=ue===void 0?{}:ue,Ne=k.name;typeof H=="function"&&(D=H({state:D,options:xe,name:Ne,instance:ne})||D)}}}},update:xy(function(){return new Promise(function(ee){ne.forceUpdate(),ee(D)})}),destroy:function(){J(),te=!0}};if(!Sd(x,S))return ne;ne.setOptions(B).then(function(ee){!te&&B.onFirstUpdate&&B.onFirstUpdate(ee)});function ge(){D.orderedModifiers.forEach(function(ee){var N=ee.name,U=ee.options,ie=U===void 0?{}:U,F=ee.effect;if(typeof F=="function"){var k=F({state:D,name:N,instance:ne,options:ie}),H=function(){};z.push(k||H)}})}function J(){z.forEach(function(ee){return ee()}),z=[]}return ne}}var Sy=ta(),Oy=[cu,pu,uu,ou],Iy=ta({defaultModifiers:Oy}),Ny=[cu,pu,uu,ou,Sf,xf,Of,wf,Cf],_u=ta({defaultModifiers:Ny});const If=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ff,afterRead:uf,afterWrite:_f,applyStyles:ou,arrow:wf,auto:Jo,basePlacements:Mi,beforeMain:cf,beforeRead:af,beforeWrite:hf,bottom:Yt,clippingParents:sf,computeStyles:uu,createPopper:_u,createPopperBase:Sy,createPopperLite:Iy,detectOverflow:$i,end:Ni,eventListeners:cu,flip:xf,hide:Cf,left:Ct,main:df,modifierPhases:vf,offset:Sf,placements:iu,popper:Ci,popperGenerator:ta,popperOffsets:pu,preventOverflow:Of,read:lf,reference:of,right:Gt,start:zr,top:xt,variationPlacements:Xl,viewport:ru,write:pf},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const yr=new Map,$l={set(o,n,i){yr.has(o)||yr.set(o,new Map);const d=yr.get(o);if(!d.has(n)&&d.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(d.keys())[0]}.`);return}d.set(n,i)},get(o,n){return yr.has(o)&&yr.get(o).get(n)||null},remove(o,n){if(!yr.has(o))return;const i=yr.get(o);i.delete(n),i.size===0&&yr.delete(o)}},Dy=1e6,Ly=1e3,Jl="transitionend",Nf=o=>(o&&window.CSS&&window.CSS.escape&&(o=o.replace(/#([^\s"#']+)/g,(n,i)=>`#${CSS.escape(i)}`)),o),ky=o=>o==null?`${o}`:Object.prototype.toString.call(o).match(/\s([a-z]+)/i)[1].toLowerCase(),$y=o=>{do o+=Math.floor(Math.random()*Dy);while(document.getElementById(o));return o},Ry=o=>{if(!o)return 0;let{transitionDuration:n,transitionDelay:i}=window.getComputedStyle(o);const d=Number.parseFloat(n),p=Number.parseFloat(i);return!d&&!p?0:(n=n.split(",")[0],i=i.split(",")[0],(Number.parseFloat(n)+Number.parseFloat(i))*Ly)},Df=o=>{o.dispatchEvent(new Event(Jl))},tr=o=>!o||typeof o!="object"?!1:(typeof o.jquery<"u"&&(o=o[0]),typeof o.nodeType<"u"),Er=o=>tr(o)?o.jquery?o[0]:o:typeof o=="string"&&o.length>0?document.querySelector(Nf(o)):null,Fi=o=>{if(!tr(o)||o.getClientRects().length===0)return!1;const n=getComputedStyle(o).getPropertyValue("visibility")==="visible",i=o.closest("details:not([open])");if(!i)return n;if(i!==o){const d=o.closest("summary");if(d&&d.parentNode!==i||d===null)return!1}return n},wr=o=>!o||o.nodeType!==Node.ELEMENT_NODE||o.classList.contains("disabled")?!0:typeof o.disabled<"u"?o.disabled:o.hasAttribute("disabled")&&o.getAttribute("disabled")!=="false",Lf=o=>{if(!document.documentElement.attachShadow)return null;if(typeof o.getRootNode=="function"){const n=o.getRootNode();return n instanceof ShadowRoot?n:null}return o instanceof ShadowRoot?o:o.parentNode?Lf(o.parentNode):null},Xo=()=>{},xs=o=>{o.offsetHeight},kf=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Rl=[],Py=o=>{document.readyState==="loading"?(Rl.length||document.addEventListener("DOMContentLoaded",()=>{for(const n of Rl)n()}),Rl.push(o)):o()},ln=()=>document.documentElement.dir==="rtl",cn=o=>{Py(()=>{const n=kf();if(n){const i=o.NAME,d=n.fn[i];n.fn[i]=o.jQueryInterface,n.fn[i].Constructor=o,n.fn[i].noConflict=()=>(n.fn[i]=d,o.jQueryInterface)}})},Ft=(o,n=[],i=o)=>typeof o=="function"?o.call(...n):i,$f=(o,n,i=!0)=>{if(!i){Ft(o);return}const p=Ry(n)+5;let w=!1;const b=({target:x})=>{x===n&&(w=!0,n.removeEventListener(Jl,b),Ft(o))};n.addEventListener(Jl,b),setTimeout(()=>{w||Df(n)},p)},vu=(o,n,i,d)=>{const p=o.length;let w=o.indexOf(n);return w===-1?!i&&d?o[p-1]:o[0]:(w+=i?1:-1,d&&(w=(w+p)%p),o[Math.max(0,Math.min(w,p-1))])},My=/[^.]*(?=\..*)\.|.*/,Fy=/\..*/,By=/::\d+$/,Pl={};let Od=1;const Rf={mouseenter:"mouseover",mouseleave:"mouseout"},Uy=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Pf(o,n){return n&&`${n}::${Od++}`||o.uidEvent||Od++}function Mf(o){const n=Pf(o);return o.uidEvent=n,Pl[n]=Pl[n]||{},Pl[n]}function Wy(o,n){return function i(d){return gu(d,{delegateTarget:o}),i.oneOff&&$.off(o,d.type,n),n.apply(o,[d])}}function qy(o,n,i){return function d(p){const w=o.querySelectorAll(n);for(let{target:b}=p;b&&b!==this;b=b.parentNode)for(const x of w)if(x===b)return gu(p,{delegateTarget:b}),d.oneOff&&$.off(o,p.type,n,i),i.apply(b,[p])}}function Ff(o,n,i=null){return Object.values(o).find(d=>d.callable===n&&d.delegationSelector===i)}function Bf(o,n,i){const d=typeof n=="string",p=d?i:n||i;let w=Uf(o);return Uy.has(w)||(w=o),[d,p,w]}function Id(o,n,i,d,p){if(typeof n!="string"||!o)return;let[w,b,x]=Bf(n,i,d);n in Rf&&(b=(ge=>function(J){if(!J.relatedTarget||J.relatedTarget!==J.delegateTarget&&!J.delegateTarget.contains(J.relatedTarget))return ge.call(this,J)})(b));const S=Mf(o),B=S[x]||(S[x]={}),D=Ff(B,b,w?i:null);if(D){D.oneOff=D.oneOff&&p;return}const z=Pf(b,n.replace(My,"")),te=w?qy(o,i,b):Wy(o,b);te.delegationSelector=w?i:null,te.callable=b,te.oneOff=p,te.uidEvent=z,B[z]=te,o.addEventListener(x,te,w)}function eu(o,n,i,d,p){const w=Ff(n[i],d,p);w&&(o.removeEventListener(i,w,!!p),delete n[i][w.uidEvent])}function Vy(o,n,i,d){const p=n[i]||{};for(const[w,b]of Object.entries(p))w.includes(d)&&eu(o,n,i,b.callable,b.delegationSelector)}function Uf(o){return o=o.replace(Fy,""),Rf[o]||o}const $={on(o,n,i,d){Id(o,n,i,d,!1)},one(o,n,i,d){Id(o,n,i,d,!0)},off(o,n,i,d){if(typeof n!="string"||!o)return;const[p,w,b]=Bf(n,i,d),x=b!==n,S=Mf(o),B=S[b]||{},D=n.startsWith(".");if(typeof w<"u"){if(!Object.keys(B).length)return;eu(o,S,b,w,p?i:null);return}if(D)for(const z of Object.keys(S))Vy(o,S,z,n.slice(1));for(const[z,te]of Object.entries(B)){const ne=z.replace(By,"");(!x||n.includes(ne))&&eu(o,S,b,te.callable,te.delegationSelector)}},trigger(o,n,i){if(typeof n!="string"||!o)return null;const d=kf(),p=Uf(n),w=n!==p;let b=null,x=!0,S=!0,B=!1;w&&d&&(b=d.Event(n,i),d(o).trigger(b),x=!b.isPropagationStopped(),S=!b.isImmediatePropagationStopped(),B=b.isDefaultPrevented());const D=gu(new Event(n,{bubbles:x,cancelable:!0}),i);return B&&D.preventDefault(),S&&o.dispatchEvent(D),D.defaultPrevented&&b&&b.preventDefault(),D}};function gu(o,n={}){for(const[i,d]of Object.entries(n))try{o[i]=d}catch{Object.defineProperty(o,i,{configurable:!0,get(){return d}})}return o}function Nd(o){if(o==="true")return!0;if(o==="false")return!1;if(o===Number(o).toString())return Number(o);if(o===""||o==="null")return null;if(typeof o!="string")return o;try{return JSON.parse(decodeURIComponent(o))}catch{return o}}function Ml(o){return o.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}const nr={setDataAttribute(o,n,i){o.setAttribute(`data-bs-${Ml(n)}`,i)},removeDataAttribute(o,n){o.removeAttribute(`data-bs-${Ml(n)}`)},getDataAttributes(o){if(!o)return{};const n={},i=Object.keys(o.dataset).filter(d=>d.startsWith("bs")&&!d.startsWith("bsConfig"));for(const d of i){let p=d.replace(/^bs/,"");p=p.charAt(0).toLowerCase()+p.slice(1),n[p]=Nd(o.dataset[d])}return n},getDataAttribute(o,n){return Nd(o.getAttribute(`data-bs-${Ml(n)}`))}};class Cs{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(n){return n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n}_mergeConfigObj(n,i){const d=tr(i)?nr.getDataAttribute(i,"config"):{};return{...this.constructor.Default,...typeof d=="object"?d:{},...tr(i)?nr.getDataAttributes(i):{},...typeof n=="object"?n:{}}}_typeCheckConfig(n,i=this.constructor.DefaultType){for(const[d,p]of Object.entries(i)){const w=n[d],b=tr(w)?"element":ky(w);if(!new RegExp(p).test(b))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${d}" provided type "${b}" but expected type "${p}".`)}}}const Hy="5.3.8";class wn extends Cs{constructor(n,i){super(),n=Er(n),n&&(this._element=n,this._config=this._getConfig(i),$l.set(this._element,this.constructor.DATA_KEY,this))}dispose(){$l.remove(this._element,this.constructor.DATA_KEY),$.off(this._element,this.constructor.EVENT_KEY);for(const n of Object.getOwnPropertyNames(this))this[n]=null}_queueCallback(n,i,d=!0){$f(n,i,d)}_getConfig(n){return n=this._mergeConfigObj(n,this._element),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}static getInstance(n){return $l.get(Er(n),this.DATA_KEY)}static getOrCreateInstance(n,i={}){return this.getInstance(n)||new this(n,typeof i=="object"?i:null)}static get VERSION(){return Hy}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(n){return`${n}${this.EVENT_KEY}`}}const Fl=o=>{let n=o.getAttribute("data-bs-target");if(!n||n==="#"){let i=o.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),n=i&&i!=="#"?i.trim():null}return n?n.split(",").map(i=>Nf(i)).join(","):null},se={find(o,n=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(n,o))},findOne(o,n=document.documentElement){return Element.prototype.querySelector.call(n,o)},children(o,n){return[].concat(...o.children).filter(i=>i.matches(n))},parents(o,n){const i=[];let d=o.parentNode.closest(n);for(;d;)i.push(d),d=d.parentNode.closest(n);return i},prev(o,n){let i=o.previousElementSibling;for(;i;){if(i.matches(n))return[i];i=i.previousElementSibling}return[]},next(o,n){let i=o.nextElementSibling;for(;i;){if(i.matches(n))return[i];i=i.nextElementSibling}return[]},focusableChildren(o){const n=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(i=>`${i}:not([tabindex^="-"])`).join(",");return this.find(n,o).filter(i=>!wr(i)&&Fi(i))},getSelectorFromElement(o){const n=Fl(o);return n&&se.findOne(n)?n:null},getElementFromSelector(o){const n=Fl(o);return n?se.findOne(n):null},getMultipleElementsFromSelector(o){const n=Fl(o);return n?se.find(n):[]}},na=(o,n="hide")=>{const i=`click.dismiss${o.EVENT_KEY}`,d=o.NAME;$.on(document,i,`[data-bs-dismiss="${d}"]`,function(p){if(["A","AREA"].includes(this.tagName)&&p.preventDefault(),wr(this))return;const w=se.getElementFromSelector(this)||this.closest(`.${d}`);o.getOrCreateInstance(w)[n]()})},Ky="alert",Yy="bs.alert",Wf=`.${Yy}`,Gy=`close${Wf}`,zy=`closed${Wf}`,Qy="fade",Xy="show";class ra extends wn{static get NAME(){return Ky}close(){if($.trigger(this._element,Gy).defaultPrevented)return;this._element.classList.remove(Xy);const i=this._element.classList.contains(Qy);this._queueCallback(()=>this._destroyElement(),this._element,i)}_destroyElement(){this._element.remove(),$.trigger(this._element,zy),this.dispose()}static jQueryInterface(n){return this.each(function(){const i=ra.getOrCreateInstance(this);if(typeof n=="string"){if(i[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);i[n](this)}})}}na(ra,"close");cn(ra);const jy="button",Zy="bs.button",Jy=`.${Zy}`,e0=".data-api",t0="active",Dd='[data-bs-toggle="button"]',n0=`click${Jy}${e0}`;class ia extends wn{static get NAME(){return jy}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(t0))}static jQueryInterface(n){return this.each(function(){const i=ia.getOrCreateInstance(this);n==="toggle"&&i[n]()})}}$.on(document,n0,Dd,o=>{o.preventDefault();const n=o.target.closest(Dd);ia.getOrCreateInstance(n).toggle()});cn(ia);const r0="swipe",Bi=".bs.swipe",i0=`touchstart${Bi}`,s0=`touchmove${Bi}`,o0=`touchend${Bi}`,a0=`pointerdown${Bi}`,l0=`pointerup${Bi}`,u0="touch",c0="pen",d0="pointer-event",f0=40,h0={endCallback:null,leftCallback:null,rightCallback:null},p0={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class jo extends Cs{constructor(n,i){super(),this._element=n,!(!n||!jo.isSupported())&&(this._config=this._getConfig(i),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return h0}static get DefaultType(){return p0}static get NAME(){return r0}dispose(){$.off(this._element,Bi)}_start(n){if(!this._supportPointerEvents){this._deltaX=n.touches[0].clientX;return}this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX)}_end(n){this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX-this._deltaX),this._handleSwipe(),Ft(this._config.endCallback)}_move(n){this._deltaX=n.touches&&n.touches.length>1?0:n.touches[0].clientX-this._deltaX}_handleSwipe(){const n=Math.abs(this._deltaX);if(n<=f0)return;const i=n/this._deltaX;this._deltaX=0,i&&Ft(i>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?($.on(this._element,a0,n=>this._start(n)),$.on(this._element,l0,n=>this._end(n)),this._element.classList.add(d0)):($.on(this._element,i0,n=>this._start(n)),$.on(this._element,s0,n=>this._move(n)),$.on(this._element,o0,n=>this._end(n)))}_eventIsPointerPenTouch(n){return this._supportPointerEvents&&(n.pointerType===c0||n.pointerType===u0)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const _0="carousel",v0="bs.carousel",xr=`.${v0}`,qf=".data-api",g0="ArrowLeft",m0="ArrowRight",b0=500,ms="next",Ti="prev",Si="left",Go="right",y0=`slide${xr}`,Bl=`slid${xr}`,E0=`keydown${xr}`,w0=`mouseenter${xr}`,A0=`mouseleave${xr}`,T0=`dragstart${xr}`,x0=`load${xr}${qf}`,C0=`click${xr}${qf}`,Vf="carousel",Uo="active",S0="slide",O0="carousel-item-end",I0="carousel-item-start",N0="carousel-item-next",D0="carousel-item-prev",Hf=".active",Kf=".carousel-item",L0=Hf+Kf,k0=".carousel-item img",$0=".carousel-indicators",R0="[data-bs-slide], [data-bs-slide-to]",P0='[data-bs-ride="carousel"]',M0={[g0]:Go,[m0]:Si},F0={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},B0={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ss extends wn{constructor(n,i){super(n,i),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=se.findOne($0,this._element),this._addEventListeners(),this._config.ride===Vf&&this.cycle()}static get Default(){return F0}static get DefaultType(){return B0}static get NAME(){return _0}next(){this._slide(ms)}nextWhenVisible(){!document.hidden&&Fi(this._element)&&this.next()}prev(){this._slide(Ti)}pause(){this._isSliding&&Df(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){$.one(this._element,Bl,()=>this.cycle());return}this.cycle()}}to(n){const i=this._getItems();if(n>i.length-1||n<0)return;if(this._isSliding){$.one(this._element,Bl,()=>this.to(n));return}const d=this._getItemIndex(this._getActive());if(d===n)return;const p=n>d?ms:Ti;this._slide(p,i[n])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(n){return n.defaultInterval=n.interval,n}_addEventListeners(){this._config.keyboard&&$.on(this._element,E0,n=>this._keydown(n)),this._config.pause==="hover"&&($.on(this._element,w0,()=>this.pause()),$.on(this._element,A0,()=>this._maybeEnableCycle())),this._config.touch&&jo.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const d of se.find(k0,this._element))$.on(d,T0,p=>p.preventDefault());const i={leftCallback:()=>this._slide(this._directionToOrder(Si)),rightCallback:()=>this._slide(this._directionToOrder(Go)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),b0+this._config.interval))}};this._swipeHelper=new jo(this._element,i)}_keydown(n){if(/input|textarea/i.test(n.target.tagName))return;const i=M0[n.key];i&&(n.preventDefault(),this._slide(this._directionToOrder(i)))}_getItemIndex(n){return this._getItems().indexOf(n)}_setActiveIndicatorElement(n){if(!this._indicatorsElement)return;const i=se.findOne(Hf,this._indicatorsElement);i.classList.remove(Uo),i.removeAttribute("aria-current");const d=se.findOne(`[data-bs-slide-to="${n}"]`,this._indicatorsElement);d&&(d.classList.add(Uo),d.setAttribute("aria-current","true"))}_updateInterval(){const n=this._activeElement||this._getActive();if(!n)return;const i=Number.parseInt(n.getAttribute("data-bs-interval"),10);this._config.interval=i||this._config.defaultInterval}_slide(n,i=null){if(this._isSliding)return;const d=this._getActive(),p=n===ms,w=i||vu(this._getItems(),d,p,this._config.wrap);if(w===d)return;const b=this._getItemIndex(w),x=ne=>$.trigger(this._element,ne,{relatedTarget:w,direction:this._orderToDirection(n),from:this._getItemIndex(d),to:b});if(x(y0).defaultPrevented||!d||!w)return;const B=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(b),this._activeElement=w;const D=p?I0:O0,z=p?N0:D0;w.classList.add(z),xs(w),d.classList.add(D),w.classList.add(D);const te=()=>{w.classList.remove(D,z),w.classList.add(Uo),d.classList.remove(Uo,z,D),this._isSliding=!1,x(Bl)};this._queueCallback(te,d,this._isAnimated()),B&&this.cycle()}_isAnimated(){return this._element.classList.contains(S0)}_getActive(){return se.findOne(L0,this._element)}_getItems(){return se.find(Kf,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(n){return ln()?n===Si?Ti:ms:n===Si?ms:Ti}_orderToDirection(n){return ln()?n===Ti?Si:Go:n===Ti?Go:Si}static jQueryInterface(n){return this.each(function(){const i=Ss.getOrCreateInstance(this,n);if(typeof n=="number"){i.to(n);return}if(typeof n=="string"){if(i[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);i[n]()}})}}$.on(document,C0,R0,function(o){const n=se.getElementFromSelector(this);if(!n||!n.classList.contains(Vf))return;o.preventDefault();const i=Ss.getOrCreateInstance(n),d=this.getAttribute("data-bs-slide-to");if(d){i.to(d),i._maybeEnableCycle();return}if(nr.getDataAttribute(this,"slide")==="next"){i.next(),i._maybeEnableCycle();return}i.prev(),i._maybeEnableCycle()});$.on(window,x0,()=>{const o=se.find(P0);for(const n of o)Ss.getOrCreateInstance(n)});cn(Ss);const U0="collapse",W0="bs.collapse",Os=`.${W0}`,q0=".data-api",V0=`show${Os}`,H0=`shown${Os}`,K0=`hide${Os}`,Y0=`hidden${Os}`,G0=`click${Os}${q0}`,Ul="show",Ii="collapse",Wo="collapsing",z0="collapsed",Q0=`:scope .${Ii} .${Ii}`,X0="collapse-horizontal",j0="width",Z0="height",J0=".collapse.show, .collapse.collapsing",tu='[data-bs-toggle="collapse"]',eE={parent:null,toggle:!0},tE={parent:"(null|element)",toggle:"boolean"};class As extends wn{constructor(n,i){super(n,i),this._isTransitioning=!1,this._triggerArray=[];const d=se.find(tu);for(const p of d){const w=se.getSelectorFromElement(p),b=se.find(w).filter(x=>x===this._element);w!==null&&b.length&&this._triggerArray.push(p)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return eE}static get DefaultType(){return tE}static get NAME(){return U0}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let n=[];if(this._config.parent&&(n=this._getFirstLevelChildren(J0).filter(x=>x!==this._element).map(x=>As.getOrCreateInstance(x,{toggle:!1}))),n.length&&n[0]._isTransitioning||$.trigger(this._element,V0).defaultPrevented)return;for(const x of n)x.hide();const d=this._getDimension();this._element.classList.remove(Ii),this._element.classList.add(Wo),this._element.style[d]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const p=()=>{this._isTransitioning=!1,this._element.classList.remove(Wo),this._element.classList.add(Ii,Ul),this._element.style[d]="",$.trigger(this._element,H0)},b=`scroll${d[0].toUpperCase()+d.slice(1)}`;this._queueCallback(p,this._element,!0),this._element.style[d]=`${this._element[b]}px`}hide(){if(this._isTransitioning||!this._isShown()||$.trigger(this._element,K0).defaultPrevented)return;const i=this._getDimension();this._element.style[i]=`${this._element.getBoundingClientRect()[i]}px`,xs(this._element),this._element.classList.add(Wo),this._element.classList.remove(Ii,Ul);for(const p of this._triggerArray){const w=se.getElementFromSelector(p);w&&!this._isShown(w)&&this._addAriaAndCollapsedClass([p],!1)}this._isTransitioning=!0;const d=()=>{this._isTransitioning=!1,this._element.classList.remove(Wo),this._element.classList.add(Ii),$.trigger(this._element,Y0)};this._element.style[i]="",this._queueCallback(d,this._element,!0)}_isShown(n=this._element){return n.classList.contains(Ul)}_configAfterMerge(n){return n.toggle=!!n.toggle,n.parent=Er(n.parent),n}_getDimension(){return this._element.classList.contains(X0)?j0:Z0}_initializeChildren(){if(!this._config.parent)return;const n=this._getFirstLevelChildren(tu);for(const i of n){const d=se.getElementFromSelector(i);d&&this._addAriaAndCollapsedClass([i],this._isShown(d))}}_getFirstLevelChildren(n){const i=se.find(Q0,this._config.parent);return se.find(n,this._config.parent).filter(d=>!i.includes(d))}_addAriaAndCollapsedClass(n,i){if(n.length)for(const d of n)d.classList.toggle(z0,!i),d.setAttribute("aria-expanded",i)}static jQueryInterface(n){const i={};return typeof n=="string"&&/show|hide/.test(n)&&(i.toggle=!1),this.each(function(){const d=As.getOrCreateInstance(this,i);if(typeof n=="string"){if(typeof d[n]>"u")throw new TypeError(`No method named "${n}"`);d[n]()}})}}$.on(document,G0,tu,function(o){(o.target.tagName==="A"||o.delegateTarget&&o.delegateTarget.tagName==="A")&&o.preventDefault();for(const n of se.getMultipleElementsFromSelector(this))As.getOrCreateInstance(n,{toggle:!1}).toggle()});cn(As);const Ld="dropdown",nE="bs.dropdown",Xr=`.${nE}`,mu=".data-api",rE="Escape",kd="Tab",iE="ArrowUp",$d="ArrowDown",sE=2,oE=`hide${Xr}`,aE=`hidden${Xr}`,lE=`show${Xr}`,uE=`shown${Xr}`,Yf=`click${Xr}${mu}`,Gf=`keydown${Xr}${mu}`,cE=`keyup${Xr}${mu}`,Oi="show",dE="dropup",fE="dropend",hE="dropstart",pE="dropup-center",_E="dropdown-center",Kr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',vE=`${Kr}.${Oi}`,zo=".dropdown-menu",gE=".navbar",mE=".navbar-nav",bE=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",yE=ln()?"top-end":"top-start",EE=ln()?"top-start":"top-end",wE=ln()?"bottom-end":"bottom-start",AE=ln()?"bottom-start":"bottom-end",TE=ln()?"left-start":"right-start",xE=ln()?"right-start":"left-start",CE="top",SE="bottom",OE={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},IE={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Pn extends wn{constructor(n,i){super(n,i),this._popper=null,this._parent=this._element.parentNode,this._menu=se.next(this._element,zo)[0]||se.prev(this._element,zo)[0]||se.findOne(zo,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return OE}static get DefaultType(){return IE}static get NAME(){return Ld}toggle(){return this._isShown()?this.hide():this.show()}show(){if(wr(this._element)||this._isShown())return;const n={relatedTarget:this._element};if(!$.trigger(this._element,lE,n).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(mE))for(const d of[].concat(...document.body.children))$.on(d,"mouseover",Xo);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Oi),this._element.classList.add(Oi),$.trigger(this._element,uE,n)}}hide(){if(wr(this._element)||!this._isShown())return;const n={relatedTarget:this._element};this._completeHide(n)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(n){if(!$.trigger(this._element,oE,n).defaultPrevented){if("ontouchstart"in document.documentElement)for(const d of[].concat(...document.body.children))$.off(d,"mouseover",Xo);this._popper&&this._popper.destroy(),this._menu.classList.remove(Oi),this._element.classList.remove(Oi),this._element.setAttribute("aria-expanded","false"),nr.removeDataAttribute(this._menu,"popper"),$.trigger(this._element,aE,n)}}_getConfig(n){if(n=super._getConfig(n),typeof n.reference=="object"&&!tr(n.reference)&&typeof n.reference.getBoundingClientRect!="function")throw new TypeError(`${Ld.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return n}_createPopper(){if(typeof If>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let n=this._element;this._config.reference==="parent"?n=this._parent:tr(this._config.reference)?n=Er(this._config.reference):typeof this._config.reference=="object"&&(n=this._config.reference);const i=this._getPopperConfig();this._popper=_u(n,this._menu,i)}_isShown(){return this._menu.classList.contains(Oi)}_getPlacement(){const n=this._parent;if(n.classList.contains(fE))return TE;if(n.classList.contains(hE))return xE;if(n.classList.contains(pE))return CE;if(n.classList.contains(_E))return SE;const i=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return n.classList.contains(dE)?i?EE:yE:i?AE:wE}_detectNavbar(){return this._element.closest(gE)!==null}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(i=>Number.parseInt(i,10)):typeof n=="function"?i=>n(i,this._element):n}_getPopperConfig(){const n={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(nr.setDataAttribute(this._menu,"popper","static"),n.modifiers=[{name:"applyStyles",enabled:!1}]),{...n,...Ft(this._config.popperConfig,[void 0,n])}}_selectMenuItem({key:n,target:i}){const d=se.find(bE,this._menu).filter(p=>Fi(p));d.length&&vu(d,i,n===$d,!d.includes(i)).focus()}static jQueryInterface(n){return this.each(function(){const i=Pn.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof i[n]>"u")throw new TypeError(`No method named "${n}"`);i[n]()}})}static clearMenus(n){if(n.button===sE||n.type==="keyup"&&n.key!==kd)return;const i=se.find(vE);for(const d of i){const p=Pn.getInstance(d);if(!p||p._config.autoClose===!1)continue;const w=n.composedPath(),b=w.includes(p._menu);if(w.includes(p._element)||p._config.autoClose==="inside"&&!b||p._config.autoClose==="outside"&&b||p._menu.contains(n.target)&&(n.type==="keyup"&&n.key===kd||/input|select|option|textarea|form/i.test(n.target.tagName)))continue;const x={relatedTarget:p._element};n.type==="click"&&(x.clickEvent=n),p._completeHide(x)}}static dataApiKeydownHandler(n){const i=/input|textarea/i.test(n.target.tagName),d=n.key===rE,p=[iE,$d].includes(n.key);if(!p&&!d||i&&!d)return;n.preventDefault();const w=this.matches(Kr)?this:se.prev(this,Kr)[0]||se.next(this,Kr)[0]||se.findOne(Kr,n.delegateTarget.parentNode),b=Pn.getOrCreateInstance(w);if(p){n.stopPropagation(),b.show(),b._selectMenuItem(n);return}b._isShown()&&(n.stopPropagation(),b.hide(),w.focus())}}$.on(document,Gf,Kr,Pn.dataApiKeydownHandler);$.on(document,Gf,zo,Pn.dataApiKeydownHandler);$.on(document,Yf,Pn.clearMenus);$.on(document,cE,Pn.clearMenus);$.on(document,Yf,Kr,function(o){o.preventDefault(),Pn.getOrCreateInstance(this).toggle()});cn(Pn);const zf="backdrop",NE="fade",Rd="show",Pd=`mousedown.bs.${zf}`,DE={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},LE={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Qf extends Cs{constructor(n){super(),this._config=this._getConfig(n),this._isAppended=!1,this._element=null}static get Default(){return DE}static get DefaultType(){return LE}static get NAME(){return zf}show(n){if(!this._config.isVisible){Ft(n);return}this._append();const i=this._getElement();this._config.isAnimated&&xs(i),i.classList.add(Rd),this._emulateAnimation(()=>{Ft(n)})}hide(n){if(!this._config.isVisible){Ft(n);return}this._getElement().classList.remove(Rd),this._emulateAnimation(()=>{this.dispose(),Ft(n)})}dispose(){this._isAppended&&($.off(this._element,Pd),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const n=document.createElement("div");n.className=this._config.className,this._config.isAnimated&&n.classList.add(NE),this._element=n}return this._element}_configAfterMerge(n){return n.rootElement=Er(n.rootElement),n}_append(){if(this._isAppended)return;const n=this._getElement();this._config.rootElement.append(n),$.on(n,Pd,()=>{Ft(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(n){$f(n,this._getElement(),this._config.isAnimated)}}const kE="focustrap",$E="bs.focustrap",Zo=`.${$E}`,RE=`focusin${Zo}`,PE=`keydown.tab${Zo}`,ME="Tab",FE="forward",Md="backward",BE={autofocus:!0,trapElement:null},UE={autofocus:"boolean",trapElement:"element"};class Xf extends Cs{constructor(n){super(),this._config=this._getConfig(n),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return BE}static get DefaultType(){return UE}static get NAME(){return kE}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),$.off(document,Zo),$.on(document,RE,n=>this._handleFocusin(n)),$.on(document,PE,n=>this._handleKeydown(n)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,$.off(document,Zo))}_handleFocusin(n){const{trapElement:i}=this._config;if(n.target===document||n.target===i||i.contains(n.target))return;const d=se.focusableChildren(i);d.length===0?i.focus():this._lastTabNavDirection===Md?d[d.length-1].focus():d[0].focus()}_handleKeydown(n){n.key===ME&&(this._lastTabNavDirection=n.shiftKey?Md:FE)}}const Fd=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Bd=".sticky-top",qo="padding-right",Ud="margin-right";class nu{constructor(){this._element=document.body}getWidth(){const n=document.documentElement.clientWidth;return Math.abs(window.innerWidth-n)}hide(){const n=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,qo,i=>i+n),this._setElementAttributes(Fd,qo,i=>i+n),this._setElementAttributes(Bd,Ud,i=>i-n)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,qo),this._resetElementAttributes(Fd,qo),this._resetElementAttributes(Bd,Ud)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(n,i,d){const p=this.getWidth(),w=b=>{if(b!==this._element&&window.innerWidth>b.clientWidth+p)return;this._saveInitialAttribute(b,i);const x=window.getComputedStyle(b).getPropertyValue(i);b.style.setProperty(i,`${d(Number.parseFloat(x))}px`)};this._applyManipulationCallback(n,w)}_saveInitialAttribute(n,i){const d=n.style.getPropertyValue(i);d&&nr.setDataAttribute(n,i,d)}_resetElementAttributes(n,i){const d=p=>{const w=nr.getDataAttribute(p,i);if(w===null){p.style.removeProperty(i);return}nr.removeDataAttribute(p,i),p.style.setProperty(i,w)};this._applyManipulationCallback(n,d)}_applyManipulationCallback(n,i){if(tr(n)){i(n);return}for(const d of se.find(n,this._element))i(d)}}const WE="modal",qE="bs.modal",un=`.${qE}`,VE=".data-api",HE="Escape",KE=`hide${un}`,YE=`hidePrevented${un}`,jf=`hidden${un}`,Zf=`show${un}`,GE=`shown${un}`,zE=`resize${un}`,QE=`click.dismiss${un}`,XE=`mousedown.dismiss${un}`,jE=`keydown.dismiss${un}`,ZE=`click${un}${VE}`,Wd="modal-open",JE="fade",qd="show",Wl="modal-static",ew=".modal.show",tw=".modal-dialog",nw=".modal-body",rw='[data-bs-toggle="modal"]',iw={backdrop:!0,focus:!0,keyboard:!0},sw={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ri extends wn{constructor(n,i){super(n,i),this._dialog=se.findOne(tw,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new nu,this._addEventListeners()}static get Default(){return iw}static get DefaultType(){return sw}static get NAME(){return WE}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){this._isShown||this._isTransitioning||$.trigger(this._element,Zf,{relatedTarget:n}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Wd),this._adjustDialog(),this._backdrop.show(()=>this._showElement(n)))}hide(){!this._isShown||this._isTransitioning||$.trigger(this._element,KE).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(qd),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){$.off(window,un),$.off(this._dialog,un),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Qf({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Xf({trapElement:this._element})}_showElement(n){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const i=se.findOne(nw,this._dialog);i&&(i.scrollTop=0),xs(this._element),this._element.classList.add(qd);const d=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,$.trigger(this._element,GE,{relatedTarget:n})};this._queueCallback(d,this._dialog,this._isAnimated())}_addEventListeners(){$.on(this._element,jE,n=>{if(n.key===HE){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),$.on(window,zE,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),$.on(this._element,XE,n=>{$.one(this._element,QE,i=>{if(!(this._element!==n.target||this._element!==i.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Wd),this._resetAdjustments(),this._scrollBar.reset(),$.trigger(this._element,jf)})}_isAnimated(){return this._element.classList.contains(JE)}_triggerBackdropTransition(){if($.trigger(this._element,YE).defaultPrevented)return;const i=this._element.scrollHeight>document.documentElement.clientHeight,d=this._element.style.overflowY;d==="hidden"||this._element.classList.contains(Wl)||(i||(this._element.style.overflowY="hidden"),this._element.classList.add(Wl),this._queueCallback(()=>{this._element.classList.remove(Wl),this._queueCallback(()=>{this._element.style.overflowY=d},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const n=this._element.scrollHeight>document.documentElement.clientHeight,i=this._scrollBar.getWidth(),d=i>0;if(d&&!n){const p=ln()?"paddingLeft":"paddingRight";this._element.style[p]=`${i}px`}if(!d&&n){const p=ln()?"paddingRight":"paddingLeft";this._element.style[p]=`${i}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(n,i){return this.each(function(){const d=Ri.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof d[n]>"u")throw new TypeError(`No method named "${n}"`);d[n](i)}})}}$.on(document,ZE,rw,function(o){const n=se.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&o.preventDefault(),$.one(n,Zf,p=>{p.defaultPrevented||$.one(n,jf,()=>{Fi(this)&&this.focus()})});const i=se.findOne(ew);i&&Ri.getInstance(i).hide(),Ri.getOrCreateInstance(n).toggle(this)});na(Ri);cn(Ri);const ow="offcanvas",aw="bs.offcanvas",ir=`.${aw}`,Jf=".data-api",lw=`load${ir}${Jf}`,uw="Escape",Vd="show",Hd="showing",Kd="hiding",cw="offcanvas-backdrop",eh=".offcanvas.show",dw=`show${ir}`,fw=`shown${ir}`,hw=`hide${ir}`,Yd=`hidePrevented${ir}`,th=`hidden${ir}`,pw=`resize${ir}`,_w=`click${ir}${Jf}`,vw=`keydown.dismiss${ir}`,gw='[data-bs-toggle="offcanvas"]',mw={backdrop:!0,keyboard:!0,scroll:!1},bw={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ar extends wn{constructor(n,i){super(n,i),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return mw}static get DefaultType(){return bw}static get NAME(){return ow}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){if(this._isShown||$.trigger(this._element,dw,{relatedTarget:n}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new nu().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Hd);const d=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Vd),this._element.classList.remove(Hd),$.trigger(this._element,fw,{relatedTarget:n})};this._queueCallback(d,this._element,!0)}hide(){if(!this._isShown||$.trigger(this._element,hw).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Kd),this._backdrop.hide();const i=()=>{this._element.classList.remove(Vd,Kd),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new nu().reset(),$.trigger(this._element,th)};this._queueCallback(i,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const n=()=>{if(this._config.backdrop==="static"){$.trigger(this._element,Yd);return}this.hide()},i=!!this._config.backdrop;return new Qf({className:cw,isVisible:i,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:i?n:null})}_initializeFocusTrap(){return new Xf({trapElement:this._element})}_addEventListeners(){$.on(this._element,vw,n=>{if(n.key===uw){if(this._config.keyboard){this.hide();return}$.trigger(this._element,Yd)}})}static jQueryInterface(n){return this.each(function(){const i=Ar.getOrCreateInstance(this,n);if(typeof n=="string"){if(i[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);i[n](this)}})}}$.on(document,_w,gw,function(o){const n=se.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),wr(this))return;$.one(n,th,()=>{Fi(this)&&this.focus()});const i=se.findOne(eh);i&&i!==n&&Ar.getInstance(i).hide(),Ar.getOrCreateInstance(n).toggle(this)});$.on(window,lw,()=>{for(const o of se.find(eh))Ar.getOrCreateInstance(o).show()});$.on(window,pw,()=>{for(const o of se.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(o).position!=="fixed"&&Ar.getOrCreateInstance(o).hide()});na(Ar);cn(Ar);const yw=/^aria-[\w-]*$/i,nh={"*":["class","dir","id","lang","role",yw],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Ew=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ww=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Aw=(o,n)=>{const i=o.nodeName.toLowerCase();return n.includes(i)?Ew.has(i)?!!ww.test(o.nodeValue):!0:n.filter(d=>d instanceof RegExp).some(d=>d.test(i))};function Tw(o,n,i){if(!o.length)return o;if(i&&typeof i=="function")return i(o);const p=new window.DOMParser().parseFromString(o,"text/html"),w=[].concat(...p.body.querySelectorAll("*"));for(const b of w){const x=b.nodeName.toLowerCase();if(!Object.keys(n).includes(x)){b.remove();continue}const S=[].concat(...b.attributes),B=[].concat(n["*"]||[],n[x]||[]);for(const D of S)Aw(D,B)||b.removeAttribute(D.nodeName)}return p.body.innerHTML}const xw="TemplateFactory",Cw={allowList:nh,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Sw={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Ow={entry:"(string|element|function|null)",selector:"(string|element)"};class Iw extends Cs{constructor(n){super(),this._config=this._getConfig(n)}static get Default(){return Cw}static get DefaultType(){return Sw}static get NAME(){return xw}getContent(){return Object.values(this._config.content).map(n=>this._resolvePossibleFunction(n)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(n){return this._checkContent(n),this._config.content={...this._config.content,...n},this}toHtml(){const n=document.createElement("div");n.innerHTML=this._maybeSanitize(this._config.template);for(const[p,w]of Object.entries(this._config.content))this._setContent(n,w,p);const i=n.children[0],d=this._resolvePossibleFunction(this._config.extraClass);return d&&i.classList.add(...d.split(" ")),i}_typeCheckConfig(n){super._typeCheckConfig(n),this._checkContent(n.content)}_checkContent(n){for(const[i,d]of Object.entries(n))super._typeCheckConfig({selector:i,entry:d},Ow)}_setContent(n,i,d){const p=se.findOne(d,n);if(p){if(i=this._resolvePossibleFunction(i),!i){p.remove();return}if(tr(i)){this._putElementInTemplate(Er(i),p);return}if(this._config.html){p.innerHTML=this._maybeSanitize(i);return}p.textContent=i}}_maybeSanitize(n){return this._config.sanitize?Tw(n,this._config.allowList,this._config.sanitizeFn):n}_resolvePossibleFunction(n){return Ft(n,[void 0,this])}_putElementInTemplate(n,i){if(this._config.html){i.innerHTML="",i.append(n);return}i.textContent=n.textContent}}const Nw="tooltip",Dw=new Set(["sanitize","allowList","sanitizeFn"]),ql="fade",Lw="modal",Vo="show",kw=".tooltip-inner",Gd=`.${Lw}`,zd="hide.bs.modal",bs="hover",Vl="focus",Hl="click",$w="manual",Rw="hide",Pw="hidden",Mw="show",Fw="shown",Bw="inserted",Uw="click",Ww="focusin",qw="focusout",Vw="mouseenter",Hw="mouseleave",Kw={AUTO:"auto",TOP:"top",RIGHT:ln()?"left":"right",BOTTOM:"bottom",LEFT:ln()?"right":"left"},Yw={allowList:nh,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Gw={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ui extends wn{constructor(n,i){if(typeof If>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(n,i),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Yw}static get DefaultType(){return Gw}static get NAME(){return Nw}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),$.off(this._element.closest(Gd),zd,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const n=$.trigger(this._element,this.constructor.eventName(Mw)),d=(Lf(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(n.defaultPrevented||!d)return;this._disposePopper();const p=this._getTipElement();this._element.setAttribute("aria-describedby",p.getAttribute("id"));const{container:w}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(w.append(p),$.trigger(this._element,this.constructor.eventName(Bw))),this._popper=this._createPopper(p),p.classList.add(Vo),"ontouchstart"in document.documentElement)for(const x of[].concat(...document.body.children))$.on(x,"mouseover",Xo);const b=()=>{$.trigger(this._element,this.constructor.eventName(Fw)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(b,this.tip,this._isAnimated())}hide(){if(!this._isShown()||$.trigger(this._element,this.constructor.eventName(Rw)).defaultPrevented)return;if(this._getTipElement().classList.remove(Vo),"ontouchstart"in document.documentElement)for(const p of[].concat(...document.body.children))$.off(p,"mouseover",Xo);this._activeTrigger[Hl]=!1,this._activeTrigger[Vl]=!1,this._activeTrigger[bs]=!1,this._isHovered=null;const d=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),$.trigger(this._element,this.constructor.eventName(Pw)))};this._queueCallback(d,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(n){const i=this._getTemplateFactory(n).toHtml();if(!i)return null;i.classList.remove(ql,Vo),i.classList.add(`bs-${this.constructor.NAME}-auto`);const d=$y(this.constructor.NAME).toString();return i.setAttribute("id",d),this._isAnimated()&&i.classList.add(ql),i}setContent(n){this._newContent=n,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(n){return this._templateFactory?this._templateFactory.changeContent(n):this._templateFactory=new Iw({...this._config,content:n,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[kw]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(n){return this.constructor.getOrCreateInstance(n.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ql)}_isShown(){return this.tip&&this.tip.classList.contains(Vo)}_createPopper(n){const i=Ft(this._config.placement,[this,n,this._element]),d=Kw[i.toUpperCase()];return _u(this._element,n,this._getPopperConfig(d))}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(i=>Number.parseInt(i,10)):typeof n=="function"?i=>n(i,this._element):n}_resolvePossibleFunction(n){return Ft(n,[this._element,this._element])}_getPopperConfig(n){const i={placement:n,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:d=>{this._getTipElement().setAttribute("data-popper-placement",d.state.placement)}}]};return{...i,...Ft(this._config.popperConfig,[void 0,i])}}_setListeners(){const n=this._config.trigger.split(" ");for(const i of n)if(i==="click")$.on(this._element,this.constructor.eventName(Uw),this._config.selector,d=>{const p=this._initializeOnDelegatedTarget(d);p._activeTrigger[Hl]=!(p._isShown()&&p._activeTrigger[Hl]),p.toggle()});else if(i!==$w){const d=i===bs?this.constructor.eventName(Vw):this.constructor.eventName(Ww),p=i===bs?this.constructor.eventName(Hw):this.constructor.eventName(qw);$.on(this._element,d,this._config.selector,w=>{const b=this._initializeOnDelegatedTarget(w);b._activeTrigger[w.type==="focusin"?Vl:bs]=!0,b._enter()}),$.on(this._element,p,this._config.selector,w=>{const b=this._initializeOnDelegatedTarget(w);b._activeTrigger[w.type==="focusout"?Vl:bs]=b._element.contains(w.relatedTarget),b._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},$.on(this._element.closest(Gd),zd,this._hideModalHandler)}_fixTitle(){const n=this._element.getAttribute("title");n&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",n),this._element.setAttribute("data-bs-original-title",n),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(n,i){clearTimeout(this._timeout),this._timeout=setTimeout(n,i)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(n){const i=nr.getDataAttributes(this._element);for(const d of Object.keys(i))Dw.has(d)&&delete i[d];return n={...i,...typeof n=="object"&&n?n:{}},n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n.container=n.container===!1?document.body:Er(n.container),typeof n.delay=="number"&&(n.delay={show:n.delay,hide:n.delay}),typeof n.title=="number"&&(n.title=n.title.toString()),typeof n.content=="number"&&(n.content=n.content.toString()),n}_getDelegateConfig(){const n={};for(const[i,d]of Object.entries(this._config))this.constructor.Default[i]!==d&&(n[i]=d);return n.selector=!1,n.trigger="manual",n}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(n){return this.each(function(){const i=Ui.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof i[n]>"u")throw new TypeError(`No method named "${n}"`);i[n]()}})}}cn(Ui);const zw="popover",Qw=".popover-header",Xw=".popover-body",jw={...Ui.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Zw={...Ui.DefaultType,content:"(null|string|element|function)"};class sa extends Ui{static get Default(){return jw}static get DefaultType(){return Zw}static get NAME(){return zw}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Qw]:this._getTitle(),[Xw]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(n){return this.each(function(){const i=sa.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof i[n]>"u")throw new TypeError(`No method named "${n}"`);i[n]()}})}}cn(sa);const Jw="scrollspy",e1="bs.scrollspy",bu=`.${e1}`,t1=".data-api",n1=`activate${bu}`,Qd=`click${bu}`,r1=`load${bu}${t1}`,i1="dropdown-item",xi="active",s1='[data-bs-spy="scroll"]',Kl="[href]",o1=".nav, .list-group",Xd=".nav-link",a1=".nav-item",l1=".list-group-item",u1=`${Xd}, ${a1} > ${Xd}, ${l1}`,c1=".dropdown",d1=".dropdown-toggle",f1={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},h1={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class oa extends wn{constructor(n,i){super(n,i),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return f1}static get DefaultType(){return h1}static get NAME(){return Jw}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const n of this._observableSections.values())this._observer.observe(n)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(n){return n.target=Er(n.target)||document.body,n.rootMargin=n.offset?`${n.offset}px 0px -30%`:n.rootMargin,typeof n.threshold=="string"&&(n.threshold=n.threshold.split(",").map(i=>Number.parseFloat(i))),n}_maybeEnableSmoothScroll(){this._config.smoothScroll&&($.off(this._config.target,Qd),$.on(this._config.target,Qd,Kl,n=>{const i=this._observableSections.get(n.target.hash);if(i){n.preventDefault();const d=this._rootElement||window,p=i.offsetTop-this._element.offsetTop;if(d.scrollTo){d.scrollTo({top:p,behavior:"smooth"});return}d.scrollTop=p}}))}_getNewObserver(){const n={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(i=>this._observerCallback(i),n)}_observerCallback(n){const i=b=>this._targetLinks.get(`#${b.target.id}`),d=b=>{this._previousScrollData.visibleEntryTop=b.target.offsetTop,this._process(i(b))},p=(this._rootElement||document.documentElement).scrollTop,w=p>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=p;for(const b of n){if(!b.isIntersecting){this._activeTarget=null,this._clearActiveClass(i(b));continue}const x=b.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(w&&x){if(d(b),!p)return;continue}!w&&!x&&d(b)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const n=se.find(Kl,this._config.target);for(const i of n){if(!i.hash||wr(i))continue;const d=se.findOne(decodeURI(i.hash),this._element);Fi(d)&&(this._targetLinks.set(decodeURI(i.hash),i),this._observableSections.set(i.hash,d))}}_process(n){this._activeTarget!==n&&(this._clearActiveClass(this._config.target),this._activeTarget=n,n.classList.add(xi),this._activateParents(n),$.trigger(this._element,n1,{relatedTarget:n}))}_activateParents(n){if(n.classList.contains(i1)){se.findOne(d1,n.closest(c1)).classList.add(xi);return}for(const i of se.parents(n,o1))for(const d of se.prev(i,u1))d.classList.add(xi)}_clearActiveClass(n){n.classList.remove(xi);const i=se.find(`${Kl}.${xi}`,n);for(const d of i)d.classList.remove(xi)}static jQueryInterface(n){return this.each(function(){const i=oa.getOrCreateInstance(this,n);if(typeof n=="string"){if(i[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);i[n]()}})}}$.on(window,r1,()=>{for(const o of se.find(s1))oa.getOrCreateInstance(o)});cn(oa);const p1="tab",_1="bs.tab",jr=`.${_1}`,v1=`hide${jr}`,g1=`hidden${jr}`,m1=`show${jr}`,b1=`shown${jr}`,y1=`click${jr}`,E1=`keydown${jr}`,w1=`load${jr}`,A1="ArrowLeft",jd="ArrowRight",T1="ArrowUp",Zd="ArrowDown",Yl="Home",Jd="End",Yr="active",ef="fade",Gl="show",x1="dropdown",rh=".dropdown-toggle",C1=".dropdown-menu",zl=`:not(${rh})`,S1='.list-group, .nav, [role="tablist"]',O1=".nav-item, .list-group-item",I1=`.nav-link${zl}, .list-group-item${zl}, [role="tab"]${zl}`,ih='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ql=`${I1}, ${ih}`,N1=`.${Yr}[data-bs-toggle="tab"], .${Yr}[data-bs-toggle="pill"], .${Yr}[data-bs-toggle="list"]`;class Pi extends wn{constructor(n){super(n),this._parent=this._element.closest(S1),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),$.on(this._element,E1,i=>this._keydown(i)))}static get NAME(){return p1}show(){const n=this._element;if(this._elemIsActive(n))return;const i=this._getActiveElem(),d=i?$.trigger(i,v1,{relatedTarget:n}):null;$.trigger(n,m1,{relatedTarget:i}).defaultPrevented||d&&d.defaultPrevented||(this._deactivate(i,n),this._activate(n,i))}_activate(n,i){if(!n)return;n.classList.add(Yr),this._activate(se.getElementFromSelector(n));const d=()=>{if(n.getAttribute("role")!=="tab"){n.classList.add(Gl);return}n.removeAttribute("tabindex"),n.setAttribute("aria-selected",!0),this._toggleDropDown(n,!0),$.trigger(n,b1,{relatedTarget:i})};this._queueCallback(d,n,n.classList.contains(ef))}_deactivate(n,i){if(!n)return;n.classList.remove(Yr),n.blur(),this._deactivate(se.getElementFromSelector(n));const d=()=>{if(n.getAttribute("role")!=="tab"){n.classList.remove(Gl);return}n.setAttribute("aria-selected",!1),n.setAttribute("tabindex","-1"),this._toggleDropDown(n,!1),$.trigger(n,g1,{relatedTarget:i})};this._queueCallback(d,n,n.classList.contains(ef))}_keydown(n){if(![A1,jd,T1,Zd,Yl,Jd].includes(n.key))return;n.stopPropagation(),n.preventDefault();const i=this._getChildren().filter(p=>!wr(p));let d;if([Yl,Jd].includes(n.key))d=i[n.key===Yl?0:i.length-1];else{const p=[jd,Zd].includes(n.key);d=vu(i,n.target,p,!0)}d&&(d.focus({preventScroll:!0}),Pi.getOrCreateInstance(d).show())}_getChildren(){return se.find(Ql,this._parent)}_getActiveElem(){return this._getChildren().find(n=>this._elemIsActive(n))||null}_setInitialAttributes(n,i){this._setAttributeIfNotExists(n,"role","tablist");for(const d of i)this._setInitialAttributesOnChild(d)}_setInitialAttributesOnChild(n){n=this._getInnerElement(n);const i=this._elemIsActive(n),d=this._getOuterElement(n);n.setAttribute("aria-selected",i),d!==n&&this._setAttributeIfNotExists(d,"role","presentation"),i||n.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(n,"role","tab"),this._setInitialAttributesOnTargetPanel(n)}_setInitialAttributesOnTargetPanel(n){const i=se.getElementFromSelector(n);i&&(this._setAttributeIfNotExists(i,"role","tabpanel"),n.id&&this._setAttributeIfNotExists(i,"aria-labelledby",`${n.id}`))}_toggleDropDown(n,i){const d=this._getOuterElement(n);if(!d.classList.contains(x1))return;const p=(w,b)=>{const x=se.findOne(w,d);x&&x.classList.toggle(b,i)};p(rh,Yr),p(C1,Gl),d.setAttribute("aria-expanded",i)}_setAttributeIfNotExists(n,i,d){n.hasAttribute(i)||n.setAttribute(i,d)}_elemIsActive(n){return n.classList.contains(Yr)}_getInnerElement(n){return n.matches(Ql)?n:se.findOne(Ql,n)}_getOuterElement(n){return n.closest(O1)||n}static jQueryInterface(n){return this.each(function(){const i=Pi.getOrCreateInstance(this);if(typeof n=="string"){if(i[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);i[n]()}})}}$.on(document,y1,ih,function(o){["A","AREA"].includes(this.tagName)&&o.preventDefault(),!wr(this)&&Pi.getOrCreateInstance(this).show()});$.on(window,w1,()=>{for(const o of se.find(N1))Pi.getOrCreateInstance(o)});cn(Pi);const D1="toast",L1="bs.toast",Cr=`.${L1}`,k1=`mouseover${Cr}`,$1=`mouseout${Cr}`,R1=`focusin${Cr}`,P1=`focusout${Cr}`,M1=`hide${Cr}`,F1=`hidden${Cr}`,B1=`show${Cr}`,U1=`shown${Cr}`,W1="fade",tf="hide",Ho="show",Ko="showing",q1={animation:"boolean",autohide:"boolean",delay:"number"},V1={animation:!0,autohide:!0,delay:5e3};class aa extends wn{constructor(n,i){super(n,i),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return V1}static get DefaultType(){return q1}static get NAME(){return D1}show(){if($.trigger(this._element,B1).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(W1);const i=()=>{this._element.classList.remove(Ko),$.trigger(this._element,U1),this._maybeScheduleHide()};this._element.classList.remove(tf),xs(this._element),this._element.classList.add(Ho,Ko),this._queueCallback(i,this._element,this._config.animation)}hide(){if(!this.isShown()||$.trigger(this._element,M1).defaultPrevented)return;const i=()=>{this._element.classList.add(tf),this._element.classList.remove(Ko,Ho),$.trigger(this._element,F1)};this._element.classList.add(Ko),this._queueCallback(i,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ho),super.dispose()}isShown(){return this._element.classList.contains(Ho)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(n,i){switch(n.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=i;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=i;break}}if(i){this._clearTimeout();return}const d=n.relatedTarget;this._element===d||this._element.contains(d)||this._maybeScheduleHide()}_setListeners(){$.on(this._element,k1,n=>this._onInteraction(n,!0)),$.on(this._element,$1,n=>this._onInteraction(n,!1)),$.on(this._element,R1,n=>this._onInteraction(n,!0)),$.on(this._element,P1,n=>this._onInteraction(n,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(n){return this.each(function(){const i=aa.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof i[n]>"u")throw new TypeError(`No method named "${n}"`);i[n](this)}})}}na(aa);cn(aa);function H1(o){return{broadcastCartUpdate:d=>{axios.post("/api/pos/broadcast-cart",{terminal_id:o,cart:d}).catch(p=>{console.error("Failed to broadcast cart update:",p)})},broadcastUIUpdate:async d=>{try{await axios.post("/api/pos/broadcast-ui",{terminal_id:o,ui:d})}catch(p){console.error("Failed to broadcast UI update:",p)}}}}var ys={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var K1=ys.exports,nf;function Y1(){return nf||(nf=1,(function(o,n){(function(){var i,d="4.17.21",p=200,w="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",b="Expected a function",x="Invalid `variable` option passed into `_.template`",S="__lodash_hash_undefined__",B=500,D="__lodash_placeholder__",z=1,te=2,ne=4,ge=1,J=2,ee=1,N=2,U=4,ie=8,F=16,k=32,H=64,ue=128,xe=256,Ne=512,Me=30,et="...",rt=800,it=16,Qt=1,qe=2,lt=3,We=1/0,Ye=9007199254740991,dn=17976931348623157e292,fn=NaN,_t=4294967295,Bt=_t-1,Fn=_t>>>1,St=[["ary",ue],["bind",ee],["bindKey",N],["curry",ie],["curryRight",F],["flip",Ne],["partial",k],["partialRight",H],["rearg",xe]],we="[object Arguments]",tt="[object Array]",Ot="[object AsyncFunction]",Qe="[object Boolean]",hn="[object Date]",An="[object DOMException]",Tn="[object Error]",It="[object Function]",Sr="[object GeneratorFunction]",Et="[object Map]",Xt="[object Number]",Bn="[object Null]",nt="[object Object]",Zr="[object Promise]",Wi="[object Proxy]",Ue="[object RegExp]",ut="[object Set]",xn="[object String]",Un="[object Symbol]",G="[object Undefined]",Cn="[object WeakMap]",Jr="[object WeakSet]",Sn="[object ArrayBuffer]",Xe="[object DataView]",On="[object Float32Array]",In="[object Float64Array]",ei="[object Int8Array]",Q="[object Int16Array]",je="[object Int32Array]",Or="[object Uint8Array]",Nn="[object Uint8ClampedArray]",pn="[object Uint16Array]",_n="[object Uint32Array]",la=/\b__p \+= '';/g,ua=/\b(__p \+=) '' \+/g,Is=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ns=/&(?:amp|lt|gt|quot|#39);/g,Ds=/[&<>"']/g,ht=RegExp(Ns.source),Ls=RegExp(Ds.source),sr=/<%-([\s\S]+?)%>/g,or=/<%([\s\S]+?)%>/g,ti=/<%=([\s\S]+?)%>/g,Ir=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ni=/^\w*$/,qi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vi=/[\\^$.*+?()[\]{}|]/g,ca=RegExp(Vi.source),ri=/^\s+/,ks=/\s/,$s=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,da=/\{\n\/\* \[wrapped with (.+)\] \*/,fa=/,? & /,Nt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ar=/[()=,{}\[\]\/\s]/,Rs=/\\(\\)?/g,vt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,lr=/\w*$/,ha=/^[-+]0x[0-9a-f]+$/i,pa=/^0b[01]+$/i,Ps=/^\[object .+?Constructor\]$/,Wn=/^0o[0-7]+$/i,_a=/^(?:0|[1-9]\d*)$/,ii=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ur=/($^)/,va=/['\n\r\u2028\u2029\\]/g,si="\\ud800-\\udfff",jt="\\u0300-\\u036f",Ms="\\ufe20-\\ufe2f",ga="\\u20d0-\\u20ff",Hi=jt+Ms+ga,Nr="\\u2700-\\u27bf",Fs="a-z\\xdf-\\xf6\\xf8-\\xff",oi="\\xac\\xb1\\xd7\\xf7",Ki="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Yi="\\u2000-\\u206f",ma=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Dr="A-Z\\xc0-\\xd6\\xd8-\\xde",Lr="\\ufe0e\\ufe0f",ai=oi+Ki+Yi+ma,kr="['’]",li="["+si+"]",$r="["+ai+"]",De="["+Hi+"]",Bs="\\d+",Us="["+Nr+"]",Ws="["+Fs+"]",qs="[^"+si+ai+Bs+Nr+Fs+Dr+"]",Gi="\\ud83c[\\udffb-\\udfff]",cr="(?:"+De+"|"+Gi+")",Vs="[^"+si+"]",zi="(?:\\ud83c[\\udde6-\\uddff]){2}",Dn="[\\ud800-\\udbff][\\udc00-\\udfff]",Zt="["+Dr+"]",dr="\\u200d",Hs="(?:"+Ws+"|"+qs+")",ba="(?:"+Zt+"|"+qs+")",ui="(?:"+kr+"(?:d|ll|m|re|s|t|ve))?",Qi="(?:"+kr+"(?:D|LL|M|RE|S|T|VE))?",Ks=cr+"?",Ys="["+Lr+"]?",Ut="(?:"+dr+"(?:"+[Vs,zi,Dn].join("|")+")"+Ys+Ks+")*",Xi="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ve="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",vn=Ys+Ks+Ut,fr="(?:"+[Us,zi,Dn].join("|")+")"+vn,ya="(?:"+[Vs+De+"?",De,zi,Dn,li].join("|")+")",Ea=RegExp(kr,"g"),wa=RegExp(De,"g"),ji=RegExp(Gi+"(?="+Gi+")|"+ya+vn,"g"),Gs=RegExp([Zt+"?"+Ws+"+"+ui+"(?="+[$r,Zt,"$"].join("|")+")",ba+"+"+Qi+"(?="+[$r,Zt+Hs,"$"].join("|")+")",Zt+"?"+Hs+"+"+ui,Zt+"+"+Qi,Ve,Xi,Bs,fr].join("|"),"g"),Aa=RegExp("["+dr+si+Hi+Lr+"]"),Ta=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,zs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Rr=-1,Pe={};Pe[On]=Pe[In]=Pe[ei]=Pe[Q]=Pe[je]=Pe[Or]=Pe[Nn]=Pe[pn]=Pe[_n]=!0,Pe[we]=Pe[tt]=Pe[Sn]=Pe[Qe]=Pe[Xe]=Pe[hn]=Pe[Tn]=Pe[It]=Pe[Et]=Pe[Xt]=Pe[nt]=Pe[Ue]=Pe[ut]=Pe[xn]=Pe[Cn]=!1;var Le={};Le[we]=Le[tt]=Le[Sn]=Le[Xe]=Le[Qe]=Le[hn]=Le[On]=Le[In]=Le[ei]=Le[Q]=Le[je]=Le[Et]=Le[Xt]=Le[nt]=Le[Ue]=Le[ut]=Le[xn]=Le[Un]=Le[Or]=Le[Nn]=Le[pn]=Le[_n]=!0,Le[Tn]=Le[It]=Le[Cn]=!1;var Qs={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},xa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xs={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ca={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Sa=parseFloat,Oa=parseInt,Dt=typeof Mo=="object"&&Mo&&Mo.Object===Object&&Mo,qn=typeof self=="object"&&self&&self.Object===Object&&self,Fe=Dt||qn||Function("return this")(),Zi=n&&!n.nodeType&&n,Lt=Zi&&!0&&o&&!o.nodeType&&o,js=Lt&&Lt.exports===Zi,Ji=js&&Dt.process,a=(function(){try{var y=Lt&&Lt.require&&Lt.require("util").types;return y||Ji&&Ji.binding&&Ji.binding("util")}catch{}})(),u=a&&a.isArrayBuffer,c=a&&a.isDate,g=a&&a.isMap,T=a&&a.isRegExp,M=a&&a.isSet,Y=a&&a.isTypedArray;function X(y,C,A){switch(A.length){case 0:return y.call(C);case 1:return y.call(C,A[0]);case 2:return y.call(C,A[0],A[1]);case 3:return y.call(C,A[0],A[1],A[2])}return y.apply(C,A)}function ke(y,C,A,K){for(var de=-1,Ce=y==null?0:y.length;++de<Ce;){var ot=y[de];C(K,ot,A(ot),y)}return K}function q(y,C){for(var A=-1,K=y==null?0:y.length;++A<K&&C(y[A],A,y)!==!1;);return y}function $e(y,C){for(var A=y==null?0:y.length;A--&&C(y[A],A,y)!==!1;);return y}function Se(y,C){for(var A=-1,K=y==null?0:y.length;++A<K;)if(!C(y[A],A,y))return!1;return!0}function Oe(y,C){for(var A=-1,K=y==null?0:y.length,de=0,Ce=[];++A<K;){var ot=y[A];C(ot,A,y)&&(Ce[de++]=ot)}return Ce}function Ge(y,C){var A=y==null?0:y.length;return!!A&&ci(y,C,0)>-1}function ct(y,C,A){for(var K=-1,de=y==null?0:y.length;++K<de;)if(A(C,y[K]))return!0;return!1}function re(y,C){for(var A=-1,K=y==null?0:y.length,de=Array(K);++A<K;)de[A]=C(y[A],A,y);return de}function dt(y,C){for(var A=-1,K=C.length,de=y.length;++A<K;)y[de+A]=C[A];return y}function st(y,C,A,K){var de=-1,Ce=y==null?0:y.length;for(K&&Ce&&(A=y[++de]);++de<Ce;)A=C(A,y[de],de,y);return A}function Pr(y,C,A,K){var de=y==null?0:y.length;for(K&&de&&(A=y[--de]);de--;)A=C(A,y[de],de,y);return A}function Vn(y,C){for(var A=-1,K=y==null?0:y.length;++A<K;)if(C(y[A],A,y))return!0;return!1}var es=Da("length");function Ia(y){return y.split("")}function Na(y){return y.match(Nt)||[]}function yu(y,C,A){var K;return A(y,function(de,Ce,ot){if(C(de,Ce,ot))return K=Ce,!1}),K}function Zs(y,C,A,K){for(var de=y.length,Ce=A+(K?1:-1);K?Ce--:++Ce<de;)if(C(y[Ce],Ce,y))return Ce;return-1}function ci(y,C,A){return C===C?vh(y,C,A):Zs(y,Eu,A)}function sh(y,C,A,K){for(var de=A-1,Ce=y.length;++de<Ce;)if(K(y[de],C))return de;return-1}function Eu(y){return y!==y}function wu(y,C){var A=y==null?0:y.length;return A?ka(y,C)/A:fn}function Da(y){return function(C){return C==null?i:C[y]}}function La(y){return function(C){return y==null?i:y[C]}}function Au(y,C,A,K,de){return de(y,function(Ce,ot,Be){A=K?(K=!1,Ce):C(A,Ce,ot,Be)}),A}function oh(y,C){var A=y.length;for(y.sort(C);A--;)y[A]=y[A].value;return y}function ka(y,C){for(var A,K=-1,de=y.length;++K<de;){var Ce=C(y[K]);Ce!==i&&(A=A===i?Ce:A+Ce)}return A}function $a(y,C){for(var A=-1,K=Array(y);++A<y;)K[A]=C(A);return K}function ah(y,C){return re(C,function(A){return[A,y[A]]})}function Tu(y){return y&&y.slice(0,Ou(y)+1).replace(ri,"")}function Wt(y){return function(C){return y(C)}}function Ra(y,C){return re(C,function(A){return y[A]})}function ts(y,C){return y.has(C)}function xu(y,C){for(var A=-1,K=y.length;++A<K&&ci(C,y[A],0)>-1;);return A}function Cu(y,C){for(var A=y.length;A--&&ci(C,y[A],0)>-1;);return A}function lh(y,C){for(var A=y.length,K=0;A--;)y[A]===C&&++K;return K}var uh=La(Qs),ch=La(xa);function dh(y){return"\\"+Ca[y]}function fh(y,C){return y==null?i:y[C]}function di(y){return Aa.test(y)}function hh(y){return Ta.test(y)}function ph(y){for(var C,A=[];!(C=y.next()).done;)A.push(C.value);return A}function Pa(y){var C=-1,A=Array(y.size);return y.forEach(function(K,de){A[++C]=[de,K]}),A}function Su(y,C){return function(A){return y(C(A))}}function hr(y,C){for(var A=-1,K=y.length,de=0,Ce=[];++A<K;){var ot=y[A];(ot===C||ot===D)&&(y[A]=D,Ce[de++]=A)}return Ce}function Js(y){var C=-1,A=Array(y.size);return y.forEach(function(K){A[++C]=K}),A}function _h(y){var C=-1,A=Array(y.size);return y.forEach(function(K){A[++C]=[K,K]}),A}function vh(y,C,A){for(var K=A-1,de=y.length;++K<de;)if(y[K]===C)return K;return-1}function gh(y,C,A){for(var K=A+1;K--;)if(y[K]===C)return K;return K}function fi(y){return di(y)?bh(y):es(y)}function gn(y){return di(y)?yh(y):Ia(y)}function Ou(y){for(var C=y.length;C--&&ks.test(y.charAt(C)););return C}var mh=La(Xs);function bh(y){for(var C=ji.lastIndex=0;ji.test(y);)++C;return C}function yh(y){return y.match(ji)||[]}function Eh(y){return y.match(Gs)||[]}var wh=(function y(C){C=C==null?Fe:hi.defaults(Fe.Object(),C,hi.pick(Fe,zs));var A=C.Array,K=C.Date,de=C.Error,Ce=C.Function,ot=C.Math,Be=C.Object,Ma=C.RegExp,Ah=C.String,Jt=C.TypeError,eo=A.prototype,Th=Ce.prototype,pi=Be.prototype,to=C["__core-js_shared__"],no=Th.toString,Re=pi.hasOwnProperty,xh=0,Iu=(function(){var e=/[^.]+$/.exec(to&&to.keys&&to.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),ro=pi.toString,Ch=no.call(Be),Sh=Fe._,Oh=Ma("^"+no.call(Re).replace(Vi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),io=js?C.Buffer:i,pr=C.Symbol,so=C.Uint8Array,Nu=io?io.allocUnsafe:i,oo=Su(Be.getPrototypeOf,Be),Du=Be.create,Lu=pi.propertyIsEnumerable,ao=eo.splice,ku=pr?pr.isConcatSpreadable:i,ns=pr?pr.iterator:i,Mr=pr?pr.toStringTag:i,lo=(function(){try{var e=qr(Be,"defineProperty");return e({},"",{}),e}catch{}})(),Ih=C.clearTimeout!==Fe.clearTimeout&&C.clearTimeout,Nh=K&&K.now!==Fe.Date.now&&K.now,Dh=C.setTimeout!==Fe.setTimeout&&C.setTimeout,uo=ot.ceil,co=ot.floor,Fa=Be.getOwnPropertySymbols,Lh=io?io.isBuffer:i,$u=C.isFinite,kh=eo.join,$h=Su(Be.keys,Be),at=ot.max,gt=ot.min,Rh=K.now,Ph=C.parseInt,Ru=ot.random,Mh=eo.reverse,Ba=qr(C,"DataView"),rs=qr(C,"Map"),Ua=qr(C,"Promise"),_i=qr(C,"Set"),is=qr(C,"WeakMap"),ss=qr(Be,"create"),fo=is&&new is,vi={},Fh=Vr(Ba),Bh=Vr(rs),Uh=Vr(Ua),Wh=Vr(_i),qh=Vr(is),ho=pr?pr.prototype:i,os=ho?ho.valueOf:i,Pu=ho?ho.toString:i;function f(e){if(ze(e)&&!fe(e)&&!(e instanceof ye)){if(e instanceof en)return e;if(Re.call(e,"__wrapped__"))return Mc(e)}return new en(e)}var gi=(function(){function e(){}return function(t){if(!He(t))return{};if(Du)return Du(t);e.prototype=t;var r=new e;return e.prototype=i,r}})();function po(){}function en(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}f.templateSettings={escape:sr,evaluate:or,interpolate:ti,variable:"",imports:{_:f}},f.prototype=po.prototype,f.prototype.constructor=f,en.prototype=gi(po.prototype),en.prototype.constructor=en;function ye(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_t,this.__views__=[]}function Vh(){var e=new ye(this.__wrapped__);return e.__actions__=kt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=kt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=kt(this.__views__),e}function Hh(){if(this.__filtered__){var e=new ye(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Kh(){var e=this.__wrapped__.value(),t=this.__dir__,r=fe(e),s=t<0,l=r?e.length:0,h=r_(0,l,this.__views__),v=h.start,m=h.end,E=m-v,O=s?m:v-1,I=this.__iteratees__,L=I.length,V=0,j=gt(E,this.__takeCount__);if(!r||!s&&l==E&&j==E)return oc(e,this.__actions__);var ae=[];e:for(;E--&&V<j;){O+=t;for(var ve=-1,le=e[O];++ve<L;){var be=I[ve],Ee=be.iteratee,Ht=be.type,Tt=Ee(le);if(Ht==qe)le=Tt;else if(!Tt){if(Ht==Qt)continue e;break e}}ae[V++]=le}return ae}ye.prototype=gi(po.prototype),ye.prototype.constructor=ye;function Fr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}function Yh(){this.__data__=ss?ss(null):{},this.size=0}function Gh(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function zh(e){var t=this.__data__;if(ss){var r=t[e];return r===S?i:r}return Re.call(t,e)?t[e]:i}function Qh(e){var t=this.__data__;return ss?t[e]!==i:Re.call(t,e)}function Xh(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ss&&t===i?S:t,this}Fr.prototype.clear=Yh,Fr.prototype.delete=Gh,Fr.prototype.get=zh,Fr.prototype.has=Qh,Fr.prototype.set=Xh;function Hn(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}function jh(){this.__data__=[],this.size=0}function Zh(e){var t=this.__data__,r=_o(t,e);if(r<0)return!1;var s=t.length-1;return r==s?t.pop():ao.call(t,r,1),--this.size,!0}function Jh(e){var t=this.__data__,r=_o(t,e);return r<0?i:t[r][1]}function ep(e){return _o(this.__data__,e)>-1}function tp(e,t){var r=this.__data__,s=_o(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}Hn.prototype.clear=jh,Hn.prototype.delete=Zh,Hn.prototype.get=Jh,Hn.prototype.has=ep,Hn.prototype.set=tp;function Kn(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}function np(){this.size=0,this.__data__={hash:new Fr,map:new(rs||Hn),string:new Fr}}function rp(e){var t=So(this,e).delete(e);return this.size-=t?1:0,t}function ip(e){return So(this,e).get(e)}function sp(e){return So(this,e).has(e)}function op(e,t){var r=So(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}Kn.prototype.clear=np,Kn.prototype.delete=rp,Kn.prototype.get=ip,Kn.prototype.has=sp,Kn.prototype.set=op;function Br(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Kn;++t<r;)this.add(e[t])}function ap(e){return this.__data__.set(e,S),this}function lp(e){return this.__data__.has(e)}Br.prototype.add=Br.prototype.push=ap,Br.prototype.has=lp;function mn(e){var t=this.__data__=new Hn(e);this.size=t.size}function up(){this.__data__=new Hn,this.size=0}function cp(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function dp(e){return this.__data__.get(e)}function fp(e){return this.__data__.has(e)}function hp(e,t){var r=this.__data__;if(r instanceof Hn){var s=r.__data__;if(!rs||s.length<p-1)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new Kn(s)}return r.set(e,t),this.size=r.size,this}mn.prototype.clear=up,mn.prototype.delete=cp,mn.prototype.get=dp,mn.prototype.has=fp,mn.prototype.set=hp;function Mu(e,t){var r=fe(e),s=!r&&Hr(e),l=!r&&!s&&br(e),h=!r&&!s&&!l&&Ei(e),v=r||s||l||h,m=v?$a(e.length,Ah):[],E=m.length;for(var O in e)(t||Re.call(e,O))&&!(v&&(O=="length"||l&&(O=="offset"||O=="parent")||h&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||Qn(O,E)))&&m.push(O);return m}function Fu(e){var t=e.length;return t?e[ja(0,t-1)]:i}function pp(e,t){return Oo(kt(e),Ur(t,0,e.length))}function _p(e){return Oo(kt(e))}function Wa(e,t,r){(r!==i&&!bn(e[t],r)||r===i&&!(t in e))&&Yn(e,t,r)}function as(e,t,r){var s=e[t];(!(Re.call(e,t)&&bn(s,r))||r===i&&!(t in e))&&Yn(e,t,r)}function _o(e,t){for(var r=e.length;r--;)if(bn(e[r][0],t))return r;return-1}function vp(e,t,r,s){return _r(e,function(l,h,v){t(s,l,r(l),v)}),s}function Bu(e,t){return e&&kn(t,ft(t),e)}function gp(e,t){return e&&kn(t,Rt(t),e)}function Yn(e,t,r){t=="__proto__"&&lo?lo(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function qa(e,t){for(var r=-1,s=t.length,l=A(s),h=e==null;++r<s;)l[r]=h?i:wl(e,t[r]);return l}function Ur(e,t,r){return e===e&&(r!==i&&(e=e<=r?e:r),t!==i&&(e=e>=t?e:t)),e}function tn(e,t,r,s,l,h){var v,m=t&z,E=t&te,O=t&ne;if(r&&(v=l?r(e,s,l,h):r(e)),v!==i)return v;if(!He(e))return e;var I=fe(e);if(I){if(v=s_(e),!m)return kt(e,v)}else{var L=mt(e),V=L==It||L==Sr;if(br(e))return uc(e,m);if(L==nt||L==we||V&&!l){if(v=E||V?{}:Oc(e),!m)return E?zp(e,gp(v,e)):Gp(e,Bu(v,e))}else{if(!Le[L])return l?e:{};v=o_(e,L,m)}}h||(h=new mn);var j=h.get(e);if(j)return j;h.set(e,v),rd(e)?e.forEach(function(le){v.add(tn(le,t,r,le,e,h))}):td(e)&&e.forEach(function(le,be){v.set(be,tn(le,t,r,be,e,h))});var ae=O?E?ll:al:E?Rt:ft,ve=I?i:ae(e);return q(ve||e,function(le,be){ve&&(be=le,le=e[be]),as(v,be,tn(le,t,r,be,e,h))}),v}function mp(e){var t=ft(e);return function(r){return Uu(r,e,t)}}function Uu(e,t,r){var s=r.length;if(e==null)return!s;for(e=Be(e);s--;){var l=r[s],h=t[l],v=e[l];if(v===i&&!(l in e)||!h(v))return!1}return!0}function Wu(e,t,r){if(typeof e!="function")throw new Jt(b);return ps(function(){e.apply(i,r)},t)}function ls(e,t,r,s){var l=-1,h=Ge,v=!0,m=e.length,E=[],O=t.length;if(!m)return E;r&&(t=re(t,Wt(r))),s?(h=ct,v=!1):t.length>=p&&(h=ts,v=!1,t=new Br(t));e:for(;++l<m;){var I=e[l],L=r==null?I:r(I);if(I=s||I!==0?I:0,v&&L===L){for(var V=O;V--;)if(t[V]===L)continue e;E.push(I)}else h(t,L,s)||E.push(I)}return E}var _r=pc(Ln),qu=pc(Ha,!0);function bp(e,t){var r=!0;return _r(e,function(s,l,h){return r=!!t(s,l,h),r}),r}function vo(e,t,r){for(var s=-1,l=e.length;++s<l;){var h=e[s],v=t(h);if(v!=null&&(m===i?v===v&&!Vt(v):r(v,m)))var m=v,E=h}return E}function yp(e,t,r,s){var l=e.length;for(r=_e(r),r<0&&(r=-r>l?0:l+r),s=s===i||s>l?l:_e(s),s<0&&(s+=l),s=r>s?0:sd(s);r<s;)e[r++]=t;return e}function Vu(e,t){var r=[];return _r(e,function(s,l,h){t(s,l,h)&&r.push(s)}),r}function pt(e,t,r,s,l){var h=-1,v=e.length;for(r||(r=l_),l||(l=[]);++h<v;){var m=e[h];t>0&&r(m)?t>1?pt(m,t-1,r,s,l):dt(l,m):s||(l[l.length]=m)}return l}var Va=_c(),Hu=_c(!0);function Ln(e,t){return e&&Va(e,t,ft)}function Ha(e,t){return e&&Hu(e,t,ft)}function go(e,t){return Oe(t,function(r){return Xn(e[r])})}function Wr(e,t){t=gr(t,e);for(var r=0,s=t.length;e!=null&&r<s;)e=e[$n(t[r++])];return r&&r==s?e:i}function Ku(e,t,r){var s=t(e);return fe(e)?s:dt(s,r(e))}function wt(e){return e==null?e===i?G:Bn:Mr&&Mr in Be(e)?n_(e):__(e)}function Ka(e,t){return e>t}function Ep(e,t){return e!=null&&Re.call(e,t)}function wp(e,t){return e!=null&&t in Be(e)}function Ap(e,t,r){return e>=gt(t,r)&&e<at(t,r)}function Ya(e,t,r){for(var s=r?ct:Ge,l=e[0].length,h=e.length,v=h,m=A(h),E=1/0,O=[];v--;){var I=e[v];v&&t&&(I=re(I,Wt(t))),E=gt(I.length,E),m[v]=!r&&(t||l>=120&&I.length>=120)?new Br(v&&I):i}I=e[0];var L=-1,V=m[0];e:for(;++L<l&&O.length<E;){var j=I[L],ae=t?t(j):j;if(j=r||j!==0?j:0,!(V?ts(V,ae):s(O,ae,r))){for(v=h;--v;){var ve=m[v];if(!(ve?ts(ve,ae):s(e[v],ae,r)))continue e}V&&V.push(ae),O.push(j)}}return O}function Tp(e,t,r,s){return Ln(e,function(l,h,v){t(s,r(l),h,v)}),s}function us(e,t,r){t=gr(t,e),e=Lc(e,t);var s=e==null?e:e[$n(rn(t))];return s==null?i:X(s,e,r)}function Yu(e){return ze(e)&&wt(e)==we}function xp(e){return ze(e)&&wt(e)==Sn}function Cp(e){return ze(e)&&wt(e)==hn}function cs(e,t,r,s,l){return e===t?!0:e==null||t==null||!ze(e)&&!ze(t)?e!==e&&t!==t:Sp(e,t,r,s,cs,l)}function Sp(e,t,r,s,l,h){var v=fe(e),m=fe(t),E=v?tt:mt(e),O=m?tt:mt(t);E=E==we?nt:E,O=O==we?nt:O;var I=E==nt,L=O==nt,V=E==O;if(V&&br(e)){if(!br(t))return!1;v=!0,I=!1}if(V&&!I)return h||(h=new mn),v||Ei(e)?xc(e,t,r,s,l,h):e_(e,t,E,r,s,l,h);if(!(r&ge)){var j=I&&Re.call(e,"__wrapped__"),ae=L&&Re.call(t,"__wrapped__");if(j||ae){var ve=j?e.value():e,le=ae?t.value():t;return h||(h=new mn),l(ve,le,r,s,h)}}return V?(h||(h=new mn),t_(e,t,r,s,l,h)):!1}function Op(e){return ze(e)&&mt(e)==Et}function Ga(e,t,r,s){var l=r.length,h=l,v=!s;if(e==null)return!h;for(e=Be(e);l--;){var m=r[l];if(v&&m[2]?m[1]!==e[m[0]]:!(m[0]in e))return!1}for(;++l<h;){m=r[l];var E=m[0],O=e[E],I=m[1];if(v&&m[2]){if(O===i&&!(E in e))return!1}else{var L=new mn;if(s)var V=s(O,I,E,e,t,L);if(!(V===i?cs(I,O,ge|J,s,L):V))return!1}}return!0}function Gu(e){if(!He(e)||c_(e))return!1;var t=Xn(e)?Oh:Ps;return t.test(Vr(e))}function Ip(e){return ze(e)&&wt(e)==Ue}function Np(e){return ze(e)&&mt(e)==ut}function Dp(e){return ze(e)&&$o(e.length)&&!!Pe[wt(e)]}function zu(e){return typeof e=="function"?e:e==null?Pt:typeof e=="object"?fe(e)?ju(e[0],e[1]):Xu(e):vd(e)}function za(e){if(!hs(e))return $h(e);var t=[];for(var r in Be(e))Re.call(e,r)&&r!="constructor"&&t.push(r);return t}function Lp(e){if(!He(e))return p_(e);var t=hs(e),r=[];for(var s in e)s=="constructor"&&(t||!Re.call(e,s))||r.push(s);return r}function Qa(e,t){return e<t}function Qu(e,t){var r=-1,s=$t(e)?A(e.length):[];return _r(e,function(l,h,v){s[++r]=t(l,h,v)}),s}function Xu(e){var t=cl(e);return t.length==1&&t[0][2]?Nc(t[0][0],t[0][1]):function(r){return r===e||Ga(r,e,t)}}function ju(e,t){return fl(e)&&Ic(t)?Nc($n(e),t):function(r){var s=wl(r,e);return s===i&&s===t?Al(r,e):cs(t,s,ge|J)}}function mo(e,t,r,s,l){e!==t&&Va(t,function(h,v){if(l||(l=new mn),He(h))kp(e,t,v,r,mo,s,l);else{var m=s?s(pl(e,v),h,v+"",e,t,l):i;m===i&&(m=h),Wa(e,v,m)}},Rt)}function kp(e,t,r,s,l,h,v){var m=pl(e,r),E=pl(t,r),O=v.get(E);if(O){Wa(e,r,O);return}var I=h?h(m,E,r+"",e,t,v):i,L=I===i;if(L){var V=fe(E),j=!V&&br(E),ae=!V&&!j&&Ei(E);I=E,V||j||ae?fe(m)?I=m:Ze(m)?I=kt(m):j?(L=!1,I=uc(E,!0)):ae?(L=!1,I=cc(E,!0)):I=[]:_s(E)||Hr(E)?(I=m,Hr(m)?I=od(m):(!He(m)||Xn(m))&&(I=Oc(E))):L=!1}L&&(v.set(E,I),l(I,E,s,h,v),v.delete(E)),Wa(e,r,I)}function Zu(e,t){var r=e.length;if(r)return t+=t<0?r:0,Qn(t,r)?e[t]:i}function Ju(e,t,r){t.length?t=re(t,function(h){return fe(h)?function(v){return Wr(v,h.length===1?h[0]:h)}:h}):t=[Pt];var s=-1;t=re(t,Wt(oe()));var l=Qu(e,function(h,v,m){var E=re(t,function(O){return O(h)});return{criteria:E,index:++s,value:h}});return oh(l,function(h,v){return Yp(h,v,r)})}function $p(e,t){return ec(e,t,function(r,s){return Al(e,s)})}function ec(e,t,r){for(var s=-1,l=t.length,h={};++s<l;){var v=t[s],m=Wr(e,v);r(m,v)&&ds(h,gr(v,e),m)}return h}function Rp(e){return function(t){return Wr(t,e)}}function Xa(e,t,r,s){var l=s?sh:ci,h=-1,v=t.length,m=e;for(e===t&&(t=kt(t)),r&&(m=re(e,Wt(r)));++h<v;)for(var E=0,O=t[h],I=r?r(O):O;(E=l(m,I,E,s))>-1;)m!==e&&ao.call(m,E,1),ao.call(e,E,1);return e}function tc(e,t){for(var r=e?t.length:0,s=r-1;r--;){var l=t[r];if(r==s||l!==h){var h=l;Qn(l)?ao.call(e,l,1):el(e,l)}}return e}function ja(e,t){return e+co(Ru()*(t-e+1))}function Pp(e,t,r,s){for(var l=-1,h=at(uo((t-e)/(r||1)),0),v=A(h);h--;)v[s?h:++l]=e,e+=r;return v}function Za(e,t){var r="";if(!e||t<1||t>Ye)return r;do t%2&&(r+=e),t=co(t/2),t&&(e+=e);while(t);return r}function me(e,t){return _l(Dc(e,t,Pt),e+"")}function Mp(e){return Fu(wi(e))}function Fp(e,t){var r=wi(e);return Oo(r,Ur(t,0,r.length))}function ds(e,t,r,s){if(!He(e))return e;t=gr(t,e);for(var l=-1,h=t.length,v=h-1,m=e;m!=null&&++l<h;){var E=$n(t[l]),O=r;if(E==="__proto__"||E==="constructor"||E==="prototype")return e;if(l!=v){var I=m[E];O=s?s(I,E,m):i,O===i&&(O=He(I)?I:Qn(t[l+1])?[]:{})}as(m,E,O),m=m[E]}return e}var nc=fo?function(e,t){return fo.set(e,t),e}:Pt,Bp=lo?function(e,t){return lo(e,"toString",{configurable:!0,enumerable:!1,value:xl(t),writable:!0})}:Pt;function Up(e){return Oo(wi(e))}function nn(e,t,r){var s=-1,l=e.length;t<0&&(t=-t>l?0:l+t),r=r>l?l:r,r<0&&(r+=l),l=t>r?0:r-t>>>0,t>>>=0;for(var h=A(l);++s<l;)h[s]=e[s+t];return h}function Wp(e,t){var r;return _r(e,function(s,l,h){return r=t(s,l,h),!r}),!!r}function bo(e,t,r){var s=0,l=e==null?s:e.length;if(typeof t=="number"&&t===t&&l<=Fn){for(;s<l;){var h=s+l>>>1,v=e[h];v!==null&&!Vt(v)&&(r?v<=t:v<t)?s=h+1:l=h}return l}return Ja(e,t,Pt,r)}function Ja(e,t,r,s){var l=0,h=e==null?0:e.length;if(h===0)return 0;t=r(t);for(var v=t!==t,m=t===null,E=Vt(t),O=t===i;l<h;){var I=co((l+h)/2),L=r(e[I]),V=L!==i,j=L===null,ae=L===L,ve=Vt(L);if(v)var le=s||ae;else O?le=ae&&(s||V):m?le=ae&&V&&(s||!j):E?le=ae&&V&&!j&&(s||!ve):j||ve?le=!1:le=s?L<=t:L<t;le?l=I+1:h=I}return gt(h,Bt)}function rc(e,t){for(var r=-1,s=e.length,l=0,h=[];++r<s;){var v=e[r],m=t?t(v):v;if(!r||!bn(m,E)){var E=m;h[l++]=v===0?0:v}}return h}function ic(e){return typeof e=="number"?e:Vt(e)?fn:+e}function qt(e){if(typeof e=="string")return e;if(fe(e))return re(e,qt)+"";if(Vt(e))return Pu?Pu.call(e):"";var t=e+"";return t=="0"&&1/e==-We?"-0":t}function vr(e,t,r){var s=-1,l=Ge,h=e.length,v=!0,m=[],E=m;if(r)v=!1,l=ct;else if(h>=p){var O=t?null:Zp(e);if(O)return Js(O);v=!1,l=ts,E=new Br}else E=t?[]:m;e:for(;++s<h;){var I=e[s],L=t?t(I):I;if(I=r||I!==0?I:0,v&&L===L){for(var V=E.length;V--;)if(E[V]===L)continue e;t&&E.push(L),m.push(I)}else l(E,L,r)||(E!==m&&E.push(L),m.push(I))}return m}function el(e,t){return t=gr(t,e),e=Lc(e,t),e==null||delete e[$n(rn(t))]}function sc(e,t,r,s){return ds(e,t,r(Wr(e,t)),s)}function yo(e,t,r,s){for(var l=e.length,h=s?l:-1;(s?h--:++h<l)&&t(e[h],h,e););return r?nn(e,s?0:h,s?h+1:l):nn(e,s?h+1:0,s?l:h)}function oc(e,t){var r=e;return r instanceof ye&&(r=r.value()),st(t,function(s,l){return l.func.apply(l.thisArg,dt([s],l.args))},r)}function tl(e,t,r){var s=e.length;if(s<2)return s?vr(e[0]):[];for(var l=-1,h=A(s);++l<s;)for(var v=e[l],m=-1;++m<s;)m!=l&&(h[l]=ls(h[l]||v,e[m],t,r));return vr(pt(h,1),t,r)}function ac(e,t,r){for(var s=-1,l=e.length,h=t.length,v={};++s<l;){var m=s<h?t[s]:i;r(v,e[s],m)}return v}function nl(e){return Ze(e)?e:[]}function rl(e){return typeof e=="function"?e:Pt}function gr(e,t){return fe(e)?e:fl(e,t)?[e]:Pc(Ie(e))}var qp=me;function mr(e,t,r){var s=e.length;return r=r===i?s:r,!t&&r>=s?e:nn(e,t,r)}var lc=Ih||function(e){return Fe.clearTimeout(e)};function uc(e,t){if(t)return e.slice();var r=e.length,s=Nu?Nu(r):new e.constructor(r);return e.copy(s),s}function il(e){var t=new e.constructor(e.byteLength);return new so(t).set(new so(e)),t}function Vp(e,t){var r=t?il(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function Hp(e){var t=new e.constructor(e.source,lr.exec(e));return t.lastIndex=e.lastIndex,t}function Kp(e){return os?Be(os.call(e)):{}}function cc(e,t){var r=t?il(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function dc(e,t){if(e!==t){var r=e!==i,s=e===null,l=e===e,h=Vt(e),v=t!==i,m=t===null,E=t===t,O=Vt(t);if(!m&&!O&&!h&&e>t||h&&v&&E&&!m&&!O||s&&v&&E||!r&&E||!l)return 1;if(!s&&!h&&!O&&e<t||O&&r&&l&&!s&&!h||m&&r&&l||!v&&l||!E)return-1}return 0}function Yp(e,t,r){for(var s=-1,l=e.criteria,h=t.criteria,v=l.length,m=r.length;++s<v;){var E=dc(l[s],h[s]);if(E){if(s>=m)return E;var O=r[s];return E*(O=="desc"?-1:1)}}return e.index-t.index}function fc(e,t,r,s){for(var l=-1,h=e.length,v=r.length,m=-1,E=t.length,O=at(h-v,0),I=A(E+O),L=!s;++m<E;)I[m]=t[m];for(;++l<v;)(L||l<h)&&(I[r[l]]=e[l]);for(;O--;)I[m++]=e[l++];return I}function hc(e,t,r,s){for(var l=-1,h=e.length,v=-1,m=r.length,E=-1,O=t.length,I=at(h-m,0),L=A(I+O),V=!s;++l<I;)L[l]=e[l];for(var j=l;++E<O;)L[j+E]=t[E];for(;++v<m;)(V||l<h)&&(L[j+r[v]]=e[l++]);return L}function kt(e,t){var r=-1,s=e.length;for(t||(t=A(s));++r<s;)t[r]=e[r];return t}function kn(e,t,r,s){var l=!r;r||(r={});for(var h=-1,v=t.length;++h<v;){var m=t[h],E=s?s(r[m],e[m],m,r,e):i;E===i&&(E=e[m]),l?Yn(r,m,E):as(r,m,E)}return r}function Gp(e,t){return kn(e,dl(e),t)}function zp(e,t){return kn(e,Cc(e),t)}function Eo(e,t){return function(r,s){var l=fe(r)?ke:vp,h=t?t():{};return l(r,e,oe(s,2),h)}}function mi(e){return me(function(t,r){var s=-1,l=r.length,h=l>1?r[l-1]:i,v=l>2?r[2]:i;for(h=e.length>3&&typeof h=="function"?(l--,h):i,v&&At(r[0],r[1],v)&&(h=l<3?i:h,l=1),t=Be(t);++s<l;){var m=r[s];m&&e(t,m,s,h)}return t})}function pc(e,t){return function(r,s){if(r==null)return r;if(!$t(r))return e(r,s);for(var l=r.length,h=t?l:-1,v=Be(r);(t?h--:++h<l)&&s(v[h],h,v)!==!1;);return r}}function _c(e){return function(t,r,s){for(var l=-1,h=Be(t),v=s(t),m=v.length;m--;){var E=v[e?m:++l];if(r(h[E],E,h)===!1)break}return t}}function Qp(e,t,r){var s=t&ee,l=fs(e);function h(){var v=this&&this!==Fe&&this instanceof h?l:e;return v.apply(s?r:this,arguments)}return h}function vc(e){return function(t){t=Ie(t);var r=di(t)?gn(t):i,s=r?r[0]:t.charAt(0),l=r?mr(r,1).join(""):t.slice(1);return s[e]()+l}}function bi(e){return function(t){return st(pd(hd(t).replace(Ea,"")),e,"")}}function fs(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=gi(e.prototype),s=e.apply(r,t);return He(s)?s:r}}function Xp(e,t,r){var s=fs(e);function l(){for(var h=arguments.length,v=A(h),m=h,E=yi(l);m--;)v[m]=arguments[m];var O=h<3&&v[0]!==E&&v[h-1]!==E?[]:hr(v,E);if(h-=O.length,h<r)return Ec(e,t,wo,l.placeholder,i,v,O,i,i,r-h);var I=this&&this!==Fe&&this instanceof l?s:e;return X(I,this,v)}return l}function gc(e){return function(t,r,s){var l=Be(t);if(!$t(t)){var h=oe(r,3);t=ft(t),r=function(m){return h(l[m],m,l)}}var v=e(t,r,s);return v>-1?l[h?t[v]:v]:i}}function mc(e){return zn(function(t){var r=t.length,s=r,l=en.prototype.thru;for(e&&t.reverse();s--;){var h=t[s];if(typeof h!="function")throw new Jt(b);if(l&&!v&&Co(h)=="wrapper")var v=new en([],!0)}for(s=v?s:r;++s<r;){h=t[s];var m=Co(h),E=m=="wrapper"?ul(h):i;E&&hl(E[0])&&E[1]==(ue|ie|k|xe)&&!E[4].length&&E[9]==1?v=v[Co(E[0])].apply(v,E[3]):v=h.length==1&&hl(h)?v[m]():v.thru(h)}return function(){var O=arguments,I=O[0];if(v&&O.length==1&&fe(I))return v.plant(I).value();for(var L=0,V=r?t[L].apply(this,O):I;++L<r;)V=t[L].call(this,V);return V}})}function wo(e,t,r,s,l,h,v,m,E,O){var I=t&ue,L=t&ee,V=t&N,j=t&(ie|F),ae=t&Ne,ve=V?i:fs(e);function le(){for(var be=arguments.length,Ee=A(be),Ht=be;Ht--;)Ee[Ht]=arguments[Ht];if(j)var Tt=yi(le),Kt=lh(Ee,Tt);if(s&&(Ee=fc(Ee,s,l,j)),h&&(Ee=hc(Ee,h,v,j)),be-=Kt,j&&be<O){var Je=hr(Ee,Tt);return Ec(e,t,wo,le.placeholder,r,Ee,Je,m,E,O-be)}var yn=L?r:this,Zn=V?yn[e]:e;return be=Ee.length,m?Ee=v_(Ee,m):ae&&be>1&&Ee.reverse(),I&&E<be&&(Ee.length=E),this&&this!==Fe&&this instanceof le&&(Zn=ve||fs(Zn)),Zn.apply(yn,Ee)}return le}function bc(e,t){return function(r,s){return Tp(r,e,t(s),{})}}function Ao(e,t){return function(r,s){var l;if(r===i&&s===i)return t;if(r!==i&&(l=r),s!==i){if(l===i)return s;typeof r=="string"||typeof s=="string"?(r=qt(r),s=qt(s)):(r=ic(r),s=ic(s)),l=e(r,s)}return l}}function sl(e){return zn(function(t){return t=re(t,Wt(oe())),me(function(r){var s=this;return e(t,function(l){return X(l,s,r)})})})}function To(e,t){t=t===i?" ":qt(t);var r=t.length;if(r<2)return r?Za(t,e):t;var s=Za(t,uo(e/fi(t)));return di(t)?mr(gn(s),0,e).join(""):s.slice(0,e)}function jp(e,t,r,s){var l=t&ee,h=fs(e);function v(){for(var m=-1,E=arguments.length,O=-1,I=s.length,L=A(I+E),V=this&&this!==Fe&&this instanceof v?h:e;++O<I;)L[O]=s[O];for(;E--;)L[O++]=arguments[++m];return X(V,l?r:this,L)}return v}function yc(e){return function(t,r,s){return s&&typeof s!="number"&&At(t,r,s)&&(r=s=i),t=jn(t),r===i?(r=t,t=0):r=jn(r),s=s===i?t<r?1:-1:jn(s),Pp(t,r,s,e)}}function xo(e){return function(t,r){return typeof t=="string"&&typeof r=="string"||(t=sn(t),r=sn(r)),e(t,r)}}function Ec(e,t,r,s,l,h,v,m,E,O){var I=t&ie,L=I?v:i,V=I?i:v,j=I?h:i,ae=I?i:h;t|=I?k:H,t&=~(I?H:k),t&U||(t&=-4);var ve=[e,t,l,j,L,ae,V,m,E,O],le=r.apply(i,ve);return hl(e)&&kc(le,ve),le.placeholder=s,$c(le,e,t)}function ol(e){var t=ot[e];return function(r,s){if(r=sn(r),s=s==null?0:gt(_e(s),292),s&&$u(r)){var l=(Ie(r)+"e").split("e"),h=t(l[0]+"e"+(+l[1]+s));return l=(Ie(h)+"e").split("e"),+(l[0]+"e"+(+l[1]-s))}return t(r)}}var Zp=_i&&1/Js(new _i([,-0]))[1]==We?function(e){return new _i(e)}:Ol;function wc(e){return function(t){var r=mt(t);return r==Et?Pa(t):r==ut?_h(t):ah(t,e(t))}}function Gn(e,t,r,s,l,h,v,m){var E=t&N;if(!E&&typeof e!="function")throw new Jt(b);var O=s?s.length:0;if(O||(t&=-97,s=l=i),v=v===i?v:at(_e(v),0),m=m===i?m:_e(m),O-=l?l.length:0,t&H){var I=s,L=l;s=l=i}var V=E?i:ul(e),j=[e,t,r,s,l,I,L,h,v,m];if(V&&h_(j,V),e=j[0],t=j[1],r=j[2],s=j[3],l=j[4],m=j[9]=j[9]===i?E?0:e.length:at(j[9]-O,0),!m&&t&(ie|F)&&(t&=-25),!t||t==ee)var ae=Qp(e,t,r);else t==ie||t==F?ae=Xp(e,t,m):(t==k||t==(ee|k))&&!l.length?ae=jp(e,t,r,s):ae=wo.apply(i,j);var ve=V?nc:kc;return $c(ve(ae,j),e,t)}function Ac(e,t,r,s){return e===i||bn(e,pi[r])&&!Re.call(s,r)?t:e}function Tc(e,t,r,s,l,h){return He(e)&&He(t)&&(h.set(t,e),mo(e,t,i,Tc,h),h.delete(t)),e}function Jp(e){return _s(e)?i:e}function xc(e,t,r,s,l,h){var v=r&ge,m=e.length,E=t.length;if(m!=E&&!(v&&E>m))return!1;var O=h.get(e),I=h.get(t);if(O&&I)return O==t&&I==e;var L=-1,V=!0,j=r&J?new Br:i;for(h.set(e,t),h.set(t,e);++L<m;){var ae=e[L],ve=t[L];if(s)var le=v?s(ve,ae,L,t,e,h):s(ae,ve,L,e,t,h);if(le!==i){if(le)continue;V=!1;break}if(j){if(!Vn(t,function(be,Ee){if(!ts(j,Ee)&&(ae===be||l(ae,be,r,s,h)))return j.push(Ee)})){V=!1;break}}else if(!(ae===ve||l(ae,ve,r,s,h))){V=!1;break}}return h.delete(e),h.delete(t),V}function e_(e,t,r,s,l,h,v){switch(r){case Xe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Sn:return!(e.byteLength!=t.byteLength||!h(new so(e),new so(t)));case Qe:case hn:case Xt:return bn(+e,+t);case Tn:return e.name==t.name&&e.message==t.message;case Ue:case xn:return e==t+"";case Et:var m=Pa;case ut:var E=s&ge;if(m||(m=Js),e.size!=t.size&&!E)return!1;var O=v.get(e);if(O)return O==t;s|=J,v.set(e,t);var I=xc(m(e),m(t),s,l,h,v);return v.delete(e),I;case Un:if(os)return os.call(e)==os.call(t)}return!1}function t_(e,t,r,s,l,h){var v=r&ge,m=al(e),E=m.length,O=al(t),I=O.length;if(E!=I&&!v)return!1;for(var L=E;L--;){var V=m[L];if(!(v?V in t:Re.call(t,V)))return!1}var j=h.get(e),ae=h.get(t);if(j&&ae)return j==t&&ae==e;var ve=!0;h.set(e,t),h.set(t,e);for(var le=v;++L<E;){V=m[L];var be=e[V],Ee=t[V];if(s)var Ht=v?s(Ee,be,V,t,e,h):s(be,Ee,V,e,t,h);if(!(Ht===i?be===Ee||l(be,Ee,r,s,h):Ht)){ve=!1;break}le||(le=V=="constructor")}if(ve&&!le){var Tt=e.constructor,Kt=t.constructor;Tt!=Kt&&"constructor"in e&&"constructor"in t&&!(typeof Tt=="function"&&Tt instanceof Tt&&typeof Kt=="function"&&Kt instanceof Kt)&&(ve=!1)}return h.delete(e),h.delete(t),ve}function zn(e){return _l(Dc(e,i,Uc),e+"")}function al(e){return Ku(e,ft,dl)}function ll(e){return Ku(e,Rt,Cc)}var ul=fo?function(e){return fo.get(e)}:Ol;function Co(e){for(var t=e.name+"",r=vi[t],s=Re.call(vi,t)?r.length:0;s--;){var l=r[s],h=l.func;if(h==null||h==e)return l.name}return t}function yi(e){var t=Re.call(f,"placeholder")?f:e;return t.placeholder}function oe(){var e=f.iteratee||Cl;return e=e===Cl?zu:e,arguments.length?e(arguments[0],arguments[1]):e}function So(e,t){var r=e.__data__;return u_(t)?r[typeof t=="string"?"string":"hash"]:r.map}function cl(e){for(var t=ft(e),r=t.length;r--;){var s=t[r],l=e[s];t[r]=[s,l,Ic(l)]}return t}function qr(e,t){var r=fh(e,t);return Gu(r)?r:i}function n_(e){var t=Re.call(e,Mr),r=e[Mr];try{e[Mr]=i;var s=!0}catch{}var l=ro.call(e);return s&&(t?e[Mr]=r:delete e[Mr]),l}var dl=Fa?function(e){return e==null?[]:(e=Be(e),Oe(Fa(e),function(t){return Lu.call(e,t)}))}:Il,Cc=Fa?function(e){for(var t=[];e;)dt(t,dl(e)),e=oo(e);return t}:Il,mt=wt;(Ba&&mt(new Ba(new ArrayBuffer(1)))!=Xe||rs&&mt(new rs)!=Et||Ua&&mt(Ua.resolve())!=Zr||_i&&mt(new _i)!=ut||is&&mt(new is)!=Cn)&&(mt=function(e){var t=wt(e),r=t==nt?e.constructor:i,s=r?Vr(r):"";if(s)switch(s){case Fh:return Xe;case Bh:return Et;case Uh:return Zr;case Wh:return ut;case qh:return Cn}return t});function r_(e,t,r){for(var s=-1,l=r.length;++s<l;){var h=r[s],v=h.size;switch(h.type){case"drop":e+=v;break;case"dropRight":t-=v;break;case"take":t=gt(t,e+v);break;case"takeRight":e=at(e,t-v);break}}return{start:e,end:t}}function i_(e){var t=e.match(da);return t?t[1].split(fa):[]}function Sc(e,t,r){t=gr(t,e);for(var s=-1,l=t.length,h=!1;++s<l;){var v=$n(t[s]);if(!(h=e!=null&&r(e,v)))break;e=e[v]}return h||++s!=l?h:(l=e==null?0:e.length,!!l&&$o(l)&&Qn(v,l)&&(fe(e)||Hr(e)))}function s_(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Re.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function Oc(e){return typeof e.constructor=="function"&&!hs(e)?gi(oo(e)):{}}function o_(e,t,r){var s=e.constructor;switch(t){case Sn:return il(e);case Qe:case hn:return new s(+e);case Xe:return Vp(e,r);case On:case In:case ei:case Q:case je:case Or:case Nn:case pn:case _n:return cc(e,r);case Et:return new s;case Xt:case xn:return new s(e);case Ue:return Hp(e);case ut:return new s;case Un:return Kp(e)}}function a_(e,t){var r=t.length;if(!r)return e;var s=r-1;return t[s]=(r>1?"& ":"")+t[s],t=t.join(r>2?", ":" "),e.replace($s,`{
/* [wrapped with `+t+`] */
`)}function l_(e){return fe(e)||Hr(e)||!!(ku&&e&&e[ku])}function Qn(e,t){var r=typeof e;return t=t??Ye,!!t&&(r=="number"||r!="symbol"&&_a.test(e))&&e>-1&&e%1==0&&e<t}function At(e,t,r){if(!He(r))return!1;var s=typeof t;return(s=="number"?$t(r)&&Qn(t,r.length):s=="string"&&t in r)?bn(r[t],e):!1}function fl(e,t){if(fe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Vt(e)?!0:ni.test(e)||!Ir.test(e)||t!=null&&e in Be(t)}function u_(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function hl(e){var t=Co(e),r=f[t];if(typeof r!="function"||!(t in ye.prototype))return!1;if(e===r)return!0;var s=ul(r);return!!s&&e===s[0]}function c_(e){return!!Iu&&Iu in e}var d_=to?Xn:Nl;function hs(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||pi;return e===r}function Ic(e){return e===e&&!He(e)}function Nc(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==i||e in Be(r))}}function f_(e){var t=Lo(e,function(s){return r.size===B&&r.clear(),s}),r=t.cache;return t}function h_(e,t){var r=e[1],s=t[1],l=r|s,h=l<(ee|N|ue),v=s==ue&&r==ie||s==ue&&r==xe&&e[7].length<=t[8]||s==(ue|xe)&&t[7].length<=t[8]&&r==ie;if(!(h||v))return e;s&ee&&(e[2]=t[2],l|=r&ee?0:U);var m=t[3];if(m){var E=e[3];e[3]=E?fc(E,m,t[4]):m,e[4]=E?hr(e[3],D):t[4]}return m=t[5],m&&(E=e[5],e[5]=E?hc(E,m,t[6]):m,e[6]=E?hr(e[5],D):t[6]),m=t[7],m&&(e[7]=m),s&ue&&(e[8]=e[8]==null?t[8]:gt(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=l,e}function p_(e){var t=[];if(e!=null)for(var r in Be(e))t.push(r);return t}function __(e){return ro.call(e)}function Dc(e,t,r){return t=at(t===i?e.length-1:t,0),function(){for(var s=arguments,l=-1,h=at(s.length-t,0),v=A(h);++l<h;)v[l]=s[t+l];l=-1;for(var m=A(t+1);++l<t;)m[l]=s[l];return m[t]=r(v),X(e,this,m)}}function Lc(e,t){return t.length<2?e:Wr(e,nn(t,0,-1))}function v_(e,t){for(var r=e.length,s=gt(t.length,r),l=kt(e);s--;){var h=t[s];e[s]=Qn(h,r)?l[h]:i}return e}function pl(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var kc=Rc(nc),ps=Dh||function(e,t){return Fe.setTimeout(e,t)},_l=Rc(Bp);function $c(e,t,r){var s=t+"";return _l(e,a_(s,g_(i_(s),r)))}function Rc(e){var t=0,r=0;return function(){var s=Rh(),l=it-(s-r);if(r=s,l>0){if(++t>=rt)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Oo(e,t){var r=-1,s=e.length,l=s-1;for(t=t===i?s:t;++r<t;){var h=ja(r,l),v=e[h];e[h]=e[r],e[r]=v}return e.length=t,e}var Pc=f_(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(qi,function(r,s,l,h){t.push(l?h.replace(Rs,"$1"):s||r)}),t});function $n(e){if(typeof e=="string"||Vt(e))return e;var t=e+"";return t=="0"&&1/e==-We?"-0":t}function Vr(e){if(e!=null){try{return no.call(e)}catch{}try{return e+""}catch{}}return""}function g_(e,t){return q(St,function(r){var s="_."+r[0];t&r[1]&&!Ge(e,s)&&e.push(s)}),e.sort()}function Mc(e){if(e instanceof ye)return e.clone();var t=new en(e.__wrapped__,e.__chain__);return t.__actions__=kt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function m_(e,t,r){(r?At(e,t,r):t===i)?t=1:t=at(_e(t),0);var s=e==null?0:e.length;if(!s||t<1)return[];for(var l=0,h=0,v=A(uo(s/t));l<s;)v[h++]=nn(e,l,l+=t);return v}function b_(e){for(var t=-1,r=e==null?0:e.length,s=0,l=[];++t<r;){var h=e[t];h&&(l[s++]=h)}return l}function y_(){var e=arguments.length;if(!e)return[];for(var t=A(e-1),r=arguments[0],s=e;s--;)t[s-1]=arguments[s];return dt(fe(r)?kt(r):[r],pt(t,1))}var E_=me(function(e,t){return Ze(e)?ls(e,pt(t,1,Ze,!0)):[]}),w_=me(function(e,t){var r=rn(t);return Ze(r)&&(r=i),Ze(e)?ls(e,pt(t,1,Ze,!0),oe(r,2)):[]}),A_=me(function(e,t){var r=rn(t);return Ze(r)&&(r=i),Ze(e)?ls(e,pt(t,1,Ze,!0),i,r):[]});function T_(e,t,r){var s=e==null?0:e.length;return s?(t=r||t===i?1:_e(t),nn(e,t<0?0:t,s)):[]}function x_(e,t,r){var s=e==null?0:e.length;return s?(t=r||t===i?1:_e(t),t=s-t,nn(e,0,t<0?0:t)):[]}function C_(e,t){return e&&e.length?yo(e,oe(t,3),!0,!0):[]}function S_(e,t){return e&&e.length?yo(e,oe(t,3),!0):[]}function O_(e,t,r,s){var l=e==null?0:e.length;return l?(r&&typeof r!="number"&&At(e,t,r)&&(r=0,s=l),yp(e,t,r,s)):[]}function Fc(e,t,r){var s=e==null?0:e.length;if(!s)return-1;var l=r==null?0:_e(r);return l<0&&(l=at(s+l,0)),Zs(e,oe(t,3),l)}function Bc(e,t,r){var s=e==null?0:e.length;if(!s)return-1;var l=s-1;return r!==i&&(l=_e(r),l=r<0?at(s+l,0):gt(l,s-1)),Zs(e,oe(t,3),l,!0)}function Uc(e){var t=e==null?0:e.length;return t?pt(e,1):[]}function I_(e){var t=e==null?0:e.length;return t?pt(e,We):[]}function N_(e,t){var r=e==null?0:e.length;return r?(t=t===i?1:_e(t),pt(e,t)):[]}function D_(e){for(var t=-1,r=e==null?0:e.length,s={};++t<r;){var l=e[t];s[l[0]]=l[1]}return s}function Wc(e){return e&&e.length?e[0]:i}function L_(e,t,r){var s=e==null?0:e.length;if(!s)return-1;var l=r==null?0:_e(r);return l<0&&(l=at(s+l,0)),ci(e,t,l)}function k_(e){var t=e==null?0:e.length;return t?nn(e,0,-1):[]}var $_=me(function(e){var t=re(e,nl);return t.length&&t[0]===e[0]?Ya(t):[]}),R_=me(function(e){var t=rn(e),r=re(e,nl);return t===rn(r)?t=i:r.pop(),r.length&&r[0]===e[0]?Ya(r,oe(t,2)):[]}),P_=me(function(e){var t=rn(e),r=re(e,nl);return t=typeof t=="function"?t:i,t&&r.pop(),r.length&&r[0]===e[0]?Ya(r,i,t):[]});function M_(e,t){return e==null?"":kh.call(e,t)}function rn(e){var t=e==null?0:e.length;return t?e[t-1]:i}function F_(e,t,r){var s=e==null?0:e.length;if(!s)return-1;var l=s;return r!==i&&(l=_e(r),l=l<0?at(s+l,0):gt(l,s-1)),t===t?gh(e,t,l):Zs(e,Eu,l,!0)}function B_(e,t){return e&&e.length?Zu(e,_e(t)):i}var U_=me(qc);function qc(e,t){return e&&e.length&&t&&t.length?Xa(e,t):e}function W_(e,t,r){return e&&e.length&&t&&t.length?Xa(e,t,oe(r,2)):e}function q_(e,t,r){return e&&e.length&&t&&t.length?Xa(e,t,i,r):e}var V_=zn(function(e,t){var r=e==null?0:e.length,s=qa(e,t);return tc(e,re(t,function(l){return Qn(l,r)?+l:l}).sort(dc)),s});function H_(e,t){var r=[];if(!(e&&e.length))return r;var s=-1,l=[],h=e.length;for(t=oe(t,3);++s<h;){var v=e[s];t(v,s,e)&&(r.push(v),l.push(s))}return tc(e,l),r}function vl(e){return e==null?e:Mh.call(e)}function K_(e,t,r){var s=e==null?0:e.length;return s?(r&&typeof r!="number"&&At(e,t,r)?(t=0,r=s):(t=t==null?0:_e(t),r=r===i?s:_e(r)),nn(e,t,r)):[]}function Y_(e,t){return bo(e,t)}function G_(e,t,r){return Ja(e,t,oe(r,2))}function z_(e,t){var r=e==null?0:e.length;if(r){var s=bo(e,t);if(s<r&&bn(e[s],t))return s}return-1}function Q_(e,t){return bo(e,t,!0)}function X_(e,t,r){return Ja(e,t,oe(r,2),!0)}function j_(e,t){var r=e==null?0:e.length;if(r){var s=bo(e,t,!0)-1;if(bn(e[s],t))return s}return-1}function Z_(e){return e&&e.length?rc(e):[]}function J_(e,t){return e&&e.length?rc(e,oe(t,2)):[]}function ev(e){var t=e==null?0:e.length;return t?nn(e,1,t):[]}function tv(e,t,r){return e&&e.length?(t=r||t===i?1:_e(t),nn(e,0,t<0?0:t)):[]}function nv(e,t,r){var s=e==null?0:e.length;return s?(t=r||t===i?1:_e(t),t=s-t,nn(e,t<0?0:t,s)):[]}function rv(e,t){return e&&e.length?yo(e,oe(t,3),!1,!0):[]}function iv(e,t){return e&&e.length?yo(e,oe(t,3)):[]}var sv=me(function(e){return vr(pt(e,1,Ze,!0))}),ov=me(function(e){var t=rn(e);return Ze(t)&&(t=i),vr(pt(e,1,Ze,!0),oe(t,2))}),av=me(function(e){var t=rn(e);return t=typeof t=="function"?t:i,vr(pt(e,1,Ze,!0),i,t)});function lv(e){return e&&e.length?vr(e):[]}function uv(e,t){return e&&e.length?vr(e,oe(t,2)):[]}function cv(e,t){return t=typeof t=="function"?t:i,e&&e.length?vr(e,i,t):[]}function gl(e){if(!(e&&e.length))return[];var t=0;return e=Oe(e,function(r){if(Ze(r))return t=at(r.length,t),!0}),$a(t,function(r){return re(e,Da(r))})}function Vc(e,t){if(!(e&&e.length))return[];var r=gl(e);return t==null?r:re(r,function(s){return X(t,i,s)})}var dv=me(function(e,t){return Ze(e)?ls(e,t):[]}),fv=me(function(e){return tl(Oe(e,Ze))}),hv=me(function(e){var t=rn(e);return Ze(t)&&(t=i),tl(Oe(e,Ze),oe(t,2))}),pv=me(function(e){var t=rn(e);return t=typeof t=="function"?t:i,tl(Oe(e,Ze),i,t)}),_v=me(gl);function vv(e,t){return ac(e||[],t||[],as)}function gv(e,t){return ac(e||[],t||[],ds)}var mv=me(function(e){var t=e.length,r=t>1?e[t-1]:i;return r=typeof r=="function"?(e.pop(),r):i,Vc(e,r)});function Hc(e){var t=f(e);return t.__chain__=!0,t}function bv(e,t){return t(e),e}function Io(e,t){return t(e)}var yv=zn(function(e){var t=e.length,r=t?e[0]:0,s=this.__wrapped__,l=function(h){return qa(h,e)};return t>1||this.__actions__.length||!(s instanceof ye)||!Qn(r)?this.thru(l):(s=s.slice(r,+r+(t?1:0)),s.__actions__.push({func:Io,args:[l],thisArg:i}),new en(s,this.__chain__).thru(function(h){return t&&!h.length&&h.push(i),h}))});function Ev(){return Hc(this)}function wv(){return new en(this.value(),this.__chain__)}function Av(){this.__values__===i&&(this.__values__=id(this.value()));var e=this.__index__>=this.__values__.length,t=e?i:this.__values__[this.__index__++];return{done:e,value:t}}function Tv(){return this}function xv(e){for(var t,r=this;r instanceof po;){var s=Mc(r);s.__index__=0,s.__values__=i,t?l.__wrapped__=s:t=s;var l=s;r=r.__wrapped__}return l.__wrapped__=e,t}function Cv(){var e=this.__wrapped__;if(e instanceof ye){var t=e;return this.__actions__.length&&(t=new ye(this)),t=t.reverse(),t.__actions__.push({func:Io,args:[vl],thisArg:i}),new en(t,this.__chain__)}return this.thru(vl)}function Sv(){return oc(this.__wrapped__,this.__actions__)}var Ov=Eo(function(e,t,r){Re.call(e,r)?++e[r]:Yn(e,r,1)});function Iv(e,t,r){var s=fe(e)?Se:bp;return r&&At(e,t,r)&&(t=i),s(e,oe(t,3))}function Nv(e,t){var r=fe(e)?Oe:Vu;return r(e,oe(t,3))}var Dv=gc(Fc),Lv=gc(Bc);function kv(e,t){return pt(No(e,t),1)}function $v(e,t){return pt(No(e,t),We)}function Rv(e,t,r){return r=r===i?1:_e(r),pt(No(e,t),r)}function Kc(e,t){var r=fe(e)?q:_r;return r(e,oe(t,3))}function Yc(e,t){var r=fe(e)?$e:qu;return r(e,oe(t,3))}var Pv=Eo(function(e,t,r){Re.call(e,r)?e[r].push(t):Yn(e,r,[t])});function Mv(e,t,r,s){e=$t(e)?e:wi(e),r=r&&!s?_e(r):0;var l=e.length;return r<0&&(r=at(l+r,0)),Ro(e)?r<=l&&e.indexOf(t,r)>-1:!!l&&ci(e,t,r)>-1}var Fv=me(function(e,t,r){var s=-1,l=typeof t=="function",h=$t(e)?A(e.length):[];return _r(e,function(v){h[++s]=l?X(t,v,r):us(v,t,r)}),h}),Bv=Eo(function(e,t,r){Yn(e,r,t)});function No(e,t){var r=fe(e)?re:Qu;return r(e,oe(t,3))}function Uv(e,t,r,s){return e==null?[]:(fe(t)||(t=t==null?[]:[t]),r=s?i:r,fe(r)||(r=r==null?[]:[r]),Ju(e,t,r))}var Wv=Eo(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});function qv(e,t,r){var s=fe(e)?st:Au,l=arguments.length<3;return s(e,oe(t,4),r,l,_r)}function Vv(e,t,r){var s=fe(e)?Pr:Au,l=arguments.length<3;return s(e,oe(t,4),r,l,qu)}function Hv(e,t){var r=fe(e)?Oe:Vu;return r(e,ko(oe(t,3)))}function Kv(e){var t=fe(e)?Fu:Mp;return t(e)}function Yv(e,t,r){(r?At(e,t,r):t===i)?t=1:t=_e(t);var s=fe(e)?pp:Fp;return s(e,t)}function Gv(e){var t=fe(e)?_p:Up;return t(e)}function zv(e){if(e==null)return 0;if($t(e))return Ro(e)?fi(e):e.length;var t=mt(e);return t==Et||t==ut?e.size:za(e).length}function Qv(e,t,r){var s=fe(e)?Vn:Wp;return r&&At(e,t,r)&&(t=i),s(e,oe(t,3))}var Xv=me(function(e,t){if(e==null)return[];var r=t.length;return r>1&&At(e,t[0],t[1])?t=[]:r>2&&At(t[0],t[1],t[2])&&(t=[t[0]]),Ju(e,pt(t,1),[])}),Do=Nh||function(){return Fe.Date.now()};function jv(e,t){if(typeof t!="function")throw new Jt(b);return e=_e(e),function(){if(--e<1)return t.apply(this,arguments)}}function Gc(e,t,r){return t=r?i:t,t=e&&t==null?e.length:t,Gn(e,ue,i,i,i,i,t)}function zc(e,t){var r;if(typeof t!="function")throw new Jt(b);return e=_e(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=i),r}}var ml=me(function(e,t,r){var s=ee;if(r.length){var l=hr(r,yi(ml));s|=k}return Gn(e,s,t,r,l)}),Qc=me(function(e,t,r){var s=ee|N;if(r.length){var l=hr(r,yi(Qc));s|=k}return Gn(t,s,e,r,l)});function Xc(e,t,r){t=r?i:t;var s=Gn(e,ie,i,i,i,i,i,t);return s.placeholder=Xc.placeholder,s}function jc(e,t,r){t=r?i:t;var s=Gn(e,F,i,i,i,i,i,t);return s.placeholder=jc.placeholder,s}function Zc(e,t,r){var s,l,h,v,m,E,O=0,I=!1,L=!1,V=!0;if(typeof e!="function")throw new Jt(b);t=sn(t)||0,He(r)&&(I=!!r.leading,L="maxWait"in r,h=L?at(sn(r.maxWait)||0,t):h,V="trailing"in r?!!r.trailing:V);function j(Je){var yn=s,Zn=l;return s=l=i,O=Je,v=e.apply(Zn,yn),v}function ae(Je){return O=Je,m=ps(be,t),I?j(Je):v}function ve(Je){var yn=Je-E,Zn=Je-O,gd=t-yn;return L?gt(gd,h-Zn):gd}function le(Je){var yn=Je-E,Zn=Je-O;return E===i||yn>=t||yn<0||L&&Zn>=h}function be(){var Je=Do();if(le(Je))return Ee(Je);m=ps(be,ve(Je))}function Ee(Je){return m=i,V&&s?j(Je):(s=l=i,v)}function Ht(){m!==i&&lc(m),O=0,s=E=l=m=i}function Tt(){return m===i?v:Ee(Do())}function Kt(){var Je=Do(),yn=le(Je);if(s=arguments,l=this,E=Je,yn){if(m===i)return ae(E);if(L)return lc(m),m=ps(be,t),j(E)}return m===i&&(m=ps(be,t)),v}return Kt.cancel=Ht,Kt.flush=Tt,Kt}var Zv=me(function(e,t){return Wu(e,1,t)}),Jv=me(function(e,t,r){return Wu(e,sn(t)||0,r)});function eg(e){return Gn(e,Ne)}function Lo(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Jt(b);var r=function(){var s=arguments,l=t?t.apply(this,s):s[0],h=r.cache;if(h.has(l))return h.get(l);var v=e.apply(this,s);return r.cache=h.set(l,v)||h,v};return r.cache=new(Lo.Cache||Kn),r}Lo.Cache=Kn;function ko(e){if(typeof e!="function")throw new Jt(b);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function tg(e){return zc(2,e)}var ng=qp(function(e,t){t=t.length==1&&fe(t[0])?re(t[0],Wt(oe())):re(pt(t,1),Wt(oe()));var r=t.length;return me(function(s){for(var l=-1,h=gt(s.length,r);++l<h;)s[l]=t[l].call(this,s[l]);return X(e,this,s)})}),bl=me(function(e,t){var r=hr(t,yi(bl));return Gn(e,k,i,t,r)}),Jc=me(function(e,t){var r=hr(t,yi(Jc));return Gn(e,H,i,t,r)}),rg=zn(function(e,t){return Gn(e,xe,i,i,i,t)});function ig(e,t){if(typeof e!="function")throw new Jt(b);return t=t===i?t:_e(t),me(e,t)}function sg(e,t){if(typeof e!="function")throw new Jt(b);return t=t==null?0:at(_e(t),0),me(function(r){var s=r[t],l=mr(r,0,t);return s&&dt(l,s),X(e,this,l)})}function og(e,t,r){var s=!0,l=!0;if(typeof e!="function")throw new Jt(b);return He(r)&&(s="leading"in r?!!r.leading:s,l="trailing"in r?!!r.trailing:l),Zc(e,t,{leading:s,maxWait:t,trailing:l})}function ag(e){return Gc(e,1)}function lg(e,t){return bl(rl(t),e)}function ug(){if(!arguments.length)return[];var e=arguments[0];return fe(e)?e:[e]}function cg(e){return tn(e,ne)}function dg(e,t){return t=typeof t=="function"?t:i,tn(e,ne,t)}function fg(e){return tn(e,z|ne)}function hg(e,t){return t=typeof t=="function"?t:i,tn(e,z|ne,t)}function pg(e,t){return t==null||Uu(e,t,ft(t))}function bn(e,t){return e===t||e!==e&&t!==t}var _g=xo(Ka),vg=xo(function(e,t){return e>=t}),Hr=Yu((function(){return arguments})())?Yu:function(e){return ze(e)&&Re.call(e,"callee")&&!Lu.call(e,"callee")},fe=A.isArray,gg=u?Wt(u):xp;function $t(e){return e!=null&&$o(e.length)&&!Xn(e)}function Ze(e){return ze(e)&&$t(e)}function mg(e){return e===!0||e===!1||ze(e)&&wt(e)==Qe}var br=Lh||Nl,bg=c?Wt(c):Cp;function yg(e){return ze(e)&&e.nodeType===1&&!_s(e)}function Eg(e){if(e==null)return!0;if($t(e)&&(fe(e)||typeof e=="string"||typeof e.splice=="function"||br(e)||Ei(e)||Hr(e)))return!e.length;var t=mt(e);if(t==Et||t==ut)return!e.size;if(hs(e))return!za(e).length;for(var r in e)if(Re.call(e,r))return!1;return!0}function wg(e,t){return cs(e,t)}function Ag(e,t,r){r=typeof r=="function"?r:i;var s=r?r(e,t):i;return s===i?cs(e,t,i,r):!!s}function yl(e){if(!ze(e))return!1;var t=wt(e);return t==Tn||t==An||typeof e.message=="string"&&typeof e.name=="string"&&!_s(e)}function Tg(e){return typeof e=="number"&&$u(e)}function Xn(e){if(!He(e))return!1;var t=wt(e);return t==It||t==Sr||t==Ot||t==Wi}function ed(e){return typeof e=="number"&&e==_e(e)}function $o(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ye}function He(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function ze(e){return e!=null&&typeof e=="object"}var td=g?Wt(g):Op;function xg(e,t){return e===t||Ga(e,t,cl(t))}function Cg(e,t,r){return r=typeof r=="function"?r:i,Ga(e,t,cl(t),r)}function Sg(e){return nd(e)&&e!=+e}function Og(e){if(d_(e))throw new de(w);return Gu(e)}function Ig(e){return e===null}function Ng(e){return e==null}function nd(e){return typeof e=="number"||ze(e)&&wt(e)==Xt}function _s(e){if(!ze(e)||wt(e)!=nt)return!1;var t=oo(e);if(t===null)return!0;var r=Re.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&no.call(r)==Ch}var El=T?Wt(T):Ip;function Dg(e){return ed(e)&&e>=-Ye&&e<=Ye}var rd=M?Wt(M):Np;function Ro(e){return typeof e=="string"||!fe(e)&&ze(e)&&wt(e)==xn}function Vt(e){return typeof e=="symbol"||ze(e)&&wt(e)==Un}var Ei=Y?Wt(Y):Dp;function Lg(e){return e===i}function kg(e){return ze(e)&&mt(e)==Cn}function $g(e){return ze(e)&&wt(e)==Jr}var Rg=xo(Qa),Pg=xo(function(e,t){return e<=t});function id(e){if(!e)return[];if($t(e))return Ro(e)?gn(e):kt(e);if(ns&&e[ns])return ph(e[ns]());var t=mt(e),r=t==Et?Pa:t==ut?Js:wi;return r(e)}function jn(e){if(!e)return e===0?e:0;if(e=sn(e),e===We||e===-We){var t=e<0?-1:1;return t*dn}return e===e?e:0}function _e(e){var t=jn(e),r=t%1;return t===t?r?t-r:t:0}function sd(e){return e?Ur(_e(e),0,_t):0}function sn(e){if(typeof e=="number")return e;if(Vt(e))return fn;if(He(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=He(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Tu(e);var r=pa.test(e);return r||Wn.test(e)?Oa(e.slice(2),r?2:8):ha.test(e)?fn:+e}function od(e){return kn(e,Rt(e))}function Mg(e){return e?Ur(_e(e),-Ye,Ye):e===0?e:0}function Ie(e){return e==null?"":qt(e)}var Fg=mi(function(e,t){if(hs(t)||$t(t)){kn(t,ft(t),e);return}for(var r in t)Re.call(t,r)&&as(e,r,t[r])}),ad=mi(function(e,t){kn(t,Rt(t),e)}),Po=mi(function(e,t,r,s){kn(t,Rt(t),e,s)}),Bg=mi(function(e,t,r,s){kn(t,ft(t),e,s)}),Ug=zn(qa);function Wg(e,t){var r=gi(e);return t==null?r:Bu(r,t)}var qg=me(function(e,t){e=Be(e);var r=-1,s=t.length,l=s>2?t[2]:i;for(l&&At(t[0],t[1],l)&&(s=1);++r<s;)for(var h=t[r],v=Rt(h),m=-1,E=v.length;++m<E;){var O=v[m],I=e[O];(I===i||bn(I,pi[O])&&!Re.call(e,O))&&(e[O]=h[O])}return e}),Vg=me(function(e){return e.push(i,Tc),X(ld,i,e)});function Hg(e,t){return yu(e,oe(t,3),Ln)}function Kg(e,t){return yu(e,oe(t,3),Ha)}function Yg(e,t){return e==null?e:Va(e,oe(t,3),Rt)}function Gg(e,t){return e==null?e:Hu(e,oe(t,3),Rt)}function zg(e,t){return e&&Ln(e,oe(t,3))}function Qg(e,t){return e&&Ha(e,oe(t,3))}function Xg(e){return e==null?[]:go(e,ft(e))}function jg(e){return e==null?[]:go(e,Rt(e))}function wl(e,t,r){var s=e==null?i:Wr(e,t);return s===i?r:s}function Zg(e,t){return e!=null&&Sc(e,t,Ep)}function Al(e,t){return e!=null&&Sc(e,t,wp)}var Jg=bc(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=ro.call(t)),e[t]=r},xl(Pt)),em=bc(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=ro.call(t)),Re.call(e,t)?e[t].push(r):e[t]=[r]},oe),tm=me(us);function ft(e){return $t(e)?Mu(e):za(e)}function Rt(e){return $t(e)?Mu(e,!0):Lp(e)}function nm(e,t){var r={};return t=oe(t,3),Ln(e,function(s,l,h){Yn(r,t(s,l,h),s)}),r}function rm(e,t){var r={};return t=oe(t,3),Ln(e,function(s,l,h){Yn(r,l,t(s,l,h))}),r}var im=mi(function(e,t,r){mo(e,t,r)}),ld=mi(function(e,t,r,s){mo(e,t,r,s)}),sm=zn(function(e,t){var r={};if(e==null)return r;var s=!1;t=re(t,function(h){return h=gr(h,e),s||(s=h.length>1),h}),kn(e,ll(e),r),s&&(r=tn(r,z|te|ne,Jp));for(var l=t.length;l--;)el(r,t[l]);return r});function om(e,t){return ud(e,ko(oe(t)))}var am=zn(function(e,t){return e==null?{}:$p(e,t)});function ud(e,t){if(e==null)return{};var r=re(ll(e),function(s){return[s]});return t=oe(t),ec(e,r,function(s,l){return t(s,l[0])})}function lm(e,t,r){t=gr(t,e);var s=-1,l=t.length;for(l||(l=1,e=i);++s<l;){var h=e==null?i:e[$n(t[s])];h===i&&(s=l,h=r),e=Xn(h)?h.call(e):h}return e}function um(e,t,r){return e==null?e:ds(e,t,r)}function cm(e,t,r,s){return s=typeof s=="function"?s:i,e==null?e:ds(e,t,r,s)}var cd=wc(ft),dd=wc(Rt);function dm(e,t,r){var s=fe(e),l=s||br(e)||Ei(e);if(t=oe(t,4),r==null){var h=e&&e.constructor;l?r=s?new h:[]:He(e)?r=Xn(h)?gi(oo(e)):{}:r={}}return(l?q:Ln)(e,function(v,m,E){return t(r,v,m,E)}),r}function fm(e,t){return e==null?!0:el(e,t)}function hm(e,t,r){return e==null?e:sc(e,t,rl(r))}function pm(e,t,r,s){return s=typeof s=="function"?s:i,e==null?e:sc(e,t,rl(r),s)}function wi(e){return e==null?[]:Ra(e,ft(e))}function _m(e){return e==null?[]:Ra(e,Rt(e))}function vm(e,t,r){return r===i&&(r=t,t=i),r!==i&&(r=sn(r),r=r===r?r:0),t!==i&&(t=sn(t),t=t===t?t:0),Ur(sn(e),t,r)}function gm(e,t,r){return t=jn(t),r===i?(r=t,t=0):r=jn(r),e=sn(e),Ap(e,t,r)}function mm(e,t,r){if(r&&typeof r!="boolean"&&At(e,t,r)&&(t=r=i),r===i&&(typeof t=="boolean"?(r=t,t=i):typeof e=="boolean"&&(r=e,e=i)),e===i&&t===i?(e=0,t=1):(e=jn(e),t===i?(t=e,e=0):t=jn(t)),e>t){var s=e;e=t,t=s}if(r||e%1||t%1){var l=Ru();return gt(e+l*(t-e+Sa("1e-"+((l+"").length-1))),t)}return ja(e,t)}var bm=bi(function(e,t,r){return t=t.toLowerCase(),e+(r?fd(t):t)});function fd(e){return Tl(Ie(e).toLowerCase())}function hd(e){return e=Ie(e),e&&e.replace(ii,uh).replace(wa,"")}function ym(e,t,r){e=Ie(e),t=qt(t);var s=e.length;r=r===i?s:Ur(_e(r),0,s);var l=r;return r-=t.length,r>=0&&e.slice(r,l)==t}function Em(e){return e=Ie(e),e&&Ls.test(e)?e.replace(Ds,ch):e}function wm(e){return e=Ie(e),e&&ca.test(e)?e.replace(Vi,"\\$&"):e}var Am=bi(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),Tm=bi(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),xm=vc("toLowerCase");function Cm(e,t,r){e=Ie(e),t=_e(t);var s=t?fi(e):0;if(!t||s>=t)return e;var l=(t-s)/2;return To(co(l),r)+e+To(uo(l),r)}function Sm(e,t,r){e=Ie(e),t=_e(t);var s=t?fi(e):0;return t&&s<t?e+To(t-s,r):e}function Om(e,t,r){e=Ie(e),t=_e(t);var s=t?fi(e):0;return t&&s<t?To(t-s,r)+e:e}function Im(e,t,r){return r||t==null?t=0:t&&(t=+t),Ph(Ie(e).replace(ri,""),t||0)}function Nm(e,t,r){return(r?At(e,t,r):t===i)?t=1:t=_e(t),Za(Ie(e),t)}function Dm(){var e=arguments,t=Ie(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Lm=bi(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});function km(e,t,r){return r&&typeof r!="number"&&At(e,t,r)&&(t=r=i),r=r===i?_t:r>>>0,r?(e=Ie(e),e&&(typeof t=="string"||t!=null&&!El(t))&&(t=qt(t),!t&&di(e))?mr(gn(e),0,r):e.split(t,r)):[]}var $m=bi(function(e,t,r){return e+(r?" ":"")+Tl(t)});function Rm(e,t,r){return e=Ie(e),r=r==null?0:Ur(_e(r),0,e.length),t=qt(t),e.slice(r,r+t.length)==t}function Pm(e,t,r){var s=f.templateSettings;r&&At(e,t,r)&&(t=i),e=Ie(e),t=Po({},t,s,Ac);var l=Po({},t.imports,s.imports,Ac),h=ft(l),v=Ra(l,h),m,E,O=0,I=t.interpolate||ur,L="__p += '",V=Ma((t.escape||ur).source+"|"+I.source+"|"+(I===ti?vt:ur).source+"|"+(t.evaluate||ur).source+"|$","g"),j="//# sourceURL="+(Re.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Rr+"]")+`
`;e.replace(V,function(le,be,Ee,Ht,Tt,Kt){return Ee||(Ee=Ht),L+=e.slice(O,Kt).replace(va,dh),be&&(m=!0,L+=`' +
__e(`+be+`) +
'`),Tt&&(E=!0,L+=`';
`+Tt+`;
__p += '`),Ee&&(L+=`' +
((__t = (`+Ee+`)) == null ? '' : __t) +
'`),O=Kt+le.length,le}),L+=`';
`;var ae=Re.call(t,"variable")&&t.variable;if(!ae)L=`with (obj) {
`+L+`
}
`;else if(ar.test(ae))throw new de(x);L=(E?L.replace(la,""):L).replace(ua,"$1").replace(Is,"$1;"),L="function("+(ae||"obj")+`) {
`+(ae?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(m?", __e = _.escape":"")+(E?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+L+`return __p
}`;var ve=_d(function(){return Ce(h,j+"return "+L).apply(i,v)});if(ve.source=L,yl(ve))throw ve;return ve}function Mm(e){return Ie(e).toLowerCase()}function Fm(e){return Ie(e).toUpperCase()}function Bm(e,t,r){if(e=Ie(e),e&&(r||t===i))return Tu(e);if(!e||!(t=qt(t)))return e;var s=gn(e),l=gn(t),h=xu(s,l),v=Cu(s,l)+1;return mr(s,h,v).join("")}function Um(e,t,r){if(e=Ie(e),e&&(r||t===i))return e.slice(0,Ou(e)+1);if(!e||!(t=qt(t)))return e;var s=gn(e),l=Cu(s,gn(t))+1;return mr(s,0,l).join("")}function Wm(e,t,r){if(e=Ie(e),e&&(r||t===i))return e.replace(ri,"");if(!e||!(t=qt(t)))return e;var s=gn(e),l=xu(s,gn(t));return mr(s,l).join("")}function qm(e,t){var r=Me,s=et;if(He(t)){var l="separator"in t?t.separator:l;r="length"in t?_e(t.length):r,s="omission"in t?qt(t.omission):s}e=Ie(e);var h=e.length;if(di(e)){var v=gn(e);h=v.length}if(r>=h)return e;var m=r-fi(s);if(m<1)return s;var E=v?mr(v,0,m).join(""):e.slice(0,m);if(l===i)return E+s;if(v&&(m+=E.length-m),El(l)){if(e.slice(m).search(l)){var O,I=E;for(l.global||(l=Ma(l.source,Ie(lr.exec(l))+"g")),l.lastIndex=0;O=l.exec(I);)var L=O.index;E=E.slice(0,L===i?m:L)}}else if(e.indexOf(qt(l),m)!=m){var V=E.lastIndexOf(l);V>-1&&(E=E.slice(0,V))}return E+s}function Vm(e){return e=Ie(e),e&&ht.test(e)?e.replace(Ns,mh):e}var Hm=bi(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),Tl=vc("toUpperCase");function pd(e,t,r){return e=Ie(e),t=r?i:t,t===i?hh(e)?Eh(e):Na(e):e.match(t)||[]}var _d=me(function(e,t){try{return X(e,i,t)}catch(r){return yl(r)?r:new de(r)}}),Km=zn(function(e,t){return q(t,function(r){r=$n(r),Yn(e,r,ml(e[r],e))}),e});function Ym(e){var t=e==null?0:e.length,r=oe();return e=t?re(e,function(s){if(typeof s[1]!="function")throw new Jt(b);return[r(s[0]),s[1]]}):[],me(function(s){for(var l=-1;++l<t;){var h=e[l];if(X(h[0],this,s))return X(h[1],this,s)}})}function Gm(e){return mp(tn(e,z))}function xl(e){return function(){return e}}function zm(e,t){return e==null||e!==e?t:e}var Qm=mc(),Xm=mc(!0);function Pt(e){return e}function Cl(e){return zu(typeof e=="function"?e:tn(e,z))}function jm(e){return Xu(tn(e,z))}function Zm(e,t){return ju(e,tn(t,z))}var Jm=me(function(e,t){return function(r){return us(r,e,t)}}),eb=me(function(e,t){return function(r){return us(e,r,t)}});function Sl(e,t,r){var s=ft(t),l=go(t,s);r==null&&!(He(t)&&(l.length||!s.length))&&(r=t,t=e,e=this,l=go(t,ft(t)));var h=!(He(r)&&"chain"in r)||!!r.chain,v=Xn(e);return q(l,function(m){var E=t[m];e[m]=E,v&&(e.prototype[m]=function(){var O=this.__chain__;if(h||O){var I=e(this.__wrapped__),L=I.__actions__=kt(this.__actions__);return L.push({func:E,args:arguments,thisArg:e}),I.__chain__=O,I}return E.apply(e,dt([this.value()],arguments))})}),e}function tb(){return Fe._===this&&(Fe._=Sh),this}function Ol(){}function nb(e){return e=_e(e),me(function(t){return Zu(t,e)})}var rb=sl(re),ib=sl(Se),sb=sl(Vn);function vd(e){return fl(e)?Da($n(e)):Rp(e)}function ob(e){return function(t){return e==null?i:Wr(e,t)}}var ab=yc(),lb=yc(!0);function Il(){return[]}function Nl(){return!1}function ub(){return{}}function cb(){return""}function db(){return!0}function fb(e,t){if(e=_e(e),e<1||e>Ye)return[];var r=_t,s=gt(e,_t);t=oe(t),e-=_t;for(var l=$a(s,t);++r<e;)t(r);return l}function hb(e){return fe(e)?re(e,$n):Vt(e)?[e]:kt(Pc(Ie(e)))}function pb(e){var t=++xh;return Ie(e)+t}var _b=Ao(function(e,t){return e+t},0),vb=ol("ceil"),gb=Ao(function(e,t){return e/t},1),mb=ol("floor");function bb(e){return e&&e.length?vo(e,Pt,Ka):i}function yb(e,t){return e&&e.length?vo(e,oe(t,2),Ka):i}function Eb(e){return wu(e,Pt)}function wb(e,t){return wu(e,oe(t,2))}function Ab(e){return e&&e.length?vo(e,Pt,Qa):i}function Tb(e,t){return e&&e.length?vo(e,oe(t,2),Qa):i}var xb=Ao(function(e,t){return e*t},1),Cb=ol("round"),Sb=Ao(function(e,t){return e-t},0);function Ob(e){return e&&e.length?ka(e,Pt):0}function Ib(e,t){return e&&e.length?ka(e,oe(t,2)):0}return f.after=jv,f.ary=Gc,f.assign=Fg,f.assignIn=ad,f.assignInWith=Po,f.assignWith=Bg,f.at=Ug,f.before=zc,f.bind=ml,f.bindAll=Km,f.bindKey=Qc,f.castArray=ug,f.chain=Hc,f.chunk=m_,f.compact=b_,f.concat=y_,f.cond=Ym,f.conforms=Gm,f.constant=xl,f.countBy=Ov,f.create=Wg,f.curry=Xc,f.curryRight=jc,f.debounce=Zc,f.defaults=qg,f.defaultsDeep=Vg,f.defer=Zv,f.delay=Jv,f.difference=E_,f.differenceBy=w_,f.differenceWith=A_,f.drop=T_,f.dropRight=x_,f.dropRightWhile=C_,f.dropWhile=S_,f.fill=O_,f.filter=Nv,f.flatMap=kv,f.flatMapDeep=$v,f.flatMapDepth=Rv,f.flatten=Uc,f.flattenDeep=I_,f.flattenDepth=N_,f.flip=eg,f.flow=Qm,f.flowRight=Xm,f.fromPairs=D_,f.functions=Xg,f.functionsIn=jg,f.groupBy=Pv,f.initial=k_,f.intersection=$_,f.intersectionBy=R_,f.intersectionWith=P_,f.invert=Jg,f.invertBy=em,f.invokeMap=Fv,f.iteratee=Cl,f.keyBy=Bv,f.keys=ft,f.keysIn=Rt,f.map=No,f.mapKeys=nm,f.mapValues=rm,f.matches=jm,f.matchesProperty=Zm,f.memoize=Lo,f.merge=im,f.mergeWith=ld,f.method=Jm,f.methodOf=eb,f.mixin=Sl,f.negate=ko,f.nthArg=nb,f.omit=sm,f.omitBy=om,f.once=tg,f.orderBy=Uv,f.over=rb,f.overArgs=ng,f.overEvery=ib,f.overSome=sb,f.partial=bl,f.partialRight=Jc,f.partition=Wv,f.pick=am,f.pickBy=ud,f.property=vd,f.propertyOf=ob,f.pull=U_,f.pullAll=qc,f.pullAllBy=W_,f.pullAllWith=q_,f.pullAt=V_,f.range=ab,f.rangeRight=lb,f.rearg=rg,f.reject=Hv,f.remove=H_,f.rest=ig,f.reverse=vl,f.sampleSize=Yv,f.set=um,f.setWith=cm,f.shuffle=Gv,f.slice=K_,f.sortBy=Xv,f.sortedUniq=Z_,f.sortedUniqBy=J_,f.split=km,f.spread=sg,f.tail=ev,f.take=tv,f.takeRight=nv,f.takeRightWhile=rv,f.takeWhile=iv,f.tap=bv,f.throttle=og,f.thru=Io,f.toArray=id,f.toPairs=cd,f.toPairsIn=dd,f.toPath=hb,f.toPlainObject=od,f.transform=dm,f.unary=ag,f.union=sv,f.unionBy=ov,f.unionWith=av,f.uniq=lv,f.uniqBy=uv,f.uniqWith=cv,f.unset=fm,f.unzip=gl,f.unzipWith=Vc,f.update=hm,f.updateWith=pm,f.values=wi,f.valuesIn=_m,f.without=dv,f.words=pd,f.wrap=lg,f.xor=fv,f.xorBy=hv,f.xorWith=pv,f.zip=_v,f.zipObject=vv,f.zipObjectDeep=gv,f.zipWith=mv,f.entries=cd,f.entriesIn=dd,f.extend=ad,f.extendWith=Po,Sl(f,f),f.add=_b,f.attempt=_d,f.camelCase=bm,f.capitalize=fd,f.ceil=vb,f.clamp=vm,f.clone=cg,f.cloneDeep=fg,f.cloneDeepWith=hg,f.cloneWith=dg,f.conformsTo=pg,f.deburr=hd,f.defaultTo=zm,f.divide=gb,f.endsWith=ym,f.eq=bn,f.escape=Em,f.escapeRegExp=wm,f.every=Iv,f.find=Dv,f.findIndex=Fc,f.findKey=Hg,f.findLast=Lv,f.findLastIndex=Bc,f.findLastKey=Kg,f.floor=mb,f.forEach=Kc,f.forEachRight=Yc,f.forIn=Yg,f.forInRight=Gg,f.forOwn=zg,f.forOwnRight=Qg,f.get=wl,f.gt=_g,f.gte=vg,f.has=Zg,f.hasIn=Al,f.head=Wc,f.identity=Pt,f.includes=Mv,f.indexOf=L_,f.inRange=gm,f.invoke=tm,f.isArguments=Hr,f.isArray=fe,f.isArrayBuffer=gg,f.isArrayLike=$t,f.isArrayLikeObject=Ze,f.isBoolean=mg,f.isBuffer=br,f.isDate=bg,f.isElement=yg,f.isEmpty=Eg,f.isEqual=wg,f.isEqualWith=Ag,f.isError=yl,f.isFinite=Tg,f.isFunction=Xn,f.isInteger=ed,f.isLength=$o,f.isMap=td,f.isMatch=xg,f.isMatchWith=Cg,f.isNaN=Sg,f.isNative=Og,f.isNil=Ng,f.isNull=Ig,f.isNumber=nd,f.isObject=He,f.isObjectLike=ze,f.isPlainObject=_s,f.isRegExp=El,f.isSafeInteger=Dg,f.isSet=rd,f.isString=Ro,f.isSymbol=Vt,f.isTypedArray=Ei,f.isUndefined=Lg,f.isWeakMap=kg,f.isWeakSet=$g,f.join=M_,f.kebabCase=Am,f.last=rn,f.lastIndexOf=F_,f.lowerCase=Tm,f.lowerFirst=xm,f.lt=Rg,f.lte=Pg,f.max=bb,f.maxBy=yb,f.mean=Eb,f.meanBy=wb,f.min=Ab,f.minBy=Tb,f.stubArray=Il,f.stubFalse=Nl,f.stubObject=ub,f.stubString=cb,f.stubTrue=db,f.multiply=xb,f.nth=B_,f.noConflict=tb,f.noop=Ol,f.now=Do,f.pad=Cm,f.padEnd=Sm,f.padStart=Om,f.parseInt=Im,f.random=mm,f.reduce=qv,f.reduceRight=Vv,f.repeat=Nm,f.replace=Dm,f.result=lm,f.round=Cb,f.runInContext=y,f.sample=Kv,f.size=zv,f.snakeCase=Lm,f.some=Qv,f.sortedIndex=Y_,f.sortedIndexBy=G_,f.sortedIndexOf=z_,f.sortedLastIndex=Q_,f.sortedLastIndexBy=X_,f.sortedLastIndexOf=j_,f.startCase=$m,f.startsWith=Rm,f.subtract=Sb,f.sum=Ob,f.sumBy=Ib,f.template=Pm,f.times=fb,f.toFinite=jn,f.toInteger=_e,f.toLength=sd,f.toLower=Mm,f.toNumber=sn,f.toSafeInteger=Mg,f.toString=Ie,f.toUpper=Fm,f.trim=Bm,f.trimEnd=Um,f.trimStart=Wm,f.truncate=qm,f.unescape=Vm,f.uniqueId=pb,f.upperCase=Hm,f.upperFirst=Tl,f.each=Kc,f.eachRight=Yc,f.first=Wc,Sl(f,(function(){var e={};return Ln(f,function(t,r){Re.call(f.prototype,r)||(e[r]=t)}),e})(),{chain:!1}),f.VERSION=d,q(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){f[e].placeholder=f}),q(["drop","take"],function(e,t){ye.prototype[e]=function(r){r=r===i?1:at(_e(r),0);var s=this.__filtered__&&!t?new ye(this):this.clone();return s.__filtered__?s.__takeCount__=gt(r,s.__takeCount__):s.__views__.push({size:gt(r,_t),type:e+(s.__dir__<0?"Right":"")}),s},ye.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),q(["filter","map","takeWhile"],function(e,t){var r=t+1,s=r==Qt||r==lt;ye.prototype[e]=function(l){var h=this.clone();return h.__iteratees__.push({iteratee:oe(l,3),type:r}),h.__filtered__=h.__filtered__||s,h}}),q(["head","last"],function(e,t){var r="take"+(t?"Right":"");ye.prototype[e]=function(){return this[r](1).value()[0]}}),q(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");ye.prototype[e]=function(){return this.__filtered__?new ye(this):this[r](1)}}),ye.prototype.compact=function(){return this.filter(Pt)},ye.prototype.find=function(e){return this.filter(e).head()},ye.prototype.findLast=function(e){return this.reverse().find(e)},ye.prototype.invokeMap=me(function(e,t){return typeof e=="function"?new ye(this):this.map(function(r){return us(r,e,t)})}),ye.prototype.reject=function(e){return this.filter(ko(oe(e)))},ye.prototype.slice=function(e,t){e=_e(e);var r=this;return r.__filtered__&&(e>0||t<0)?new ye(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==i&&(t=_e(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},ye.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ye.prototype.toArray=function(){return this.take(_t)},Ln(ye.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),s=/^(?:head|last)$/.test(t),l=f[s?"take"+(t=="last"?"Right":""):t],h=s||/^find/.test(t);l&&(f.prototype[t]=function(){var v=this.__wrapped__,m=s?[1]:arguments,E=v instanceof ye,O=m[0],I=E||fe(v),L=function(be){var Ee=l.apply(f,dt([be],m));return s&&V?Ee[0]:Ee};I&&r&&typeof O=="function"&&O.length!=1&&(E=I=!1);var V=this.__chain__,j=!!this.__actions__.length,ae=h&&!V,ve=E&&!j;if(!h&&I){v=ve?v:new ye(this);var le=e.apply(v,m);return le.__actions__.push({func:Io,args:[L],thisArg:i}),new en(le,V)}return ae&&ve?e.apply(this,m):(le=this.thru(L),ae?s?le.value()[0]:le.value():le)})}),q(["pop","push","shift","sort","splice","unshift"],function(e){var t=eo[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",s=/^(?:pop|shift)$/.test(e);f.prototype[e]=function(){var l=arguments;if(s&&!this.__chain__){var h=this.value();return t.apply(fe(h)?h:[],l)}return this[r](function(v){return t.apply(fe(v)?v:[],l)})}}),Ln(ye.prototype,function(e,t){var r=f[t];if(r){var s=r.name+"";Re.call(vi,s)||(vi[s]=[]),vi[s].push({name:t,func:r})}}),vi[wo(i,N).name]=[{name:"wrapper",func:i}],ye.prototype.clone=Vh,ye.prototype.reverse=Hh,ye.prototype.value=Kh,f.prototype.at=yv,f.prototype.chain=Ev,f.prototype.commit=wv,f.prototype.next=Av,f.prototype.plant=xv,f.prototype.reverse=Cv,f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=Sv,f.prototype.first=f.prototype.head,ns&&(f.prototype[ns]=Tv),f}),hi=wh();Lt?((Lt.exports=hi)._=hi,Zi._=hi):Fe._=hi}).call(K1)})(ys,ys.exports)),ys.exports}var rf=Y1();const G1={class:"page-wrapper"},z1={class:"container-fluid px-3 py-3"},Q1={class:"row gx-3 gy-3"},X1={key:0,class:"row g-3 tablet-screen"},j1={class:"d-flex justify-content-between align-items-center mb-3"},Z1={style:{width:"250px",position:"relative"}},J1={key:1,type:"text",class:"form-control form-control-sm",placeholder:"Search categories...",disabled:"",style:{"border-radius":"8px",padding:"8px 12px"}},eA={key:0,class:"col-12 text-center py-5"},tA=["onClick"],nA={class:"cat-icon-wrap"},rA={class:"cat-icon"},iA=["src"],sA={key:1},oA={class:"cat-name"},aA={class:"cat-pill"},lA={key:0,class:"col-12"},uA={key:1},cA={class:"d-flex flex-wrap gap-2 align-items-center justify-content-between mb-3"},dA={class:"fw-bold mb-0"},fA={class:"d-flex gap-2 ms-auto align-items-center"},hA={class:"search-wrap position-relative"},pA={class:"row g-3"},_A={class:"position-relative",style:{flex:"0 0 40%","max-width":"40%"}},vA=["src"],gA={key:0,class:"position-absolute bottom-0 start-0 end-0 text-center bg-light bg-opacity-75 fw-semibold",style:{"font-size":"0.6rem !important",padding:"2px 4px"}},mA={key:0,class:"text-muted text-decoration-line-through me-1"},bA={class:"fw-bold text-success me-2"},yA={key:1,class:"text-muted text-decoration-line-through me-1"},EA={class:"fw-bold text-success"},wA={class:"text-decoration-line-through opacity-75 me-1"},AA={class:"fw-bold text-white"},TA={key:1,class:"position-absolute bottom-0 start-0 end-0 m-2 badge bg-danger py-2"},xA={class:"p-3 d-flex flex-column justify-content-between",style:{flex:"1 1 60%","min-width":"0",position:"relative"}},CA={key:0,class:"position-absolute px-2 py-1 rounded-pill bg-success text-white small fw-bold",style:{fontSize:"0.7rem",top:"7px",right:"7px"}},SA={key:0,class:"mb-3"},OA=["onUpdate:modelValue","onChange"],IA=["value"],NA={key:1},DA={class:"form-label small fw-semibold mb-2"},LA={key:0,class:"text-muted",style:{"font-size":"0.75rem"}},kA={key:0,class:"d-flex flex-wrap gap-1"},$A={key:1},RA={class:"d-flex justify-content-between align-items-center w-100"},PA={class:"fw-semibold text-success"},MA=["onClick"],FA=["onClick","disabled"],BA={class:"qty-box border rounded-pill px-2 py-2 text-center fw-semibold left-card-cntrl-btn",style:{"min-width":"55px"}},UA=["onClick","disabled"],WA={key:0,class:"col-lg-4"},qA={class:"cart card border-0 shadow-lg rounded-4"},VA={class:"cart-header"},HA={class:"order-type"},KA=["onClick"],YA={class:"cart-body"},GA={class:"mb-3"},zA={key:0,class:"row g-2"},QA={class:"col-6 table-dropdown"},XA=["value"],jA={key:0,class:"invalid-feedback d-block"},ZA={class:"col-6 table-dropdown"},JA={key:1},eT={key:0,class:"invalid-feedback d-block"},tT={key:2,class:"mt-2"},nT={key:0,class:"invalid-feedback d-block"},rT={key:1,class:"invalid-feedback d-block"},iT={class:"cart-lines"},sT={key:0,class:"empty"},oT={class:"line-left"},aT=["src"],lT={class:"meta"},uT=["title"],cT={key:0},dT={class:"badge bg-success",style:{"font-size":"0.65rem"}},fT={key:1,class:"addon-icons mt-1"},hT=["onClick","title"],pT={class:"text-muted small"},_T={key:0,class:"badge ms-1",style:{"font-size":"0.65rem",background:"#1B1670",color:"white"}},vT={key:1,class:"badge bg-success ms-1",style:{"font-size":"0.65rem"}},gT={key:2,class:"note"},mT={class:"line-right"},bT={class:"qty-controls"},yT=["onClick"],ET={class:"qty"},wT=["onClick","disabled"],AT={class:"price-delete"},TT={class:"price"},xT=["onClick"],CT={class:"totals"},ST={class:"trow"},OT={class:"sub-total"},IT={key:0,class:"trow"},NT={class:"text-info"},DT={key:1,class:"trow"},LT={class:"fw-semibold"},kT={key:2,class:"trow"},$T={class:"fw-semibold"},RT={key:3,class:"trow"},PT={class:"text-danger"},MT={key:4,class:"promos-section mb-3"},FT={class:"promo-total mt-2 rounded-3 bg-success-subtle"},BT={class:"d-flex justify-content-between align-items-center"},UT={class:"text-success fs-6"},WT={key:5,class:"pending-discounts-section mb-3"},qT={class:"d-flex align-items-center gap-2 text-warning"},VT={class:"text-warning"},HT={key:6,class:"approved-discounts-section mb-3"},KT={class:"trow border-top pt-2 mt-2"},YT={class:"text-success"},GT={class:"trow total"},zT={class:"mb-3"},QT={class:"mb-3"},XT={class:"cart-footer"},jT={class:"modal fade",id:"chooseItem",tabindex:"-1","aria-hidden":"true"},ZT={class:"modal-dialog modal-lg modal-dialog-centered"},JT={class:"modal-content rounded-4 border-0 shadow"},ex={class:"modal-header border-0"},tx={class:"modal-title fw-bold"},nx={class:"modal-body"},rx={class:"row g-3"},ix={class:"col-md-5"},sx=["src"],ox={class:"col-md-7"},ax={class:"h4 mb-3"},lx={class:"h4 d-flex align-items-center gap-2 flex-wrap"},ux={class:"text-decoration-line-through text-muted small"},cx={class:"badge bg-success"},dx={class:"text-decoration-line-through text-muted small"},fx={class:"badge bg-success"},hx={key:0,class:"mb-3"},px=["value"],_x={key:1,class:"mb-3"},vx={class:"border rounded-3 p-3 bg-light",style:{"max-height":"180px","overflow-y":"auto"}},gx={class:"d-flex align-items-center flex-grow-1 gap-3"},mx=["id","checked","onChange"],bx=["for"],yx={key:2},Ex={class:"form-label small fw-semibold mb-2"},wx={key:0,class:"text-muted",style:{"font-size":"0.75rem"}},Ax={key:0,class:"d-flex flex-wrap gap-1"},Tx={key:1},xx={class:"d-flex justify-content-between align-items-center w-100"},Cx={class:"fw-semibold text-success"},Sx={class:"chips mb-3"},Ox={key:0,class:"chip chip-orange"},Ix={key:1,class:"chip chip-green"},Nx={key:2,class:"chip chip-purple"},Dx={key:3,class:"chip chip-blue"},Lx={class:"qty-group gap-1"},kx={class:"qty-box rounded-pill"},$x=["disabled"],Rx={class:"mt-3"},Px={class:"modal fade",id:"addonManagementModal",tabindex:"-1","aria-hidden":"true"},Mx={class:"modal-dialog modal-lg modal-dialog-centered"},Fx={class:"modal-content rounded-4 border-0 shadow-lg"},Bx={key:0,class:"modal-body pt-2"},Ux={class:"alert alert-light border rounded-3 mb-3"},Wx={class:"d-flex align-items-center gap-3"},qx=["src"],Vx={class:"flex-grow-1"},Hx={class:"fw-bold fs-6"},Kx={class:"d-flex gap-3 mt-1"},Yx={class:"text-muted"},Gx={class:"fw-semibold"},zx={class:"text-muted"},Qx={class:"fw-semibold"},Xx={key:0,class:"table-responsive"},jx={class:"table table-hover align-middle mb-0"},Zx={class:"text-center"},Jx={class:"form-check d-flex justify-content-center"},eC=["checked","onChange"],tC={class:"d-flex align-items-center gap-2"},nC={class:"fw-semibold"},rC={key:0,class:"text-muted"},iC={class:"text-center"},sC={class:"badge bg-success-subtle text-success px-3 py-2 fs-6"},oC={class:"d-flex align-items-center justify-content-center gap-2"},aC=["onClick","disabled"],lC={class:"fw-bold fs-5 px-3",style:{"min-width":"50px","text-align":"center"}},uC=["onClick","disabled"],cC={key:1,class:"text-center text-muted py-5"},dC={class:"mt-3 p-3 rounded-3"},fC={key:0,class:"mt-3 p-3 rounded-3 border border-success bg-light"},hC={class:"text-success fw-semibold"},pC={__name:"Index",props:["client_secret","order_code"],setup(o){const{printReceipt:n,printKOT:i}=Hb(),{formatCurrencySymbol:d}=Ub();vs(()=>{Dl(()=>{document.querySelectorAll('[data-bs-toggle="popover"]').forEach(a=>{new sa(a)})})});const p=Z([]),w=Z(!0),b=Z(""),x=Z(Date.now()),S=`category-search-${Math.random().toString(36).substr(2,9)}`,B=Z(!1),D=bt(()=>{const a=b.value.trim().toLowerCase();return a?Pe.value.filter(u=>u.name.toLowerCase().includes(a)):Pe.value}),z=async()=>{w.value=!0;try{const a=await axios.get("/api/pos/fetch-menu-categories");p.value=a.data,p.value.length>0&&(An.value=p.value[0].id)}catch(a){console.error("Error fetching categories:",a)}finally{w.value=!1}},te=Z([]),ne=async()=>{try{const a=await axios.get("/api/pos/fetch-menu-items");te.value=a.data.data}catch(a){console.error("Error fetching inventory:",a)}},ge=bt(()=>{const a={};return te.value.forEach(u=>{const c=u.category?.id||"uncategorized",g=u.category?.name||"Uncategorized";a[c]||(a[c]=[]);const T={id:u.id,title:u.name,img:u.image_url||"/assets/img/default.png",stock:0,price:Number(u.price),label_color:u.label_color||"#1B1670",family:g,description:u.description,nutrition:u.nutrition,tags:u.tags,allergies:u.allergies,ingredients:u.ingredients??[],variants:u.variants??[],addon_groups:u.addon_groups??[],is_saleable:u.is_saleable,resale_type:u.resale_type,resale_value:u.resale_value};a[c].push(T)}),a}),J=Z({});Ai(()=>te.value,a=>{a&&a.length>0&&a.forEach(u=>{u.variants&&u.variants.length>0&&(J.value[u.id]||(J.value[u.id]=u.variants[0].id))})},{immediate:!0,deep:!0});const ee=a=>{if(!a.variants||a.variants.length===0)return null;const u=J.value[a.id];return u&&a.variants.find(c=>c.id===u)||a.variants[0]},N=(a,u)=>{const c=parseInt(u.target.value);J.value[a.id]=c;const g=a.variants.find(T=>T.id===c);g&&console.log(`Selected ${g.name} for ${a.title} - ${d(g.price)}`)},U=Z({}),ie=(a,u,c)=>{const g=a.id;U.value[g]||(U.value[g]={});const T=a.addon_groups.find(M=>M.group_id===u);if(T&&T.max_select>0&&c.length>T.max_select){ce.warning(`You can only select up to ${T.max_select} ${T.group_name}`);const M=U.value[g][u]||[];U.value[g][u]=M.slice(0,T.max_select);return}U.value[g][u]=c},F=a=>{const u=a.id;if(!U.value[u])return 0;let c=0;return Object.values(U.value[u]).forEach(g=>{g.forEach(T=>{c+=parseFloat(T.price||0)})}),c},k=a=>{const u=a.id;if(!U.value[u])return[];const c=[];return Object.values(U.value[u]).forEach(g=>{g.forEach(T=>{c.push({id:T.id,name:T.name,price:parseFloat(T.price),group_id:T.group_id||T.pivot?.addon_group_id})})}),c},H=Z([]),ue=()=>{if(!Q.value)return[];const a=qe();return a&&a.ingredients&&a.ingredients.length>0?a.ingredients:Q.value.ingredients||[]},xe=a=>H.value.includes(a),Ne=a=>{const u=H.value.indexOf(a);u>-1?(H.value.splice(u,1),ce.info("Ingredient added back")):(H.value.push(a),ce.info("Ingredient removed"))},Me=()=>{if(H.value.length===0)return null;const a=ue(),u=H.value.map(c=>{const g=a.find(T=>T.id===c||T.inventory_item_id===c);return g?g.product_name||g.name:null}).filter(Boolean);return u.length===0?null:`No ${u.join(", ")}`},et=async a=>{Q.value=a,Or.value="",Nn.value=null,pn.value={},a.variants&&a.variants.length>0&&(Nn.value=a.variants[0].id);const u=a.variants&&a.variants.length>0?a.variants[0]:null,c=u?u.id:null,g=Ut(a,c),T=rt(a,c,g);je.value=T>0?1:0,H.value=[];const M=document.getElementById("chooseItem"),Y=new bootstrap.Modal(M);M.addEventListener("shown.bs.modal",async()=>{await Dl()},{once:!0}),Y.show()},rt=(a,u,c)=>{const g=c.filter(Y=>!H.value.includes(Y.id||Y.inventory_item_id));if(!g||g.length===0)return 999999;const T={};for(const Y of G.value)Ut(Y,Y.variant_id).filter(q=>!Y.removed_ingredients||Y.removed_ingredients.length===0?!0:!Y.removed_ingredients.includes(q.id||q.inventory_item_id)).forEach(q=>{const $e=q.inventory_item_id,Se=Number(q.inventory_stock??q.inventory_item?.stock??0);T[$e]||(T[$e]={totalStock:Se,used:0});const Oe=Number(q.quantity??q.qty??1)*Y.qty;T[$e].used+=Oe});let M=999999;for(const Y of g){const X=Y.inventory_item_id,ke=Number(Y.inventory_stock??Y.inventory_item?.stock??0),q=Number(Y.quantity??Y.qty??1);if(T[X]){const $e=T[X].totalStock-T[X].used,Se=Math.floor($e/q);M=Math.min(M,Se)}else{const $e=Math.floor(ke/q);M=Math.min(M,$e)}}return M},it=()=>{const a=qe(),u=a?a.id:null,c=Ut(Q.value,u),g=rt(Q.value,u,c);if(g<=0){ce.error("No stock available for this variant. Please remove items from cart first."),je.value=0;return}je.value=Math.min(1,g)},Qt=(a,u)=>{if(!Q.value)return;const c=Q.value.addon_groups.find(g=>g.group_id===a);if(c&&c.max_select>0&&u.length>c.max_select){ce.warning(`You can only select up to ${c.max_select} ${c.group_name}`),pn.value[a]=u.slice(0,c.max_select);return}pn.value[a]=u},qe=()=>{if(!Q.value||!Q.value.variants||Q.value.variants.length===0)return null;const a=Nn.value;return a&&Q.value.variants.find(u=>u.id===a)||Q.value.variants[0]},lt=()=>{if(!Q.value)return 0;const a=qe();return parseFloat(a?a.price:Q.value.price||0)},We=()=>{let a=0;return Object.values(pn.value).forEach(u=>{u.forEach(c=>{a+=parseFloat(c.price||0)})}),a},Ye=()=>{if(!Q.value)return{};const a=qe();return a&&a.nutrition?a.nutrition:Q.value.nutrition||{}},dn=()=>{if(!Q.value)return[];const a=qe();return a&&a.allergies&&a.allergies.length>0?a.allergies:Q.value.allergies||[]},fn=()=>{if(!Q.value)return[];const a=qe();return a&&a.tags&&a.tags.length>0?a.tags:Q.value.tags||[]},_t=()=>{const a=[];return Object.values(pn.value).forEach(u=>{u.forEach(c=>{a.push({id:c.id,name:c.name,price:parseFloat(c.price),group_id:c.group_id||c.pivot?.addon_group_id})})}),a},Bt=a=>{if(!a)return 0;const u=ee(a),c=u?u.id:null,g=Ut(a,c);if(!g.length)return 999999;let T=1/0;return g.forEach(M=>{const Y=Number(M.quantity??M.qty??1),X=Number(M.inventory_stock??M.inventory_item?.stock??0);if(Y<=0)return;const ke=Math.floor(X/Y);T=Math.min(T,ke)}),T===1/0?0:T},Fn=a=>Bt(a),St=Z(""),we=Z("dine"),tt=Z("Walk In"),Ot=Z(" "),Qe=Z(" "),hn=Z(10),An=Z(null),Tn=a=>An.value=a,It=Z(!0),Sr=a=>{Tn(a.id),It.value=!1},Et=()=>It.value=!0,Xt=Z({}),Bn=Z([]),nt=Z(null),Zr=async()=>{try{const a=await axios.get("/api/pos/fetch-profile-tables");Xt.value=a.data,Xt.value.order_types&&(Bn.value=Xt.value.order_types.map(u=>u.charAt(0).toUpperCase()+u.slice(1)),we.value=Bn.value[0])}catch(a){console.error("Error fetching profile tables:",a)}},Wi=bt(()=>ge.value[An.value]??[]),Ue=Z({sortBy:"",priceMin:null,priceMax:null}),ut=bt(()=>{let a=Wi.value;const u=St.value.trim().toLowerCase();if(u&&(a=a.filter(c=>c.title.toLowerCase().includes(u)||(c.family||"").toLowerCase().includes(u)||(c.description||"").toLowerCase().includes(u)||(c.tags?.map(g=>g.name.toLowerCase()).join(", ")||"").includes(u))),Ue.value.priceMin!==null&&Ue.value.priceMin!==""&&(a=a.filter(c=>c.price>=Ue.value.priceMin)),Ue.value.priceMax!==null&&Ue.value.priceMax!==""&&(a=a.filter(c=>c.price<=Ue.value.priceMax)),Ue.value.sortBy)switch(a=[...a],Ue.value.sortBy){case"name_asc":a.sort((c,g)=>c.title.localeCompare(g.title));break;case"name_desc":a.sort((c,g)=>g.title.localeCompare(c.title));break;case"price_asc":a.sort((c,g)=>c.price-g.price);break;case"price_desc":a.sort((c,g)=>g.price-c.price);break;case"stock_asc":a.sort((c,g)=>(c.stock??0)-(g.stock??0));break;case"stock_desc":a.sort((c,g)=>(g.stock??0)-(c.stock??0));break}return a}),xn=a=>{Ue.value={...a}},Un=()=>{Ue.value={sortBy:"",priceMin:null,priceMax:null}},G=Z([]),Cn=async a=>{const u=G.value[a];if(u){if((u.stock??0)<=0){ce.error("Item out of stock.");return}if(!Xi(u)){const c=u.variant_name?` (${u.variant_name})`:"";ce.error(`Not enough ingredients for "${u.title}${c}".`),u.outOfStock=!0;return}u.outOfStock=!1,u.qty++,u.price=u.unit_price*u.qty,u.resale_discount_per_item&&(u.total_resale_discount=u.resale_discount_per_item*u.qty)}},Jr=async a=>{const u=G.value[a];if(!u||u.qty<=1){ce.error("Cannot reduce below 1.");return}u.qty--,u.price=u.unit_price*u.qty,u.resale_discount_per_item&&(u.total_resale_discount=u.resale_discount_per_item*u.qty),u.outOfStock=!1},Sn=a=>{if(G.value[a],G.value.splice(a,1),G.value.length===0){vt.value=[],De.value=[],Nt.value=[],Wn();return}De.value.length>0&&(De.value=De.value.filter(c=>{if(!c.menu_items||c.menu_items.length===0)return!0;const g=c.menu_items.map(M=>M.id);return G.value.some(M=>g.includes(M.id))}));const u=[];vt.value.forEach(c=>{c.min_purchase&&Xe.value<c.min_purchase?ce.info(`Discount "${c.name}" removed — subtotal is lower than minimum required (${d(c.min_purchase)}).`):u.push(c)}),vt.value=u},Xe=bt(()=>G.value.reduce((a,u)=>a+u.price,0)),On=bt(()=>{if(we.value!=="Delivery")return 0;const a=jt.props.onboarding.tax_and_vat;return a.has_delivery_charges?a.delivery_charge_flat?parseFloat(a.delivery_charge_flat):a.delivery_charge_percentage?Xe.value*parseFloat(a.delivery_charge_percentage)/100:0:0}),In=bt(()=>{const a=jt.props.onboarding.tax_and_vat;return a.has_service_charges?a.service_charge_flat?parseFloat(a.service_charge_flat):a.service_charge_percentage?Xe.value*parseFloat(a.service_charge_percentage)/100:0:0}),ei=a=>`£${(Math.round(a*100)/100).toFixed(2)}`,Q=Z(null),je=Z(0),Or=Z(""),Nn=Z(null),pn=Z({}),_n=Z(""),la=async()=>{if(!Q.value)return;const a=qe(),u=a?a.id:null,c=a?` (${a.name})`:"";if(je.value<=0){ce.error(`No stock available for "${Q.value.title}${c}". Please remove some from cart first.`);return}const g=a?a.name:null,T=parseFloat(a?a.price:Q.value.price),M=_t(),Y=We(),X=T+Y,ke=a?Dt(a,!0):Dt(Q.value,!1),q=Ut(Q.value,u),$e=rt(Q.value,u,q);if(je.value>$e){$e<=0?ce.error(`No more stock available for "${Q.value.title}${c}". Please remove some from cart first.`):(ce.error(`Only ${$e} item(s) available. Please reduce quantity or remove items from cart.`),je.value=$e);return}const Se=Me(),Oe={};for(const Ge of G.value)Ut(Ge,Ge.variant_id).forEach(re=>{const dt=re.inventory_item_id;Oe[dt]||(Oe[dt]=parseFloat(re.inventory_stock)),Oe[dt]-=parseFloat(re.quantity)*Ge.qty});if(q.length>0)for(const Ge of q){const ct=Ge.inventory_item_id,re=Oe[ct]??parseFloat(Ge.inventory_stock),dt=parseFloat(Ge.quantity)*je.value;if(re<dt){ce.error(`Not enough stock for "${Q.value.title}${c}".`);return}}try{const Ge=M.map(st=>st.id).sort((st,Pr)=>st-Pr).join("-"),ct=q.length>0?ua(q):999999,re=G.value.findIndex(st=>{if(st.variant_id!==u)return!1;const Pr=(st.addons||[]).map(Vn=>Vn.id).sort((Vn,es)=>Vn-es).join("-");return st.id===Q.value.id&&Pr===Ge});if(re>=0){if(G.value[re].qty+=je.value,G.value[re].price=G.value[re].unit_price*G.value[re].qty,G.value[re].total_resale_discount=ke*G.value[re].qty,_n.value&&_n.value.trim()){const st=G.value[re].item_kitchen_note||"",Pr=_n.value.trim(),Vn=[st,Pr,Se].filter(Boolean).filter((es,Ia,Na)=>Na.indexOf(es)===Ia);G.value[re].item_kitchen_note=Vn.join("; ")}else if(Se){const st=G.value[re].item_kitchen_note||"";G.value[re].item_kitchen_note=[st,Se].filter(Boolean).join("; ")}H.value.length>0&&(G.value[re].removed_ingredients=[...H.value]),ce.success(`Quantity updated to ${G.value[re].qty}`)}else{const st=[_n.value.trim(),Se].filter(Boolean).join(". ");G.value.push({id:Q.value.id,title:Q.value.title,img:Q.value.img,price:X*je.value,unit_price:Number(X),qty:je.value,note:Or.value||"",item_kitchen_note:st,stock:ct,ingredients:q,variant_id:u,variant_name:g,addons:M,removed_ingredients:[...H.value],resale_discount_per_item:ke,total_resale_discount:ke*je.value}),ce.success(`${Q.value.title} added to cart`)}await Us(Q.value),bootstrap.Modal.getInstance(document.getElementById("chooseItem")).hide(),je.value=0,Or.value="",_n.value="",Nn.value=null,pn.value={},H.value=[]}catch(Ge){ce.error("Failed to add item: "+(Ge.response?.data?.message||Ge.message))}},ua=a=>{if(!a||a.length===0)return 999999;let u=1/0;return a.forEach(c=>{const g=Number(c.quantity??c.qty??1),T=Number(c.inventory_stock??c.inventory_item?.stock??0);if(g<=0)return;const M=Math.floor(T/g);u=Math.min(u,M)}),u===1/0?0:u},Is=()=>{if(!Q.value)return!1;const a=qe(),u=a?a.id:null,c=Ut(Q.value,u);if(!c.length)return!0;const g=rt(Q.value,u,c);return je.value+1<=g},Ns=()=>{if(!Is()){const a=qe(),u=a?` (${a.name})`:"",c=a?a.id:null,g=Ut(Q.value,c);rt(Q.value,c,g)<=0?ce.error(`No more stock available for "${Q.value?.title}${u}". Please remove some from cart first.`):ce.error(`Not enough ingredients for "${Q.value?.title}${u}".`);return}je.value++},Ds=()=>{je.value>1&&je.value--},ht=Z({}),Ls=()=>{G.value=[],tt.value="Walk In",Qe.value="",Ot.value="",nt.value=null,we.value=Bn.value[0]||"dine_in",sr.value="",or.value="",hn.value=0,De.value=[],vt.value=[],Nt.value=[],lr.value=[],Wn()};Ai(we,()=>ht.value={});const sr=Z(""),or=Z(""),ti=Z(!1),Ir=Z(null),ni=Z(!1),qi=Z(0),Vi=()=>{const a={};for(const u of G.value){const c=u.ingredients||[];c.length!==0&&c.forEach(g=>{const T=g.inventory_item_id,M=parseFloat(g.inventory_stock??g.inventory_item?.stock??0),Y=parseFloat(g.quantity??g.qty??1)*u.qty;a[T]||(a[T]={name:g.product_name||"Unknown",totalStock:M,totalUsed:0}),a[T].totalUsed+=Y})}for(const[u,c]of Object.entries(a))if(c.totalUsed>c.totalStock)return ce.error(`Not enough "${c.name}". Need ${c.totalUsed.toFixed(2)} but only ${c.totalStock.toFixed(2)} available.`),!1;return!0},ca=()=>{if(G.value.length===0){ce.error("Please add at least one item to the cart.");return}if(we.value==="Dine_in"&&!nt.value){ht.value.table_number=["Table number is required for dine-in orders."],ce.error("Please select a table number for Dine In orders.");return}if((we.value==="Delivery"||we.value==="Takeaway")&&!tt.value){ht.value.customer=["Customer name is required."],ce.error("Customer name is required.");return}if(we.value==="Delivery"&&!Ot.value){ht.value.phoneNumber=["Phone number is required for delivery."],ce.error("Phone number is required for delivery.");return}if(we.value==="Delivery"&&!Qe.value){ht.value.deliveryLocation=["Delivery location is required."],ce.error("Delivery location is required.");return}Vi()&&(qi.value=parseFloat(dr.value).toFixed(2),ni.value=!0)},ri=()=>({name:"Business Name",phone:"",address:"",footer:"Thank you!",currency:"£",logo_url:null}),ks=async a=>{const u=ri();await n({order_date:a.order_date,order_time:a.order_time,customer_name:a.customer_name||"Walk In",order_type:a.order_type,payment_type:a.payment_type,cash_received:a.cash_received||0,sub_total:a.sub_total,total_amount:a.total_amount,items:a.items.map(c=>({title:c.title,quantity:c.quantity||c.qty,unit_price:c.unit_price}))},u)},$s=async a=>{const u=ri();await i({order_date:a.order_date,order_time:a.order_time,customer_name:a.customer_name||a.table_number,order_type:a.order_type,kitchen_note:a.kitchen_note,items:a.items.map(c=>({title:c.title,quantity:c.quantity||c.qty,item_kitchen_note:c.item_kitchen_note}))},u)},da=Z("cash"),fa=Z(0),Nt=Z([]),ar=Z(null),Rs=Z(!1),vt=Z([]),lr=Z([]),ha=async a=>{if(!a||a.length===0){ce.warning("No discounts selected.");return}const u=lr.value.map(g=>g.id),c=a.filter(g=>!u.includes(g.id));if(c.length===0){ce.error("All selected discounts have been rejected for this order.");return}if(c.length<a.length){const g=a.length-c.length;ce.warning(`${g} discount(s) were previously rejected and cannot be requested again.`)}try{const g=await axios.post("/api/discount-approvals/request",{discounts:a.map(T=>({discount_id:T.id,discount_percentage:parseFloat(T.discount_amount),discount_name:T.name})),order_items:G.value.map(T=>({id:T.id,title:T.title,qty:T.qty,unit_price:T.unit_price,price:T.price})),order_subtotal:Xe.value,request_note:`Discount approval request from ${Rr.value?.name||"Cashier"}`});g.data.success&&(Nt.value=g.data.data.map(T=>({...T,discountData:a.find(M=>M.id===T.discount_id),percentage:parseFloat(T.discount_percentage),status:"pending"})),Lr.value=!1,Rs.value=!0,ce.info("Discount approval request sent to Super Admin. Waiting for approval..."),pa())}catch(g){console.error("Error requesting discount approval:",g),ce.error(g.response?.data?.message||"Failed to request discount approval")}},pa=()=>{ar.value&&clearInterval(ar.value),ar.value=setInterval(async()=>{await Ps()},3e3)},Ps=async()=>{if(Nt.value.length===0){Wn();return}try{const a=Nt.value.map(c=>c.id),u=await axios.post("/api/discount-approvals/check-status",{approval_ids:a});u.data.success&&(u.data.data.forEach(g=>{if(g.status!=="pending"){const T=Nt.value.findIndex(M=>M.id===g.id);if(T>=0){if(g.status==="approved"){const M={id:g.discount_id,name:g.discount_name||g.discount?.name,percentage:parseFloat(g.discount_percentage),approval_id:g.id};_a(M),ce.success(`Discount "${M.name}" (${M.percentage}%) approved!`)}else g.status==="rejected"&&(lr.value.push({id:g.discount_id,name:g.discount_name,percentage:parseFloat(g.discount_percentage),rejection_reason:g.approval_note}),ce.error(`Discount "${g.discount_name}" rejected.`+(g.approval_note?` Reason: ${g.approval_note}`:"")));Nt.value.splice(T,1)}}}),Nt.value.length===0&&(Rs.value=!1,Wn()))}catch(a){console.error("Error checking approval status:",a)}},Wn=()=>{ar.value&&(clearInterval(ar.value),ar.value=null)},_a=a=>{vt.value.push(a)};kb(()=>{Wn()}),vs(()=>{window.Echo&&window.Echo.channel("discount-approvals").listen(".approval.responded",a=>{Ps()})});const ii=bt(()=>!vt.value||vt.value.length===0?0:vt.value.reduce((a,u)=>{const c=parseFloat(u.percentage||0),g=Xe.value*c/100;return a+g},0)),ur=a=>Xe.value*a/100,va=()=>{vt.value=[],Nt.value=[],lr.value=[],Wn()},si=async({paymentMethod:a,cashReceived:u,cardAmount:c,changeAmount:g,items:T,autoPrintKot:M,done:Y})=>{ht.value={};try{const X={customer_name:tt.value,phone_number:Ot.value,delivery_location:Qe.value,sub_total:Xe.value,tax:Dn.value,service_charges:In.value,delivery_charges:On.value,sales_discount:Zt.value,approved_discounts:ii.value,approved_discount_details:vt.value.map(q=>({discount_id:q.id,discount_name:q.name,discount_percentage:q.percentage,discount_amount:ur(q.percentage),approval_id:q.approval_id})),promo_discount:cr.value,applied_promos:De.value.map(q=>({promo_id:q.id,promo_name:q.name,promo_type:q.type,discount_amount:q.applied_discount||0,applied_to_items:q.applied_to_items||[]})),total_amount:dr.value,note:sr.value,kitchen_note:or.value,order_date:new Date().toISOString().split("T")[0],order_time:new Date().toTimeString().split(" ")[0],order_type:we.value==="Dine_in"?"Dine In":we.value==="Delivery"?"Delivery":we.value==="Takeaway"?"Takeaway":"Collection",table_number:nt.value?.name||null,payment_method:a,auto_print_kot:M,cash_received:u,change:g,...a==="Split"&&{payment_type:"split",cash_amount:u,card_amount:c},items:(G.value??[]).map(q=>{const $e=te.value.find(ct=>ct.id===q.id);let Se=$e;if(q.variant_id&&$e?.variants){const ct=$e.variants.find(re=>re.id===q.variant_id);ct&&(Se=ct)}const Oe=Se?Dt(Se,!!q.variant_id):0,Ge=parseFloat(Se?.price||q.unit_price);return{product_id:q.id,title:q.title,quantity:q.qty,price:q.price,note:q.note??"",kitchen_note:or.value??"",unit_price:q.unit_price,item_kitchen_note:q.item_kitchen_note??"",tax_percentage:ba(q),tax_amount:Hs(q),variant_id:q.variant_id||null,variant_name:q.variant_name||null,addons:q.addons||[],sale_discount_per_item:Oe,removed_ingredients:q.removed_ingredients||[]}})},ke=await axios.post("/pos/order",X);if(ke.data.logout===!0){ce.success(ke.data.message||"Order created successfully. Logging out..."),setTimeout(()=>{window.location.href=ke.data.redirect||"/login"},1e3),Y&&Y();return}Ls(),ni.value=!1,ce.success(ke.data.message),Ir.value={...ke.data.order,...X,items:X.items,payment_type:a==="Split"?"split":a.toLowerCase(),cash_amount:a==="Split"?u:null,card_amount:a==="Split"?c:null},M&&(Nr.value=await ma(),$s(JSON.parse(JSON.stringify(Ir.value)))),ks(JSON.parse(JSON.stringify(Ir.value))),De.value=[],vt.value=[],Nt.value=[],Wn()}catch(X){console.error("Order submission error:",X),ce.error(X.response?.data?.message||"Failed to place order")}finally{Y&&Y()}};vs(async()=>{if(window.bootstrap){document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(u=>new window.bootstrap.Tooltip(u));const a=document.getElementById("chooseItem");a&&new window.bootstrap.Modal(a,{backdrop:"static"})}b.value="",x.value=Date.now(),await Dl(),setTimeout(()=>{B.value=!0;const a=document.getElementById(S);a&&(a.value="",b.value="")},100),z(),ne(),Zr()});const jt=Lb();function Ms(){const a=jt.props.flash?.success,u=jt.props.flash?.error;a&&ce.success(a,{autoClose:4e3}),u&&ce.error(u,{autoClose:6e3})}vs(()=>Ms()),vs(()=>{jt.props.flash?.success;const a=jt.props.flash?.error;a&&ce.error(a);const u=jt.props.flash?.print_payload;u&&setTimeout(()=>ks(u),250),u&&setTimeout(()=>$s(u),250)}),Ai(()=>jt.props.flash,()=>Ms(),{deep:!0});const ga=({id:a,status:u,message:c})=>{Nr.value=Nr.value.map(g=>g.id===a?{...g,status:u}:g)},Hi=Z(!1),Nr=Z([]),Fs=Z(!1),oi=Z(!1),Ki=Z([]),Yi=Z(!1),ma=async()=>{oi.value=!0,Ki.value=[],Yi.value=!0;try{const a=await axios.get("/api/pos/orders/today");Ki.value=a.data.orders}catch(a){console.error("Failed to fetch POS orders:",a),ce.error(a.response?.data?.message||"Failed to fetch POS orders")}finally{Yi.value=!1}},Dr=Z(!1),Lr=Z(!1),ai=Z(!0),kr=Z(!0),li=Z([]),$r=Z([]),De=Z([]),Bs=a=>{if(De.value=a,!a||a.length===0){ce.warning("No promos selected.");return}const u=a.reduce((g,T)=>g+parseFloat(T.applied_discount||0),0);if(u<=0){ce.warning("Selected promos don't provide any discount for current cart items."),De.value=[];return}const c=new Set(a.flatMap(g=>g.applied_to_items||[])).size;ce.success(`${a.length} promo(s) applied! Applied to ${c} item(s). You saved ${d(u)}`),Dr.value=!1},Us=async()=>{ai.value=!0,Dr.value=!0;try{const a=await axios.get("/api/promos/current");a.data?.success?li.value=a.data.data||[]:(console.warn("Failed to fetch promos:",a.data),li.value=[],ce.warning("No promos available at the moment"))}catch(a){console.error("Error fetching current meal promos:",a),li.value=[],ce.error("Failed to load promotions")}finally{ai.value=!1}},Ws=async()=>{kr.value=!0,Lr.value=!0;try{const a=await axios.get("/api/discounts/all");a.data?.success?$r.value=a.data.data||[]:(console.warn("Failed to fetch discounts:",a.data),$r.value=[],ce.warning("No discounts available at the moment"))}catch(a){console.error("Error fetching current meal discounts:",a),$r.value=[],ce.error("Failed to load discounts")}finally{kr.value=!1}},qs=a=>!De.value||De.value.length===0?!1:De.value.some(u=>!u.menu_items||u.menu_items.length===0?!0:u.menu_items.map(g=>g.id).includes(a.id)),Gi=a=>{Ir.value=a,ti.value=!0,oi.value=!1},cr=bt(()=>!De.value||De.value.length===0?0:De.value.reduce((a,u)=>{const c=parseFloat(u.discount_amount??0)||0;if(u.applied_discount!==void 0)return a+parseFloat(u.applied_discount);const g=Vs(u);if(u.min_purchase&&g<parseFloat(u.min_purchase))return a;if(u.type==="flat")return a+c;if(u.type==="percent"){const T=g*c/100,M=parseFloat(u.max_discount??0)||0;return M>0&&T>M?a+M:a+T}return a},0)),Vs=a=>{if(!a.menu_items||a.menu_items.length===0)return G.value.reduce((c,g)=>c+g.unit_price*g.qty,0);const u=a.menu_items.map(c=>c.id);return G.value.filter(c=>u.includes(c.id)).reduce((c,g)=>c+g.unit_price*g.qty,0)},zi=bt(()=>!De.value||De.value.length===0?[]:De.value.map(a=>({promo_id:a.id,promo_name:a.name,promo_type:a.type,discount_amount:a.applied_discount||0,applied_to_items:a.applied_to_items||[]}))),Dn=bt(()=>{let a=0;const u=parseFloat(jt.props.onboarding.tax_and_vat.tax_rate)||0;return G.value.forEach(c=>{const g=te.value.find(T=>T.id===c.id);if(g&&g.is_taxable){const M=c.unit_price*c.qty*u/100;a+=M}}),a}),Zt=bt(()=>G.value.reduce((a,u)=>a+(u.total_resale_discount||0),0)),dr=bt(()=>{const a=Xe.value+Dn.value+On.value+In.value-Zt.value-cr.value-ii.value;return Math.max(0,a)}),Hs=a=>{const u=te.value.find(c=>c.id===a.id);return u&&u.is_taxable&&u.tax_percentage?a.unit_price*a.qty*parseFloat(u.tax_percentage)/100:0},ba=a=>{const u=te.value.find(c=>c.id===a.id);return u&&u.is_taxable&&u.tax_percentage?parseFloat(u.tax_percentage):0},ui=a=>{const u=ee(a),c=u?u.id:null,T=k(a).map(Y=>Y.id).sort().join("-"),M=G.value.find(Y=>{const X=(Y.addons||[]).map(ke=>ke.id).sort().join("-");return Y.id===a.id&&Y.variant_id===c&&X===T});return M?M.qty:0},Qi=a=>{const u=ee(a),c=u?u.id:null,g=Ut(a,c);if(!g.length)return!0;const T=ui(a);if(Fn(a)<=0)return!1;const Y={};for(const X of G.value)Ut(X,X.variant_id).forEach(q=>{const $e=q.inventory_item_id,Se=Number(q.inventory_stock??q.inventory_item?.stock??0);Y[$e]||(Y[$e]={totalStock:Se,used:0});const Oe=Number(q.quantity??q.qty??1)*X.qty;Y[$e].used+=Oe});for(const X of g){const ke=X.inventory_item_id,q=Number(X.inventory_stock??X.inventory_item?.stock??0),$e=Number(X.quantity??X.qty??1)*(T+1);if(Y[ke]){const Se=Y[ke].totalStock-Y[ke].used,Ge=k(a).map(re=>re.id).sort().join("-"),ct=G.value.find(re=>{const dt=(re.addons||[]).map(st=>st.id).sort().join("-");return re.id===a.id&&re.variant_id===c&&dt===Ge});if(ct){const re=Number(X.quantity??X.qty??1)*ct.qty;if(Se+re<$e)return!1}else if(Se<$e)return!1}else if(q<$e)return!1}return!0},Ks=a=>{if(Bt(a)<=0)return;const u=ee(a),c=parseFloat(u?u.price:a.price),g=u?u.id:null,T=u?u.name:null,M=k(a),Y=F(a),X=c+Y,ke=M.map(Oe=>Oe.id).sort().join("-"),q=u?Dt(u,!0):Dt(a,!1),$e=Ut(a,g);if(!Qi(a)){if($e.length>0){const Oe=T?` (${T})`:"";ce.error(`Not enough ingredients for "${a.title}${Oe}".`)}return}const Se=G.value.findIndex(Oe=>{const Ge=(Oe.addons||[]).map(ct=>ct.id).sort().join("-");return Oe.id===a.id&&Oe.variant_id===g&&Ge===ke});if(Se>=0)G.value[Se].qty++,G.value[Se].price=G.value[Se].unit_price*G.value[Se].qty,G.value[Se].total_resale_discount=q*G.value[Se].qty,G.value[Se].outOfStock=!1;else{const Oe=Fn(a);G.value.push({id:a.id,title:a.title,img:a.img,price:X,unit_price:Number(X),qty:1,note:"",stock:Oe,ingredients:$e,variant_id:g,variant_name:T,addons:M,outOfStock:!1,resale_discount_per_item:q,total_resale_discount:q})}},Ys=a=>{const u=ee(a),c=u?u.id:null,T=k(a).map(X=>X.id).sort().join("-"),M=G.value.findIndex(X=>{const ke=(X.addons||[]).map(q=>q.id).sort().join("-");return X.id===a.id&&X.variant_id===c&&ke===T});if(M<0)return;const Y=G.value[M];Y.qty<=1?G.value.splice(M,1):(Y.qty--,Y.price=Y.unit_price*Y.qty,Y.outOfStock=!1)},Ut=(a,u)=>!u||!a.variants?.length?a.ingredients??[]:a.variants.find(g=>g.id===u)?.ingredients??a.ingredients??[],Xi=a=>{if(!a||!a.ingredients?.length)return!0;const u={};for(const c of G.value)(c.ingredients??[]).forEach(T=>{const M=T.inventory_item_id,Y=Number(T.inventory_stock??T.inventory_item?.stock??0);u[M]||(u[M]={totalStock:Y,used:0});const X=Number(T.quantity??T.qty??1)*c.qty;u[M].used+=X});for(const c of a.ingredients){const g=c.inventory_item_id,T=Number(c.inventory_stock??c.inventory_item?.stock??0);if(u[g]){const M=u[g].totalStock-u[g].used,Y=Number(c.quantity??c.qty??1)*a.qty,X=M+Y,ke=Number(c.quantity??c.qty??1)*(a.qty+1);if(X<ke)return!1}else if(T<Number(c.quantity??c.qty??1))return!1}return!0},Ve=Z(null),vn=Z(null);let fr=null;const ya=(a,u)=>{Ve.value=JSON.parse(JSON.stringify(a)),vn.value=u;const c=te.value.find(g=>g.id===a.id);if(c&&c.addon_groups&&c.addon_groups.length>0){const g=new Map;a.addons&&a.addons.forEach(M=>{g.set(M.id,{quantity:M.quantity||1,selected:!0})});const T=[];c.addon_groups.forEach(M=>{M.addons&&M.addons.length>0&&M.addons.forEach(Y=>{const X=g.get(Y.id);T.push({id:Y.id,name:Y.name,price:parseFloat(Y.price||0),group_id:M.group_id,group_name:M.group_name,quantity:X?.quantity||1,selected:X?.selected||!1})})}),Ve.value.addons=T}else Ve.value.addons=[];if(!fr){const g=document.getElementById("addonManagementModal");g&&(fr=new bootstrap.Modal(g))}fr&&fr.show()},Ea=a=>{a.selected=!a.selected,a.selected||(a.quantity=1)},wa=a=>{a.selected&&(a.quantity=(a.quantity||1)+1)},ji=a=>{a.selected&&(a.quantity||1)>1&&(a.quantity-=1)},Gs=a=>a.addons?a.addons.reduce((u,c)=>c.selected!==!1?u+parseFloat(c.price)*(c.quantity||1):u,0):0,Aa=()=>{if(vn.value===null)return;const a=Ve.value.addons.filter(M=>M.selected!==!1),u=Ve.value.variant_id?te.value.find(M=>M.id===Ve.value.id)?.variants?.find(M=>M.id===Ve.value.variant_id):null,c=parseFloat(u?u.price:Ve.value.unit_price),g=a.reduce((M,Y)=>M+parseFloat(Y.price)*(Y.quantity||1),0),T=c+g;G.value[vn.value].addons=a,G.value[vn.value].unit_price=T,G.value[vn.value].price=T*G.value[vn.value].qty,ce.success("Addons updated successfully!"),fr&&fr.hide(),Ve.value=null,vn.value=null},Ta=a=>!a.addons||a.addons.length===0?"":a.addons.map(u=>u.name).join(", "),zs=()=>!Ve.value||!Ve.value.addons?0:Ve.value.addons.filter(a=>a.selected!==!1).length,Rr=bt(()=>jt.props.current_user),Pe=bt(()=>p.value.filter(a=>a.menu_items_count&&a.menu_items_count>0)),Le=bt(()=>Rr.value?.roles?.includes("Cashier")||Rr.value?.roles?.includes("Admin")||Rr.value?.roles?.includes("Manager")),Qs=Z(`terminal-${Rr.value?.id}`),{broadcastCartUpdate:xa,broadcastUIUpdate:Xs}=H1(Qs.value),Ca=rf.debounce(a=>{xa(a)},500),Sa=rf.debounce(a=>{Xs(a)},10);Ai(()=>({items:G.value,customer:tt.value,phone_number:Ot.value,delivery_location:Qe.value,orderType:we.value,table:nt.value,subtotal:Xe.value,tax:Dn.value,serviceCharges:In.value,deliveryCharges:On.value,promoDiscount:cr.value,total:dr.value,note:sr.value,appliedPromos:De.value,saleDiscount:Zt.value}),a=>{Ca(a)},{deep:!0,immediate:!1}),Ai(()=>({showCategories:It.value,activeCat:An.value,menuCategories:p.value,menuItems:te.value,searchQuery:St.value,selectedCardVariant:J.value,selectedCardAddons:U.value}),a=>{Sa(a)},{deep:!0,immediate:!0}),Ai([J,U],()=>{Xs({showCategories:It.value,activeCat:An.value,menuCategories:p.value,menuItems:te.value,searchQuery:St.value,selectedCardVariant:J.value,selectedCardAddons:U.value})},{deep:!0});const Oa=()=>{if(!Le.value){ce.error("Only cashiers can access customer display");return}const a=route("customer-display.index",{terminal:Qs.value});window.open(a,"_blank","width=1920,height=1080")},Dt=(a,u=!1)=>{if(!a)return 0;const c=a.is_saleable??a?.menu_item?.is_saleable,g=a.resale_type??a?.menu_item?.resale_type,T=a.resale_value??a?.menu_item?.resale_value,M=parseFloat(a.price||0);return!c||!g||!T?0:g==="flat"?parseFloat(T):g==="percentage"?M*parseFloat(T)/100:0},qn=(a,u=!1)=>{const c=parseFloat(a.price||0),g=Dt(a,u);return Math.max(0,c-g)},Fe=(a,u=!1)=>{if(!a)return null;const c=a.is_saleable??a?.menu_item?.is_saleable,g=a.resale_type??a?.menu_item?.resale_type,T=a.resale_value??a?.menu_item?.resale_value,M=Dt(a,u);return!c||!g||!T||M<=0?null:{type:g,value:T,amount:M,display:g==="flat"?`Sale ${d(M)}`:`${T}% OFF`}},Zi=a=>{const u=ee(a);let c;u?c=qn(u,!0):c=qn(a,!1);const g=F(a);return c+g},Lt=a=>{if(!a.variants||a.variants.length===0){const T=Dt(a,!1)>0;return{min:qn(a,!1),max:qn(a,!1),minOriginal:T?parseFloat(a.price||0):null,maxOriginal:T?parseFloat(a.price||0):null}}const u=a.variants.map(T=>qn(T,!0)),c=a.variants.map(T=>parseFloat(T.price||0)),g=a.variants.some(T=>Dt(T,!0)>0);return{min:Math.min(...u),max:Math.max(...u),minOriginal:g?Math.min(...c):null,maxOriginal:g?Math.max(...c):null}},js=()=>{if(!Q.value)return 0;const a=qe();return a?qn(a,!0):qn(Q.value,!1)},Ji=()=>js()+We();return(a,u)=>(P(),R(Ke,null,[En(Ae($b),{title:"Sale"}),En(Rb,null,{default:gs(()=>[_("div",G1,[_("div",z1,[_("div",Q1,[_("div",{class:Jn(It.value?"col-md-12":"col-lg-8")},[It.value?(P(),R("div",X1,[_("div",j1,[u[24]||(u[24]=_("h4",{class:"mb-0"},"Menu Categories",-1)),Le.value?(P(),R("button",{key:0,onClick:Oa,class:"btn btn-primary d-flex align-items-center gap-2",type:"button"},[...u[22]||(u[22]=[_("i",{class:"bi bi-tv"},null,-1),_("span",null,"Customer View",-1)])])):pe("",!0),_("div",Z1,[u[23]||(u[23]=_("input",{type:"email",name:"email",autocomplete:"email",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px"},tabindex:"-1","aria-hidden":"true"},null,-1)),B.value?on((P(),R("input",{id:S,"onUpdate:modelValue":u[0]||(u[0]=c=>b.value=c),key:x.value,type:"search",class:"form-control form-control-sm",placeholder:"Search categories...",autocomplete:"new-password",name:S,role:"presentation",style:{"border-radius":"8px",padding:"8px 12px"}})),[[er,b.value]]):(P(),R("input",J1))])]),u[27]||(u[27]=_("hr",null,null,-1)),w.value?(P(),R("div",eA,[...u[25]||(u[25]=[_("div",{class:"spinner-border",role:"status",style:{color:"#1B1670",width:"3rem",height:"3rem","border-width":"0.3em"}},null,-1),_("div",{class:"mt-2 fw-semibold text-muted"},"Loading...",-1)])])):(P(),R(Ke,{key:1},[(P(!0),R(Ke,null,yt(D.value,c=>(P(),R("div",{key:c.id,class:"col-6 col-md-4 col-lg-4"},[_("div",{class:"cat-card",onClick:g=>Sr(c)},[_("div",nA,[_("span",rA,[c.image_url?(P(),R("img",{key:0,src:c.image_url,alt:"Category Image",class:"cat-image"},null,8,iA)):(P(),R("span",sA,"🍵"))])]),_("div",oA,W(c.name),1),_("div",aA,W(c.menu_items_count)+" Menu ",1)],8,tA)]))),128)),!w.value&&D.value.length===0?(P(),R("div",lA,[...u[26]||(u[26]=[_("div",{class:"alert alert-light border text-center rounded-4"}," No categories found ",-1)])])):pe("",!0)],64))])):(P(),R("div",uA,[_("div",cA,[_("button",{class:"btn btn-primary rounded-pill shadow-sm px-3",onClick:Et},[...u[28]||(u[28]=[_("i",{class:"bi bi-arrow-left me-1"},null,-1),Mt(" Back ",-1)])]),_("h5",dA,W(p.value.find(c=>c.id===An.value)?.name||"Items"),1),_("div",fA,[En(qb,{modelValue:Ue.value,"onUpdate:modelValue":u[1]||(u[1]=c=>Ue.value=c),title:"Menu Items","modal-id":"menuFilterModal","sort-options":[{value:"name_asc",label:"Name: A to Z"},{value:"name_desc",label:"Name: Z to A"},{value:"price_asc",label:"Price: Low to High"},{value:"price_desc",label:"Price: High to Low"}],"show-price-range":!0,"show-category":!1,"show-stock-status":!1,"show-date-range":!1,categories:[],suppliers:[],onApply:xn,onClear:Un},null,8,["modelValue"]),_("div",hA,[u[29]||(u[29]=_("i",{class:"bi bi-search position-absolute",style:{left:"12px",top:"50%",transform:"translateY(-50%)","z-index":"10"}},null,-1)),on(_("input",{"onUpdate:modelValue":u[2]||(u[2]=c=>St.value=c),class:"form-control search-input ps-5",type:"text",placeholder:"Search items...",style:{"min-width":"250px"}},null,512),[[er,St.value]])])])]),_("div",pA,[(P(!0),R(Ke,null,yt(ut.value,c=>(P(),R("div",{class:"col-12 col-md-6 cat-cards col-xl-6 d-flex",key:c.id},[_("div",{class:"card rounded-4 shadow-sm overflow-hidden border-3 w-100 d-flex flex-row align-items-stretch",style:Ll({borderColor:c.label_color||"#1B1670"})},[_("div",_A,[_("img",{src:c.img,alt:"",class:"w-100 h-100",style:{"object-fit":"cover"}},null,8,vA),c.variants&&c.variants.length>0?(P(),R("div",gA,[Lt(c).minOriginal!==null?(P(),R("span",mA,W(Ae(d)(Lt(c).minOriginal)),1)):pe("",!0),_("span",bA,W(Ae(d)(Lt(c).min))+" - ",1),Lt(c).maxOriginal!==null?(P(),R("span",yA,W(Ae(d)(Lt(c).maxOriginal)),1)):pe("",!0),_("span",EA,W(Ae(d)(Lt(c).max)),1)])):pe("",!0),_("span",{class:"position-absolute top-0 start-0 m-1 px-2 py-1 rounded-pill text-white fw-semibold",style:Ll({background:c.label_color||"#1B1670",fontSize:"0.58rem",letterSpacing:"0.3px"})},[Fe(ee(c)||c,!!c.variants?.length)?(P(),R(Ke,{key:0},[_("span",wA,W(Ae(d)(ee(c)?.price||c.price)),1),_("span",AA,W(Ae(d)(Zi(c))),1)],64)):(P(),R(Ke,{key:1},[Mt(W(Ae(d)(ee(c)?.price||c.price)),1)],64))],4),Bt(c)<=0?(P(),R("span",TA," OUT OF STOCK ")):pe("",!0)]),_("div",xA,[c.variants&&c.variants.length>0&&Fe(ee(c),!0)||(!c.variants||c.variants.length===0)&&Fe(c,!1)?(P(),R("span",CA,W(c.variants&&c.variants.length>0?Fe(ee(c),!0).display:Fe(c,!1).display),1)):pe("",!0),_("div",null,[_("div",{class:"h5 fw-bold mb-2 menu-name",style:Ll({color:c.label_color||"#1B1670"})},W(c.title.length>17?c.title.slice(0,15)+"...":c.title),5),c.variants&&c.variants.length>0?(P(),R("div",SA,[u[30]||(u[30]=_("label",{class:"form-label small fw-semibold mb-1"}," Variants: ",-1)),on(_("select",{"onUpdate:modelValue":g=>J.value[c.id]=g,class:"form-select form-select-sm variant-select",onChange:g=>N(c,g),onClick:u[3]||(u[3]=Fo(()=>{},["stop"]))},[(P(!0),R(Ke,null,yt(c.variants,g=>(P(),R("option",{key:g.id,value:g.id},[Mt(W(g.name)+" - "+W(Ae(d)(g.price))+" ",1),g.is_saleable&&Dt(g,!0)>0?(P(),R(Ke,{key:0},[Mt(" (Sale: "+W(Ae(d)(Dt(g,!0)))+") ",1)],64)):pe("",!0)],8,IA))),128))],40,OA),[[kl,J.value[c.id]]])])):pe("",!0),c.addon_groups&&c.addon_groups.length>0?(P(),R("div",NA,[(P(!0),R(Ke,null,yt(c.addon_groups,g=>(P(),R("div",{key:g.group_id,class:"mb-3"},[_("label",DA,[Mt(W(g.group_name)+" ",1),g.max_select>0?(P(),R("span",LA," (Max "+W(g.max_select)+") ",1)):pe("",!0)]),En(Ae(md),{modelValue:U.value[c.id]?.[g.group_id]||[],"onUpdate:modelValue":T=>ie(c,g.group_id,T),options:g.addons,optionLabel:"name",dataKey:"id",placeholder:"Select addons",maxSelectedLabels:3,class:"w-100 addon-multiselect"},{value:gs(T=>[T.value&&T.value.length>0?(P(),R("div",kA,[(P(!0),R(Ke,null,yt(T.value,M=>(P(),R("span",{key:M.id,class:"badge bg-primary"},W(M.name)+" +"+W(Ae(d)(M.price)),1))),128))])):(P(),R("span",$A,W(T.placeholder),1))]),option:gs(T=>[_("div",RA,[_("span",null,W(T.option.name),1),_("span",PA," +"+W(Ae(d)(T.option.price)),1)])]),_:1},8,["modelValue","onUpdate:modelValue","options"])]))),128))])):pe("",!0),_("button",{class:"btn btn-primary btn-sm mb-2 view-details-btn",onClick:g=>et(c)}," View Details ",8,MA)]),_("div",{class:"mt-2 d-flex align-items-center justify-content-start gap-2",onClick:u[4]||(u[4]=Fo(()=>{},["stop"]))},[_("button",{class:"qty-btn btn btn-outline-secondary rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Fo(g=>Ys(c),["stop"]),disabled:ui(c)<=0},[...u[31]||(u[31]=[_("strong",null,"−",-1)])],8,FA),_("div",BA,W(ui(c)),1),_("button",{class:Jn(["qty-btn btn btn-outline-secondary rounded-circle px-2 py-2",{"opacity-50":Bt(c)<=0}]),style:{width:"55px",height:"36px"},onClick:Fo(g=>Ks(c),["stop"]),disabled:!Qi(c)||Bt(c)<=0},[...u[32]||(u[32]=[_("strong",null,"+",-1)])],10,UA)])])],4)]))),128))])]))],2),It.value?pe("",!0):(P(),R("div",WA,[_("div",{class:"col-12 d-flex align-items-center justify-content-end gap-2 mb-2"},[_("button",{class:"btn btn-warning rounded-pill px-3 py-2 promos-btn",onClick:Us}," Promos "),_("button",{class:"btn btn-warning rounded-pill px-3 py-2 discount-btn",onClick:Ws}," Discounts ")]),_("div",qA,[_("div",VA,[_("div",HA,[(P(!0),R(Ke,null,yt(Bn.value,(c,g)=>(P(),R("button",{key:g,class:Jn(["ot-pill btn cart-header-buttons",{active:we.value===c}]),onClick:T=>we.value=c},W(c.replace(/_/g," ")),11,KA))),128)),u[33]||(u[33]=_("div",{class:"d-flex justify-content-between mb-3"},null,-1))])]),_("div",YA,[_("div",GA,[we.value==="Dine_in"?(P(),R("div",zA,[_("div",QA,[u[35]||(u[35]=_("label",{class:"form-label small"},"Table",-1)),on(_("select",{"onUpdate:modelValue":u[5]||(u[5]=c=>nt.value=c),class:"form-select form-select-sm"},[u[34]||(u[34]=_("option",{value:null},"Select Table",-1)),(P(!0),R(Ke,null,yt(Xt.value.table_details,(c,g)=>(P(),R("option",{key:g,value:c},W(c.name),9,XA))),128))],512),[[kl,nt.value]]),ht.value.table_number?(P(),R("div",jA,W(ht.value.table_number[0]),1)):pe("",!0)]),_("div",ZA,[u[36]||(u[36]=_("label",{class:"form-label small"},"Customer",-1)),on(_("input",{"onUpdate:modelValue":u[6]||(u[6]=c=>tt.value=c),class:"form-control form-control-sm",placeholder:"Walk In"},null,512),[[er,tt.value]])])])):(P(),R("div",JA,[u[37]||(u[37]=_("label",{class:"form-label small"},"Customer",-1)),on(_("input",{"onUpdate:modelValue":u[7]||(u[7]=c=>tt.value=c),class:Jn(["form-control form-control-sm",{"is-invalid":ht.value.customer}]),placeholder:"Walk In"},null,2),[[er,tt.value]]),ht.value.customer?(P(),R("div",eT,W(ht.value.customer[0]),1)):pe("",!0)])),we.value==="Delivery"?(P(),R("div",tT,[u[38]||(u[38]=_("label",{class:"form-label small"},"Delivery Location",-1)),on(_("input",{"onUpdate:modelValue":u[8]||(u[8]=c=>Qe.value=c),class:"form-control form-control-sm",placeholder:"Enter delivery location"},null,512),[[er,Qe.value]]),ht.value.delivery_location?(P(),R("div",nT,W(ht.value.delivery_location[0]),1)):pe("",!0),u[39]||(u[39]=_("label",{class:"form-label small mt-2"},"Phone Number",-1)),on(_("input",{"onUpdate:modelValue":u[9]||(u[9]=c=>Ot.value=c),class:"form-control form-control-sm",placeholder:"Enter phone number"},null,512),[[er,Ot.value]]),ht.value.phone_number?(P(),R("div",rT,W(ht.value.phone_number[0]),1)):pe("",!0)])):pe("",!0)]),_("div",iT,[G.value.length===0?(P(),R("div",sT," Add items from the left ")):pe("",!0),(P(!0),R(Ke,null,yt(G.value,(c,g)=>(P(),R("div",{key:c.title,class:"line"},[_("div",oT,[_("img",{src:c.img,alt:""},null,8,aT),_("div",lT,[_("div",{class:"name",title:c.title},W(c.title.length>4?c.title.slice(0,10)+"...":c.title),9,uT),c.resale_discount_per_item>0?(P(),R("div",cT,[_("span",dT,[u[40]||(u[40]=_("i",{class:"bi bi-tag-fill"},null,-1)),Mt(" Save "+W(Ae(d)(c.resale_discount_per_item)),1)])])):pe("",!0),c.addons&&c.addons.length>0?(P(),R("div",fT,[_("button",{class:"btn-link p-0 py-0 text-decoration-none",onClick:T=>ya(c,g),title:Ta(c)},[u[41]||(u[41]=_("i",{class:"bi bi-plus-circle-fill text-primary me-1",style:{"font-size":"0.9rem"}},null,-1)),_("span",pT,W(c.addons.length)+" addon(s)",1)],8,hT),c.variant_name?(P(),R("span",_T,W(c.variant_name),1)):pe("",!0),qs(c)?(P(),R("span",vT,[...u[42]||(u[42]=[_("i",{class:"bi bi-tag-fill"},null,-1)])])):pe("",!0)])):pe("",!0),c.note?(P(),R("div",gT,W(c.note),1)):pe("",!0)])]),_("div",mT,[_("div",bT,[_("button",{class:"qty-btn",onClick:T=>Jr(g)},"−",8,yT),_("div",ET,W(c.qty),1),_("button",{class:Jn(["qty-btn",{"bg-secondary text-white cursor-not-allowed opacity-70":c.outOfStock||!Xi(c)}]),onClick:T=>Cn(g),disabled:c.outOfStock||!Xi(c)}," + ",10,wT)]),_("div",AT,[_("div",TT,W(Ae(d)(c.price)),1),_("button",{class:"del",onClick:T=>Sn(g)},[...u[43]||(u[43]=[_("i",{class:"bi bi-trash"},null,-1)])],8,xT)])])]))),128))]),_("div",CT,[_("div",ST,[u[44]||(u[44]=_("span",null,"Sub Total",-1)),_("b",OT,W(Ae(d)(Xe.value)),1)]),Dn.value>0?(P(),R("div",IT,[u[45]||(u[45]=_("span",{class:"d-flex align-items-center gap-2"},[_("i",{class:"bi bi-receipt text-info"}),Mt(" Tax ")],-1)),_("b",NT,W(Ae(d)(Dn.value)),1)])):pe("",!0),In.value>0?(P(),R("div",DT,[u[46]||(u[46]=_("span",{class:"text-muted"},"Service Charges:",-1)),_("span",LT,W(Ae(d)(In.value)),1)])):pe("",!0),On.value>0?(P(),R("div",kT,[u[47]||(u[47]=_("span",{class:"text-muted"},"Delivery Charges:",-1)),_("span",$T,W(Ae(d)(On.value)),1)])):pe("",!0),Zt.value>0?(P(),R("div",RT,[u[48]||(u[48]=_("span",{class:"d-flex align-items-center gap-2"},[_("span",{class:"text-danger"},"Sale Discount:")],-1)),_("b",PT,"-"+W(Ae(d)(Zt.value)),1)])):pe("",!0),De.value&&De.value.length>0?(P(),R("div",MT,[_("div",FT,[_("div",BT,[u[49]||(u[49]=_("span",{class:"text-success"},"Promo Discount:",-1)),_("b",UT,"-"+W(Ae(d)(cr.value)),1)])])])):pe("",!0),Nt.value.length>0?(P(),R("div",WT,[u[51]||(u[51]=_("div",{class:"alert alert-warning py-2 px-3 mb-2"},[_("div",{class:"d-flex align-items-center gap-2"},[_("i",{class:"bi bi-clock-history"}),_("small",{class:"fw-semibold"},"Pending Approval")])],-1)),(P(!0),R(Ke,null,yt(Nt.value,c=>(P(),R("div",{key:c.id,class:"trow"},[_("span",qT,[u[50]||(u[50]=_("i",{class:"bi bi-hourglass-split"},null,-1)),_("span",null,W(c.discountData?.name||"Discount")+" ("+W(c.percentage)+"%)",1)]),_("span",VT," -"+W(Ae(d)(ur(c.percentage))),1)]))),128)),u[52]||(u[52]=_("small",{class:"text-muted d-block mt-1 ms-4"},[_("i",{class:"bi bi-info-circle me-1"}),Mt(" Will apply after Super Admin approval ")],-1))])):pe("",!0),vt.value.length>0?(P(),R("div",HT,[_("div",KT,[u[53]||(u[53]=_("div",{class:"d-flex align-items-center text-success gap-2"},[_("i",{class:"bi bi-check-circle"}),_("small",{class:"fw-semibold"},"Approved Discounts"),_("i",{class:"bi bi-info-circle text-muted",tabindex:"0",role:"button","data-bs-toggle":"popover","data-bs-trigger":"click","data-bs-html":"true","data-bs-placement":"top","data-bs-container":"body","data-bs-content":"Auto-updates with cart changes<br>Approved Discounts"})],-1)),_("b",YT,"-"+W(Ae(d)(ii.value)),1)])])):pe("",!0),_("div",GT,[u[54]||(u[54]=_("span",null,"Total",-1)),_("b",null,W(Ae(d)(dr.value)),1)])]),_("div",zT,[u[55]||(u[55]=_("label",{for:"frontNote",class:"form-label small fw-semibold"},"Front Note",-1)),on(_("textarea",{id:"frontNote","onUpdate:modelValue":u[10]||(u[10]=c=>sr.value=c),rows:"3",class:"form-control form-control-sm rounded-3",placeholder:"Enter front note..."},null,512),[[er,sr.value]])]),_("div",QT,[u[56]||(u[56]=_("label",{for:"kitchenNote",class:"form-label small fw-semibold"},"Kitchen Note",-1)),on(_("textarea",{id:"kitchenNote","onUpdate:modelValue":u[11]||(u[11]=c=>or.value=c),rows:"3",class:"form-control form-control-sm rounded-3",placeholder:"Enter kitchen note..."},null,512),[[er,or.value]])])]),_("div",XT,[_("button",{class:"btn btn-secondary btn-clear",onClick:u[12]||(u[12]=c=>Ls())}," Clear "),_("button",{class:"btn btn-primary btn-place",onClick:ca}," Place Order ")])])]))])]),_("div",jT,[_("div",ZT,[_("div",JT,[_("div",ex,[_("h5",tx,W(Q.value?.title||"Choose Item"),1),u[57]||(u[57]=_("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[_("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])],-1))]),_("div",nx,[_("div",rx,[_("div",ix,[_("img",{src:Q.value?.image_url||Q.value?.img||"/assets/img/product/product29.jpg",class:"img-fluid rounded-3 w-100",alt:""},null,8,sx)]),_("div",ox,[_("div",ax,[_("div",lx,[_("span",null,W(Ae(d)(Ji())),1),qe()&&Fe(qe(),!0)?(P(),R(Ke,{key:0},[_("span",ux,W(Ae(d)(lt()+We())),1),_("span",cx,W(Fe(qe(),!0).display),1)],64)):Q.value&&(!Q.value.variants||Q.value.variants.length===0)&&Fe(Q.value,!1)?(P(),R(Ke,{key:1},[_("span",dx,W(Ae(d)(lt()+We())),1),_("span",fx,W(Fe(Q.value,!1).display),1)],64)):pe("",!0)])]),Q.value?.variants&&Q.value.variants.length>0?(P(),R("div",hx,[u[58]||(u[58]=_("label",{class:"form-label small fw-semibold mb-1"}," Variants: ",-1)),on(_("select",{"onUpdate:modelValue":u[13]||(u[13]=c=>Nn.value=c),class:"form-select form-select-sm",onChange:it},[(P(!0),R(Ke,null,yt(Q.value.variants,c=>(P(),R("option",{key:c.id,value:c.id},W(c.name)+" - "+W(Ae(d)(c.price)),9,px))),128))],544),[[kl,Nn.value]])])):pe("",!0),ue().length>0?(P(),R("div",_x,[u[59]||(u[59]=_("label",{class:"form-label small fw-semibold mb-2 d-flex align-items-center"},[_("i",{class:"bi bi-egg-fried me-2 text-warning"}),Mt(" Remove Ingredients ")],-1)),_("div",vx,[(P(!0),R(Ke,null,yt(ue(),c=>(P(),R("div",{key:c.id||c.inventory_item_id,class:"form-check d-flex align-items-center justify-content-between py-2 px-2 mb-1 rounded hover-bg-white",style:{cursor:"pointer"}},[_("div",gx,[_("input",{type:"checkbox",class:"form-check-input",id:"ingredient-"+(c.id||c.inventory_item_id),checked:!xe(c.id||c.inventory_item_id),onChange:g=>Ne(c.id||c.inventory_item_id),style:{cursor:"pointer",width:"20px",height:"20px",margin:"0","flex-shrink":"0"}},null,40,mx),_("label",{for:"ingredient-"+(c.id||c.inventory_item_id),class:Jn(["form-check-label mb-0 flex-grow-1",{"text-decoration-line-through text-muted opacity-50":xe(c.id||c.inventory_item_id)}]),style:{cursor:"pointer"}},W(c.product_name||c.name||"Ingredient"),11,bx)]),_("span",{class:Jn(["badge ms-2",xe(c.id||c.inventory_item_id)?"bg-secondary":"bg-primary"])},W(c.quantity||1)+" "+W(c.unit||"unit"),3)]))),128))])])):pe("",!0),Q.value?.addon_groups&&Q.value.addon_groups.length>0?(P(),R("div",yx,[(P(!0),R(Ke,null,yt(Q.value.addon_groups,c=>(P(),R("div",{key:c.group_id,class:"mb-3"},[_("label",Ex,[Mt(W(c.group_name)+" ",1),c.max_select>0?(P(),R("span",wx," (Max "+W(c.max_select)+") ",1)):pe("",!0)]),En(Ae(md),{modelValue:pn.value[c.group_id]||[],"onUpdate:modelValue":g=>Qt(c.group_id,g),options:c.addons,optionLabel:"name",dataKey:"id",placeholder:"Select addons",maxSelectedLabels:3,class:"w-100 addon-multiselect",appendTo:"self"},{value:gs(g=>[g.value&&g.value.length>0?(P(),R("div",Ax,[(P(!0),R(Ke,null,yt(g.value,T=>(P(),R("span",{key:T.id,class:"badge bg-primary"},W(T.name)+" +"+W(Ae(d)(T.price)),1))),128))])):(P(),R("span",Tx,W(g.placeholder),1))]),option:gs(g=>[_("div",xx,[_("span",null,W(g.option.name),1),_("span",Cx," +"+W(Ae(d)(g.option.price)),1)])]),_:1},8,["modelValue","onUpdate:modelValue","options"])]))),128))])):pe("",!0),_("div",Sx,[u[60]||(u[60]=_("div",{class:"mb-1"},[_("strong",null,"Nutrition:")],-1)),Ye()?.calories?(P(),R("span",Ox," Cal: "+W(Ye().calories),1)):pe("",!0),Ye()?.carbs?(P(),R("span",Ix," Carbs: "+W(Ye().carbs),1)):pe("",!0),Ye()?.fat?(P(),R("span",Nx," Fat: "+W(Ye().fat),1)):pe("",!0),Ye()?.protein?(P(),R("span",Dx," Protein: "+W(Ye().protein),1)):pe("",!0),u[61]||(u[61]=_("div",{class:"w-100 mt-2"},[_("strong",null,"Allergies:")],-1)),(P(!0),R(Ke,null,yt(dn(),(c,g)=>(P(),R("span",{key:"a-"+g,class:"chip chip-red"},W(c.name),1))),128)),u[62]||(u[62]=_("div",{class:"w-100 mt-2"},[_("strong",null,"Tags:")],-1)),(P(!0),R(Ke,null,yt(fn(),(c,g)=>(P(),R("span",{key:"t-"+g,class:"chip chip-teal"},W(c.name),1))),128))]),_("div",Lx,[_("button",{class:"qty-btn",onClick:Ds}," − "),_("div",kx,W(je.value),1),_("button",{class:"qty-btn",onClick:Ns,disabled:!Is()}," + ",8,$x)]),_("div",Rx,[u[63]||(u[63]=_("label",{class:"form-label small fw-semibold mb-1"}," Kitchen Note (Optional) ",-1)),on(_("textarea",{"onUpdate:modelValue":u[14]||(u[14]=c=>_n.value=c),class:"form-control form-control-sm",rows:"4",placeholder:"Special instructions to kitchen for this item (e.g., extra spicy, no onions)...",maxlength:"200"},null,512),[[er,_n.value]])])])])]),_("div",{class:"modal-footer border-0"},[_("button",{class:"btn btn-primary btn-sm py-2 rounded-pill px-4",onClick:la}," Add to Cart ")])])])]),_("div",Px,[_("div",Mx,[_("div",Fx,[u[74]||(u[74]=_("div",{class:"modal-header border-0 pb-2"},[_("h5",{class:"modal-title fw-bold"},[_("i",{class:"bi bi-puzzle-fill text-primary me-2"}),Mt(" Manage Add-ons ")]),_("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[_("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])])],-1)),Ve.value?(P(),R("div",Bx,[_("div",Ux,[_("div",Wx,[_("img",{src:Ve.value.img,alt:"",class:"rounded",style:{width:"60px",height:"60px","object-fit":"cover"}},null,8,qx),_("div",Vx,[_("div",Hx,W(Ve.value.title),1),_("div",Kx,[_("small",Yx,[u[64]||(u[64]=_("i",{class:"bi bi-tag me-1"},null,-1)),u[65]||(u[65]=Mt(" Base Price: ",-1)),_("span",Gx,W(Ae(d)(Ve.value?.unit_price-Gs(G.value[vn.value]||{addons:[]}))),1)]),_("small",zx,[u[66]||(u[66]=_("i",{class:"bi bi-box me-1"},null,-1)),u[67]||(u[67]=Mt(" Quantity: ",-1)),_("span",Qx,W(Ve.value.qty),1)])])])])]),Ve.value.addons&&Ve.value.addons.length>0?(P(),R("div",Xx,[_("table",jx,[u[70]||(u[70]=_("thead",{class:"table-light"},[_("tr",null,[_("th",{style:{width:"60px"},class:"text-center"},"Select"),_("th",null,"Items"),_("th",{style:{width:"120px"},class:"text-center"},"Price"),_("th",{style:{width:"200px"},class:"text-center"},"Quantity")])],-1)),_("tbody",null,[(P(!0),R(Ke,null,yt(Ve.value.addons,c=>(P(),R("tr",{key:c.id,class:Jn({"table-active":c.selected!==!1})},[_("td",Zx,[_("div",Jx,[_("input",{type:"checkbox",class:"form-check-input",checked:c.selected!==!1,onChange:g=>Ea(c),style:{width:"22px",height:"22px",cursor:"pointer"}},null,40,eC)])]),_("td",null,[_("div",tC,[_("div",{class:Jn(["addon-status-indicator",c.selected!==!1?"bg-success":"bg-secondary"])},null,2),_("div",null,[_("div",nC,W(c.name),1),c.group_name?(P(),R("small",rC,W(c.group_name),1)):pe("",!0)])])]),_("td",iC,[_("span",sC," +"+W(Ae(d)(c.price)),1)]),_("td",null,[_("div",oC,[_("button",{class:"btn btn-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px"},onClick:g=>ji(c),disabled:!c.selected||(c.quantity||1)<=1},[...u[68]||(u[68]=[_("i",{class:"bi bi-dash-lg"},null,-1)])],8,aC),_("span",lC,W(c.quantity||1),1),_("button",{class:"btn btn-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px"},onClick:g=>wa(c),disabled:!c.selected},[...u[69]||(u[69]=[_("i",{class:"bi bi-plus-lg"},null,-1)])],8,uC)])])],2))),128))])])])):(P(),R("div",cC,[...u[71]||(u[71]=[_("i",{class:"bi bi-inbox",style:{"font-size":"3rem",opacity:"0.3"}},null,-1),_("p",{class:"mb-0 mt-3 fw-semibold"},"No add-ons available for this item",-1)])])),_("div",dC,[zs()>0?(P(),R("div",fC,[_("small",hC,[u[72]||(u[72]=_("i",{class:"bi bi-check-circle-fill me-1"},null,-1)),Mt(" "+W(zs())+" add-on(s) selected • Add-ons Total: "+W(Ae(d)(Gs(Ve.value))),1)])])):pe("",!0)])])):pe("",!0),_("div",{class:"modal-footer border-0 pt-0 bg-light"},[u[73]||(u[73]=_("button",{type:"button",class:"btn btn-secondary px-2 py-2","data-bs-dismiss":"modal"}," Cancel ",-1)),_("button",{type:"button",class:"btn btn-primary px-2 py-2",onClick:Aa}," Save ")])])])]),En(Bb,{show:Hi.value,kot:Nr.value,loading:Fs.value,onClose:u[15]||(u[15]=c=>Hi.value=!1),onStatusUpdated:ga},null,8,["show","kot","loading"]),En(Mb,{show:ti.value,order:Ir.value,money:ei,onClose:u[16]||(u[16]=c=>ti.value=!1)},null,8,["show","order"]),En(Pb,{show:ni.value,customer:tt.value,"delivery-location":Qe.value,phone:Ot.value,"order-type":we.value,"selected-table":nt.value,"order-items":G.value,"grand-total":dr.value,money:ei,cashReceived:qi.value,"onUpdate:cashReceived":u[17]||(u[17]=c=>qi.value=c),client_secret:o.client_secret,order_code:o.order_code,"sub-total":Xe.value,tax:Dn.value,"service-charges":In.value,"delivery-charges":On.value,"promo-discount":cr.value,"promo-id":De.value?.id,"promo-name":De.value?.name,"promo-type":De.value?.type,"promo-discount-amount":cr.value,note:sr.value,"kitchen-note":or.value,"order-date":new Date().toISOString().split("T")[0],"order-time":new Date().toTimeString().split(" ")[0],"payment-method":da.value,change:fa.value,onClose:u[18]||(u[18]=c=>ni.value=!1),onConfirm:si,appliedPromos:zi.value,"approved-discounts":ii.value,"approved-discount-details":vt.value.map(c=>({discount_id:c.id,discount_name:c.name,discount_percentage:c.percentage,discount_amount:ur(c.percentage),approval_id:c.approval_id}))},null,8,["show","customer","delivery-location","phone","order-type","selected-table","order-items","grand-total","cashReceived","client_secret","order_code","sub-total","tax","service-charges","delivery-charges","promo-discount","promo-id","promo-name","promo-type","promo-discount-amount","note","kitchen-note","order-date","order-time","payment-method","change","appliedPromos","approved-discounts","approved-discount-details"]),En(Wb,{show:oi.value,orders:Ki.value,onClose:u[19]||(u[19]=c=>oi.value=!1),onViewDetails:Gi,loading:Yi.value},null,8,["show","orders","loading"]),En(Fb,{show:Dr.value,loading:ai.value,promos:li.value,"order-items":G.value,onApplyPromo:Bs,onClose:u[20]||(u[20]=c=>Dr.value=!1)},null,8,["show","loading","promos","order-items"]),En(Vb,{show:Lr.value,discounts:$r.value,"order-items":G.value,loading:kr.value,"applied-discounts":vt.value,"rejected-discounts":lr.value,onClose:u[21]||(u[21]=c=>Lr.value=!1),onApplyDiscount:ha,onClearDiscount:va},null,8,["show","discounts","order-items","loading","applied-discounts","rejected-discounts"])])]),_:1})],64))}},WC=Db(pC,[["__scopeId","data-v-ba964ea4"]]);export{WC as default};
