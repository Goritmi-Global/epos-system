import{s as u}from"./index-CcYqNmWE.js";import{b3 as U,r as k,k as M,j as C,g as c,o as n,i as m,b as a,a as b,n as y,d as f,t as g,X as V}from"./app-COVoaSpv.js";import"./index-DHNrrZoT.js";const $={key:0,class:"fw-bold mb-4"},I={class:"row g-3"},A={class:"col-md-6"},T={key:0,class:"text-danger"},K={class:"col-md-6"},B={key:0,class:"text-danger"},D={class:"col-md-6"},Y={key:0,class:"text-danger"},H={class:"col-md-6"},O={key:0,class:"text-danger"},P={class:"col-md-6"},L={key:0,class:"text-danger"},v=3,z={__name:"Step3",props:{model:Object,formErrors:Object,isOnboarding:{type:Boolean,default:!1}},emits:["save"],setup(l,{emit:x}){const s=l,E=x,o=U({currency:s.model?.currency??"â‚¨",currency_symbol_position:s.model?.currency_symbol_position??"before",date_format:s.model?.date_format??"dd/MM/yyyy",number_format:s.model?.number_format??"1,000",time_format:s.model?.time_format??"12-hour"}),p={US:"$",GB:"Â£",PK:"â‚¨",IN:"â‚¹",AE:"Ø¯.Ø¥",SA:"ï·¼",EU:"â‚¬",DE:"â‚¬",FR:"â‚¬",IT:"â‚¬",ES:"â‚¬",CN:"Â¥",JP:"Â¥",AU:"A$",CA:"C$",CH:"Fr",SE:"kr",NO:"kr",DK:"kr",SG:"S$",MY:"RM",TH:"à¸¿",ID:"Rp",PH:"â‚±",VN:"â‚«",BD:"à§³",LK:"Rs",NP:"Rs",AF:"Ø‹",TR:"â‚º",EG:"Â£",ZA:"R",NG:"â‚¦",KE:"KSh",BR:"R$",MX:"$",AR:"$",CL:"$",NZ:"NZ$",KR:"â‚©",HK:"HK$",TW:"NT$",RU:"â‚½",PL:"zÅ‚",CZ:"KÄ",HU:"Ft",RO:"lei",IL:"â‚ª",QA:"Ø±.Ù‚",KW:"Ø¯.Ùƒ",BH:"Ø¨.Ø¯",OM:"Ø±.Ø¹",JO:"Ø¯.Ø§",LB:"Ù„.Ù„"},w=["â‚¨","Â£","$","â‚¬","Ø¯.Ø¥","ï·¼","â‚¹","Â¥","A$","C$","Fr","kr","S$","RM","à¸¿","Rp","â‚±","â‚«","à§³","Rs","Ø‹","â‚º","R","â‚¦","KSh","R$","NZ$","â‚©","HK$","NT$","â‚½","zÅ‚","KÄ","Ft","lei","â‚ª","Ø±.Ù‚","Ø¯.Ùƒ","Ø¨.Ø¯","Ø±.Ø¹","Ø¯.Ø§","Ù„.Ù„"],F=[{label:"Before Amount (Rs 1000)",value:"before"},{label:"After Amount (1000 Rs)",value:"after"},{label:"ISO Before (USD 1000)",value:"iso-before"},{label:"ISO After (1000 USD)",value:"iso-after"},{label:"With Currency Name (1000 Rupees)",value:"name"}],N=["dd/MM/yyyy","MM/dd/yyyy","yyyy-MM-dd","dd-MM-yyyy","yyyy/MM/dd","dd MMM yyyy","MMM dd, yyyy"],_=[{label:"12 Hour (02:30 PM)",value:"12-hour"},{label:"24 Hour (14:30)",value:"24-hour"}],S=["1,000","1.000","1 000","1'000","1000","12,34,567","Ù¡Ù¬Ù Ù Ù ","ï¼‘ï¼ï¼ï¼"],d=k(!1),h=k(null),R=(t=!1)=>{const e=s.model?.country_code;if(console.log("ðŸ’± [CURRENCY] Detecting for country:",e,"| Force:",t),!e){console.log("âš ï¸ [CURRENCY] No country code found");return}const r=p[e.toUpperCase()];r?(console.log("ðŸ’± [CURRENCY] Detected currency:",r),console.log("ðŸ’± [CURRENCY] userChangedCurrency:",d.value),console.log("ðŸ’± [CURRENCY] lastDetectedCountry:",h.value),t||!d.value||h.value!==e?(o.currency=r,h.value=e,console.log("âœ… [CURRENCY] Auto-set to:",r)):console.log("â„¹ï¸ [CURRENCY] User manually selected currency, skipping auto-detect")):console.log("âš ï¸ [CURRENCY] No mapping found for:",e)};M(()=>{console.log("ðŸš€ [STEP 3] Mounted with model:",s.model),R(!0)}),C(()=>s.model?.country_code,(t,e)=>{console.log("ðŸ‘€ [CURRENCY] Country changed:",e,"â†’",t),t&&(d.value=!1,R(!0))},{immediate:!1}),C(()=>o.currency,(t,e)=>{if(e&&t!==e&&h.value){const r=p[s.model?.country_code?.toUpperCase()];t!==r&&(console.log("ðŸ‘¤ [CURRENCY] User manually changed currency to:",t),d.value=!0)}}),C(()=>s.model,t=>{t&&(t.currency&&!d&&(o.currency=t.currency),o.currency_symbol_position=t.currency_symbol_position??"before",o.date_format=t.date_format??"dd/MM/yyyy",o.number_format=t.number_format??"1,000",o.time_format=t.time_format??"12-hour")},{immediate:!0});const i=()=>{try{E("save",{step:v,data:V(o)})}catch(t){console.error(`Step ${v} emitSave error:`,t)}};return C(o,i,{deep:!0,immediate:!0}),(t,e)=>(n(),c("div",null,[s.isOnboarding?(n(),c("h5",$,"Step 3 of 9 - Currency & Locale")):m("",!0),a("div",I,[a("div",A,[e[5]||(e[5]=a("label",{class:"form-label"},"Select Currency*",-1)),b(f(u),{modelValue:o.currency,"onUpdate:modelValue":e[0]||(e[0]=r=>o.currency=r),options:w,pt:{root:{class:"bg-white text-black"},label:{class:"text-black"},listContainer:{class:"bg-white text-black"},option:{class:"text-black hover:bg-gray-100"},header:{class:"bg-white text-black"},IconField:{class:"bg-white"},InputText:{class:"bg-white"},pcFilter:{class:"bg-white"},pcFilterContainer:{class:"bg-white"}},placeholder:"Select currency",class:y(["w-100",{"is-invalid":l.formErrors?.currency}]),onChange:i},null,8,["modelValue","class"]),l.formErrors?.currency?(n(),c("small",T,g(l.formErrors.currency[0]),1)):m("",!0)]),a("div",K,[e[6]||(e[6]=a("label",{class:"form-label"},"Symbol Position*",-1)),b(f(u),{modelValue:o.currency_symbol_position,"onUpdate:modelValue":e[1]||(e[1]=r=>o.currency_symbol_position=r),options:F,pt:{root:{class:"bg-white text-black"},label:{class:"text-black"},listContainer:{class:"bg-white text-black"},option:{class:"text-black hover:bg-gray-100"},header:{class:"bg-white text-black"},IconField:{class:"bg-white"},InputText:{class:"bg-white"},pcFilter:{class:"bg-white"},pcFilterContainer:{class:"bg-white"}},optionLabel:"label",optionValue:"value",placeholder:"Choose position",class:y(["w-100",{"is-invalid":l.formErrors?.currency_symbol_position}]),onChange:i},null,8,["modelValue","class"]),l.formErrors?.currency_symbol_position?(n(),c("small",B,g(l.formErrors.currency_symbol_position[0]),1)):m("",!0)]),a("div",D,[e[7]||(e[7]=a("label",{class:"form-label"},"Date Format*",-1)),b(f(u),{modelValue:o.date_format,"onUpdate:modelValue":e[2]||(e[2]=r=>o.date_format=r),options:N,pt:{root:{class:"bg-white text-black"},label:{class:"text-black"},listContainer:{class:"bg-white text-black"},option:{class:"text-black hover:bg-gray-100"},header:{class:"bg-white text-black"},IconField:{class:"bg-white"},InputText:{class:"bg-white"},pcFilter:{class:"bg-white"},pcFilterContainer:{class:"bg-white"}},placeholder:"Select format",class:y(["w-100",{"is-invalid":l.formErrors?.date_format}]),onChange:i},null,8,["modelValue","class"]),l.formErrors?.date_format?(n(),c("small",Y,g(l.formErrors.date_format[0]),1)):m("",!0)]),a("div",H,[e[8]||(e[8]=a("label",{class:"form-label"},"Number Format*",-1)),b(f(u),{modelValue:o.number_format,"onUpdate:modelValue":e[3]||(e[3]=r=>o.number_format=r),options:S,pt:{root:{class:"bg-white text-black"},label:{class:"text-black"},listContainer:{class:"bg-white text-black"},option:{class:"text-black hover:bg-gray-100"},header:{class:"bg-white text-black"},IconField:{class:"bg-white"},InputText:{class:"bg-white"},pcFilter:{class:"bg-white"},pcFilterContainer:{class:"bg-white"}},placeholder:"Select format",class:y(["w-100",{"is-invalid":l.formErrors?.number_format}]),onChange:i},null,8,["modelValue","class"]),l.formErrors?.number_format?(n(),c("small",O,g(l.formErrors.number_format[0]),1)):m("",!0)]),a("div",P,[e[9]||(e[9]=a("label",{class:"form-label"},"Time Format*",-1)),b(f(u),{modelValue:o.time_format,"onUpdate:modelValue":e[4]||(e[4]=r=>o.time_format=r),options:_,pt:{root:{class:"bg-white text-black"},label:{class:"text-black"},listContainer:{class:"bg-white text-black"},option:{class:"text-black hover:bg-gray-100"},header:{class:"bg-white text-black"},IconField:{class:"bg-white"},InputText:{class:"bg-white"},pcFilter:{class:"bg-white"},pcFilterContainer:{class:"bg-white"}},optionLabel:"label",optionValue:"value",placeholder:"Select format",class:y(["w-100",{"is-invalid":l.formErrors?.time_format}]),onChange:i},null,8,["modelValue","class"]),l.formErrors?.time_format?(n(),c("small",L,g(l.formErrors.time_format[0]),1)):m("",!0)])])]))}};export{z as default};
