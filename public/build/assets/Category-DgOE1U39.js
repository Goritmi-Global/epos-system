import{_ as He,r as c,o as fe,n as We,c as ne,I as qe,w as Ke,E as ye,a as ie,b as i,d as K,e as C,f as a,u as D,h as Xe,g as u,F as $,i as X,t as p,j as V,k as Ye,l as x,m as R,v as re,p as U,T as de,P as Ze,U as he,y as Ce,q as H,s as r}from"./app-V2s1lVwu.js";import{_ as Ge}from"./Master-WElJ1C4A.js";import{s as _e}from"./index-XvgJR8h_.js";import{s as Je}from"./index-MBvvLjiN.js";import{u as Qe}from"./useFormatters-DBoQqG9N.js";import{F as ea}from"./FilterModal-DUiOIWh-.js";import{s as aa}from"./index-UlX-uW-d.js";import{E as ta,a as la,X as sa,u as Y,w as oa}from"./xlsx-CFUnkIXt.js";import{I as na}from"./importFile-BsAmPoU7.js";import{S as ia}from"./shapes-XWoBaDwJ.js";import{P as ra}from"./package-DUAJPvM6.js";import{C as da}from"./circle-x-IjGY2f6Z.js";import{P as ua}from"./plus-BKVyIOGe.js";import{P as we}from"./pencil-Wnn9pGcO.js";import"./index-DoagSzzV.js";import"./createLucideIcon-Coq8DOvK.js";import"./index-Cak9KJ6C.js";import"./index-DzFuXtkm.js";import"./sun-DZ5FTXo1.js";import"./index-BkYT2TiQ.js";import"./index-BF4Ii756.js";import"./index-DnuCJBtX.js";const ca={class:"page-wrapper"},ma={class:"row g-3"},pa={class:"card border-0 shadow-sm rounded-4"},va={class:"card-body d-flex align-items-center justify-content-between"},ga={class:"fw-bold fs-4"},ba={class:"text-muted fs-6"},fa={class:"card border-0 shadow-lg rounded-4 mt-0"},ya={class:"card-body"},ha={class:"d-flex flex-wrap gap-2 justify-content-between align-items-center mb-3"},Ca={class:"d-flex flex-wrap gap-2 align-items-center"},_a={class:"search-wrap"},wa={key:1,class:"form-control search-input",placeholder:"Search",disabled:"",type:"text"},ka={class:"col-md-6"},Sa=["onUpdate:modelValue"],xa=["value"],Fa={class:"col-md-6 mt-3"},Ma=["onUpdate:modelValue"],Ia={class:"col-md-12 mt-3"},Ba=["onUpdate:modelValue"],Da={class:"table-responsive"},$a={class:"table table-hover align-middle"},Va={class:"fw-semibold"},Ea={class:"text-truncate",style:{"max-width":"260px"}},Na={key:0},Pa=["onClick"],Ta={key:1},ja={class:"rounded d-inline-flex align-items-center justify-content-center img-chip"},Aa=["src","alt"],La={key:1,class:"fs-5"},Ua={class:"text-center"},Oa={class:"d-inline-flex align-items-center gap-3"},za=["onClick"],Ra={key:0},Ha={key:0,class:"mt-4 d-flex justify-content-between align-items-center"},Wa={class:"text-muted small"},qa={class:"modal fade",id:"addCatModal",tabindex:"-1","aria-hidden":"true"},Ka={class:"modal-dialog modal-lg modal-dialog-centered"},Xa={class:"modal-content rounded-4"},Ya={class:"modal-header"},Za={class:"modal-title fw-semibold"},Ga={class:"modal-body"},Ja={class:"row g-3"},Qa={class:"col-lg-12"},et={class:"d-flex align-items-center gap-3"},at={class:"form-check"},tt=["checked"],lt={class:"form-check"},st=["checked"],ot={key:0,class:"col-lg-12"},nt={key:0,class:"text-danger"},it={class:"col-lg-12"},rt={class:"dropdown w-100"},dt={class:"btn btn-outline-secondary w-100 d-flex justify-content-between align-items-center rounded-3","data-bs-toggle":"dropdown",type:"button"},ut={class:"d-flex align-items-center"},ct=["src"],mt={class:"dropdown-menu w-100 shadow rounded-3"},pt=["onClick"],vt=["src"],gt={key:1,class:"col-12"},bt={key:2,class:"text-danger"},ft={key:2,class:"col-12"},yt={class:"p-3 d-flex justify-content-between"},ht={class:"d-flex gap-2"},Ct={key:0,class:"text-danger"},_t={key:1,class:"text-danger"},wt={key:3,class:"col-12"},kt=["value"],St={class:"col-12"},xt={class:"d-flex align-items-center gap-3"},Ft={class:"form-check"},Mt=["checked"],It={class:"form-check"},Bt=["checked"],Dt={class:"mt-4"},$t=["disabled"],Vt={class:"modal fade",id:"editSubCatModal",tabindex:"-1","aria-labelledby":"editSubCatModalLabel","aria-hidden":"true"},Et={class:"modal-dialog modal-md modal-dialog-centered"},Nt={class:"modal-content"},Pt={class:"modal-body"},Tt={class:"mb-3"},jt=["disabled"],At={class:"text-danger"},Lt=["disabled"],Ut={__name:"Category",setup(Ot){Qe();const b=c([]),M=c([]),f=c(null),w=c([]),ae=c(null),ke=[{label:"PDF",value:"pdf"},{label:"Excel",value:"excel"},{label:"CSV",value:"csv"}],Se=l=>{l.value&&(Le(l.value),ae.value=null)},_=c({current_page:1,last_page:1,per_page:10,total:0,from:0,to:0,links:[]}),Z=c({total:0,active:0,inactive:0}),G={sortBy:"",category:"",status:"",hasSubcategories:""},W=c({...G}),E=c({...G}),I=async(l=null)=>{try{J.value=!0;const e={q:N.value,page:l||_.value.current_page,per_page:_.value.per_page,sort_by:E.value.sortBy||"",status:E.value.status||"",category:E.value.category||"",has_subcategories:E.value.hasSubcategories||""};Object.keys(e).forEach(o=>{(e[o]===void 0||e[o]==="")&&delete e[o]});const s=await H.get("/api/menu-categories/parents/list",{params:e});M.value=s.data.data||[],s.data.stats&&(Z.value=s.data.stats),_.value={current_page:s.data.current_page,last_page:s.data.last_page,per_page:s.data.per_page,total:s.data.total,from:s.data.from,to:s.data.to,links:s.data.links},J.value=!1}catch(e){console.error("Failed to fetch categories:",e),r.error("Failed to load categories"),J.value=!1}};let ue=null;const xe=l=>{if(!l)return;const s=new URLSearchParams(l.split("?")[1]).get("page");s&&I(parseInt(s))};fe(async()=>{N.value="",me.value=Date.now(),await We(),setTimeout(()=>{pe.value=!0;const e=document.getElementById(te);e&&(e.value="",N.value="")},100),I();const l=document.getElementById("categoryFilterModal");l&&l.addEventListener("hidden.bs.modal",()=>{W.value={...E.value}})});const ce=ne(()=>M.value.filter(l=>l.parent_id===null)),Fe=ne(()=>[{label:"Total Categories",value:Z.value.total,icon:ia,iconBg:"bg-light-primary",iconColor:"text-primary"},{label:"Active Categories",value:Z.value.active,icon:ra,iconBg:"bg-light-success",iconColor:"text-success"},{label:"Inactive Categories",value:Z.value.inactive,icon:da,iconBg:"bg-light-danger",iconColor:"text-danger"}]),N=c(""),me=c(Date.now()),te=`search-${Math.random().toString(36).substr(2,9)}`,pe=c(!1),J=c(!1),Me=()=>{E.value={...W.value},_.value.current_page=1,I(1),bootstrap.Modal.getInstance(document.getElementById("categoryFilterModal"))?.hide()},ve=ne(()=>({sortOptions:[{value:"name_asc",label:"Name: A to Z"},{value:"name_desc",label:"Name: Z to A"}],statusOptions:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],hasSubcategoriesOptions:[{value:"yes",label:"Has Subcategories"},{value:"no",label:"No Subcategories"}]})),Ie=()=>{W.value={...G},E.value={...G},_.value.current_page=1,_.value.per_page=10,I(1)};fe(()=>window.feather?.replace()),qe(()=>window.feather?.replace());const h=c(!1),Q=c(""),F=c(!0),k=c(null),g=c({label:"Produce (Veg/Fruit)",value:"https://wallpaperaccess.com/full/5502204.jpg",file:null}),P=[{label:"Hot Drinks",value:"Hot Drinks",icon:"/assets/img/coffee.png"},{label:"Cold Drinks",value:"Cold Drinks",icon:"/assets/img/soda.png"},{label:"Breakfast",value:"Breakfast",icon:"/assets/img/english-breakfast.png"},{label:"Street Snacks",value:"Street Snacks",icon:"/assets/img/food.png"},{label:"Wala Wraps",value:"Wala Wraps",icon:"/assets/img/burrito.png"},{label:"Bombay Toasties",value:"Bombay Toasties",icon:"/assets/img/food (1).png"},{label:"Salads",value:"Salads",icon:"/assets/img/salad.png"},{label:"Bombay Bowls",value:"Bombay Bowls",icon:"/assets/img/porridge.png"},{label:"Bakery",value:"Bakery",icon:"/assets/img/cake.png"},{label:"Soup",value:"Soup",icon:"/assets/img/bowl.png"},{label:"Desserts",value:"Desserts",icon:"/assets/img/cupcake.png"},{label:"Ice Cream",value:"Ice Cream",icon:"/assets/img/ice-cream.png"}],le=c([{label:"Hot Drinks",value:"Hot Drinks",icon:"/assets/img/coffee.png"},{label:"Cold Drinks",value:"Cold Drinks",icon:"/assets/img/soda.png"},{label:"Breakfast",value:"Breakfast",icon:"/assets/img/english-breakfast.png"},{label:"Street Snacks",value:"Street Snacks",icon:"/assets/img/food.png"},{label:"Wala Wraps",value:"Wala Wraps",icon:"/assets/img/wrap.png"},{label:"Bombay Toasties",value:"Bombay Toasties",icon:"/assets/img/bombay-toasties.png"},{label:"Salads",value:"Salads",icon:"/assets/img/salad.png"},{label:"Bombay Bowls",value:"Bombay Bowls",icon:"/assets/img/porridge.png"},{label:"Bakery",value:"Bakery",icon:"/assets/img/cake.png"},{label:"Soup",value:"Soup",icon:"/assets/img/bowl.png"},{label:"Desserts",value:"Desserts",icon:"/assets/img/cupcake.png"},{label:"Ice Cream",value:"Ice Cream",icon:"/assets/img/ice-cream.png"}]),B=c(!1),v=c({}),Be=()=>{h.value=!1,b.value=[],w.value=[],Q.value="",F.value=!0,k.value=null,g.value=P[0],v.value={},ee.value="",q.value="",j.value=[],O.value="",f.value=null},ge=async(l,e)=>{try{const s=await fetch(l);if(!s.ok)return console.error("âŒ Fetch failed:",s.status),null;const o=await s.blob();return new File([o],e,{type:o.type||"image/jpeg"})}catch(s){return console.error("âŒ Error converting URL to File:",s),null}},De=async l=>{g.value={label:l.label,value:l.value,icon:l.icon,file:null};const e=l.label.toLowerCase().replace(/[^a-z0-9]/g,"-")+".jpg",s=await ge(l.icon,e);s?g.value.file=s:(console.error("âŒ Failed to convert icon to file"),r.error("Failed to load icon. Please try again."))},$e=async()=>{if(h.value&&!k.value){v.value.parent_id=["Please select a parent category"],r.error(v.value.parent_id[0]),B.value=!1;return}T(),B.value=!0;try{if(g.value.icon&&!g.value.file){const e=g.value.label.toLowerCase().replace(/[^a-z0-9]/g,"-")+".jpg",s=await ge(g.value.icon,e);s?g.value.file=s:console.warn("âš ï¸ Could not convert icon to file")}if(f.value){const e=new FormData;let s="";if(h.value?s=Q.value?.trim():s=b.value[0]?.label?.trim()||b.value[0]?.name?.trim()||(typeof b.value[0]=="string"?b.value[0].trim():""),!s){v.value.name=["Category name cannot be empty"],r.error("Category name cannot be empty"),B.value=!1;return}e.append("name",s),e.append("active",F.value?"1":"0"),e.append("parent_id",k.value||""),e.append("_method","PUT"),g.value.file&&g.value.file instanceof File?e.append("icon",g.value.file):console.warn("âš ï¸ No icon file to attach"),!k.value&&O.value&&O.value.split(",").map(t=>t.trim()).filter(t=>t.length>0).forEach((t,d)=>{const m=f.value.subcategories?.find(n=>n.name.toLowerCase()===t.toLowerCase());e.append(`subcategories[${d}][name]`,t),m?(e.append(`subcategories[${d}][id]`,m.id),e.append(`subcategories[${d}][active]`,m.active?"1":"0")):e.append(`subcategories[${d}][active]`,"1")});for(let o of e.entries())o[1]instanceof File;await H.post(`/menu-categories/${f.value.id}`,e,{headers:{"Content-Type":"multipart/form-data"}}),r.success("Category updated successfully")}else{const e=new FormData;let s=[];if(h.value){if(w.value.length===0){v.value.subcategories=["Please add at least one subcategory"],r.error("Please add at least one subcategory"),B.value=!1;return}s=w.value.map(o=>({name:typeof o=="string"?o:o.label,active:F.value,parent_id:k.value}))}else{if(b.value.length===0){v.value.name=["Please add at least one category"],r.error("Please add at least one category"),B.value=!1;return}s=b.value.map(o=>({name:typeof o=="string"?o:o.label,active:F.value,parent_id:null}))}e.append("isSubCategory",h.value?"1":"0"),s.forEach((o,t)=>{e.append(`categories[${t}][name]`,o.name),e.append(`categories[${t}][active]`,o.active?"1":"0"),o.parent_id&&e.append(`categories[${t}][parent_id]`,o.parent_id)}),g.value.file&&g.value.file instanceof File?e.append("icon",g.value.file):console.warn("âš ï¸ No icon file to attach");for(let o of e.entries())o[1]instanceof File||console.log(`  ${o[0]}: ${o[1]}`);await H.post("/menu-categories",e,{headers:{"Content-Type":"multipart/form-data"}}),r.success("Category created successfully")}bootstrap.Modal.getInstance(document.getElementById("addCatModal"))?.hide(),se(),f.value=null,await I()}catch(l){if(console.error("âŒ Submit error:",l),l.response?.status===422&&l.response?.data?.errors){const e=l.response.data.errors;let s=[];v.value={},Object.keys(e).forEach(o=>{let t=o.replace(/^categories\.\d+\./,"");v.value[t]=e[o],Array.isArray(e[o])&&e[o].forEach(d=>{s.push(d)})}),s.length>0?r.error(s.join(`
`)):r.error("Validation failed. Please check your input.")}else{const e=l.response?.data?.message||"Failed to save category";r.error(e+" âŒ")}}finally{B.value=!1}},se=()=>{h.value=!1,b.value=[],F.value=!0,k.value=null,Q.value="",g.value={label:P[0].label,value:P[0].value,icon:P[0].icon,file:null},f.value=null,O.value=""},T=()=>{v.value={},A.value=""},O=c(""),Ve=l=>{T(),f.value=l,h.value=!!l.parent_id,k.value=l.parent_id||null;const e=P.find(t=>t.value===l.icon);g.value=e||P[0],h.value?Q.value=l.name:b.value=[{label:l.name,value:l.name,id:l.id}],F.value=l.active,l.subcategories&&l.subcategories.length>0?(j.value=l.subcategories.map(t=>({label:t.name,value:t.id?t.id.toString():`temp_${Date.now()}_${Math.random()}`})),w.value=l.subcategories.map(t=>t.id?t.id.toString():`temp_${Date.now()}_${Math.random()}`),O.value=l.subcategories.map(t=>t.name).join(", ")):(j.value=[],w.value=[],O.value="");const s=document.getElementById("addCatModal");new bootstrap.Modal(s).show()},ee=c(""),be=()=>{const l=(ee.value||"").trim();l&&(le.value.some(e=>e.label.toLowerCase()===l.toLowerCase())||le.value.push({label:l,value:l}),b.value.includes(l)||(b.value=[...b.value,l]),ee.value="")},Ee=async l=>{if(l?.id)try{const e=await H.delete(`/menu-categories/${l.id}`);r.success(e.data.message||"Category deleted successfully"),await I()}catch(e){console.error("âŒ Delete error:",e.response?.data||e.message);const s=e.response?.data?.message||"Failed to delete category âŒ";r.error(s)}},j=c([]),q=c(""),oe=()=>{const l=q.value?.trim();l&&(j.value.some(e=>e.value.toLowerCase()===l.toLowerCase())||j.value.push({label:l,value:l}),w.value.includes(l)||w.value.push(l),q.value="")},Ne=()=>{w.value=j.value.map(l=>l.value)},Pe=()=>{w.value=[]},S=c({id:null,name:"",parent_id:null}),Te=(l,e)=>{S.value={id:e.id,name:e.name,parent_id:l.id};const s=document.getElementById("editSubCatModal"),o=bootstrap.Modal.getOrCreateInstance(s);T(),o.show()},z=c(!1),A=c(""),je=()=>{S.value={id:null,name:"",parent_id:null},A.value={},z.value=!1},Ae=async()=>{if(!S.value.name.trim()){A.value="Subcategory name cannot be empty",r.error("Please filled all the required fields");return}z.value=!0;try{const{data:l}=await H.put(`/menu-categories/subcategories/${S.value.id}`,{name:S.value.name.trim()});if(l.success){r.success(l.message);const e=M.value.find(t=>t.id===S.value.parent_id);if(e){const t=e.subcategories.find(d=>d.id===S.value.id);t&&(t.name=S.value.name)}const s=document.getElementById("editSubCatModal");bootstrap.Modal.getInstance(s).hide(),S.value={id:null,name:"",parent_id:null}}else A.value=l.message||"Failed to update subcategory"}catch(l){console.error(l),A.value=l.response?.data?.message||"An error occurred while updating"}finally{z.value=!1}},Le=l=>{if(!M.value||M.value.length===0){r.error("No Units data to download");return}const e=N.value.trim()?filtered.value:M.value;if(e.length===0){r.error("No Units found to download");return}try{l==="pdf"?Oe(e):l==="excel"?ze(e):l==="csv"?Ue(e):r.error("Invalid download type")}catch(s){console.error("Download failed:",s),r.error(`Download failed: ${s.message}`)}};Ke(N,()=>{clearTimeout(ue),ue=setTimeout(()=>{_.value.current_page=1,I(1)},500)});const Ue=l=>{try{const e=["category","subcategory","active"],s=l.map(n=>{const y=n.subcategories&&n.subcategories.length>0?n.subcategories.map(L=>L.name).join(", "):"";return[`"${n.name||""}"`,`"${y}"`,`${n.active?"Yes":"No"}`]}),o=[e.join(","),...s.map(n=>n.join(","))].join(`
`),t=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(t),m=document.createElement("a");m.setAttribute("href",d),m.setAttribute("download",`Categories_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(m),m.click(),document.body.removeChild(m),r.success("CSV downloaded successfully")}catch(e){console.error("CSV generation error:",e),r.error(`CSV generation failed: ${e.message}`,{autoClose:5e3})}},Oe=l=>{try{const e=new ta("p","mm","a4");e.setFontSize(18),e.setFont("helvetica","bold"),e.text("Menu Categories Report",60,20),e.setFontSize(10),e.setFont("helvetica","normal");const s=new Date().toLocaleString();e.text(`Generated on: ${s}`,14,28),e.text(`Total Categories: ${l.length}`,14,34);const o=["Category","Subcategories","Active"],t=l.map(m=>{const n=m.subcategories&&m.subcategories.length>0?m.subcategories.map(y=>y.name).join(", "):"";return[m.name||"",n,m.active?"Yes":"No"]});la(e,{head:[o],body:t,startY:40,styles:{fontSize:9,cellPadding:3,halign:"left",lineColor:[0,0,0],lineWidth:.1},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:14,right:14},didDrawPage:m=>{const n=e.internal.getNumberOfPages(),y=e.internal.pageSize.height;e.setFontSize(8),e.text(`Page ${m.pageNumber} of ${n}`,m.settings.margin.left,y-10)}});const d=`Categories_${new Date().toISOString().split("T")[0]}.pdf`;e.save(d),r.success("PDF downloaded successfully")}catch(e){console.error("PDF generation error:",e),r.error(`PDF generation failed: ${e.message}`,{autoClose:5e3})}},ze=l=>{try{if(typeof sa>"u")throw new Error("XLSX library is not loaded");const e=l.map(n=>{const y=n.subcategories&&n.subcategories.length>0?n.subcategories.map(L=>L.name).join(", "):"";return{Category:n.name||"",Subcategory:y,Active:n.active?"Yes":"No"}}),s=Y.book_new(),o=Y.json_to_sheet(e);o["!cols"]=[{wch:25},{wch:40},{wch:10}],Y.book_append_sheet(s,o,"Menu Categories");const t=[{Info:"Generated On",Value:new Date().toLocaleString()},{Info:"Total Categories",Value:l.length},{Info:"Exported By",Value:"Menu Categories Management"}],d=Y.json_to_sheet(t);Y.book_append_sheet(s,d,"Report Info");const m=`Categories_${new Date().toISOString().split("T")[0]}.xlsx`;oa(s,m),r.success("Excel downloaded successfully",{autoClose:2500})}catch(e){console.error("Excel generation error:",e),r.error(`Excel generation failed: ${e.message}`,{autoClose:5e3})}},Re=l=>{if(!l||l.length<=1){r.error("The imported file is empty.");return}l[0];const s=l.slice(1).map(n=>({category:n[0]||"",subcategory:n[1]||null,active:n[2]=="0"?0:1})),o=s.filter(n=>n.category).map(n=>n.category.trim().toLowerCase()),t=o.filter((n,y)=>o.indexOf(n)!==y);if(t.length>0){r.error(`Duplicate parent category names found in CSV: ${[...new Set(t)].join(", ")}`);return}const d=M.value.filter(n=>!n.parent_id).map(n=>n.name.trim().toLowerCase()),m=s.filter(n=>n.category).filter(n=>d.includes(n.category.trim().toLowerCase()));if(m.length>0){const n=m.map(y=>y.category).join(", ");r.error(`Parent categories already exist in the table: ${n}`);return}H.post("/api/menu-categories/import",{categories:s}).then(()=>{r.success("Categories imported successfully");const n=document.querySelector(".modal.show");if(n){const y=bootstrap.Modal.getInstance(n);y&&y.hide()}setTimeout(()=>{document.querySelectorAll(".modal-backdrop").forEach(L=>L.remove()),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight=""},100),I()}).catch(n=>{console.error(n),r.error("Import failed"),setTimeout(()=>{document.querySelectorAll(".modal-backdrop").forEach(L=>L.remove()),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight=""},100)})};return(l,e)=>{const s=ye("ConfirmModal"),o=ye("Button");return i(),ie(Ge,null,{default:K(()=>[C(D(Xe),{title:"Menu Category"}),a("div",ca,[e[49]||(e[49]=a("h4",{class:"mb-3"},"Categories",-1)),a("div",ma,[(i(!0),u($,null,X(Fe.value,t=>(i(),u("div",{key:t.label,class:"col-md-6 col-xl-4"},[a("div",pa,[a("div",va,[a("div",null,[a("div",ga,p(t.value),1),a("div",ba,p(t.label),1)]),a("div",{class:V(["p-3 rounded-3 d-flex align-items-center justify-content-center",t.iconBg])},[(i(),ie(Ye(t.icon),{class:V(t.iconColor),size:"28"},null,8,["class"]))],2)])])]))),128))]),a("div",fa,[a("div",ya,[a("div",ha,[e[28]||(e[28]=a("h4",{class:"mb-0"},"Categories",-1)),a("div",Ca,[a("div",_a,[e[19]||(e[19]=a("i",{class:"bi bi-search"},null,-1)),e[20]||(e[20]=a("input",{type:"email",name:"email",autocomplete:"email",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px"},tabindex:"-1","aria-hidden":"true"},null,-1)),pe.value?R((i(),u("input",{id:te,"onUpdate:modelValue":e[0]||(e[0]=t=>N.value=t),key:me.value,class:"form-control search-input",placeholder:"Search",type:"search",autocomplete:"new-password",name:te,role:"presentation",onFocus:e[1]||(e[1]=(...t)=>l.handleFocus&&l.handleFocus(...t))},null,32)),[[re,N.value]]):(i(),u("input",wa))]),C(ea,{modelValue:W.value,"onUpdate:modelValue":e[2]||(e[2]=t=>W.value=t),title:"Menu Categories","modal-id":"categoryFilterModal","modal-size":"modal-lg","sort-options":ve.value.sortOptions,"status-options":ve.value.statusOptions,"show-stock-status":!1,"show-price-range":!1,"show-date-range":!1,"show-category":!1,suppliers:[],onApply:Me,onClear:Ie},{customFilters:K(({filters:t})=>[a("div",ka,[e[22]||(e[22]=a("label",{class:"form-label fw-semibold text-dark"},[a("i",{class:"fas fa-tags me-2 text-muted"}),U("Category ")],-1)),R(a("select",{"onUpdate:modelValue":d=>t.category=d,class:"form-select"},[e[21]||(e[21]=a("option",{value:""},"All Categories",-1)),(i(!0),u($,null,X(ce.value,d=>(i(),u("option",{key:d.id,value:d.id},p(d.name),9,xa))),128))],8,Sa),[[de,t.category]])]),a("div",Fa,[e[24]||(e[24]=a("label",{class:"form-label fw-semibold text-dark"},[a("i",{class:"fas fa-toggle-on me-2 text-muted"}),U("Status ")],-1)),R(a("select",{"onUpdate:modelValue":d=>t.status=d,class:"form-select"},[...e[23]||(e[23]=[a("option",{value:""},"All Status",-1),a("option",{value:"active"},"Active",-1),a("option",{value:"inactive"},"Inactive",-1)])],8,Ma),[[de,t.status]])]),a("div",Ia,[e[26]||(e[26]=a("label",{class:"form-label fw-semibold text-dark"},[a("i",{class:"fas fa-sitemap me-2 text-muted"}),U("Has Subcategories ")],-1)),R(a("select",{"onUpdate:modelValue":d=>t.hasSubcategories=d,class:"form-select"},[...e[25]||(e[25]=[a("option",{value:""},"All",-1),a("option",{value:"yes"},"Has Subcategories",-1),a("option",{value:"no"},"No Subcategories",-1)])],8,Ba),[[de,t.hasSubcategories]])])]),_:1},8,["modelValue","sort-options","status-options"]),a("button",{"data-bs-toggle":"modal","data-bs-target":"#addCatModal",onClick:e[3]||(e[3]=t=>{f.value=null,je(),Be()}),class:"d-flex align-items-center gap-1 px-4 btn-sm py-2 rounded-pill btn btn-primary text-white"},[C(D(ua),{class:"w-4 h-4"}),e[27]||(e[27]=U(" Add Category ",-1))]),C(na,{label:"Import",sampleHeaders:["category","subcategory","active"],sampleData:[["Dairy","TestSubCat",1],["Bakery","Bread",1],["Beverages","Juices",0]],onOnImport:Re}),C(D(aa),{modelValue:ae.value,"onUpdate:modelValue":e[4]||(e[4]=t=>ae.value=t),options:ke,optionLabel:"label",optionValue:"value",placeholder:"Export",class:"export-dropdown",onChange:Se},null,8,["modelValue"])])]),a("div",Da,[a("table",$a,[e[30]||(e[30]=a("thead",{class:"border-top small text-muted"},[a("tr",null,[a("th",null,"S.#"),a("th",null,"Category"),a("th",null,"Sub Category"),a("th",null,"Icon"),a("th",null,"Total Item"),a("th",null,"Status"),a("th",{class:"text-center"},"Action")])],-1)),a("tbody",null,[(i(!0),u($,null,X(M.value,(t,d)=>(i(),u("tr",{key:t.id},[a("td",null,p(d+1),1),a("td",Va,p(t.name),1),a("td",Ea,[t.subcategories&&t.subcategories.length?(i(),u("div",Na,[(i(!0),u($,null,X(t.subcategories,m=>(i(),u("div",{key:m.id,class:"d-flex justify-content-between align-items-center",style:{gap:"5px"}},[a("span",null,p(m.name),1),a("button",{"data-bs-toggle":"modal",onClick:()=>{Te(t,m)},title:"Edit",class:"p-2 rounded-full text-blue-600 hover:bg-blue-100"},[C(D(we),{class:"w-4 h-4"})],8,Pa)]))),128))])):(i(),u("span",Ta,"â€“"))]),a("td",null,[a("div",ja,[t.image_url?(i(),u("img",{key:0,src:t.image_url,alt:t.name,class:"rounded",style:{width:"32px",height:"32px","object-fit":"cover"}},null,8,Aa)):(i(),u("span",La,"ðŸ“¦"))])]),a("td",null,p(t.total_menu_items),1),a("td",null,[a("span",{class:V(["badge",t.active?"bg-success rounded-pill":"bg-danger rounded-pill"])},p(t.active?"Active":"Inactive"),3)]),a("td",Ua,[a("div",Oa,[a("button",{"data-bs-toggle":"modal","data-bs-target":"#modalUnitForm",onClick:()=>{Ve(t)},title:"Edit",class:"p-2 rounded-full text-blue-600 hover:bg-blue-100"},[C(D(we),{class:"w-4 h-4"})],8,za),C(s,{title:"Confirm Delete",message:`Are you sure you want to delete ${t.name}?`,showDeleteButton:!0,onConfirm:()=>{Ee(t)},onCancel:()=>{}},null,8,["message","onConfirm"])])])]))),128)),M.value.length===0?(i(),u("tr",Ra,[...e[29]||(e[29]=[a("td",{colspan:"10",class:"text-center text-muted py-4"}," No categories found. ",-1)])])):x("",!0)])])]),!J.value&&_.value.last_page>1?(i(),u("div",Ha,[a("div",Wa," Showing "+p(_.value.from)+" to "+p(_.value.to)+" of "+p(_.value.total)+" entries ",1),C(Ze,{pagination:_.value.links,isApiDriven:!0,onPageChanged:xe},null,8,["pagination"])])):x("",!0)])]),a("div",qa,[a("div",Ka,[a("div",Xa,[a("div",Ya,[a("h5",Za,p(f.value?"Edit Menu Category":"Add Menu Category"),1),a("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:se},[...e[31]||(e[31]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),a("div",Ga,[a("div",Ja,[f.value?x("",!0):(i(),u($,{key:0},[a("div",Qa,[e[34]||(e[34]=a("label",{class:"form-label d-block mb-2"},"Is this a subcategory?",-1)),a("div",et,[a("div",at,[a("input",{class:"form-check-input",type:"radio",checked:h.value,onClick:e[5]||(e[5]=t=>T()),onChange:e[6]||(e[6]=t=>{h.value=!0,k.value=null}),name:"isSub"},null,40,tt),e[32]||(e[32]=a("label",{class:"form-check-label"},"Yes",-1))]),a("div",lt,[a("input",{class:"form-check-input",type:"radio",checked:!h.value,onClick:e[7]||(e[7]=t=>T()),onChange:e[8]||(e[8]=t=>{h.value=!1,k.value=null}),name:"isSub"},null,40,st),e[33]||(e[33]=a("label",{class:"form-check-label"},"No",-1))])])]),h.value?(i(),u("div",ot,[e[35]||(e[35]=a("label",{class:"form-label"},"Category",-1)),C(D(Je),{modelValue:k.value,"onUpdate:modelValue":e[9]||(e[9]=t=>k.value=t),options:ce.value,optionLabel:"name",optionValue:"id",placeholder:"Select Category",class:V(["w-100",{"is-invalid":v.value?.parent_id}]),appendTo:"self",autoZIndex:!0,baseZIndex:2e3},null,8,["modelValue","options","class"]),v.value?.parent_id?(i(),u("small",nt,p(v.value.parent_id[0]),1)):x("",!0)])):x("",!0)],64)),a("div",it,[e[37]||(e[37]=a("label",{class:"form-label d-block mb-2"},"Manual Icon",-1)),a("div",rt,[a("button",dt,[a("div",ut,[a("img",{src:g.value.icon,alt:"icon",class:"me-2 rounded",width:"30",height:"30"},null,8,ct),a("span",null,p(g.value.label),1)]),e[36]||(e[36]=a("i",{class:"bi bi-caret-down-fill"},null,-1))]),a("ul",mt,[(i(),u($,null,X(P,t=>a("li",{key:t.label},[a("a",{class:"dropdown-item d-flex align-items-center",href:"javascript:void(0)",onClick:d=>De(t)},[a("img",{src:t.icon,alt:"icon",class:"me-2 rounded",width:"30",height:"30"},null,8,vt),a("span",null,p(t.label),1)],8,pt)])),64))])])]),!h.value||f.value?(i(),u("div",gt,[e[38]||(e[38]=a("label",{class:"form-label"},"Category Name",-1)),f.value?R((i(),u("input",{key:0,type:"text","onUpdate:modelValue":e[10]||(e[10]=t=>b.value[0].label=t),class:V(["form-control",{"is-invalid":v.value.name}]),placeholder:"Enter category name"},null,2)),[[re,b.value[0].label]]):(i(),ie(D(_e),{key:1,modelValue:b.value,"onUpdate:modelValue":e[11]||(e[11]=t=>b.value=t),options:le.value,optionLabel:"label",optionValue:"value",filter:!0,display:"chip",class:V([{"is-invalid":v.value.name},"w-100"]),placeholder:"Select or add categories...",appendTo:"self",onKeydown:he(Ce(be,["prevent"]),["enter"]),onBlur:be,onFilter:e[12]||(e[12]=t=>ee.value=t.value)},{option:K(({option:t})=>[U(p(t.label),1)]),_:1},8,["modelValue","options","class","onKeydown"])),v.value.name?(i(),u("small",bt,p(v.value.name[0]),1)):x("",!0)])):x("",!0),h.value&&!f.value?(i(),u("div",ft,[e[39]||(e[39]=a("label",{class:"form-label"},"Subcategory Name(s)",-1)),C(D(_e),{modelValue:w.value,"onUpdate:modelValue":e[13]||(e[13]=t=>w.value=t),options:j.value,optionLabel:"label",optionValue:"value",filter:!0,display:"chip",class:V([{"is-invalid":v.value?.subcategories||v.value?.name},"w-100"]),placeholder:"Select or add subcategories...",appendTo:"self",onFilter:e[14]||(e[14]=t=>q.value=t.value||""),onKeydown:he(Ce(oe,["prevent"]),["enter"]),onBlur:oe},{option:K(({option:t})=>[a("div",null,p(t.label),1)]),footer:K(()=>[a("div",yt,[C(o,{label:"Add Custom",severity:"secondary",variant:"text",size:"small",icon:"pi pi-plus",onClick:oe,disabled:!q.value.trim()},null,8,["onClick","disabled"]),a("div",ht,[C(o,{label:"Select All",severity:"secondary",variant:"text",size:"small",icon:"pi pi-check",onClick:Ne},null,8,["onClick"]),C(o,{label:"Clear All",severity:"danger",variant:"text",size:"small",icon:"pi pi-times",onClick:Pe},null,8,["onClick"])])])]),_:1},8,["modelValue","options","class","onKeydown"]),v.value?.subcategories?(i(),u("div",Ct,p(v.value.subcategories[0]),1)):x("",!0),v.value?.name?(i(),u("div",_t,p(v.value.name[0]),1)):x("",!0)])):x("",!0),f.value&&l.parentCategory?(i(),u("div",wt,[e[40]||(e[40]=a("label",{class:"form-label"},"Parent Category",-1)),a("input",{type:"text",class:"form-control",value:l.parentCategory.label,disabled:""},null,8,kt)])):x("",!0),a("div",St,[e[43]||(e[43]=a("label",{class:"form-label d-block mb-2"},"Active",-1)),a("div",xt,[a("div",Ft,[a("input",{class:"form-check-input",type:"radio",checked:F.value,onChange:e[15]||(e[15]=t=>F.value=!0),name:"active"},null,40,Mt),e[41]||(e[41]=a("label",{class:"form-check-label"},"Yes",-1))]),a("div",It,[a("input",{class:"form-check-input",type:"radio",checked:!F.value,onChange:e[16]||(e[16]=t=>F.value=!1),name:"active"},null,40,Bt),e[42]||(e[42]=a("label",{class:"form-check-label"},"No",-1))])])])]),e[45]||(e[45]=a("hr",{class:"my-4"},null,-1)),a("div",Dt,[a("button",{class:"btn btn-primary rounded-pill btn-sm py-2 px-4",disabled:B.value,onClick:e[17]||(e[17]=t=>$e())},[B.value?(i(),u($,{key:0},[e[44]||(e[44]=a("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),U(" "+p((f.value,"Saving...")),1)],64)):(i(),u($,{key:1},[U(p((f.value,"Save")),1)],64))],8,$t),a("button",{class:"btn btn-secondary btn-sm py-2 rounded-pill px-4 ms-2","data-bs-dismiss":"modal",onClick:se}," Cancel ")])])])])]),a("div",Vt,[a("div",Et,[a("div",Nt,[a("div",{class:"modal-header"},[e[47]||(e[47]=a("h5",{class:"modal-title",id:"editSubCatModalLabel"}," Edit Subcategory ",-1)),a("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:T},[...e[46]||(e[46]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),a("div",Pt,[a("div",Tt,[e[48]||(e[48]=a("label",{for:"subCategoryName",class:"form-label"},"Subcategory Name",-1)),R(a("input",{type:"text",class:V(["form-control",{"is-invalid":A.value}]),id:"subCategoryName","onUpdate:modelValue":e[18]||(e[18]=t=>S.value.name=t),disabled:z.value},null,10,jt),[[re,S.value.name]]),a("small",At,p(A.value),1)]),a("button",{type:"button",class:"btn btn-primary rounded-pill px-4",onClick:Ae,disabled:z.value},p(z.value?"Saving...":"Save"),9,Lt)])])])])])]),_:1})}}},ul=He(Ut,[["__scopeId","data-v-d9e064e2"]]);export{ul as default};
