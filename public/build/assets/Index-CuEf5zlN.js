import{_ as lt,r as i,C as x,j as xe,k as ie,q as nt,m as u,g as n,o as a,a as C,d as F,h as at,w as rt,b as s,i as f,n as A,F as b,v as M,t as d,f as Ce,x as B,y as L,J as ce,e as de,I as it}from"./app-CYEkE9GK.js";import{_ as ct}from"./Master-D-99QHuT.js";import dt from"./ConfirmOrderModal-DU0P9XfN.js";import ut from"./ReceiptModal-BDE2sAP3.js";import vt from"./PromoModal-nj-CeQXM.js";import mt from"./KotModal-BsnM5vSb.js";import{u as pt}from"./useFormatters-BBfJnlDF.js";import ft from"./PosOrdersModal-HPNxCPo0.js";import{F as yt}from"./FilterModal-BLKsnOWP.js";import"./index-DGJ9z-Qf.js";import"./createLucideIcon-BvjKrCmJ.js";import"./sun-BKrnKPUQ.js";import"./StripePayment-NleJNBxJ.js";import"./SplitPayment-ClYM85hA.js";import"./Receipt-B15kMqLj.js";import"./clock-KLnac2V8.js";import"./circle-check-big-Da0C67UB.js";import"./circle-x-8s9DTuY5.js";import"./printer-CAUfTOXm.js";const gt={class:"page-wrapper"},_t={class:"container-fluid px-3 py-3"},ht={class:"row gx-3 gy-3"},bt={key:0,class:"row g-3"},kt={key:0,class:"col-12 text-center py-5"},wt=["onClick"],xt={class:"cat-icon-wrap"},Ct={class:"cat-icon"},qt=["src"],St={key:1},Ft={class:"cat-name"},Mt={class:"cat-pill"},It={key:0,class:"col-12"},Nt={key:1},Pt={class:"d-flex flex-wrap gap-2 align-items-center justify-content-between mb-3"},Tt={class:"fw-bold mb-0"},Ot={class:"d-flex gap-2 ms-auto align-items-center"},$t={class:"search-wrap position-relative"},Dt={class:"row g-3"},Bt={class:"position-relative",style:{flex:"0 0 40%","max-width":"40%"}},Et=["src"],Vt={key:0,class:"position-absolute bottom-0 start-0 end-0 m-2 badge bg-danger py-2"},Qt={class:"p-3 d-flex flex-column justify-content-between",style:{flex:"1 1 60%","min-width":"0"}},Ut={class:"text-muted mb-3 small"},At=["onClick"],Lt=["onClick","disabled"],jt={class:"qty-box border rounded-pill px-4 py-2 text-center fw-semibold",style:{"min-width":"55px"}},Kt=["onClick","disabled"],zt={key:0,class:"col-12"},Jt={key:0,class:"col-lg-4"},Rt={class:"cart card border-0 shadow-lg rounded-4"},Wt={class:"cart-header"},Ht={class:"order-type"},Yt=["onClick"],Zt={class:"cart-body"},Gt={class:"mb-3"},Xt={key:0,class:"row g-2"},eo={class:"col-6"},to=["value"],oo={key:0,class:"invalid-feedback d-block"},so={class:"col-6"},lo={key:1},no={key:0,class:"invalid-feedback d-block"},ao={class:"cart-lines"},ro={key:0,class:"empty"},io={class:"line-left"},co=["src"],uo={class:"meta"},vo=["title"],mo={key:0,class:"note"},po={class:"line-mid"},fo=["onClick"],yo={class:"qty"},go=["onClick","disabled"],_o={class:"line-right"},ho={class:"price"},bo=["onClick"],ko={class:"totals"},wo={class:"trow"},xo={class:"sub-total"},Co={key:0,class:"trow"},qo={key:1,class:"trow promo-discount"},So={class:"d-flex align-items-center gap-2"},Fo={class:"text-success"},Mo={class:"trow total"},Io={class:"mb-3"},No={class:"mb-3"},Po={class:"cart-footer"},To={class:"modal fade",id:"chooseItem",tabindex:"-1","aria-hidden":"true"},Oo={class:"modal-dialog modal-lg modal-dialog-centered"},$o={class:"modal-content rounded-4 border-0 shadow"},Do={class:"modal-header border-0"},Bo={class:"modal-title fw-bold"},Eo={class:"modal-body"},Vo={class:"row g-3"},Qo={class:"col-md-5"},Uo=["src"],Ao={class:"col-md-7"},Lo={class:"h4 mb-1"},jo={class:"chips mb-3"},Ko={key:0,class:"chip chip-orange"},zo={key:1,class:"chip chip-green"},Jo={key:2,class:"chip chip-purple"},Ro={key:3,class:"chip chip-blue"},Wo={class:"qty-group gap-1"},Ho={class:"qty-box rounded-pill"},Yo=["disabled"],Zo={__name:"Index",props:["client_secret","order_code"],setup(ue){const{formatCurrencySymbol:k}=pt(),I=i([]),j=i(!0),qe=async()=>{j.value=!0;try{const o=await axios.get("/api/pos/fetch-menu-categories");I.value=o.data,I.value.length>0&&(K.value=I.value[0].id)}catch(o){console.error("Error fetching categories:",o)}finally{j.value=!1}},ve=i([]),Se=async()=>{try{const o=await axios.get("/api/pos/fetch-menu-items");ve.value=o.data}catch(o){console.error("Error fetching inventory:",o)}},Fe=x(()=>{const o={};return ve.value.forEach(e=>{const t=e.category?.id||"uncategorized",l=e.category?.name||"Uncategorized";o[t]||(o[t]=[]),o[t].push({id:e.id,title:e.name,img:e.image_url||"/assets/img/default.png",stock:E(e),price:Number(e.price),label_color:e.label_color||"#1B1670",family:l,description:e.description,nutrition:e.nutrition,tags:e.tags,allergies:e.allergies,ingredients:e.ingredients??[]})}),o}),Me=o=>{v.value=o,_.value=0,new bootstrap.Modal(document.getElementById("chooseItem")).show()},E=o=>{if(!o)return 0;if(!o.ingredients||o.ingredients.length===0)return Number(o.stock??0);let e=1/0;return o.ingredients.forEach(t=>{const l=Number(t.quantity??t.qty??1),r=Number(t.inventory_stock??t.stock??0);if(l<=0)return;const m=Math.floor(r/l);e=Math.min(e,m)}),e===1/0&&(e=0),e},ee=i(""),p=i("dine"),w=i("Walk In"),te=i(10),K=i(null),Ie=o=>K.value=o,V=i(!0),Ne=o=>{Ie(o.id),V.value=!1},Pe=()=>V.value=!0,z=i({}),J=i([]),N=i(null),Te=async()=>{try{const o=await axios.get("/api/pos/fetch-profile-tables");z.value=o.data,z.value.order_types&&(J.value=z.value.order_types.map(e=>e.charAt(0).toUpperCase()+e.slice(1)),p.value=J.value[0])}catch(o){console.error("Error fetching profile tables:",o)}},Oe=x(()=>Fe.value[K.value]??[]),g=i({sortBy:"",priceMin:null,priceMax:null}),me=x(()=>{let o=Oe.value;const e=ee.value.trim().toLowerCase();if(e&&(o=o.filter(t=>t.title.toLowerCase().includes(e)||(t.family||"").toLowerCase().includes(e)||(t.description||"").toLowerCase().includes(e)||(t.tags?.map(l=>l.name.toLowerCase()).join(", ")||"").includes(e))),g.value.priceMin!==null&&g.value.priceMin!==""&&(o=o.filter(t=>t.price>=g.value.priceMin)),g.value.priceMax!==null&&g.value.priceMax!==""&&(o=o.filter(t=>t.price<=g.value.priceMax)),g.value.sortBy)switch(o=[...o],g.value.sortBy){case"name_asc":o.sort((t,l)=>t.title.localeCompare(l.title));break;case"name_desc":o.sort((t,l)=>l.title.localeCompare(t.title));break;case"price_asc":o.sort((t,l)=>t.price-l.price);break;case"price_desc":o.sort((t,l)=>l.price-t.price);break;case"stock_asc":o.sort((t,l)=>(t.stock??0)-(l.stock??0));break;case"stock_desc":o.sort((t,l)=>(l.stock??0)-(t.stock??0));break}return o}),$e=o=>{g.value={...o}},De=()=>{g.value={sortBy:"",priceMin:null,priceMax:null}},c=i([]),pe=(o,e=1,t="")=>{const l=E(o),r=c.value.findIndex(m=>m.title===o.title);if(r>=0){const m=c.value[r].qty+e;m<=c.value[r].stock?(c.value[r].qty=m,t&&(c.value[r].note=t)):u.error("Not enough Ingredients stock available for this Menu.")}else{if(e>l){u.error("Not enough Ingredients stock available for this Menu.");return}c.value.push({id:o.id,title:o.title,img:o.img,price:o.price*e||0,unit_price:Number(o.price)||0,qty:e,note:t||"",stock:l,ingredients:o.ingredients??[]})}},Be=async o=>{const e=c.value[o];if(!e)return;const t={};for(const l of c.value)if(l.ingredients?.length)for(const r of l.ingredients){const m=r.inventory_item_id;t[m]||(t[m]=parseFloat(r.inventory_stock)),t[m]-=parseFloat(r.quantity)*l.qty}if(e.ingredients?.length)for(const l of e.ingredients){const r=l.inventory_item_id,m=(t[r]??parseFloat(l.inventory_stock))+parseFloat(l.quantity)*e.qty,O=parseFloat(l.quantity)*(e.qty+1);if(m<O){e.outOfStock=!0,u.error(`Not enough stock for "${e.title}".`);return}}e.outOfStock=!1,e.qty++,e.price=e.unit_price*e.qty},Ee=async o=>{const e=c.value[o];if(!e||e.qty<=1){u.error("Cannot reduce below 1.");return}try{e.qty--,e.price=e.unit_price*e.qty}catch{u.error("Failed to remove item. Please try again.")}},Ve=o=>c.value.splice(o,1),q=x(()=>c.value.reduce((o,e)=>o+e.price,0)),oe=x(()=>p.value==="Delivery"?q.value*te.value/100:0),R=x(()=>{const o=q.value+oe.value-S.value;return Math.max(0,o)}),fe=o=>`Â£${(Math.round(o*100)/100).toFixed(2)}`,v=i(null),_=i(0),Qe=i(""),Ue=x(()=>E(v.value)),Ae=async()=>{if(!v.value)return;if(_.value<=0){u.error("Please add at least one item.");return}const o={};for(const e of c.value)if(e.ingredients?.length)for(const t of e.ingredients){const l=t.inventory_item_id;o[l]||(o[l]=parseFloat(t.inventory_stock)),o[l]-=parseFloat(t.quantity)*e.qty}if(v.value.ingredients?.length)for(const e of v.value.ingredients){const t=e.inventory_item_id,l=o[t]??parseFloat(e.inventory_stock),r=parseFloat(e.quantity)*_.value;if(l<r){u.error(`Not enough stock for "${v.value.title}".`);return}}try{pe(v.value,_.value,Qe.value),bootstrap.Modal.getInstance(document.getElementById("chooseItem")).hide()}catch(e){alert("Failed to add item: "+(e.response?.data?.message||e.message))}},Le=async()=>{if(!v.value||!v.value.ingredients?.length)return;const o={};for(const e of c.value)if(e.ingredients?.length)for(const t of e.ingredients){const l=t.inventory_item_id;o[l]||(o[l]=parseFloat(t.inventory_stock)),o[l]-=parseFloat(t.quantity)*e.qty}for(const e of v.value.ingredients){const t=e.inventory_item_id,l=o[t]??parseFloat(e.inventory_stock),r=parseFloat(e.quantity)*(_.value+1);if(l<r){u.error(`Not enough stock for "${v.value.title}".`);return}}_.value++},je=async()=>{_.value>1?_.value--:console.log("Cannot decrement: minimum quantity is 1")},h=i({}),ye=()=>{c.value=[],w.value="Walk In",N.value=null,p.value=J.value[0]||"dine_in",Q.value="",P.value="",te.value=0,y.value=null};xe(p,()=>h.value={});const Q=i(""),P=i(""),se=i(!1),U=i(null),W=i(!1),le=i(0),Ke=()=>{const o={};for(const e of c.value)if(!(!e.ingredients||e.ingredients.length===0))for(const t of e.ingredients){const l=t.inventory_item_id,r=parseFloat(t.inventory_stock),m=parseFloat(t.quantity)*e.qty;if(o[l]||(o[l]={name:t.product_name,remaining:r}),o[l].remaining>=m)o[l].remaining-=m;else return u.error(`Not enough stock for "${e.title}". Please remove it from the cart to proceed.`),!1}return!0},ze=()=>{if(c.value.length===0){u.error("Please add at least one item to the cart.");return}if(p.value==="Dine_in"&&!N.value){h.value.table_number=["Table number is required for dine-in orders."],u.error("Please select a table number for Dine In orders.");return}if((p.value==="Delivery"||p.value==="Takeaway")&&!w.value){h.value.customer=["Customer name is required for delivery."],u.error("Customer name is required for delivery.");return}Ke()&&(le.value=R.value,W.value=!0)};async function ge(o){try{const e=await axios.post("/api/customer/print-receipt",{order:o});e.data.success||u.error(e.data.message||"Print failed")}catch(e){console.error("Print failed:",e),u.error("Unable to connect to the customer printer. Please ensure it is properly connected.")}}const Je=i("cash"),Re=i(0);async function _e(o){try{const e=await axios.post("/api/kot/print-receipt",{order:o});e.data.success||u.error(e.data.message||"KOT print failed")}catch(e){console.error("KOT print failed:",e),u.error("Unable to connect to the kitchen printer. Please ensure it is properly connected.")}}const We=async({paymentMethod:o,cashReceived:e,cardAmount:t,changeAmount:l,items:r,autoPrintKot:m,done:O})=>{h.value={};try{const $={customer_name:w.value,sub_total:q.value,promo_discount:S.value,promo_id:y.value?.id||null,promo_name:y.value?.name||null,promo_type:y.value?.type||null,total_amount:R.value,tax:0,service_charges:0,delivery_charges:oe.value,note:Q.value,kitchen_note:P.value,order_date:new Date().toISOString().split("T")[0],order_time:new Date().toTimeString().split(" ")[0],order_type:p.value==="Dine_in"?"Dine In":p.value==="Delivery"?"Delivery":p.value==="Takeaway"?"Takeaway":"Collection",table_number:N.value?.name||null,payment_method:o,auto_print_kot:m,cash_received:e,change:l,...o==="Split"&&{payment_type:"split",cash_amount:e,card_amount:t},items:(c.value??[]).map(D=>({product_id:D.id,title:D.title,quantity:D.qty,price:D.price,note:D.note??"",kitchen_note:P.value??"",unit_price:D.unit_price}))},we=await axios.post("/pos/order",$);ye(),W.value=!1,u.success(we.data.message),U.value={...we.data.order,...$,items:$.items,payment_type:o==="Split"?"split":o.toLowerCase(),cash_amount:o==="Split"?e:null,card_amount:o==="Split"?t:null},m&&(H.value=await Ze(),_e(JSON.parse(JSON.stringify(U.value)))),ge(JSON.parse(JSON.stringify(U.value))),y.value=null}catch($){console.error("Order submission error:",$),u.error($.response?.data?.message||"Failed to place order")}finally{O&&O()}};ie(()=>{if(window.bootstrap){document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(e=>new window.bootstrap.Tooltip(e));const o=document.getElementById("chooseItem");o&&new window.bootstrap.Modal(o,{backdrop:"static"})}qe(),Se(),Te()});const T=nt();function he(){const o=T.props.flash?.success,e=T.props.flash?.error;o&&u.success(o,{autoClose:4e3}),e&&u.error(e,{autoClose:6e3})}ie(()=>he()),ie(()=>{T.props.flash?.success;const o=T.props.flash?.error;o&&u.error(o);const e=T.props.flash?.print_payload;e&&setTimeout(()=>ge(e),250),e&&setTimeout(()=>_e(e),250)}),xe(()=>T.props.flash,()=>he(),{deep:!0});const He=({id:o,status:e,message:t})=>{H.value=H.value.map(l=>l.id===o?{...l,status:e}:l)},be=i(!1),H=i([]),Ye=i(!1),Y=i(!1),ne=i([]),ae=i(!1),Ze=async()=>{Y.value=!0,ne.value=[],ae.value=!0;try{const o=await axios.get("/api/pos/orders/today");ne.value=o.data.orders}catch(o){console.error("Failed to fetch POS orders:",o),u.error(o.response?.data?.message||"Failed to fetch POS orders")}finally{ae.value=!1}},Z=i(!1),re=i(!0),G=i([]),y=i(null),Ge=o=>{y.value=o,o.min_purchase&&q.value<parseFloat(o.min_purchase)?u.warning(`Minimum purchase of ${k(o.min_purchase)} required for this promo.`):u.success(`Promo "${o.name}" applied! You saved ${k(S.value)}`),Z.value=!1},Xe=async()=>{re.value=!0;try{Z.value=!0;const o=await axios.get("/api/promos/today");o.data.success?G.value=o.data.data:(console.error("Failed to fetch promos",o.data),G.value=[])}catch(o){console.error("Error fetching promos",o),G.value=[]}finally{re.value=!1}},et=o=>{U.value=o,se.value=!0,Y.value=!1},S=x(()=>{if(!y.value)return 0;const o=y.value,e=parseFloat(o.discount_amount??0)||0,t=q.value;if(o.min_purchase&&t<parseFloat(o.min_purchase))return 0;if(o.type==="flat")return e;if(o.type==="percent"){const l=t*e/100,r=parseFloat(o.max_discount??0)||0;return r>0&&l>r?r:l}return 0}),X=o=>{const e=c.value.find(t=>t.id===o.id);return e?e.qty:0},tt=o=>{const e=X(o),t=E(o);return t<=0||e>=t?!1:ke(o)},ke=(o,e)=>{if(!o.ingredients?.length)return!0;const t={};for(const l of c.value)if(l.ingredients?.length)for(const r of l.ingredients){const m=r.inventory_item_id;t[m]||(t[m]=parseFloat(r.inventory_stock)),t[m]-=parseFloat(r.quantity)*l.qty}for(const l of o.ingredients){const r=l.inventory_item_id,m=t[r]??parseFloat(l.inventory_stock),O=parseFloat(l.quantity);if(m<O)return!1}return!0},ot=o=>{const e=X(o),t=E(o);if((o.stock??0)<=0){u.error(`${o.title} is out of stock.`);return}if(e>=t){u.error(`Not enough stock for "${o.title}".`);return}if(!ke(o)){u.error(`Not enough ingredients for "${o.title}".`);return}const l=c.value.findIndex(r=>r.id===o.id);l>=0?(c.value[l].qty++,c.value[l].price=c.value[l].unit_price*c.value[l].qty,c.value[l].outOfStock=!1):pe(o,1,"")},st=o=>{const e=c.value.findIndex(l=>l.id===o.id);if(e<0)return;const t=c.value[e];t.qty<=1?c.value.splice(e,1):(t.qty--,t.price=t.unit_price*t.qty,t.outOfStock=!1)};return(o,e)=>(a(),n(b,null,[C(F(at),{title:"Sale"}),C(ct,null,{default:rt(()=>[s("div",gt,[s("div",_t,[s("div",ht,[s("div",{class:A(V.value?"col-md-12":"col-lg-8")},[V.value?(a(),n("div",bt,[e[17]||(e[17]=s("div",{class:"col-12 mb-3"},[s("h5",{class:"fw-bold text-primary mb-0"},"Menu Categories"),s("hr",{class:"mt-2 mb-3"})],-1)),j.value?(a(),n("div",kt,[...e[15]||(e[15]=[s("div",{class:"spinner-border",role:"status",style:{color:"#1B1670",width:"3rem",height:"3rem","border-width":"0.3em"}},null,-1),s("div",{class:"mt-2 fw-semibold text-muted"},"Loading...",-1)])])):(a(),n(b,{key:1},[(a(!0),n(b,null,M(I.value,t=>(a(),n("div",{key:t.id,class:"col-6 col-md-4 col-lg-4"},[s("div",{class:"cat-card",onClick:l=>Ne(t)},[s("div",xt,[s("span",Ct,[t.image_url?(a(),n("img",{key:0,src:t.image_url,alt:"Category Image",class:"cat-image"},null,8,qt)):(a(),n("span",St,"ðŸµ"))])]),s("div",Ft,d(t.name),1),s("div",Mt,d(t.menu_items_count)+" Menu ",1)],8,wt)]))),128)),!j.value&&I.value.length===0?(a(),n("div",It,[...e[16]||(e[16]=[s("div",{class:"alert alert-light border text-center rounded-4"}," No categories found ",-1)])])):f("",!0)],64))])):(a(),n("div",Nt,[s("div",Pt,[s("button",{class:"btn btn-primary rounded-pill shadow-sm px-3",onClick:Pe},[...e[18]||(e[18]=[s("i",{class:"bi bi-arrow-left me-1"},null,-1),Ce(" Back ",-1)])]),s("h5",Tt,d(I.value.find(t=>t.id===K.value)?.name||"Items"),1),s("div",Ot,[C(yt,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=t=>g.value=t),title:"Menu Items","modal-id":"menuFilterModal","sort-options":[{value:"name_asc",label:"Name: A to Z"},{value:"name_desc",label:"Name: Z to A"},{value:"price_asc",label:"Price: Low to High"},{value:"price_desc",label:"Price: High to Low"}],"show-price-range":!0,"show-category":!1,"show-stock-status":!1,"show-date-range":!1,categories:[],suppliers:[],onApply:$e,onClear:De},null,8,["modelValue"]),s("div",$t,[e[19]||(e[19]=s("i",{class:"bi bi-search position-absolute",style:{left:"12px",top:"50%",transform:"translateY(-50%)","z-index":"10"}},null,-1)),B(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>ee.value=t),class:"form-control search-input ps-5",type:"text",placeholder:"Search items...",style:{"min-width":"250px"}},null,512),[[L,ee.value]])])])]),s("div",Dt,[(a(!0),n(b,null,M(me.value,t=>(a(),n("div",{class:"col-12 col-md-6 col-xl-6 d-flex",key:t.title},[s("div",{class:A(["card rounded-4 shadow-sm overflow-hidden border-3 w-100 d-flex flex-row align-items-stretch",{"out-of-stock":(t.stock??0)<=0}]),style:ce({borderColor:t.label_color||"#1B1670"})},[s("div",Bt,[s("img",{src:t.img,alt:"",class:"w-100 h-100",style:{"object-fit":"cover"}},null,8,Et),s("span",{class:"position-absolute top-0 start-0 m-2 px-3 py-1 rounded-pill text-white small fw-semibold",style:ce({background:t.label_color||"#1B1670"})},d(F(k)(t.price)),5),(t.stock??0)<=0?(a(),n("span",Vt," OUT OF STOCK ")):f("",!0)]),s("div",Qt,[s("div",null,[s("div",{class:"h5 fw-bold mb-1",style:ce({color:t.label_color||"#1B1670"})},d(t.title),5),s("div",Ut,d(t.family),1),s("button",{class:"btn btn-primary mb-2",onClick:l=>Me(t)}," View Details ",8,At)]),(t.stock??0)>0?(a(),n("div",{key:0,class:"mt-3 d-flex align-items-center justify-content-start gap-2",onClick:e[2]||(e[2]=de(()=>{},["stop"]))},[s("button",{class:"qty-btn btn btn-outline-secondary rounded-circle px-4 py-1",style:{width:"55px",height:"36px"},onClick:de(l=>st(t),["stop"]),disabled:X(t)<=0},[...e[20]||(e[20]=[s("strong",null,"âˆ’",-1)])],8,Lt),s("div",jt,d(X(t)),1),s("button",{class:"qty-btn btn btn-outline-secondary rounded-circle px-4 py-1",style:{width:"55px",height:"36px"},onClick:de(l=>ot(t),["stop"]),disabled:!tt(t)},[...e[21]||(e[21]=[s("strong",null,"+",-1)])],8,Kt)])):f("",!0)])],6)]))),128)),me.value.length===0?(a(),n("div",zt,[...e[22]||(e[22]=[s("div",{class:"alert alert-light border text-center rounded-4"}," No items found ",-1)])])):f("",!0)])]))],2),V.value?f("",!0):(a(),n("div",Jt,[s("div",{class:"col-lg-4 d-flex align-items-center gap-2 mb-2"},[s("button",{class:"btn btn-warning rounded-pill px-3 py-2",onClick:Xe}," Promos ")]),s("div",Rt,[s("div",Wt,[s("div",Ht,[(a(!0),n(b,null,M(J.value,(t,l)=>(a(),n("button",{key:l,class:A(["ot-pill btn",{active:p.value===t}]),onClick:r=>p.value=t},d(t.replace(/_/g," ")),11,Yt))),128)),e[23]||(e[23]=s("div",{class:"d-flex justify-content-between mb-3"},null,-1))])]),s("div",Zt,[s("div",Gt,[p.value==="Dine_in"?(a(),n("div",Xt,[s("div",eo,[e[25]||(e[25]=s("label",{class:"form-label small"},"Table",-1)),B(s("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>N.value=t),class:"form-select form-select-sm"},[e[24]||(e[24]=s("option",{value:null},"Select Table",-1)),(a(!0),n(b,null,M(z.value.table_details,(t,l)=>(a(),n("option",{key:l,value:t},d(t.name),9,to))),128))],512),[[it,N.value]]),h.value.table_number?(a(),n("div",oo,d(h.value.table_number[0]),1)):f("",!0)]),s("div",so,[e[26]||(e[26]=s("label",{class:"form-label small"},"Customer",-1)),B(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>w.value=t),class:"form-control form-control-sm",placeholder:"Walk In"},null,512),[[L,w.value]])])])):(a(),n("div",lo,[e[27]||(e[27]=s("label",{class:"form-label small"},"Customer",-1)),B(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>w.value=t),class:A(["form-control form-control-sm",{"is-invalid":h.value.customer}]),placeholder:"Walk In"},null,2),[[L,w.value]]),h.value.customer?(a(),n("div",no,d(h.value.customer[0]),1)):f("",!0)]))]),s("div",ao,[c.value.length===0?(a(),n("div",ro," Add items from the left ")):f("",!0),(a(!0),n(b,null,M(c.value,(t,l)=>(a(),n("div",{key:t.title,class:"line"},[s("div",io,[s("img",{src:t.img,alt:""},null,8,co),s("div",uo,[s("div",{class:"name",title:t.title},d(t.title),9,vo),t.note?(a(),n("div",mo,d(t.note),1)):f("",!0)])]),s("div",po,[s("button",{class:"qty-btn",onClick:r=>Ee(l)}," âˆ’ ",8,fo),s("div",yo,d(t.qty),1),s("button",{class:A(["qty-btn",[t.outOfStock||t.qty>=(t.stock??0)?"bg-secondary text-white cursor-not-allowed opacity-70":""]]),onClick:r=>Be(l),disabled:t.outOfStock||t.qty>=(t.stock??0)}," + ",10,go)]),s("div",_o,[s("div",ho,d(F(k)(t.price)),1),s("button",{class:"del",onClick:r=>Ve(l)},[...e[28]||(e[28]=[s("i",{class:"bi bi-trash"},null,-1)])],8,bo)])]))),128))]),s("div",ko,[s("div",wo,[e[29]||(e[29]=s("span",null,"Sub Total",-1)),s("b",xo,d(F(k)(q.value)),1)]),p.value==="Delivery"?(a(),n("div",Co,[e[30]||(e[30]=s("span",null,"Delivery",-1)),s("b",null,d(te.value)+"%",1)])):f("",!0),y.value&&S.value>0?(a(),n("div",qo,[s("span",So,[e[31]||(e[31]=s("i",{class:"bi bi-tag-fill text-success"},null,-1)),Ce(" Promo: "+d(y.value.name),1)]),s("b",Fo,"-"+d(F(k)(S.value)),1)])):f("",!0),s("div",Mo,[e[32]||(e[32]=s("span",null,"Total",-1)),s("b",null,d(F(k)(R.value)),1)])]),s("div",Io,[e[33]||(e[33]=s("label",{for:"frontNote",class:"form-label small fw-semibold"},"Front Note",-1)),B(s("textarea",{id:"frontNote","onUpdate:modelValue":e[6]||(e[6]=t=>Q.value=t),rows:"3",class:"form-control form-control-sm rounded-3",placeholder:"Enter front note..."},null,512),[[L,Q.value]])]),s("div",No,[e[34]||(e[34]=s("label",{for:"kitchenNote",class:"form-label small fw-semibold"},"Kitchen Note",-1)),B(s("textarea",{id:"kitchenNote","onUpdate:modelValue":e[7]||(e[7]=t=>P.value=t),rows:"3",class:"form-control form-control-sm rounded-3",placeholder:"Enter kitchen note..."},null,512),[[L,P.value]])])]),s("div",Po,[s("button",{class:"btn btn-secondary btn-clear",onClick:e[8]||(e[8]=t=>ye())}," Clear "),s("button",{class:"btn btn-primary btn-place",onClick:ze}," Place Order ")])])]))])]),s("div",To,[s("div",Oo,[s("div",$o,[s("div",Do,[s("h5",Bo,d(v.value?.title||"Choose Item"),1),e[35]||(e[35]=s("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])],-1))]),s("div",Eo,[s("div",Vo,[s("div",Qo,[s("img",{src:v.value?.image_url||v.value?.img||"/assets/img/product/product29.jpg",class:"img-fluid rounded-3 w-100",alt:""},null,8,Uo)]),s("div",Ao,[s("div",Lo,d(F(k)(v.value?.price||0)),1),s("div",jo,[e[36]||(e[36]=s("div",{class:"mb-1"},[s("strong",null,"Nutrition:")],-1)),v.value?.nutrition?.calories?(a(),n("span",Ko," Cal: "+d(v.value.nutrition.calories),1)):f("",!0),v.value?.nutrition?.carbs?(a(),n("span",zo," Carbs: "+d(v.value.nutrition.carbs),1)):f("",!0),v.value?.nutrition?.fat?(a(),n("span",Jo," Fat: "+d(v.value.nutrition.fat),1)):f("",!0),v.value?.nutrition?.protein?(a(),n("span",Ro," Protein: "+d(v.value.nutrition.protein),1)):f("",!0),e[37]||(e[37]=s("div",{class:"w-100 mt-2"},[s("strong",null,"Allergies:")],-1)),(a(!0),n(b,null,M(v.value?.allergies||[],(t,l)=>(a(),n("span",{key:"a-"+l,class:"chip chip-red"},d(t.name),1))),128)),e[38]||(e[38]=s("div",{class:"w-100 mt-2"},[s("strong",null,"Tags:")],-1)),(a(!0),n(b,null,M(v.value?.tags||[],(t,l)=>(a(),n("span",{key:"t-"+l,class:"chip chip-teal"},d(t.name),1))),128))]),s("div",Wo,[s("button",{class:"qty-btn",onClick:je}," âˆ’ "),s("div",Ho,d(_.value),1),s("button",{class:"qty-btn",onClick:Le,disabled:_.value>=Ue.value}," + ",8,Yo)])])])]),s("div",{class:"modal-footer border-0"},[s("button",{class:"btn btn-primary btn-sm py-2 rounded-pill px-4",onClick:Ae}," Add to Cart ")])])])]),C(mt,{show:be.value,kot:H.value,loading:Ye.value,onClose:e[9]||(e[9]=t=>be.value=!1),onStatusUpdated:He},null,8,["show","kot","loading"]),C(ut,{show:se.value,order:U.value,money:fe,onClose:e[10]||(e[10]=t=>se.value=!1)},null,8,["show","order"]),C(dt,{show:W.value,customer:w.value,"order-type":p.value,"selected-table":N.value,"order-items":c.value,"grand-total":R.value,money:fe,cashReceived:le.value,"onUpdate:cashReceived":e[11]||(e[11]=t=>le.value=t),client_secret:ue.client_secret,order_code:ue.order_code,"sub-total":q.value,tax:0,"service-charges":0,"delivery-charges":oe.value,"promo-discount":S.value,"promo-id":y.value?.id,"promo-name":y.value?.name,"promo-type":y.value?.type,"promo-discount-amount":S.value,note:Q.value,"kitchen-note":P.value,"order-date":new Date().toISOString().split("T")[0],"order-time":new Date().toTimeString().split(" ")[0],"payment-method":Je.value,change:Re.value,onClose:e[12]||(e[12]=t=>W.value=!1),onConfirm:We},null,8,["show","customer","order-type","selected-table","order-items","grand-total","cashReceived","client_secret","order_code","sub-total","delivery-charges","promo-discount","promo-id","promo-name","promo-type","promo-discount-amount","note","kitchen-note","order-date","order-time","payment-method","change"]),C(ft,{show:Y.value,orders:ne.value,onClose:e[13]||(e[13]=t=>Y.value=!1),onViewDetails:et,loading:ae.value},null,8,["show","orders","loading"]),C(vt,{show:Z.value,loading:re.value,promos:G.value,"order-items":c.value,onApplyPromo:Ge,onClose:e[14]||(e[14]=t=>Z.value=!1)},null,8,["show","loading","promos","order-items"])])]),_:1})],64))}},gs=lt(Zo,[["__scopeId","data-v-60db20c2"]]);export{gs as default};
