import{_ as A,r as O,y as D,c as y,o as I,E as L,f as o,b as d,e as t,l as r,m as c,t as m,i as E,F as p,g as f,k as v,Z as T,S as k,v as w,d as M,H as $}from"./app-DMbHFmC5.js";const U={key:0,class:"ms-1 badge bg-primary rounded-pill"},N=["id"],P={class:"modal-content rounded-4"},j={class:"modal-header border-0 pb-2"},z={class:"modal-title fw-bold",id:"filterModalLabel"},H={class:"modal-body pt-4"},Z={class:"row g-3"},_={key:0,class:"col-12"},q={class:"row g-2"},G={class:"form-check"},J=["id","value"],Q=["for"],W={key:1,class:"col-md-6"},X=["value"],Y={key:2,class:"col-md-6"},K=["value"],ee={key:3,class:"col-md-6"},le=["value"],te={key:4,class:"col-md-6"},ae={class:"form-label fw-semibold text-dark"},se={class:"row g-2"},oe={class:"col-6"},de={class:"col-6"},ie={key:5,class:"col-12"},ue={class:"row g-2"},re={class:"col-md-6"},ne={class:"col-md-6"},ce={key:6,class:"col-12"},me={key:0,class:"mt-3"},ve={class:"d-flex flex-wrap gap-1"},pe=["onClick"],fe={__name:"FilterModal",props:{modelValue:{type:Object,default:()=>({})},title:{type:String,default:"Items"},modalId:{type:String,default:"filterModal"},modalSize:{type:String,default:"modal-lg",validator:i=>["modal-sm","modal-lg","modal-xl"].includes(i)},sortOptions:{type:Array,default:()=>[{value:"stock_desc",label:"Stock: High to Low"},{value:"stock_asc",label:"Stock: Low to High"},{value:"name_asc",label:"Name: A to Z"},{value:"name_desc",label:"Name: Z to A"}]},categories:{type:Array,default:()=>[]},suppliers:{type:Array,default:()=>[]},stockStatusOptions:{type:Array,default:()=>[{value:"in_stock",label:"In Stock"},{value:"low_stock",label:"Low Stock"},{value:"out_of_stock",label:"Out of Stock"},{value:"expired",label:"Expired"},{value:"near_expire",label:"Near Expiry"}]},showPriceRange:{type:Boolean,default:!1},showDateRange:{type:Boolean,default:!1},showCategory:{type:Boolean,default:!0},showStockStatus:{type:Boolean,default:!0},priceRangeLabel:{type:String,default:"Price Range"}},emits:["update:modelValue","apply","clear"],setup(i,{emit:h}){const n=i,b=h,l=O({sortBy:"",category:"",supplier:"",stockStatus:"",priceMin:null,priceMax:null,dateFrom:"",dateTo:"",...n.modelValue});D(()=>n.modelValue,s=>{l.value={...l.value,...s}},{deep:!0});const g=y(()=>Object.values(l.value).some(s=>s!==""&&s!==null&&s!==void 0)),V=y(()=>Object.values(l.value).filter(s=>s!==""&&s!==null&&s!==void 0).length),F=y(()=>{const s=[];if(l.value.sortBy){const e=n.sortOptions.find(u=>u.value===l.value.sortBy);s.push({key:"sortBy",label:"Sort",value:e?.label||l.value.sortBy})}if(l.value.category){const e=n.categories.find(u=>(u.id||u.value)===l.value.category);s.push({key:"category",label:"Category",value:e?.name||e?.label||l.value.category})}if(l.value.supplier){const e=n.suppliers.find(u=>(u.id||u.value)===l.value.supplier);s.push({key:"supplier",label:"Supplier",value:e?.name||e?.label||l.value.supplier})}if(l.value.stockStatus){const e=n.stockStatusOptions.find(u=>u.value===l.value.stockStatus);s.push({key:"stockStatus",label:"Stock Status",value:e?.label||l.value.stockStatus})}return(l.value.priceMin||l.value.priceMax)&&s.push({key:"priceRange",label:n.priceRangeLabel,value:`${l.value.priceMin||0} - ${l.value.priceMax||"âˆž"}`}),(l.value.dateFrom||l.value.dateTo)&&s.push({key:"dateRange",label:"Date",value:`${l.value.dateFrom||"..."} - ${l.value.dateTo||"..."}`}),s}),B=()=>{const s=document.getElementById(n.modalId);s&&new bootstrap.Modal(s).show()},C=()=>{b("update:modelValue",{...l.value}),b("apply",{...l.value});const s=document.getElementById(n.modalId);s&&bootstrap.Modal.getInstance(s)?.hide()},x=()=>{l.value={sortBy:"",category:"",supplier:"",stockStatus:"",priceMin:null,priceMax:null,dateFrom:"",dateTo:""},b("update:modelValue",{...l.value}),b("clear")},R=s=>{s==="priceRange"?(l.value.priceMin=null,l.value.priceMax=null):s==="dateRange"?(l.value.dateFrom="",l.value.dateTo=""):l.value[s]=""};return I(()=>{l.value={...l.value,...n.modelValue}}),(s,e)=>{const u=L("VueDatePicker");return d(),o("div",null,[t("button",{class:"btn btn-outline-secondary rounded-pill px-4",onClick:B},[e[8]||(e[8]=t("i",{class:"fas fa-filter me-2"},null,-1)),e[9]||(e[9]=r(" Filter ",-1)),g.value?(d(),o("span",U,m(V.value),1)):c("",!0)]),t("div",{id:i.modalId,class:"modal fade",tabindex:"-1","aria-labelledby":"filterModalLabel","aria-hidden":"true"},[t("div",{class:E(["modal-dialog modal-dialog-centered",i.modalSize])},[t("div",P,[t("div",j,[t("h5",z,[e[10]||(e[10]=t("i",{class:"fas fa-filter text-primary me-2"},null,-1)),r(" Filter "+m(i.title),1)]),t("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:x},[...e[11]||(e[11]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",H,[t("div",Z,[i.sortOptions?.length?(d(),o("div",_,[e[12]||(e[12]=t("label",{class:"form-label fw-semibold text-dark"},[t("i",{class:"fas fa-sort me-2 text-muted"}),r("Sort By ")],-1)),t("div",q,[(d(!0),o(p,null,f(i.sortOptions,a=>(d(),o("div",{key:a.value,class:"col-6"},[t("div",G,[v(t("input",{id:`sort-${a.value}`,"onUpdate:modelValue":e[0]||(e[0]=S=>l.value.sortBy=S),class:"form-check-input",type:"radio",value:a.value},null,8,J),[[T,l.value.sortBy]]),t("label",{for:`sort-${a.value}`,class:"form-check-label small"},m(a.label),9,Q)])]))),128))])])):c("",!0),i.showCategory&&i.categories?.length?(d(),o("div",W,[e[14]||(e[14]=t("label",{class:"form-label fw-semibold text-dark"},[t("i",{class:"fas fa-tags me-2 text-muted"}),r("Category ")],-1)),v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.category=a),class:"form-select"},[e[13]||(e[13]=t("option",{value:""},"All Categories",-1)),(d(!0),o(p,null,f(i.categories,a=>(d(),o("option",{key:a.id||a.value,value:a.id||a.value},m(a.name||a.label),9,X))),128))],512),[[k,l.value.category]])])):c("",!0),i.showStockStatus&&i.stockStatusOptions?.length?(d(),o("div",Y,[e[16]||(e[16]=t("label",{class:"form-label fw-semibold text-dark"},[t("i",{class:"fas fa-boxes me-2 text-muted"}),r("Stock Status ")],-1)),v(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.stockStatus=a),class:"form-select"},[e[15]||(e[15]=t("option",{value:""},"All Status",-1)),(d(!0),o(p,null,f(i.stockStatusOptions,a=>(d(),o("option",{key:a.value,value:a.value},m(a.label),9,K))),128))],512),[[k,l.value.stockStatus]])])):c("",!0),i.suppliers?.length?(d(),o("div",ee,[e[18]||(e[18]=t("label",{class:"form-label fw-semibold text-dark"},[t("i",{class:"fas fa-truck me-2 text-muted"}),r("Supplier ")],-1)),v(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.supplier=a),class:"form-select"},[e[17]||(e[17]=t("option",{value:""},"All Suppliers",-1)),(d(!0),o(p,null,f(i.suppliers,a=>(d(),o("option",{key:a.id||a.value,value:a.id||a.value},m(a.name||a.label),9,le))),128))],512),[[k,l.value.supplier]])])):c("",!0),i.showPriceRange?(d(),o("div",te,[t("label",ae,[e[19]||(e[19]=t("i",{class:"fas fa-dollar-sign me-2 text-muted"},null,-1)),r(m(i.priceRangeLabel),1)]),t("div",se,[t("div",oe,[v(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>l.value.priceMin=a),type:"number",class:"form-control",placeholder:"Min",min:"0",step:"0.01"},null,512),[[w,l.value.priceMin,void 0,{number:!0}]])]),t("div",de,[v(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>l.value.priceMax=a),type:"number",class:"form-control",placeholder:"Max",min:"0",step:"0.01"},null,512),[[w,l.value.priceMax,void 0,{number:!0}]])])])])):c("",!0),i.showDateRange?(d(),o("div",ie,[e[20]||(e[20]=t("label",{class:"form-label fw-semibold text-dark"},[t("i",{class:"fas fa-calendar-alt me-2 text-muted"}),r("Date Range ")],-1)),t("div",ue,[t("div",re,[M(u,{modelValue:l.value.dateFrom,"onUpdate:modelValue":e[6]||(e[6]=a=>l.value.dateFrom=a),placeholder:"Start Date",format:"yyyy-MM-dd","enable-time-picker":!1,"single-calendar":""},null,8,["modelValue"])]),t("div",ne,[M(u,{modelValue:l.value.dateTo,"onUpdate:modelValue":e[7]||(e[7]=a=>l.value.dateTo=a),placeholder:"End Date",format:"yyyy-MM-dd","enable-time-picker":!1,"single-calendar":""},null,8,["modelValue"])])])])):c("",!0),s.$slots.customFilters?(d(),o("div",ce,[$(s.$slots,"customFilters",{filters:l.value},void 0,!0)])):c("",!0)]),g.value?(d(),o("div",me,[e[21]||(e[21]=t("small",{class:"text-muted d-block mb-2"},"Active Filters:",-1)),t("div",ve,[(d(!0),o(p,null,f(F.value,a=>(d(),o("span",{key:a.key,class:"badge bg-primary bg-opacity-10 text-primary px-2 py-1 rounded-pill"},[r(m(a.label)+": "+m(a.value)+" ",1),t("i",{class:"fas fa-times ms-1 cursor-pointer",onClick:S=>R(a.key)},null,8,pe)]))),128))])])):c("",!0)]),t("div",{class:"modal-footer border-0 pt-0"},[t("div",{class:"w-100 d-flex gap-2"},[t("button",{type:"button",class:"px-4 py-2 rounded-pill btn btn-primary text-white text-center",onClick:C},[...e[22]||(e[22]=[t("i",{class:"fas fa-check me-2"},null,-1),r("Apply ",-1)])]),t("button",{type:"button",class:"btn btn-secondary rounded-pill px-2 py-2",onClick:x},[...e[23]||(e[23]=[t("i",{class:"fas fa-undo me-2"},null,-1),r("Clear ",-1)])])])])])],2)],8,N)])}}},ye=A(fe,[["__scopeId","data-v-253ffb8a"]]);export{ye as F};
