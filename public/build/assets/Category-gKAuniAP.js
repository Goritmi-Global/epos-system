import{_ as Ke,r as i,c as te,o as ye,n as Xe,I as Ye,w as Ze,E as he,a as le,b as r,d as Y,e as h,f as a,u as E,h as Ge,g as u,F as j,i as oe,t as p,j as F,k as Je,l as k,m as W,v as de,p as U,T as ce,P as Qe,U as Ce,y as _e,X as ea,W as aa,q,s as d}from"./app-BnsnJ5Tj.js";import{_ as ta}from"./Master-BNU6dmEI.js";import{s as ke}from"./index-DWk0iixY.js";import{s as la}from"./index-DDhkNZri.js";import{u as oa}from"./useFormatters-CwVh0Mdn.js";import{F as sa}from"./FilterModal-BpnJZSdH.js";import{s as na}from"./index-CR0Blkc6.js";import{E as ra,a as ia,X as ua,u as Z,w as da}from"./xlsx-LllAmExe.js";import{I as ca}from"./importFile-lHHYizWu.js";import{S as ma}from"./shapes-BWLmRWPd.js";import{P as va}from"./package-DE4ug58m.js";import{C as pa}from"./circle-x-lHbPgc8i.js";import{P as ga}from"./plus-CX3cthUN.js";import{P as we}from"./pencil-CFBODDVq.js";import"./index-RLFzO3uW.js";import"./createLucideIcon-BCt5CEW6.js";import"./index-DoPdJjGw.js";import"./index-q6Axaa4L.js";import"./sun-BXp2FZMG.js";import"./index-B9CcrpiB.js";import"./index-Bb_fSmW2.js";import"./index-CfwxJrkm.js";const ba={class:"page-wrapper"},fa={class:"row g-3"},ya={class:"card border-0 shadow-sm rounded-4"},ha={class:"card-body d-flex align-items-center justify-content-between"},Ca={class:"fw-bold fs-4"},_a={class:"text-muted fs-6"},ka={class:"card border-0 shadow-lg rounded-4 mt-0"},wa={class:"card-body"},xa={class:"d-flex flex-wrap gap-2 justify-content-between align-items-center mb-3"},Sa={class:"d-flex flex-wrap gap-2 align-items-center"},Ma={class:"search-wrap"},$a={key:1,class:"form-control search-input",placeholder:"Search",disabled:"",type:"text"},Ia={class:"col-md-6"},Fa=["onUpdate:modelValue"],Va=["value"],Da={class:"col-md-6 mt-3"},Ba=["onUpdate:modelValue"],Ea={class:"col-md-12 mt-3"},La=["onUpdate:modelValue"],Na={class:"table-responsive"},Pa={class:"table table-hover align-middle"},Aa={class:"fw-semibold"},Ta={class:"text-truncate",style:{"max-width":"260px"}},ja={key:0},Ua=["onClick"],Oa={key:1},Ra={class:"rounded d-inline-flex align-items-center justify-content-center img-chip"},za=["src","alt"],Wa={key:1,class:"fs-5"},qa={class:"text-center"},Ha={class:"d-inline-flex align-items-center gap-3"},Ka=["onClick"],Xa={key:0},Ya={key:0,class:"mt-4 d-flex justify-content-between align-items-center"},Za={class:"text-muted small"},Ga={class:"modal fade",id:"addCatModal",tabindex:"-1","aria-hidden":"true"},Ja={class:"modal-dialog modal-lg modal-dialog-centered"},Qa={class:"modal-content rounded-4"},et={class:"modal-header"},at={class:"modal-title fw-semibold"},tt={class:"modal-body"},lt={class:"row"},ot={class:"col-md-7"},st={class:"row g-3"},nt={class:"col-12"},rt={class:"d-flex align-items-center gap-3"},it={class:"form-check"},ut=["checked"],dt={class:"form-check"},ct=["checked"],mt={key:0,class:"col-12"},vt={key:0,class:"text-danger"},pt={key:1,class:"col-12"},gt={key:2,class:"text-danger"},bt={key:2,class:"col-12"},ft={class:"p-3 d-flex justify-content-between"},yt={class:"d-flex gap-2"},ht={key:0,class:"text-danger"},Ct={key:1,class:"text-danger"},_t={key:3,class:"col-12"},kt=["value"],wt={class:"col-12"},xt={class:"d-flex align-items-center gap-3"},St={class:"form-check"},Mt=["checked"],$t={class:"form-check"},It=["checked"],Ft={class:"col-md-5"},Vt=["src"],Dt={key:1,class:"placeholder"},Bt={key:0,class:"text-danger"},Et={class:"mt-4"},Lt=["disabled"],Nt={class:"modal fade",id:"editSubCatModal",tabindex:"-1","aria-labelledby":"editSubCatModalLabel","aria-hidden":"true"},Pt={class:"modal-dialog modal-md modal-dialog-centered"},At={class:"modal-content"},Tt={class:"modal-body"},jt={class:"mb-3"},Ut=["disabled"],Ot={class:"text-danger"},Rt=["disabled"],zt={__name:"Category",setup(Wt){oa();const g=i([]),I=i([]),b=i(null),x=i([]),se=i(null),V=i(null),C=i(null),O=i(!1),H=i(!1),xe=i(null),Se=[{label:"PDF",value:"pdf"},{label:"Excel",value:"excel"},{label:"CSV",value:"csv"}],ne=i([{label:"Hot Drinks",value:"Hot Drinks"},{label:"Cold Drinks",value:"Cold Drinks"},{label:"Breakfast",value:"Breakfast"},{label:"Street Snacks",value:"Street Snacks"},{label:"Wala Wraps",value:"Wala Wraps"},{label:"Bombay Toasties",value:"Bombay Toasties"},{label:"Salads",value:"Salads"},{label:"Bombay Bowls",value:"Bombay Bowls"},{label:"Bakery",value:"Bakery"},{label:"Soup",value:"Soup"},{label:"Desserts",value:"Desserts"},{label:"Ice Cream",value:"Ice Cream"}]),Me=l=>{l.value&&(Re(l.value),se.value=null)},_=i({current_page:1,last_page:1,per_page:10,total:0,from:0,to:0,links:[]}),G=i({total:0,active:0,inactive:0}),J={sortBy:"",category:"",status:"",hasSubcategories:""},K=i({...J}),w=i({...J}),D=async(l=null)=>{try{Q.value=!0;const e={page:l||_.value.current_page,per_page:_.value.per_page},n=(L.value||"").trim();n&&(e.q=n),w.value.sortBy&&(e.sort_by=w.value.sortBy),w.value.status&&(e.status=w.value.status),w.value.category&&(e.category=w.value.category),w.value.hasSubcategories&&(e.has_subcategories=w.value.hasSubcategories),console.log("ðŸ“¤ Sending params:",e);const o=await q.get("/api/menu-categories/parents/list",{params:e});I.value=o.data.data||[],o.data.stats&&(G.value=o.data.stats),_.value={current_page:o.data.current_page,last_page:o.data.last_page,per_page:o.data.per_page,total:o.data.total,from:o.data.from,to:o.data.to,links:o.data.links},Q.value=!1}catch(e){console.error("Failed to fetch categories:",e),d.error("Failed to load categories"),Q.value=!1}},$e=te(()=>Object.values(w.value).some(l=>l!==""));let me=null;const Ie=l=>{if(!l)return;const n=new URLSearchParams(l.split("?")[1]).get("page");n&&D(parseInt(n))};ye(async()=>{L.value="",pe.value=Date.now(),await Xe(),setTimeout(()=>{ge.value=!0;const e=document.getElementById(re);e&&(e.value="",L.value="")},100),D();const l=document.getElementById("categoryFilterModal");l&&l.addEventListener("hidden.bs.modal",()=>{K.value={...w.value}})});const ve=te(()=>I.value.filter(l=>l.parent_id===null)),Fe=te(()=>[{label:"Total Categories",value:G.value.total,icon:ma,iconBg:"bg-light-primary",iconColor:"text-primary"},{label:"Active Categories",value:G.value.active,icon:va,iconBg:"bg-light-success",iconColor:"text-success"},{label:"Inactive Categories",value:G.value.inactive,icon:pa,iconBg:"bg-light-danger",iconColor:"text-danger"}]),L=i(""),pe=i(Date.now()),re=`search-${Math.random().toString(36).substr(2,9)}`,ge=i(!1),Q=i(!1),Ve=()=>{w.value={...K.value},_.value.current_page=1,D(1),bootstrap.Modal.getInstance(document.getElementById("categoryFilterModal"))?.hide()},be=te(()=>({sortOptions:[{value:"name_asc",label:"Name: A to Z"},{value:"name_desc",label:"Name: Z to A"}],statusOptions:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],hasSubcategoriesOptions:[{value:"yes",label:"Has Subcategories"},{value:"no",label:"No Subcategories"}]})),De=()=>{K.value={...J},w.value={...J},_.value.current_page=1,_.value.per_page=10,D(1)};ye(()=>window.feather?.replace()),Ye(()=>window.feather?.replace());const y=i(!1),ee=i(""),$=i(!0),S=i(null),B=i(!1),v=i({}),Be=()=>{y.value=!1,g.value=[],x.value=[],ee.value="",$.value=!0,S.value=null,C.value&&C.value.startsWith("blob:")&&URL.revokeObjectURL(C.value),V.value=null,C.value=null,v.value={},ae.value="",X.value="",P.value=[],R.value="",b.value=null,O.value=!1,H.value=!1},Ee=({file:l})=>{V.value=l,C.value=URL.createObjectURL(l),O.value=!1},Le=async()=>{if(y.value&&!S.value){v.value.parent_id=["Please select a parent category"],d.error(v.value.parent_id[0]),B.value=!1;return}N(),B.value=!0;try{if(b.value){const e=new FormData;let n="";if(y.value?n=ee.value?.trim():n=g.value[0]?.label?.trim()||g.value[0]?.name?.trim()||(typeof g.value[0]=="string"?g.value[0].trim():""),!n){v.value.name=["Category name cannot be empty"],d.error("Category name cannot be empty"),B.value=!1;return}e.append("name",n),e.append("active",$.value?"1":"0"),e.append("parent_id",S.value||""),e.append("_method","PUT"),V.value instanceof File&&e.append("icon",V.value),!S.value&&R.value&&R.value.split(",").map(t=>t.trim()).filter(t=>t.length>0).forEach((t,c)=>{const m=b.value.subcategories?.find(s=>s.name.toLowerCase()===t.toLowerCase());e.append(`subcategories[${c}][name]`,t),m?(e.append(`subcategories[${c}][id]`,m.id),e.append(`subcategories[${c}][active]`,m.active?"1":"0")):e.append(`subcategories[${c}][active]`,"1")}),await q.post(`/menu-categories/${b.value.id}`,e,{headers:{"Content-Type":"multipart/form-data"}}),d.success("Category updated successfully")}else{const e=new FormData;let n=[];if(y.value){if(x.value.length===0){v.value.subcategories=["Please add at least one subcategory"],d.error("Please add at least one subcategory"),B.value=!1;return}n=x.value.map(o=>({name:typeof o=="string"?o:o.label,active:$.value,parent_id:S.value}))}else{if(g.value.length===0){v.value.name=["Please add at least one category"],d.error("Please add at least one category"),B.value=!1;return}n=g.value.map(o=>({name:typeof o=="string"?o:o.label,active:$.value,parent_id:null}))}e.append("isSubCategory",y.value?"1":"0"),n.forEach((o,t)=>{e.append(`categories[${t}][name]`,o.name),e.append(`categories[${t}][active]`,o.active?"1":"0"),o.parent_id&&e.append(`categories[${t}][parent_id]`,o.parent_id)}),V.value instanceof File&&e.append("icon",V.value),console.log("ðŸ“¤ FormData Contents:");for(let o of e.entries())o[1]instanceof File?console.log(`  ${o[0]}: [File] ${o[1].name} (${o[1].type}, ${o[1].size} bytes)`):console.log(`  ${o[0]}: ${o[1]}`);await q.post("/menu-categories",e,{headers:{"Content-Type":"multipart/form-data"}}),d.success("Category created successfully")}bootstrap.Modal.getInstance(document.getElementById("addCatModal"))?.hide(),ie(),b.value=null,await D()}catch(l){if(console.error("âŒ Submit error:",l),l.response?.status===422&&l.response?.data?.errors){const e=l.response.data.errors;let n=[];v.value={},Object.keys(e).forEach(o=>{let t=o.replace(/^categories\.\d+\./,"");v.value[t]=e[o],Array.isArray(e[o])&&e[o].forEach(c=>{n.push(c)})}),n.length>0?d.error(n.join(`
`)):d.error("Validation failed. Please check your input.")}else{const e=l.response?.data?.message||"Failed to save category";d.error(e+" âŒ")}}finally{B.value=!1}},ie=()=>{y.value=!1,g.value=[],$.value=!0,S.value=null,ee.value="",C.value&&C.value.startsWith("blob:")&&URL.revokeObjectURL(C.value),V.value=null,C.value=null,b.value=null,R.value="",O.value=!1,H.value=!1,xe.value=null},N=()=>{v.value={},A.value=""},R=i(""),Ne=l=>{N(),b.value=l,y.value=!!l.parent_id,S.value=l.parent_id||null,V.value=null,C.value=l.image_url||null,y.value?ee.value=l.name:g.value=[{label:l.name,value:l.name,id:l.id}],$.value=l.active,l.subcategories&&l.subcategories.length>0?(P.value=l.subcategories.map(o=>({label:o.name,value:o.id?o.id.toString():`temp_${Date.now()}_${Math.random()}`})),x.value=l.subcategories.map(o=>o.id?o.id.toString():`temp_${Date.now()}_${Math.random()}`),R.value=l.subcategories.map(o=>o.name).join(", ")):(P.value=[],x.value=[],R.value="");const e=document.getElementById("addCatModal");new bootstrap.Modal(e).show()},ae=i(""),fe=()=>{const l=(ae.value||"").trim();l&&(ne.value.some(e=>e.label.toLowerCase()===l.toLowerCase())||ne.value.push({label:l,value:l}),g.value.includes(l)||(g.value=[...g.value,l]),ae.value="")},Pe=async l=>{if(l?.id)try{const e=await q.delete(`/menu-categories/${l.id}`);d.success(e.data.message||"Category deleted successfully"),await D()}catch(e){console.error("âŒ Delete error:",e.response?.data||e.message);const n=e.response?.data?.message||"Failed to delete category âŒ";d.error(n)}},P=i([]),X=i(""),ue=()=>{const l=X.value?.trim();l&&(P.value.some(e=>e.value.toLowerCase()===l.toLowerCase())||P.value.push({label:l,value:l}),x.value.includes(l)||x.value.push(l),X.value="")},Ae=()=>{x.value=P.value.map(l=>l.value)},Te=()=>{x.value=[]},M=i({id:null,name:"",parent_id:null}),je=(l,e)=>{M.value={id:e.id,name:e.name,parent_id:l.id};const n=document.getElementById("editSubCatModal"),o=bootstrap.Modal.getOrCreateInstance(n);N(),o.show()},z=i(!1),A=i(""),Ue=()=>{M.value={id:null,name:"",parent_id:null},A.value={},z.value=!1},Oe=async()=>{if(!M.value.name.trim()){A.value="Subcategory name cannot be empty",d.error("Please filled all the required fields");return}z.value=!0;try{const{data:l}=await q.put(`/menu-categories/subcategories/${M.value.id}`,{name:M.value.name.trim()});if(l.success){d.success(l.message);const e=I.value.find(t=>t.id===M.value.parent_id);if(e){const t=e.subcategories.find(c=>c.id===M.value.id);t&&(t.name=M.value.name)}const n=document.getElementById("editSubCatModal");bootstrap.Modal.getInstance(n).hide(),M.value={id:null,name:"",parent_id:null}}else A.value=l.message||"Failed to update subcategory"}catch(l){console.error(l),A.value=l.response?.data?.message||"An error occurred while updating"}finally{z.value=!1}},Re=l=>{if(!I.value||I.value.length===0){d.error("No Units data to download");return}const e=L.value.trim()?filtered.value:I.value;if(e.length===0){d.error("No Units found to download");return}try{l==="pdf"?We(e):l==="excel"?qe(e):l==="csv"?ze(e):d.error("Invalid download type")}catch(n){console.error("Download failed:",n),d.error(`Download failed: ${n.message}`)}};Ze(L,()=>{clearTimeout(me),me=setTimeout(()=>{_.value.current_page=1,_.value.per_page=10,D(1)},500)});const ze=l=>{try{const e=["category","subcategory","active"],n=l.map(s=>{const f=s.subcategories&&s.subcategories.length>0?s.subcategories.map(T=>T.name).join(", "):"";return[`"${s.name||""}"`,`"${f}"`,`${s.active?"Yes":"No"}`]}),o=[e.join(","),...n.map(s=>s.join(","))].join(`
`),t=new Blob([o],{type:"text/csv;charset=utf-8;"}),c=URL.createObjectURL(t),m=document.createElement("a");m.setAttribute("href",c),m.setAttribute("download",`Categories_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(m),m.click(),document.body.removeChild(m),d.success("CSV downloaded successfully")}catch(e){console.error("CSV generation error:",e),d.error(`CSV generation failed: ${e.message}`,{autoClose:5e3})}},We=l=>{try{const e=new ra("p","mm","a4");e.setFontSize(18),e.setFont("helvetica","bold"),e.text("Menu Categories Report",60,20),e.setFontSize(10),e.setFont("helvetica","normal");const n=new Date().toLocaleString();e.text(`Generated on: ${n}`,14,28),e.text(`Total Categories: ${l.length}`,14,34);const o=["Category","Subcategories","Active"],t=l.map(m=>{const s=m.subcategories&&m.subcategories.length>0?m.subcategories.map(f=>f.name).join(", "):"";return[m.name||"",s,m.active?"Yes":"No"]});ia(e,{head:[o],body:t,startY:40,styles:{fontSize:9,cellPadding:3,halign:"left",lineColor:[0,0,0],lineWidth:.1},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:14,right:14},didDrawPage:m=>{const s=e.internal.getNumberOfPages(),f=e.internal.pageSize.height;e.setFontSize(8),e.text(`Page ${m.pageNumber} of ${s}`,m.settings.margin.left,f-10)}});const c=`Categories_${new Date().toISOString().split("T")[0]}.pdf`;e.save(c),d.success("PDF downloaded successfully")}catch(e){console.error("PDF generation error:",e),d.error(`PDF generation failed: ${e.message}`,{autoClose:5e3})}},qe=l=>{try{if(typeof ua>"u")throw new Error("XLSX library is not loaded");const e=l.map(s=>{const f=s.subcategories&&s.subcategories.length>0?s.subcategories.map(T=>T.name).join(", "):"";return{Category:s.name||"",Subcategory:f,Active:s.active?"Yes":"No"}}),n=Z.book_new(),o=Z.json_to_sheet(e);o["!cols"]=[{wch:25},{wch:40},{wch:10}],Z.book_append_sheet(n,o,"Menu Categories");const t=[{Info:"Generated On",Value:new Date().toLocaleString()},{Info:"Total Categories",Value:l.length},{Info:"Exported By",Value:"Menu Categories Management"}],c=Z.json_to_sheet(t);Z.book_append_sheet(n,c,"Report Info");const m=`Categories_${new Date().toISOString().split("T")[0]}.xlsx`;da(n,m),d.success("Excel downloaded successfully",{autoClose:2500})}catch(e){console.error("Excel generation error:",e),d.error(`Excel generation failed: ${e.message}`,{autoClose:5e3})}},He=l=>{if(!l||l.length<=1){d.error("The imported file is empty.");return}l[0];const n=l.slice(1).map(s=>({category:s[0]||"",subcategory:s[1]||null,active:s[2]=="0"?0:1})),o=n.filter(s=>s.category).map(s=>s.category.trim().toLowerCase()),t=o.filter((s,f)=>o.indexOf(s)!==f);if(t.length>0){d.error(`Duplicate parent category names found in CSV: ${[...new Set(t)].join(", ")}`);return}const c=I.value.filter(s=>!s.parent_id).map(s=>s.name.trim().toLowerCase()),m=n.filter(s=>s.category).filter(s=>c.includes(s.category.trim().toLowerCase()));if(m.length>0){const s=m.map(f=>f.category).join(", ");d.error(`Parent categories already exist in the table: ${s}`);return}q.post("/api/menu-categories/import",{categories:n}).then(()=>{d.success("Categories imported successfully");const s=document.querySelector(".modal.show");if(s){const f=bootstrap.Modal.getInstance(s);f&&f.hide()}setTimeout(()=>{document.querySelectorAll(".modal-backdrop").forEach(T=>T.remove()),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight=""},100),D()}).catch(s=>{console.error(s),d.error("Import failed"),setTimeout(()=>{document.querySelectorAll(".modal-backdrop").forEach(T=>T.remove()),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight=""},100)})};return(l,e)=>{const n=he("ConfirmModal"),o=he("Button");return r(),le(ta,null,{default:Y(()=>[h(E(Ge),{title:"Menu Category"}),a("div",ba,[e[52]||(e[52]=a("h4",{class:"mb-3"},"Categories",-1)),a("div",fa,[(r(!0),u(j,null,oe(Fe.value,t=>(r(),u("div",{key:t.label,class:"col-md-6 col-xl-4"},[a("div",ya,[a("div",ha,[a("div",null,[a("div",Ca,p(t.value),1),a("div",_a,p(t.label),1)]),a("div",{class:F(["p-3 rounded-3 d-flex align-items-center justify-content-center",t.iconBg])},[(r(),le(Je(t.icon),{class:F(t.iconColor),size:"28"},null,8,["class"]))],2)])])]))),128))]),a("div",ka,[a("div",wa,[a("div",xa,[e[31]||(e[31]=a("h4",{class:"mb-0"},"Categories",-1)),a("div",Sa,[a("div",Ma,[e[22]||(e[22]=a("i",{class:"bi bi-search"},null,-1)),e[23]||(e[23]=a("input",{type:"email",name:"email",autocomplete:"email",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px"},tabindex:"-1","aria-hidden":"true"},null,-1)),ge.value?W((r(),u("input",{id:re,"onUpdate:modelValue":e[0]||(e[0]=t=>L.value=t),key:pe.value,class:"form-control search-input",placeholder:"Search",type:"search",autocomplete:"new-password",name:re,role:"presentation",onFocus:e[1]||(e[1]=(...t)=>l.handleFocus&&l.handleFocus(...t))},null,32)),[[de,L.value]]):(r(),u("input",$a))]),h(sa,{modelValue:K.value,"onUpdate:modelValue":e[2]||(e[2]=t=>K.value=t),title:"Menu Categories","modal-id":"categoryFilterModal","modal-size":"modal-lg","sort-options":be.value.sortOptions,"status-options":be.value.statusOptions,"show-stock-status":!1,"show-price-range":!1,"show-date-range":!1,"show-category":!1,suppliers:[],onApply:Ve,onClear:De},{customFilters:Y(({filters:t})=>[a("div",Ia,[e[25]||(e[25]=a("label",{class:"form-label fw-semibold text-dark"},[a("i",{class:"fas fa-tags me-2 text-muted"}),U("Category ")],-1)),W(a("select",{"onUpdate:modelValue":c=>t.category=c,class:"form-select"},[e[24]||(e[24]=a("option",{value:""},"All Categories",-1)),(r(!0),u(j,null,oe(ve.value,c=>(r(),u("option",{key:c.id,value:c.id},p(c.name),9,Va))),128))],8,Fa),[[ce,t.category]])]),a("div",Da,[e[27]||(e[27]=a("label",{class:"form-label fw-semibold text-dark"},[a("i",{class:"fas fa-toggle-on me-2 text-muted"}),U("Status ")],-1)),W(a("select",{"onUpdate:modelValue":c=>t.status=c,class:"form-select"},[...e[26]||(e[26]=[a("option",{value:""},"All Status",-1),a("option",{value:"active"},"Active",-1),a("option",{value:"inactive"},"Inactive",-1)])],8,Ba),[[ce,t.status]])]),a("div",Ea,[e[29]||(e[29]=a("label",{class:"form-label fw-semibold text-dark"},[a("i",{class:"fas fa-sitemap me-2 text-muted"}),U("Has Subcategories ")],-1)),W(a("select",{"onUpdate:modelValue":c=>t.hasSubcategories=c,class:"form-select"},[...e[28]||(e[28]=[a("option",{value:""},"All",-1),a("option",{value:"yes"},"Has Subcategories",-1),a("option",{value:"no"},"No Subcategories",-1)])],8,La),[[ce,t.hasSubcategories]])])]),_:1},8,["modelValue","sort-options","status-options"]),a("button",{"data-bs-toggle":"modal","data-bs-target":"#addCatModal",onClick:e[3]||(e[3]=t=>{b.value=null,Ue(),Be()}),class:"d-flex align-items-center gap-1 px-4 btn-sm py-2 rounded-pill btn btn-primary text-white"},[h(E(ga),{class:"w-4 h-4"}),e[30]||(e[30]=U(" Add Category ",-1))]),h(ca,{label:"Import",sampleHeaders:["category","subcategory","active"],sampleData:[["Dairy","TestSubCat",1],["Bakery","Bread",1],["Beverages","Juices",0]],onOnImport:He}),h(E(na),{modelValue:se.value,"onUpdate:modelValue":e[4]||(e[4]=t=>se.value=t),options:Se,optionLabel:"label",optionValue:"value",placeholder:"Export",class:"export-dropdown",onChange:Me},null,8,["modelValue"])])]),a("div",Na,[a("table",Pa,[e[33]||(e[33]=a("thead",{class:"border-top small text-muted"},[a("tr",null,[a("th",null,"S.#"),a("th",null,"Category"),a("th",null,"Sub Category"),a("th",null,"Icon"),a("th",null,"Total Item"),a("th",null,"Status"),a("th",{class:"text-center"},"Action")])],-1)),a("tbody",null,[(r(!0),u(j,null,oe(I.value,(t,c)=>(r(),u("tr",{key:t.id},[a("td",null,p(c+1),1),a("td",Aa,p(t.name),1),a("td",Ta,[t.subcategories&&t.subcategories.length?(r(),u("div",ja,[(r(!0),u(j,null,oe(t.subcategories,m=>(r(),u("div",{key:m.id,class:"d-flex justify-content-between align-items-center",style:{gap:"5px"}},[a("span",null,p(m.name),1),a("button",{"data-bs-toggle":"modal",onClick:()=>{je(t,m)},title:"Edit",class:"p-2 rounded-full text-blue-600 hover:bg-blue-100"},[h(E(we),{class:"w-4 h-4"})],8,Ua)]))),128))])):(r(),u("span",Oa,"â€“"))]),a("td",null,[a("div",Ra,[t.image_url?(r(),u("img",{key:0,src:t.image_url,alt:t.name,class:"rounded",style:{width:"32px",height:"32px","object-fit":"cover"}},null,8,za)):(r(),u("span",Wa,"ðŸ“¦"))])]),a("td",null,p(t.total_menu_items),1),a("td",null,[a("span",{class:F(["badge",t.active?"bg-success rounded-pill":"bg-danger rounded-pill"])},p(t.active?"Active":"Inactive"),3)]),a("td",qa,[a("div",Ha,[a("button",{"data-bs-toggle":"modal","data-bs-target":"#modalUnitForm",onClick:()=>{Ne(t)},title:"Edit",class:"p-2 rounded-full text-blue-600 hover:bg-blue-100"},[h(E(we),{class:"w-4 h-4"})],8,Ka),h(n,{title:"Confirm Delete",message:`Are you sure you want to delete ${t.name}?`,showDeleteButton:!0,onConfirm:()=>{Pe(t)},onCancel:()=>{}},null,8,["message","onConfirm"])])])]))),128)),I.value.length===0?(r(),u("tr",Xa,[...e[32]||(e[32]=[a("td",{colspan:"10",class:"text-center text-muted py-4"}," No categories found. ",-1)])])):k("",!0)])])]),!Q.value&&!$e.value&&_.value.last_page>1?(r(),u("div",Ya,[a("div",Za," Showing "+p(_.value.from)+" to "+p(_.value.to)+" of "+p(_.value.total)+" entries ",1),h(Qe,{pagination:_.value.links,isApiDriven:!0,onPageChanged:Ie},null,8,["pagination"])])):k("",!0)])]),a("div",Ga,[a("div",Ja,[a("div",Qa,[a("div",et,[a("h5",at,p(b.value?"Edit Menu Category":"Add Menu Category"),1),a("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:ie},[...e[34]||(e[34]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),a("div",tt,[a("div",lt,[a("div",ot,[a("div",st,[b.value?k("",!0):(r(),u(j,{key:0},[a("div",nt,[e[37]||(e[37]=a("label",{class:"form-label d-block mb-2"},"Is this a subcategory?",-1)),a("div",rt,[a("div",it,[a("input",{class:"form-check-input",type:"radio",checked:y.value,onClick:e[5]||(e[5]=t=>N()),onChange:e[6]||(e[6]=t=>{y.value=!0,S.value=null}),name:"isSub"},null,40,ut),e[35]||(e[35]=a("label",{class:"form-check-label"},"Yes",-1))]),a("div",dt,[a("input",{class:"form-check-input",type:"radio",checked:!y.value,onClick:e[7]||(e[7]=t=>N()),onChange:e[8]||(e[8]=t=>{y.value=!1,S.value=null}),name:"isSub"},null,40,ct),e[36]||(e[36]=a("label",{class:"form-check-label"},"No",-1))])])]),y.value?(r(),u("div",mt,[e[38]||(e[38]=a("label",{class:"form-label"},"Category",-1)),h(E(la),{modelValue:S.value,"onUpdate:modelValue":e[9]||(e[9]=t=>S.value=t),options:ve.value,optionLabel:"name",optionValue:"id",placeholder:"Select Category",class:F(["w-100",{"is-invalid":v.value?.parent_id}]),appendTo:"self",autoZIndex:!0,baseZIndex:2e3},null,8,["modelValue","options","class"]),v.value?.parent_id?(r(),u("small",vt,p(v.value.parent_id[0]),1)):k("",!0)])):k("",!0)],64)),!y.value||b.value?(r(),u("div",pt,[e[39]||(e[39]=a("label",{class:"form-label"},"Category Name",-1)),b.value?W((r(),u("input",{key:0,type:"text","onUpdate:modelValue":e[10]||(e[10]=t=>g.value[0].label=t),class:F(["form-control",{"is-invalid":v.value.name}]),placeholder:"Enter category name"},null,2)),[[de,g.value[0].label]]):(r(),le(E(ke),{key:1,modelValue:g.value,"onUpdate:modelValue":e[11]||(e[11]=t=>g.value=t),options:ne.value,optionLabel:"label",optionValue:"value",filter:!0,display:"chip",class:F([{"is-invalid":v.value.name},"w-100"]),placeholder:"Select or add categories...",appendTo:"self",onKeydown:Ce(_e(fe,["prevent"]),["enter"]),onBlur:fe,onFilter:e[12]||(e[12]=t=>ae.value=t.value)},{option:Y(({option:t})=>[U(p(t.label),1)]),_:1},8,["modelValue","options","class","onKeydown"])),v.value.name?(r(),u("small",gt,p(v.value.name[0]),1)):k("",!0)])):k("",!0),y.value&&!b.value?(r(),u("div",bt,[e[40]||(e[40]=a("label",{class:"form-label"},"Subcategory Name(s)",-1)),h(E(ke),{modelValue:x.value,"onUpdate:modelValue":e[13]||(e[13]=t=>x.value=t),options:P.value,optionLabel:"label",optionValue:"value",filter:!0,display:"chip",class:F([{"is-invalid":v.value?.subcategories||v.value?.name},"w-100"]),placeholder:"Select or add subcategories...",appendTo:"self",onFilter:e[14]||(e[14]=t=>X.value=t.value||""),onKeydown:Ce(_e(ue,["prevent"]),["enter"]),onBlur:ue},{option:Y(({option:t})=>[a("div",null,p(t.label),1)]),footer:Y(()=>[a("div",ft,[h(o,{label:"Add Custom",severity:"secondary",variant:"text",size:"small",icon:"pi pi-plus",onClick:ue,disabled:!X.value.trim()},null,8,["disabled"]),a("div",yt,[h(o,{label:"Select All",severity:"secondary",variant:"text",size:"small",icon:"pi pi-check",onClick:Ae}),h(o,{label:"Clear All",severity:"danger",variant:"text",size:"small",icon:"pi pi-times",onClick:Te})])])]),_:1},8,["modelValue","options","class","onKeydown"]),v.value?.subcategories?(r(),u("div",ht,p(v.value.subcategories[0]),1)):k("",!0),v.value?.name?(r(),u("div",Ct,p(v.value.name[0]),1)):k("",!0)])):k("",!0),b.value&&l.parentCategory?(r(),u("div",_t,[e[41]||(e[41]=a("label",{class:"form-label"},"Parent Category",-1)),a("input",{type:"text",class:"form-control",value:l.parentCategory.label,disabled:""},null,8,kt)])):k("",!0),a("div",wt,[e[44]||(e[44]=a("label",{class:"form-label d-block mb-2"},"Active",-1)),a("div",xt,[a("div",St,[a("input",{class:"form-check-input",type:"radio",checked:$.value,onChange:e[15]||(e[15]=t=>$.value=!0),name:"active"},null,40,Mt),e[42]||(e[42]=a("label",{class:"form-check-label"},"Yes",-1))]),a("div",$t,[a("input",{class:"form-check-input",type:"radio",checked:!$.value,onChange:e[16]||(e[16]=t=>$.value=!1),name:"active"},null,40,It),e[43]||(e[43]=a("label",{class:"form-check-label"},"No",-1))])])])])]),a("div",Ft,[e[46]||(e[46]=a("label",{class:"form-label d-block mb-2"},"Category Image",-1)),a("div",{class:F(["logo-card",{"is-invalid":v.value.icon}]),style:{border:"2px dashed #6c757d","border-radius":"8px",padding:"1rem","min-height":"250px"}},[a("div",{class:"logo-frame d-flex flex-column align-items-center justify-content-center",style:{height:"200px",cursor:"pointer"},onClick:e[17]||(e[17]=t=>O.value=!0)},[C.value?(r(),u("img",{key:0,src:C.value,alt:"Category Image",style:{"max-width":"100%","max-height":"150px","object-fit":"contain"}},null,8,Vt)):(r(),u("div",Dt,[...e[45]||(e[45]=[a("i",{class:"bi bi-image"},null,-1)])]))]),h(ea,{show:O.value,onClose:e[18]||(e[18]=t=>O.value=!1),onCropped:Ee},null,8,["show"]),H.value?(r(),le(aa,{key:0,show:H.value,image:C.value,onClose:e[19]||(e[19]=t=>H.value=!1)},null,8,["show","image"])):k("",!0)],2),v.value.icon?(r(),u("small",Bt,p(v.value.icon[0]),1)):k("",!0)])]),e[48]||(e[48]=a("hr",{class:"my-4"},null,-1)),a("div",Et,[a("button",{class:"btn btn-primary rounded-pill btn-sm py-2 px-4",disabled:B.value,onClick:e[20]||(e[20]=t=>Le())},[B.value?(r(),u(j,{key:0},[e[47]||(e[47]=a("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),U(" "+p((b.value,"Saving...")),1)],64)):(r(),u(j,{key:1},[U(p((b.value,"Save")),1)],64))],8,Lt),a("button",{class:"btn btn-secondary btn-sm py-2 rounded-pill px-4 ms-2","data-bs-dismiss":"modal",onClick:ie}," Cancel ")])])])])]),a("div",Nt,[a("div",Pt,[a("div",At,[a("div",{class:"modal-header"},[e[50]||(e[50]=a("h5",{class:"modal-title",id:"editSubCatModalLabel"}," Edit Subcategory ",-1)),a("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:N},[...e[49]||(e[49]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),a("div",Tt,[a("div",jt,[e[51]||(e[51]=a("label",{for:"subCategoryName",class:"form-label"},"Subcategory Name",-1)),W(a("input",{type:"text",class:F(["form-control",{"is-invalid":A.value}]),id:"subCategoryName","onUpdate:modelValue":e[21]||(e[21]=t=>M.value.name=t),disabled:z.value},null,10,Ut),[[de,M.value.name]]),a("small",Ot,p(A.value),1)]),a("button",{type:"button",class:"btn btn-primary rounded-pill px-4",onClick:Oe,disabled:z.value},p(z.value?"Saving...":"Save"),9,Rt)])])])])])]),_:1})}}},vl=Ke(zt,[["__scopeId","data-v-383a5686"]]);export{vl as default};
