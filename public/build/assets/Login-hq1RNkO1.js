import{_ as B,u as U,r as u,j as T,k as y,l as j,m as b,p as q,q as $,g as r,o as a,a as z,b as t,c as A,i as c,d as i,h as O,s as G,F as D,v as H,n as P,t as f,f as k,e as K,x as V,y as Q,z as W}from"./app-C8Xsdeiq.js";import{V as J}from"./VerifyOtpModal-VXeb_Le1.js";import{u as R,a as X}from"./index-DxYZ9pSU.js";const Y={class:"account-page"},Z={class:"main-wrapper"},ss={class:"account-content"},ts={class:"login-wrapper"},es={class:"login-content"},os={class:"login-userset"},ns={key:0,class:"pin-login-container"},is={class:"pin-display-container"},as={class:"pin-dots"},ls={key:0,class:"text-danger d-block text-center mt-2"},rs={class:"numeric-keypad"},ds={class:"keypad-row"},ps={class:"keypad-row"},us={class:"keypad-row"},cs={class:"keypad-row"},vs={key:1,class:"email-login-container"},ms={class:"form-login"},gs={class:"form-addons"},fs={key:0,class:"text-danger text-sm"},ys={class:"form-login"},bs={class:"pass-group"},ks=["type"],ws={key:0,class:"text-danger text-sm"},hs={class:"form-login"},Cs={class:"alreadyuser"},_s=["href"],xs={class:"form-login"},Es=["disabled"],Ls={key:0},Ts={key:1},$s={key:0,class:"loading-overlay"},Ds={__name:"Login",setup(Ps){const e=U({email:"",password:"",pin:"",remember:!1}),w=R(),I=X(w),v=u(!1),d=u("pin"),m=u(["","","",""]),l=o=>{e.pin.length<4&&(e.pin+=o,C())},h=()=>{e.pin.length>0&&(e.pin=e.pin.slice(0,-1),C())},g=()=>{e.pin="",m.value=["","","",""]},C=()=>{const o=e.pin.split("");m.value=["","","",""],o.forEach((s,n)=>{n<4&&(m.value[n]="â€¢")})};T(()=>e.pin,o=>{o.length===4&&d.value==="pin"&&setTimeout(()=>{x()},300)}),y(()=>{window.addEventListener("keydown",_)}),j(()=>{window.removeEventListener("keydown",_)});function _(o){const s=o.key;/^[0-9]$/.test(s)&&l(s),(s==="Backspace"||s==="Delete")&&h(),s.toLowerCase()==="r"&&g()}const x=()=>{e.post(route("login"),{preserveScroll:!0,onSuccess:()=>{},onError:o=>{o.unverified&&o.email_address&&(L.value=o.email_address,p.value=!0,b.warning(o.unverified)),e.errors.email=o.email,e.errors.password=o.password,e.errors.pin=o.pin,o.pin&&d.value==="pin"&&g()},onFinish:()=>{d.value==="email"&&e.reset("password")}})},E=()=>{document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(s=>{new bootstrap.Tooltip(s)})};T([()=>e.email,()=>e.pin],()=>{q(()=>E())}),y(()=>{w.value||I(!0),E()}),$();function S(){const o=$().props.flash||{};o.message&&b.success(o.message),o.error&&b.error(o.error)}y(()=>{S()});const p=u(!1),L=u(""),M=()=>{d.value="email",g(),e.clearErrors()},N=()=>{d.value="pin",e.email="",e.password="",e.clearErrors()};return(o,s)=>(a(),r(D,null,[z(i(O),{title:"Login"}),t("div",Y,[t("div",Z,[t("div",ss,[t("div",ts,[t("div",es,[t("div",os,[s[25]||(s[25]=t("div",{class:"login-logo-wrapper"},[t("div",{class:"login-logo"},[t("img",{src:"/assets/img/10x Global.png",alt:"img",class:"logo-img"})])],-1)),d.value==="pin"?(a(),r("div",ns,[s[18]||(s[18]=t("div",{class:"login-userheading text-center"},[t("h3",null,"Quick PIN Login"),t("p",{class:"text-muted"},"Enter your 4-digit PIN")],-1)),t("div",is,[t("div",as,[(a(!0),r(D,null,H(m.value,(n,F)=>(a(),r("div",{key:F,class:P(["pin-dot",{filled:n}])},f(n),3))),128))]),i(e).errors.pin?(a(),r("span",ls,f(i(e).errors.pin),1)):c("",!0)]),t("div",rs,[t("div",ds,[t("button",{type:"button",class:"keypad-btn",onClick:s[0]||(s[0]=n=>l("1"))},"1"),t("button",{type:"button",class:"keypad-btn",onClick:s[1]||(s[1]=n=>l("2"))},"2"),t("button",{type:"button",class:"keypad-btn",onClick:s[2]||(s[2]=n=>l("3"))},"3")]),t("div",ps,[t("button",{type:"button",class:"keypad-btn",onClick:s[3]||(s[3]=n=>l("4"))},"4"),t("button",{type:"button",class:"keypad-btn",onClick:s[4]||(s[4]=n=>l("5"))},"5"),t("button",{type:"button",class:"keypad-btn",onClick:s[5]||(s[5]=n=>l("6"))},"6")]),t("div",us,[t("button",{type:"button",class:"keypad-btn",onClick:s[6]||(s[6]=n=>l("7"))},"7"),t("button",{type:"button",class:"keypad-btn",onClick:s[7]||(s[7]=n=>l("8"))},"8"),t("button",{type:"button",class:"keypad-btn",onClick:s[8]||(s[8]=n=>l("9"))},"9")]),t("div",cs,[t("button",{type:"button",class:"keypad-btn keypad-clear",onClick:g},[...s[15]||(s[15]=[t("i",{class:"fas fa-redo"},null,-1)])]),t("button",{type:"button",class:"keypad-btn",onClick:s[9]||(s[9]=n=>l("0"))},"0"),t("button",{type:"button",class:"keypad-btn keypad-delete",onClick:h},[...s[16]||(s[16]=[t("i",{class:"fas fa-backspace"},null,-1)])])])]),t("div",{class:"text-center mt-4"},[t("button",{type:"button",class:"btn-link-switch",onClick:M},[...s[17]||(s[17]=[t("i",{class:"fas fa-envelope me-2"},null,-1),k("Login with Email Instead ",-1)])])])])):(a(),r("div",vs,[s[24]||(s[24]=t("div",{class:"login-userheading"},[t("h3",null,"Sign In"),t("p",{class:"text-muted mb-4"},"Login with your credentials")],-1)),t("form",{onSubmit:K(x,["prevent"])},[t("div",ms,[s[20]||(s[20]=t("label",{class:"form-label"},"Email Address",-1)),t("div",gs,[V(t("input",{type:"email","onUpdate:modelValue":s[10]||(s[10]=n=>i(e).email=n),placeholder:"Enter your email address",class:"form-control"},null,512),[[Q,i(e).email]]),s[19]||(s[19]=t("img",{src:"/assets/img/icons/mail.svg",alt:"img"},null,-1))]),i(e).errors.email?(a(),r("span",fs,f(i(e).errors.email),1)):c("",!0)]),t("div",ys,[s[21]||(s[21]=t("label",{class:"form-label"},"Password",-1)),t("div",bs,[V(t("input",{type:v.value?"text":"password","onUpdate:modelValue":s[11]||(s[11]=n=>i(e).password=n),class:"pass-input form-control",placeholder:"Enter your password"},null,8,ks),[[W,i(e).password]]),t("span",{class:P(["fas toggle-password",v.value?"fa-eye":"fa-eye-slash"]),onClick:s[12]||(s[12]=n=>v.value=!v.value)},null,2)]),i(e).errors.password?(a(),r("span",ws,f(i(e).errors.password),1)):c("",!0)]),t("div",hs,[t("div",Cs,[t("h4",null,[t("a",{href:o.route("password.request"),class:"hover-a"}," Forgot Password? ",8,_s)])])]),t("div",xs,[t("button",{type:"submit",class:"btn btn-login",disabled:i(e).processing},[i(e).processing?(a(),r("span",Ls,[...s[22]||(s[22]=[t("i",{class:"fas fa-spinner fa-spin me-2"},null,-1),k("Signing In... ",-1)])])):(a(),r("span",Ts,"Sign In"))],8,Es)]),t("div",{class:"text-center mt-3"},[t("button",{type:"button",class:"btn-link-switch",onClick:N},[...s[23]||(s[23]=[t("i",{class:"fas fa-keyboard me-2"},null,-1),k("Use PIN Instead ",-1)])])])],32)]))])]),s[26]||(s[26]=G('<div class="login-img position-relative" data-v-97101fc9><img src="/assets/img/login.jpg" alt="img" class="w-100 h-100 object-fit-cover" data-v-97101fc9><div class="login-overlay text-center" data-v-97101fc9><div class="overlay-content" data-v-97101fc9><h1 class="restaurant-name" data-v-97101fc9>The Tasty House</h1><p class="restaurant-desc" data-v-97101fc9> Where taste meets comfort and every meal feels like home. </p></div></div></div>',1))])]),i(e).processing?(a(),r("div",$s,[...s[27]||(s[27]=[t("div",{class:"spinner"},null,-1),t("p",{class:"loading-text"},"Logging you in...",-1)])])):c("",!0)])]),p.value?(a(),A(J,{key:0,open:p.value,email:L.value,onVerified:s[13]||(s[13]=()=>{p.value=!1,o.window.location.href=o.route("dashboard")}),onClosed:s[14]||(s[14]=()=>{p.value=!1})},null,8,["open","email"])):c("",!0)],64))}},Ms=B(Ds,[["__scopeId","data-v-97101fc9"]]);export{Ms as default};
