import{b6 as ma,w as ws,c as we,m as dt,l as X,ae as Ki,g as O,b as I,f as c,p as he,t as N,F as Pe,i as ot,_ as Ob,o as tr,n as pu,r as W,A as Db,z as kb,s as z,e as Bt,u as ue,h as Nb,d as hu,j as Zt,v as Xn,y as Hi,K as ro,T as Wd,a as Lb}from"./app-DvoCJ4rQ.js";import{_ as $b}from"./Master-DC9wBb8Q.js";import Mb from"./ConfirmOrderModal-DLCL88Uv.js";import Pb from"./ReceiptModal-DvZck8xY.js";import Rb from"./PromoModal-Dt5aWMaV.js";import Fb from"./KotModal-FUkaKn7b.js";import{u as qb}from"./useFormatters-BE7Ie_le.js";import Bb from"./PosOrdersModal-BXZQWQGK.js";import{F as Wb}from"./FilterModal-C7ob7v1s.js";import{s as Ud}from"./index-DM-JsH6C.js";import Ub from"./DiscountModal-D7kEQcgV.js";import Vb from"./PendingOrdersModal-D4BO3odd.js";import{P as Vd}from"./pencil-CZ_81933.js";import{E as Hb}from"./eye-E8nhua3M.js";import"./index-CIE7L1SD.js";import"./createLucideIcon-Did_xip2.js";import"./index-D4izHQ_h.js";import"./index-DHsebJ0t.js";import"./sun-CutwfyHl.js";import"./StripePayment-CCQ2WzhO.js";import"./SplitPayment-BUsy1bRV.js";import"./Receipt-DVB20ZTh.js";import"./clock-CPepW5_g.js";import"./circle-check-big-BkBfezei.js";import"./circle-x-BnDPZvV1.js";import"./printer-CeNkIWF5.js";import"./index-CgE8cIOG.js";import"./index-Jx_m_aUp.js";import"./index-BlnpUN_t.js";var Wt="top",an="bottom",ln="right",Ut="left",Na="auto",_r=[Wt,an,ln,Ut],Ts="start",lr="end",If="clippingParents",Fu="viewport",sr="popper",Of="reference",ku=_r.reduce(function(u,n){return u.concat([n+"-"+Ts,n+"-"+lr])},[]),qu=[].concat(_r,[Na]).reduce(function(u,n){return u.concat([n,n+"-"+Ts,n+"-"+lr])},[]),Df="beforeRead",kf="read",Nf="afterRead",Lf="beforeMain",$f="main",Mf="afterMain",Pf="beforeWrite",Rf="write",Ff="afterWrite",qf=[Df,kf,Nf,Lf,$f,Mf,Pf,Rf,Ff];function ei(u){return u?(u.nodeName||"").toLowerCase():null}function un(u){if(u==null)return window;if(u.toString()!=="[object Window]"){var n=u.ownerDocument;return n&&n.defaultView||window}return u}function Ss(u){var n=un(u).Element;return u instanceof n||u instanceof Element}function mn(u){var n=un(u).HTMLElement;return u instanceof n||u instanceof HTMLElement}function Bu(u){if(typeof ShadowRoot>"u")return!1;var n=un(u).ShadowRoot;return u instanceof n||u instanceof ShadowRoot}function zb(u){var n=u.state;Object.keys(n.elements).forEach(function(s){var f=n.styles[s]||{},v=n.attributes[s]||{},y=n.elements[s];!mn(y)||!ei(y)||(Object.assign(y.style,f),Object.keys(v).forEach(function(x){var C=v[x];C===!1?y.removeAttribute(x):y.setAttribute(x,C===!0?"":C)}))})}function Kb(u){var n=u.state,s={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,s.popper),n.styles=s,n.elements.arrow&&Object.assign(n.elements.arrow.style,s.arrow),function(){Object.keys(n.elements).forEach(function(f){var v=n.elements[f],y=n.attributes[f]||{},x=Object.keys(n.styles.hasOwnProperty(f)?n.styles[f]:s[f]),C=x.reduce(function(T,U){return T[U]="",T},{});!mn(v)||!ei(v)||(Object.assign(v.style,C),Object.keys(y).forEach(function(T){v.removeAttribute(T)}))})}}const Wu={name:"applyStyles",enabled:!0,phase:"write",fn:zb,effect:Kb,requires:["computeStyles"]};function Zn(u){return u.split("-")[0]}var Cs=Math.max,Ia=Math.min,ur=Math.round;function Nu(){var u=navigator.userAgentData;return u!=null&&u.brands&&Array.isArray(u.brands)?u.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function Bf(){return!/^((?!chrome|android).)*safari/i.test(Nu())}function cr(u,n,s){n===void 0&&(n=!1),s===void 0&&(s=!1);var f=u.getBoundingClientRect(),v=1,y=1;n&&mn(u)&&(v=u.offsetWidth>0&&ur(f.width)/u.offsetWidth||1,y=u.offsetHeight>0&&ur(f.height)/u.offsetHeight||1);var x=Ss(u)?un(u):window,C=x.visualViewport,T=!Bf()&&s,U=(f.left+(T&&C?C.offsetLeft:0))/v,P=(f.top+(T&&C?C.offsetTop:0))/y,V=f.width/v,Q=f.height/y;return{width:V,height:Q,top:P,right:U+V,bottom:P+Q,left:U,x:U,y:P}}function Uu(u){var n=cr(u),s=u.offsetWidth,f=u.offsetHeight;return Math.abs(n.width-s)<=1&&(s=n.width),Math.abs(n.height-f)<=1&&(f=n.height),{x:u.offsetLeft,y:u.offsetTop,width:s,height:f}}function Wf(u,n){var s=n.getRootNode&&n.getRootNode();if(u.contains(n))return!0;if(s&&Bu(s)){var f=n;do{if(f&&u.isSameNode(f))return!0;f=f.parentNode||f.host}while(f)}return!1}function Ai(u){return un(u).getComputedStyle(u)}function Yb(u){return["table","td","th"].indexOf(ei(u))>=0}function Qi(u){return((Ss(u)?u.ownerDocument:u.document)||window.document).documentElement}function La(u){return ei(u)==="html"?u:u.assignedSlot||u.parentNode||(Bu(u)?u.host:null)||Qi(u)}function Hd(u){return!mn(u)||Ai(u).position==="fixed"?null:u.offsetParent}function Gb(u){var n=/firefox/i.test(Nu()),s=/Trident/i.test(Nu());if(s&&mn(u)){var f=Ai(u);if(f.position==="fixed")return null}var v=La(u);for(Bu(v)&&(v=v.host);mn(v)&&["html","body"].indexOf(ei(v))<0;){var y=Ai(v);if(y.transform!=="none"||y.perspective!=="none"||y.contain==="paint"||["transform","perspective"].indexOf(y.willChange)!==-1||n&&y.willChange==="filter"||n&&y.filter&&y.filter!=="none")return v;v=v.parentNode}return null}function ho(u){for(var n=un(u),s=Hd(u);s&&Yb(s)&&Ai(s).position==="static";)s=Hd(s);return s&&(ei(s)==="html"||ei(s)==="body"&&Ai(s).position==="static")?n:s||Gb(u)||n}function Vu(u){return["top","bottom"].indexOf(u)>=0?"x":"y"}function uo(u,n,s){return Cs(u,Ia(n,s))}function jb(u,n,s){var f=uo(u,n,s);return f>s?s:f}function Uf(){return{top:0,right:0,bottom:0,left:0}}function Vf(u){return Object.assign({},Uf(),u)}function Hf(u,n){return n.reduce(function(s,f){return s[f]=u,s},{})}var Qb=function(n,s){return n=typeof n=="function"?n(Object.assign({},s.rects,{placement:s.placement})):n,Vf(typeof n!="number"?n:Hf(n,_r))};function Xb(u){var n,s=u.state,f=u.name,v=u.options,y=s.elements.arrow,x=s.modifiersData.popperOffsets,C=Zn(s.placement),T=Vu(C),U=[Ut,ln].indexOf(C)>=0,P=U?"height":"width";if(!(!y||!x)){var V=Qb(v.padding,s),Q=Uu(y),K=T==="y"?Wt:Ut,J=T==="y"?an:ln,ee=s.rects.reference[P]+s.rects.reference[T]-x[T]-s.rects.popper[P],j=x[T]-s.rects.reference[T],te=ho(y),Ce=te?T==="y"?te.clientHeight||0:te.clientWidth||0:0,Se=ee/2-j/2,ce=V[K],_e=Ce-Q[P]-V[J],ne=Ce/2-Q[P]/2+Se,be=uo(ce,ne,_e),Be=T;s.modifiersData[f]=(n={},n[Be]=be,n.centerOffset=be-ne,n)}}function Zb(u){var n=u.state,s=u.options,f=s.element,v=f===void 0?"[data-popper-arrow]":f;v!=null&&(typeof v=="string"&&(v=n.elements.popper.querySelector(v),!v)||Wf(n.elements.popper,v)&&(n.elements.arrow=v))}const zf={name:"arrow",enabled:!0,phase:"main",fn:Xb,effect:Zb,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function dr(u){return u.split("-")[1]}var Jb={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ey(u,n){var s=u.x,f=u.y,v=n.devicePixelRatio||1;return{x:ur(s*v)/v||0,y:ur(f*v)/v||0}}function zd(u){var n,s=u.popper,f=u.popperRect,v=u.placement,y=u.variation,x=u.offsets,C=u.position,T=u.gpuAcceleration,U=u.adaptive,P=u.roundOffsets,V=u.isFixed,Q=x.x,K=Q===void 0?0:Q,J=x.y,ee=J===void 0?0:J,j=typeof P=="function"?P({x:K,y:ee}):{x:K,y:ee};K=j.x,ee=j.y;var te=x.hasOwnProperty("x"),Ce=x.hasOwnProperty("y"),Se=Ut,ce=Wt,_e=window;if(U){var ne=ho(s),be="clientHeight",Be="clientWidth";if(ne===un(s)&&(ne=Qi(s),Ai(ne).position!=="static"&&C==="absolute"&&(be="scrollHeight",Be="scrollWidth")),ne=ne,v===Wt||(v===Ut||v===ln)&&y===lr){ce=an;var Ue=V&&ne===_e&&_e.visualViewport?_e.visualViewport.height:ne[be];ee-=Ue-f.height,ee*=T?1:-1}if(v===Ut||(v===Wt||v===an)&&y===lr){Se=ln;var Ye=V&&ne===_e&&_e.visualViewport?_e.visualViewport.width:ne[Be];K-=Ye-f.width,K*=T?1:-1}}var Ze=Object.assign({position:C},U&&Jb),ke=P===!0?ey({x:K,y:ee},un(s)):{x:K,y:ee};if(K=ke.x,ee=ke.y,T){var Ve;return Object.assign({},Ze,(Ve={},Ve[ce]=Ce?"0":"",Ve[Se]=te?"0":"",Ve.transform=(_e.devicePixelRatio||1)<=1?"translate("+K+"px, "+ee+"px)":"translate3d("+K+"px, "+ee+"px, 0)",Ve))}return Object.assign({},Ze,(n={},n[ce]=Ce?ee+"px":"",n[Se]=te?K+"px":"",n.transform="",n))}function ty(u){var n=u.state,s=u.options,f=s.gpuAcceleration,v=f===void 0?!0:f,y=s.adaptive,x=y===void 0?!0:y,C=s.roundOffsets,T=C===void 0?!0:C,U={placement:Zn(n.placement),variation:dr(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:v,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,zd(Object.assign({},U,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:x,roundOffsets:T})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,zd(Object.assign({},U,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:T})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}const Hu={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ty,data:{}};var ga={passive:!0};function ny(u){var n=u.state,s=u.instance,f=u.options,v=f.scroll,y=v===void 0?!0:v,x=f.resize,C=x===void 0?!0:x,T=un(n.elements.popper),U=[].concat(n.scrollParents.reference,n.scrollParents.popper);return y&&U.forEach(function(P){P.addEventListener("scroll",s.update,ga)}),C&&T.addEventListener("resize",s.update,ga),function(){y&&U.forEach(function(P){P.removeEventListener("scroll",s.update,ga)}),C&&T.removeEventListener("resize",s.update,ga)}}const zu={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ny,data:{}};var iy={left:"right",right:"left",bottom:"top",top:"bottom"};function Ca(u){return u.replace(/left|right|bottom|top/g,function(n){return iy[n]})}var sy={start:"end",end:"start"};function Kd(u){return u.replace(/start|end/g,function(n){return sy[n]})}function Ku(u){var n=un(u),s=n.pageXOffset,f=n.pageYOffset;return{scrollLeft:s,scrollTop:f}}function Yu(u){return cr(Qi(u)).left+Ku(u).scrollLeft}function ry(u,n){var s=un(u),f=Qi(u),v=s.visualViewport,y=f.clientWidth,x=f.clientHeight,C=0,T=0;if(v){y=v.width,x=v.height;var U=Bf();(U||!U&&n==="fixed")&&(C=v.offsetLeft,T=v.offsetTop)}return{width:y,height:x,x:C+Yu(u),y:T}}function oy(u){var n,s=Qi(u),f=Ku(u),v=(n=u.ownerDocument)==null?void 0:n.body,y=Cs(s.scrollWidth,s.clientWidth,v?v.scrollWidth:0,v?v.clientWidth:0),x=Cs(s.scrollHeight,s.clientHeight,v?v.scrollHeight:0,v?v.clientHeight:0),C=-f.scrollLeft+Yu(u),T=-f.scrollTop;return Ai(v||s).direction==="rtl"&&(C+=Cs(s.clientWidth,v?v.clientWidth:0)-y),{width:y,height:x,x:C,y:T}}function Gu(u){var n=Ai(u),s=n.overflow,f=n.overflowX,v=n.overflowY;return/auto|scroll|overlay|hidden/.test(s+v+f)}function Kf(u){return["html","body","#document"].indexOf(ei(u))>=0?u.ownerDocument.body:mn(u)&&Gu(u)?u:Kf(La(u))}function co(u,n){var s;n===void 0&&(n=[]);var f=Kf(u),v=f===((s=u.ownerDocument)==null?void 0:s.body),y=un(f),x=v?[y].concat(y.visualViewport||[],Gu(f)?f:[]):f,C=n.concat(x);return v?C:C.concat(co(La(x)))}function Lu(u){return Object.assign({},u,{left:u.x,top:u.y,right:u.x+u.width,bottom:u.y+u.height})}function ay(u,n){var s=cr(u,!1,n==="fixed");return s.top=s.top+u.clientTop,s.left=s.left+u.clientLeft,s.bottom=s.top+u.clientHeight,s.right=s.left+u.clientWidth,s.width=u.clientWidth,s.height=u.clientHeight,s.x=s.left,s.y=s.top,s}function Yd(u,n,s){return n===Fu?Lu(ry(u,s)):Ss(n)?ay(n,s):Lu(oy(Qi(u)))}function ly(u){var n=co(La(u)),s=["absolute","fixed"].indexOf(Ai(u).position)>=0,f=s&&mn(u)?ho(u):u;return Ss(f)?n.filter(function(v){return Ss(v)&&Wf(v,f)&&ei(v)!=="body"}):[]}function uy(u,n,s,f){var v=n==="clippingParents"?ly(u):[].concat(n),y=[].concat(v,[s]),x=y[0],C=y.reduce(function(T,U){var P=Yd(u,U,f);return T.top=Cs(P.top,T.top),T.right=Ia(P.right,T.right),T.bottom=Ia(P.bottom,T.bottom),T.left=Cs(P.left,T.left),T},Yd(u,x,f));return C.width=C.right-C.left,C.height=C.bottom-C.top,C.x=C.left,C.y=C.top,C}function Yf(u){var n=u.reference,s=u.element,f=u.placement,v=f?Zn(f):null,y=f?dr(f):null,x=n.x+n.width/2-s.width/2,C=n.y+n.height/2-s.height/2,T;switch(v){case Wt:T={x,y:n.y-s.height};break;case an:T={x,y:n.y+n.height};break;case ln:T={x:n.x+n.width,y:C};break;case Ut:T={x:n.x-s.width,y:C};break;default:T={x:n.x,y:n.y}}var U=v?Vu(v):null;if(U!=null){var P=U==="y"?"height":"width";switch(y){case Ts:T[U]=T[U]-(n[P]/2-s[P]/2);break;case lr:T[U]=T[U]+(n[P]/2-s[P]/2);break}}return T}function fr(u,n){n===void 0&&(n={});var s=n,f=s.placement,v=f===void 0?u.placement:f,y=s.strategy,x=y===void 0?u.strategy:y,C=s.boundary,T=C===void 0?If:C,U=s.rootBoundary,P=U===void 0?Fu:U,V=s.elementContext,Q=V===void 0?sr:V,K=s.altBoundary,J=K===void 0?!1:K,ee=s.padding,j=ee===void 0?0:ee,te=Vf(typeof j!="number"?j:Hf(j,_r)),Ce=Q===sr?Of:sr,Se=u.rects.popper,ce=u.elements[J?Ce:Q],_e=uy(Ss(ce)?ce:ce.contextElement||Qi(u.elements.popper),T,P,x),ne=cr(u.elements.reference),be=Yf({reference:ne,element:Se,placement:v}),Be=Lu(Object.assign({},Se,be)),Ue=Q===sr?Be:ne,Ye={top:_e.top-Ue.top+te.top,bottom:Ue.bottom-_e.bottom+te.bottom,left:_e.left-Ue.left+te.left,right:Ue.right-_e.right+te.right},Ze=u.modifiersData.offset;if(Q===sr&&Ze){var ke=Ze[v];Object.keys(Ye).forEach(function(Ve){var kt=[ln,an].indexOf(Ve)>=0?1:-1,Vt=[Wt,an].indexOf(Ve)>=0?"y":"x";Ye[Ve]+=ke[Vt]*kt})}return Ye}function cy(u,n){n===void 0&&(n={});var s=n,f=s.placement,v=s.boundary,y=s.rootBoundary,x=s.padding,C=s.flipVariations,T=s.allowedAutoPlacements,U=T===void 0?qu:T,P=dr(f),V=P?C?ku:ku.filter(function(J){return dr(J)===P}):_r,Q=V.filter(function(J){return U.indexOf(J)>=0});Q.length===0&&(Q=V);var K=Q.reduce(function(J,ee){return J[ee]=fr(u,{placement:ee,boundary:v,rootBoundary:y,padding:x})[Zn(ee)],J},{});return Object.keys(K).sort(function(J,ee){return K[J]-K[ee]})}function dy(u){if(Zn(u)===Na)return[];var n=Ca(u);return[Kd(u),n,Kd(n)]}function fy(u){var n=u.state,s=u.options,f=u.name;if(!n.modifiersData[f]._skip){for(var v=s.mainAxis,y=v===void 0?!0:v,x=s.altAxis,C=x===void 0?!0:x,T=s.fallbackPlacements,U=s.padding,P=s.boundary,V=s.rootBoundary,Q=s.altBoundary,K=s.flipVariations,J=K===void 0?!0:K,ee=s.allowedAutoPlacements,j=n.options.placement,te=Zn(j),Ce=te===j,Se=T||(Ce||!J?[Ca(j)]:dy(j)),ce=[j].concat(Se).reduce(function(Pn,bt){return Pn.concat(Zn(bt)===Na?cy(n,{placement:bt,boundary:P,rootBoundary:V,padding:U,flipVariations:J,allowedAutoPlacements:ee}):bt)},[]),_e=n.rects.reference,ne=n.rects.popper,be=new Map,Be=!0,Ue=ce[0],Ye=0;Ye<ce.length;Ye++){var Ze=ce[Ye],ke=Zn(Ze),Ve=dr(Ze)===Ts,kt=[Wt,an].indexOf(ke)>=0,Vt=kt?"width":"height",Je=fr(n,{placement:Ze,boundary:P,rootBoundary:V,altBoundary:Q,padding:U}),He=kt?Ve?ln:Ut:Ve?an:Wt;_e[Vt]>ne[Vt]&&(He=Ca(He));var Nt=Ca(He),En=[];if(y&&En.push(Je[ke]<=0),C&&En.push(Je[He]<=0,Je[Nt]<=0),En.every(function(Pn){return Pn})){Ue=Ze,Be=!1;break}be.set(Ze,En)}if(Be)for(var wn=J?3:1,St=function(bt){var en=ce.find(function(Si){var Ge=be.get(Si);if(Ge)return Ge.slice(0,bt).every(function(xn){return xn})});if(en)return Ue=en,"break"},ti=wn;ti>0;ti--){var Ti=St(ti);if(Ti==="break")break}n.placement!==Ue&&(n.modifiersData[f]._skip=!0,n.placement=Ue,n.reset=!0)}}const Gf={name:"flip",enabled:!0,phase:"main",fn:fy,requiresIfExists:["offset"],data:{_skip:!1}};function Gd(u,n,s){return s===void 0&&(s={x:0,y:0}),{top:u.top-n.height-s.y,right:u.right-n.width+s.x,bottom:u.bottom-n.height+s.y,left:u.left-n.width-s.x}}function jd(u){return[Wt,ln,an,Ut].some(function(n){return u[n]>=0})}function py(u){var n=u.state,s=u.name,f=n.rects.reference,v=n.rects.popper,y=n.modifiersData.preventOverflow,x=fr(n,{elementContext:"reference"}),C=fr(n,{altBoundary:!0}),T=Gd(x,f),U=Gd(C,v,y),P=jd(T),V=jd(U);n.modifiersData[s]={referenceClippingOffsets:T,popperEscapeOffsets:U,isReferenceHidden:P,hasPopperEscaped:V},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":P,"data-popper-escaped":V})}const jf={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:py};function hy(u,n,s){var f=Zn(u),v=[Ut,Wt].indexOf(f)>=0?-1:1,y=typeof s=="function"?s(Object.assign({},n,{placement:u})):s,x=y[0],C=y[1];return x=x||0,C=(C||0)*v,[Ut,ln].indexOf(f)>=0?{x:C,y:x}:{x,y:C}}function _y(u){var n=u.state,s=u.options,f=u.name,v=s.offset,y=v===void 0?[0,0]:v,x=qu.reduce(function(P,V){return P[V]=hy(V,n.rects,y),P},{}),C=x[n.placement],T=C.x,U=C.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=T,n.modifiersData.popperOffsets.y+=U),n.modifiersData[f]=x}const Qf={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:_y};function vy(u){var n=u.state,s=u.name;n.modifiersData[s]=Yf({reference:n.rects.reference,element:n.rects.popper,placement:n.placement})}const ju={name:"popperOffsets",enabled:!0,phase:"read",fn:vy,data:{}};function my(u){return u==="x"?"y":"x"}function gy(u){var n=u.state,s=u.options,f=u.name,v=s.mainAxis,y=v===void 0?!0:v,x=s.altAxis,C=x===void 0?!1:x,T=s.boundary,U=s.rootBoundary,P=s.altBoundary,V=s.padding,Q=s.tether,K=Q===void 0?!0:Q,J=s.tetherOffset,ee=J===void 0?0:J,j=fr(n,{boundary:T,rootBoundary:U,padding:V,altBoundary:P}),te=Zn(n.placement),Ce=dr(n.placement),Se=!Ce,ce=Vu(te),_e=my(ce),ne=n.modifiersData.popperOffsets,be=n.rects.reference,Be=n.rects.popper,Ue=typeof ee=="function"?ee(Object.assign({},n.rects,{placement:n.placement})):ee,Ye=typeof Ue=="number"?{mainAxis:Ue,altAxis:Ue}:Object.assign({mainAxis:0,altAxis:0},Ue),Ze=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,ke={x:0,y:0};if(ne){if(y){var Ve,kt=ce==="y"?Wt:Ut,Vt=ce==="y"?an:ln,Je=ce==="y"?"height":"width",He=ne[ce],Nt=He+j[kt],En=He-j[Vt],wn=K?-Be[Je]/2:0,St=Ce===Ts?be[Je]:Be[Je],ti=Ce===Ts?-Be[Je]:-be[Je],Ti=n.elements.arrow,Pn=K&&Ti?Uu(Ti):{width:0,height:0},bt=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:Uf(),en=bt[kt],Si=bt[Vt],Ge=uo(0,be[Je],Pn[Je]),xn=Se?be[Je]/2-wn-Ge-en-Ye.mainAxis:St-Ge-en-Ye.mainAxis,Ii=Se?-be[Je]/2+wn+Ge+Si+Ye.mainAxis:ti+Ge+Si+Ye.mainAxis,Rn=n.elements.arrow&&ho(n.elements.arrow),ni=Rn?ce==="y"?Rn.clientTop||0:Rn.clientLeft||0:0,Oi=(Ve=Ze?.[ce])!=null?Ve:0,et=He+xn-Oi-ni,Le=He+Ii-Oi,yt=uo(K?Ia(Nt,et):Nt,He,K?Cs(En,Le):En);ne[ce]=yt,ke[ce]=yt-He}if(C){var Qe,Ht=ce==="x"?Wt:Ut,br=ce==="x"?an:ln,ft=ne[_e],vt=_e==="y"?"height":"width",Lt=ft+j[Ht],ii=ft-j[br],Ji=[Wt,Ut].indexOf(te)!==-1,zt=(Qe=Ze?.[_e])!=null?Qe:0,An=Ji?Lt:ft-be[vt]-Be[vt]-zt+Ye.altAxis,at=Ji?ft+be[vt]+Be[vt]-zt-Ye.altAxis:ii,Cn=K&&Ji?jb(An,ft,at):uo(K?An:Lt,ft,K?at:ii);ne[_e]=Cn,ke[_e]=Cn-ft}n.modifiersData[f]=ke}}const Xf={name:"preventOverflow",enabled:!0,phase:"main",fn:gy,requiresIfExists:["offset"]};function by(u){return{scrollLeft:u.scrollLeft,scrollTop:u.scrollTop}}function yy(u){return u===un(u)||!mn(u)?Ku(u):by(u)}function Ey(u){var n=u.getBoundingClientRect(),s=ur(n.width)/u.offsetWidth||1,f=ur(n.height)/u.offsetHeight||1;return s!==1||f!==1}function wy(u,n,s){s===void 0&&(s=!1);var f=mn(n),v=mn(n)&&Ey(n),y=Qi(n),x=cr(u,v,s),C={scrollLeft:0,scrollTop:0},T={x:0,y:0};return(f||!f&&!s)&&((ei(n)!=="body"||Gu(y))&&(C=yy(n)),mn(n)?(T=cr(n,!0),T.x+=n.clientLeft,T.y+=n.clientTop):y&&(T.x=Yu(y))),{x:x.left+C.scrollLeft-T.x,y:x.top+C.scrollTop-T.y,width:x.width,height:x.height}}function xy(u){var n=new Map,s=new Set,f=[];u.forEach(function(y){n.set(y.name,y)});function v(y){s.add(y.name);var x=[].concat(y.requires||[],y.requiresIfExists||[]);x.forEach(function(C){if(!s.has(C)){var T=n.get(C);T&&v(T)}}),f.push(y)}return u.forEach(function(y){s.has(y.name)||v(y)}),f}function Ay(u){var n=xy(u);return qf.reduce(function(s,f){return s.concat(n.filter(function(v){return v.phase===f}))},[])}function Cy(u){var n;return function(){return n||(n=new Promise(function(s){Promise.resolve().then(function(){n=void 0,s(u())})})),n}}function Ty(u){var n=u.reduce(function(s,f){var v=s[f.name];return s[f.name]=v?Object.assign({},v,f,{options:Object.assign({},v.options,f.options),data:Object.assign({},v.data,f.data)}):f,s},{});return Object.keys(n).map(function(s){return n[s]})}var Qd={placement:"bottom",modifiers:[],strategy:"absolute"};function Xd(){for(var u=arguments.length,n=new Array(u),s=0;s<u;s++)n[s]=arguments[s];return!n.some(function(f){return!(f&&typeof f.getBoundingClientRect=="function")})}function $a(u){u===void 0&&(u={});var n=u,s=n.defaultModifiers,f=s===void 0?[]:s,v=n.defaultOptions,y=v===void 0?Qd:v;return function(C,T,U){U===void 0&&(U=y);var P={placement:"bottom",orderedModifiers:[],options:Object.assign({},Qd,y),modifiersData:{},elements:{reference:C,popper:T},attributes:{},styles:{}},V=[],Q=!1,K={state:P,setOptions:function(te){var Ce=typeof te=="function"?te(P.options):te;ee(),P.options=Object.assign({},y,P.options,Ce),P.scrollParents={reference:Ss(C)?co(C):C.contextElement?co(C.contextElement):[],popper:co(T)};var Se=Ay(Ty([].concat(f,P.options.modifiers)));return P.orderedModifiers=Se.filter(function(ce){return ce.enabled}),J(),K.update()},forceUpdate:function(){if(!Q){var te=P.elements,Ce=te.reference,Se=te.popper;if(Xd(Ce,Se)){P.rects={reference:wy(Ce,ho(Se),P.options.strategy==="fixed"),popper:Uu(Se)},P.reset=!1,P.placement=P.options.placement,P.orderedModifiers.forEach(function(Ye){return P.modifiersData[Ye.name]=Object.assign({},Ye.data)});for(var ce=0;ce<P.orderedModifiers.length;ce++){if(P.reset===!0){P.reset=!1,ce=-1;continue}var _e=P.orderedModifiers[ce],ne=_e.fn,be=_e.options,Be=be===void 0?{}:be,Ue=_e.name;typeof ne=="function"&&(P=ne({state:P,options:Be,name:Ue,instance:K})||P)}}}},update:Cy(function(){return new Promise(function(j){K.forceUpdate(),j(P)})}),destroy:function(){ee(),Q=!0}};if(!Xd(C,T))return K;K.setOptions(U).then(function(j){!Q&&U.onFirstUpdate&&U.onFirstUpdate(j)});function J(){P.orderedModifiers.forEach(function(j){var te=j.name,Ce=j.options,Se=Ce===void 0?{}:Ce,ce=j.effect;if(typeof ce=="function"){var _e=ce({state:P,name:te,instance:K,options:Se}),ne=function(){};V.push(_e||ne)}})}function ee(){V.forEach(function(j){return j()}),V=[]}return K}}var Sy=$a(),Iy=[zu,ju,Hu,Wu],Oy=$a({defaultModifiers:Iy}),Dy=[zu,ju,Hu,Wu,Qf,Gf,Xf,zf,jf],Qu=$a({defaultModifiers:Dy});const Zf=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Mf,afterRead:Nf,afterWrite:Ff,applyStyles:Wu,arrow:zf,auto:Na,basePlacements:_r,beforeMain:Lf,beforeRead:Df,beforeWrite:Pf,bottom:an,clippingParents:If,computeStyles:Hu,createPopper:Qu,createPopperBase:Sy,createPopperLite:Oy,detectOverflow:fr,end:lr,eventListeners:zu,flip:Gf,hide:jf,left:Ut,main:$f,modifierPhases:qf,offset:Qf,placements:qu,popper:sr,popperGenerator:$a,popperOffsets:ju,preventOverflow:Xf,read:kf,reference:Of,right:ln,start:Ts,top:Wt,variationPlacements:ku,viewport:Fu,write:Rf},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const zi=new Map,_u={set(u,n,s){zi.has(u)||zi.set(u,new Map);const f=zi.get(u);if(!f.has(n)&&f.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(f.keys())[0]}.`);return}f.set(n,s)},get(u,n){return zi.has(u)&&zi.get(u).get(n)||null},remove(u,n){if(!zi.has(u))return;const s=zi.get(u);s.delete(n),s.size===0&&zi.delete(u)}},ky=1e6,Ny=1e3,$u="transitionend",Jf=u=>(u&&window.CSS&&window.CSS.escape&&(u=u.replace(/#([^\s"#']+)/g,(n,s)=>`#${CSS.escape(s)}`)),u),Ly=u=>u==null?`${u}`:Object.prototype.toString.call(u).match(/\s([a-z]+)/i)[1].toLowerCase(),$y=u=>{do u+=Math.floor(Math.random()*ky);while(document.getElementById(u));return u},My=u=>{if(!u)return 0;let{transitionDuration:n,transitionDelay:s}=window.getComputedStyle(u);const f=Number.parseFloat(n),v=Number.parseFloat(s);return!f&&!v?0:(n=n.split(",")[0],s=s.split(",")[0],(Number.parseFloat(n)+Number.parseFloat(s))*Ny)},ep=u=>{u.dispatchEvent(new Event($u))},wi=u=>!u||typeof u!="object"?!1:(typeof u.jquery<"u"&&(u=u[0]),typeof u.nodeType<"u"),Yi=u=>wi(u)?u.jquery?u[0]:u:typeof u=="string"&&u.length>0?document.querySelector(Jf(u)):null,vr=u=>{if(!wi(u)||u.getClientRects().length===0)return!1;const n=getComputedStyle(u).getPropertyValue("visibility")==="visible",s=u.closest("details:not([open])");if(!s)return n;if(s!==u){const f=u.closest("summary");if(f&&f.parentNode!==s||f===null)return!1}return n},Gi=u=>!u||u.nodeType!==Node.ELEMENT_NODE||u.classList.contains("disabled")?!0:typeof u.disabled<"u"?u.disabled:u.hasAttribute("disabled")&&u.getAttribute("disabled")!=="false",tp=u=>{if(!document.documentElement.attachShadow)return null;if(typeof u.getRootNode=="function"){const n=u.getRootNode();return n instanceof ShadowRoot?n:null}return u instanceof ShadowRoot?u:u.parentNode?tp(u.parentNode):null},Oa=()=>{},_o=u=>{u.offsetHeight},np=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,vu=[],Py=u=>{document.readyState==="loading"?(vu.length||document.addEventListener("DOMContentLoaded",()=>{for(const n of vu)n()}),vu.push(u)):u()},gn=()=>document.documentElement.dir==="rtl",yn=u=>{Py(()=>{const n=np();if(n){const s=u.NAME,f=n.fn[s];n.fn[s]=u.jQueryInterface,n.fn[s].Constructor=u,n.fn[s].noConflict=()=>(n.fn[s]=f,u.jQueryInterface)}})},Jt=(u,n=[],s=u)=>typeof u=="function"?u.call(...n):s,ip=(u,n,s=!0)=>{if(!s){Jt(u);return}const v=My(n)+5;let y=!1;const x=({target:C})=>{C===n&&(y=!0,n.removeEventListener($u,x),Jt(u))};n.addEventListener($u,x),setTimeout(()=>{y||ep(n)},v)},Xu=(u,n,s,f)=>{const v=u.length;let y=u.indexOf(n);return y===-1?!s&&f?u[v-1]:u[0]:(y+=s?1:-1,f&&(y=(y+v)%v),u[Math.max(0,Math.min(y,v-1))])},Ry=/[^.]*(?=\..*)\.|.*/,Fy=/\..*/,qy=/::\d+$/,mu={};let Zd=1;const sp={mouseenter:"mouseover",mouseleave:"mouseout"},By=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function rp(u,n){return n&&`${n}::${Zd++}`||u.uidEvent||Zd++}function op(u){const n=rp(u);return u.uidEvent=n,mu[n]=mu[n]||{},mu[n]}function Wy(u,n){return function s(f){return Zu(f,{delegateTarget:u}),s.oneOff&&F.off(u,f.type,n),n.apply(u,[f])}}function Uy(u,n,s){return function f(v){const y=u.querySelectorAll(n);for(let{target:x}=v;x&&x!==this;x=x.parentNode)for(const C of y)if(C===x)return Zu(v,{delegateTarget:x}),f.oneOff&&F.off(u,v.type,n,s),s.apply(x,[v])}}function ap(u,n,s=null){return Object.values(u).find(f=>f.callable===n&&f.delegationSelector===s)}function lp(u,n,s){const f=typeof n=="string",v=f?s:n||s;let y=up(u);return By.has(y)||(y=u),[f,v,y]}function Jd(u,n,s,f,v){if(typeof n!="string"||!u)return;let[y,x,C]=lp(n,s,f);n in sp&&(x=(J=>function(ee){if(!ee.relatedTarget||ee.relatedTarget!==ee.delegateTarget&&!ee.delegateTarget.contains(ee.relatedTarget))return J.call(this,ee)})(x));const T=op(u),U=T[C]||(T[C]={}),P=ap(U,x,y?s:null);if(P){P.oneOff=P.oneOff&&v;return}const V=rp(x,n.replace(Ry,"")),Q=y?Uy(u,s,x):Wy(u,x);Q.delegationSelector=y?s:null,Q.callable=x,Q.oneOff=v,Q.uidEvent=V,U[V]=Q,u.addEventListener(C,Q,y)}function Mu(u,n,s,f,v){const y=ap(n[s],f,v);y&&(u.removeEventListener(s,y,!!v),delete n[s][y.uidEvent])}function Vy(u,n,s,f){const v=n[s]||{};for(const[y,x]of Object.entries(v))y.includes(f)&&Mu(u,n,s,x.callable,x.delegationSelector)}function up(u){return u=u.replace(Fy,""),sp[u]||u}const F={on(u,n,s,f){Jd(u,n,s,f,!1)},one(u,n,s,f){Jd(u,n,s,f,!0)},off(u,n,s,f){if(typeof n!="string"||!u)return;const[v,y,x]=lp(n,s,f),C=x!==n,T=op(u),U=T[x]||{},P=n.startsWith(".");if(typeof y<"u"){if(!Object.keys(U).length)return;Mu(u,T,x,y,v?s:null);return}if(P)for(const V of Object.keys(T))Vy(u,T,V,n.slice(1));for(const[V,Q]of Object.entries(U)){const K=V.replace(qy,"");(!C||n.includes(K))&&Mu(u,T,x,Q.callable,Q.delegationSelector)}},trigger(u,n,s){if(typeof n!="string"||!u)return null;const f=np(),v=up(n),y=n!==v;let x=null,C=!0,T=!0,U=!1;y&&f&&(x=f.Event(n,s),f(u).trigger(x),C=!x.isPropagationStopped(),T=!x.isImmediatePropagationStopped(),U=x.isDefaultPrevented());const P=Zu(new Event(n,{bubbles:C,cancelable:!0}),s);return U&&P.preventDefault(),T&&u.dispatchEvent(P),P.defaultPrevented&&x&&x.preventDefault(),P}};function Zu(u,n={}){for(const[s,f]of Object.entries(n))try{u[s]=f}catch{Object.defineProperty(u,s,{configurable:!0,get(){return f}})}return u}function ef(u){if(u==="true")return!0;if(u==="false")return!1;if(u===Number(u).toString())return Number(u);if(u===""||u==="null")return null;if(typeof u!="string")return u;try{return JSON.parse(decodeURIComponent(u))}catch{return u}}function gu(u){return u.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}const xi={setDataAttribute(u,n,s){u.setAttribute(`data-bs-${gu(n)}`,s)},removeDataAttribute(u,n){u.removeAttribute(`data-bs-${gu(n)}`)},getDataAttributes(u){if(!u)return{};const n={},s=Object.keys(u.dataset).filter(f=>f.startsWith("bs")&&!f.startsWith("bsConfig"));for(const f of s){let v=f.replace(/^bs/,"");v=v.charAt(0).toLowerCase()+v.slice(1),n[v]=ef(u.dataset[f])}return n},getDataAttribute(u,n){return ef(u.getAttribute(`data-bs-${gu(n)}`))}};class vo{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(n){return n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n}_mergeConfigObj(n,s){const f=wi(s)?xi.getDataAttribute(s,"config"):{};return{...this.constructor.Default,...typeof f=="object"?f:{},...wi(s)?xi.getDataAttributes(s):{},...typeof n=="object"?n:{}}}_typeCheckConfig(n,s=this.constructor.DefaultType){for(const[f,v]of Object.entries(s)){const y=n[f],x=wi(y)?"element":Ly(y);if(!new RegExp(v).test(x))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${f}" provided type "${x}" but expected type "${v}".`)}}}const Hy="5.3.8";class Mn extends vo{constructor(n,s){super(),n=Yi(n),n&&(this._element=n,this._config=this._getConfig(s),_u.set(this._element,this.constructor.DATA_KEY,this))}dispose(){_u.remove(this._element,this.constructor.DATA_KEY),F.off(this._element,this.constructor.EVENT_KEY);for(const n of Object.getOwnPropertyNames(this))this[n]=null}_queueCallback(n,s,f=!0){ip(n,s,f)}_getConfig(n){return n=this._mergeConfigObj(n,this._element),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}static getInstance(n){return _u.get(Yi(n),this.DATA_KEY)}static getOrCreateInstance(n,s={}){return this.getInstance(n)||new this(n,typeof s=="object"?s:null)}static get VERSION(){return Hy}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(n){return`${n}${this.EVENT_KEY}`}}const bu=u=>{let n=u.getAttribute("data-bs-target");if(!n||n==="#"){let s=u.getAttribute("href");if(!s||!s.includes("#")&&!s.startsWith("."))return null;s.includes("#")&&!s.startsWith("#")&&(s=`#${s.split("#")[1]}`),n=s&&s!=="#"?s.trim():null}return n?n.split(",").map(s=>Jf(s)).join(","):null},Z={find(u,n=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(n,u))},findOne(u,n=document.documentElement){return Element.prototype.querySelector.call(n,u)},children(u,n){return[].concat(...u.children).filter(s=>s.matches(n))},parents(u,n){const s=[];let f=u.parentNode.closest(n);for(;f;)s.push(f),f=f.parentNode.closest(n);return s},prev(u,n){let s=u.previousElementSibling;for(;s;){if(s.matches(n))return[s];s=s.previousElementSibling}return[]},next(u,n){let s=u.nextElementSibling;for(;s;){if(s.matches(n))return[s];s=s.nextElementSibling}return[]},focusableChildren(u){const n=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(s=>`${s}:not([tabindex^="-"])`).join(",");return this.find(n,u).filter(s=>!Gi(s)&&vr(s))},getSelectorFromElement(u){const n=bu(u);return n&&Z.findOne(n)?n:null},getElementFromSelector(u){const n=bu(u);return n?Z.findOne(n):null},getMultipleElementsFromSelector(u){const n=bu(u);return n?Z.find(n):[]}},Ma=(u,n="hide")=>{const s=`click.dismiss${u.EVENT_KEY}`,f=u.NAME;F.on(document,s,`[data-bs-dismiss="${f}"]`,function(v){if(["A","AREA"].includes(this.tagName)&&v.preventDefault(),Gi(this))return;const y=Z.getElementFromSelector(this)||this.closest(`.${f}`);u.getOrCreateInstance(y)[n]()})},zy="alert",Ky="bs.alert",cp=`.${Ky}`,Yy=`close${cp}`,Gy=`closed${cp}`,jy="fade",Qy="show";class Pa extends Mn{static get NAME(){return zy}close(){if(F.trigger(this._element,Yy).defaultPrevented)return;this._element.classList.remove(Qy);const s=this._element.classList.contains(jy);this._queueCallback(()=>this._destroyElement(),this._element,s)}_destroyElement(){this._element.remove(),F.trigger(this._element,Gy),this.dispose()}static jQueryInterface(n){return this.each(function(){const s=Pa.getOrCreateInstance(this);if(typeof n=="string"){if(s[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);s[n](this)}})}}Ma(Pa,"close");yn(Pa);const Xy="button",Zy="bs.button",Jy=`.${Zy}`,e0=".data-api",t0="active",tf='[data-bs-toggle="button"]',n0=`click${Jy}${e0}`;class Ra extends Mn{static get NAME(){return Xy}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(t0))}static jQueryInterface(n){return this.each(function(){const s=Ra.getOrCreateInstance(this);n==="toggle"&&s[n]()})}}F.on(document,n0,tf,u=>{u.preventDefault();const n=u.target.closest(tf);Ra.getOrCreateInstance(n).toggle()});yn(Ra);const i0="swipe",mr=".bs.swipe",s0=`touchstart${mr}`,r0=`touchmove${mr}`,o0=`touchend${mr}`,a0=`pointerdown${mr}`,l0=`pointerup${mr}`,u0="touch",c0="pen",d0="pointer-event",f0=40,p0={endCallback:null,leftCallback:null,rightCallback:null},h0={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Da extends vo{constructor(n,s){super(),this._element=n,!(!n||!Da.isSupported())&&(this._config=this._getConfig(s),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return p0}static get DefaultType(){return h0}static get NAME(){return i0}dispose(){F.off(this._element,mr)}_start(n){if(!this._supportPointerEvents){this._deltaX=n.touches[0].clientX;return}this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX)}_end(n){this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX-this._deltaX),this._handleSwipe(),Jt(this._config.endCallback)}_move(n){this._deltaX=n.touches&&n.touches.length>1?0:n.touches[0].clientX-this._deltaX}_handleSwipe(){const n=Math.abs(this._deltaX);if(n<=f0)return;const s=n/this._deltaX;this._deltaX=0,s&&Jt(s>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(F.on(this._element,a0,n=>this._start(n)),F.on(this._element,l0,n=>this._end(n)),this._element.classList.add(d0)):(F.on(this._element,s0,n=>this._start(n)),F.on(this._element,r0,n=>this._move(n)),F.on(this._element,o0,n=>this._end(n)))}_eventIsPointerPenTouch(n){return this._supportPointerEvents&&(n.pointerType===c0||n.pointerType===u0)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const _0="carousel",v0="bs.carousel",Xi=`.${v0}`,dp=".data-api",m0="ArrowLeft",g0="ArrowRight",b0=500,oo="next",nr="prev",rr="left",Ta="right",y0=`slide${Xi}`,yu=`slid${Xi}`,E0=`keydown${Xi}`,w0=`mouseenter${Xi}`,x0=`mouseleave${Xi}`,A0=`dragstart${Xi}`,C0=`load${Xi}${dp}`,T0=`click${Xi}${dp}`,fp="carousel",ba="active",S0="slide",I0="carousel-item-end",O0="carousel-item-start",D0="carousel-item-next",k0="carousel-item-prev",pp=".active",hp=".carousel-item",N0=pp+hp,L0=".carousel-item img",$0=".carousel-indicators",M0="[data-bs-slide], [data-bs-slide-to]",P0='[data-bs-ride="carousel"]',R0={[m0]:Ta,[g0]:rr},F0={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},q0={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class mo extends Mn{constructor(n,s){super(n,s),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Z.findOne($0,this._element),this._addEventListeners(),this._config.ride===fp&&this.cycle()}static get Default(){return F0}static get DefaultType(){return q0}static get NAME(){return _0}next(){this._slide(oo)}nextWhenVisible(){!document.hidden&&vr(this._element)&&this.next()}prev(){this._slide(nr)}pause(){this._isSliding&&ep(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){F.one(this._element,yu,()=>this.cycle());return}this.cycle()}}to(n){const s=this._getItems();if(n>s.length-1||n<0)return;if(this._isSliding){F.one(this._element,yu,()=>this.to(n));return}const f=this._getItemIndex(this._getActive());if(f===n)return;const v=n>f?oo:nr;this._slide(v,s[n])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(n){return n.defaultInterval=n.interval,n}_addEventListeners(){this._config.keyboard&&F.on(this._element,E0,n=>this._keydown(n)),this._config.pause==="hover"&&(F.on(this._element,w0,()=>this.pause()),F.on(this._element,x0,()=>this._maybeEnableCycle())),this._config.touch&&Da.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const f of Z.find(L0,this._element))F.on(f,A0,v=>v.preventDefault());const s={leftCallback:()=>this._slide(this._directionToOrder(rr)),rightCallback:()=>this._slide(this._directionToOrder(Ta)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),b0+this._config.interval))}};this._swipeHelper=new Da(this._element,s)}_keydown(n){if(/input|textarea/i.test(n.target.tagName))return;const s=R0[n.key];s&&(n.preventDefault(),this._slide(this._directionToOrder(s)))}_getItemIndex(n){return this._getItems().indexOf(n)}_setActiveIndicatorElement(n){if(!this._indicatorsElement)return;const s=Z.findOne(pp,this._indicatorsElement);s.classList.remove(ba),s.removeAttribute("aria-current");const f=Z.findOne(`[data-bs-slide-to="${n}"]`,this._indicatorsElement);f&&(f.classList.add(ba),f.setAttribute("aria-current","true"))}_updateInterval(){const n=this._activeElement||this._getActive();if(!n)return;const s=Number.parseInt(n.getAttribute("data-bs-interval"),10);this._config.interval=s||this._config.defaultInterval}_slide(n,s=null){if(this._isSliding)return;const f=this._getActive(),v=n===oo,y=s||Xu(this._getItems(),f,v,this._config.wrap);if(y===f)return;const x=this._getItemIndex(y),C=K=>F.trigger(this._element,K,{relatedTarget:y,direction:this._orderToDirection(n),from:this._getItemIndex(f),to:x});if(C(y0).defaultPrevented||!f||!y)return;const U=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(x),this._activeElement=y;const P=v?O0:I0,V=v?D0:k0;y.classList.add(V),_o(y),f.classList.add(P),y.classList.add(P);const Q=()=>{y.classList.remove(P,V),y.classList.add(ba),f.classList.remove(ba,V,P),this._isSliding=!1,C(yu)};this._queueCallback(Q,f,this._isAnimated()),U&&this.cycle()}_isAnimated(){return this._element.classList.contains(S0)}_getActive(){return Z.findOne(N0,this._element)}_getItems(){return Z.find(hp,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(n){return gn()?n===rr?nr:oo:n===rr?oo:nr}_orderToDirection(n){return gn()?n===nr?rr:Ta:n===nr?Ta:rr}static jQueryInterface(n){return this.each(function(){const s=mo.getOrCreateInstance(this,n);if(typeof n=="number"){s.to(n);return}if(typeof n=="string"){if(s[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);s[n]()}})}}F.on(document,T0,M0,function(u){const n=Z.getElementFromSelector(this);if(!n||!n.classList.contains(fp))return;u.preventDefault();const s=mo.getOrCreateInstance(n),f=this.getAttribute("data-bs-slide-to");if(f){s.to(f),s._maybeEnableCycle();return}if(xi.getDataAttribute(this,"slide")==="next"){s.next(),s._maybeEnableCycle();return}s.prev(),s._maybeEnableCycle()});F.on(window,C0,()=>{const u=Z.find(P0);for(const n of u)mo.getOrCreateInstance(n)});yn(mo);const B0="collapse",W0="bs.collapse",go=`.${W0}`,U0=".data-api",V0=`show${go}`,H0=`shown${go}`,z0=`hide${go}`,K0=`hidden${go}`,Y0=`click${go}${U0}`,Eu="show",ar="collapse",ya="collapsing",G0="collapsed",j0=`:scope .${ar} .${ar}`,Q0="collapse-horizontal",X0="width",Z0="height",J0=".collapse.show, .collapse.collapsing",Pu='[data-bs-toggle="collapse"]',e1={parent:null,toggle:!0},t1={parent:"(null|element)",toggle:"boolean"};class po extends Mn{constructor(n,s){super(n,s),this._isTransitioning=!1,this._triggerArray=[];const f=Z.find(Pu);for(const v of f){const y=Z.getSelectorFromElement(v),x=Z.find(y).filter(C=>C===this._element);y!==null&&x.length&&this._triggerArray.push(v)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return e1}static get DefaultType(){return t1}static get NAME(){return B0}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let n=[];if(this._config.parent&&(n=this._getFirstLevelChildren(J0).filter(C=>C!==this._element).map(C=>po.getOrCreateInstance(C,{toggle:!1}))),n.length&&n[0]._isTransitioning||F.trigger(this._element,V0).defaultPrevented)return;for(const C of n)C.hide();const f=this._getDimension();this._element.classList.remove(ar),this._element.classList.add(ya),this._element.style[f]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const v=()=>{this._isTransitioning=!1,this._element.classList.remove(ya),this._element.classList.add(ar,Eu),this._element.style[f]="",F.trigger(this._element,H0)},x=`scroll${f[0].toUpperCase()+f.slice(1)}`;this._queueCallback(v,this._element,!0),this._element.style[f]=`${this._element[x]}px`}hide(){if(this._isTransitioning||!this._isShown()||F.trigger(this._element,z0).defaultPrevented)return;const s=this._getDimension();this._element.style[s]=`${this._element.getBoundingClientRect()[s]}px`,_o(this._element),this._element.classList.add(ya),this._element.classList.remove(ar,Eu);for(const v of this._triggerArray){const y=Z.getElementFromSelector(v);y&&!this._isShown(y)&&this._addAriaAndCollapsedClass([v],!1)}this._isTransitioning=!0;const f=()=>{this._isTransitioning=!1,this._element.classList.remove(ya),this._element.classList.add(ar),F.trigger(this._element,K0)};this._element.style[s]="",this._queueCallback(f,this._element,!0)}_isShown(n=this._element){return n.classList.contains(Eu)}_configAfterMerge(n){return n.toggle=!!n.toggle,n.parent=Yi(n.parent),n}_getDimension(){return this._element.classList.contains(Q0)?X0:Z0}_initializeChildren(){if(!this._config.parent)return;const n=this._getFirstLevelChildren(Pu);for(const s of n){const f=Z.getElementFromSelector(s);f&&this._addAriaAndCollapsedClass([s],this._isShown(f))}}_getFirstLevelChildren(n){const s=Z.find(j0,this._config.parent);return Z.find(n,this._config.parent).filter(f=>!s.includes(f))}_addAriaAndCollapsedClass(n,s){if(n.length)for(const f of n)f.classList.toggle(G0,!s),f.setAttribute("aria-expanded",s)}static jQueryInterface(n){const s={};return typeof n=="string"&&/show|hide/.test(n)&&(s.toggle=!1),this.each(function(){const f=po.getOrCreateInstance(this,s);if(typeof n=="string"){if(typeof f[n]>"u")throw new TypeError(`No method named "${n}"`);f[n]()}})}}F.on(document,Y0,Pu,function(u){(u.target.tagName==="A"||u.delegateTarget&&u.delegateTarget.tagName==="A")&&u.preventDefault();for(const n of Z.getMultipleElementsFromSelector(this))po.getOrCreateInstance(n,{toggle:!1}).toggle()});yn(po);const nf="dropdown",n1="bs.dropdown",Is=`.${n1}`,Ju=".data-api",i1="Escape",sf="Tab",s1="ArrowUp",rf="ArrowDown",r1=2,o1=`hide${Is}`,a1=`hidden${Is}`,l1=`show${Is}`,u1=`shown${Is}`,_p=`click${Is}${Ju}`,vp=`keydown${Is}${Ju}`,c1=`keyup${Is}${Ju}`,or="show",d1="dropup",f1="dropend",p1="dropstart",h1="dropup-center",_1="dropdown-center",xs='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',v1=`${xs}.${or}`,Sa=".dropdown-menu",m1=".navbar",g1=".navbar-nav",b1=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",y1=gn()?"top-end":"top-start",E1=gn()?"top-start":"top-end",w1=gn()?"bottom-end":"bottom-start",x1=gn()?"bottom-start":"bottom-end",A1=gn()?"left-start":"right-start",C1=gn()?"right-start":"left-start",T1="top",S1="bottom",I1={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},O1={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Jn extends Mn{constructor(n,s){super(n,s),this._popper=null,this._parent=this._element.parentNode,this._menu=Z.next(this._element,Sa)[0]||Z.prev(this._element,Sa)[0]||Z.findOne(Sa,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return I1}static get DefaultType(){return O1}static get NAME(){return nf}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Gi(this._element)||this._isShown())return;const n={relatedTarget:this._element};if(!F.trigger(this._element,l1,n).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(g1))for(const f of[].concat(...document.body.children))F.on(f,"mouseover",Oa);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(or),this._element.classList.add(or),F.trigger(this._element,u1,n)}}hide(){if(Gi(this._element)||!this._isShown())return;const n={relatedTarget:this._element};this._completeHide(n)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(n){if(!F.trigger(this._element,o1,n).defaultPrevented){if("ontouchstart"in document.documentElement)for(const f of[].concat(...document.body.children))F.off(f,"mouseover",Oa);this._popper&&this._popper.destroy(),this._menu.classList.remove(or),this._element.classList.remove(or),this._element.setAttribute("aria-expanded","false"),xi.removeDataAttribute(this._menu,"popper"),F.trigger(this._element,a1,n)}}_getConfig(n){if(n=super._getConfig(n),typeof n.reference=="object"&&!wi(n.reference)&&typeof n.reference.getBoundingClientRect!="function")throw new TypeError(`${nf.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return n}_createPopper(){if(typeof Zf>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let n=this._element;this._config.reference==="parent"?n=this._parent:wi(this._config.reference)?n=Yi(this._config.reference):typeof this._config.reference=="object"&&(n=this._config.reference);const s=this._getPopperConfig();this._popper=Qu(n,this._menu,s)}_isShown(){return this._menu.classList.contains(or)}_getPlacement(){const n=this._parent;if(n.classList.contains(f1))return A1;if(n.classList.contains(p1))return C1;if(n.classList.contains(h1))return T1;if(n.classList.contains(_1))return S1;const s=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return n.classList.contains(d1)?s?E1:y1:s?x1:w1}_detectNavbar(){return this._element.closest(m1)!==null}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(s=>Number.parseInt(s,10)):typeof n=="function"?s=>n(s,this._element):n}_getPopperConfig(){const n={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(xi.setDataAttribute(this._menu,"popper","static"),n.modifiers=[{name:"applyStyles",enabled:!1}]),{...n,...Jt(this._config.popperConfig,[void 0,n])}}_selectMenuItem({key:n,target:s}){const f=Z.find(b1,this._menu).filter(v=>vr(v));f.length&&Xu(f,s,n===rf,!f.includes(s)).focus()}static jQueryInterface(n){return this.each(function(){const s=Jn.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof s[n]>"u")throw new TypeError(`No method named "${n}"`);s[n]()}})}static clearMenus(n){if(n.button===r1||n.type==="keyup"&&n.key!==sf)return;const s=Z.find(v1);for(const f of s){const v=Jn.getInstance(f);if(!v||v._config.autoClose===!1)continue;const y=n.composedPath(),x=y.includes(v._menu);if(y.includes(v._element)||v._config.autoClose==="inside"&&!x||v._config.autoClose==="outside"&&x||v._menu.contains(n.target)&&(n.type==="keyup"&&n.key===sf||/input|select|option|textarea|form/i.test(n.target.tagName)))continue;const C={relatedTarget:v._element};n.type==="click"&&(C.clickEvent=n),v._completeHide(C)}}static dataApiKeydownHandler(n){const s=/input|textarea/i.test(n.target.tagName),f=n.key===i1,v=[s1,rf].includes(n.key);if(!v&&!f||s&&!f)return;n.preventDefault();const y=this.matches(xs)?this:Z.prev(this,xs)[0]||Z.next(this,xs)[0]||Z.findOne(xs,n.delegateTarget.parentNode),x=Jn.getOrCreateInstance(y);if(v){n.stopPropagation(),x.show(),x._selectMenuItem(n);return}x._isShown()&&(n.stopPropagation(),x.hide(),y.focus())}}F.on(document,vp,xs,Jn.dataApiKeydownHandler);F.on(document,vp,Sa,Jn.dataApiKeydownHandler);F.on(document,_p,Jn.clearMenus);F.on(document,c1,Jn.clearMenus);F.on(document,_p,xs,function(u){u.preventDefault(),Jn.getOrCreateInstance(this).toggle()});yn(Jn);const mp="backdrop",D1="fade",of="show",af=`mousedown.bs.${mp}`,k1={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},N1={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class gp extends vo{constructor(n){super(),this._config=this._getConfig(n),this._isAppended=!1,this._element=null}static get Default(){return k1}static get DefaultType(){return N1}static get NAME(){return mp}show(n){if(!this._config.isVisible){Jt(n);return}this._append();const s=this._getElement();this._config.isAnimated&&_o(s),s.classList.add(of),this._emulateAnimation(()=>{Jt(n)})}hide(n){if(!this._config.isVisible){Jt(n);return}this._getElement().classList.remove(of),this._emulateAnimation(()=>{this.dispose(),Jt(n)})}dispose(){this._isAppended&&(F.off(this._element,af),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const n=document.createElement("div");n.className=this._config.className,this._config.isAnimated&&n.classList.add(D1),this._element=n}return this._element}_configAfterMerge(n){return n.rootElement=Yi(n.rootElement),n}_append(){if(this._isAppended)return;const n=this._getElement();this._config.rootElement.append(n),F.on(n,af,()=>{Jt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(n){ip(n,this._getElement(),this._config.isAnimated)}}const L1="focustrap",$1="bs.focustrap",ka=`.${$1}`,M1=`focusin${ka}`,P1=`keydown.tab${ka}`,R1="Tab",F1="forward",lf="backward",q1={autofocus:!0,trapElement:null},B1={autofocus:"boolean",trapElement:"element"};class bp extends vo{constructor(n){super(),this._config=this._getConfig(n),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return q1}static get DefaultType(){return B1}static get NAME(){return L1}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),F.off(document,ka),F.on(document,M1,n=>this._handleFocusin(n)),F.on(document,P1,n=>this._handleKeydown(n)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,F.off(document,ka))}_handleFocusin(n){const{trapElement:s}=this._config;if(n.target===document||n.target===s||s.contains(n.target))return;const f=Z.focusableChildren(s);f.length===0?s.focus():this._lastTabNavDirection===lf?f[f.length-1].focus():f[0].focus()}_handleKeydown(n){n.key===R1&&(this._lastTabNavDirection=n.shiftKey?lf:F1)}}const uf=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",cf=".sticky-top",Ea="padding-right",df="margin-right";class Ru{constructor(){this._element=document.body}getWidth(){const n=document.documentElement.clientWidth;return Math.abs(window.innerWidth-n)}hide(){const n=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ea,s=>s+n),this._setElementAttributes(uf,Ea,s=>s+n),this._setElementAttributes(cf,df,s=>s-n)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ea),this._resetElementAttributes(uf,Ea),this._resetElementAttributes(cf,df)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(n,s,f){const v=this.getWidth(),y=x=>{if(x!==this._element&&window.innerWidth>x.clientWidth+v)return;this._saveInitialAttribute(x,s);const C=window.getComputedStyle(x).getPropertyValue(s);x.style.setProperty(s,`${f(Number.parseFloat(C))}px`)};this._applyManipulationCallback(n,y)}_saveInitialAttribute(n,s){const f=n.style.getPropertyValue(s);f&&xi.setDataAttribute(n,s,f)}_resetElementAttributes(n,s){const f=v=>{const y=xi.getDataAttribute(v,s);if(y===null){v.style.removeProperty(s);return}xi.removeDataAttribute(v,s),v.style.setProperty(s,y)};this._applyManipulationCallback(n,f)}_applyManipulationCallback(n,s){if(wi(n)){s(n);return}for(const f of Z.find(n,this._element))s(f)}}const W1="modal",U1="bs.modal",bn=`.${U1}`,V1=".data-api",H1="Escape",z1=`hide${bn}`,K1=`hidePrevented${bn}`,yp=`hidden${bn}`,Ep=`show${bn}`,Y1=`shown${bn}`,G1=`resize${bn}`,j1=`click.dismiss${bn}`,Q1=`mousedown.dismiss${bn}`,X1=`keydown.dismiss${bn}`,Z1=`click${bn}${V1}`,ff="modal-open",J1="fade",pf="show",wu="modal-static",eE=".modal.show",tE=".modal-dialog",nE=".modal-body",iE='[data-bs-toggle="modal"]',sE={backdrop:!0,focus:!0,keyboard:!0},rE={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class pr extends Mn{constructor(n,s){super(n,s),this._dialog=Z.findOne(tE,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ru,this._addEventListeners()}static get Default(){return sE}static get DefaultType(){return rE}static get NAME(){return W1}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){this._isShown||this._isTransitioning||F.trigger(this._element,Ep,{relatedTarget:n}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ff),this._adjustDialog(),this._backdrop.show(()=>this._showElement(n)))}hide(){!this._isShown||this._isTransitioning||F.trigger(this._element,z1).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(pf),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){F.off(window,bn),F.off(this._dialog,bn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new gp({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new bp({trapElement:this._element})}_showElement(n){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const s=Z.findOne(nE,this._dialog);s&&(s.scrollTop=0),_o(this._element),this._element.classList.add(pf);const f=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,F.trigger(this._element,Y1,{relatedTarget:n})};this._queueCallback(f,this._dialog,this._isAnimated())}_addEventListeners(){F.on(this._element,X1,n=>{if(n.key===H1){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),F.on(window,G1,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),F.on(this._element,Q1,n=>{F.one(this._element,j1,s=>{if(!(this._element!==n.target||this._element!==s.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ff),this._resetAdjustments(),this._scrollBar.reset(),F.trigger(this._element,yp)})}_isAnimated(){return this._element.classList.contains(J1)}_triggerBackdropTransition(){if(F.trigger(this._element,K1).defaultPrevented)return;const s=this._element.scrollHeight>document.documentElement.clientHeight,f=this._element.style.overflowY;f==="hidden"||this._element.classList.contains(wu)||(s||(this._element.style.overflowY="hidden"),this._element.classList.add(wu),this._queueCallback(()=>{this._element.classList.remove(wu),this._queueCallback(()=>{this._element.style.overflowY=f},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const n=this._element.scrollHeight>document.documentElement.clientHeight,s=this._scrollBar.getWidth(),f=s>0;if(f&&!n){const v=gn()?"paddingLeft":"paddingRight";this._element.style[v]=`${s}px`}if(!f&&n){const v=gn()?"paddingRight":"paddingLeft";this._element.style[v]=`${s}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(n,s){return this.each(function(){const f=pr.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof f[n]>"u")throw new TypeError(`No method named "${n}"`);f[n](s)}})}}F.on(document,Z1,iE,function(u){const n=Z.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&u.preventDefault(),F.one(n,Ep,v=>{v.defaultPrevented||F.one(n,yp,()=>{vr(this)&&this.focus()})});const s=Z.findOne(eE);s&&pr.getInstance(s).hide(),pr.getOrCreateInstance(n).toggle(this)});Ma(pr);yn(pr);const oE="offcanvas",aE="bs.offcanvas",Ci=`.${aE}`,wp=".data-api",lE=`load${Ci}${wp}`,uE="Escape",hf="show",_f="showing",vf="hiding",cE="offcanvas-backdrop",xp=".offcanvas.show",dE=`show${Ci}`,fE=`shown${Ci}`,pE=`hide${Ci}`,mf=`hidePrevented${Ci}`,Ap=`hidden${Ci}`,hE=`resize${Ci}`,_E=`click${Ci}${wp}`,vE=`keydown.dismiss${Ci}`,mE='[data-bs-toggle="offcanvas"]',gE={backdrop:!0,keyboard:!0,scroll:!1},bE={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ji extends Mn{constructor(n,s){super(n,s),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return gE}static get DefaultType(){return bE}static get NAME(){return oE}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){if(this._isShown||F.trigger(this._element,dE,{relatedTarget:n}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ru().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(_f);const f=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(hf),this._element.classList.remove(_f),F.trigger(this._element,fE,{relatedTarget:n})};this._queueCallback(f,this._element,!0)}hide(){if(!this._isShown||F.trigger(this._element,pE).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(vf),this._backdrop.hide();const s=()=>{this._element.classList.remove(hf,vf),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ru().reset(),F.trigger(this._element,Ap)};this._queueCallback(s,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const n=()=>{if(this._config.backdrop==="static"){F.trigger(this._element,mf);return}this.hide()},s=!!this._config.backdrop;return new gp({className:cE,isVisible:s,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:s?n:null})}_initializeFocusTrap(){return new bp({trapElement:this._element})}_addEventListeners(){F.on(this._element,vE,n=>{if(n.key===uE){if(this._config.keyboard){this.hide();return}F.trigger(this._element,mf)}})}static jQueryInterface(n){return this.each(function(){const s=ji.getOrCreateInstance(this,n);if(typeof n=="string"){if(s[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);s[n](this)}})}}F.on(document,_E,mE,function(u){const n=Z.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&u.preventDefault(),Gi(this))return;F.one(n,Ap,()=>{vr(this)&&this.focus()});const s=Z.findOne(xp);s&&s!==n&&ji.getInstance(s).hide(),ji.getOrCreateInstance(n).toggle(this)});F.on(window,lE,()=>{for(const u of Z.find(xp))ji.getOrCreateInstance(u).show()});F.on(window,hE,()=>{for(const u of Z.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(u).position!=="fixed"&&ji.getOrCreateInstance(u).hide()});Ma(ji);yn(ji);const yE=/^aria-[\w-]*$/i,Cp={"*":["class","dir","id","lang","role",yE],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},EE=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),wE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,xE=(u,n)=>{const s=u.nodeName.toLowerCase();return n.includes(s)?EE.has(s)?!!wE.test(u.nodeValue):!0:n.filter(f=>f instanceof RegExp).some(f=>f.test(s))};function AE(u,n,s){if(!u.length)return u;if(s&&typeof s=="function")return s(u);const v=new window.DOMParser().parseFromString(u,"text/html"),y=[].concat(...v.body.querySelectorAll("*"));for(const x of y){const C=x.nodeName.toLowerCase();if(!Object.keys(n).includes(C)){x.remove();continue}const T=[].concat(...x.attributes),U=[].concat(n["*"]||[],n[C]||[]);for(const P of T)xE(P,U)||x.removeAttribute(P.nodeName)}return v.body.innerHTML}const CE="TemplateFactory",TE={allowList:Cp,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},SE={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},IE={entry:"(string|element|function|null)",selector:"(string|element)"};class OE extends vo{constructor(n){super(),this._config=this._getConfig(n)}static get Default(){return TE}static get DefaultType(){return SE}static get NAME(){return CE}getContent(){return Object.values(this._config.content).map(n=>this._resolvePossibleFunction(n)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(n){return this._checkContent(n),this._config.content={...this._config.content,...n},this}toHtml(){const n=document.createElement("div");n.innerHTML=this._maybeSanitize(this._config.template);for(const[v,y]of Object.entries(this._config.content))this._setContent(n,y,v);const s=n.children[0],f=this._resolvePossibleFunction(this._config.extraClass);return f&&s.classList.add(...f.split(" ")),s}_typeCheckConfig(n){super._typeCheckConfig(n),this._checkContent(n.content)}_checkContent(n){for(const[s,f]of Object.entries(n))super._typeCheckConfig({selector:s,entry:f},IE)}_setContent(n,s,f){const v=Z.findOne(f,n);if(v){if(s=this._resolvePossibleFunction(s),!s){v.remove();return}if(wi(s)){this._putElementInTemplate(Yi(s),v);return}if(this._config.html){v.innerHTML=this._maybeSanitize(s);return}v.textContent=s}}_maybeSanitize(n){return this._config.sanitize?AE(n,this._config.allowList,this._config.sanitizeFn):n}_resolvePossibleFunction(n){return Jt(n,[void 0,this])}_putElementInTemplate(n,s){if(this._config.html){s.innerHTML="",s.append(n);return}s.textContent=n.textContent}}const DE="tooltip",kE=new Set(["sanitize","allowList","sanitizeFn"]),xu="fade",NE="modal",wa="show",LE=".tooltip-inner",gf=`.${NE}`,bf="hide.bs.modal",ao="hover",Au="focus",Cu="click",$E="manual",ME="hide",PE="hidden",RE="show",FE="shown",qE="inserted",BE="click",WE="focusin",UE="focusout",VE="mouseenter",HE="mouseleave",zE={AUTO:"auto",TOP:"top",RIGHT:gn()?"left":"right",BOTTOM:"bottom",LEFT:gn()?"right":"left"},KE={allowList:Cp,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},YE={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class gr extends Mn{constructor(n,s){if(typeof Zf>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(n,s),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return KE}static get DefaultType(){return YE}static get NAME(){return DE}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),F.off(this._element.closest(gf),bf,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const n=F.trigger(this._element,this.constructor.eventName(RE)),f=(tp(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(n.defaultPrevented||!f)return;this._disposePopper();const v=this._getTipElement();this._element.setAttribute("aria-describedby",v.getAttribute("id"));const{container:y}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(y.append(v),F.trigger(this._element,this.constructor.eventName(qE))),this._popper=this._createPopper(v),v.classList.add(wa),"ontouchstart"in document.documentElement)for(const C of[].concat(...document.body.children))F.on(C,"mouseover",Oa);const x=()=>{F.trigger(this._element,this.constructor.eventName(FE)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(x,this.tip,this._isAnimated())}hide(){if(!this._isShown()||F.trigger(this._element,this.constructor.eventName(ME)).defaultPrevented)return;if(this._getTipElement().classList.remove(wa),"ontouchstart"in document.documentElement)for(const v of[].concat(...document.body.children))F.off(v,"mouseover",Oa);this._activeTrigger[Cu]=!1,this._activeTrigger[Au]=!1,this._activeTrigger[ao]=!1,this._isHovered=null;const f=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),F.trigger(this._element,this.constructor.eventName(PE)))};this._queueCallback(f,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(n){const s=this._getTemplateFactory(n).toHtml();if(!s)return null;s.classList.remove(xu,wa),s.classList.add(`bs-${this.constructor.NAME}-auto`);const f=$y(this.constructor.NAME).toString();return s.setAttribute("id",f),this._isAnimated()&&s.classList.add(xu),s}setContent(n){this._newContent=n,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(n){return this._templateFactory?this._templateFactory.changeContent(n):this._templateFactory=new OE({...this._config,content:n,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[LE]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(n){return this.constructor.getOrCreateInstance(n.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(xu)}_isShown(){return this.tip&&this.tip.classList.contains(wa)}_createPopper(n){const s=Jt(this._config.placement,[this,n,this._element]),f=zE[s.toUpperCase()];return Qu(this._element,n,this._getPopperConfig(f))}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(s=>Number.parseInt(s,10)):typeof n=="function"?s=>n(s,this._element):n}_resolvePossibleFunction(n){return Jt(n,[this._element,this._element])}_getPopperConfig(n){const s={placement:n,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:f=>{this._getTipElement().setAttribute("data-popper-placement",f.state.placement)}}]};return{...s,...Jt(this._config.popperConfig,[void 0,s])}}_setListeners(){const n=this._config.trigger.split(" ");for(const s of n)if(s==="click")F.on(this._element,this.constructor.eventName(BE),this._config.selector,f=>{const v=this._initializeOnDelegatedTarget(f);v._activeTrigger[Cu]=!(v._isShown()&&v._activeTrigger[Cu]),v.toggle()});else if(s!==$E){const f=s===ao?this.constructor.eventName(VE):this.constructor.eventName(WE),v=s===ao?this.constructor.eventName(HE):this.constructor.eventName(UE);F.on(this._element,f,this._config.selector,y=>{const x=this._initializeOnDelegatedTarget(y);x._activeTrigger[y.type==="focusin"?Au:ao]=!0,x._enter()}),F.on(this._element,v,this._config.selector,y=>{const x=this._initializeOnDelegatedTarget(y);x._activeTrigger[y.type==="focusout"?Au:ao]=x._element.contains(y.relatedTarget),x._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},F.on(this._element.closest(gf),bf,this._hideModalHandler)}_fixTitle(){const n=this._element.getAttribute("title");n&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",n),this._element.setAttribute("data-bs-original-title",n),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(n,s){clearTimeout(this._timeout),this._timeout=setTimeout(n,s)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(n){const s=xi.getDataAttributes(this._element);for(const f of Object.keys(s))kE.has(f)&&delete s[f];return n={...s,...typeof n=="object"&&n?n:{}},n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n.container=n.container===!1?document.body:Yi(n.container),typeof n.delay=="number"&&(n.delay={show:n.delay,hide:n.delay}),typeof n.title=="number"&&(n.title=n.title.toString()),typeof n.content=="number"&&(n.content=n.content.toString()),n}_getDelegateConfig(){const n={};for(const[s,f]of Object.entries(this._config))this.constructor.Default[s]!==f&&(n[s]=f);return n.selector=!1,n.trigger="manual",n}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(n){return this.each(function(){const s=gr.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof s[n]>"u")throw new TypeError(`No method named "${n}"`);s[n]()}})}}yn(gr);const GE="popover",jE=".popover-header",QE=".popover-body",XE={...gr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},ZE={...gr.DefaultType,content:"(null|string|element|function)"};class Fa extends gr{static get Default(){return XE}static get DefaultType(){return ZE}static get NAME(){return GE}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[jE]:this._getTitle(),[QE]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(n){return this.each(function(){const s=Fa.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof s[n]>"u")throw new TypeError(`No method named "${n}"`);s[n]()}})}}yn(Fa);const JE="scrollspy",ew="bs.scrollspy",ec=`.${ew}`,tw=".data-api",nw=`activate${ec}`,yf=`click${ec}`,iw=`load${ec}${tw}`,sw="dropdown-item",ir="active",rw='[data-bs-spy="scroll"]',Tu="[href]",ow=".nav, .list-group",Ef=".nav-link",aw=".nav-item",lw=".list-group-item",uw=`${Ef}, ${aw} > ${Ef}, ${lw}`,cw=".dropdown",dw=".dropdown-toggle",fw={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},pw={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class qa extends Mn{constructor(n,s){super(n,s),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return fw}static get DefaultType(){return pw}static get NAME(){return JE}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const n of this._observableSections.values())this._observer.observe(n)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(n){return n.target=Yi(n.target)||document.body,n.rootMargin=n.offset?`${n.offset}px 0px -30%`:n.rootMargin,typeof n.threshold=="string"&&(n.threshold=n.threshold.split(",").map(s=>Number.parseFloat(s))),n}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(F.off(this._config.target,yf),F.on(this._config.target,yf,Tu,n=>{const s=this._observableSections.get(n.target.hash);if(s){n.preventDefault();const f=this._rootElement||window,v=s.offsetTop-this._element.offsetTop;if(f.scrollTo){f.scrollTo({top:v,behavior:"smooth"});return}f.scrollTop=v}}))}_getNewObserver(){const n={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(s=>this._observerCallback(s),n)}_observerCallback(n){const s=x=>this._targetLinks.get(`#${x.target.id}`),f=x=>{this._previousScrollData.visibleEntryTop=x.target.offsetTop,this._process(s(x))},v=(this._rootElement||document.documentElement).scrollTop,y=v>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=v;for(const x of n){if(!x.isIntersecting){this._activeTarget=null,this._clearActiveClass(s(x));continue}const C=x.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(y&&C){if(f(x),!v)return;continue}!y&&!C&&f(x)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const n=Z.find(Tu,this._config.target);for(const s of n){if(!s.hash||Gi(s))continue;const f=Z.findOne(decodeURI(s.hash),this._element);vr(f)&&(this._targetLinks.set(decodeURI(s.hash),s),this._observableSections.set(s.hash,f))}}_process(n){this._activeTarget!==n&&(this._clearActiveClass(this._config.target),this._activeTarget=n,n.classList.add(ir),this._activateParents(n),F.trigger(this._element,nw,{relatedTarget:n}))}_activateParents(n){if(n.classList.contains(sw)){Z.findOne(dw,n.closest(cw)).classList.add(ir);return}for(const s of Z.parents(n,ow))for(const f of Z.prev(s,uw))f.classList.add(ir)}_clearActiveClass(n){n.classList.remove(ir);const s=Z.find(`${Tu}.${ir}`,n);for(const f of s)f.classList.remove(ir)}static jQueryInterface(n){return this.each(function(){const s=qa.getOrCreateInstance(this,n);if(typeof n=="string"){if(s[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);s[n]()}})}}F.on(window,iw,()=>{for(const u of Z.find(rw))qa.getOrCreateInstance(u)});yn(qa);const hw="tab",_w="bs.tab",Os=`.${_w}`,vw=`hide${Os}`,mw=`hidden${Os}`,gw=`show${Os}`,bw=`shown${Os}`,yw=`click${Os}`,Ew=`keydown${Os}`,ww=`load${Os}`,xw="ArrowLeft",wf="ArrowRight",Aw="ArrowUp",xf="ArrowDown",Su="Home",Af="End",As="active",Cf="fade",Iu="show",Cw="dropdown",Tp=".dropdown-toggle",Tw=".dropdown-menu",Ou=`:not(${Tp})`,Sw='.list-group, .nav, [role="tablist"]',Iw=".nav-item, .list-group-item",Ow=`.nav-link${Ou}, .list-group-item${Ou}, [role="tab"]${Ou}`,Sp='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Du=`${Ow}, ${Sp}`,Dw=`.${As}[data-bs-toggle="tab"], .${As}[data-bs-toggle="pill"], .${As}[data-bs-toggle="list"]`;class hr extends Mn{constructor(n){super(n),this._parent=this._element.closest(Sw),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),F.on(this._element,Ew,s=>this._keydown(s)))}static get NAME(){return hw}show(){const n=this._element;if(this._elemIsActive(n))return;const s=this._getActiveElem(),f=s?F.trigger(s,vw,{relatedTarget:n}):null;F.trigger(n,gw,{relatedTarget:s}).defaultPrevented||f&&f.defaultPrevented||(this._deactivate(s,n),this._activate(n,s))}_activate(n,s){if(!n)return;n.classList.add(As),this._activate(Z.getElementFromSelector(n));const f=()=>{if(n.getAttribute("role")!=="tab"){n.classList.add(Iu);return}n.removeAttribute("tabindex"),n.setAttribute("aria-selected",!0),this._toggleDropDown(n,!0),F.trigger(n,bw,{relatedTarget:s})};this._queueCallback(f,n,n.classList.contains(Cf))}_deactivate(n,s){if(!n)return;n.classList.remove(As),n.blur(),this._deactivate(Z.getElementFromSelector(n));const f=()=>{if(n.getAttribute("role")!=="tab"){n.classList.remove(Iu);return}n.setAttribute("aria-selected",!1),n.setAttribute("tabindex","-1"),this._toggleDropDown(n,!1),F.trigger(n,mw,{relatedTarget:s})};this._queueCallback(f,n,n.classList.contains(Cf))}_keydown(n){if(![xw,wf,Aw,xf,Su,Af].includes(n.key))return;n.stopPropagation(),n.preventDefault();const s=this._getChildren().filter(v=>!Gi(v));let f;if([Su,Af].includes(n.key))f=s[n.key===Su?0:s.length-1];else{const v=[wf,xf].includes(n.key);f=Xu(s,n.target,v,!0)}f&&(f.focus({preventScroll:!0}),hr.getOrCreateInstance(f).show())}_getChildren(){return Z.find(Du,this._parent)}_getActiveElem(){return this._getChildren().find(n=>this._elemIsActive(n))||null}_setInitialAttributes(n,s){this._setAttributeIfNotExists(n,"role","tablist");for(const f of s)this._setInitialAttributesOnChild(f)}_setInitialAttributesOnChild(n){n=this._getInnerElement(n);const s=this._elemIsActive(n),f=this._getOuterElement(n);n.setAttribute("aria-selected",s),f!==n&&this._setAttributeIfNotExists(f,"role","presentation"),s||n.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(n,"role","tab"),this._setInitialAttributesOnTargetPanel(n)}_setInitialAttributesOnTargetPanel(n){const s=Z.getElementFromSelector(n);s&&(this._setAttributeIfNotExists(s,"role","tabpanel"),n.id&&this._setAttributeIfNotExists(s,"aria-labelledby",`${n.id}`))}_toggleDropDown(n,s){const f=this._getOuterElement(n);if(!f.classList.contains(Cw))return;const v=(y,x)=>{const C=Z.findOne(y,f);C&&C.classList.toggle(x,s)};v(Tp,As),v(Tw,Iu),f.setAttribute("aria-expanded",s)}_setAttributeIfNotExists(n,s,f){n.hasAttribute(s)||n.setAttribute(s,f)}_elemIsActive(n){return n.classList.contains(As)}_getInnerElement(n){return n.matches(Du)?n:Z.findOne(Du,n)}_getOuterElement(n){return n.closest(Iw)||n}static jQueryInterface(n){return this.each(function(){const s=hr.getOrCreateInstance(this);if(typeof n=="string"){if(s[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);s[n]()}})}}F.on(document,yw,Sp,function(u){["A","AREA"].includes(this.tagName)&&u.preventDefault(),!Gi(this)&&hr.getOrCreateInstance(this).show()});F.on(window,ww,()=>{for(const u of Z.find(Dw))hr.getOrCreateInstance(u)});yn(hr);const kw="toast",Nw="bs.toast",Zi=`.${Nw}`,Lw=`mouseover${Zi}`,$w=`mouseout${Zi}`,Mw=`focusin${Zi}`,Pw=`focusout${Zi}`,Rw=`hide${Zi}`,Fw=`hidden${Zi}`,qw=`show${Zi}`,Bw=`shown${Zi}`,Ww="fade",Tf="hide",xa="show",Aa="showing",Uw={animation:"boolean",autohide:"boolean",delay:"number"},Vw={animation:!0,autohide:!0,delay:5e3};class Ba extends Mn{constructor(n,s){super(n,s),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Vw}static get DefaultType(){return Uw}static get NAME(){return kw}show(){if(F.trigger(this._element,qw).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Ww);const s=()=>{this._element.classList.remove(Aa),F.trigger(this._element,Bw),this._maybeScheduleHide()};this._element.classList.remove(Tf),_o(this._element),this._element.classList.add(xa,Aa),this._queueCallback(s,this._element,this._config.animation)}hide(){if(!this.isShown()||F.trigger(this._element,Rw).defaultPrevented)return;const s=()=>{this._element.classList.add(Tf),this._element.classList.remove(Aa,xa),F.trigger(this._element,Fw)};this._element.classList.add(Aa),this._queueCallback(s,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(xa),super.dispose()}isShown(){return this._element.classList.contains(xa)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(n,s){switch(n.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=s;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=s;break}}if(s){this._clearTimeout();return}const f=n.relatedTarget;this._element===f||this._element.contains(f)||this._maybeScheduleHide()}_setListeners(){F.on(this._element,Lw,n=>this._onInteraction(n,!0)),F.on(this._element,$w,n=>this._onInteraction(n,!1)),F.on(this._element,Mw,n=>this._onInteraction(n,!0)),F.on(this._element,Pw,n=>this._onInteraction(n,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(n){return this.each(function(){const s=Ba.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof s[n]>"u")throw new TypeError(`No method named "${n}"`);s[n](this)}})}}Ma(Ba);yn(Ba);var lo={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Hw=lo.exports,Sf;function zw(){return Sf||(Sf=1,(function(u,n){(function(){var s,f="4.17.21",v=200,y="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",x="Expected a function",C="Invalid `variable` option passed into `_.template`",T="__lodash_hash_undefined__",U=500,P="__lodash_placeholder__",V=1,Q=2,K=4,J=1,ee=2,j=1,te=2,Ce=4,Se=8,ce=16,_e=32,ne=64,be=128,Be=256,Ue=512,Ye=30,Ze="...",ke=800,Ve=16,kt=1,Vt=2,Je=3,He=1/0,Nt=9007199254740991,En=17976931348623157e292,wn=NaN,St=4294967295,ti=St-1,Ti=St>>>1,Pn=[["ary",be],["bind",j],["bindKey",te],["curry",Se],["curryRight",ce],["flip",Ue],["partial",_e],["partialRight",ne],["rearg",Be]],bt="[object Arguments]",en="[object Array]",Si="[object AsyncFunction]",Ge="[object Boolean]",xn="[object Date]",Ii="[object DOMException]",Rn="[object Error]",ni="[object Function]",Oi="[object GeneratorFunction]",et="[object Map]",Le="[object Number]",yt="[object Null]",Qe="[object Object]",Ht="[object Promise]",br="[object Proxy]",ft="[object RegExp]",vt="[object Set]",Lt="[object String]",ii="[object Symbol]",Ji="[object Undefined]",zt="[object WeakMap]",An="[object WeakSet]",at="[object ArrayBuffer]",Cn="[object DataView]",yr="[object Float32Array]",lt="[object Float64Array]",Ds="[object Int8Array]",es="[object Int16Array]",Er="[object Int32Array]",Fn="[object Uint8Array]",wr="[object Uint8ClampedArray]",ks="[object Uint16Array]",xr="[object Uint32Array]",Ar=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,Wa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ns=/&(?:amp|lt|gt|quot|#39);/g,bo=/[&<>"']/g,Ua=RegExp(Ns.source),Kt=RegExp(bo.source),si=/<%-([\s\S]+?)%>/g,ri=/<%([\s\S]+?)%>/g,Cr=/<%=([\s\S]+?)%>/g,ve=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pt=/^\w*$/,Tr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cn=/[\\^$.*+?()[\]{}|]/g,ut=RegExp(cn.source),tn=/^\s+/,Va=/\s/,Ls=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ha=/\{\n\/\* \[wrapped with (.+)\] \*/,za=/,? & /,Et=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Sr=/[()=,{}\[\]\/\s]/,qn=/\\(\\)?/g,Tn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$s=/\w*$/,Di=/^[-+]0x[0-9a-f]+$/i,Ms=/^0b[01]+$/i,Ir=/^\[object .+?Constructor\]$/,Ka=/^0o[0-7]+$/i,yo=/^(?:0|[1-9]\d*)$/,Ya=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ps=/($^)/,Eo=/['\n\r\u2028\u2029\\]/g,wt="\\ud800-\\udfff",ki="\\u0300-\\u036f",wo="\\ufe20-\\ufe2f",ht="\\u20d0-\\u20ff",Ni=ki+wo+ht,xo="\\u2700-\\u27bf",Ao="a-z\\xdf-\\xf6\\xf8-\\xff",Co="\\xac\\xb1\\xd7\\xf7",oi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ga="\\u2000-\\u206f",ts=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ns="A-Z\\xc0-\\xd6\\xd8-\\xde",To="\\ufe0e\\ufe0f",Sn=Co+oi+Ga+ts,$t="[']",dn="["+wt+"]",is="["+Sn+"]",ai="["+Ni+"]",ss="\\d+",ja="["+xo+"]",So="["+Ao+"]",Io="[^"+wt+Sn+ss+xo+Ao+ns+"]",Mt="\\ud83c[\\udffb-\\udfff]",Oo="(?:"+ai+"|"+Mt+")",rs="[^"+wt+"]",Or="(?:\\ud83c[\\udde6-\\uddff]){2}",Rs="[\\ud800-\\udbff][\\udc00-\\udfff]",In="["+ns+"]",Do="\\u200d",os="(?:"+So+"|"+Io+")",Dr="(?:"+In+"|"+Io+")",Fs="(?:"+$t+"(?:d|ll|m|re|s|t|ve))?",ko="(?:"+$t+"(?:D|LL|M|RE|S|T|VE))?",as=Oo+"?",ls="["+To+"]?",kr="(?:"+Do+"(?:"+[rs,Or,Rs].join("|")+")"+ls+as+")*",Nr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",us=ls+as+kr,qe="(?:"+[ja,Or,Rs].join("|")+")"+us,Qa="(?:"+[rs+ai+"?",ai,Or,Rs,dn].join("|")+")",Xa=RegExp($t,"g"),Za=RegExp(ai,"g"),Lr=RegExp(Mt+"(?="+Mt+")|"+Qa+us,"g"),Ja=RegExp([In+"?"+So+"+"+Fs+"(?="+[is,In,"$"].join("|")+")",Dr+"+"+ko+"(?="+[is,In+os,"$"].join("|")+")",In+"?"+os+"+"+Fs,In+"+"+ko,qs,Nr,ss,qe].join("|"),"g"),li=RegExp("["+Do+wt+Ni+To+"]"),el=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ui=-1,Oe={};Oe[yr]=Oe[lt]=Oe[Ds]=Oe[es]=Oe[Er]=Oe[Fn]=Oe[wr]=Oe[ks]=Oe[xr]=!0,Oe[bt]=Oe[en]=Oe[at]=Oe[Ge]=Oe[Cn]=Oe[xn]=Oe[Rn]=Oe[ni]=Oe[et]=Oe[Le]=Oe[Qe]=Oe[ft]=Oe[vt]=Oe[Lt]=Oe[zt]=!1;var Ie={};Ie[bt]=Ie[en]=Ie[at]=Ie[Cn]=Ie[Ge]=Ie[xn]=Ie[yr]=Ie[lt]=Ie[Ds]=Ie[es]=Ie[Er]=Ie[et]=Ie[Le]=Ie[Qe]=Ie[ft]=Ie[vt]=Ie[Lt]=Ie[ii]=Ie[Fn]=Ie[wr]=Ie[ks]=Ie[xr]=!0,Ie[Rn]=Ie[ni]=Ie[zt]=!1;var nl={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},il={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},No={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},sl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rl=parseFloat,ci=parseInt,tt=typeof ma=="object"&&ma&&ma.Object===Object&&ma,Bn=typeof self=="object"&&self&&self.Object===Object&&self,ze=tt||Bn||Function("return this")(),$r=n&&!n.nodeType&&n,di=$r&&!0&&u&&!u.nodeType&&u,Lo=di&&di.exports===$r,Mr=Lo&&tt.process,Pt=(function(){try{var b=di&&di.require&&di.require("util").types;return b||Mr&&Mr.binding&&Mr.binding("util")}catch{}})(),$o=Pt&&Pt.isArrayBuffer,Mo=Pt&&Pt.isDate,Bs=Pt&&Pt.isMap,Li=Pt&&Pt.isRegExp,Pr=Pt&&Pt.isSet,Rr=Pt&&Pt.isTypedArray;function xt(b,k,A){switch(A.length){case 0:return b.call(k);case 1:return b.call(k,A[0]);case 2:return b.call(k,A[0],A[1]);case 3:return b.call(k,A[0],A[1],A[2])}return b.apply(k,A)}function ol(b,k,A,Y){for(var le=-1,Te=b==null?0:b.length;++le<Te;){var it=b[le];k(Y,it,A(it),b)}return Y}function Yt(b,k){for(var A=-1,Y=b==null?0:b.length;++A<Y&&k(b[A],A,b)!==!1;);return b}function al(b,k){for(var A=b==null?0:b.length;A--&&k(b[A],A,b)!==!1;);return b}function Po(b,k){for(var A=-1,Y=b==null?0:b.length;++A<Y;)if(!k(b[A],A,b))return!1;return!0}function Wn(b,k){for(var A=-1,Y=b==null?0:b.length,le=0,Te=[];++A<Y;){var it=b[A];k(it,A,b)&&(Te[le++]=it)}return Te}function mt(b,k){var A=b==null?0:b.length;return!!A&&Dn(b,k,0)>-1}function On(b,k,A){for(var Y=-1,le=b==null?0:b.length;++Y<le;)if(A(k,b[Y]))return!0;return!1}function De(b,k){for(var A=-1,Y=b==null?0:b.length,le=Array(Y);++A<Y;)le[A]=k(b[A],A,b);return le}function Un(b,k){for(var A=-1,Y=k.length,le=b.length;++A<Y;)b[le+A]=k[A];return b}function Vn(b,k,A,Y){var le=-1,Te=b==null?0:b.length;for(Y&&Te&&(A=b[++le]);++le<Te;)A=k(A,b[le],le,b);return A}function ll(b,k,A,Y){var le=b==null?0:b.length;for(Y&&le&&(A=b[--le]);le--;)A=k(A,b[le],le,b);return A}function Fr(b,k){for(var A=-1,Y=b==null?0:b.length;++A<Y;)if(k(b[A],A,b))return!0;return!1}var cs=$e("length");function Ro(b){return b.split("")}function ul(b){return b.match(Et)||[]}function qr(b,k,A){var Y;return A(b,function(le,Te,it){if(k(le,Te,it))return Y=Te,!1}),Y}function Ws(b,k,A,Y){for(var le=b.length,Te=A+(Y?1:-1);Y?Te--:++Te<le;)if(k(b[Te],Te,b))return Te;return-1}function Dn(b,k,A){return k===k?vl(b,k,A):Ws(b,qo,A)}function Fo(b,k,A,Y){for(var le=A-1,Te=b.length;++le<Te;)if(Y(b[le],k))return le;return-1}function qo(b){return b!==b}function Bo(b,k){var A=b==null?0:b.length;return A?At(b,k)/A:wn}function $e(b){return function(k){return k==null?s:k[b]}}function Re(b){return function(k){return b==null?s:b[k]}}function nt(b,k,A,Y,le){return le(b,function(Te,it,Fe){A=Y?(Y=!1,Te):k(A,Te,it,Fe)}),A}function kn(b,k){var A=b.length;for(b.sort(k);A--;)b[A]=b[A].value;return b}function At(b,k){for(var A,Y=-1,le=b.length;++Y<le;){var Te=k(b[Y]);Te!==s&&(A=A===s?Te:A+Te)}return A}function Hn(b,k){for(var A=-1,Y=Array(b);++A<b;)Y[A]=k(A);return Y}function zn(b,k){return De(k,function(A){return[A,b[A]]})}function ds(b){return b&&b.slice(0,ps(b)+1).replace(tn,"")}function Ne(b){return function(k){return b(k)}}function $i(b,k){return De(k,function(A){return b[A]})}function Kn(b,k){return b.has(k)}function Mi(b,k){for(var A=-1,Y=b.length;++A<Y&&Dn(k,b[A],0)>-1;);return A}function fs(b,k){for(var A=b.length;A--&&Dn(k,b[A],0)>-1;);return A}function cl(b,k){for(var A=b.length,Y=0;A--;)b[A]===k&&++Y;return Y}var dl=Re(nl),Us=Re(il);function Br(b){return"\\"+sl[b]}function fl(b,k){return b==null?s:b[k]}function Pi(b){return li.test(b)}function pl(b){return el.test(b)}function hl(b){for(var k,A=[];!(k=b.next()).done;)A.push(k.value);return A}function Wr(b){var k=-1,A=Array(b.size);return b.forEach(function(Y,le){A[++k]=[le,Y]}),A}function Ur(b,k){return function(A){return b(k(A))}}function Yn(b,k){for(var A=-1,Y=b.length,le=0,Te=[];++A<Y;){var it=b[A];(it===k||it===P)&&(b[A]=P,Te[le++]=A)}return Te}function Vs(b){var k=-1,A=Array(b.size);return b.forEach(function(Y){A[++k]=Y}),A}function _l(b){var k=-1,A=Array(b.size);return b.forEach(function(Y){A[++k]=[Y,Y]}),A}function vl(b,k,A){for(var Y=A-1,le=b.length;++Y<le;)if(b[Y]===k)return Y;return-1}function ml(b,k,A){for(var Y=A+1;Y--;)if(b[Y]===k)return Y;return Y}function fi(b){return Pi(b)?bl(b):cs(b)}function It(b){return Pi(b)?Hs(b):Ro(b)}function ps(b){for(var k=b.length;k--&&Va.test(b.charAt(k)););return k}var gl=Re(No);function bl(b){for(var k=Lr.lastIndex=0;Lr.test(b);)++k;return k}function Hs(b){return b.match(Lr)||[]}function Ri(b){return b.match(Ja)||[]}var Vr=(function b(k){k=k==null?ze:Fi.defaults(ze.Object(),k,Fi.pick(ze,tl));var A=k.Array,Y=k.Date,le=k.Error,Te=k.Function,it=k.Math,Fe=k.Object,Hr=k.RegExp,o=k.String,r=k.TypeError,l=A.prototype,_=Te.prototype,w=Fe.prototype,D=k["__core-js_shared__"],S=_.toString,L=w.hasOwnProperty,oe=0,B=(function(){var e=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),de=w.toString,We=S.call(Fe),ae=ze._,ct=Hr("^"+S.call(L).replace(cn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ye=Lo?k.Buffer:s,Ke=k.Symbol,Ct=k.Uint8Array,zs=ye?ye.allocUnsafe:s,Ks=Ur(Fe.getPrototypeOf,Fe),Wo=Fe.create,tc=w.propertyIsEnumerable,Uo=l.splice,nc=Ke?Ke.isConcatSpreadable:s,zr=Ke?Ke.iterator:s,hs=Ke?Ke.toStringTag:s,Vo=(function(){try{var e=bs(Fe,"defineProperty");return e({},"",{}),e}catch{}})(),Ip=k.clearTimeout!==ze.clearTimeout&&k.clearTimeout,Op=Y&&Y.now!==ze.Date.now&&Y.now,Dp=k.setTimeout!==ze.setTimeout&&k.setTimeout,Ho=it.ceil,zo=it.floor,yl=Fe.getOwnPropertySymbols,kp=ye?ye.isBuffer:s,ic=k.isFinite,Np=l.join,Lp=Ur(Fe.keys,Fe),_t=it.max,Ot=it.min,$p=Y.now,Mp=k.parseInt,sc=it.random,Pp=l.reverse,El=bs(k,"DataView"),Kr=bs(k,"Map"),wl=bs(k,"Promise"),Ys=bs(k,"Set"),Yr=bs(k,"WeakMap"),Gr=bs(Fe,"create"),Ko=Yr&&new Yr,Gs={},Rp=ys(El),Fp=ys(Kr),qp=ys(wl),Bp=ys(Ys),Wp=ys(Yr),Yo=Ke?Ke.prototype:s,jr=Yo?Yo.valueOf:s,rc=Yo?Yo.toString:s;function p(e){if(Xe(e)&&!fe(e)&&!(e instanceof xe)){if(e instanceof fn)return e;if(L.call(e,"__wrapped__"))return od(e)}return new fn(e)}var js=(function(){function e(){}return function(t){if(!je(t))return{};if(Wo)return Wo(t);e.prototype=t;var i=new e;return e.prototype=s,i}})();function Go(){}function fn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=s}p.templateSettings={escape:si,evaluate:ri,interpolate:Cr,variable:"",imports:{_:p}},p.prototype=Go.prototype,p.prototype.constructor=p,fn.prototype=js(Go.prototype),fn.prototype.constructor=fn;function xe(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=St,this.__views__=[]}function Up(){var e=new xe(this.__wrapped__);return e.__actions__=Gt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Gt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Gt(this.__views__),e}function Vp(){if(this.__filtered__){var e=new xe(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Hp(){var e=this.__wrapped__.value(),t=this.__dir__,i=fe(e),a=t<0,d=i?e.length:0,h=n_(0,d,this.__views__),m=h.start,g=h.end,E=g-m,$=a?g:m-1,M=this.__iteratees__,R=M.length,H=0,G=Ot(E,this.__takeCount__);if(!i||!a&&d==E&&G==E)return Oc(e,this.__actions__);var se=[];e:for(;E--&&H<G;){$+=t;for(var me=-1,re=e[$];++me<R;){var Ee=M[me],Ae=Ee.iteratee,rn=Ee.type,qt=Ae(re);if(rn==Vt)re=qt;else if(!qt){if(rn==kt)continue e;break e}}se[H++]=re}return se}xe.prototype=js(Go.prototype),xe.prototype.constructor=xe;function _s(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}function zp(){this.__data__=Gr?Gr(null):{},this.size=0}function Kp(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Yp(e){var t=this.__data__;if(Gr){var i=t[e];return i===T?s:i}return L.call(t,e)?t[e]:s}function Gp(e){var t=this.__data__;return Gr?t[e]!==s:L.call(t,e)}function jp(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Gr&&t===s?T:t,this}_s.prototype.clear=zp,_s.prototype.delete=Kp,_s.prototype.get=Yp,_s.prototype.has=Gp,_s.prototype.set=jp;function pi(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}function Qp(){this.__data__=[],this.size=0}function Xp(e){var t=this.__data__,i=jo(t,e);if(i<0)return!1;var a=t.length-1;return i==a?t.pop():Uo.call(t,i,1),--this.size,!0}function Zp(e){var t=this.__data__,i=jo(t,e);return i<0?s:t[i][1]}function Jp(e){return jo(this.__data__,e)>-1}function eh(e,t){var i=this.__data__,a=jo(i,e);return a<0?(++this.size,i.push([e,t])):i[a][1]=t,this}pi.prototype.clear=Qp,pi.prototype.delete=Xp,pi.prototype.get=Zp,pi.prototype.has=Jp,pi.prototype.set=eh;function hi(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}function th(){this.size=0,this.__data__={hash:new _s,map:new(Kr||pi),string:new _s}}function nh(e){var t=aa(this,e).delete(e);return this.size-=t?1:0,t}function ih(e){return aa(this,e).get(e)}function sh(e){return aa(this,e).has(e)}function rh(e,t){var i=aa(this,e),a=i.size;return i.set(e,t),this.size+=i.size==a?0:1,this}hi.prototype.clear=th,hi.prototype.delete=nh,hi.prototype.get=ih,hi.prototype.has=sh,hi.prototype.set=rh;function vs(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new hi;++t<i;)this.add(e[t])}function oh(e){return this.__data__.set(e,T),this}function ah(e){return this.__data__.has(e)}vs.prototype.add=vs.prototype.push=oh,vs.prototype.has=ah;function Nn(e){var t=this.__data__=new pi(e);this.size=t.size}function lh(){this.__data__=new pi,this.size=0}function uh(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function ch(e){return this.__data__.get(e)}function dh(e){return this.__data__.has(e)}function fh(e,t){var i=this.__data__;if(i instanceof pi){var a=i.__data__;if(!Kr||a.length<v-1)return a.push([e,t]),this.size=++i.size,this;i=this.__data__=new hi(a)}return i.set(e,t),this.size=i.size,this}Nn.prototype.clear=lh,Nn.prototype.delete=uh,Nn.prototype.get=ch,Nn.prototype.has=dh,Nn.prototype.set=fh;function oc(e,t){var i=fe(e),a=!i&&Es(e),d=!i&&!a&&Vi(e),h=!i&&!a&&!d&&Js(e),m=i||a||d||h,g=m?Hn(e.length,o):[],E=g.length;for(var $ in e)(t||L.call(e,$))&&!(m&&($=="length"||d&&($=="offset"||$=="parent")||h&&($=="buffer"||$=="byteLength"||$=="byteOffset")||gi($,E)))&&g.push($);return g}function ac(e){var t=e.length;return t?e[Ll(0,t-1)]:s}function ph(e,t){return la(Gt(e),ms(t,0,e.length))}function hh(e){return la(Gt(e))}function xl(e,t,i){(i!==s&&!Ln(e[t],i)||i===s&&!(t in e))&&_i(e,t,i)}function Qr(e,t,i){var a=e[t];(!(L.call(e,t)&&Ln(a,i))||i===s&&!(t in e))&&_i(e,t,i)}function jo(e,t){for(var i=e.length;i--;)if(Ln(e[i][0],t))return i;return-1}function _h(e,t,i,a){return qi(e,function(d,h,m){t(a,d,i(d),m)}),a}function lc(e,t){return e&&jn(t,gt(t),e)}function vh(e,t){return e&&jn(t,Qt(t),e)}function _i(e,t,i){t=="__proto__"&&Vo?Vo(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function Al(e,t){for(var i=-1,a=t.length,d=A(a),h=e==null;++i<a;)d[i]=h?s:su(e,t[i]);return d}function ms(e,t,i){return e===e&&(i!==s&&(e=e<=i?e:i),t!==s&&(e=e>=t?e:t)),e}function pn(e,t,i,a,d,h){var m,g=t&V,E=t&Q,$=t&K;if(i&&(m=d?i(e,a,d,h):i(e)),m!==s)return m;if(!je(e))return e;var M=fe(e);if(M){if(m=s_(e),!g)return Gt(e,m)}else{var R=Dt(e),H=R==ni||R==Oi;if(Vi(e))return Nc(e,g);if(R==Qe||R==bt||H&&!d){if(m=E||H?{}:Xc(e),!g)return E?Yh(e,vh(m,e)):Kh(e,lc(m,e))}else{if(!Ie[R])return d?e:{};m=r_(e,R,g)}}h||(h=new Nn);var G=h.get(e);if(G)return G;h.set(e,m),Td(e)?e.forEach(function(re){m.add(pn(re,t,i,re,e,h))}):Ad(e)&&e.forEach(function(re,Ee){m.set(Ee,pn(re,t,i,Ee,e,h))});var se=$?E?Hl:Vl:E?Qt:gt,me=M?s:se(e);return Yt(me||e,function(re,Ee){me&&(Ee=re,re=e[Ee]),Qr(m,Ee,pn(re,t,i,Ee,e,h))}),m}function mh(e){var t=gt(e);return function(i){return uc(i,e,t)}}function uc(e,t,i){var a=i.length;if(e==null)return!a;for(e=Fe(e);a--;){var d=i[a],h=t[d],m=e[d];if(m===s&&!(d in e)||!h(m))return!1}return!0}function cc(e,t,i){if(typeof e!="function")throw new r(x);return io(function(){e.apply(s,i)},t)}function Xr(e,t,i,a){var d=-1,h=mt,m=!0,g=e.length,E=[],$=t.length;if(!g)return E;i&&(t=De(t,Ne(i))),a?(h=On,m=!1):t.length>=v&&(h=Kn,m=!1,t=new vs(t));e:for(;++d<g;){var M=e[d],R=i==null?M:i(M);if(M=a||M!==0?M:0,m&&R===R){for(var H=$;H--;)if(t[H]===R)continue e;E.push(M)}else h(t,R,a)||E.push(M)}return E}var qi=Rc(Gn),dc=Rc(Tl,!0);function gh(e,t){var i=!0;return qi(e,function(a,d,h){return i=!!t(a,d,h),i}),i}function Qo(e,t,i){for(var a=-1,d=e.length;++a<d;){var h=e[a],m=t(h);if(m!=null&&(g===s?m===m&&!sn(m):i(m,g)))var g=m,E=h}return E}function bh(e,t,i,a){var d=e.length;for(i=pe(i),i<0&&(i=-i>d?0:d+i),a=a===s||a>d?d:pe(a),a<0&&(a+=d),a=i>a?0:Id(a);i<a;)e[i++]=t;return e}function fc(e,t){var i=[];return qi(e,function(a,d,h){t(a,d,h)&&i.push(a)}),i}function Tt(e,t,i,a,d){var h=-1,m=e.length;for(i||(i=a_),d||(d=[]);++h<m;){var g=e[h];t>0&&i(g)?t>1?Tt(g,t-1,i,a,d):Un(d,g):a||(d[d.length]=g)}return d}var Cl=Fc(),pc=Fc(!0);function Gn(e,t){return e&&Cl(e,t,gt)}function Tl(e,t){return e&&pc(e,t,gt)}function Xo(e,t){return Wn(t,function(i){return bi(e[i])})}function gs(e,t){t=Wi(t,e);for(var i=0,a=t.length;e!=null&&i<a;)e=e[Qn(t[i++])];return i&&i==a?e:s}function hc(e,t,i){var a=t(e);return fe(e)?a:Un(a,i(e))}function Rt(e){return e==null?e===s?Ji:yt:hs&&hs in Fe(e)?t_(e):h_(e)}function Sl(e,t){return e>t}function yh(e,t){return e!=null&&L.call(e,t)}function Eh(e,t){return e!=null&&t in Fe(e)}function wh(e,t,i){return e>=Ot(t,i)&&e<_t(t,i)}function Il(e,t,i){for(var a=i?On:mt,d=e[0].length,h=e.length,m=h,g=A(h),E=1/0,$=[];m--;){var M=e[m];m&&t&&(M=De(M,Ne(t))),E=Ot(M.length,E),g[m]=!i&&(t||d>=120&&M.length>=120)?new vs(m&&M):s}M=e[0];var R=-1,H=g[0];e:for(;++R<d&&$.length<E;){var G=M[R],se=t?t(G):G;if(G=i||G!==0?G:0,!(H?Kn(H,se):a($,se,i))){for(m=h;--m;){var me=g[m];if(!(me?Kn(me,se):a(e[m],se,i)))continue e}H&&H.push(se),$.push(G)}}return $}function xh(e,t,i,a){return Gn(e,function(d,h,m){t(a,i(d),h,m)}),a}function Zr(e,t,i){t=Wi(t,e),e=td(e,t);var a=e==null?e:e[Qn(_n(t))];return a==null?s:xt(a,e,i)}function _c(e){return Xe(e)&&Rt(e)==bt}function Ah(e){return Xe(e)&&Rt(e)==at}function Ch(e){return Xe(e)&&Rt(e)==xn}function Jr(e,t,i,a,d){return e===t?!0:e==null||t==null||!Xe(e)&&!Xe(t)?e!==e&&t!==t:Th(e,t,i,a,Jr,d)}function Th(e,t,i,a,d,h){var m=fe(e),g=fe(t),E=m?en:Dt(e),$=g?en:Dt(t);E=E==bt?Qe:E,$=$==bt?Qe:$;var M=E==Qe,R=$==Qe,H=E==$;if(H&&Vi(e)){if(!Vi(t))return!1;m=!0,M=!1}if(H&&!M)return h||(h=new Nn),m||Js(e)?Gc(e,t,i,a,d,h):Jh(e,t,E,i,a,d,h);if(!(i&J)){var G=M&&L.call(e,"__wrapped__"),se=R&&L.call(t,"__wrapped__");if(G||se){var me=G?e.value():e,re=se?t.value():t;return h||(h=new Nn),d(me,re,i,a,h)}}return H?(h||(h=new Nn),e_(e,t,i,a,d,h)):!1}function Sh(e){return Xe(e)&&Dt(e)==et}function Ol(e,t,i,a){var d=i.length,h=d,m=!a;if(e==null)return!h;for(e=Fe(e);d--;){var g=i[d];if(m&&g[2]?g[1]!==e[g[0]]:!(g[0]in e))return!1}for(;++d<h;){g=i[d];var E=g[0],$=e[E],M=g[1];if(m&&g[2]){if($===s&&!(E in e))return!1}else{var R=new Nn;if(a)var H=a($,M,E,e,t,R);if(!(H===s?Jr(M,$,J|ee,a,R):H))return!1}}return!0}function vc(e){if(!je(e)||u_(e))return!1;var t=bi(e)?ct:Ir;return t.test(ys(e))}function Ih(e){return Xe(e)&&Rt(e)==ft}function Oh(e){return Xe(e)&&Dt(e)==vt}function Dh(e){return Xe(e)&&ha(e.length)&&!!Oe[Rt(e)]}function mc(e){return typeof e=="function"?e:e==null?Xt:typeof e=="object"?fe(e)?yc(e[0],e[1]):bc(e):qd(e)}function Dl(e){if(!no(e))return Lp(e);var t=[];for(var i in Fe(e))L.call(e,i)&&i!="constructor"&&t.push(i);return t}function kh(e){if(!je(e))return p_(e);var t=no(e),i=[];for(var a in e)a=="constructor"&&(t||!L.call(e,a))||i.push(a);return i}function kl(e,t){return e<t}function gc(e,t){var i=-1,a=jt(e)?A(e.length):[];return qi(e,function(d,h,m){a[++i]=t(d,h,m)}),a}function bc(e){var t=Kl(e);return t.length==1&&t[0][2]?Jc(t[0][0],t[0][1]):function(i){return i===e||Ol(i,e,t)}}function yc(e,t){return Gl(e)&&Zc(t)?Jc(Qn(e),t):function(i){var a=su(i,e);return a===s&&a===t?ru(i,e):Jr(t,a,J|ee)}}function Zo(e,t,i,a,d){e!==t&&Cl(t,function(h,m){if(d||(d=new Nn),je(h))Nh(e,t,m,i,Zo,a,d);else{var g=a?a(Ql(e,m),h,m+"",e,t,d):s;g===s&&(g=h),xl(e,m,g)}},Qt)}function Nh(e,t,i,a,d,h,m){var g=Ql(e,i),E=Ql(t,i),$=m.get(E);if($){xl(e,i,$);return}var M=h?h(g,E,i+"",e,t,m):s,R=M===s;if(R){var H=fe(E),G=!H&&Vi(E),se=!H&&!G&&Js(E);M=E,H||G||se?fe(g)?M=g:st(g)?M=Gt(g):G?(R=!1,M=Nc(E,!0)):se?(R=!1,M=Lc(E,!0)):M=[]:so(E)||Es(E)?(M=g,Es(g)?M=Od(g):(!je(g)||bi(g))&&(M=Xc(E))):R=!1}R&&(m.set(E,M),d(M,E,a,h,m),m.delete(E)),xl(e,i,M)}function Ec(e,t){var i=e.length;if(i)return t+=t<0?i:0,gi(t,i)?e[t]:s}function wc(e,t,i){t.length?t=De(t,function(h){return fe(h)?function(m){return gs(m,h.length===1?h[0]:h)}:h}):t=[Xt];var a=-1;t=De(t,Ne(ie()));var d=gc(e,function(h,m,g){var E=De(t,function($){return $(h)});return{criteria:E,index:++a,value:h}});return kn(d,function(h,m){return zh(h,m,i)})}function Lh(e,t){return xc(e,t,function(i,a){return ru(e,a)})}function xc(e,t,i){for(var a=-1,d=t.length,h={};++a<d;){var m=t[a],g=gs(e,m);i(g,m)&&eo(h,Wi(m,e),g)}return h}function $h(e){return function(t){return gs(t,e)}}function Nl(e,t,i,a){var d=a?Fo:Dn,h=-1,m=t.length,g=e;for(e===t&&(t=Gt(t)),i&&(g=De(e,Ne(i)));++h<m;)for(var E=0,$=t[h],M=i?i($):$;(E=d(g,M,E,a))>-1;)g!==e&&Uo.call(g,E,1),Uo.call(e,E,1);return e}function Ac(e,t){for(var i=e?t.length:0,a=i-1;i--;){var d=t[i];if(i==a||d!==h){var h=d;gi(d)?Uo.call(e,d,1):Pl(e,d)}}return e}function Ll(e,t){return e+zo(sc()*(t-e+1))}function Mh(e,t,i,a){for(var d=-1,h=_t(Ho((t-e)/(i||1)),0),m=A(h);h--;)m[a?h:++d]=e,e+=i;return m}function $l(e,t){var i="";if(!e||t<1||t>Nt)return i;do t%2&&(i+=e),t=zo(t/2),t&&(e+=e);while(t);return i}function ge(e,t){return Xl(ed(e,t,Xt),e+"")}function Ph(e){return ac(er(e))}function Rh(e,t){var i=er(e);return la(i,ms(t,0,i.length))}function eo(e,t,i,a){if(!je(e))return e;t=Wi(t,e);for(var d=-1,h=t.length,m=h-1,g=e;g!=null&&++d<h;){var E=Qn(t[d]),$=i;if(E==="__proto__"||E==="constructor"||E==="prototype")return e;if(d!=m){var M=g[E];$=a?a(M,E,g):s,$===s&&($=je(M)?M:gi(t[d+1])?[]:{})}Qr(g,E,$),g=g[E]}return e}var Cc=Ko?function(e,t){return Ko.set(e,t),e}:Xt,Fh=Vo?function(e,t){return Vo(e,"toString",{configurable:!0,enumerable:!1,value:au(t),writable:!0})}:Xt;function qh(e){return la(er(e))}function hn(e,t,i){var a=-1,d=e.length;t<0&&(t=-t>d?0:d+t),i=i>d?d:i,i<0&&(i+=d),d=t>i?0:i-t>>>0,t>>>=0;for(var h=A(d);++a<d;)h[a]=e[a+t];return h}function Bh(e,t){var i;return qi(e,function(a,d,h){return i=t(a,d,h),!i}),!!i}function Jo(e,t,i){var a=0,d=e==null?a:e.length;if(typeof t=="number"&&t===t&&d<=Ti){for(;a<d;){var h=a+d>>>1,m=e[h];m!==null&&!sn(m)&&(i?m<=t:m<t)?a=h+1:d=h}return d}return Ml(e,t,Xt,i)}function Ml(e,t,i,a){var d=0,h=e==null?0:e.length;if(h===0)return 0;t=i(t);for(var m=t!==t,g=t===null,E=sn(t),$=t===s;d<h;){var M=zo((d+h)/2),R=i(e[M]),H=R!==s,G=R===null,se=R===R,me=sn(R);if(m)var re=a||se;else $?re=se&&(a||H):g?re=se&&H&&(a||!G):E?re=se&&H&&!G&&(a||!me):G||me?re=!1:re=a?R<=t:R<t;re?d=M+1:h=M}return Ot(h,ti)}function Tc(e,t){for(var i=-1,a=e.length,d=0,h=[];++i<a;){var m=e[i],g=t?t(m):m;if(!i||!Ln(g,E)){var E=g;h[d++]=m===0?0:m}}return h}function Sc(e){return typeof e=="number"?e:sn(e)?wn:+e}function nn(e){if(typeof e=="string")return e;if(fe(e))return De(e,nn)+"";if(sn(e))return rc?rc.call(e):"";var t=e+"";return t=="0"&&1/e==-He?"-0":t}function Bi(e,t,i){var a=-1,d=mt,h=e.length,m=!0,g=[],E=g;if(i)m=!1,d=On;else if(h>=v){var $=t?null:Xh(e);if($)return Vs($);m=!1,d=Kn,E=new vs}else E=t?[]:g;e:for(;++a<h;){var M=e[a],R=t?t(M):M;if(M=i||M!==0?M:0,m&&R===R){for(var H=E.length;H--;)if(E[H]===R)continue e;t&&E.push(R),g.push(M)}else d(E,R,i)||(E!==g&&E.push(R),g.push(M))}return g}function Pl(e,t){return t=Wi(t,e),e=td(e,t),e==null||delete e[Qn(_n(t))]}function Ic(e,t,i,a){return eo(e,t,i(gs(e,t)),a)}function ea(e,t,i,a){for(var d=e.length,h=a?d:-1;(a?h--:++h<d)&&t(e[h],h,e););return i?hn(e,a?0:h,a?h+1:d):hn(e,a?h+1:0,a?d:h)}function Oc(e,t){var i=e;return i instanceof xe&&(i=i.value()),Vn(t,function(a,d){return d.func.apply(d.thisArg,Un([a],d.args))},i)}function Rl(e,t,i){var a=e.length;if(a<2)return a?Bi(e[0]):[];for(var d=-1,h=A(a);++d<a;)for(var m=e[d],g=-1;++g<a;)g!=d&&(h[d]=Xr(h[d]||m,e[g],t,i));return Bi(Tt(h,1),t,i)}function Dc(e,t,i){for(var a=-1,d=e.length,h=t.length,m={};++a<d;){var g=a<h?t[a]:s;i(m,e[a],g)}return m}function Fl(e){return st(e)?e:[]}function ql(e){return typeof e=="function"?e:Xt}function Wi(e,t){return fe(e)?e:Gl(e,t)?[e]:rd(Me(e))}var Wh=ge;function Ui(e,t,i){var a=e.length;return i=i===s?a:i,!t&&i>=a?e:hn(e,t,i)}var kc=Ip||function(e){return ze.clearTimeout(e)};function Nc(e,t){if(t)return e.slice();var i=e.length,a=zs?zs(i):new e.constructor(i);return e.copy(a),a}function Bl(e){var t=new e.constructor(e.byteLength);return new Ct(t).set(new Ct(e)),t}function Uh(e,t){var i=t?Bl(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function Vh(e){var t=new e.constructor(e.source,$s.exec(e));return t.lastIndex=e.lastIndex,t}function Hh(e){return jr?Fe(jr.call(e)):{}}function Lc(e,t){var i=t?Bl(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function $c(e,t){if(e!==t){var i=e!==s,a=e===null,d=e===e,h=sn(e),m=t!==s,g=t===null,E=t===t,$=sn(t);if(!g&&!$&&!h&&e>t||h&&m&&E&&!g&&!$||a&&m&&E||!i&&E||!d)return 1;if(!a&&!h&&!$&&e<t||$&&i&&d&&!a&&!h||g&&i&&d||!m&&d||!E)return-1}return 0}function zh(e,t,i){for(var a=-1,d=e.criteria,h=t.criteria,m=d.length,g=i.length;++a<m;){var E=$c(d[a],h[a]);if(E){if(a>=g)return E;var $=i[a];return E*($=="desc"?-1:1)}}return e.index-t.index}function Mc(e,t,i,a){for(var d=-1,h=e.length,m=i.length,g=-1,E=t.length,$=_t(h-m,0),M=A(E+$),R=!a;++g<E;)M[g]=t[g];for(;++d<m;)(R||d<h)&&(M[i[d]]=e[d]);for(;$--;)M[g++]=e[d++];return M}function Pc(e,t,i,a){for(var d=-1,h=e.length,m=-1,g=i.length,E=-1,$=t.length,M=_t(h-g,0),R=A(M+$),H=!a;++d<M;)R[d]=e[d];for(var G=d;++E<$;)R[G+E]=t[E];for(;++m<g;)(H||d<h)&&(R[G+i[m]]=e[d++]);return R}function Gt(e,t){var i=-1,a=e.length;for(t||(t=A(a));++i<a;)t[i]=e[i];return t}function jn(e,t,i,a){var d=!i;i||(i={});for(var h=-1,m=t.length;++h<m;){var g=t[h],E=a?a(i[g],e[g],g,i,e):s;E===s&&(E=e[g]),d?_i(i,g,E):Qr(i,g,E)}return i}function Kh(e,t){return jn(e,Yl(e),t)}function Yh(e,t){return jn(e,jc(e),t)}function ta(e,t){return function(i,a){var d=fe(i)?ol:_h,h=t?t():{};return d(i,e,ie(a,2),h)}}function Qs(e){return ge(function(t,i){var a=-1,d=i.length,h=d>1?i[d-1]:s,m=d>2?i[2]:s;for(h=e.length>3&&typeof h=="function"?(d--,h):s,m&&Ft(i[0],i[1],m)&&(h=d<3?s:h,d=1),t=Fe(t);++a<d;){var g=i[a];g&&e(t,g,a,h)}return t})}function Rc(e,t){return function(i,a){if(i==null)return i;if(!jt(i))return e(i,a);for(var d=i.length,h=t?d:-1,m=Fe(i);(t?h--:++h<d)&&a(m[h],h,m)!==!1;);return i}}function Fc(e){return function(t,i,a){for(var d=-1,h=Fe(t),m=a(t),g=m.length;g--;){var E=m[e?g:++d];if(i(h[E],E,h)===!1)break}return t}}function Gh(e,t,i){var a=t&j,d=to(e);function h(){var m=this&&this!==ze&&this instanceof h?d:e;return m.apply(a?i:this,arguments)}return h}function qc(e){return function(t){t=Me(t);var i=Pi(t)?It(t):s,a=i?i[0]:t.charAt(0),d=i?Ui(i,1).join(""):t.slice(1);return a[e]()+d}}function Xs(e){return function(t){return Vn(Rd(Pd(t).replace(Xa,"")),e,"")}}function to(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=js(e.prototype),a=e.apply(i,t);return je(a)?a:i}}function jh(e,t,i){var a=to(e);function d(){for(var h=arguments.length,m=A(h),g=h,E=Zs(d);g--;)m[g]=arguments[g];var $=h<3&&m[0]!==E&&m[h-1]!==E?[]:Yn(m,E);if(h-=$.length,h<i)return Hc(e,t,na,d.placeholder,s,m,$,s,s,i-h);var M=this&&this!==ze&&this instanceof d?a:e;return xt(M,this,m)}return d}function Bc(e){return function(t,i,a){var d=Fe(t);if(!jt(t)){var h=ie(i,3);t=gt(t),i=function(g){return h(d[g],g,d)}}var m=e(t,i,a);return m>-1?d[h?t[m]:m]:s}}function Wc(e){return mi(function(t){var i=t.length,a=i,d=fn.prototype.thru;for(e&&t.reverse();a--;){var h=t[a];if(typeof h!="function")throw new r(x);if(d&&!m&&oa(h)=="wrapper")var m=new fn([],!0)}for(a=m?a:i;++a<i;){h=t[a];var g=oa(h),E=g=="wrapper"?zl(h):s;E&&jl(E[0])&&E[1]==(be|Se|_e|Be)&&!E[4].length&&E[9]==1?m=m[oa(E[0])].apply(m,E[3]):m=h.length==1&&jl(h)?m[g]():m.thru(h)}return function(){var $=arguments,M=$[0];if(m&&$.length==1&&fe(M))return m.plant(M).value();for(var R=0,H=i?t[R].apply(this,$):M;++R<i;)H=t[R].call(this,H);return H}})}function na(e,t,i,a,d,h,m,g,E,$){var M=t&be,R=t&j,H=t&te,G=t&(Se|ce),se=t&Ue,me=H?s:to(e);function re(){for(var Ee=arguments.length,Ae=A(Ee),rn=Ee;rn--;)Ae[rn]=arguments[rn];if(G)var qt=Zs(re),on=cl(Ae,qt);if(a&&(Ae=Mc(Ae,a,d,G)),h&&(Ae=Pc(Ae,h,m,G)),Ee-=on,G&&Ee<$){var rt=Yn(Ae,qt);return Hc(e,t,na,re.placeholder,i,Ae,rt,g,E,$-Ee)}var $n=R?i:this,Ei=H?$n[e]:e;return Ee=Ae.length,g?Ae=__(Ae,g):se&&Ee>1&&Ae.reverse(),M&&E<Ee&&(Ae.length=E),this&&this!==ze&&this instanceof re&&(Ei=me||to(Ei)),Ei.apply($n,Ae)}return re}function Uc(e,t){return function(i,a){return xh(i,e,t(a),{})}}function ia(e,t){return function(i,a){var d;if(i===s&&a===s)return t;if(i!==s&&(d=i),a!==s){if(d===s)return a;typeof i=="string"||typeof a=="string"?(i=nn(i),a=nn(a)):(i=Sc(i),a=Sc(a)),d=e(i,a)}return d}}function Wl(e){return mi(function(t){return t=De(t,Ne(ie())),ge(function(i){var a=this;return e(t,function(d){return xt(d,a,i)})})})}function sa(e,t){t=t===s?" ":nn(t);var i=t.length;if(i<2)return i?$l(t,e):t;var a=$l(t,Ho(e/fi(t)));return Pi(t)?Ui(It(a),0,e).join(""):a.slice(0,e)}function Qh(e,t,i,a){var d=t&j,h=to(e);function m(){for(var g=-1,E=arguments.length,$=-1,M=a.length,R=A(M+E),H=this&&this!==ze&&this instanceof m?h:e;++$<M;)R[$]=a[$];for(;E--;)R[$++]=arguments[++g];return xt(H,d?i:this,R)}return m}function Vc(e){return function(t,i,a){return a&&typeof a!="number"&&Ft(t,i,a)&&(i=a=s),t=yi(t),i===s?(i=t,t=0):i=yi(i),a=a===s?t<i?1:-1:yi(a),Mh(t,i,a,e)}}function ra(e){return function(t,i){return typeof t=="string"&&typeof i=="string"||(t=vn(t),i=vn(i)),e(t,i)}}function Hc(e,t,i,a,d,h,m,g,E,$){var M=t&Se,R=M?m:s,H=M?s:m,G=M?h:s,se=M?s:h;t|=M?_e:ne,t&=~(M?ne:_e),t&Ce||(t&=-4);var me=[e,t,d,G,R,se,H,g,E,$],re=i.apply(s,me);return jl(e)&&nd(re,me),re.placeholder=a,id(re,e,t)}function Ul(e){var t=it[e];return function(i,a){if(i=vn(i),a=a==null?0:Ot(pe(a),292),a&&ic(i)){var d=(Me(i)+"e").split("e"),h=t(d[0]+"e"+(+d[1]+a));return d=(Me(h)+"e").split("e"),+(d[0]+"e"+(+d[1]-a))}return t(i)}}var Xh=Ys&&1/Vs(new Ys([,-0]))[1]==He?function(e){return new Ys(e)}:cu;function zc(e){return function(t){var i=Dt(t);return i==et?Wr(t):i==vt?_l(t):zn(t,e(t))}}function vi(e,t,i,a,d,h,m,g){var E=t&te;if(!E&&typeof e!="function")throw new r(x);var $=a?a.length:0;if($||(t&=-97,a=d=s),m=m===s?m:_t(pe(m),0),g=g===s?g:pe(g),$-=d?d.length:0,t&ne){var M=a,R=d;a=d=s}var H=E?s:zl(e),G=[e,t,i,a,d,M,R,h,m,g];if(H&&f_(G,H),e=G[0],t=G[1],i=G[2],a=G[3],d=G[4],g=G[9]=G[9]===s?E?0:e.length:_t(G[9]-$,0),!g&&t&(Se|ce)&&(t&=-25),!t||t==j)var se=Gh(e,t,i);else t==Se||t==ce?se=jh(e,t,g):(t==_e||t==(j|_e))&&!d.length?se=Qh(e,t,i,a):se=na.apply(s,G);var me=H?Cc:nd;return id(me(se,G),e,t)}function Kc(e,t,i,a){return e===s||Ln(e,w[i])&&!L.call(a,i)?t:e}function Yc(e,t,i,a,d,h){return je(e)&&je(t)&&(h.set(t,e),Zo(e,t,s,Yc,h),h.delete(t)),e}function Zh(e){return so(e)?s:e}function Gc(e,t,i,a,d,h){var m=i&J,g=e.length,E=t.length;if(g!=E&&!(m&&E>g))return!1;var $=h.get(e),M=h.get(t);if($&&M)return $==t&&M==e;var R=-1,H=!0,G=i&ee?new vs:s;for(h.set(e,t),h.set(t,e);++R<g;){var se=e[R],me=t[R];if(a)var re=m?a(me,se,R,t,e,h):a(se,me,R,e,t,h);if(re!==s){if(re)continue;H=!1;break}if(G){if(!Fr(t,function(Ee,Ae){if(!Kn(G,Ae)&&(se===Ee||d(se,Ee,i,a,h)))return G.push(Ae)})){H=!1;break}}else if(!(se===me||d(se,me,i,a,h))){H=!1;break}}return h.delete(e),h.delete(t),H}function Jh(e,t,i,a,d,h,m){switch(i){case Cn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case at:return!(e.byteLength!=t.byteLength||!h(new Ct(e),new Ct(t)));case Ge:case xn:case Le:return Ln(+e,+t);case Rn:return e.name==t.name&&e.message==t.message;case ft:case Lt:return e==t+"";case et:var g=Wr;case vt:var E=a&J;if(g||(g=Vs),e.size!=t.size&&!E)return!1;var $=m.get(e);if($)return $==t;a|=ee,m.set(e,t);var M=Gc(g(e),g(t),a,d,h,m);return m.delete(e),M;case ii:if(jr)return jr.call(e)==jr.call(t)}return!1}function e_(e,t,i,a,d,h){var m=i&J,g=Vl(e),E=g.length,$=Vl(t),M=$.length;if(E!=M&&!m)return!1;for(var R=E;R--;){var H=g[R];if(!(m?H in t:L.call(t,H)))return!1}var G=h.get(e),se=h.get(t);if(G&&se)return G==t&&se==e;var me=!0;h.set(e,t),h.set(t,e);for(var re=m;++R<E;){H=g[R];var Ee=e[H],Ae=t[H];if(a)var rn=m?a(Ae,Ee,H,t,e,h):a(Ee,Ae,H,e,t,h);if(!(rn===s?Ee===Ae||d(Ee,Ae,i,a,h):rn)){me=!1;break}re||(re=H=="constructor")}if(me&&!re){var qt=e.constructor,on=t.constructor;qt!=on&&"constructor"in e&&"constructor"in t&&!(typeof qt=="function"&&qt instanceof qt&&typeof on=="function"&&on instanceof on)&&(me=!1)}return h.delete(e),h.delete(t),me}function mi(e){return Xl(ed(e,s,ud),e+"")}function Vl(e){return hc(e,gt,Yl)}function Hl(e){return hc(e,Qt,jc)}var zl=Ko?function(e){return Ko.get(e)}:cu;function oa(e){for(var t=e.name+"",i=Gs[t],a=L.call(Gs,t)?i.length:0;a--;){var d=i[a],h=d.func;if(h==null||h==e)return d.name}return t}function Zs(e){var t=L.call(p,"placeholder")?p:e;return t.placeholder}function ie(){var e=p.iteratee||lu;return e=e===lu?mc:e,arguments.length?e(arguments[0],arguments[1]):e}function aa(e,t){var i=e.__data__;return l_(t)?i[typeof t=="string"?"string":"hash"]:i.map}function Kl(e){for(var t=gt(e),i=t.length;i--;){var a=t[i],d=e[a];t[i]=[a,d,Zc(d)]}return t}function bs(e,t){var i=fl(e,t);return vc(i)?i:s}function t_(e){var t=L.call(e,hs),i=e[hs];try{e[hs]=s;var a=!0}catch{}var d=de.call(e);return a&&(t?e[hs]=i:delete e[hs]),d}var Yl=yl?function(e){return e==null?[]:(e=Fe(e),Wn(yl(e),function(t){return tc.call(e,t)}))}:du,jc=yl?function(e){for(var t=[];e;)Un(t,Yl(e)),e=Ks(e);return t}:du,Dt=Rt;(El&&Dt(new El(new ArrayBuffer(1)))!=Cn||Kr&&Dt(new Kr)!=et||wl&&Dt(wl.resolve())!=Ht||Ys&&Dt(new Ys)!=vt||Yr&&Dt(new Yr)!=zt)&&(Dt=function(e){var t=Rt(e),i=t==Qe?e.constructor:s,a=i?ys(i):"";if(a)switch(a){case Rp:return Cn;case Fp:return et;case qp:return Ht;case Bp:return vt;case Wp:return zt}return t});function n_(e,t,i){for(var a=-1,d=i.length;++a<d;){var h=i[a],m=h.size;switch(h.type){case"drop":e+=m;break;case"dropRight":t-=m;break;case"take":t=Ot(t,e+m);break;case"takeRight":e=_t(e,t-m);break}}return{start:e,end:t}}function i_(e){var t=e.match(Ha);return t?t[1].split(za):[]}function Qc(e,t,i){t=Wi(t,e);for(var a=-1,d=t.length,h=!1;++a<d;){var m=Qn(t[a]);if(!(h=e!=null&&i(e,m)))break;e=e[m]}return h||++a!=d?h:(d=e==null?0:e.length,!!d&&ha(d)&&gi(m,d)&&(fe(e)||Es(e)))}function s_(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&L.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function Xc(e){return typeof e.constructor=="function"&&!no(e)?js(Ks(e)):{}}function r_(e,t,i){var a=e.constructor;switch(t){case at:return Bl(e);case Ge:case xn:return new a(+e);case Cn:return Uh(e,i);case yr:case lt:case Ds:case es:case Er:case Fn:case wr:case ks:case xr:return Lc(e,i);case et:return new a;case Le:case Lt:return new a(e);case ft:return Vh(e);case vt:return new a;case ii:return Hh(e)}}function o_(e,t){var i=t.length;if(!i)return e;var a=i-1;return t[a]=(i>1?"& ":"")+t[a],t=t.join(i>2?", ":" "),e.replace(Ls,`{
/* [wrapped with `+t+`] */
`)}function a_(e){return fe(e)||Es(e)||!!(nc&&e&&e[nc])}function gi(e,t){var i=typeof e;return t=t??Nt,!!t&&(i=="number"||i!="symbol"&&yo.test(e))&&e>-1&&e%1==0&&e<t}function Ft(e,t,i){if(!je(i))return!1;var a=typeof t;return(a=="number"?jt(i)&&gi(t,i.length):a=="string"&&t in i)?Ln(i[t],e):!1}function Gl(e,t){if(fe(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||sn(e)?!0:pt.test(e)||!ve.test(e)||t!=null&&e in Fe(t)}function l_(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function jl(e){var t=oa(e),i=p[t];if(typeof i!="function"||!(t in xe.prototype))return!1;if(e===i)return!0;var a=zl(i);return!!a&&e===a[0]}function u_(e){return!!B&&B in e}var c_=D?bi:fu;function no(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||w;return e===i}function Zc(e){return e===e&&!je(e)}function Jc(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==s||e in Fe(i))}}function d_(e){var t=fa(e,function(a){return i.size===U&&i.clear(),a}),i=t.cache;return t}function f_(e,t){var i=e[1],a=t[1],d=i|a,h=d<(j|te|be),m=a==be&&i==Se||a==be&&i==Be&&e[7].length<=t[8]||a==(be|Be)&&t[7].length<=t[8]&&i==Se;if(!(h||m))return e;a&j&&(e[2]=t[2],d|=i&j?0:Ce);var g=t[3];if(g){var E=e[3];e[3]=E?Mc(E,g,t[4]):g,e[4]=E?Yn(e[3],P):t[4]}return g=t[5],g&&(E=e[5],e[5]=E?Pc(E,g,t[6]):g,e[6]=E?Yn(e[5],P):t[6]),g=t[7],g&&(e[7]=g),a&be&&(e[8]=e[8]==null?t[8]:Ot(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=d,e}function p_(e){var t=[];if(e!=null)for(var i in Fe(e))t.push(i);return t}function h_(e){return de.call(e)}function ed(e,t,i){return t=_t(t===s?e.length-1:t,0),function(){for(var a=arguments,d=-1,h=_t(a.length-t,0),m=A(h);++d<h;)m[d]=a[t+d];d=-1;for(var g=A(t+1);++d<t;)g[d]=a[d];return g[t]=i(m),xt(e,this,g)}}function td(e,t){return t.length<2?e:gs(e,hn(t,0,-1))}function __(e,t){for(var i=e.length,a=Ot(t.length,i),d=Gt(e);a--;){var h=t[a];e[a]=gi(h,i)?d[h]:s}return e}function Ql(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var nd=sd(Cc),io=Dp||function(e,t){return ze.setTimeout(e,t)},Xl=sd(Fh);function id(e,t,i){var a=t+"";return Xl(e,o_(a,v_(i_(a),i)))}function sd(e){var t=0,i=0;return function(){var a=$p(),d=Ve-(a-i);if(i=a,d>0){if(++t>=ke)return arguments[0]}else t=0;return e.apply(s,arguments)}}function la(e,t){var i=-1,a=e.length,d=a-1;for(t=t===s?a:t;++i<t;){var h=Ll(i,d),m=e[h];e[h]=e[i],e[i]=m}return e.length=t,e}var rd=d_(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Tr,function(i,a,d,h){t.push(d?h.replace(qn,"$1"):a||i)}),t});function Qn(e){if(typeof e=="string"||sn(e))return e;var t=e+"";return t=="0"&&1/e==-He?"-0":t}function ys(e){if(e!=null){try{return S.call(e)}catch{}try{return e+""}catch{}}return""}function v_(e,t){return Yt(Pn,function(i){var a="_."+i[0];t&i[1]&&!mt(e,a)&&e.push(a)}),e.sort()}function od(e){if(e instanceof xe)return e.clone();var t=new fn(e.__wrapped__,e.__chain__);return t.__actions__=Gt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function m_(e,t,i){(i?Ft(e,t,i):t===s)?t=1:t=_t(pe(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var d=0,h=0,m=A(Ho(a/t));d<a;)m[h++]=hn(e,d,d+=t);return m}function g_(e){for(var t=-1,i=e==null?0:e.length,a=0,d=[];++t<i;){var h=e[t];h&&(d[a++]=h)}return d}function b_(){var e=arguments.length;if(!e)return[];for(var t=A(e-1),i=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Un(fe(i)?Gt(i):[i],Tt(t,1))}var y_=ge(function(e,t){return st(e)?Xr(e,Tt(t,1,st,!0)):[]}),E_=ge(function(e,t){var i=_n(t);return st(i)&&(i=s),st(e)?Xr(e,Tt(t,1,st,!0),ie(i,2)):[]}),w_=ge(function(e,t){var i=_n(t);return st(i)&&(i=s),st(e)?Xr(e,Tt(t,1,st,!0),s,i):[]});function x_(e,t,i){var a=e==null?0:e.length;return a?(t=i||t===s?1:pe(t),hn(e,t<0?0:t,a)):[]}function A_(e,t,i){var a=e==null?0:e.length;return a?(t=i||t===s?1:pe(t),t=a-t,hn(e,0,t<0?0:t)):[]}function C_(e,t){return e&&e.length?ea(e,ie(t,3),!0,!0):[]}function T_(e,t){return e&&e.length?ea(e,ie(t,3),!0):[]}function S_(e,t,i,a){var d=e==null?0:e.length;return d?(i&&typeof i!="number"&&Ft(e,t,i)&&(i=0,a=d),bh(e,t,i,a)):[]}function ad(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var d=i==null?0:pe(i);return d<0&&(d=_t(a+d,0)),Ws(e,ie(t,3),d)}function ld(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var d=a-1;return i!==s&&(d=pe(i),d=i<0?_t(a+d,0):Ot(d,a-1)),Ws(e,ie(t,3),d,!0)}function ud(e){var t=e==null?0:e.length;return t?Tt(e,1):[]}function I_(e){var t=e==null?0:e.length;return t?Tt(e,He):[]}function O_(e,t){var i=e==null?0:e.length;return i?(t=t===s?1:pe(t),Tt(e,t)):[]}function D_(e){for(var t=-1,i=e==null?0:e.length,a={};++t<i;){var d=e[t];a[d[0]]=d[1]}return a}function cd(e){return e&&e.length?e[0]:s}function k_(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var d=i==null?0:pe(i);return d<0&&(d=_t(a+d,0)),Dn(e,t,d)}function N_(e){var t=e==null?0:e.length;return t?hn(e,0,-1):[]}var L_=ge(function(e){var t=De(e,Fl);return t.length&&t[0]===e[0]?Il(t):[]}),$_=ge(function(e){var t=_n(e),i=De(e,Fl);return t===_n(i)?t=s:i.pop(),i.length&&i[0]===e[0]?Il(i,ie(t,2)):[]}),M_=ge(function(e){var t=_n(e),i=De(e,Fl);return t=typeof t=="function"?t:s,t&&i.pop(),i.length&&i[0]===e[0]?Il(i,s,t):[]});function P_(e,t){return e==null?"":Np.call(e,t)}function _n(e){var t=e==null?0:e.length;return t?e[t-1]:s}function R_(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var d=a;return i!==s&&(d=pe(i),d=d<0?_t(a+d,0):Ot(d,a-1)),t===t?ml(e,t,d):Ws(e,qo,d,!0)}function F_(e,t){return e&&e.length?Ec(e,pe(t)):s}var q_=ge(dd);function dd(e,t){return e&&e.length&&t&&t.length?Nl(e,t):e}function B_(e,t,i){return e&&e.length&&t&&t.length?Nl(e,t,ie(i,2)):e}function W_(e,t,i){return e&&e.length&&t&&t.length?Nl(e,t,s,i):e}var U_=mi(function(e,t){var i=e==null?0:e.length,a=Al(e,t);return Ac(e,De(t,function(d){return gi(d,i)?+d:d}).sort($c)),a});function V_(e,t){var i=[];if(!(e&&e.length))return i;var a=-1,d=[],h=e.length;for(t=ie(t,3);++a<h;){var m=e[a];t(m,a,e)&&(i.push(m),d.push(a))}return Ac(e,d),i}function Zl(e){return e==null?e:Pp.call(e)}function H_(e,t,i){var a=e==null?0:e.length;return a?(i&&typeof i!="number"&&Ft(e,t,i)?(t=0,i=a):(t=t==null?0:pe(t),i=i===s?a:pe(i)),hn(e,t,i)):[]}function z_(e,t){return Jo(e,t)}function K_(e,t,i){return Ml(e,t,ie(i,2))}function Y_(e,t){var i=e==null?0:e.length;if(i){var a=Jo(e,t);if(a<i&&Ln(e[a],t))return a}return-1}function G_(e,t){return Jo(e,t,!0)}function j_(e,t,i){return Ml(e,t,ie(i,2),!0)}function Q_(e,t){var i=e==null?0:e.length;if(i){var a=Jo(e,t,!0)-1;if(Ln(e[a],t))return a}return-1}function X_(e){return e&&e.length?Tc(e):[]}function Z_(e,t){return e&&e.length?Tc(e,ie(t,2)):[]}function J_(e){var t=e==null?0:e.length;return t?hn(e,1,t):[]}function ev(e,t,i){return e&&e.length?(t=i||t===s?1:pe(t),hn(e,0,t<0?0:t)):[]}function tv(e,t,i){var a=e==null?0:e.length;return a?(t=i||t===s?1:pe(t),t=a-t,hn(e,t<0?0:t,a)):[]}function nv(e,t){return e&&e.length?ea(e,ie(t,3),!1,!0):[]}function iv(e,t){return e&&e.length?ea(e,ie(t,3)):[]}var sv=ge(function(e){return Bi(Tt(e,1,st,!0))}),rv=ge(function(e){var t=_n(e);return st(t)&&(t=s),Bi(Tt(e,1,st,!0),ie(t,2))}),ov=ge(function(e){var t=_n(e);return t=typeof t=="function"?t:s,Bi(Tt(e,1,st,!0),s,t)});function av(e){return e&&e.length?Bi(e):[]}function lv(e,t){return e&&e.length?Bi(e,ie(t,2)):[]}function uv(e,t){return t=typeof t=="function"?t:s,e&&e.length?Bi(e,s,t):[]}function Jl(e){if(!(e&&e.length))return[];var t=0;return e=Wn(e,function(i){if(st(i))return t=_t(i.length,t),!0}),Hn(t,function(i){return De(e,$e(i))})}function fd(e,t){if(!(e&&e.length))return[];var i=Jl(e);return t==null?i:De(i,function(a){return xt(t,s,a)})}var cv=ge(function(e,t){return st(e)?Xr(e,t):[]}),dv=ge(function(e){return Rl(Wn(e,st))}),fv=ge(function(e){var t=_n(e);return st(t)&&(t=s),Rl(Wn(e,st),ie(t,2))}),pv=ge(function(e){var t=_n(e);return t=typeof t=="function"?t:s,Rl(Wn(e,st),s,t)}),hv=ge(Jl);function _v(e,t){return Dc(e||[],t||[],Qr)}function vv(e,t){return Dc(e||[],t||[],eo)}var mv=ge(function(e){var t=e.length,i=t>1?e[t-1]:s;return i=typeof i=="function"?(e.pop(),i):s,fd(e,i)});function pd(e){var t=p(e);return t.__chain__=!0,t}function gv(e,t){return t(e),e}function ua(e,t){return t(e)}var bv=mi(function(e){var t=e.length,i=t?e[0]:0,a=this.__wrapped__,d=function(h){return Al(h,e)};return t>1||this.__actions__.length||!(a instanceof xe)||!gi(i)?this.thru(d):(a=a.slice(i,+i+(t?1:0)),a.__actions__.push({func:ua,args:[d],thisArg:s}),new fn(a,this.__chain__).thru(function(h){return t&&!h.length&&h.push(s),h}))});function yv(){return pd(this)}function Ev(){return new fn(this.value(),this.__chain__)}function wv(){this.__values__===s&&(this.__values__=Sd(this.value()));var e=this.__index__>=this.__values__.length,t=e?s:this.__values__[this.__index__++];return{done:e,value:t}}function xv(){return this}function Av(e){for(var t,i=this;i instanceof Go;){var a=od(i);a.__index__=0,a.__values__=s,t?d.__wrapped__=a:t=a;var d=a;i=i.__wrapped__}return d.__wrapped__=e,t}function Cv(){var e=this.__wrapped__;if(e instanceof xe){var t=e;return this.__actions__.length&&(t=new xe(this)),t=t.reverse(),t.__actions__.push({func:ua,args:[Zl],thisArg:s}),new fn(t,this.__chain__)}return this.thru(Zl)}function Tv(){return Oc(this.__wrapped__,this.__actions__)}var Sv=ta(function(e,t,i){L.call(e,i)?++e[i]:_i(e,i,1)});function Iv(e,t,i){var a=fe(e)?Po:gh;return i&&Ft(e,t,i)&&(t=s),a(e,ie(t,3))}function Ov(e,t){var i=fe(e)?Wn:fc;return i(e,ie(t,3))}var Dv=Bc(ad),kv=Bc(ld);function Nv(e,t){return Tt(ca(e,t),1)}function Lv(e,t){return Tt(ca(e,t),He)}function $v(e,t,i){return i=i===s?1:pe(i),Tt(ca(e,t),i)}function hd(e,t){var i=fe(e)?Yt:qi;return i(e,ie(t,3))}function _d(e,t){var i=fe(e)?al:dc;return i(e,ie(t,3))}var Mv=ta(function(e,t,i){L.call(e,i)?e[i].push(t):_i(e,i,[t])});function Pv(e,t,i,a){e=jt(e)?e:er(e),i=i&&!a?pe(i):0;var d=e.length;return i<0&&(i=_t(d+i,0)),_a(e)?i<=d&&e.indexOf(t,i)>-1:!!d&&Dn(e,t,i)>-1}var Rv=ge(function(e,t,i){var a=-1,d=typeof t=="function",h=jt(e)?A(e.length):[];return qi(e,function(m){h[++a]=d?xt(t,m,i):Zr(m,t,i)}),h}),Fv=ta(function(e,t,i){_i(e,i,t)});function ca(e,t){var i=fe(e)?De:gc;return i(e,ie(t,3))}function qv(e,t,i,a){return e==null?[]:(fe(t)||(t=t==null?[]:[t]),i=a?s:i,fe(i)||(i=i==null?[]:[i]),wc(e,t,i))}var Bv=ta(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});function Wv(e,t,i){var a=fe(e)?Vn:nt,d=arguments.length<3;return a(e,ie(t,4),i,d,qi)}function Uv(e,t,i){var a=fe(e)?ll:nt,d=arguments.length<3;return a(e,ie(t,4),i,d,dc)}function Vv(e,t){var i=fe(e)?Wn:fc;return i(e,pa(ie(t,3)))}function Hv(e){var t=fe(e)?ac:Ph;return t(e)}function zv(e,t,i){(i?Ft(e,t,i):t===s)?t=1:t=pe(t);var a=fe(e)?ph:Rh;return a(e,t)}function Kv(e){var t=fe(e)?hh:qh;return t(e)}function Yv(e){if(e==null)return 0;if(jt(e))return _a(e)?fi(e):e.length;var t=Dt(e);return t==et||t==vt?e.size:Dl(e).length}function Gv(e,t,i){var a=fe(e)?Fr:Bh;return i&&Ft(e,t,i)&&(t=s),a(e,ie(t,3))}var jv=ge(function(e,t){if(e==null)return[];var i=t.length;return i>1&&Ft(e,t[0],t[1])?t=[]:i>2&&Ft(t[0],t[1],t[2])&&(t=[t[0]]),wc(e,Tt(t,1),[])}),da=Op||function(){return ze.Date.now()};function Qv(e,t){if(typeof t!="function")throw new r(x);return e=pe(e),function(){if(--e<1)return t.apply(this,arguments)}}function vd(e,t,i){return t=i?s:t,t=e&&t==null?e.length:t,vi(e,be,s,s,s,s,t)}function md(e,t){var i;if(typeof t!="function")throw new r(x);return e=pe(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=s),i}}var eu=ge(function(e,t,i){var a=j;if(i.length){var d=Yn(i,Zs(eu));a|=_e}return vi(e,a,t,i,d)}),gd=ge(function(e,t,i){var a=j|te;if(i.length){var d=Yn(i,Zs(gd));a|=_e}return vi(t,a,e,i,d)});function bd(e,t,i){t=i?s:t;var a=vi(e,Se,s,s,s,s,s,t);return a.placeholder=bd.placeholder,a}function yd(e,t,i){t=i?s:t;var a=vi(e,ce,s,s,s,s,s,t);return a.placeholder=yd.placeholder,a}function Ed(e,t,i){var a,d,h,m,g,E,$=0,M=!1,R=!1,H=!0;if(typeof e!="function")throw new r(x);t=vn(t)||0,je(i)&&(M=!!i.leading,R="maxWait"in i,h=R?_t(vn(i.maxWait)||0,t):h,H="trailing"in i?!!i.trailing:H);function G(rt){var $n=a,Ei=d;return a=d=s,$=rt,m=e.apply(Ei,$n),m}function se(rt){return $=rt,g=io(Ee,t),M?G(rt):m}function me(rt){var $n=rt-E,Ei=rt-$,Bd=t-$n;return R?Ot(Bd,h-Ei):Bd}function re(rt){var $n=rt-E,Ei=rt-$;return E===s||$n>=t||$n<0||R&&Ei>=h}function Ee(){var rt=da();if(re(rt))return Ae(rt);g=io(Ee,me(rt))}function Ae(rt){return g=s,H&&a?G(rt):(a=d=s,m)}function rn(){g!==s&&kc(g),$=0,a=E=d=g=s}function qt(){return g===s?m:Ae(da())}function on(){var rt=da(),$n=re(rt);if(a=arguments,d=this,E=rt,$n){if(g===s)return se(E);if(R)return kc(g),g=io(Ee,t),G(E)}return g===s&&(g=io(Ee,t)),m}return on.cancel=rn,on.flush=qt,on}var Xv=ge(function(e,t){return cc(e,1,t)}),Zv=ge(function(e,t,i){return cc(e,vn(t)||0,i)});function Jv(e){return vi(e,Ue)}function fa(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new r(x);var i=function(){var a=arguments,d=t?t.apply(this,a):a[0],h=i.cache;if(h.has(d))return h.get(d);var m=e.apply(this,a);return i.cache=h.set(d,m)||h,m};return i.cache=new(fa.Cache||hi),i}fa.Cache=hi;function pa(e){if(typeof e!="function")throw new r(x);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function em(e){return md(2,e)}var tm=Wh(function(e,t){t=t.length==1&&fe(t[0])?De(t[0],Ne(ie())):De(Tt(t,1),Ne(ie()));var i=t.length;return ge(function(a){for(var d=-1,h=Ot(a.length,i);++d<h;)a[d]=t[d].call(this,a[d]);return xt(e,this,a)})}),tu=ge(function(e,t){var i=Yn(t,Zs(tu));return vi(e,_e,s,t,i)}),wd=ge(function(e,t){var i=Yn(t,Zs(wd));return vi(e,ne,s,t,i)}),nm=mi(function(e,t){return vi(e,Be,s,s,s,t)});function im(e,t){if(typeof e!="function")throw new r(x);return t=t===s?t:pe(t),ge(e,t)}function sm(e,t){if(typeof e!="function")throw new r(x);return t=t==null?0:_t(pe(t),0),ge(function(i){var a=i[t],d=Ui(i,0,t);return a&&Un(d,a),xt(e,this,d)})}function rm(e,t,i){var a=!0,d=!0;if(typeof e!="function")throw new r(x);return je(i)&&(a="leading"in i?!!i.leading:a,d="trailing"in i?!!i.trailing:d),Ed(e,t,{leading:a,maxWait:t,trailing:d})}function om(e){return vd(e,1)}function am(e,t){return tu(ql(t),e)}function lm(){if(!arguments.length)return[];var e=arguments[0];return fe(e)?e:[e]}function um(e){return pn(e,K)}function cm(e,t){return t=typeof t=="function"?t:s,pn(e,K,t)}function dm(e){return pn(e,V|K)}function fm(e,t){return t=typeof t=="function"?t:s,pn(e,V|K,t)}function pm(e,t){return t==null||uc(e,t,gt(t))}function Ln(e,t){return e===t||e!==e&&t!==t}var hm=ra(Sl),_m=ra(function(e,t){return e>=t}),Es=_c((function(){return arguments})())?_c:function(e){return Xe(e)&&L.call(e,"callee")&&!tc.call(e,"callee")},fe=A.isArray,vm=$o?Ne($o):Ah;function jt(e){return e!=null&&ha(e.length)&&!bi(e)}function st(e){return Xe(e)&&jt(e)}function mm(e){return e===!0||e===!1||Xe(e)&&Rt(e)==Ge}var Vi=kp||fu,gm=Mo?Ne(Mo):Ch;function bm(e){return Xe(e)&&e.nodeType===1&&!so(e)}function ym(e){if(e==null)return!0;if(jt(e)&&(fe(e)||typeof e=="string"||typeof e.splice=="function"||Vi(e)||Js(e)||Es(e)))return!e.length;var t=Dt(e);if(t==et||t==vt)return!e.size;if(no(e))return!Dl(e).length;for(var i in e)if(L.call(e,i))return!1;return!0}function Em(e,t){return Jr(e,t)}function wm(e,t,i){i=typeof i=="function"?i:s;var a=i?i(e,t):s;return a===s?Jr(e,t,s,i):!!a}function nu(e){if(!Xe(e))return!1;var t=Rt(e);return t==Rn||t==Ii||typeof e.message=="string"&&typeof e.name=="string"&&!so(e)}function xm(e){return typeof e=="number"&&ic(e)}function bi(e){if(!je(e))return!1;var t=Rt(e);return t==ni||t==Oi||t==Si||t==br}function xd(e){return typeof e=="number"&&e==pe(e)}function ha(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Nt}function je(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Xe(e){return e!=null&&typeof e=="object"}var Ad=Bs?Ne(Bs):Sh;function Am(e,t){return e===t||Ol(e,t,Kl(t))}function Cm(e,t,i){return i=typeof i=="function"?i:s,Ol(e,t,Kl(t),i)}function Tm(e){return Cd(e)&&e!=+e}function Sm(e){if(c_(e))throw new le(y);return vc(e)}function Im(e){return e===null}function Om(e){return e==null}function Cd(e){return typeof e=="number"||Xe(e)&&Rt(e)==Le}function so(e){if(!Xe(e)||Rt(e)!=Qe)return!1;var t=Ks(e);if(t===null)return!0;var i=L.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&S.call(i)==We}var iu=Li?Ne(Li):Ih;function Dm(e){return xd(e)&&e>=-Nt&&e<=Nt}var Td=Pr?Ne(Pr):Oh;function _a(e){return typeof e=="string"||!fe(e)&&Xe(e)&&Rt(e)==Lt}function sn(e){return typeof e=="symbol"||Xe(e)&&Rt(e)==ii}var Js=Rr?Ne(Rr):Dh;function km(e){return e===s}function Nm(e){return Xe(e)&&Dt(e)==zt}function Lm(e){return Xe(e)&&Rt(e)==An}var $m=ra(kl),Mm=ra(function(e,t){return e<=t});function Sd(e){if(!e)return[];if(jt(e))return _a(e)?It(e):Gt(e);if(zr&&e[zr])return hl(e[zr]());var t=Dt(e),i=t==et?Wr:t==vt?Vs:er;return i(e)}function yi(e){if(!e)return e===0?e:0;if(e=vn(e),e===He||e===-He){var t=e<0?-1:1;return t*En}return e===e?e:0}function pe(e){var t=yi(e),i=t%1;return t===t?i?t-i:t:0}function Id(e){return e?ms(pe(e),0,St):0}function vn(e){if(typeof e=="number")return e;if(sn(e))return wn;if(je(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=je(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ds(e);var i=Ms.test(e);return i||Ka.test(e)?ci(e.slice(2),i?2:8):Di.test(e)?wn:+e}function Od(e){return jn(e,Qt(e))}function Pm(e){return e?ms(pe(e),-Nt,Nt):e===0?e:0}function Me(e){return e==null?"":nn(e)}var Rm=Qs(function(e,t){if(no(t)||jt(t)){jn(t,gt(t),e);return}for(var i in t)L.call(t,i)&&Qr(e,i,t[i])}),Dd=Qs(function(e,t){jn(t,Qt(t),e)}),va=Qs(function(e,t,i,a){jn(t,Qt(t),e,a)}),Fm=Qs(function(e,t,i,a){jn(t,gt(t),e,a)}),qm=mi(Al);function Bm(e,t){var i=js(e);return t==null?i:lc(i,t)}var Wm=ge(function(e,t){e=Fe(e);var i=-1,a=t.length,d=a>2?t[2]:s;for(d&&Ft(t[0],t[1],d)&&(a=1);++i<a;)for(var h=t[i],m=Qt(h),g=-1,E=m.length;++g<E;){var $=m[g],M=e[$];(M===s||Ln(M,w[$])&&!L.call(e,$))&&(e[$]=h[$])}return e}),Um=ge(function(e){return e.push(s,Yc),xt(kd,s,e)});function Vm(e,t){return qr(e,ie(t,3),Gn)}function Hm(e,t){return qr(e,ie(t,3),Tl)}function zm(e,t){return e==null?e:Cl(e,ie(t,3),Qt)}function Km(e,t){return e==null?e:pc(e,ie(t,3),Qt)}function Ym(e,t){return e&&Gn(e,ie(t,3))}function Gm(e,t){return e&&Tl(e,ie(t,3))}function jm(e){return e==null?[]:Xo(e,gt(e))}function Qm(e){return e==null?[]:Xo(e,Qt(e))}function su(e,t,i){var a=e==null?s:gs(e,t);return a===s?i:a}function Xm(e,t){return e!=null&&Qc(e,t,yh)}function ru(e,t){return e!=null&&Qc(e,t,Eh)}var Zm=Uc(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=de.call(t)),e[t]=i},au(Xt)),Jm=Uc(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=de.call(t)),L.call(e,t)?e[t].push(i):e[t]=[i]},ie),eg=ge(Zr);function gt(e){return jt(e)?oc(e):Dl(e)}function Qt(e){return jt(e)?oc(e,!0):kh(e)}function tg(e,t){var i={};return t=ie(t,3),Gn(e,function(a,d,h){_i(i,t(a,d,h),a)}),i}function ng(e,t){var i={};return t=ie(t,3),Gn(e,function(a,d,h){_i(i,d,t(a,d,h))}),i}var ig=Qs(function(e,t,i){Zo(e,t,i)}),kd=Qs(function(e,t,i,a){Zo(e,t,i,a)}),sg=mi(function(e,t){var i={};if(e==null)return i;var a=!1;t=De(t,function(h){return h=Wi(h,e),a||(a=h.length>1),h}),jn(e,Hl(e),i),a&&(i=pn(i,V|Q|K,Zh));for(var d=t.length;d--;)Pl(i,t[d]);return i});function rg(e,t){return Nd(e,pa(ie(t)))}var og=mi(function(e,t){return e==null?{}:Lh(e,t)});function Nd(e,t){if(e==null)return{};var i=De(Hl(e),function(a){return[a]});return t=ie(t),xc(e,i,function(a,d){return t(a,d[0])})}function ag(e,t,i){t=Wi(t,e);var a=-1,d=t.length;for(d||(d=1,e=s);++a<d;){var h=e==null?s:e[Qn(t[a])];h===s&&(a=d,h=i),e=bi(h)?h.call(e):h}return e}function lg(e,t,i){return e==null?e:eo(e,t,i)}function ug(e,t,i,a){return a=typeof a=="function"?a:s,e==null?e:eo(e,t,i,a)}var Ld=zc(gt),$d=zc(Qt);function cg(e,t,i){var a=fe(e),d=a||Vi(e)||Js(e);if(t=ie(t,4),i==null){var h=e&&e.constructor;d?i=a?new h:[]:je(e)?i=bi(h)?js(Ks(e)):{}:i={}}return(d?Yt:Gn)(e,function(m,g,E){return t(i,m,g,E)}),i}function dg(e,t){return e==null?!0:Pl(e,t)}function fg(e,t,i){return e==null?e:Ic(e,t,ql(i))}function pg(e,t,i,a){return a=typeof a=="function"?a:s,e==null?e:Ic(e,t,ql(i),a)}function er(e){return e==null?[]:$i(e,gt(e))}function hg(e){return e==null?[]:$i(e,Qt(e))}function _g(e,t,i){return i===s&&(i=t,t=s),i!==s&&(i=vn(i),i=i===i?i:0),t!==s&&(t=vn(t),t=t===t?t:0),ms(vn(e),t,i)}function vg(e,t,i){return t=yi(t),i===s?(i=t,t=0):i=yi(i),e=vn(e),wh(e,t,i)}function mg(e,t,i){if(i&&typeof i!="boolean"&&Ft(e,t,i)&&(t=i=s),i===s&&(typeof t=="boolean"?(i=t,t=s):typeof e=="boolean"&&(i=e,e=s)),e===s&&t===s?(e=0,t=1):(e=yi(e),t===s?(t=e,e=0):t=yi(t)),e>t){var a=e;e=t,t=a}if(i||e%1||t%1){var d=sc();return Ot(e+d*(t-e+rl("1e-"+((d+"").length-1))),t)}return Ll(e,t)}var gg=Xs(function(e,t,i){return t=t.toLowerCase(),e+(i?Md(t):t)});function Md(e){return ou(Me(e).toLowerCase())}function Pd(e){return e=Me(e),e&&e.replace(Ya,dl).replace(Za,"")}function bg(e,t,i){e=Me(e),t=nn(t);var a=e.length;i=i===s?a:ms(pe(i),0,a);var d=i;return i-=t.length,i>=0&&e.slice(i,d)==t}function yg(e){return e=Me(e),e&&Kt.test(e)?e.replace(bo,Us):e}function Eg(e){return e=Me(e),e&&ut.test(e)?e.replace(cn,"\\$&"):e}var wg=Xs(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),xg=Xs(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),Ag=qc("toLowerCase");function Cg(e,t,i){e=Me(e),t=pe(t);var a=t?fi(e):0;if(!t||a>=t)return e;var d=(t-a)/2;return sa(zo(d),i)+e+sa(Ho(d),i)}function Tg(e,t,i){e=Me(e),t=pe(t);var a=t?fi(e):0;return t&&a<t?e+sa(t-a,i):e}function Sg(e,t,i){e=Me(e),t=pe(t);var a=t?fi(e):0;return t&&a<t?sa(t-a,i)+e:e}function Ig(e,t,i){return i||t==null?t=0:t&&(t=+t),Mp(Me(e).replace(tn,""),t||0)}function Og(e,t,i){return(i?Ft(e,t,i):t===s)?t=1:t=pe(t),$l(Me(e),t)}function Dg(){var e=arguments,t=Me(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var kg=Xs(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});function Ng(e,t,i){return i&&typeof i!="number"&&Ft(e,t,i)&&(t=i=s),i=i===s?St:i>>>0,i?(e=Me(e),e&&(typeof t=="string"||t!=null&&!iu(t))&&(t=nn(t),!t&&Pi(e))?Ui(It(e),0,i):e.split(t,i)):[]}var Lg=Xs(function(e,t,i){return e+(i?" ":"")+ou(t)});function $g(e,t,i){return e=Me(e),i=i==null?0:ms(pe(i),0,e.length),t=nn(t),e.slice(i,i+t.length)==t}function Mg(e,t,i){var a=p.templateSettings;i&&Ft(e,t,i)&&(t=s),e=Me(e),t=va({},t,a,Kc);var d=va({},t.imports,a.imports,Kc),h=gt(d),m=$i(d,h),g,E,$=0,M=t.interpolate||Ps,R="__p += '",H=Hr((t.escape||Ps).source+"|"+M.source+"|"+(M===Cr?Tn:Ps).source+"|"+(t.evaluate||Ps).source+"|$","g"),G="//# sourceURL="+(L.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ui+"]")+`
`;e.replace(H,function(re,Ee,Ae,rn,qt,on){return Ae||(Ae=rn),R+=e.slice($,on).replace(Eo,Br),Ee&&(g=!0,R+=`' +
__e(`+Ee+`) +
'`),qt&&(E=!0,R+=`';
`+qt+`;
__p += '`),Ae&&(R+=`' +
((__t = (`+Ae+`)) == null ? '' : __t) +
'`),$=on+re.length,re}),R+=`';
`;var se=L.call(t,"variable")&&t.variable;if(!se)R=`with (obj) {
`+R+`
}
`;else if(Sr.test(se))throw new le(C);R=(E?R.replace(Ar,""):R).replace(q,"$1").replace(Wa,"$1;"),R="function("+(se||"obj")+`) {
`+(se?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(g?", __e = _.escape":"")+(E?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+R+`return __p
}`;var me=Fd(function(){return Te(h,G+"return "+R).apply(s,m)});if(me.source=R,nu(me))throw me;return me}function Pg(e){return Me(e).toLowerCase()}function Rg(e){return Me(e).toUpperCase()}function Fg(e,t,i){if(e=Me(e),e&&(i||t===s))return ds(e);if(!e||!(t=nn(t)))return e;var a=It(e),d=It(t),h=Mi(a,d),m=fs(a,d)+1;return Ui(a,h,m).join("")}function qg(e,t,i){if(e=Me(e),e&&(i||t===s))return e.slice(0,ps(e)+1);if(!e||!(t=nn(t)))return e;var a=It(e),d=fs(a,It(t))+1;return Ui(a,0,d).join("")}function Bg(e,t,i){if(e=Me(e),e&&(i||t===s))return e.replace(tn,"");if(!e||!(t=nn(t)))return e;var a=It(e),d=Mi(a,It(t));return Ui(a,d).join("")}function Wg(e,t){var i=Ye,a=Ze;if(je(t)){var d="separator"in t?t.separator:d;i="length"in t?pe(t.length):i,a="omission"in t?nn(t.omission):a}e=Me(e);var h=e.length;if(Pi(e)){var m=It(e);h=m.length}if(i>=h)return e;var g=i-fi(a);if(g<1)return a;var E=m?Ui(m,0,g).join(""):e.slice(0,g);if(d===s)return E+a;if(m&&(g+=E.length-g),iu(d)){if(e.slice(g).search(d)){var $,M=E;for(d.global||(d=Hr(d.source,Me($s.exec(d))+"g")),d.lastIndex=0;$=d.exec(M);)var R=$.index;E=E.slice(0,R===s?g:R)}}else if(e.indexOf(nn(d),g)!=g){var H=E.lastIndexOf(d);H>-1&&(E=E.slice(0,H))}return E+a}function Ug(e){return e=Me(e),e&&Ua.test(e)?e.replace(Ns,gl):e}var Vg=Xs(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),ou=qc("toUpperCase");function Rd(e,t,i){return e=Me(e),t=i?s:t,t===s?pl(e)?Ri(e):ul(e):e.match(t)||[]}var Fd=ge(function(e,t){try{return xt(e,s,t)}catch(i){return nu(i)?i:new le(i)}}),Hg=mi(function(e,t){return Yt(t,function(i){i=Qn(i),_i(e,i,eu(e[i],e))}),e});function zg(e){var t=e==null?0:e.length,i=ie();return e=t?De(e,function(a){if(typeof a[1]!="function")throw new r(x);return[i(a[0]),a[1]]}):[],ge(function(a){for(var d=-1;++d<t;){var h=e[d];if(xt(h[0],this,a))return xt(h[1],this,a)}})}function Kg(e){return mh(pn(e,V))}function au(e){return function(){return e}}function Yg(e,t){return e==null||e!==e?t:e}var Gg=Wc(),jg=Wc(!0);function Xt(e){return e}function lu(e){return mc(typeof e=="function"?e:pn(e,V))}function Qg(e){return bc(pn(e,V))}function Xg(e,t){return yc(e,pn(t,V))}var Zg=ge(function(e,t){return function(i){return Zr(i,e,t)}}),Jg=ge(function(e,t){return function(i){return Zr(e,i,t)}});function uu(e,t,i){var a=gt(t),d=Xo(t,a);i==null&&!(je(t)&&(d.length||!a.length))&&(i=t,t=e,e=this,d=Xo(t,gt(t)));var h=!(je(i)&&"chain"in i)||!!i.chain,m=bi(e);return Yt(d,function(g){var E=t[g];e[g]=E,m&&(e.prototype[g]=function(){var $=this.__chain__;if(h||$){var M=e(this.__wrapped__),R=M.__actions__=Gt(this.__actions__);return R.push({func:E,args:arguments,thisArg:e}),M.__chain__=$,M}return E.apply(e,Un([this.value()],arguments))})}),e}function eb(){return ze._===this&&(ze._=ae),this}function cu(){}function tb(e){return e=pe(e),ge(function(t){return Ec(t,e)})}var nb=Wl(De),ib=Wl(Po),sb=Wl(Fr);function qd(e){return Gl(e)?$e(Qn(e)):$h(e)}function rb(e){return function(t){return e==null?s:gs(e,t)}}var ob=Vc(),ab=Vc(!0);function du(){return[]}function fu(){return!1}function lb(){return{}}function ub(){return""}function cb(){return!0}function db(e,t){if(e=pe(e),e<1||e>Nt)return[];var i=St,a=Ot(e,St);t=ie(t),e-=St;for(var d=Hn(a,t);++i<e;)t(i);return d}function fb(e){return fe(e)?De(e,Qn):sn(e)?[e]:Gt(rd(Me(e)))}function pb(e){var t=++oe;return Me(e)+t}var hb=ia(function(e,t){return e+t},0),_b=Ul("ceil"),vb=ia(function(e,t){return e/t},1),mb=Ul("floor");function gb(e){return e&&e.length?Qo(e,Xt,Sl):s}function bb(e,t){return e&&e.length?Qo(e,ie(t,2),Sl):s}function yb(e){return Bo(e,Xt)}function Eb(e,t){return Bo(e,ie(t,2))}function wb(e){return e&&e.length?Qo(e,Xt,kl):s}function xb(e,t){return e&&e.length?Qo(e,ie(t,2),kl):s}var Ab=ia(function(e,t){return e*t},1),Cb=Ul("round"),Tb=ia(function(e,t){return e-t},0);function Sb(e){return e&&e.length?At(e,Xt):0}function Ib(e,t){return e&&e.length?At(e,ie(t,2)):0}return p.after=Qv,p.ary=vd,p.assign=Rm,p.assignIn=Dd,p.assignInWith=va,p.assignWith=Fm,p.at=qm,p.before=md,p.bind=eu,p.bindAll=Hg,p.bindKey=gd,p.castArray=lm,p.chain=pd,p.chunk=m_,p.compact=g_,p.concat=b_,p.cond=zg,p.conforms=Kg,p.constant=au,p.countBy=Sv,p.create=Bm,p.curry=bd,p.curryRight=yd,p.debounce=Ed,p.defaults=Wm,p.defaultsDeep=Um,p.defer=Xv,p.delay=Zv,p.difference=y_,p.differenceBy=E_,p.differenceWith=w_,p.drop=x_,p.dropRight=A_,p.dropRightWhile=C_,p.dropWhile=T_,p.fill=S_,p.filter=Ov,p.flatMap=Nv,p.flatMapDeep=Lv,p.flatMapDepth=$v,p.flatten=ud,p.flattenDeep=I_,p.flattenDepth=O_,p.flip=Jv,p.flow=Gg,p.flowRight=jg,p.fromPairs=D_,p.functions=jm,p.functionsIn=Qm,p.groupBy=Mv,p.initial=N_,p.intersection=L_,p.intersectionBy=$_,p.intersectionWith=M_,p.invert=Zm,p.invertBy=Jm,p.invokeMap=Rv,p.iteratee=lu,p.keyBy=Fv,p.keys=gt,p.keysIn=Qt,p.map=ca,p.mapKeys=tg,p.mapValues=ng,p.matches=Qg,p.matchesProperty=Xg,p.memoize=fa,p.merge=ig,p.mergeWith=kd,p.method=Zg,p.methodOf=Jg,p.mixin=uu,p.negate=pa,p.nthArg=tb,p.omit=sg,p.omitBy=rg,p.once=em,p.orderBy=qv,p.over=nb,p.overArgs=tm,p.overEvery=ib,p.overSome=sb,p.partial=tu,p.partialRight=wd,p.partition=Bv,p.pick=og,p.pickBy=Nd,p.property=qd,p.propertyOf=rb,p.pull=q_,p.pullAll=dd,p.pullAllBy=B_,p.pullAllWith=W_,p.pullAt=U_,p.range=ob,p.rangeRight=ab,p.rearg=nm,p.reject=Vv,p.remove=V_,p.rest=im,p.reverse=Zl,p.sampleSize=zv,p.set=lg,p.setWith=ug,p.shuffle=Kv,p.slice=H_,p.sortBy=jv,p.sortedUniq=X_,p.sortedUniqBy=Z_,p.split=Ng,p.spread=sm,p.tail=J_,p.take=ev,p.takeRight=tv,p.takeRightWhile=nv,p.takeWhile=iv,p.tap=gv,p.throttle=rm,p.thru=ua,p.toArray=Sd,p.toPairs=Ld,p.toPairsIn=$d,p.toPath=fb,p.toPlainObject=Od,p.transform=cg,p.unary=om,p.union=sv,p.unionBy=rv,p.unionWith=ov,p.uniq=av,p.uniqBy=lv,p.uniqWith=uv,p.unset=dg,p.unzip=Jl,p.unzipWith=fd,p.update=fg,p.updateWith=pg,p.values=er,p.valuesIn=hg,p.without=cv,p.words=Rd,p.wrap=am,p.xor=dv,p.xorBy=fv,p.xorWith=pv,p.zip=hv,p.zipObject=_v,p.zipObjectDeep=vv,p.zipWith=mv,p.entries=Ld,p.entriesIn=$d,p.extend=Dd,p.extendWith=va,uu(p,p),p.add=hb,p.attempt=Fd,p.camelCase=gg,p.capitalize=Md,p.ceil=_b,p.clamp=_g,p.clone=um,p.cloneDeep=dm,p.cloneDeepWith=fm,p.cloneWith=cm,p.conformsTo=pm,p.deburr=Pd,p.defaultTo=Yg,p.divide=vb,p.endsWith=bg,p.eq=Ln,p.escape=yg,p.escapeRegExp=Eg,p.every=Iv,p.find=Dv,p.findIndex=ad,p.findKey=Vm,p.findLast=kv,p.findLastIndex=ld,p.findLastKey=Hm,p.floor=mb,p.forEach=hd,p.forEachRight=_d,p.forIn=zm,p.forInRight=Km,p.forOwn=Ym,p.forOwnRight=Gm,p.get=su,p.gt=hm,p.gte=_m,p.has=Xm,p.hasIn=ru,p.head=cd,p.identity=Xt,p.includes=Pv,p.indexOf=k_,p.inRange=vg,p.invoke=eg,p.isArguments=Es,p.isArray=fe,p.isArrayBuffer=vm,p.isArrayLike=jt,p.isArrayLikeObject=st,p.isBoolean=mm,p.isBuffer=Vi,p.isDate=gm,p.isElement=bm,p.isEmpty=ym,p.isEqual=Em,p.isEqualWith=wm,p.isError=nu,p.isFinite=xm,p.isFunction=bi,p.isInteger=xd,p.isLength=ha,p.isMap=Ad,p.isMatch=Am,p.isMatchWith=Cm,p.isNaN=Tm,p.isNative=Sm,p.isNil=Om,p.isNull=Im,p.isNumber=Cd,p.isObject=je,p.isObjectLike=Xe,p.isPlainObject=so,p.isRegExp=iu,p.isSafeInteger=Dm,p.isSet=Td,p.isString=_a,p.isSymbol=sn,p.isTypedArray=Js,p.isUndefined=km,p.isWeakMap=Nm,p.isWeakSet=Lm,p.join=P_,p.kebabCase=wg,p.last=_n,p.lastIndexOf=R_,p.lowerCase=xg,p.lowerFirst=Ag,p.lt=$m,p.lte=Mm,p.max=gb,p.maxBy=bb,p.mean=yb,p.meanBy=Eb,p.min=wb,p.minBy=xb,p.stubArray=du,p.stubFalse=fu,p.stubObject=lb,p.stubString=ub,p.stubTrue=cb,p.multiply=Ab,p.nth=F_,p.noConflict=eb,p.noop=cu,p.now=da,p.pad=Cg,p.padEnd=Tg,p.padStart=Sg,p.parseInt=Ig,p.random=mg,p.reduce=Wv,p.reduceRight=Uv,p.repeat=Og,p.replace=Dg,p.result=ag,p.round=Cb,p.runInContext=b,p.sample=Hv,p.size=Yv,p.snakeCase=kg,p.some=Gv,p.sortedIndex=z_,p.sortedIndexBy=K_,p.sortedIndexOf=Y_,p.sortedLastIndex=G_,p.sortedLastIndexBy=j_,p.sortedLastIndexOf=Q_,p.startCase=Lg,p.startsWith=$g,p.subtract=Tb,p.sum=Sb,p.sumBy=Ib,p.template=Mg,p.times=db,p.toFinite=yi,p.toInteger=pe,p.toLength=Id,p.toLower=Pg,p.toNumber=vn,p.toSafeInteger=Pm,p.toString=Me,p.toUpper=Rg,p.trim=Fg,p.trimEnd=qg,p.trimStart=Bg,p.truncate=Wg,p.unescape=Ug,p.uniqueId=pb,p.upperCase=Vg,p.upperFirst=ou,p.each=hd,p.eachRight=_d,p.first=cd,uu(p,(function(){var e={};return Gn(p,function(t,i){L.call(p.prototype,i)||(e[i]=t)}),e})(),{chain:!1}),p.VERSION=f,Yt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),Yt(["drop","take"],function(e,t){xe.prototype[e]=function(i){i=i===s?1:_t(pe(i),0);var a=this.__filtered__&&!t?new xe(this):this.clone();return a.__filtered__?a.__takeCount__=Ot(i,a.__takeCount__):a.__views__.push({size:Ot(i,St),type:e+(a.__dir__<0?"Right":"")}),a},xe.prototype[e+"Right"]=function(i){return this.reverse()[e](i).reverse()}}),Yt(["filter","map","takeWhile"],function(e,t){var i=t+1,a=i==kt||i==Je;xe.prototype[e]=function(d){var h=this.clone();return h.__iteratees__.push({iteratee:ie(d,3),type:i}),h.__filtered__=h.__filtered__||a,h}}),Yt(["head","last"],function(e,t){var i="take"+(t?"Right":"");xe.prototype[e]=function(){return this[i](1).value()[0]}}),Yt(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");xe.prototype[e]=function(){return this.__filtered__?new xe(this):this[i](1)}}),xe.prototype.compact=function(){return this.filter(Xt)},xe.prototype.find=function(e){return this.filter(e).head()},xe.prototype.findLast=function(e){return this.reverse().find(e)},xe.prototype.invokeMap=ge(function(e,t){return typeof e=="function"?new xe(this):this.map(function(i){return Zr(i,e,t)})}),xe.prototype.reject=function(e){return this.filter(pa(ie(e)))},xe.prototype.slice=function(e,t){e=pe(e);var i=this;return i.__filtered__&&(e>0||t<0)?new xe(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==s&&(t=pe(t),i=t<0?i.dropRight(-t):i.take(t-e)),i)},xe.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},xe.prototype.toArray=function(){return this.take(St)},Gn(xe.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),d=p[a?"take"+(t=="last"?"Right":""):t],h=a||/^find/.test(t);d&&(p.prototype[t]=function(){var m=this.__wrapped__,g=a?[1]:arguments,E=m instanceof xe,$=g[0],M=E||fe(m),R=function(Ee){var Ae=d.apply(p,Un([Ee],g));return a&&H?Ae[0]:Ae};M&&i&&typeof $=="function"&&$.length!=1&&(E=M=!1);var H=this.__chain__,G=!!this.__actions__.length,se=h&&!H,me=E&&!G;if(!h&&M){m=me?m:new xe(this);var re=e.apply(m,g);return re.__actions__.push({func:ua,args:[R],thisArg:s}),new fn(re,H)}return se&&me?e.apply(this,g):(re=this.thru(R),se?a?re.value()[0]:re.value():re)})}),Yt(["pop","push","shift","sort","splice","unshift"],function(e){var t=l[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var d=arguments;if(a&&!this.__chain__){var h=this.value();return t.apply(fe(h)?h:[],d)}return this[i](function(m){return t.apply(fe(m)?m:[],d)})}}),Gn(xe.prototype,function(e,t){var i=p[t];if(i){var a=i.name+"";L.call(Gs,a)||(Gs[a]=[]),Gs[a].push({name:t,func:i})}}),Gs[na(s,te).name]=[{name:"wrapper",func:s}],xe.prototype.clone=Up,xe.prototype.reverse=Vp,xe.prototype.value=Hp,p.prototype.at=bv,p.prototype.chain=yv,p.prototype.commit=Ev,p.prototype.next=wv,p.prototype.plant=Av,p.prototype.reverse=Cv,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=Tv,p.prototype.first=p.prototype.head,zr&&(p.prototype[zr]=xv),p}),Fi=Vr();di?((di.exports=Fi)._=Fi,$r._=Fi):ze._=Fi}).call(Hw)})(lo,lo.exports)),lo.exports}var fo=zw();function Kw(u){let n=null,s=null,f=new Map;const v=V=>JSON.stringify(V),y=async(V,Q,K,J)=>{if(J===(K==="cart"?n:s))return{success:!0,skipped:!0};if(f.has(K))return console.log(` Skipping duplicate ${K} request`),{success:!1,skipped:!0};const ee=new AbortController,j=setTimeout(()=>ee.abort(),5e3);f.set(K,!0);try{const te=await fetch(V,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify(Q),signal:ee.signal});if(clearTimeout(j),!te.ok)throw new Error(`HTTP ${te.status}`);const Ce=await te.json();return K==="cart"?n=J:s=J,console.log(` ${K} updated - v${Ce.version}`),{success:!0,data:Ce}}catch(te){return te.name==="AbortError"?console.warn(` ${K} update timeout`):console.error(` Failed to update ${K}:`,te.message),{success:!1,error:te}}finally{f.delete(K)}},x=fo.debounce(async V=>{const Q=v(V);await y("/api/pos/terminal/update-cart",{terminal_id:u,cart:V},"cart",Q)},800),C=fo.debounce(async V=>{const Q=v(V);await y("/api/pos/terminal/update-ui",{terminal_id:u,ui:V},"ui",Q)},300),T=async V=>{const Q=v(V);return await y("/api/pos/terminal/update-cart",{terminal_id:u,cart:V},"cart",Q)},U=fo.debounce(async(V,Q)=>{const K=v(V),J=v(Q);if(K===n&&J===s)return{success:!0,skipped:!0};const ee=new AbortController,j=setTimeout(()=>ee.abort(),5e3);try{const te=await fetch("/api/pos/terminal/update-both",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify({terminal_id:u,cart:V,ui:Q}),signal:ee.signal});if(clearTimeout(j),!te.ok)throw new Error(`HTTP ${te.status}`);const Ce=await te.json();return n=K,s=J,console.log(` Batch update successful - v${Ce.version}`),{success:!0,data:Ce}}catch(te){return console.error(" Batch update failed:",te.message),{success:!1,error:te}}},500);return{broadcastCartUpdate:x,broadcastUIUpdate:C,broadcastImmediateCartUpdate:T,broadcastBatchUpdate:U,clearBroadcastCache:()=>{n=null,s=null,f.clear(),console.log(" Broadcast cache cleared")}}}const Yw={key:0,class:"modal fade show d-block",tabindex:"-1",style:{background:"rgba(0,0,0,0.5)","z-index":"9999"}},Gw={class:"modal-dialog modal-lg modal-dialog-centered"},jw={class:"modal-content"},Qw={class:"modal-header bg-warning text-dark"},Xw={class:"modal-body"},Zw={key:0,class:"alert alert-info mb-3"},Jw={class:"mb-0"},ex={key:1,class:"alert alert-danger"},tx={class:"text-muted"},nx={key:2},ix={class:"fw-bold"},sx={key:0,class:"badge bg-secondary ms-2"},rx={class:"table table-sm table-bordered"},ox={class:"text-end"},ax={class:"text-end"},lx={class:"text-end text-danger fw-bold"},ux={class:"modal-footer"},cx={__name:"ConfirmMissingIngredientsModal",props:{show:Boolean,missingIngredients:{type:Array,default:()=>[]}},emits:["close","confirm"],setup(u,{emit:n}){const s=u,f=n;ws(()=>s.show,C=>{console.log(" Modal show changed:",C),C&&console.log(" Missing ingredients:",s.missingIngredients)},{immediate:!0}),ws(()=>s.missingIngredients,C=>{console.log(" Missing ingredients changed:",C),console.log(" Array length:",C?.length),console.log(" Is array?:",Array.isArray(C))},{immediate:!0,deep:!0});const v=we(()=>{if(console.log(" Computing groupedByItem"),console.log(" Input missingIngredients:",s.missingIngredients),!Array.isArray(s.missingIngredients)||s.missingIngredients.length===0)return console.log(" No ingredients to group (not array or empty)"),{};const C={};return s.missingIngredients.forEach((T,U)=>{console.log(` Processing ingredient ${U}:`,T);const P=`${T.item_id}-${T.variant_id||"default"}`;C[P]||(C[P]={item_title:T.item_title,variant_name:T.variant_name,ingredients:[]}),C[P].ingredients.push(T)}),console.log(" Final grouped data:",C),C}),y=we(()=>s.missingIngredients&&s.missingIngredients.length>0),x=we(()=>Object.keys(v.value).length);return(C,T)=>u.show?dt((I(),O("div",Yw,[c("div",Gw,[c("div",jw,[c("div",Qw,[T[4]||(T[4]=c("h5",{class:"modal-title"},[c("i",{class:"bi bi-exclamation-triangle-fill me-2"}),he(" Ingredient Shortage Warning ")],-1)),c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:T[0]||(T[0]=U=>f("close"))},[...T[3]||(T[3]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),c("div",Xw,[y.value?X("",!0):(I(),O("div",Zw,[T[5]||(T[5]=c("strong",null,"Debug Info:",-1)),c("ul",Jw,[c("li",null,"Has data: "+N(y.value),1),c("li",null,"Array length: "+N(u.missingIngredients?.length||0),1),c("li",null,"Is array: "+N(Array.isArray(u.missingIngredients)),1),c("li",null,"Group count: "+N(x.value),1)])])),T[10]||(T[10]=c("div",{class:"alert alert-warning"},[c("strong",null,"Warning:"),he(" The following items have ingredient shortages. The order can still be placed, but pending ingredient deductions will be recorded and automatically deducted when stock arrives. ")],-1)),y.value?(I(),O("div",nx,[(I(!0),O(Pe,null,ot(v.value,(U,P)=>(I(),O("div",{key:P,class:"mb-4"},[c("h6",ix,[he(N(U.item_title)+" ",1),U.variant_name?(I(),O("span",sx,N(U.variant_name),1)):X("",!0)]),c("table",rx,[T[9]||(T[9]=c("thead",{class:"table-light"},[c("tr",null,[c("th",null,"Ingredient"),c("th",{class:"text-end"},"Required"),c("th",{class:"text-end"},"Available"),c("th",{class:"text-end"},"Short")])],-1)),c("tbody",null,[(I(!0),O(Pe,null,ot(U.ingredients,V=>(I(),O("tr",{key:V.inventory_item_id},[c("td",null,N(V.inventory_item_name),1),c("td",ox,N(V.required_quantity)+" "+N(V.unit),1),c("td",ax,N(V.available_quantity)+" "+N(V.unit),1),c("td",lx,N(V.shortage_quantity)+" "+N(V.unit),1)]))),128))])])]))),128))])):(I(),O("div",ex,[T[6]||(T[6]=c("i",{class:"bi bi-exclamation-circle me-2"},null,-1)),T[7]||(T[7]=he(" No missing ingredient data available. ",-1)),T[8]||(T[8]=c("br",null,null,-1)),c("small",tx," Received "+N(u.missingIngredients?.length||0)+" ingredient(s) ",1)]))]),c("div",ux,[c("button",{type:"button",class:"btn btn-secondary px-2 py-2",onClick:T[1]||(T[1]=U=>f("close"))}," Cancel Order "),c("button",{type:"button",class:"btn btn-primary px-4 py-2",onClick:T[2]||(T[2]=U=>f("confirm"))}," Proceed Anyway ")])])])],512)),[[Ki,u.show]]):X("",!0)}},dx={class:"page-wrapper"},fx={class:"container-fluid px-3 py-3"},px={class:"row gx-3 gy-3"},hx={key:0,class:"row g-3 tablet-screen"},_x={class:"d-flex justify-content-between justify align-items-center mb-3"},vx={style:{width:"250px",position:"relative"}},mx={key:1,type:"text",class:"form-control form-control-sm",placeholder:"Search categories...",disabled:"",style:{"border-radius":"8px",padding:"8px 12px"}},gx={key:0,class:"col-12 text-center py-5"},bx=["onClick"],yx={class:"cat-icon-wrap"},Ex={class:"cat-icon"},wx=["src"],xx={key:1},Ax={class:"cat-name"},Cx={class:"cat-pill"},Tx={key:0,class:"text-danger ms-1"},Sx={key:0,class:"col-12"},Ix={key:1},Ox={class:"d-flex flex-wrap gap-2 align-items-center mb-4"},Dx={class:"fw-bold mb-0"},kx={class:"d-flex gap-2 ms-auto align-items-center"},Nx={class:"search-wrap position-relative"},Lx={key:0,class:"col-12"},$x={class:"alert alert-warning border-0 rounded-4 text-center py-5"},Mx={class:"text-muted mb-3"},Px={class:"row g-3"},Rx={key:0,class:"card rounded-4 shadow-sm overflow-hidden border-3 w-100 d-flex flex-row align-items-stretch",style:{"border-color":"#dc3545"}},Fx={class:"position-relative",style:{flex:"0 0 40%","max-width":"40%"}},qx=["src"],Bx={class:"position-absolute top-0 start-0 m-1 px-2 py-1 rounded-pill text-white fw-semibold bg-danger",style:{"font-size":"0.58rem","letter-spacing":"0.3px"}},Wx={class:"p-3 d-flex flex-column justify-content-between",style:{flex:"1 1 60%","min-width":"0",position:"relative"}},Ux={class:"h5 fw-bold mb-2 menu-name text-danger"},Vx={class:"mb-3"},Hx={class:"d-flex flex-wrap gap-1"},zx={class:"mt-2"},Kx=["onClick"],Yx=["onClick","disabled"],Gx={class:"qty-box border rounded-pill px-2 py-2 text-center fw-semibold left-card-cntrl-btn",style:{"min-width":"55px"}},jx=["onClick"],Qx={class:"position-relative",style:{flex:"0 0 40%","max-width":"40%"}},Xx=["src"],Zx={key:0,class:"position-absolute bottom-0 start-0 end-0 text-center bg-light bg-opacity-75 fw-semibold",style:{"font-size":"0.6rem !important",padding:"2px 4px"}},Jx={key:0,class:"text-muted text-decoration-line-through me-1"},eA={class:"fw-bold text-success me-2"},tA={key:1,class:"text-muted text-decoration-line-through me-1"},nA={class:"fw-bold text-success"},iA={class:"text-decoration-line-through opacity-75 me-1"},sA={class:"fw-bold text-white"},rA={key:1,class:"position-absolute bottom-0 start-0 end-0 m-2 badge bg-danger py-2"},oA={class:"p-3 d-flex flex-column justify-content-between",style:{flex:"1 1 60%","min-width":"0",position:"relative"}},aA={key:0,class:"position-absolute px-2 py-1 rounded-pill bg-success text-white small fw-bold",style:{fontSize:"0.7rem",top:"7px",right:"7px"}},lA={key:0,class:"mb-3"},uA=["onUpdate:modelValue","onChange"],cA=["value"],dA={key:1,class:"mb-3"},fA={key:0,class:"d-flex flex-wrap gap-1"},pA={key:1},hA={class:"d-flex justify-content-between align-items-center w-100"},_A={class:"text-muted"},vA={class:"fw-semibold text-success"},mA=["onClick"],gA=["onClick","disabled"],bA={class:"qty-box border rounded-pill px-2 py-2 text-center fw-semibold left-card-cntrl-btn",style:{"min-width":"55px"}},yA=["onClick"],EA={key:0,class:"col-lg-4 right-cart"},wA={class:"col-12 d-flex align-items-center justify-content-end gap-2 mb-2"},xA={key:0,class:"badge bg-danger ms-1"},AA={class:"cart card border-0 shadow-lg rounded-4"},CA={class:"cart-header"},TA={class:"order-type"},SA=["onClick"],IA={class:"cart-body"},OA={class:"mb-3"},DA={key:0,class:"row g-2"},kA={class:"col-6 table-dropdown"},NA=["value"],LA={key:0,class:"invalid-feedback d-block"},$A={class:"col-6 table-dropdown"},MA={key:1},PA={key:0,class:"invalid-feedback d-block"},RA={key:2,class:"mt-2"},FA={key:0,class:"invalid-feedback d-block"},qA={key:1,class:"invalid-feedback d-block"},BA={class:"cart-lines"},WA={key:0,class:"empty"},UA={class:"line-left"},VA=["src"],HA={class:"meta"},zA=["title"],KA={key:0},YA={class:"badge bg-success",style:{"font-size":"0.65rem"}},GA={key:1,class:"addon-icons mt-1"},jA=["onClick","title"],QA={class:"text-muted small"},XA={key:2,class:"badge bg-success mt-1 ms-1",style:{"font-size":"0.65rem"}},ZA={key:3,class:"mt-1"},JA={class:"badge",style:{"font-size":"0.65rem",background:"#1B1670",color:"white"}},eC={key:4,class:"note"},tC={class:"line-right"},nC={class:"qty-controls"},iC=["onClick"],sC={class:"qty"},rC=["onClick"],oC={class:"price-delete"},aC={class:"price"},lC=["onClick"],uC={class:"totals"},cC={class:"trow"},dC={class:"sub-total"},fC={key:0,class:"trow"},pC={class:"text-info"},hC={key:1,class:"trow"},_C={class:"fw-semibold"},vC={key:2,class:"trow"},mC={class:"fw-semibold"},gC={key:3,class:"trow"},bC={class:"text-danger"},yC={key:4,class:"promos-section mb-3"},EC={class:"promo-total mt-2 rounded-3 bg-success-subtle"},wC={class:"d-flex justify-content-between align-items-center"},xC={class:"text-success fs-6"},AC={key:5,class:"pending-discounts-section mb-3"},CC={class:"d-flex align-items-center gap-2 text-warning"},TC={class:"text-warning"},SC={key:6,class:"approved-discounts-section mb-3"},IC={class:"trow border-top pt-2 mt-2"},OC={class:"text-success"},DC={class:"trow total"},kC={class:"mb-3"},NC={class:"mb-3"},LC={class:"cart-footer"},$C={class:"modal fade",id:"chooseItem",tabindex:"-1","aria-hidden":"true"},MC={class:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"},PC={class:"modal-content rounded-3 shadow border-0",style:{"max-height":"90vh"}},RC={class:"modal-header border-0 bg-light py-2 px-3 rounded-top"},FC={class:"fw-bold mb-0"},qC={class:"px-3 pt-2 progress-bar"},BC={class:"stepper-container position-relative",style:{"min-height":"60px"}},WC={key:0,class:"bi bi-check-lg",style:{"font-size":"0.7rem"}},UC={key:1,style:{"font-size":"0.75rem"}},VC={class:"modal-body px-3 py-2"},HC={class:"row g-3 mb-3"},zC={class:"col-lg-5"},KC={class:"position-relative mb-3"},YC=["src"],GC={key:0,class:"badge bg-danger px-2 py-1 position-absolute top-0 end-0 rounded-end-0 rounded-bottom-0 shadow-sm",style:{"font-size":"0.7rem"}},jC={class:"rounded-3 border shadow-sm p-3 bg-white"},QC={class:"d-flex justify-content-between mb-1",style:{"font-size":"0.85rem"}},XC={key:0,class:"d-flex justify-content-between mb-1",style:{"font-size":"0.85rem"}},ZC={class:"text-success"},JC={class:"d-flex justify-content-between",style:{"font-size":"1rem"}},eT={class:"fw-bold text-primary"},tT={class:"col-lg-7"},nT={class:"px-1"},iT={class:"step-content"},sT={class:"row g-2"},rT=["onClick"],oT={class:"d-flex justify-content-between align-items-center"},aT={class:"fw-bold mb-0",style:{"font-size":"0.85rem"}},lT={class:"d-flex justify-content-between align-items-center gap-2"},uT={key:0,class:"text-primary"},cT={style:{"font-size":"0.9rem"}},dT={class:"step-content"},fT={class:"row g-2"},pT=["id","checked","disabled","onChange"],hT=["for"],_T={class:"step-content"},vT={class:"fw-semibold mb-2 d-flex justify-content-between",style:{"font-size":"0.85rem"}},mT={key:0,class:"badge rounded-pill bg-primary",style:{"font-size":"0.7rem"}},gT={class:"row g-2"},bT={class:"d-flex align-items-center flex-grow-1"},yT=["id","checked","onChange"],ET=["for"],wT={class:"text-success fw-semibold ms-1"},xT={key:0,class:"d-flex align-items-center gap-2"},AT=["onClick","disabled"],CT={class:"fw-bold",style:{"min-width":"25px","text-align":"center","font-size":"0.9rem"}},TT=["onClick"],ST={class:"step-content"},IT={class:"summary-card p-3 rounded-3 shadow-sm mb-3"},OT={key:0,class:"summary-item"},DT={class:"summary-value"},kT={key:1,class:"summary-item"},NT={class:"summary-value"},LT={key:2,class:"summary-item"},$T={class:"summary-value"},MT={class:"d-flex align-items-center mb-3"},PT={class:"qty-group gap-1"},RT=["disabled"],FT={class:"qty-box rounded-pill"},qT={class:"mb-2"},BT={class:"text-end small text-muted mt-1",style:{"font-size":"0.7rem"}},WT={class:"modal-footer border-0 px-3 py-2 d-flex justify-content-end gap-2"},UT={class:"modal fade",id:"customizeDealModal",tabindex:"-1","aria-hidden":"true"},VT={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},HT={class:"modal-content rounded-3 shadow border-0",style:{"max-height":"90vh"}},zT={class:"modal-header border-0 bg-light py-2 px-3 rounded-top"},KT={class:"fw-bold mb-0"},YT={class:"text-muted small mb-0",style:{"font-size":"0.8rem"}},GT={class:"px-3 pt-2 progress-bar"},jT={class:"stepper-container position-relative",style:{"min-height":"60px"}},QT={key:0,class:"bi bi-check-lg",style:{"font-size":"0.7rem"}},XT={key:1,style:{"font-size":"0.75rem"}},ZT={class:"modal-body px-3 py-2"},JT={class:"row g-3 mb-3"},eS={class:"col-lg-4"},tS={class:"position-relative mb-3"},nS=["src"],iS={class:"badge bg-danger position-absolute top-0 end-0 m-2"},sS={key:0},rS={key:1},oS={class:"rounded-3 border shadow-sm p-3 bg-white mb-3"},aS={class:"fw-bold mb-2 d-flex align-content-center",style:{"font-size":"0.9rem"}},lS={class:"d-flex align-items-center"},uS={class:"flex-grow-1"},cS={class:"text-muted small"},dS={key:0,class:"text-success small fw-semibold"},fS={class:"fw-bold text-primary"},pS={class:"rounded-3 border shadow-sm p-3 bg-white"},hS={class:"list-group list-group-flush"},_S={class:"d-flex align-items-center"},vS={key:0,class:"bi bi-check-circle-fill text-success me-2"},mS={key:2,class:"bi bi-circle text-muted me-2"},gS={class:"col-lg-8"},bS={class:"px-1"},yS={class:"step-content"},ES={class:"d-flex align-items-start mb-2"},wS={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},xS={class:"row g-2"},AS=["id","checked","disabled","onChange"],CS=["for"],TS={class:"step-content"},SS={class:"d-flex align-items-start mb-2"},IS={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},OS={class:"fw-semibold mb-1 d-flex justify-content-between",style:{"font-size":"0.85rem"}},DS={key:0,class:"badge rounded-pill bg-primary",style:{"font-size":"0.7rem"}},kS={class:"step-content"},NS={class:"d-flex align-items-start mb-2"},LS={class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},$S={class:"summary-card p-3 rounded-3 shadow-sm mb-3"},MS={class:"summary-item"},PS={class:"summary-value"},RS={class:"summary-item"},FS={class:"summary-value"},qS={key:0,class:"summary-item"},BS={class:"summary-value text-danger"},WS={key:1,class:"summary-item"},US={class:"summary-value text-success"},VS={key:2,class:"summary-item"},HS={class:"summary-value text-success fw-bold"},zS={class:"summary-item border-top pt-2 mt-2"},KS={class:"summary-value fw-bold text-primary"},YS={class:"mb-2"},GS={class:"fw-semibold mb-1",style:{"font-size":"0.85rem"}},jS={class:"text-end small text-muted mt-1",style:{"font-size":"0.7rem"}},QS={class:"modal-footer border-0 px-3 py-2 d-flex justify-content-end"},XS={class:"d-flex gap-2"},ZS={class:"modal fade",id:"addonManagementModal",tabindex:"-1","aria-hidden":"true"},JS={class:"modal-dialog modal-lg modal-dialog-centered"},e2={class:"modal-content rounded-4 border-0 shadow-lg"},t2={key:0,class:"modal-body pt-2"},n2={class:"alert alert-light border rounded-3 mb-3"},i2={class:"d-flex align-items-center gap-3"},s2=["src"],r2={class:"flex-grow-1"},o2={class:"fw-bold fs-6"},a2={class:"d-flex gap-3 mt-1"},l2={class:"text-muted"},u2={class:"fw-semibold"},c2={class:"text-muted"},d2={class:"fw-semibold"},f2={key:0,class:"table-responsive"},p2={class:"table table-hover align-middle mb-0"},h2={class:"text-center"},_2={class:"form-check d-flex justify-content-center"},v2=["checked","onChange"],m2={class:"d-flex align-items-center gap-2"},g2={class:"fw-semibold"},b2={key:0,class:"text-muted"},y2={class:"text-center"},E2={class:"badge bg-success-subtle text-success px-3 py-2 fs-6"},w2={class:"d-flex align-items-center justify-content-center gap-2"},x2=["onClick","disabled"],A2={class:"fw-bold fs-5 px-3",style:{"min-width":"50px","text-align":"center"}},C2=["onClick","disabled"],T2={key:1,class:"text-center text-muted py-5"},S2={class:"mt-3 p-3 rounded-3"},I2={key:0,class:"mt-3 p-3 rounded-3 border border-success bg-light"},O2={class:"text-success fw-semibold"},D2={__name:"Index",props:["client_secret","order_code"],setup(u){const{formatCurrencySymbol:n}=qb();tr(()=>{pu(()=>{document.querySelectorAll('[data-bs-toggle="popover"]').forEach(o=>{new Fa(o)})})});const s=W([]),f=W(!0),v=W(""),y=W(Date.now()),x=`category-search-${Math.random().toString(36).substr(2,9)}`,C=W(!1),T=we(()=>{const o=v.value.trim().toLowerCase();return o?Pr.value.filter(r=>r.name.toLowerCase().includes(o)):Pr.value}),U=async()=>{f.value=!0;try{const o=await axios.get("/api/pos/fetch-menu-categories");s.value=o.data,s.value.length>0&&(ft.value=s.value[0].id)}catch(o){console.error("Error fetching categories:",o)}finally{f.value=!1}},P=W([]),V=async()=>{try{const o=await axios.get("/api/pos/fetch-menu-items");P.value=o.data.data}catch(o){console.error("Error fetching inventory:",o)}},Q=we(()=>{const o={};return P.value.forEach(r=>{const l=r.category?.id||"uncategorized",_=r.category?.name||"Uncategorized";o[l]||(o[l]=[]);const w={id:r.id,title:r.name,img:r.image_url||"/assets/img/default.png",stock:0,price:Number(r.price),label_color:r.label_color||"#1B1670",family:_,description:r.description,nutrition:r.nutrition,tags:r.tags,allergies:r.allergies,ingredients:r.ingredients??[],variants:r.variants??[],addon_groups:r.addon_groups??[],is_saleable:r.is_saleable,resale_type:r.resale_type,resale_value:r.resale_value,isDeal:!1};o[l].push(w)}),cs.value.forEach(r=>{const l=r.category_id||"uncategorized";o[l]||(o[l]=[]);const _={id:`deal-${r.id}`,dealId:r.id,title:r.title,img:r.img,stock:999999,price:Number(r.price),label_color:"#dc3545",family:"Deal",description:r.description,nutrition:{},tags:[],allergies:[],ingredients:[],variants:[],addon_groups:[],is_saleable:!1,resale_type:null,resale_value:null,isDeal:!0,category_id:r.category_id,menu_items:r.menu_items||[]};o[l].push(_)}),o}),K=W({});ws(()=>P.value,o=>{o&&o.length>0&&o.forEach(r=>{r.variants&&r.variants.length>0&&(K.value[r.id]||(K.value[r.id]=r.variants[0].id))})},{immediate:!0,deep:!0});const J=o=>{if(!o.variants||o.variants.length===0)return null;const r=K.value[o.id];return r&&o.variants.find(l=>l.id===r)||o.variants[0]},ee=(o,r)=>{const l=parseInt(r.target.value);K.value[o.id]=l;const _=o.variants.find(w=>w.id===l);_&&console.log(`Selected ${_.name} for ${o.title} - ${n(_.price)}`)},j=W({}),te=o=>{const r=o.id;if(!j.value[r])return 0;let l=0;return Object.values(j.value[r]).forEach(_=>{_.forEach(w=>{l+=parseFloat(w.price||0)})}),l},Ce=o=>{const r=o.id;if(!j.value[r])return[];const l=[];return Object.values(j.value[r]).forEach(_=>{_.forEach(w=>{l.push({id:w.id,name:w.name,price:parseFloat(w.price),group_id:w.group_id||w.pivot?.addon_group_id})})}),l},Se=o=>{if(!o.addon_groups||o.addon_groups.length===0)return[];const r=[];return o.addon_groups.forEach(l=>{l.addons&&l.addons.length>0&&l.addons.forEach(_=>{r.push({..._,group_id:l.group_id,group_name:l.group_name,max_select:l.max_select})})}),r},ce=o=>{const r=o.id;if(!j.value[r])return[];const l=[];return Object.values(j.value[r]).forEach(_=>{l.push(..._)}),l},_e=(o,r)=>{const l=o.id,_={};r.forEach(w=>{_[w.group_id]||(_[w.group_id]=[]),_[w.group_id].push(w)}),o.addon_groups.forEach(w=>{const D=_[w.group_id]||[];w.max_select>0&&D.length>w.max_select&&(z.warning(`You can only select up to ${w.max_select} items from ${w.group_name}`),_[w.group_id]=D.slice(0,w.max_select))}),j.value[l]=_},ne=W([]),be=()=>{if(!ve.value)return[];const o=Ge();return o&&o.ingredients&&o.ingredients.length>0?o.ingredients:ve.value.ingredients||[]},Be=o=>ne.value.includes(o),Ue=o=>{const r=ne.value.indexOf(o);r>-1?(ne.value.splice(r,1),z.info("Ingredient added back")):(ne.value.push(o),z.info("Ingredient removed"))},Ye=()=>be().filter(o=>!ne.value.includes(o.id||o.inventory_item_id)).length,Ze=()=>{if(ne.value.length===0)return null;const o=be(),r=ne.value.map(l=>{const _=o.find(w=>w.id===l||w.inventory_item_id===l);return _?_.product_name||_.name:null}).filter(Boolean);return r.length===0?null:`No ${r.join(", ")}`},ke=W(1),Ve=we(()=>ve.value?.variants&&ve.value.variants.length>0),kt=we(()=>be().length>0),Vt=we(()=>ve.value?.addon_groups&&ve.value.addon_groups.length>0),Je=we(()=>{const o=[];return Ve.value&&o.push({id:"variants",name:"Variant"}),kt.value&&o.push({id:"ingredients",name:"Ingredients"}),Vt.value&&o.push({id:"addons",name:"Add-ons"}),o.push({id:"review",name:"Review"}),o}),He=we(()=>Je.value.length),Nt=we(()=>{if(ke.value===1)return"0%";const o=Je.value.length,r=(ke.value-1)/(o-1);return`calc(${r*100}% - ${14-r*28}px)`}),En=o=>o<ke.value?"bg-success text-white":o===ke.value?"bg-primary text-white":"bg-light text-muted border",wn=()=>{let o=ke.value+1;for(;o<=He.value;){const r=Je.value[o-1];if(r.id==="variants"&&!Ve.value){o++;continue}if(r.id==="ingredients"&&!kt.value){o++;continue}if(r.id==="addons"&&!Vt.value){o++;continue}break}o<=He.value&&(ke.value=o)},St=()=>{let o=ke.value-1;for(;o>=1;){const r=Je.value[o-1];if(r.id==="variants"&&!Ve.value){o--;continue}if(r.id==="ingredients"&&!kt.value){o--;continue}if(r.id==="addons"&&!Vt.value){o--;continue}break}o>=1&&(ke.value=o)},ti=o=>{cn.value=o,Si()},Ti=()=>Ve.value&&ve.value?.variants?.find(r=>r.id===cn.value)?.name||"",Pn=()=>{const o=[];return Object.values(ut.value).forEach(r=>{r.forEach(l=>{const _=l.quantity>1?` x${l.quantity}`:"";o.push(`${l.name}${_} (+${n(l.price*(l.quantity||1))})`)})}),o.join(", ")},bt=async o=>{ve.value=o,Tr.value="",tn.value="",cn.value=null,ut.value={},ne.value=[],ke.value=1,o.variants&&o.variants.length>0&&(cn.value=o.variants[0].id);const r=o.variants&&o.variants.length>0?o.variants[0]:null,l=r?r.id:null,_=ci(o,l),w=en(o,l,_);pt.value=w>0?1:0,ne.value=[];const D=document.getElementById("chooseItem"),S=new bootstrap.Modal(D);D.addEventListener("shown.bs.modal",async()=>{await pu()},{once:!0}),S.show()},en=(o,r,l)=>{if(!rs.value)return 999999;const _=l.filter(S=>!ne.value.includes(S.id||S.inventory_item_id));if(!_||_.length===0)return 999999;const w={};for(const S of q.value)ci(S,S.variant_id).filter(B=>!S.removed_ingredients||S.removed_ingredients.length===0?!0:!S.removed_ingredients.includes(B.id||B.inventory_item_id)).forEach(B=>{const de=B.inventory_item_id,We=Number(B.inventory_stock??B.inventory_item?.stock??0);w[de]||(w[de]={totalStock:We,used:0});const ae=Number(B.quantity??B.qty??1)*S.qty;w[de].used+=ae});let D=999999;for(const S of _){const L=S.inventory_item_id,oe=Number(S.inventory_stock??S.inventory_item?.stock??0),B=Number(S.quantity??S.qty??1);if(w[L]){const de=w[L].totalStock-w[L].used,We=Math.floor(de/B);D=Math.min(D,We)}else{const de=Math.floor(oe/B);D=Math.min(D,de)}}return D},Si=()=>{const o=Ge(),r=o?o.id:null,l=ci(ve.value,r),_=en(ve.value,r,l);if(_<=0){z.error("No stock available for this variant. Please remove items from cart first."),pt.value=0;return}pt.value=Math.min(1,_)},Ge=()=>{if(!ve.value||!ve.value.variants||ve.value.variants.length===0)return null;const o=cn.value;return o&&ve.value.variants.find(r=>r.id===o)||ve.value.variants[0]},xn=()=>{if(!ve.value)return 0;const o=Ge();return parseFloat(o?o.price:ve.value.price||0)},Ii=()=>{let o=0;return Object.values(ut.value).forEach(r=>{r.forEach(l=>{o+=parseFloat(l.price||0)*(l.quantity||1)})}),o},Rn=()=>{const o=[];return Object.values(ut.value).forEach(r=>{r.forEach(l=>{o.push({id:l.id,name:l.name,price:parseFloat(l.price),group_id:l.group_id||l.pivot?.addon_group_id})})}),o},ni=o=>{if(!o)return 0;if(!rs.value)return 999999;const r=J(o),l=r?r.id:null,_=ci(o,l);if(!_.length)return 999999;let w=1/0;return _.forEach(D=>{const S=Number(D.quantity??D.qty??1),L=Number(D.inventory_stock??D.inventory_item?.stock??0);if(S<=0)return;const oe=Math.floor(L/S);w=Math.min(w,oe)}),w===1/0?0:w},Oi=o=>ni(o),et=W(""),Le=W("dine"),yt=W("Walk In"),Qe=W(" "),Ht=W(" "),br=W(10),ft=W(null),vt=o=>ft.value=o,Lt=W(!0),ii=o=>{vt(o.id),Lt.value=!1},Ji=()=>Lt.value=!0,zt=W({}),An=W([]),at=W(null),Cn=async()=>{try{const o=await axios.get("/api/pos/fetch-profile-tables");if(zt.value=o.data,zt.value.order_types){An.value=zt.value.order_types.map(l=>l.charAt(0).toUpperCase()+l.slice(1));const r=localStorage.getItem("quickOrderType");if(r){const l=An.value.find(_=>_.toLowerCase().replace(/_/g," ")===r.toLowerCase().replace(/_/g," "));l?Le.value=l:Le.value=An.value[0]}else Le.value=An.value[0]}}catch(o){console.error("Error fetching profile tables:",o)}},yr=we(()=>Q.value[ft.value]??[]),lt=W({sortBy:"",priceMin:null,priceMax:null}),Ds=we(()=>{let o=yr.value;const r=et.value.trim().toLowerCase();if(r&&(o=o.filter(l=>l.title.toLowerCase().includes(r)||(l.family||"").toLowerCase().includes(r)||(l.description||"").toLowerCase().includes(r)||(l.tags?.map(_=>_.name.toLowerCase()).join(", ")||"").includes(r))),lt.value.priceMin!==null&&lt.value.priceMin!==""&&(o=o.filter(l=>l.price>=lt.value.priceMin)),lt.value.priceMax!==null&&lt.value.priceMax!==""&&(o=o.filter(l=>l.price<=lt.value.priceMax)),lt.value.sortBy)switch(o=[...o],lt.value.sortBy){case"name_asc":o.sort((l,_)=>l.title.localeCompare(_.title));break;case"name_desc":o.sort((l,_)=>_.title.localeCompare(l.title));break;case"price_asc":o.sort((l,_)=>l.price-_.price);break;case"price_desc":o.sort((l,_)=>_.price-l.price);break;case"stock_asc":o.sort((l,_)=>(l.stock??0)-(_.stock??0));break;case"stock_desc":o.sort((l,_)=>(_.stock??0)-(l.stock??0));break}return o}),es=W(!1),Er=o=>{lt.value={...o},es.value=!0},Fn=W(""),wr=()=>{const o=localStorage.getItem("pos_walkin_counter");o?Fn.value=parseInt(o):(Fn.value=1,localStorage.setItem("pos_walkin_counter","1"))},ks=()=>`Walk In-${String(Fn.value).padStart(3,"0")}`,xr=()=>{Fn.value++,localStorage.setItem("pos_walkin_counter",Fn.value.toString())},Ar=()=>{lt.value={sortBy:"",priceMin:null,priceMax:null}},q=W([]),Wa=async o=>{const r=q.value[o];if(!r)return;if(r.isDeal){const _=Fo({id:r.dealId,title:r.title,menu_items:r.menu_items},r.qty+1);if(!_.canAdd){console.log(" Missing ingredients for deal (cart increment)"),dn.value={itemIndex:o,item:r,newQty:r.qty+1,isDeal:!0},$t.value=_.missing,Sn.value=!0,z.warning("Some ingredients are missing. Confirm to proceed.");return}r.qty++,r.price=r.unit_price*r.qty,z.success("Deal quantity updated");return}const l=Ns(r,r.qty+1);if(!l.canAdd){console.log(" Missing ingredients detected (client-side)"),dn.value={itemIndex:o,item:r,newQty:r.qty+1,isDeal:!1},$t.value=l.missing,Sn.value=!0,z.warning("Some ingredients are missing. Confirm to proceed.");return}r.outOfStock=!1,r.qty++,r.price=r.unit_price*r.qty,r.resale_discount_per_item&&(r.total_resale_discount=r.resale_discount_per_item*r.qty)},Ns=(o,r)=>{if(!rs.value)return{canAdd:!0,missing:[]};const l=o.ingredients||[];if(l.length===0)return{canAdd:!0,missing:[]};const _=[],w={};return q.value.forEach(S=>{(S.ingredients||[]).filter(B=>!S.removed_ingredients||S.removed_ingredients.length===0?!0:!S.removed_ingredients.includes(B.id||B.inventory_item_id)).forEach(B=>{const de=B.inventory_item_id,We=Number(B.inventory_stock??B.inventory_item?.stock??0);w[de]||(w[de]={totalStock:We,used:0,name:B.product_name||B.name,unit:B.unit||"unit"});const ae=Number(B.quantity??B.qty??1)*S.qty;w[de].used+=ae})}),l.filter(S=>!o.removed_ingredients||o.removed_ingredients.length===0?!0:!o.removed_ingredients.includes(S.id||S.inventory_item_id)).forEach(S=>{const L=S.inventory_item_id,oe=Number(S.quantity??S.qty??1)*r,B=Number(S.inventory_stock??S.inventory_item?.stock??0);if(!w[L])B<oe&&_.push({item_id:o.id,item_title:o.title,variant_id:o.variant_id||null,variant_name:o.variant_name||null,inventory_item_id:L,inventory_item_name:S.product_name||S.name,required_quantity:oe,available_quantity:B,shortage_quantity:oe-B,unit:S.unit||"unit",order_quantity:r});else{const de=w[L].totalStock-w[L].used,We=q.value.find(ae=>ae.id===o.id&&ae.variant_id===o.variant_id&&JSON.stringify(ae.addons?.map(ct=>ct.id).sort())===JSON.stringify(o.addons?.map(ct=>ct.id).sort()));if(We){const ae=Number(S.quantity??S.qty??1)*We.qty,ct=de+ae;ct<oe&&_.push({item_id:o.id,item_title:o.title,variant_id:o.variant_id||null,variant_name:o.variant_name||null,inventory_item_id:L,inventory_item_name:S.product_name||S.name,required_quantity:oe,available_quantity:ct,shortage_quantity:oe-ct,unit:S.unit||"unit",order_quantity:r})}else de<oe&&_.push({item_id:o.id,item_title:o.title,variant_id:o.variant_id||null,variant_name:o.variant_name||null,inventory_item_id:L,inventory_item_name:S.product_name||S.name,required_quantity:oe,available_quantity:de,shortage_quantity:oe-de,unit:S.unit||"unit",order_quantity:r})}}),{canAdd:_.length===0,missing:_}},bo=async o=>{const r=q.value[o];if(!r||r.qty<=1){z.error("Cannot reduce below 1.");return}r.qty--,r.price=r.unit_price*r.qty,r.resale_discount_per_item&&(r.total_resale_discount=r.resale_discount_per_item*r.qty),r.outOfStock=!1},Ua=o=>{if(q.value[o],q.value.splice(o,1),q.value.length===0){ht.value=[],qe.value=[],wt.value=[],oi();return}qe.value.length>0&&(qe.value=qe.value.filter(l=>{if(!l.menu_items||l.menu_items.length===0)return!0;const _=l.menu_items.map(D=>D.id);return q.value.some(D=>_.includes(D.id))}));const r=[];ht.value.forEach(l=>{l.min_purchase&&Kt.value<l.min_purchase?z.info(`Discount "${l.name}" removed  subtotal is lower than minimum required (${n(l.min_purchase)}).`):r.push(l)}),ht.value=r},Kt=we(()=>q.value.reduce((o,r)=>o+r.price,0)),si=we(()=>{if(Le.value!=="Delivery")return 0;const o=Mt.props.onboarding.tax_and_vat;return o.has_delivery_charges?o.delivery_charge_flat?parseFloat(o.delivery_charge_flat):o.delivery_charge_percentage?Kt.value*parseFloat(o.delivery_charge_percentage)/100:0:0}),ri=we(()=>{if(q.value.length===0)return 0;const o=Mt.props.onboarding.tax_and_vat;return o.has_service_charges?o.service_charge_flat?parseFloat(o.service_charge_flat):o.service_charge_percentage?Kt.value*parseFloat(o.service_charge_percentage)/100:0:0}),Cr=o=>`${(Math.round(o*100)/100).toFixed(2)}`,ve=W(null),pt=W(0),Tr=W(""),cn=W(null),ut=W({}),tn=W(""),Va=async()=>{if(!ve.value)return;if(pt.value<=0){z.error("Please select at least 1 item to add to cart");return}const o=Ge(),r=o?o.id:null;o&&`${o.name}`;const l=o?o.name:null,_=parseFloat(o?o.price:ve.value.price),w=Rn(),D=Ii(),S=_+D,L=o?mt(o,!0):mt(ve.value,!1),oe=ci(ve.value,r),B=Ze();try{const de=w.map(ye=>ye.id).sort((ye,Ke)=>ye-Ke).join("-"),We=oe.length>0?Ls(oe):999999,ae=q.value.findIndex(ye=>{if(ye.variant_id!==r)return!1;const Ke=(ye.addons||[]).map(Ct=>Ct.id).sort((Ct,zs)=>Ct-zs).join("-");return ye.id===ve.value.id&&Ke===de});if(ae>=0){if(q.value[ae].qty+=pt.value,q.value[ae].price=q.value[ae].unit_price*q.value[ae].qty,q.value[ae].total_resale_discount=L*q.value[ae].qty,tn.value&&tn.value.trim()){const ye=q.value[ae].item_kitchen_note||"",Ke=tn.value.trim(),Ct=[ye,Ke,B].filter(Boolean).filter((zs,Ks,Wo)=>Wo.indexOf(zs)===Ks);q.value[ae].item_kitchen_note=Ct.join("; ")}else if(B){const ye=q.value[ae].item_kitchen_note||"";q.value[ae].item_kitchen_note=[ye,B].filter(Boolean).join("; ")}ne.value.length>0&&(q.value[ae].removed_ingredients=[...ne.value]),z.success(`Quantity updated to ${q.value[ae].qty}`)}else{const ye=[tn.value.trim(),B].filter(Boolean).join(". ");q.value.push({id:ve.value.id,title:ve.value.title,img:ve.value.img,price:S*pt.value,unit_price:Number(S),qty:pt.value,note:Tr.value||"",item_kitchen_note:ye,stock:We,ingredients:oe,variant_id:r,variant_name:l,addons:w,removed_ingredients:[...ne.value],resale_discount_per_item:L,total_resale_discount:L*pt.value}),z.success(`${ve.value.title} added to cart`)}bootstrap.Modal.getInstance(document.getElementById("chooseItem")).hide(),pt.value=0,Tr.value="",tn.value="",cn.value=null,ut.value={},ne.value=[]}catch(de){z.error("Failed to add item: "+(de.response?.data?.message||de.message))}},Ls=o=>{if(!o||o.length===0)return 999999;let r=1/0;return o.forEach(l=>{const _=Number(l.quantity??l.qty??1),w=Number(l.inventory_stock??l.inventory_item?.stock??0);if(_<=0)return;const D=Math.floor(w/_);r=Math.min(r,D)}),r===1/0?0:r},Ha=async()=>{if(!ve.value)return;const o=Ge(),r=o?o.id:null,l=be(),_=Ns({id:ve.value.id,title:ve.value.title,variant_id:r,variant_name:o?o.name:null,ingredients:l,removed_ingredients:ne.value||[]},pt.value+1);if(!_.canAdd){console.log(" Missing ingredients for modal increment (client-side)"),ai.value={currentQty:pt.value},$t.value=_.missing,Sn.value=!0,z.warning("Some ingredients are missing. Confirm to proceed.");return}pt.value++},za=()=>{pt.value>1&&pt.value--},Et=W({}),Sr=()=>{q.value=[],yt.value=ks(),Ht.value="",Qe.value="",at.value=null,Le.value=An.value[0]||"eat_in",qn.value="",Tn.value="",br.value=0,qe.value=[],ht.value=[],wt.value=[],Ni.value=[],oi()};ws(Le,()=>Et.value={});const qn=W(""),Tn=W(""),$s=W(!1),Di=W(null),Ms=W(!1),Ir=W(0),Ka=()=>{if(q.value.length===0){z.error("Please add at least one item to the cart.");return}if(Le.value==="Eat_in"&&!at.value){Et.value.table_number=["Table number is required for dine-in orders."],z.error("Please select a table number for Dine In orders.");return}if((Le.value==="Delivery"||Le.value==="Takeaway")&&!yt.value){Et.value.customer=["Customer name is required."],z.error("Customer name is required.");return}if(Le.value==="Delivery"&&!Qe.value){Et.value.phoneNumber=["Phone number is required for delivery."],z.error("Phone number is required for delivery.");return}if(Le.value==="Delivery"&&!Ht.value){Et.value.deliveryLocation=["Delivery location is required."],z.error("Delivery location is required.");return}Ir.value=parseFloat(Ie.value).toFixed(2),Ms.value=!0};async function yo(o){try{const r=await axios.post("http://localhost:8085/print",{order:o,type:"customer"},{headers:{"Content-Type":"application/json"},timeout:5e3})}catch(r){console.error("Print failed:",r),z.error("Unable to connect to the customer printer. Please ensure it is properly connected.")}}const Ya=W("cash"),Ps=W(0);async function Eo(o){try{const r=await axios.post("http://localhost:8085/print",{order:o,type:"KOT"},{headers:{"Content-Type":"application/json"},timeout:5e3})}catch(r){console.error("KOT print failed:",r),z.error("Unable to connect to the kitchen printer. Please ensure it is properly connected.")}}const wt=W([]),ki=W(null),wo=W(!1),ht=W([]),Ni=W([]),xo=async o=>{if(!o||o.length===0){z.warning("No discounts selected.");return}const r=Ni.value.map(_=>_.id),l=o.filter(_=>!r.includes(_.id));if(l.length===0){z.error("All selected discounts have been rejected for this order.");return}if(l.length<o.length){const _=o.length-l.length;z.warning(`${_} discount(s) were previously rejected and cannot be requested again.`)}try{const _=await axios.post("/api/discount-approvals/request",{discounts:o.map(w=>({discount_id:w.id,discount_percentage:parseFloat(w.discount_amount),discount_name:w.name})),order_items:q.value.map(w=>({id:w.id,title:w.title,qty:w.qty,unit_price:w.unit_price,price:w.price})),order_subtotal:Kt.value,request_note:`Discount approval request from ${Li.value?.name||"Cashier"}`});_.data.success&&(wt.value=_.data.data.map(w=>({...w,discountData:o.find(D=>D.id===w.discount_id),percentage:parseFloat(w.discount_percentage),status:"pending"})),ls.value=!1,wo.value=!0,z.info("Discount approval request sent to Super Admin. Waiting for approval..."),Ao())}catch(_){console.error("Error requesting discount approval:",_),z.error(_.response?.data?.message||"Failed to request discount approval")}},Ao=()=>{ki.value&&clearInterval(ki.value),ki.value=setInterval(async()=>{await Co()},3e3)},Co=async()=>{if(wt.value.length===0){oi();return}try{const o=wt.value.map(l=>l.id),r=await axios.post("/api/discount-approvals/check-status",{approval_ids:o});r.data.success&&(r.data.data.forEach(_=>{if(_.status!=="pending"){const w=wt.value.findIndex(D=>D.id===_.id);if(w>=0){if(_.status==="approved"){const D={id:_.discount_id,name:_.discount_name||_.discount?.name,percentage:parseFloat(_.discount_percentage),approval_id:_.id};Ga(D),z.success(`Discount "${D.name}" (${D.percentage}%) approved!`)}else _.status==="rejected"&&(Ni.value.push({id:_.discount_id,name:_.discount_name,percentage:parseFloat(_.discount_percentage),rejection_reason:_.approval_note}),z.error(`Discount "${_.discount_name}" rejected.`+(_.approval_note?` Reason: ${_.approval_note}`:"")));wt.value.splice(w,1)}}}),wt.value.length===0&&(wo.value=!1,oi()))}catch(o){console.error("Error checking approval status:",o)}},oi=()=>{ki.value&&(clearInterval(ki.value),ki.value=null)},Ga=o=>{ht.value.push(o)};kb(()=>{oi()}),tr(()=>{window.Echo&&window.Echo.channel("discount-approvals").listen(".approval.responded",o=>{Co()})});const ts=we(()=>!ht.value||ht.value.length===0?0:ht.value.reduce((o,r)=>{const l=parseFloat(r.percentage||0),_=Kt.value*l/100;return o+_},0)),ns=o=>Kt.value*o/100,To=()=>{ht.value=[],wt.value=[],Ni.value=[],oi()},Sn=W(!1),$t=W([]),dn=W(null),is=W(null),ai=W(null),ss=W(null),ja=W(null),So=async({paymentMethod:o,cashReceived:r,cardAmount:l,changeAmount:_,items:w,autoPrintKot:D,done:S})=>{Et.value={};try{const L={customer_name:yt.value,phone_number:Qe.value,delivery_location:Ht.value,sub_total:Kt.value,tax:ui.value,service_charges:ri.value,delivery_charges:si.value,sales_discount:Oe.value,approved_discounts:ts.value,approved_discount_details:ht.value.map(B=>({discount_id:B.id,discount_name:B.name,discount_percentage:B.percentage,discount_amount:ns(B.percentage),approval_id:B.approval_id})),promo_discount:li.value,applied_promos:qe.value.map(B=>({promo_id:B.id,promo_name:B.name,promo_type:B.type,discount_amount:B.applied_discount||0,applied_to_items:B.applied_to_items||[]})),total_amount:Ie.value,note:qn.value,kitchen_note:Tn.value,order_date:new Date().toISOString().split("T")[0],order_time:new Date().toTimeString().split(" ")[0],order_type:Le.value==="Eat_in"?"Eat In":Le.value==="Delivery"?"Delivery":Le.value==="Takeaway"?"Takeaway":"Collection",table_number:at.value?.name||null,payment_method:o,auto_print_kot:D,cash_received:r,change:_,...o==="Split"&&{payment_type:"split",cash_amount:r,card_amount:l},items:(q.value??[]).map(B=>{if(B.isDeal)return{product_id:B.dealId,title:B.title,quantity:B.qty,price:B.price,note:B.note??"",kitchen_note:Tn.value??"",unit_price:B.unit_price,item_kitchen_note:B.item_kitchen_note??"",tax_percentage:0,tax_amount:0,variant_id:null,variant_name:null,addons:[],sale_discount_per_item:0,removed_ingredients:[],is_deal:!0,deal_id:B.dealId,menu_items:B.menu_items||[]};const de=P.value.find(ye=>ye.id===B.id);let We=de;if(B.variant_id&&de?.variants){const ye=de.variants.find(Ke=>Ke.id===B.variant_id);ye&&(We=ye)}const ae=We?mt(We,!!B.variant_id):0,ct=(B.removed_ingredients||[]).map(ye=>{const Ke=(B.ingredients||[]).find(Ct=>Ct.id===ye||Ct.inventory_item_id===ye);return{id:ye,name:Ke?Ke.product_name||Ke.name:"Unknown Ingredient"}});return{product_id:B.id,title:B.title,quantity:B.qty,price:B.price,note:B.note??"",kitchen_note:Tn.value??"",unit_price:B.unit_price,item_kitchen_note:B.item_kitchen_note??"",tax_percentage:il(B),tax_amount:nl(B),variant_id:B.variant_id||null,variant_name:B.variant_name||null,addons:B.addons||[],sale_discount_per_item:ae,removed_ingredients:ct||[],is_deal:!1}}),confirm_missing_ingredients:!0};console.log(" Sending order");const oe=await axios.post("/pos/order",L);if(console.log(" Order created successfully:",oe.data),oe.data.logout===!0){z.success(oe.data.message||"Order created successfully. Logging out..."),setTimeout(()=>{window.location.href=oe.data.redirect||"/login"},1e3),S&&S();return}xr(),Sr(),Ms.value=!1,z.success(oe.data.message||"Order placed successfully!"),Di.value={...oe.data.order,...L,items:L.items,payment_type:o==="Split"?"split":o.toLowerCase(),cash_amount:o==="Split"?r:null,card_amount:o==="Split"?l:null},console.log(" Last order data prepared:",Di.value),D&&(In.value=await ko(),Eo(JSON.parse(JSON.stringify(Di.value)))),yo(JSON.parse(JSON.stringify(Di.value))),qe.value=[],ht.value=[],wt.value=[],oi()}catch(L){console.error(" Order submission error:",L),z.error(L.response?.data?.message||"Failed to place order")}finally{S&&S()}},Io=async()=>{if(console.log(" User confirmed missing ingredients"),Sn.value=!1,dn.value&&!dn.value.isDeal){const{itemIndex:o,newQty:r}=dn.value,l=q.value[o];l&&(l.outOfStock=!1,l.qty=r,l.price=l.unit_price*l.qty,l.resale_discount_per_item&&(l.total_resale_discount=l.resale_discount_per_item*l.qty),z.success("Quantity updated")),dn.value=null,$t.value=[];return}if(dn.value&&dn.value.isDeal){const{itemIndex:o,newQty:r}=dn.value,l=q.value[o];l&&l.isDeal&&(l.qty=r,l.price=l.unit_price*l.qty,z.success("Deal quantity updated")),dn.value=null,$t.value=[];return}if(ss.value){const{deal:o,existingIndex:r,newQty:l}=ss.value;if(r>=0)q.value[r].qty=l,q.value[r].price=q.value[r].unit_price*l,z.success("Deal quantity updated");else{const w=[];o.menu_items.forEach(S=>{S.ingredients&&S.ingredients.length>0&&w.push(...S.ingredients.map(L=>({...L,menu_item_id:S.id,menu_item_name:S.name})))});const D={id:`deal-${o.id}`,title:o.title,price:It.value,unit_price:parseFloat(o.price),img:o.img,qty:1,stock:999999,ingredients:w,isDeal:!0,dealId:o.id,menu_items:o.menu_items.map(S=>({id:S.id,name:S.name,price:S.price,ingredients:(S.ingredients||[]).map(L=>({inventory_item_id:L.id,inventory_item_id:L.inventory_item_id,product_name:L.product_name||L.name,quantity:L.quantity||L.qty||"1.00",inventory_stock:L.inventory_stock||L.stock||0,unit:L.unit||"unit",category_id:L.category_id,supplier_id:L.supplier_id})),stock:Ls(S.ingredients||[])})),resale_discount_per_item:0,total_resale_discount:0};q.value.push(D),z.success(`${o.title} added to cart!`)}ss.value=null,$t.value=[];return}if(is.value){const{product:o,variantId:r,variantName:l,variantPrice:_,selectedAddons:w,addonsPrice:D,resaleDiscountPerItem:S,existingIndex:L,newQty:oe}=is.value,B=_+D;if(L>=0)q.value[L].qty=oe,q.value[L].price=q.value[L].unit_price*oe,q.value[L].total_resale_discount=S*oe,q.value[L].outOfStock=!1,z.success("Quantity updated");else{const de=ci(o,r),We=Oi(o);q.value.push({id:o.id,title:o.title,img:o.img,price:B,unit_price:Number(B),qty:1,note:"",stock:We,ingredients:de,variant_id:r,variant_name:l,addons:w,outOfStock:!1,resale_discount_per_item:S,total_resale_discount:S}),z.success("Item added to cart")}is.value=null,$t.value=[];return}if(ai.value){pt.value=ai.value.currentQty+1,z.success("Quantity increased"),ai.value=null,$t.value=[];return}};tr(async()=>{wr();const o=String(Fn.value).padStart(3,"0");if(yt.value=`Walk In-${o}`,window.bootstrap){document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(_=>new window.bootstrap.Tooltip(_));const l=document.getElementById("chooseItem");l&&new window.bootstrap.Modal(l,{backdrop:"static"})}v.value="",y.value=Date.now(),await pu(),setTimeout(()=>{C.value=!0;const l=document.getElementById(x);l&&(l.value="",v.value="")},100),U(),V(),Cn();const r=document.getElementById("menuFilterModal");r&&r.addEventListener("hidden.bs.modal",()=>{es.value||Ar(),es.value=!1})});const Mt=Db();function Oo(){const o=Mt.props.flash?.success,r=Mt.props.flash?.error;o&&z.success(o,{autoClose:4e3}),r&&z.error(r,{autoClose:6e3})}tr(()=>Oo()),tr(()=>{Mt.props.flash?.success;const o=Mt.props.flash?.error;o&&z.error(o);const r=Mt.props.flash?.print_payload;r&&setTimeout(()=>yo(r),250),r&&setTimeout(()=>Eo(r),250)}),ws(()=>Mt.props.flash,()=>Oo(),{deep:!0});const rs=we(()=>Mt.props.onboarding?.optional_features?.enable_inventory_tracking??!0),Or=({id:o,status:r,message:l})=>{In.value=In.value.map(_=>_.id===o?{..._,status:r}:_)},Rs=W(!1),In=W([]),Do=W(!1),os=W(!1),Dr=W([]),Fs=W(!1),ko=async()=>{os.value=!0,Dr.value=[],Fs.value=!0;try{const o=await axios.get("/api/pos/orders/today");Dr.value=o.data.orders}catch(o){console.error("Failed to fetch POS orders:",o),z.error(o.response?.data?.message||"Failed to fetch POS orders")}finally{Fs.value=!1}},as=W(!1),ls=W(!1),kr=W(!0),Nr=W(!0),qs=W([]),us=W([]),qe=W([]),Qa=o=>{if(qe.value=o,!o||o.length===0){z.warning("No promos selected.");return}const r=o.reduce((_,w)=>_+parseFloat(w.applied_discount||0),0);if(r<=0){z.warning("Selected promos don't provide any discount for current cart items."),qe.value=[];return}const l=new Set(o.flatMap(_=>_.applied_to_items||[])).size;z.success(`${o.length} promo(s) applied! Applied to ${l} item(s). You saved ${n(r)}`),as.value=!1},Xa=async()=>{kr.value=!0,as.value=!0;try{const o=await axios.get("/api/promos/current");o.data?.success?qs.value=o.data.data||[]:(console.warn("Failed to fetch promos:",o.data),qs.value=[],z.warning("No promos available at the moment"))}catch(o){console.error("Error fetching current meal promos:",o),qs.value=[],z.error("Failed to load promotions")}finally{kr.value=!1}},Za=async()=>{Nr.value=!0,ls.value=!0;try{const o=await axios.get("/api/discounts/all");o.data?.success?us.value=o.data.data||[]:(console.warn("Failed to fetch discounts:",o.data),us.value=[],z.warning("No discounts available at the moment"))}catch(o){console.error("Error fetching current meal discounts:",o),us.value=[],z.error("Failed to load discounts")}finally{Nr.value=!1}},Lr=o=>!qe.value||qe.value.length===0?!1:qe.value.some(r=>!r.menu_items||r.menu_items.length===0?!0:r.menu_items.map(_=>_.id).includes(o.id)),Ja=o=>{Di.value=o,$s.value=!0,os.value=!1},li=we(()=>!qe.value||qe.value.length===0?0:qe.value.reduce((o,r)=>{const l=parseFloat(r.discount_amount??0)||0;if(r.applied_discount!==void 0)return o+parseFloat(r.applied_discount);const _=el(r);if(r.min_purchase&&_<parseFloat(r.min_purchase))return o;if(r.type==="flat")return o+l;if(r.type==="percent"){const w=_*l/100,D=parseFloat(r.max_discount??0)||0;return D>0&&w>D?o+D:o+w}return o},0)),el=o=>{if(!o.menu_items||o.menu_items.length===0)return q.value.reduce((l,_)=>l+_.unit_price*_.qty,0);const r=o.menu_items.map(l=>l.id);return q.value.filter(l=>r.includes(l.id)).reduce((l,_)=>l+_.unit_price*_.qty,0)},tl=we(()=>!qe.value||qe.value.length===0?[]:qe.value.map(o=>({promo_id:o.id,promo_name:o.name,promo_type:o.type,discount_amount:o.applied_discount||0,applied_to_items:o.applied_to_items||[]}))),ui=we(()=>{let o=0;const r=parseFloat(Mt.props.onboarding.tax_and_vat.tax_rate)||0;return q.value.forEach(l=>{const _=P.value.find(w=>w.id===l.id);if(_&&_.is_taxable){const D=l.unit_price*l.qty*r/100;o+=D}}),o}),Oe=we(()=>q.value.reduce((o,r)=>o+(r.total_resale_discount||0),0)),Ie=we(()=>{const o=Kt.value+ui.value+si.value+ri.value-Oe.value-li.value-ts.value;return Math.max(0,o)}),nl=o=>{const r=P.value.find(l=>l.id===o.id);return r&&r.is_taxable&&r.tax_percentage?o.unit_price*o.qty*parseFloat(r.tax_percentage)/100:0},il=o=>{const r=P.value.find(l=>l.id===o.id);return r&&r.is_taxable&&r.tax_percentage?parseFloat(r.tax_percentage):0},No=o=>{const r=J(o),l=r?r.id:null,w=Ce(o).map(S=>S.id).sort().join("-"),D=q.value.find(S=>{const L=(S.addons||[]).map(oe=>oe.id).sort().join("-");return S.id===o.id&&S.variant_id===l&&L===w});return D?D.qty:0},sl=async o=>{const r=J(o),l=r?r.id:null,_=Ce(o),w=_.map(ye=>ye.id).sort().join("-"),D=q.value.findIndex(ye=>{const Ke=(ye.addons||[]).map(Ct=>Ct.id).sort().join("-");return ye.id===o.id&&ye.variant_id===l&&Ke===w});let S=1,L=null;const oe=ci(o,l);D>=0&&(L=q.value[D],S=L.qty+1);const B=Ns({id:o.id,title:o.title,variant_id:l,variant_name:r?r.name:null,ingredients:oe,removed_ingredients:L?.removed_ingredients||[],addons:_},S);if(!B.canAdd){console.log(" Missing ingredients for card increment (client-side)");const ye=parseFloat(r?r.price:o.price),Ke=te(o),Ct=r?mt(r,!0):mt(o,!1);is.value={product:o,variant:r,variantId:l,variantName:r?r.name:null,variantPrice:ye,selectedAddons:_,addonsPrice:Ke,resaleDiscountPerItem:Ct,existingIndex:D,newQty:S},$t.value=B.missing,Sn.value=!0,z.warning("Some ingredients are missing. Confirm to proceed.");return}const de=parseFloat(r?r.price:o.price),We=te(o),ae=de+We,ct=r?mt(r,!0):mt(o,!1);if(D>=0)q.value[D].qty++,q.value[D].price=q.value[D].unit_price*q.value[D].qty,q.value[D].total_resale_discount=ct*q.value[D].qty,q.value[D].outOfStock=!1;else{const ye=Oi(o);q.value.push({id:o.id,title:o.title,img:o.img,price:ae,unit_price:Number(ae),qty:1,note:"",stock:ye,ingredients:oe,variant_id:l,variant_name:r?r.name:null,addons:_,outOfStock:!1,resale_discount_per_item:ct,total_resale_discount:ct})}},rl=o=>{const r=J(o),l=r?r.id:null,w=Ce(o).map(L=>L.id).sort().join("-"),D=q.value.findIndex(L=>{const oe=(L.addons||[]).map(B=>B.id).sort().join("-");return L.id===o.id&&L.variant_id===l&&oe===w});if(D<0)return;const S=q.value[D];S.qty<=1?q.value.splice(D,1):(S.qty--,S.price=S.unit_price*S.qty,S.outOfStock=!1)},ci=(o,r)=>!r||!o.variants?.length?o.ingredients??[]:o.variants.find(_=>_.id===r)?.ingredients??o.ingredients??[],tt=W(null),Bn=W(null);let ze=null;const $r=(o,r)=>{tt.value=JSON.parse(JSON.stringify(o)),Bn.value=r;const l=P.value.find(_=>_.id===o.id);if(l&&l.addon_groups&&l.addon_groups.length>0){const _=new Map;o.addons&&o.addons.forEach(D=>{_.set(D.id,{quantity:D.quantity||1,selected:!0})});const w=[];l.addon_groups.forEach(D=>{D.addons&&D.addons.length>0&&D.addons.forEach(S=>{const L=_.get(S.id);w.push({id:S.id,name:S.name,price:parseFloat(S.price||0),group_id:D.group_id,group_name:D.group_name,quantity:L?.quantity||1,selected:L?.selected||!1})})}),tt.value.addons=w}else tt.value.addons=[];if(!ze){const _=document.getElementById("addonManagementModal");_&&(ze=new bootstrap.Modal(_))}ze&&ze.show()},di=o=>{o.selected=!o.selected,o.selected||(o.quantity=1)},Lo=o=>{o.selected&&(o.quantity=(o.quantity||1)+1)},Mr=o=>{o.selected&&(o.quantity||1)>1&&(o.quantity-=1)},Pt=o=>o.addons?o.addons.reduce((r,l)=>l.selected!==!1?r+parseFloat(l.price)*(l.quantity||1):r,0):0,$o=()=>{if(Bn.value===null)return;const o=tt.value.addons.filter(D=>D.selected!==!1),r=tt.value.variant_id?P.value.find(D=>D.id===tt.value.id)?.variants?.find(D=>D.id===tt.value.variant_id):null,l=parseFloat(r?r.price:tt.value.unit_price),_=o.reduce((D,S)=>D+parseFloat(S.price)*(S.quantity||1),0),w=l+_;q.value[Bn.value].addons=o,q.value[Bn.value].unit_price=w,q.value[Bn.value].price=w*q.value[Bn.value].qty,z.success("Addons updated successfully!"),ze&&ze.hide(),tt.value=null,Bn.value=null},Mo=o=>!o.addons||o.addons.length===0?"":o.addons.map(r=>r.name).join(", "),Bs=()=>{let o=0;return ut.value&&typeof ut.value=="object"&&Object.values(ut.value).forEach(r=>{Array.isArray(r)&&(o+=r.length)}),o},Li=we(()=>Mt.props.current_user),Pr=we(()=>s.value.filter(o=>o.menu_items_count&&o.menu_items_count>0)),Rr=we(()=>Li.value?.roles?.includes("Cashier")||Li.value?.roles?.includes("Admin")||Li.value?.roles?.includes("Manager")),xt=W(`terminal-${Li.value?.id}`),{broadcastCartUpdate:ol,broadcastUIUpdate:Yt}=Kw(xt.value),al=fo.debounce(o=>{console.log(" Broadcasting cart:",o.items.length,"items"),ol(o)},300),Po=fo.debounce(o=>{console.log(" Broadcasting UI"),Yt(o)},100);ws(()=>({items:q.value.map(o=>({id:o.id,title:o.name||o.title,img:o.image_url||o.img||"/assets/img/default.png",price:parseFloat(o.total||o.price||0),qty:parseInt(o.qty||1),variant_name:o.variant?.name||null,addons:(o.addons||[]).map(r=>({id:r.id,name:r.name,price:parseFloat(r.price||0)})),resale_discount_per_item:parseFloat(o.resale_discount_per_item||0)})),customer:yt.value||"Walk In",phone_number:Qe.value||"",delivery_location:Ht.value||"",orderType:Le.value||"Dine In",table:at.value?{id:at.value.id,name:at.value.name}:null,subtotal:parseFloat(Kt.value||0),tax:parseFloat(ui.value||0),serviceCharges:parseFloat(ri.value||0),deliveryCharges:parseFloat(si.value||0),saleDiscount:parseFloat(Oe.value||0),promoDiscount:parseFloat(li.value||0),total:parseFloat(Ie.value||0),note:qn.value||"",appliedPromos:(qe.value||[]).map(o=>({id:o.id,name:o.name,discount:parseFloat(o.discount||0),applied_to_items:o.applied_to_items||[]}))}),o=>{console.log(" Cart changed:",o.items.length,"items, Total:",o.total),al(o)},{deep:!0,immediate:!0}),ws(()=>({showCategories:Lt.value??!0,activeCat:ft.value||null,menuCategories:(s.value||[]).map(o=>({id:o.id,name:o.name,menu_items_count:o.menu_items_count||0})),menuItems:(P.value||[]).map(o=>({id:o.id,name:o.name,price:parseFloat(o.price||0),image_url:o.image_url||null,description:o.description||"",label_color:o.label_color||"#1B1670",category:o.category?{id:o.category.id,name:o.category.name}:null,variants:(o.variants||[]).map(r=>({id:r.id,name:r.name,price:parseFloat(r.price||0),is_saleable:r.is_saleable??!1,resale_type:r.resale_type||null,resale_value:parseFloat(r.resale_value||0)})),addon_groups:(o.addon_groups||[]).map(r=>({id:r.id,name:r.name,addons:(r.addons||[]).map(l=>({id:l.id,name:l.name,price:parseFloat(l.price||0)}))})),is_saleable:o.is_saleable??!1,resale_type:o.resale_type||null,resale_value:parseFloat(o.resale_value||0)})),searchQuery:et.value||"",selectedCardVariant:K.value||{},selectedCardAddons:j.value||{}}),o=>{console.log(" UI changed - Categories:",o.menuCategories.length,"Items:",o.menuItems.length),Po(o)},{deep:!0,immediate:!0});const Wn=()=>{if(!Rr.value){z.error("Only cashiers can access customer display");return}const o=route("customer-display.index",{terminal:xt.value});window.open(o,"_blank","width=1920,height=1080")},mt=(o,r=!1)=>{if(!o)return 0;const l=o.is_saleable??o?.menu_item?.is_saleable,_=o.resale_type??o?.menu_item?.resale_type,w=o.resale_value??o?.menu_item?.resale_value,D=parseFloat(o.price||0);return!l||!_||!w?0:_==="flat"?parseFloat(w):_==="percentage"?D*parseFloat(w)/100:0},On=(o,r=!1)=>{const l=parseFloat(o.price||0),_=mt(o,r);return Math.max(0,l-_)},De=(o,r=!1)=>{if(!o)return null;const l=o.is_saleable??o?.menu_item?.is_saleable,_=o.resale_type??o?.menu_item?.resale_type,w=o.resale_value??o?.menu_item?.resale_value,D=mt(o,r);return!l||!_||!w||D<=0?null:{type:_,value:w,amount:D,display:_==="flat"?`Sale ${n(D)}`:`${w}% OFF`}},Un=o=>{const r=J(o);let l;r?l=On(r,!0):l=On(o,!1);const _=te(o);return l+_},Vn=o=>{if(!o.variants||o.variants.length===0){const w=mt(o,!1)>0;return{min:On(o,!1),max:On(o,!1),minOriginal:w?parseFloat(o.price||0):null,maxOriginal:w?parseFloat(o.price||0):null}}const r=o.variants.map(w=>On(w,!0)),l=o.variants.map(w=>parseFloat(w.price||0)),_=o.variants.some(w=>mt(w,!0)>0);return{min:Math.min(...r),max:Math.max(...r),minOriginal:_?Math.min(...l):null,maxOriginal:_?Math.max(...l):null}},ll=()=>{if(!ve.value)return 0;const o=Ge();return o?On(o,!0):On(ve.value,!1)},Fr=()=>ll()+Ii(),cs=W([]),Ro=W(!1),ul=async()=>{Ro.value=!0;try{const o=await axios.get("/api/deals",{params:{status:1,per_page:100}});console.log("Fetched deals:",o.data.data),cs.value=o.data.data.map(r=>({id:r.id,title:r.name,price:r.price,img:r.image_url||"/assets/img/product/product29.jpg",description:r.description,menu_items:r.menu_items||[],status:r.status,category_id:r.category_id,category:r.category}))}catch(o){console.error("Error fetching deals:",o),z.error("Failed to load deals")}finally{Ro.value=!1}},qr=o=>{const r=q.value.find(l=>l.isDeal&&l.dealId===(o.dealId||o.id));return r?r.qty:0},Ws=o=>{const l=s.value.find(w=>w.id===o)?.menu_items_count||0,_=Dn(o);return l+_},Dn=o=>!cs.value||cs.value.length===0?0:cs.value.filter(r=>r.category_id===o).length,Fo=(o,r)=>{if(!rs.value)return{canAdd:!0,missing:[]};const l=[],_={};return q.value.forEach(w=>{let D=[];w.isDeal?w.menu_items?.forEach(S=>{D.push(...S.ingredients||[])}):D=w.ingredients||[],D.forEach(S=>{const L=S.inventory_item_id||S.id,oe=Number(S.inventory_stock??S.stock??0),B=Number(S.quantity??S.qty??1)*w.qty;_[L]||(_[L]={totalStock:oe,used:0,name:S.product_name||S.name,unit:S.unit||"unit"}),_[L].used+=B})}),o.menu_items.forEach(w=>{const D=w.ingredients||[];D.length!==0&&D.forEach(S=>{const L=S.inventory_item_id||S.id,oe=Number(S.quantity??S.qty??1)*r;let de=Number(S.inventory_stock??S.stock??0);_[L]&&(de=_[L].totalStock-_[L].used);const We=q.value.find(ae=>ae.isDeal&&ae.dealId===o.id);if(We){const ae=Number(S.quantity??S.qty??1)*We.qty;de+=ae}de<oe&&l.push({deal_id:o.id,deal_title:o.title,menu_item_id:w.id,menu_item_name:w.name,inventory_item_id:L,inventory_item_name:S.product_name||S.name,required_quantity:oe,available_quantity:Math.max(0,de),shortage_quantity:oe-de,unit:S.unit||"unit",order_quantity:r})})}),{canAdd:l.length===0,missing:l}},qo=async o=>{const r=q.value.findIndex(w=>w.isDeal&&w.dealId===o.id),l=r>=0?q.value[r].qty+1:1,_=Fo(o,l);if(!_.canAdd){console.log(" Missing ingredients for deal (client-side)"),ss.value={deal:o,existingIndex:r,newQty:l},$t.value=_.missing,Sn.value=!0,z.warning("Some ingredients are missing. Confirm to proceed.");return}if(r>=0)q.value[r].qty++,q.value[r].price=q.value[r].unit_price*q.value[r].qty,z.success("Deal quantity updated");else{const D=[];o.menu_items.forEach(L=>{L.ingredients&&L.ingredients.length>0&&D.push(...L.ingredients.map(oe=>({...oe,menu_item_id:L.id,menu_item_name:L.name})))});const S={id:`deal-${o.id}`,title:o.title,price:parseFloat(o.price),unit_price:parseFloat(o.price),img:o.img,qty:1,stock:999999,ingredients:D,isDeal:!0,dealId:o.id,menu_items:o.menu_items.map(L=>({id:L.id,name:L.name,price:L.price,ingredients:L.ingredients||[],stock:Ls(L.ingredients||[])})),resale_discount_per_item:0,total_resale_discount:0};q.value.push(S),z.success(`${o.title} added to cart!`)}},Bo=o=>{const r=q.value.findIndex(_=>_.isDeal&&_.dealId===o.id);if(r<0)return;const l=q.value[r];l.qty<=1?(q.value.splice(r,1),z.info("Deal removed from cart")):(l.qty--,l.price=l.unit_price*l.qty,z.success("Deal quantity decreased"))};tr(()=>{ul(),b()});const $e=W(null),Re=W(0),nt=W(1),kn=W({}),At=W({}),Hn=W({}),zn=W([]);let ds=null;const Ne=we(()=>!$e.value||!$e.value.menu_items?null:$e.value.menu_items[Re.value]),$i=we(()=>Us().length>0),Kn=we(()=>Ne.value?.addon_groups&&Ne.value.addon_groups.length>0),Mi=we(()=>{const o=[];return $i.value&&o.push({id:"ingredients",name:"Ingredients"}),Kn.value&&o.push({id:"addons",name:"Add-ons"}),o.push({id:"review",name:"Review"}),o}),fs=we(()=>Mi.value.length),cl=we(()=>{if(nt.value===1)return"0%";const o=Mi.value.length,r=(nt.value-1)/(o-1);return`calc(${r*100}% - ${14-r*28}px)`}),dl=we(()=>Re.value===$e.value?.menu_items?.length-1);we(()=>$e.value?.menu_items?.length?zn.value.length/$e.value.menu_items.length*100:0);const Us=()=>Ne.value?Ne.value.ingredients||[]:[],Br=o=>(kn.value[Re.value]||[]).includes(o),fl=o=>{const r=Re.value;kn.value[r]||(kn.value[r]=[]);const l=kn.value[r],_=l.indexOf(o);_>-1?(l.splice(_,1),z.info("Ingredient added back")):(l.push(o),z.info("Ingredient removed"))},Pi=()=>{const o=Us(),r=kn.value[Re.value]||[];return o.filter(l=>!r.includes(l.id)).length},pl=(o,r)=>{const l=Re.value;At.value[l]||(At.value[l]={});const w=Ne.value?.addon_groups?.find(D=>D.group_id===o);if(w&&w.max_select>0&&r.length>w.max_select){z.warning(`You can only select up to ${w.max_select} ${w.group_name}`),At.value[l][o]=r.slice(0,w.max_select);return}At.value[l][o]=r},hl=()=>{const o=Re.value,r=At.value[o];if(!r)return 0;let l=0;return Object.values(r).forEach(_=>{l+=_.length}),l},Wr=()=>{const o=Re.value,r=At.value[o];if(!r)return"";const l=[];return Object.values(r).forEach(_=>{_.forEach(w=>{l.push(`${w.name} (+${n(w.price)})`)})}),l.join(", ")},Ur=()=>{const o=Re.value,r=kn.value[o]||[];if(r.length===0)return"";const l=Us(),_=r.map(w=>{const D=l.find(S=>S.id===w);return D?D.product_name||D.name:null}).filter(Boolean);return _.length===0?"":`No ${_.join(", ")}`},Yn=o=>o<nt.value?"bg-success text-white":o===nt.value?"bg-primary text-white":"bg-light text-muted border",Vs=()=>{let o=nt.value+1;for(;o<=fs.value;){const r=Mi.value[o-1];if(r.id==="ingredients"&&!$i.value){o++;continue}if(r.id==="addons"&&!Kn.value){o++;continue}break}o<=fs.value&&(nt.value=o)},_l=()=>{let o=nt.value-1;for(;o>=1;){const r=Mi.value[o-1];if(r.id==="ingredients"&&!$i.value){o--;continue}if(r.id==="addons"&&!Kn.value){o--;continue}break}o>=1&&(nt.value=o)},vl=()=>{zn.value.includes(Re.value)||zn.value.push(Re.value),Re.value++,nt.value=1,z.success("Item customized! Configure next item.")},ml=async()=>{if(!$e.value)return;zn.value.includes(Re.value)||zn.value.push(Re.value);const o=$e.value.menu_items.map((D,S)=>{const L=kn.value[S]||[],oe=At.value[S]||{},B=Hn.value[S]||"",de=[];Object.values(oe).forEach(ae=>{ae.forEach(ct=>{de.push({id:ct.id,name:ct.name,price:parseFloat(ct.price||0)})})});const We=(D.ingredients||[]).filter(ae=>!L.includes(ae.id)).map(ae=>({id:ae.id,inventory_item_id:ae.inventory_item_id||ae.id,product_name:ae.product_name||ae.name,quantity:ae.quantity||ae.qty||"1.00",stock:ae.stock||0,unit:ae.unit||"unit"}));return{id:D.id,name:D.name,price:D.price,ingredients:We,addons:de,kitchen_note:B,removed_ingredients:L,stock:Ls(We)}}),r=q.value.findIndex(D=>D.isDeal&&D.dealId===$e.value.id),l=999999,_=[];if(o.forEach(D=>{D.ingredients&&D.ingredients.length>0&&_.push(...D.ingredients.map(S=>({...S,menu_item_id:D.id,menu_item_name:D.name})))}),r>=0)q.value[r].qty++,q.value[r].price=q.value[r].unit_price*q.value[r].qty,z.success("Deal quantity updated!");else{const D={id:`deal-${$e.value.id}`,title:$e.value.title,price:It.value,unit_price:parseFloat($e.value.price),img:$e.value.img,qty:1,stock:l,ingredients:_,isDeal:!0,dealId:$e.value.id,menu_items:o,resale_discount_per_item:0,total_resale_discount:0};q.value.push(D),z.success(`${$e.value.title} added to cart!`)}const w=bootstrap.Modal.getInstance(document.getElementById("customizeDealModal"));w&&w.hide(),bl()},fi=we(()=>{if(!Ne.value)return 0;const o=parseFloat(Ne.value.price||0),r=Re.value,l=At.value[r];if(!l)return o;let _=0;return Object.values(l).forEach(w=>{w.forEach(D=>{_+=parseFloat(D.price||0)})}),o+_}),It=we(()=>{if(!$e.value)return 0;const o=parseFloat($e.value.price||0);let r=0;return Object.values(At.value).forEach(l=>{Object.values(l).forEach(_=>{_.forEach(w=>{r+=parseFloat(w.price||0)})})}),o+r}),ps=we(()=>{const o=Re.value,r=At.value[o];if(!r)return 0;let l=0;return Object.values(r).forEach(_=>{_.forEach(w=>{l+=parseFloat(w.price||0)})}),l}),gl=o=>{if($e.value=o,Re.value=0,nt.value=1,kn.value={},At.value={},Hn.value={},zn.value=[],!ds){const r=document.getElementById("customizeDealModal");r&&(ds=new bootstrap.Modal(r,{backdrop:"static"}))}ds&&ds.show()},bl=()=>{$e.value=null,Re.value=0,nt.value=1,kn.value={},At.value={},Hn.value={},zn.value=[]},Hs=W(!1),Ri=W([]),Vr=W(!1),Fi=async()=>{if(q.value.length===0){z.error("No items in cart to hold");return}try{const o={customer_name:yt.value,phone_number:Qe.value,delivery_location:Ht.value,order_type:Le.value,table_number:at.value?.name||null,sub_total:Kt.value,tax:ui.value,service_charges:ri.value,delivery_charges:si.value,sale_discount:Oe.value,promo_discount:li.value,approved_discounts:ts.value,total_amount:Ie.value,note:qn.value,kitchen_note:Tn.value,order_items:q.value.map(l=>({product_id:l.id,title:l.title,quantity:l.qty,price:l.price,unit_price:l.unit_price,note:l.note||"",item_kitchen_note:l.item_kitchen_note||"",variant_id:l.variant_id||null,variant_name:l.variant_name||null,addons:l.addons||[],ingredients:l.ingredients||[],removed_ingredients:l.removed_ingredients||[],sale_discount_per_item:l.resale_discount_per_item||0,total_resale_discount:l.total_resale_discount||0,isDeal:l.isDeal||!1,dealId:l.dealId||null,menu_items:l.menu_items||[]})),applied_promos:qe.value.map(l=>({promo_id:l.id,promo_name:l.name,promo_type:l.type,discount_amount:l.applied_discount||0,applied_to_items:l.applied_to_items||[]})),approved_discount_details:ht.value.map(l=>({discount_id:l.id,discount_name:l.name,discount_percentage:l.percentage,discount_amount:ns(l.percentage),approval_id:l.approval_id})),selected_discounts:ht.value,terminal_id:xt.value};(await axios.post("/pending-orders",o)).data.success&&(z.success("Order held successfully!"),Sr(),await b())}catch(o){z.error(o.response?.data?.message||"Failed to hold order")}},b=async()=>{Vr.value=!0;try{const o=await axios.get("/pending-orders");o.data.success?Ri.value=o.data.data:Ri.value=[]}catch{z.error("Failed to load pending orders"),Ri.value=[]}finally{Vr.value=!1}},k=async()=>{Hs.value=!0,await b()},A=async o=>{try{if(yt.value=o.customer_name||ks(),Qe.value=o.phone_number||"",Ht.value=o.delivery_location||"",Le.value=o.order_type,qn.value=o.note||"",Tn.value=o.kitchen_note||"",o.table_number){const r=zt.value.table_details?.find(l=>l.name===o.table_number);at.value=r||null}q.value=o.order_items.map(r=>({id:r.product_id,title:r.title,qty:r.quantity,price:r.price,unit_price:r.unit_price,note:r.note||"",item_kitchen_note:r.item_kitchen_note||"",img:r.img||"/assets/img/default.png",variant_id:r.variant_id||null,variant_name:r.variant_name||null,addons:r.addons||[],ingredients:r.ingredients||[],removed_ingredients:r.removed_ingredients||[],resale_discount_per_item:r.sale_discount_per_item||0,total_resale_discount:r.total_resale_discount||0,stock:r.stock||999999,isDeal:r.isDeal||!1,dealId:r.dealId||null,menu_items:r.menu_items||[]})),qe.value=o.applied_promos||[],ht.value=o.selected_discounts||[],await axios.delete(`/pending-orders/${o.id}`),z.success("Order resumed successfully!"),Hs.value=!1,await b()}catch{z.error("Failed to resume order")}},Y=async o=>{try{await axios.delete(`/pending-orders/${o.id}`),z.success("Pending order rejected"),await b()}catch{z.error("Failed to reject order")}},le=(o,r)=>ut.value[o]?.some(l=>l.id===r),Te=(o,r)=>ut.value[o]?.find(_=>_.id===r)?.quantity||1,it=(o,r)=>{ut.value[o]||(ut.value[o]=[]);const l=ut.value[o].findIndex(_=>_.id===r.id);if(l>-1)ut.value[o].splice(l,1);else{const _=ve.value.addon_groups.find(w=>w.group_id===o);if(_&&_.max_select>0&&ut.value[o].length>=_.max_select){z.warning(`You can only select up to ${_.max_select} ${_.group_name}`);return}ut.value[o].push({id:r.id,name:r.name,price:parseFloat(r.price),group_id:o,quantity:1})}},Fe=(o,r)=>{const l=ut.value[o]?.find(_=>_.id===r);l&&l.quantity++},Hr=(o,r)=>{const l=ut.value[o]?.find(_=>_.id===r);l&&l.quantity>1&&l.quantity--};return(o,r)=>(I(),O(Pe,null,[Bt(ue(Nb),{title:"Sale"}),Bt($b,null,{default:hu(()=>[c("div",dx,[c("div",fx,[c("div",px,[c("div",{class:Zt(Lt.value?"col-md-12":"col-lg-8")},[Lt.value?(I(),O("div",hx,[c("div",_x,[r[28]||(r[28]=c("h4",{class:"mb-0"},"Menu Categories",-1)),Rr.value?(I(),O("button",{key:0,onClick:Wn,class:"btn btn-primary d-flex align-items-center gap-2",type:"button"},[...r[26]||(r[26]=[c("i",{class:"bi bi-tv"},null,-1),c("span",null,"Customer View",-1)])])):X("",!0),c("div",vx,[r[27]||(r[27]=c("input",{type:"email",name:"email",autocomplete:"email",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px"},tabindex:"-1","aria-hidden":"true"},null,-1)),C.value?dt((I(),O("input",{id:x,"onUpdate:modelValue":r[0]||(r[0]=l=>v.value=l),key:y.value,type:"search",class:"form-control form-control-sm",placeholder:"Search categories...",autocomplete:"new-password",name:x,role:"presentation",style:{"border-radius":"8px",padding:"8px 12px"}})),[[Xn,v.value]]):(I(),O("input",mx))])]),r[31]||(r[31]=c("hr",null,null,-1)),f.value?(I(),O("div",gx,[...r[29]||(r[29]=[c("div",{class:"spinner-border",role:"status",style:{color:"#1B1670",width:"3rem",height:"3rem","border-width":"0.3em"}},null,-1),c("div",{class:"mt-2 fw-semibold text-muted"},"Loading...",-1)])])):(I(),O(Pe,{key:1},[(I(!0),O(Pe,null,ot(T.value,l=>(I(),O("div",{key:l.id,class:"col-6 col-md-4 col-lg-4 category-cards"},[c("div",{class:"cat-card",onClick:_=>ii(l)},[c("div",yx,[c("span",Ex,[l.image_url?(I(),O("img",{key:0,src:l.image_url,alt:"Category Image",class:"cat-image"},null,8,wx)):(I(),O("span",xx,""))])]),c("div",Ax,N(l.name),1),c("div",Cx,[he(N(Ws(l.id))+" Items ",1),Dn(l.id)>0?(I(),O("span",Tx," ("+N(Dn(l.id))+" Deal"+N(Dn(l.id)>1?"s":"")+") ",1)):X("",!0)])],8,bx)]))),128)),!f.value&&T.value.length===0?(I(),O("div",Sx,[...r[30]||(r[30]=[c("div",{class:"alert alert-light border text-center rounded-4"}," No categories found ",-1)])])):X("",!0)],64))])):(I(),O("div",Ix,[c("div",Ox,[c("button",{class:"btn btn-primary rounded-pill shadow-sm px-3",onClick:r[1]||(r[1]=l=>Ji())},[...r[32]||(r[32]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),he(" Back ",-1)])]),c("h5",Dx,N(s.value.find(l=>l.id===ft.value)?.name||"Items"),1),c("div",kx,[Bt(Wb,{modelValue:lt.value,"onUpdate:modelValue":r[2]||(r[2]=l=>lt.value=l),title:"Menu Items","modal-id":"menuFilterModal","sort-options":[{value:"name_asc",label:"Name: A to Z"},{value:"name_desc",label:"Name: Z to A"},{value:"price_asc",label:"Price: Low to High"},{value:"price_desc",label:"Price: High to Low"}],"show-price-range":!0,"show-category":!1,"show-stock-status":!1,"show-date-range":!1,categories:[],suppliers:[],onApply:Er,onClear:Ar},null,8,["modelValue"]),c("div",Nx,[r[33]||(r[33]=c("i",{class:"bi bi-search position-absolute",style:{left:"12px",top:"50%",transform:"translateY(-50%)","z-index":"10"}},null,-1)),dt(c("input",{"onUpdate:modelValue":r[3]||(r[3]=l=>et.value=l),class:"form-control search-input ps-5",type:"text",placeholder:"Search items...",style:{"min-width":"250px"}},null,512),[[Xn,et.value]])])])]),Ds.value.length===0?(I(),O("div",Lx,[c("div",$x,[r[37]||(r[37]=c("i",{class:"bi bi-search me-2",style:{"font-size":"2rem",opacity:"0.5"}},null,-1)),r[38]||(r[38]=c("h5",{class:"mt-2 mb-2 text-dark fw-semibold"},"No Menu Found",-1)),c("p",Mx,[et.value&&lt.value.priceRange&&lt.value.priceRange.length>0?(I(),O(Pe,{key:0},[he(" No items match your search and filter criteria. ")],64)):et.value?(I(),O(Pe,{key:1},[r[34]||(r[34]=he(' No items found matching "',-1)),c("strong",null,N(et.value),1),r[35]||(r[35]=he('" ',-1))],64)):lt.value.priceRange&&lt.value.priceRange.length>0?(I(),O(Pe,{key:2},[he(" No items match the selected price range. ")],64)):(I(),O(Pe,{key:3},[he(" No Menu available in this category. ")],64))]),c("button",{class:"btn btn-sm btn-outline-secondary rounded-pill",onClick:Ar},[...r[36]||(r[36]=[c("i",{class:"bi bi-arrow-clockwise me-1"},null,-1),he("Clear Filters ",-1)])])])])):X("",!0),c("div",Px,[(I(!0),O(Pe,null,ot(Ds.value,l=>(I(),O("div",{class:"col-12 col-md-6 left-card cat-cards col-xl-6 d-flex",key:l.id},[l.isDeal?(I(),O("div",Rx,[c("div",Fx,[c("img",{src:l.img,alt:"",class:"w-100 h-100",style:{"object-fit":"cover"}},null,8,qx),c("span",Bx,[r[39]||(r[39]=c("i",{class:"bi bi-gift-fill me-1"},null,-1)),he(" "+N(ue(n)(l.price)),1)])]),c("div",Wx,[c("div",null,[c("div",Ux,N(l.title),1),c("div",Vx,[r[40]||(r[40]=c("small",{class:"text-muted fw-semibold d-block mb-1",style:{"font-size":"0.75rem"}},[c("i",{class:"bi bi-box-seam me-1"}),he("Includes: ")],-1)),c("div",Hx,[(I(!0),O(Pe,null,ot(l.menu_items,_=>(I(),O("span",{key:_.id,class:"badge bg-light text-dark border",style:{"font-size":"0.7rem","font-weight":"500"}},N(_.name),1))),128))])])]),c("div",zx,[c("button",{class:"btn btn-primary btn-sm w-75 mb-2",onClick:Hi(_=>gl(l),["stop"])},[...r[41]||(r[41]=[c("i",{class:"bi bi-sliders me-1"},null,-1),he(" Customize Deal ",-1)])],8,Kx),c("div",{class:"d-flex align-items-center justify-content-start gap-2",onClick:r[4]||(r[4]=Hi(()=>{},["stop"]))},[c("button",{class:"qty-btn btn btn-outline-danger rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Hi(_=>Bo(l),["stop"]),disabled:qr(l)<=0},[...r[42]||(r[42]=[c("strong",null,"",-1)])],8,Yx),c("div",Gx,N(qr(l)),1),c("button",{class:"qty-btn btn btn-outline-danger rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Hi(_=>qo(l),["stop"])},[...r[43]||(r[43]=[c("strong",null,"+",-1)])],8,jx)])])])])):(I(),O("div",{key:1,class:"card rounded-4 shadow-sm overflow-hidden border-3 w-100 d-flex flex-row align-items-stretch",style:ro({borderColor:l.label_color||"#1B1670"})},[c("div",Qx,[c("img",{src:l.img,alt:"",class:"w-100 h-100",style:{"object-fit":"cover"}},null,8,Xx),l.variants&&l.variants.length>0?(I(),O("div",Zx,[Vn(l).minOriginal!==null?(I(),O("span",Jx,N(ue(n)(Vn(l).minOriginal)),1)):X("",!0),c("span",eA,N(ue(n)(Vn(l).min))+" - ",1),Vn(l).maxOriginal!==null?(I(),O("span",tA,N(ue(n)(Vn(l).maxOriginal)),1)):X("",!0),c("span",nA,N(ue(n)(Vn(l).max)),1)])):X("",!0),c("span",{class:"position-absolute top-0 start-0 m-1 px-2 py-1 rounded-pill text-white fw-semibold",style:ro({background:l.label_color||"#1B1670",fontSize:"0.58rem",letterSpacing:"0.3px"})},[De(J(l)||l,!!l.variants?.length)?(I(),O(Pe,{key:0},[c("span",iA,N(ue(n)(J(l)?.price||l.price)),1),c("span",sA,N(ue(n)(Un(l))),1)],64)):(I(),O(Pe,{key:1},[he(N(ue(n)(J(l)?.price||l.price)),1)],64))],4),ni(l)<=0?(I(),O("span",rA," OUT OF STOCK ")):X("",!0)]),c("div",oA,[l.variants&&l.variants.length>0&&De(J(l),!0)||(!l.variants||l.variants.length===0)&&De(l,!1)?(I(),O("span",aA,N(l.variants&&l.variants.length>0?De(J(l),!0).display:De(l,!1).display),1)):X("",!0),c("div",null,[c("div",{class:"h5 fw-bold mb-2 menu-name",style:ro({color:l.label_color||"#1B1670"})},N(l.title),5),l.variants&&l.variants.length>0?(I(),O("div",lA,[r[44]||(r[44]=c("label",{class:"form-label small fw-semibold mb-1"}," Variants: ",-1)),dt(c("select",{"onUpdate:modelValue":_=>K.value[l.id]=_,class:"form-select form-select-sm variant-select",onChange:_=>ee(l,_),onClick:r[5]||(r[5]=Hi(()=>{},["stop"]))},[(I(!0),O(Pe,null,ot(l.variants,_=>(I(),O("option",{key:_.id,value:_.id},[he(N(_.name)+" - "+N(ue(n)(_.price))+" ",1),_.is_saleable&&mt(_,!0)>0?(I(),O(Pe,{key:0},[he(" (Sale: "+N(ue(n)(mt(_,!0)))+") ",1)],64)):X("",!0)],8,cA))),128))],40,uA),[[Wd,K.value[l.id]]])])):X("",!0),l.addon_groups&&l.addon_groups.length>0?(I(),O("div",dA,[r[45]||(r[45]=c("label",{class:"form-label small fw-semibold mb-2"}," Add-ons ",-1)),Bt(ue(Ud),{modelValue:ce(l),"onUpdate:modelValue":_=>_e(l,_),options:Se(l),optionLabel:"name",dataKey:"id",placeholder:"Select addons",maxSelectedLabels:3,class:"w-100 addon-multiselect",display:"chip"},{value:hu(_=>[_.value&&_.value.length>0?(I(),O("div",fA,[(I(!0),O(Pe,null,ot(_.value,w=>(I(),O("span",{key:w.id,class:"badge bg-primary"},N(w.name)+" +"+N(ue(n)(w.price)),1))),128))])):(I(),O("span",pA,N(_.placeholder),1))]),option:hu(_=>[c("div",hA,[c("div",null,[c("div",null,N(_.option.name),1),c("small",_A,N(_.option.group_name),1)]),c("span",vA," +"+N(ue(n)(_.option.price)),1)])]),_:1},8,["modelValue","onUpdate:modelValue","options"])])):X("",!0),c("button",{class:"btn btn-primary btn-sm mb-2 view-details-btn",onClick:_=>bt(l)}," Customization ",8,mA)]),c("div",{class:"mt-2 d-flex align-items-center justify-content-start gap-2",onClick:r[6]||(r[6]=Hi(()=>{},["stop"]))},[c("button",{class:"qty-btn btn btn-outline-secondary rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Hi(_=>rl(l),["stop"]),disabled:No(l)<=0},[...r[46]||(r[46]=[c("strong",null,"",-1)])],8,gA),c("div",bA,N(No(l)),1),c("button",{class:"qty-btn btn btn-outline-secondary rounded-circle px-2 py-2",style:{width:"55px",height:"36px"},onClick:Hi(_=>sl(l),["stop"])},[...r[47]||(r[47]=[c("strong",null,"+",-1)])],8,yA)])])],4))]))),128))])]))],2),Lt.value?X("",!0):(I(),O("div",EA,[c("div",wA,[c("button",{class:"btn btn-info px-3 py-2",onClick:k},[r[48]||(r[48]=he(" Pending ",-1)),Ri.value.length>0?(I(),O("span",xA,N(Ri.value.length),1)):X("",!0)]),c("button",{class:"btn btn-warning px-3 py-2 promos-btn",onClick:Xa}," Promos "),c("button",{class:"btn btn-warning px-3 py-2 discount-btn",onClick:Za}," Discounts ")]),c("div",AA,[c("div",CA,[c("div",TA,[(I(!0),O(Pe,null,ot(An.value,(l,_)=>(I(),O("button",{key:_,class:Zt(["ot-pill btn cart-header-buttons",{active:Le.value===l}]),onClick:w=>Le.value=l},N(l.replace(/_/g," ")),11,SA))),128)),r[49]||(r[49]=c("div",{class:"d-flex justify-content-between mb-3"},null,-1))])]),c("div",IA,[c("div",OA,[Le.value==="Eat_in"?(I(),O("div",DA,[c("div",kA,[r[51]||(r[51]=c("label",{class:"form-label small"},"Table",-1)),dt(c("select",{"onUpdate:modelValue":r[7]||(r[7]=l=>at.value=l),class:"form-select form-select-sm"},[r[50]||(r[50]=c("option",{value:null},"Select Table",-1)),(I(!0),O(Pe,null,ot(zt.value.table_details,(l,_)=>(I(),O("option",{key:_,value:l},N(l.name),9,NA))),128))],512),[[Wd,at.value]]),Et.value.table_number?(I(),O("div",LA,N(Et.value.table_number[0]),1)):X("",!0)]),c("div",$A,[r[52]||(r[52]=c("label",{class:"form-label small"},"Customer",-1)),dt(c("input",{"onUpdate:modelValue":r[8]||(r[8]=l=>yt.value=l),class:"form-control form-control-sm",placeholder:"Walk In"},null,512),[[Xn,yt.value]])])])):(I(),O("div",MA,[r[53]||(r[53]=c("label",{class:"form-label small"},"Customer",-1)),dt(c("input",{"onUpdate:modelValue":r[9]||(r[9]=l=>yt.value=l),class:Zt(["form-control form-control-sm",{"is-invalid":Et.value.customer}]),placeholder:"Walk In"},null,2),[[Xn,yt.value]]),Et.value.customer?(I(),O("div",PA,N(Et.value.customer[0]),1)):X("",!0)])),Le.value==="Delivery"?(I(),O("div",RA,[r[54]||(r[54]=c("label",{class:"form-label small"},"Delivery Location",-1)),dt(c("input",{"onUpdate:modelValue":r[10]||(r[10]=l=>Ht.value=l),class:"form-control form-control-sm",placeholder:"Enter delivery location"},null,512),[[Xn,Ht.value]]),Et.value.delivery_location?(I(),O("div",FA,N(Et.value.delivery_location[0]),1)):X("",!0),r[55]||(r[55]=c("label",{class:"form-label small mt-2"},"Phone Number",-1)),dt(c("input",{"onUpdate:modelValue":r[11]||(r[11]=l=>Qe.value=l),class:"form-control form-control-sm",placeholder:"Enter phone number"},null,512),[[Xn,Qe.value]]),Et.value.phone_number?(I(),O("div",qA,N(Et.value.phone_number[0]),1)):X("",!0)])):X("",!0)]),c("div",BA,[q.value.length===0?(I(),O("div",WA," Add items from the left ")):X("",!0),(I(!0),O(Pe,null,ot(q.value,(l,_)=>(I(),O("div",{key:l.title,class:"line"},[c("div",UA,[c("img",{src:l.img,alt:""},null,8,VA),c("div",HA,[c("div",{class:"name",title:l.title},N(l.title),9,zA),l.resale_discount_per_item>0?(I(),O("div",KA,[c("span",YA,[r[56]||(r[56]=c("i",{class:"bi bi-tag-fill"},null,-1)),he(" Save "+N(ue(n)(l.resale_discount_per_item)),1)])])):X("",!0),l.addons&&l.addons.length>0?(I(),O("div",GA,[c("button",{class:"btn-link p-0 py-0 text-decoration-none",onClick:w=>$r(l,_),title:Mo(l)},[r[57]||(r[57]=c("i",{class:"bi bi-plus-circle-fill text-primary me-1",style:{"font-size":"0.9rem"}},null,-1)),c("span",QA,N(l.addons.length)+" addon(s)",1)],8,jA)])):X("",!0),Lr(l)?(I(),O("span",XA,[...r[58]||(r[58]=[c("i",{class:"bi bi-tag-fill"},null,-1)])])):X("",!0),l.variant_name?(I(),O("div",ZA,[c("span",JA,N(l.variant_name),1)])):X("",!0),l.note?(I(),O("div",eC,N(l.note),1)):X("",!0)])]),c("div",tC,[c("div",nC,[c("button",{class:"qty-btn",onClick:w=>bo(_)},"",8,iC),c("div",sC,N(l.qty),1),c("button",{class:"qty-btn",onClick:w=>Wa(_)},"+",8,rC)]),c("div",oC,[c("div",aC,N(ue(n)(l.price)),1),c("button",{class:"del",onClick:w=>Ua(_)},[...r[59]||(r[59]=[c("i",{class:"bi bi-trash"},null,-1)])],8,lC)])])]))),128))]),c("div",uC,[c("div",cC,[r[60]||(r[60]=c("span",null,"Sub Total",-1)),c("b",dC,N(ue(n)(Kt.value)),1)]),ui.value>0?(I(),O("div",fC,[r[61]||(r[61]=c("span",{class:"d-flex align-items-center gap-2"},[c("i",{class:"bi bi-receipt text-info"}),he(" Tax ")],-1)),c("b",pC,N(ue(n)(ui.value)),1)])):X("",!0),ri.value>0?(I(),O("div",hC,[r[62]||(r[62]=c("span",{class:"text-muted"},"Service Charges:",-1)),c("span",_C,N(ue(n)(ri.value)),1)])):X("",!0),si.value>0?(I(),O("div",vC,[r[63]||(r[63]=c("span",{class:"text-muted"},"Delivery Charges:",-1)),c("span",mC,N(ue(n)(si.value)),1)])):X("",!0),Oe.value>0?(I(),O("div",gC,[r[64]||(r[64]=c("span",{class:"d-flex align-items-center gap-2"},[c("span",{class:"text-danger"},"Sale Discount:")],-1)),c("b",bC,"-"+N(ue(n)(Oe.value)),1)])):X("",!0),qe.value&&qe.value.length>0?(I(),O("div",yC,[c("div",EC,[c("div",wC,[r[65]||(r[65]=c("span",{class:"text-success"},"Promo Discount:",-1)),c("b",xC,"-"+N(ue(n)(li.value)),1)])])])):X("",!0),wt.value.length>0?(I(),O("div",AC,[r[67]||(r[67]=c("div",{class:"alert alert-warning py-2 px-3 mb-2"},[c("div",{class:"d-flex align-items-center gap-2"},[c("i",{class:"bi bi-clock-history"}),c("small",{class:"fw-semibold"},"Pending Approval")])],-1)),(I(!0),O(Pe,null,ot(wt.value,l=>(I(),O("div",{key:l.id,class:"trow"},[c("span",CC,[r[66]||(r[66]=c("i",{class:"bi bi-hourglass-split"},null,-1)),c("span",null,N(l.discountData?.name||"Discount")+" ("+N(l.percentage)+"%)",1)]),c("span",TC," -"+N(ue(n)(ns(l.percentage))),1)]))),128)),r[68]||(r[68]=c("small",{class:"text-muted d-block mt-1 ms-4"},[c("i",{class:"bi bi-info-circle me-1"}),he(" Will apply after Super Admin approval ")],-1))])):X("",!0),ht.value.length>0?(I(),O("div",SC,[c("div",IC,[r[69]||(r[69]=c("div",{class:"d-flex align-items-center text-success gap-2"},[c("i",{class:"bi bi-check-circle"}),c("small",{class:"fw-semibold"},"Approved Discounts"),c("i",{class:"bi bi-info-circle text-muted",tabindex:"0",role:"button","data-bs-toggle":"popover","data-bs-trigger":"click","data-bs-html":"true","data-bs-placement":"top","data-bs-container":"body","data-bs-content":"Auto-updates with cart changes<br>Approved Discounts"})],-1)),c("b",OC,"-"+N(ue(n)(ts.value)),1)])])):X("",!0),c("div",DC,[r[70]||(r[70]=c("span",null,"Total",-1)),c("b",null,N(ue(n)(Ie.value)),1)])]),c("div",kC,[r[71]||(r[71]=c("label",{for:"frontNote",class:"form-label small fw-semibold"},"Front Note",-1)),dt(c("textarea",{id:"frontNote","onUpdate:modelValue":r[12]||(r[12]=l=>qn.value=l),rows:"3",class:"form-control form-control-sm rounded-3",placeholder:"Enter front note..."},null,512),[[Xn,qn.value]])]),c("div",NC,[r[72]||(r[72]=c("label",{for:"kitchenNote",class:"form-label small fw-semibold"},"Kitchen Note",-1)),dt(c("textarea",{id:"kitchenNote","onUpdate:modelValue":r[13]||(r[13]=l=>Tn.value=l),rows:"3",class:"form-control form-control-sm rounded-3",placeholder:"Enter kitchen note..."},null,512),[[Xn,Tn.value]])])]),c("div",LC,[c("button",{class:"btn btn-secondary btn-clear",onClick:r[14]||(r[14]=l=>Sr())}," Clear "),c("button",{class:"btn btn-warning",onClick:Fi}," Pending "),c("button",{class:"btn btn-primary btn-place",onClick:Ka}," Place Order ")])])]))])]),c("div",$C,[c("div",MC,[c("div",PC,[c("div",RC,[c("div",null,[c("h5",FC,N(ve.value?.title||"Choose Item"),1),r[73]||(r[73]=c("p",{class:"text-muted small mb-0",style:{"font-size":"0.8rem"}},"Customize your order",-1))]),r[74]||(r[74]=c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])],-1))]),c("div",qC,[c("div",BC,[r[75]||(r[75]=c("div",{class:"stepper-progress-bg"},null,-1)),c("div",{class:"stepper-progress-fill",style:ro({width:Nt.value})},null,4),(I(!0),O(Pe,null,ot(Je.value,(l,_)=>(I(),O("div",{key:l.id,class:"stepper-step text-center"},[c("div",{class:Zt(["stepper-circle stepper-circle-sm",En(_+1)])},[_+1<ke.value?(I(),O("i",WC)):(I(),O("span",UC,N(_+1),1))],2),c("small",{class:Zt(["stepper-label",{"stepper-label-active":_+1===ke.value}]),style:{"font-size":"0.7rem","margin-top":"4px",display:"block"}},N(l.name),3)]))),128))])]),c("div",VC,[c("div",HC,[c("div",zC,[c("div",KC,[c("img",{src:ve.value?.image_url||ve.value?.img||"/assets/img/product/product29.jpg",class:"img-fluid rounded-3 w-100 object-fit-cover",style:{height:"200px","object-fit":"cover"},alt:"Product"},null,8,YC),Ge()&&De(Ge(),!0)?(I(),O("span",GC,[r[76]||(r[76]=c("i",{class:"bi bi-tag-fill me-1"},null,-1)),he(" "+N(De(Ge(),!0).display),1)])):X("",!0)]),c("div",jC,[r[80]||(r[80]=c("div",{class:"d-flex align-items-center mb-2"},[c("i",{class:"bi bi-receipt me-2 text-primary",style:{"font-size":"1rem"}}),c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Price Breakdown")],-1)),c("div",QC,[r[77]||(r[77]=c("span",{class:"text-muted"},"Base Price",-1)),c("strong",null,N(ue(n)(xn())),1)]),Ii()>0?(I(),O("div",XC,[r[78]||(r[78]=c("span",{class:"text-muted"},"Add-ons",-1)),c("strong",ZC,"+ "+N(ue(n)(Ii())),1)])):X("",!0),r[81]||(r[81]=c("hr",{class:"my-2"},null,-1)),c("div",JC,[r[79]||(r[79]=c("span",{class:"fw-bold"},"Total",-1)),c("span",eT,N(ue(n)(Fr())),1)])])]),c("div",tT,[c("div",nT,[dt(c("div",iT,[r[83]||(r[83]=c("div",{class:"d-flex align-items-start mb-2"},[c("i",{class:"bi bi-grid-3x3-gap me-2 text-primary",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Choose Variant ")])],-1)),c("div",sT,[(I(!0),O(Pe,null,ot(ve.value?.variants,l=>(I(),O("div",{key:l.id,class:"col-12"},[c("div",{class:Zt(["border rounded-3 p-2 shadow-sm variant-card",cn.value===l.id?"border-primary bg-light":""]),onClick:_=>ti(l.id),style:{cursor:"pointer"}},[c("div",oT,[c("div",null,[c("h6",aT,N(l.name),1)]),c("div",lT,[cn.value===l.id?(I(),O("div",uT,[...r[82]||(r[82]=[c("i",{class:"bi bi-check-circle-fill",style:{"font-size":"1rem"}},null,-1)])])):X("",!0),c("strong",cT,N(ue(n)(l.price)),1)])])],10,rT)]))),128))])],512),[[Ki,ke.value===1&&Ve.value]]),dt(c("div",dT,[r[84]||(r[84]=c("div",{class:"d-flex align-items-start mb-2"},[c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Remove Ingredients")])],-1)),c("div",fT,[(I(!0),O(Pe,null,ot(be(),l=>(I(),O("div",{key:l.id||l.inventory_item_id,class:"col-md-6"},[c("div",{class:Zt(["d-flex align-items-center p-2 border rounded-2 shadow-sm",{"bg-light text-muted":Be(l.id||l.inventory_item_id)}])},[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"16px",height:"16px"},id:"ingredient-"+(l.id||l.inventory_item_id),checked:!Be(l.id||l.inventory_item_id),disabled:!Be(l.id||l.inventory_item_id)&&Ye()===1,onChange:_=>Ue(l.id||l.inventory_item_id)},null,40,pT),c("label",{for:"ingredient-"+(l.id||l.inventory_item_id),class:"form-check-label",style:{"font-size":"0.8rem"}},N(l.product_name||l.name),9,hT)],2)]))),128))])],512),[[Ki,ke.value===2&&kt.value]]),dt(c("div",_T,[r[87]||(r[87]=c("div",{class:"d-flex align-items-start mb-2"},[c("i",{class:"bi bi-plus-circle me-2 text-success",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Add Add-ons"),c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}},"Enhance your meal")])],-1)),(I(!0),O(Pe,null,ot(ve.value?.addon_groups,l=>(I(),O("div",{key:l.group_id,class:"mb-3"},[c("label",vT,[c("span",null,N(l.group_name),1),l.max_select>0?(I(),O("span",mT," Max "+N(l.max_select),1)):X("",!0)]),c("div",gT,[(I(!0),O(Pe,null,ot(l.addons,_=>(I(),O("div",{key:_.id,class:"col-12"},[c("div",{class:Zt(["border rounded-2 p-2 shadow-sm d-flex align-items-center justify-content-between",{"bg-light border-success":le(l.group_id,_.id)}])},[c("div",bT,[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"18px",height:"18px",cursor:"pointer"},id:"addon-"+_.id,checked:le(l.group_id,_.id),onChange:w=>it(l.group_id,_)},null,40,yT),c("label",{for:"addon-"+_.id,class:"form-check-label mb-0",style:{"font-size":"0.85rem",cursor:"pointer"}},[he(N(_.name)+" ",1),c("span",wT," +"+N(ue(n)(_.price)),1)],8,ET)]),le(l.group_id,_.id)?(I(),O("div",xT,[c("button",{class:"btn btn-sm btn-outline-danger rounded-circle",style:{width:"28px",height:"28px",padding:"0",display:"flex","align-items":"center","justify-content":"center"},onClick:w=>Hr(l.group_id,_.id),disabled:Te(l.group_id,_.id)<=1},[...r[85]||(r[85]=[c("i",{class:"bi bi-dash",style:{"font-size":"0.9rem"}},null,-1)])],8,AT),c("span",CT,N(Te(l.group_id,_.id)),1),c("button",{class:"btn btn-sm btn-outline-success rounded-circle",style:{width:"28px",height:"28px",padding:"0",display:"flex","align-items":"center","justify-content":"center"},onClick:w=>Fe(l.group_id,_.id)},[...r[86]||(r[86]=[c("i",{class:"bi bi-plus",style:{"font-size":"0.9rem"}},null,-1)])],8,TT)])):X("",!0)],2)]))),128))])]))),128))],512),[[Ki,ke.value===3&&Vt.value]]),dt(c("div",ST,[r[94]||(r[94]=c("div",{class:"d-flex align-items-start mb-2"},[c("i",{class:"bi bi-cart-check me-2 text-success",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",{class:"fw-bold mb-0",style:{"font-size":"0.9rem"}},"Review Your Order"),c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}},"Confirm selections")])],-1)),c("div",IT,[r[91]||(r[91]=c("h6",{class:"fw-bold mb-2 text-secondary"},"Order Summary",-1)),Ve.value?(I(),O("div",OT,[r[88]||(r[88]=c("span",{class:"summary-label"},"Variant:",-1)),c("span",DT,N(Ti()),1)])):X("",!0),ne.value.length>0?(I(),O("div",kT,[r[89]||(r[89]=c("span",{class:"summary-label"},"Removed:",-1)),c("span",NT,N(Ze()),1)])):X("",!0),Bs()>0?(I(),O("div",LT,[r[90]||(r[90]=c("span",{class:"summary-label"},"Add-ons:",-1)),c("span",$T,N(Pn()),1)])):X("",!0)]),c("div",MT,[r[92]||(r[92]=c("label",{class:"me-3 fw-semibold",style:{"font-size":"0.85rem"}},"Quantity:",-1)),c("div",PT,[c("button",{class:"qty-btn",onClick:za,disabled:pt.value<=1},"",8,RT),c("div",FT,N(pt.value),1),c("button",{class:"qty-btn",onClick:Ha},"+")])]),c("div",qT,[r[93]||(r[93]=c("label",{class:"fw-semibold mb-1",style:{"font-size":"0.85rem"}},[c("i",{class:"bi bi-chat-left-text me-1"}),he(" Kitchen Note (Optional) ")],-1)),dt(c("textarea",{"onUpdate:modelValue":r[15]||(r[15]=l=>tn.value=l),class:"form-control form-control-sm rounded-2 shadow-sm",rows:"2",maxlength:"200",placeholder:"Special instructions...",style:{"font-size":"0.8rem"}},null,512),[[Xn,tn.value]]),c("div",BT,N(tn.value?.length||0)+"/200 ",1)])],512),[[Ki,ke.value===He.value]])])])])]),c("div",WT,[ke.value>1?(I(),O("button",{key:0,class:"btn btn-light btn-sm px-4 py-2 shadow-sm",onClick:St},[...r[95]||(r[95]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),he("Back ",-1)])])):X("",!0),ke.value<He.value?(I(),O("button",{key:1,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:wn},[...r[96]||(r[96]=[he(" Next ",-1),c("i",{class:"bi bi-arrow-right ms-1"},null,-1)])])):(I(),O("button",{key:2,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:Va},[...r[97]||(r[97]=[c("i",{class:"bi bi-cart-plus me-1"},null,-1),he("Add to Cart ",-1)])]))])])])]),c("div",UT,[c("div",VT,[c("div",HT,[c("div",zT,[c("div",null,[c("h5",KT,N($e.value?.title||"Customize Deal"),1),c("p",YT," Customizing "+N(Ne.value?.name||"item")+" ("+N(Re.value+1)+" of "+N($e.value?.menu_items?.length||0)+") ",1)]),r[98]||(r[98]=c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])],-1))]),c("div",GT,[c("div",jT,[r[99]||(r[99]=c("div",{class:"stepper-progress-bg"},null,-1)),c("div",{class:"stepper-progress-fill",style:ro({width:cl.value})},null,4),(I(!0),O(Pe,null,ot(Mi.value,(l,_)=>(I(),O("div",{key:l.id,class:"stepper-step text-center"},[c("div",{class:Zt(["stepper-circle stepper-circle-sm",Yn(_+1)])},[_+1<nt.value?(I(),O("i",QT)):(I(),O("span",XT,N(_+1),1))],2),c("small",{class:Zt(["stepper-label",{"stepper-label-active":_+1===nt.value}]),style:{"font-size":"0.7rem","margin-top":"4px",display:"block"}},N(l.name),3)]))),128))])]),c("div",ZT,[c("div",JT,[c("div",eS,[c("div",tS,[c("img",{src:$e.value?.img||"/assets/img/product/product29.jpg",class:"img-fluid rounded-3 w-100 object-fit-cover",style:{height:"200px","object-fit":"cover"},alt:"Deal"},null,8,nS),c("span",iS,[It.value>parseFloat($e.value?.price||0)?(I(),O("span",sS,[r[100]||(r[100]=he(" Deal: ",-1)),c("del",null,N(ue(n)($e.value?.price||0)),1),he(" "+N(ue(n)(It.value)),1)])):(I(),O("span",rS," Deal: "+N(ue(n)($e.value?.price||0)),1))])]),c("div",oS,[c("h6",aS,[Bt(ue(Vd),{class:"me-2 text-primary w-4"}),r[101]||(r[101]=he(" Currently Customizing ",-1))]),c("div",lS,[c("div",uS,[c("strong",null,N(Ne.value?.name),1),c("div",cS," Base Price: "+N(ue(n)(Ne.value?.price||0)),1),ps.value>0?(I(),O("div",dS," + "+N(ue(n)(ps.value))+" (Add-ons) ",1)):X("",!0),c("div",fS," Total: "+N(ue(n)(fi.value)),1)])])]),c("div",pS,[r[102]||(r[102]=c("h6",{class:"fw-bold mb-2",style:{"font-size":"0.9rem"}},[c("i",{class:"bi bi-list-check me-2 text-success"}),he(" Items in Deal ")],-1)),c("div",hS,[(I(!0),O(Pe,null,ot($e.value?.menu_items,(l,_)=>(I(),O("div",{key:_,class:"list-group-item px-0 py-2 border-0"},[c("div",_S,[zn.value.includes(_)?(I(),O("i",vS)):_===Re.value?(I(),Lb(ue(Vd),{key:1,class:"text-primary me-2 w-4"})):(I(),O("i",mS)),c("small",{class:Zt({"fw-bold":_===Re.value})},N(l.name),3)])]))),128))])])]),c("div",gS,[c("div",bS,[dt(c("div",yS,[c("div",ES,[r[104]||(r[104]=c("i",{class:"bi bi-dash-circle me-2 text-warning",style:{"font-size":"1.1rem"}},null,-1)),c("div",null,[c("h6",wS," Remove Ingredients from "+N(Ne.value?.name),1),r[103]||(r[103]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Uncheck ingredients you don't want ",-1))])]),c("div",xS,[(I(!0),O(Pe,null,ot(Us(),l=>(I(),O("div",{key:l.id,class:"col-md-6"},[c("div",{class:Zt(["d-flex align-items-center p-2 border rounded-2 shadow-sm",{"bg-light text-muted":Br(l.id)}])},[c("input",{type:"checkbox",class:"form-check-input me-2",style:{width:"16px",height:"16px"},id:"deal-ingredient-"+l.id,checked:!Br(l.id),disabled:!Br(l.id)&&Pi()===1,onChange:_=>fl(l.id)},null,40,AS),c("label",{for:"deal-ingredient-"+l.id,class:"form-check-label",style:{"font-size":"0.8rem"}},N(l.product_name||l.name),9,CS)],2)]))),128))])],512),[[Ki,nt.value===1&&$i.value]]),dt(c("div",TS,[c("div",SS,[r[106]||(r[106]=c("i",{class:"bi bi-plus-circle me-2 text-success",style:{"font-size":"1.1rem"}},null,-1)),c("div",null,[c("h6",IS," Add Add-ons to "+N(Ne.value?.name),1),r[105]||(r[105]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Enhance this item (charges may apply) ",-1))])]),(I(!0),O(Pe,null,ot(Ne.value?.addon_groups,l=>(I(),O("div",{key:l.group_id,class:"mb-3"},[c("label",OS,[c("span",null,N(l.group_name),1),l.max_select>0?(I(),O("span",DS," Max "+N(l.max_select),1)):X("",!0)]),Bt(ue(Ud),{modelValue:At.value[Re.value]?.[l.group_id]||[],"onUpdate:modelValue":_=>pl(l.group_id,_),options:l.addons,optionLabel:"name",dataKey:"id",placeholder:"Select add-ons",maxSelectedLabels:2,class:"w-100",appendTo:"self"},null,8,["modelValue","onUpdate:modelValue","options"])]))),128))],512),[[Ki,nt.value===2&&Kn.value]]),dt(c("div",kS,[c("div",NS,[Bt(ue(Hb),{class:"me-2 text-primary w-5",style:{"font-size":"1.1rem"}}),c("div",null,[c("h6",LS," Review "+N(Ne.value?.name),1),r[107]||(r[107]=c("p",{class:"text-muted mb-0",style:{"font-size":"0.75rem"}}," Confirm your customizations ",-1))])]),c("div",$S,[r[114]||(r[114]=c("h6",{class:"fw-bold mb-2 text-secondary"},"Customization Summary",-1)),c("div",MS,[r[108]||(r[108]=c("span",{class:"summary-label"},"Item:",-1)),c("span",PS,N(Ne.value?.name),1)]),c("div",RS,[r[109]||(r[109]=c("span",{class:"summary-label"},"Base Price:",-1)),c("span",FS,N(ue(n)(Ne.value?.price||0)),1)]),Ur()?(I(),O("div",qS,[r[110]||(r[110]=c("span",{class:"summary-label"},"Removed:",-1)),c("span",BS,N(Ur()),1)])):X("",!0),hl()>0?(I(),O("div",WS,[r[111]||(r[111]=c("span",{class:"summary-label"},"Add-ons:",-1)),c("span",US,N(Wr()),1)])):X("",!0),ps.value>0?(I(),O("div",VS,[r[112]||(r[112]=c("span",{class:"summary-label"},"Add-ons Cost:",-1)),c("span",HS," + "+N(ue(n)(ps.value)),1)])):X("",!0),c("div",zS,[r[113]||(r[113]=c("span",{class:"summary-label fw-bold"},"Item Total:",-1)),c("span",KS,N(ue(n)(fi.value)),1)])]),c("div",YS,[c("label",GS,[r[115]||(r[115]=c("i",{class:"bi bi-chat-left-text me-1"},null,-1)),he(" Kitchen Note for "+N(Ne.value?.name)+" (Optional) ",1)]),dt(c("textarea",{"onUpdate:modelValue":r[16]||(r[16]=l=>Hn.value[Re.value]=l),class:"form-control form-control-sm rounded-2 shadow-sm",rows:"2",maxlength:"200",placeholder:"Special instructions for this item...",style:{"font-size":"0.8rem"}},"                                    ",512),[[Xn,Hn.value[Re.value]]]),c("div",jS,N((Hn.value[Re.value]||"").length)+"/200 ",1)])],512),[[Ki,nt.value===fs.value]])])])])]),c("div",QS,[c("div",XS,[nt.value>1?(I(),O("button",{key:0,class:"btn btn-secondary btn-sm px-4 py-2 shadow-sm",onClick:_l},[...r[116]||(r[116]=[c("i",{class:"bi bi-arrow-left me-1"},null,-1),he("Back ",-1)])])):X("",!0),nt.value<fs.value?(I(),O("button",{key:1,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:Vs},[...r[117]||(r[117]=[he(" Next ",-1),c("i",{class:"bi bi-arrow-right ms-1"},null,-1)])])):dl.value?(I(),O("button",{key:3,class:"btn btn-primary btn-sm px-4 py-2 shadow-sm",onClick:ml},[...r[119]||(r[119]=[c("i",{class:"bi bi-cart-plus me-1"},null,-1),he("Add Deal to Cart ",-1)])])):(I(),O("button",{key:2,class:"btn btn-success btn-sm px-4 py-2 shadow-sm",onClick:vl},[...r[118]||(r[118]=[c("i",{class:"bi bi-check2 me-1"},null,-1),he("Next Item ",-1)])]))])])])])]),c("div",ZS,[c("div",JS,[c("div",e2,[r[130]||(r[130]=c("div",{class:"modal-header border-0 pb-2"},[c("h5",{class:"modal-title fw-bold"},[c("i",{class:"bi bi-puzzle-fill text-primary me-2"}),he(" Manage Add-ons ")]),c("button",{class:"absolute top-2 right-2 p-2 rounded-full hover:bg-gray-100 transition transform hover:scale-110","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])])],-1)),tt.value?(I(),O("div",t2,[c("div",n2,[c("div",i2,[c("img",{src:tt.value.img,alt:"",class:"rounded",style:{width:"60px",height:"60px","object-fit":"cover"}},null,8,s2),c("div",r2,[c("div",o2,N(tt.value.title),1),c("div",a2,[c("small",l2,[r[120]||(r[120]=c("i",{class:"bi bi-tag me-1"},null,-1)),r[121]||(r[121]=he(" Base Price: ",-1)),c("span",u2,N(ue(n)(tt.value?.unit_price-Pt(q.value[Bn.value]||{addons:[]}))),1)]),c("small",c2,[r[122]||(r[122]=c("i",{class:"bi bi-box me-1"},null,-1)),r[123]||(r[123]=he(" Quantity: ",-1)),c("span",d2,N(tt.value.qty),1)])])])])]),tt.value.addons&&tt.value.addons.length>0?(I(),O("div",f2,[c("table",p2,[r[126]||(r[126]=c("thead",{class:"table-light"},[c("tr",null,[c("th",{style:{width:"60px"},class:"text-center"},"Select"),c("th",null,"Items"),c("th",{style:{width:"120px"},class:"text-center"},"Price"),c("th",{style:{width:"200px"},class:"text-center"},"Quantity")])],-1)),c("tbody",null,[(I(!0),O(Pe,null,ot(tt.value.addons,l=>(I(),O("tr",{key:l.id,class:Zt({"table-active":l.selected!==!1})},[c("td",h2,[c("div",_2,[c("input",{type:"checkbox",class:"form-check-input",checked:l.selected!==!1,onChange:_=>di(l),style:{width:"22px",height:"22px",cursor:"pointer"}},null,40,v2)])]),c("td",null,[c("div",m2,[c("div",{class:Zt(["addon-status-indicator",l.selected!==!1?"bg-success":"bg-secondary"])},null,2),c("div",null,[c("div",g2,N(l.name),1),l.group_name?(I(),O("small",b2,N(l.group_name),1)):X("",!0)])])]),c("td",y2,[c("span",E2," +"+N(ue(n)(l.price)),1)]),c("td",null,[c("div",w2,[c("button",{class:"btn btn-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px"},onClick:_=>Mr(l),disabled:!l.selected||(l.quantity||1)<=1},[...r[124]||(r[124]=[c("i",{class:"bi bi-dash-lg"},null,-1)])],8,x2),c("span",A2,N(l.quantity||1),1),c("button",{class:"btn btn-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px"},onClick:_=>Lo(l),disabled:!l.selected},[...r[125]||(r[125]=[c("i",{class:"bi bi-plus-lg"},null,-1)])],8,C2)])])],2))),128))])])])):(I(),O("div",T2,[...r[127]||(r[127]=[c("i",{class:"bi bi-inbox",style:{"font-size":"3rem",opacity:"0.3"}},null,-1),c("p",{class:"mb-0 mt-3 fw-semibold"},"No add-ons available for this item",-1)])])),c("div",S2,[Bs()>0?(I(),O("div",I2,[c("small",O2,[r[128]||(r[128]=c("i",{class:"bi bi-check-circle-fill me-1"},null,-1)),he(" "+N(Bs())+" add-on(s) selected  Add-ons Total: "+N(ue(n)(Pt(tt.value))),1)])])):X("",!0)])])):X("",!0),c("div",{class:"modal-footer border-0 pt-0 bg-light"},[r[129]||(r[129]=c("button",{type:"button",class:"btn btn-secondary px-2 py-2","data-bs-dismiss":"modal"}," Cancel ",-1)),c("button",{type:"button",class:"btn btn-primary px-2 py-2",onClick:$o}," Save ")])])])]),Bt(Fb,{show:Rs.value,kot:In.value,loading:Do.value,onClose:r[17]||(r[17]=l=>Rs.value=!1),onStatusUpdated:Or},null,8,["show","kot","loading"]),Bt(Pb,{show:$s.value,order:Di.value,money:Cr,onClose:r[18]||(r[18]=l=>$s.value=!1)},null,8,["show","order"]),Bt(Mb,{show:Ms.value,customer:yt.value,"delivery-location":Ht.value,phone:Qe.value,"order-type":Le.value,"selected-table":at.value,"order-items":q.value,"grand-total":Ie.value,money:Cr,cashReceived:Ir.value,"onUpdate:cashReceived":r[19]||(r[19]=l=>Ir.value=l),client_secret:u.client_secret,order_code:u.order_code,"sub-total":Kt.value,tax:ui.value,"service-charges":ri.value,"delivery-charges":si.value,"promo-discount":li.value,"promo-id":qe.value?.id,"promo-name":qe.value?.name,"promo-type":qe.value?.type,"promo-discount-amount":li.value,note:qn.value,"kitchen-note":Tn.value,"order-date":new Date().toISOString().split("T")[0],"order-time":new Date().toTimeString().split(" ")[0],"payment-method":Ya.value,change:Ps.value,onClose:r[20]||(r[20]=l=>Ms.value=!1),onConfirm:So,appliedPromos:tl.value,"approved-discounts":ts.value,"approved-discount-details":ht.value.map(l=>({discount_id:l.id,discount_name:l.name,discount_percentage:l.percentage,discount_amount:ns(l.percentage),approval_id:l.approval_id}))},null,8,["show","customer","delivery-location","phone","order-type","selected-table","order-items","grand-total","cashReceived","client_secret","order_code","sub-total","tax","service-charges","delivery-charges","promo-discount","promo-id","promo-name","promo-type","promo-discount-amount","note","kitchen-note","order-date","order-time","payment-method","change","appliedPromos","approved-discounts","approved-discount-details"]),Bt(Bb,{show:os.value,orders:Dr.value,onClose:r[21]||(r[21]=l=>os.value=!1),onViewDetails:Ja,loading:Fs.value},null,8,["show","orders","loading"]),Bt(Rb,{show:as.value,loading:kr.value,promos:qs.value,"order-items":q.value,onApplyPromo:Qa,onClose:r[22]||(r[22]=l=>as.value=!1)},null,8,["show","loading","promos","order-items"]),Bt(Ub,{show:ls.value,discounts:us.value,"order-items":q.value,loading:Nr.value,"applied-discounts":ht.value,"rejected-discounts":Ni.value,onClose:r[23]||(r[23]=l=>ls.value=!1),onApplyDiscount:xo,onClearDiscount:To},null,8,["show","discounts","order-items","loading","applied-discounts","rejected-discounts"]),Bt(cx,{show:Sn.value,"missing-ingredients":$t.value,onClose:r[24]||(r[24]=l=>{Sn.value=!1,ja.value=null}),onConfirm:Io},null,8,["show","missing-ingredients"]),Bt(Vb,{show:Hs.value,"pending-orders":Ri.value,loading:Vr.value,onClose:r[25]||(r[25]=l=>Hs.value=!1),onResume:A,onReject:Y},null,8,["show","pending-orders","loading"])])]),_:1})],64))}},oI=Ob(D2,[["__scopeId","data-v-62920240"]]);export{oI as default};
